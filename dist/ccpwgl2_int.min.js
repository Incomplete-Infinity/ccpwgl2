!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./index.js")}({"../node_modules/core-js/internals/a-function.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"../node_modules/core-js/internals/a-possible-prototype.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"../node_modules/core-js/internals/add-to-unscopables.js":function(e,t,r){var n=r("../node_modules/core-js/internals/well-known-symbol.js"),i=r("../node_modules/core-js/internals/object-create.js"),o=r("../node_modules/core-js/internals/object-define-property.js"),a=n("unscopables"),u=Array.prototype;null==u[a]&&o.f(u,a,{configurable:!0,value:i(null)}),e.exports=function(e){u[a][e]=!0}},"../node_modules/core-js/internals/advance-string-index.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/string-multibyte.js").charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},"../node_modules/core-js/internals/an-instance.js":function(e,t){e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},"../node_modules/core-js/internals/an-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},"../node_modules/core-js/internals/array-buffer-native.js":function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},"../node_modules/core-js/internals/array-buffer-view-core.js":function(e,t,r){"use strict";var n,i=r("../node_modules/core-js/internals/array-buffer-native.js"),o=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/global.js"),u=r("../node_modules/core-js/internals/is-object.js"),c=r("../node_modules/core-js/internals/has.js"),l=r("../node_modules/core-js/internals/classof.js"),s=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),f=r("../node_modules/core-js/internals/redefine.js"),p=r("../node_modules/core-js/internals/object-define-property.js").f,d=r("../node_modules/core-js/internals/object-get-prototype-of.js"),y=r("../node_modules/core-js/internals/object-set-prototype-of.js"),m=r("../node_modules/core-js/internals/well-known-symbol.js"),b=r("../node_modules/core-js/internals/uid.js"),h=a.Int8Array,v=h&&h.prototype,g=a.Uint8ClampedArray,w=g&&g.prototype,x=h&&d(h),_=v&&d(v),z=Object.prototype,S=z.isPrototypeOf,j=m("toStringTag"),E=b("TYPED_ARRAY_TAG"),T=i&&!!y&&"Opera"!==l(a.opera),O=!1,R={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},P=function(e){return u(e)&&c(R,l(e))};for(n in R)a[n]||(T=!1);if((!T||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},T))for(n in R)a[n]&&y(a[n],x);if((!T||!_||_===z)&&(_=x.prototype,T))for(n in R)a[n]&&y(a[n].prototype,_);if(T&&d(w)!==_&&y(w,_),o&&!c(_,j))for(n in O=!0,p(_,j,{get:function(){return u(this)?this[E]:void 0}}),R)a[n]&&s(a[n],E,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:O&&E,aTypedArray:function(e){if(P(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(y){if(S.call(x,e))return e}else for(var t in R)if(c(R,n)){var r=a[t];if(r&&(e===r||S.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r){if(o){if(r)for(var n in R){var i=a[n];i&&c(i.prototype,e)&&delete i.prototype[e]}_[e]&&!r||f(_,e,r?t:T&&v[e]||t)}},exportTypedArrayStaticMethod:function(e,t,r){var n,i;if(o){if(y){if(r)for(n in R)(i=a[n])&&c(i,e)&&delete i[e];if(x[e]&&!r)return;try{return f(x,e,r?t:T&&h[e]||t)}catch(e){}}for(n in R)!(i=a[n])||i[e]&&!r||f(i,e,t)}},isView:function(e){var t=l(e);return"DataView"===t||c(R,t)},isTypedArray:P,TypedArray:x,TypedArrayPrototype:_}},"../node_modules/core-js/internals/array-buffer.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/array-buffer-native.js"),a=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),u=r("../node_modules/core-js/internals/redefine-all.js"),c=r("../node_modules/core-js/internals/fails.js"),l=r("../node_modules/core-js/internals/an-instance.js"),s=r("../node_modules/core-js/internals/to-integer.js"),f=r("../node_modules/core-js/internals/to-length.js"),p=r("../node_modules/core-js/internals/to-index.js"),d=r("../node_modules/core-js/internals/ieee754.js"),y=r("../node_modules/core-js/internals/object-get-prototype-of.js"),m=r("../node_modules/core-js/internals/object-set-prototype-of.js"),b=r("../node_modules/core-js/internals/object-get-own-property-names.js").f,h=r("../node_modules/core-js/internals/object-define-property.js").f,v=r("../node_modules/core-js/internals/array-fill.js"),g=r("../node_modules/core-js/internals/set-to-string-tag.js"),w=r("../node_modules/core-js/internals/internal-state.js"),x=w.get,_=w.set,z=n.ArrayBuffer,S=z,j=n.DataView,E=j&&j.prototype,T=Object.prototype,O=n.RangeError,R=d.pack,P=d.unpack,D=function(e){return[255&e]},A=function(e){return[255&e,e>>8&255]},M=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},C=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},k=function(e){return R(e,23,4)},I=function(e){return R(e,52,8)},L=function(e,t){h(e.prototype,t,{get:function(){return x(this)[t]}})},G=function(e,t,r,n){var i=p(r),o=x(e);if(i+t>o.byteLength)throw O("Wrong index");var a=x(o.buffer).bytes,u=i+o.byteOffset,c=a.slice(u,u+t);return n?c:c.reverse()},F=function(e,t,r,n,i,o){var a=p(r),u=x(e);if(a+t>u.byteLength)throw O("Wrong index");for(var c=x(u.buffer).bytes,l=a+u.byteOffset,s=n(+i),f=0;f<t;f++)c[l+f]=s[o?f:t-f-1]};if(o){if(!c((function(){z(1)}))||!c((function(){new z(-1)}))||c((function(){return new z,new z(1.5),new z(NaN),"ArrayBuffer"!=z.name}))){for(var B,N=(S=function(e){return l(this,S),new z(p(e))}).prototype=z.prototype,U=b(z),V=0;U.length>V;)(B=U[V++])in S||a(S,B,z[B]);N.constructor=S}m&&y(E)!==T&&m(E,T);var q=new j(new S(2)),H=E.setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||u(E,{setInt8:function(e,t){H.call(this,e,t<<24>>24)},setUint8:function(e,t){H.call(this,e,t<<24>>24)}},{unsafe:!0})}else S=function(e){l(this,S,"ArrayBuffer");var t=p(e);_(this,{bytes:v.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},j=function(e,t,r){l(this,j,"DataView"),l(e,S,"DataView");var n=x(e).byteLength,o=s(t);if(o<0||o>n)throw O("Wrong offset");if(o+(r=void 0===r?n-o:f(r))>n)throw O("Wrong length");_(this,{buffer:e,byteLength:r,byteOffset:o}),i||(this.buffer=e,this.byteLength=r,this.byteOffset=o)},i&&(L(S,"byteLength"),L(j,"buffer"),L(j,"byteLength"),L(j,"byteOffset")),u(j.prototype,{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){var t=G(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=G(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return C(G(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return C(G(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return P(G(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return P(G(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){F(this,1,e,D,t)},setUint8:function(e,t){F(this,1,e,D,t)},setInt16:function(e,t){F(this,2,e,A,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){F(this,2,e,A,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){F(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){F(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){F(this,4,e,k,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){F(this,8,e,I,t,arguments.length>2?arguments[2]:void 0)}});g(S,"ArrayBuffer"),g(j,"DataView"),e.exports={ArrayBuffer:S,DataView:j}},"../node_modules/core-js/internals/array-copy-within.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-object.js"),i=r("../node_modules/core-js/internals/to-absolute-index.js"),o=r("../node_modules/core-js/internals/to-length.js"),a=Math.min;e.exports=[].copyWithin||function(e,t){var r=n(this),u=o(r.length),c=i(e,u),l=i(t,u),s=arguments.length>2?arguments[2]:void 0,f=a((void 0===s?u:i(s,u))-l,u-c),p=1;for(l<c&&c<l+f&&(p=-1,l+=f-1,c+=f-1);f-- >0;)l in r?r[c]=r[l]:delete r[c],c+=p,l+=p;return r}},"../node_modules/core-js/internals/array-fill.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-object.js"),i=r("../node_modules/core-js/internals/to-absolute-index.js"),o=r("../node_modules/core-js/internals/to-length.js");e.exports=function(e){for(var t=n(this),r=o(t.length),a=arguments.length,u=i(a>1?arguments[1]:void 0,r),c=a>2?arguments[2]:void 0,l=void 0===c?r:i(c,r);l>u;)t[u++]=e;return t}},"../node_modules/core-js/internals/array-for-each.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-iteration.js").forEach,i=r("../node_modules/core-js/internals/array-method-is-strict.js"),o=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),a=i("forEach"),u=o("forEach");e.exports=a&&u?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"../node_modules/core-js/internals/array-from.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/function-bind-context.js"),i=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/call-with-safe-iteration-closing.js"),a=r("../node_modules/core-js/internals/is-array-iterator-method.js"),u=r("../node_modules/core-js/internals/to-length.js"),c=r("../node_modules/core-js/internals/create-property.js"),l=r("../node_modules/core-js/internals/get-iterator-method.js");e.exports=function(e){var t,r,s,f,p,d,y=i(e),m="function"==typeof this?this:Array,b=arguments.length,h=b>1?arguments[1]:void 0,v=void 0!==h,g=l(y),w=0;if(v&&(h=n(h,b>2?arguments[2]:void 0,2)),null==g||m==Array&&a(g))for(r=new m(t=u(y.length));t>w;w++)d=v?h(y[w],w):y[w],c(r,w,d);else for(p=(f=g.call(y)).next,r=new m;!(s=p.call(f)).done;w++)d=v?o(f,h,[s.value,w],!0):s.value,c(r,w,d);return r.length=w,r}},"../node_modules/core-js/internals/array-includes.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-indexed-object.js"),i=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/to-absolute-index.js"),a=function(e){return function(t,r,a){var u,c=n(t),l=i(c.length),s=o(a,l);if(e&&r!=r){for(;l>s;)if((u=c[s++])!=u)return!0}else for(;l>s;s++)if((e||s in c)&&c[s]===r)return e||s||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"../node_modules/core-js/internals/array-iteration.js":function(e,t,r){var n=r("../node_modules/core-js/internals/function-bind-context.js"),i=r("../node_modules/core-js/internals/indexed-object.js"),o=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),u=r("../node_modules/core-js/internals/array-species-create.js"),c=[].push,l=function(e){var t=1==e,r=2==e,l=3==e,s=4==e,f=6==e,p=5==e||f;return function(d,y,m,b){for(var h,v,g=o(d),w=i(g),x=n(y,m,3),_=a(w.length),z=0,S=b||u,j=t?S(d,_):r?S(d,0):void 0;_>z;z++)if((p||z in w)&&(v=x(h=w[z],z,g),e))if(t)j[z]=v;else if(v)switch(e){case 3:return!0;case 5:return h;case 6:return z;case 2:c.call(j,h)}else if(s)return!1;return f?-1:l||s?s:j}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},"../node_modules/core-js/internals/array-last-index-of.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-indexed-object.js"),i=r("../node_modules/core-js/internals/to-integer.js"),o=r("../node_modules/core-js/internals/to-length.js"),a=r("../node_modules/core-js/internals/array-method-is-strict.js"),u=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),c=Math.min,l=[].lastIndexOf,s=!!l&&1/[1].lastIndexOf(1,-0)<0,f=a("lastIndexOf"),p=u("indexOf",{ACCESSORS:!0,1:0}),d=s||!f||!p;e.exports=d?function(e){if(s)return l.apply(this,arguments)||0;var t=n(this),r=o(t.length),a=r-1;for(arguments.length>1&&(a=c(a,i(arguments[1]))),a<0&&(a=r+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:l},"../node_modules/core-js/internals/array-method-has-species-support.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/well-known-symbol.js"),o=r("../node_modules/core-js/internals/engine-v8-version.js"),a=i("species");e.exports=function(e){return o>=51||!n((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"../node_modules/core-js/internals/array-method-is-strict.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/fails.js");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},"../node_modules/core-js/internals/array-method-uses-to-length.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/has.js"),a=Object.defineProperty,u={},c=function(e){throw e};e.exports=function(e,t){if(o(u,e))return u[e];t||(t={});var r=[][e],l=!!o(t,"ACCESSORS")&&t.ACCESSORS,s=o(t,0)?t[0]:c,f=o(t,1)?t[1]:void 0;return u[e]=!!r&&!i((function(){if(l&&!n)return!0;var e={length:-1};l?a(e,1,{enumerable:!0,get:c}):e[1]=1,r.call(e,s,f)}))}},"../node_modules/core-js/internals/array-reduce.js":function(e,t,r){var n=r("../node_modules/core-js/internals/a-function.js"),i=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/indexed-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),u=function(e){return function(t,r,u,c){n(r);var l=i(t),s=o(l),f=a(l.length),p=e?f-1:0,d=e?-1:1;if(u<2)for(;;){if(p in s){c=s[p],p+=d;break}if(p+=d,e?p<0:f<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:f>p;p+=d)p in s&&(c=r(c,s[p],p,l));return c}};e.exports={left:u(!1),right:u(!0)}},"../node_modules/core-js/internals/array-species-create.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js"),i=r("../node_modules/core-js/internals/is-array.js"),o=r("../node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e,t){var r;return i(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!i(r.prototype)?n(r)&&null===(r=r[o])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},"../node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js");e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},"../node_modules/core-js/internals/check-correctness-of-iteration.js":function(e,t,r){var n=r("../node_modules/core-js/internals/well-known-symbol.js")("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},"../node_modules/core-js/internals/classof-raw.js":function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},"../node_modules/core-js/internals/classof.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-string-tag-support.js"),i=r("../node_modules/core-js/internals/classof-raw.js"),o=r("../node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:a?i(t):"Object"==(n=i(t))&&"function"==typeof t.callee?"Arguments":n}},"../node_modules/core-js/internals/collection-strong.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/object-define-property.js").f,i=r("../node_modules/core-js/internals/object-create.js"),o=r("../node_modules/core-js/internals/redefine-all.js"),a=r("../node_modules/core-js/internals/function-bind-context.js"),u=r("../node_modules/core-js/internals/an-instance.js"),c=r("../node_modules/core-js/internals/iterate.js"),l=r("../node_modules/core-js/internals/define-iterator.js"),s=r("../node_modules/core-js/internals/set-species.js"),f=r("../node_modules/core-js/internals/descriptors.js"),p=r("../node_modules/core-js/internals/internal-metadata.js").fastKey,d=r("../node_modules/core-js/internals/internal-state.js"),y=d.set,m=d.getterFor;e.exports={getConstructor:function(e,t,r,l){var s=e((function(e,n){u(e,s,t),y(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),f||(e.size=0),null!=n&&c(n,e[l],e,r)})),d=m(t),b=function(e,t,r){var n,i,o=d(e),a=h(e,t);return a?a.value=r:(o.last=a={index:i=p(t,!0),key:t,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),f?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},h=function(e,t){var r,n=d(e),i=p(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return o(s.prototype,{clear:function(){for(var e=d(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,f?e.size=0:this.size=0},delete:function(e){var t=d(this),r=h(this,e);if(r){var n=r.next,i=r.previous;delete t.index[r.index],r.removed=!0,i&&(i.next=n),n&&(n.previous=i),t.first==r&&(t.first=n),t.last==r&&(t.last=i),f?t.size--:this.size--}return!!r},forEach:function(e){for(var t,r=d(this),n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!h(this,e)}}),o(s.prototype,r?{get:function(e){var t=h(this,e);return t&&t.value},set:function(e,t){return b(this,0===e?0:e,t)}}:{add:function(e){return b(this,e=0===e?0:e,e)}}),f&&n(s.prototype,"size",{get:function(){return d(this).size}}),s},setStrong:function(e,t,r){var n=t+" Iterator",i=m(t),o=m(n);l(e,t,(function(e,t){y(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),s(t)}}},"../node_modules/core-js/internals/collection-weak.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/redefine-all.js"),i=r("../node_modules/core-js/internals/internal-metadata.js").getWeakData,o=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/is-object.js"),u=r("../node_modules/core-js/internals/an-instance.js"),c=r("../node_modules/core-js/internals/iterate.js"),l=r("../node_modules/core-js/internals/array-iteration.js"),s=r("../node_modules/core-js/internals/has.js"),f=r("../node_modules/core-js/internals/internal-state.js"),p=f.set,d=f.getterFor,y=l.find,m=l.findIndex,b=0,h=function(e){return e.frozen||(e.frozen=new v)},v=function(){this.entries=[]},g=function(e,t){return y(e.entries,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var r=g(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=m(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,l){var f=e((function(e,n){u(e,f,t),p(e,{type:t,id:b++,frozen:void 0}),null!=n&&c(n,e[l],e,r)})),y=d(t),m=function(e,t,r){var n=y(e),a=i(o(t),!0);return!0===a?h(n).set(t,r):a[n.id]=r,e};return n(f.prototype,{delete:function(e){var t=y(this);if(!a(e))return!1;var r=i(e);return!0===r?h(t).delete(e):r&&s(r,t.id)&&delete r[t.id]},has:function(e){var t=y(this);if(!a(e))return!1;var r=i(e);return!0===r?h(t).has(e):r&&s(r,t.id)}}),n(f.prototype,r?{get:function(e){var t=y(this);if(a(e)){var r=i(e);return!0===r?h(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return m(this,e,t)}}:{add:function(e){return m(this,e,!0)}}),f}}},"../node_modules/core-js/internals/collection.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/is-forced.js"),a=r("../node_modules/core-js/internals/redefine.js"),u=r("../node_modules/core-js/internals/internal-metadata.js"),c=r("../node_modules/core-js/internals/iterate.js"),l=r("../node_modules/core-js/internals/an-instance.js"),s=r("../node_modules/core-js/internals/is-object.js"),f=r("../node_modules/core-js/internals/fails.js"),p=r("../node_modules/core-js/internals/check-correctness-of-iteration.js"),d=r("../node_modules/core-js/internals/set-to-string-tag.js"),y=r("../node_modules/core-js/internals/inherit-if-required.js");e.exports=function(e,t,r){var m=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),h=m?"set":"add",v=i[e],g=v&&v.prototype,w=v,x={},_=function(e){var t=g[e];a(g,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(b&&!s(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!s(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(b&&!s(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})};if(o(e,"function"!=typeof v||!(b||g.forEach&&!f((function(){(new v).entries().next()})))))w=r.getConstructor(t,e,m,h),u.REQUIRED=!0;else if(o(e,!0)){var z=new w,S=z[h](b?{}:-0,1)!=z,j=f((function(){z.has(1)})),E=p((function(e){new v(e)})),T=!b&&f((function(){for(var e=new v,t=5;t--;)e[h](t,t);return!e.has(-0)}));E||((w=t((function(t,r){l(t,w,e);var n=y(new v,t,w);return null!=r&&c(r,n[h],n,m),n}))).prototype=g,g.constructor=w),(j||T)&&(_("delete"),_("has"),m&&_("get")),(T||S)&&_(h),b&&g.clear&&delete g.clear}return x[e]=w,n({global:!0,forced:w!=v},x),d(w,e),b||r.setStrong(w,e,m),w}},"../node_modules/core-js/internals/copy-constructor-properties.js":function(e,t,r){var n=r("../node_modules/core-js/internals/has.js"),i=r("../node_modules/core-js/internals/own-keys.js"),o=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),a=r("../node_modules/core-js/internals/object-define-property.js");e.exports=function(e,t){for(var r=i(t),u=a.f,c=o.f,l=0;l<r.length;l++){var s=r[l];n(e,s)||u(e,s,c(t,s))}}},"../node_modules/core-js/internals/correct-is-regexp-logic.js":function(e,t,r){var n=r("../node_modules/core-js/internals/well-known-symbol.js")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},"../node_modules/core-js/internals/correct-prototype-getter.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},"../node_modules/core-js/internals/create-html.js":function(e,t,r){var n=r("../node_modules/core-js/internals/require-object-coercible.js"),i=/"/g;e.exports=function(e,t,r,o){var a=String(n(e)),u="<"+t;return""!==r&&(u+=" "+r+'="'+String(o).replace(i,"&quot;")+'"'),u+">"+a+"</"+t+">"}},"../node_modules/core-js/internals/create-iterator-constructor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/iterators-core.js").IteratorPrototype,i=r("../node_modules/core-js/internals/object-create.js"),o=r("../node_modules/core-js/internals/create-property-descriptor.js"),a=r("../node_modules/core-js/internals/set-to-string-tag.js"),u=r("../node_modules/core-js/internals/iterators.js"),c=function(){return this};e.exports=function(e,t,r){var l=t+" Iterator";return e.prototype=i(n,{next:o(1,r)}),a(e,l,!1,!0),u[l]=c,e}},"../node_modules/core-js/internals/create-non-enumerable-property.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/object-define-property.js"),o=r("../node_modules/core-js/internals/create-property-descriptor.js");e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},"../node_modules/core-js/internals/create-property-descriptor.js":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"../node_modules/core-js/internals/create-property.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-primitive.js"),i=r("../node_modules/core-js/internals/object-define-property.js"),o=r("../node_modules/core-js/internals/create-property-descriptor.js");e.exports=function(e,t,r){var a=n(t);a in e?i.f(e,a,o(0,r)):e[a]=r}},"../node_modules/core-js/internals/date-to-iso-string.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/string-pad.js").start,o=Math.abs,a=Date.prototype,u=a.getTime,c=a.toISOString;e.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=c.call(new Date(-50000000000001))}))||!n((function(){c.call(new Date(NaN))}))?function(){if(!isFinite(u.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+i(o(e),r?6:4,0)+"-"+i(this.getUTCMonth()+1,2,0)+"-"+i(this.getUTCDate(),2,0)+"T"+i(this.getUTCHours(),2,0)+":"+i(this.getUTCMinutes(),2,0)+":"+i(this.getUTCSeconds(),2,0)+"."+i(t,3,0)+"Z"}:c},"../node_modules/core-js/internals/date-to-primitive.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/to-primitive.js");e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),"number"!==e)}},"../node_modules/core-js/internals/define-iterator.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-iterator-constructor.js"),o=r("../node_modules/core-js/internals/object-get-prototype-of.js"),a=r("../node_modules/core-js/internals/object-set-prototype-of.js"),u=r("../node_modules/core-js/internals/set-to-string-tag.js"),c=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),l=r("../node_modules/core-js/internals/redefine.js"),s=r("../node_modules/core-js/internals/well-known-symbol.js"),f=r("../node_modules/core-js/internals/is-pure.js"),p=r("../node_modules/core-js/internals/iterators.js"),d=r("../node_modules/core-js/internals/iterators-core.js"),y=d.IteratorPrototype,m=d.BUGGY_SAFARI_ITERATORS,b=s("iterator"),h=function(){return this};e.exports=function(e,t,r,s,d,v,g){i(r,t,s);var w,x,_,z=function(e){if(e===d&&O)return O;if(!m&&e in E)return E[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},S=t+" Iterator",j=!1,E=e.prototype,T=E[b]||E["@@iterator"]||d&&E[d],O=!m&&T||z(d),R="Array"==t&&E.entries||T;if(R&&(w=o(R.call(new e)),y!==Object.prototype&&w.next&&(f||o(w)===y||(a?a(w,y):"function"!=typeof w[b]&&c(w,b,h)),u(w,S,!0,!0),f&&(p[S]=h))),"values"==d&&T&&"values"!==T.name&&(j=!0,O=function(){return T.call(this)}),f&&!g||E[b]===O||c(E,b,O),p[t]=O,d)if(x={values:z("values"),keys:v?O:z("keys"),entries:z("entries")},g)for(_ in x)(m||j||!(_ in E))&&l(E,_,x[_]);else n({target:t,proto:!0,forced:m||j},x);return x}},"../node_modules/core-js/internals/define-well-known-symbol.js":function(e,t,r){var n=r("../node_modules/core-js/internals/path.js"),i=r("../node_modules/core-js/internals/has.js"),o=r("../node_modules/core-js/internals/well-known-symbol-wrapped.js"),a=r("../node_modules/core-js/internals/object-define-property.js").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},"../node_modules/core-js/internals/descriptors.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"../node_modules/core-js/internals/document-create-element.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/is-object.js"),o=n.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},"../node_modules/core-js/internals/dom-iterables.js":function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"../node_modules/core-js/internals/engine-is-ios.js":function(e,t,r){var n=r("../node_modules/core-js/internals/engine-user-agent.js");e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},"../node_modules/core-js/internals/engine-user-agent.js":function(e,t,r){var n=r("../node_modules/core-js/internals/get-built-in.js");e.exports=n("navigator","userAgent")||""},"../node_modules/core-js/internals/engine-v8-version.js":function(e,t,r){var n,i,o=r("../node_modules/core-js/internals/global.js"),a=r("../node_modules/core-js/internals/engine-user-agent.js"),u=o.process,c=u&&u.versions,l=c&&c.v8;l?i=(n=l.split("."))[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=n[1]),e.exports=i&&+i},"../node_modules/core-js/internals/enum-bug-keys.js":function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"../node_modules/core-js/internals/export.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,o=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),a=r("../node_modules/core-js/internals/redefine.js"),u=r("../node_modules/core-js/internals/set-global.js"),c=r("../node_modules/core-js/internals/copy-constructor-properties.js"),l=r("../node_modules/core-js/internals/is-forced.js");e.exports=function(e,t){var r,s,f,p,d,y=e.target,m=e.global,b=e.stat;if(r=m?n:b?n[y]||u(y,{}):(n[y]||{}).prototype)for(s in t){if(p=t[s],f=e.noTargetGet?(d=i(r,s))&&d.value:r[s],!l(m?s:y+(b?".":"#")+s,e.forced)&&void 0!==f){if(typeof p==typeof f)continue;c(p,f)}(e.sham||f&&f.sham)&&o(p,"sham",!0),a(r,s,p,e)}}},"../node_modules/core-js/internals/fails.js":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.regexp.exec.js");var n=r("../node_modules/core-js/internals/redefine.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/well-known-symbol.js"),a=r("../node_modules/core-js/internals/regexp-exec.js"),u=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),c=o("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),s="$0"==="a".replace(/./,"$0"),f=o("replace"),p=!!/./[f]&&""===/./[f]("a","$0"),d=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,f){var y=o(e),m=!i((function(){var t={};return t[y]=function(){return 7},7!=""[e](t)})),b=m&&!i((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[c]=function(){return r},r.flags="",r[y]=/./[y]),r.exec=function(){return t=!0,null},r[y](""),!t}));if(!m||!b||"replace"===e&&(!l||!s||p)||"split"===e&&!d){var h=/./[y],v=r(y,""[e],(function(e,t,r,n,i){return t.exec===a?m&&!i?{done:!0,value:h.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:s,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),g=v[0],w=v[1];n(String.prototype,e,g),n(RegExp.prototype,y,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}f&&u(RegExp.prototype[y],"sham",!0)}},"../node_modules/core-js/internals/flatten-into-array.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/is-array.js"),i=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/function-bind-context.js"),a=function(e,t,r,u,c,l,s,f){for(var p,d=c,y=0,m=!!s&&o(s,f,3);y<u;){if(y in r){if(p=m?m(r[y],y,t):r[y],l>0&&n(p))d=a(e,t,p,i(p.length),d,l-1)-1;else{if(d>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[d]=p}d++}y++}return d};e.exports=a},"../node_modules/core-js/internals/freezing.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},"../node_modules/core-js/internals/function-bind-context.js":function(e,t,r){var n=r("../node_modules/core-js/internals/a-function.js");e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},"../node_modules/core-js/internals/function-bind.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/a-function.js"),i=r("../node_modules/core-js/internals/is-object.js"),o=[].slice,a={},u=function(e,t,r){if(!(t in a)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";a[t]=Function("C,a","return new C("+n.join(",")+")")}return a[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=o.call(arguments,1),a=function(){var n=r.concat(o.call(arguments));return this instanceof a?u(t,n.length,n):t.apply(e,n)};return i(t.prototype)&&(a.prototype=t.prototype),a}},"../node_modules/core-js/internals/get-built-in.js":function(e,t,r){var n=r("../node_modules/core-js/internals/path.js"),i=r("../node_modules/core-js/internals/global.js"),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e])||o(i[e]):n[e]&&n[e][t]||i[e]&&i[e][t]}},"../node_modules/core-js/internals/get-iterator-method.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof.js"),i=r("../node_modules/core-js/internals/iterators.js"),o=r("../node_modules/core-js/internals/well-known-symbol.js")("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[n(e)]}},"../node_modules/core-js/internals/get-iterator.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/get-iterator-method.js");e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},"../node_modules/core-js/internals/global.js":function(e,t,r){(function(t){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||Function("return this")()}).call(this,r("../node_modules/webpack/buildin/global.js"))},"../node_modules/core-js/internals/has.js":function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},"../node_modules/core-js/internals/hidden-keys.js":function(e,t){e.exports={}},"../node_modules/core-js/internals/host-report-errors.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js");e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},"../node_modules/core-js/internals/html.js":function(e,t,r){var n=r("../node_modules/core-js/internals/get-built-in.js");e.exports=n("document","documentElement")},"../node_modules/core-js/internals/ie8-dom-define.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/document-create-element.js");e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"../node_modules/core-js/internals/ieee754.js":function(e,t){var r=Math.abs,n=Math.pow,i=Math.floor,o=Math.log,a=Math.LN2;e.exports={pack:function(e,t,u){var c,l,s,f=new Array(u),p=8*u-t-1,d=(1<<p)-1,y=d>>1,m=23===t?n(2,-24)-n(2,-77):0,b=e<0||0===e&&1/e<0?1:0,h=0;for((e=r(e))!=e||e===1/0?(l=e!=e?1:0,c=d):(c=i(o(e)/a),e*(s=n(2,-c))<1&&(c--,s*=2),(e+=c+y>=1?m/s:m*n(2,1-y))*s>=2&&(c++,s/=2),c+y>=d?(l=0,c=d):c+y>=1?(l=(e*s-1)*n(2,t),c+=y):(l=e*n(2,y-1)*n(2,t),c=0));t>=8;f[h++]=255&l,l/=256,t-=8);for(c=c<<t|l,p+=t;p>0;f[h++]=255&c,c/=256,p-=8);return f[--h]|=128*b,f},unpack:function(e,t){var r,i=e.length,o=8*i-t-1,a=(1<<o)-1,u=a>>1,c=o-7,l=i-1,s=e[l--],f=127&s;for(s>>=7;c>0;f=256*f+e[l],l--,c-=8);for(r=f&(1<<-c)-1,f>>=-c,c+=t;c>0;r=256*r+e[l],l--,c-=8);if(0===f)f=1-u;else{if(f===a)return r?NaN:s?-1/0:1/0;r+=n(2,t),f-=u}return(s?-1:1)*r*n(2,f-t)}}},"../node_modules/core-js/internals/indexed-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/classof-raw.js"),o="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},"../node_modules/core-js/internals/inherit-if-required.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js"),i=r("../node_modules/core-js/internals/object-set-prototype-of.js");e.exports=function(e,t,r){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==r&&n(a=o.prototype)&&a!==r.prototype&&i(e,a),e}},"../node_modules/core-js/internals/inspect-source.js":function(e,t,r){var n=r("../node_modules/core-js/internals/shared-store.js"),i=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return i.call(e)}),e.exports=n.inspectSource},"../node_modules/core-js/internals/internal-metadata.js":function(e,t,r){var n=r("../node_modules/core-js/internals/hidden-keys.js"),i=r("../node_modules/core-js/internals/is-object.js"),o=r("../node_modules/core-js/internals/has.js"),a=r("../node_modules/core-js/internals/object-define-property.js").f,u=r("../node_modules/core-js/internals/uid.js"),c=r("../node_modules/core-js/internals/freezing.js"),l=u("meta"),s=0,f=Object.isExtensible||function(){return!0},p=function(e){a(e,l,{value:{objectID:"O"+ ++s,weakData:{}}})},d=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,l)){if(!f(e))return"F";if(!t)return"E";p(e)}return e[l].objectID},getWeakData:function(e,t){if(!o(e,l)){if(!f(e))return!0;if(!t)return!1;p(e)}return e[l].weakData},onFreeze:function(e){return c&&d.REQUIRED&&f(e)&&!o(e,l)&&p(e),e}};n[l]=!0},"../node_modules/core-js/internals/internal-state.js":function(e,t,r){var n,i,o,a=r("../node_modules/core-js/internals/native-weak-map.js"),u=r("../node_modules/core-js/internals/global.js"),c=r("../node_modules/core-js/internals/is-object.js"),l=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),s=r("../node_modules/core-js/internals/has.js"),f=r("../node_modules/core-js/internals/shared-key.js"),p=r("../node_modules/core-js/internals/hidden-keys.js"),d=u.WeakMap;if(a){var y=new d,m=y.get,b=y.has,h=y.set;n=function(e,t){return h.call(y,e,t),t},i=function(e){return m.call(y,e)||{}},o=function(e){return b.call(y,e)}}else{var v=f("state");p[v]=!0,n=function(e,t){return l(e,v,t),t},i=function(e){return s(e,v)?e[v]:{}},o=function(e){return s(e,v)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},"../node_modules/core-js/internals/is-array-iterator-method.js":function(e,t,r){var n=r("../node_modules/core-js/internals/well-known-symbol.js"),i=r("../node_modules/core-js/internals/iterators.js"),o=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},"../node_modules/core-js/internals/is-array.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof-raw.js");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"../node_modules/core-js/internals/is-forced.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),i=/#|\.prototype\./,o=function(e,t){var r=u[a(e)];return r==l||r!=c&&("function"==typeof t?n(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},u=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},"../node_modules/core-js/internals/is-integer.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js"),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},"../node_modules/core-js/internals/is-object.js":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"../node_modules/core-js/internals/is-pure.js":function(e,t){e.exports=!1},"../node_modules/core-js/internals/is-regexp.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js"),i=r("../node_modules/core-js/internals/classof-raw.js"),o=r("../node_modules/core-js/internals/well-known-symbol.js")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},"../node_modules/core-js/internals/iterate.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/is-array-iterator-method.js"),o=r("../node_modules/core-js/internals/to-length.js"),a=r("../node_modules/core-js/internals/function-bind-context.js"),u=r("../node_modules/core-js/internals/get-iterator-method.js"),c=r("../node_modules/core-js/internals/call-with-safe-iteration-closing.js"),l=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,r,s,f){var p,d,y,m,b,h,v,g=a(t,r,s?2:1);if(f)p=e;else{if("function"!=typeof(d=u(e)))throw TypeError("Target is not iterable");if(i(d)){for(y=0,m=o(e.length);m>y;y++)if((b=s?g(n(v=e[y])[0],v[1]):g(e[y]))&&b instanceof l)return b;return new l(!1)}p=d.call(e)}for(h=p.next;!(v=h.call(p)).done;)if("object"==typeof(b=c(p,g,v.value,s))&&b&&b instanceof l)return b;return new l(!1)}).stop=function(e){return new l(!0,e)}},"../node_modules/core-js/internals/iterators-core.js":function(e,t,r){"use strict";var n,i,o,a=r("../node_modules/core-js/internals/object-get-prototype-of.js"),u=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),c=r("../node_modules/core-js/internals/has.js"),l=r("../node_modules/core-js/internals/well-known-symbol.js"),s=r("../node_modules/core-js/internals/is-pure.js"),f=l("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(n=i):p=!0),null==n&&(n={}),s||c(n,f)||u(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},"../node_modules/core-js/internals/iterators.js":function(e,t){e.exports={}},"../node_modules/core-js/internals/math-expm1.js":function(e,t){var r=Math.expm1,n=Math.exp;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:n(e)-1}:r},"../node_modules/core-js/internals/math-fround.js":function(e,t,r){var n=r("../node_modules/core-js/internals/math-sign.js"),i=Math.abs,o=Math.pow,a=o(2,-52),u=o(2,-23),c=o(2,127)*(2-u),l=o(2,-126);e.exports=Math.fround||function(e){var t,r,o=i(e),s=n(e);return o<l?s*(o/l/u+1/a-1/a)*l*u:(r=(t=(1+u/a)*o)-(t-o))>c||r!=r?s*(1/0):s*r}},"../node_modules/core-js/internals/math-log1p.js":function(e,t){var r=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:r(1+e)}},"../node_modules/core-js/internals/math-sign.js":function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},"../node_modules/core-js/internals/microtask.js":function(e,t,r){var n,i,o,a,u,c,l,s,f=r("../node_modules/core-js/internals/global.js"),p=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,d=r("../node_modules/core-js/internals/classof-raw.js"),y=r("../node_modules/core-js/internals/task.js").set,m=r("../node_modules/core-js/internals/engine-is-ios.js"),b=f.MutationObserver||f.WebKitMutationObserver,h=f.process,v=f.Promise,g="process"==d(h),w=p(f,"queueMicrotask"),x=w&&w.value;x||(n=function(){var e,t;for(g&&(e=h.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},g?a=function(){h.nextTick(n)}:b&&!m?(u=!0,c=document.createTextNode(""),new b(n).observe(c,{characterData:!0}),a=function(){c.data=u=!u}):v&&v.resolve?(l=v.resolve(void 0),s=l.then,a=function(){s.call(l,n)}):a=function(){y.call(f,n)}),e.exports=x||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},"../node_modules/core-js/internals/native-promise-constructor.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js");e.exports=n.Promise},"../node_modules/core-js/internals/native-symbol.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},"../node_modules/core-js/internals/native-url.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/well-known-symbol.js"),o=r("../node_modules/core-js/internals/is-pure.js"),a=i("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},"../node_modules/core-js/internals/native-weak-map.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/inspect-source.js"),o=n.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},"../node_modules/core-js/internals/new-promise-capability.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/a-function.js"),i=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new i(e)}},"../node_modules/core-js/internals/not-a-regexp.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-regexp.js");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"../node_modules/core-js/internals/number-is-finite.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js").isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&n(e)}},"../node_modules/core-js/internals/number-parse-float.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/string-trim.js").trim,o=r("../node_modules/core-js/internals/whitespaces.js"),a=n.parseFloat,u=1/a(o+"-0")!=-1/0;e.exports=u?function(e){var t=i(String(e)),r=a(t);return 0===r&&"-"==t.charAt(0)?-0:r}:a},"../node_modules/core-js/internals/number-parse-int.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/string-trim.js").trim,o=r("../node_modules/core-js/internals/whitespaces.js"),a=n.parseInt,u=/^[+-]?0[Xx]/,c=8!==a(o+"08")||22!==a(o+"0x16");e.exports=c?function(e,t){var r=i(String(e));return a(r,t>>>0||(u.test(r)?16:10))}:a},"../node_modules/core-js/internals/object-assign.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/object-keys.js"),a=r("../node_modules/core-js/internals/object-get-own-property-symbols.js"),u=r("../node_modules/core-js/internals/object-property-is-enumerable.js"),c=r("../node_modules/core-js/internals/to-object.js"),l=r("../node_modules/core-js/internals/indexed-object.js"),s=Object.assign,f=Object.defineProperty;e.exports=!s||i((function(){if(n&&1!==s({b:1},s(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol();return e[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=s({},e)[r]||"abcdefghijklmnopqrst"!=o(s({},t)).join("")}))?function(e,t){for(var r=c(e),i=arguments.length,s=1,f=a.f,p=u.f;i>s;)for(var d,y=l(arguments[s++]),m=f?o(y).concat(f(y)):o(y),b=m.length,h=0;b>h;)d=m[h++],n&&!p.call(y,d)||(r[d]=y[d]);return r}:s},"../node_modules/core-js/internals/object-create.js":function(e,t,r){var n,i=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/object-define-properties.js"),a=r("../node_modules/core-js/internals/enum-bug-keys.js"),u=r("../node_modules/core-js/internals/hidden-keys.js"),c=r("../node_modules/core-js/internals/html.js"),l=r("../node_modules/core-js/internals/document-create-element.js"),s=r("../node_modules/core-js/internals/shared-key.js"),f=s("IE_PROTO"),p=function(){},d=function(e){return"<script>"+e+"<\/script>"},y=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;y=n?function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F);for(var r=a.length;r--;)delete y.prototype[a[r]];return y()};u[f]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p.prototype=i(e),r=new p,p.prototype=null,r[f]=e):r=y(),void 0===t?r:o(r,t)}},"../node_modules/core-js/internals/object-define-properties.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/object-define-property.js"),o=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/object-keys.js");e.exports=n?Object.defineProperties:function(e,t){o(e);for(var r,n=a(t),u=n.length,c=0;u>c;)i.f(e,r=n[c++],t[r]);return e}},"../node_modules/core-js/internals/object-define-property.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/ie8-dom-define.js"),o=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/to-primitive.js"),u=Object.defineProperty;t.f=n?u:function(e,t,r){if(o(e),t=a(t,!0),o(r),i)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},"../node_modules/core-js/internals/object-get-own-property-descriptor.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/object-property-is-enumerable.js"),o=r("../node_modules/core-js/internals/create-property-descriptor.js"),a=r("../node_modules/core-js/internals/to-indexed-object.js"),u=r("../node_modules/core-js/internals/to-primitive.js"),c=r("../node_modules/core-js/internals/has.js"),l=r("../node_modules/core-js/internals/ie8-dom-define.js"),s=Object.getOwnPropertyDescriptor;t.f=n?s:function(e,t){if(e=a(e),t=u(t,!0),l)try{return s(e,t)}catch(e){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},"../node_modules/core-js/internals/object-get-own-property-names-external.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-indexed-object.js"),i=r("../node_modules/core-js/internals/object-get-own-property-names.js").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(n(e))}},"../node_modules/core-js/internals/object-get-own-property-names.js":function(e,t,r){var n=r("../node_modules/core-js/internals/object-keys-internal.js"),i=r("../node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},"../node_modules/core-js/internals/object-get-own-property-symbols.js":function(e,t){t.f=Object.getOwnPropertySymbols},"../node_modules/core-js/internals/object-get-prototype-of.js":function(e,t,r){var n=r("../node_modules/core-js/internals/has.js"),i=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/shared-key.js"),a=r("../node_modules/core-js/internals/correct-prototype-getter.js"),u=o("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),n(e,u)?e[u]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},"../node_modules/core-js/internals/object-keys-internal.js":function(e,t,r){var n=r("../node_modules/core-js/internals/has.js"),i=r("../node_modules/core-js/internals/to-indexed-object.js"),o=r("../node_modules/core-js/internals/array-includes.js").indexOf,a=r("../node_modules/core-js/internals/hidden-keys.js");e.exports=function(e,t){var r,u=i(e),c=0,l=[];for(r in u)!n(a,r)&&n(u,r)&&l.push(r);for(;t.length>c;)n(u,r=t[c++])&&(~o(l,r)||l.push(r));return l}},"../node_modules/core-js/internals/object-keys.js":function(e,t,r){var n=r("../node_modules/core-js/internals/object-keys-internal.js"),i=r("../node_modules/core-js/internals/enum-bug-keys.js");e.exports=Object.keys||function(e){return n(e,i)}},"../node_modules/core-js/internals/object-property-is-enumerable.js":function(e,t,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},"../node_modules/core-js/internals/object-prototype-accessors-forced.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/is-pure.js"),i=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/fails.js");e.exports=n||!o((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete i[e]}))},"../node_modules/core-js/internals/object-set-prototype-of.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/a-possible-prototype.js");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,o){return n(r),i(o),t?e.call(r,o):r.__proto__=o,r}}():void 0)},"../node_modules/core-js/internals/object-to-array.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/object-keys.js"),o=r("../node_modules/core-js/internals/to-indexed-object.js"),a=r("../node_modules/core-js/internals/object-property-is-enumerable.js").f,u=function(e){return function(t){for(var r,u=o(t),c=i(u),l=c.length,s=0,f=[];l>s;)r=c[s++],n&&!a.call(u,r)||f.push(e?[r,u[r]]:u[r]);return f}};e.exports={entries:u(!0),values:u(!1)}},"../node_modules/core-js/internals/object-to-string.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-string-tag-support.js"),i=r("../node_modules/core-js/internals/classof.js");e.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},"../node_modules/core-js/internals/own-keys.js":function(e,t,r){var n=r("../node_modules/core-js/internals/get-built-in.js"),i=r("../node_modules/core-js/internals/object-get-own-property-names.js"),o=r("../node_modules/core-js/internals/object-get-own-property-symbols.js"),a=r("../node_modules/core-js/internals/an-object.js");e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(a(e)),r=o.f;return r?t.concat(r(e)):t}},"../node_modules/core-js/internals/path.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js");e.exports=n},"../node_modules/core-js/internals/perform.js":function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},"../node_modules/core-js/internals/promise-resolve.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/is-object.js"),o=r("../node_modules/core-js/internals/new-promise-capability.js");e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},"../node_modules/core-js/internals/redefine-all.js":function(e,t,r){var n=r("../node_modules/core-js/internals/redefine.js");e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},"../node_modules/core-js/internals/redefine.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),o=r("../node_modules/core-js/internals/has.js"),a=r("../node_modules/core-js/internals/set-global.js"),u=r("../node_modules/core-js/internals/inspect-source.js"),c=r("../node_modules/core-js/internals/internal-state.js"),l=c.get,s=c.enforce,f=String(String).split("String");(e.exports=function(e,t,r,u){var c=!!u&&!!u.unsafe,l=!!u&&!!u.enumerable,p=!!u&&!!u.noTargetGet;"function"==typeof r&&("string"!=typeof t||o(r,"name")||i(r,"name",t),s(r).source=f.join("string"==typeof t?t:"")),e!==n?(c?!p&&e[t]&&(l=!0):delete e[t],l?e[t]=r:i(e,t,r)):l?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||u(this)}))},"../node_modules/core-js/internals/regexp-exec-abstract.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof-raw.js"),i=r("../node_modules/core-js/internals/regexp-exec.js");e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var o=r.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"../node_modules/core-js/internals/regexp-exec.js":function(e,t,r){"use strict";var n,i,o=r("../node_modules/core-js/internals/regexp-flags.js"),a=r("../node_modules/core-js/internals/regexp-sticky-helpers.js"),u=RegExp.prototype.exec,c=String.prototype.replace,l=u,s=(n=/a/,i=/b*/g,u.call(n,"a"),u.call(i,"a"),0!==n.lastIndex||0!==i.lastIndex),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(s||p||f)&&(l=function(e){var t,r,n,i,a=this,l=f&&a.sticky,d=o.call(a),y=a.source,m=0,b=e;return l&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),b=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(y="(?: "+y+")",b=" "+b,m++),r=new RegExp("^(?:"+y+")",d)),p&&(r=new RegExp("^"+y+"$(?!\\s)",d)),s&&(t=a.lastIndex),n=u.call(l?r:a,b),l?n?(n.input=n.input.slice(m),n[0]=n[0].slice(m),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:s&&n&&(a.lastIndex=a.global?n.index+n[0].length:t),p&&n&&n.length>1&&c.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n}),e.exports=l},"../node_modules/core-js/internals/regexp-flags.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/an-object.js");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"../node_modules/core-js/internals/regexp-sticky-helpers.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/fails.js");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},"../node_modules/core-js/internals/require-object-coercible.js":function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},"../node_modules/core-js/internals/same-value.js":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},"../node_modules/core-js/internals/set-global.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/create-non-enumerable-property.js");e.exports=function(e,t){try{i(n,e,t)}catch(r){n[e]=t}return t}},"../node_modules/core-js/internals/set-species.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/get-built-in.js"),i=r("../node_modules/core-js/internals/object-define-property.js"),o=r("../node_modules/core-js/internals/well-known-symbol.js"),a=r("../node_modules/core-js/internals/descriptors.js"),u=o("species");e.exports=function(e){var t=n(e),r=i.f;a&&t&&!t[u]&&r(t,u,{configurable:!0,get:function(){return this}})}},"../node_modules/core-js/internals/set-to-string-tag.js":function(e,t,r){var n=r("../node_modules/core-js/internals/object-define-property.js").f,i=r("../node_modules/core-js/internals/has.js"),o=r("../node_modules/core-js/internals/well-known-symbol.js")("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},"../node_modules/core-js/internals/shared-key.js":function(e,t,r){var n=r("../node_modules/core-js/internals/shared.js"),i=r("../node_modules/core-js/internals/uid.js"),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},"../node_modules/core-js/internals/shared-store.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/set-global.js"),o=n["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},"../node_modules/core-js/internals/shared.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-pure.js"),i=r("../node_modules/core-js/internals/shared-store.js");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"../node_modules/core-js/internals/species-constructor.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/a-function.js"),o=r("../node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[o])?t:i(r)}},"../node_modules/core-js/internals/string-html-forced.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=function(e){return n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},"../node_modules/core-js/internals/string-multibyte.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),i=r("../node_modules/core-js/internals/require-object-coercible.js"),o=function(e){return function(t,r){var o,a,u=String(i(t)),c=n(r),l=u.length;return c<0||c>=l?e?"":void 0:(o=u.charCodeAt(c))<55296||o>56319||c+1===l||(a=u.charCodeAt(c+1))<56320||a>57343?e?u.charAt(c):o:e?u.slice(c,c+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},"../node_modules/core-js/internals/string-pad-webkit-bug.js":function(e,t,r){var n=r("../node_modules/core-js/internals/engine-user-agent.js");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},"../node_modules/core-js/internals/string-pad.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-length.js"),i=r("../node_modules/core-js/internals/string-repeat.js"),o=r("../node_modules/core-js/internals/require-object-coercible.js"),a=Math.ceil,u=function(e){return function(t,r,u){var c,l,s=String(o(t)),f=s.length,p=void 0===u?" ":String(u),d=n(r);return d<=f||""==p?s:(c=d-f,(l=i.call(p,a(c/p.length))).length>c&&(l=l.slice(0,c)),e?s+l:l+s)}};e.exports={start:u(!1),end:u(!0)}},"../node_modules/core-js/internals/string-punycode-to-ascii.js":function(e,t,r){"use strict";var n=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",a=Math.floor,u=String.fromCharCode,c=function(e){return e+22+75*(e<26)},l=function(e,t,r){var n=0;for(e=r?a(e/700):e>>1,e+=a(e/t);e>455;n+=36)e=a(e/35);return a(n+36*e/(e+38))},s=function(e){var t,r,n=[],i=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t}(e)).length,s=128,f=0,p=72;for(t=0;t<e.length;t++)(r=e[t])<128&&n.push(u(r));var d=n.length,y=d;for(d&&n.push("-");y<i;){var m=2147483647;for(t=0;t<e.length;t++)(r=e[t])>=s&&r<m&&(m=r);var b=y+1;if(m-s>a((2147483647-f)/b))throw RangeError(o);for(f+=(m-s)*b,s=m,t=0;t<e.length;t++){if((r=e[t])<s&&++f>2147483647)throw RangeError(o);if(r==s){for(var h=f,v=36;;v+=36){var g=v<=p?1:v>=p+26?26:v-p;if(h<g)break;var w=h-g,x=36-g;n.push(u(c(g+w%x))),h=a(w/x)}n.push(u(c(h))),p=l(f,b,y==d),f=0,++y}}++f,++s}return n.join("")};e.exports=function(e){var t,r,o=[],a=e.toLowerCase().replace(i,".").split(".");for(t=0;t<a.length;t++)r=a[t],o.push(n.test(r)?"xn--"+s(r):r);return o.join(".")}},"../node_modules/core-js/internals/string-repeat.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-integer.js"),i=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports="".repeat||function(e){var t=String(i(this)),r="",o=n(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},"../node_modules/core-js/internals/string-trim-forced.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/whitespaces.js");e.exports=function(e){return n((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},"../node_modules/core-js/internals/string-trim.js":function(e,t,r){var n=r("../node_modules/core-js/internals/require-object-coercible.js"),i="["+r("../node_modules/core-js/internals/whitespaces.js")+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),u=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(a,"")),r}};e.exports={start:u(1),end:u(2),trim:u(3)}},"../node_modules/core-js/internals/task.js":function(e,t,r){var n,i,o,a=r("../node_modules/core-js/internals/global.js"),u=r("../node_modules/core-js/internals/fails.js"),c=r("../node_modules/core-js/internals/classof-raw.js"),l=r("../node_modules/core-js/internals/function-bind-context.js"),s=r("../node_modules/core-js/internals/html.js"),f=r("../node_modules/core-js/internals/document-create-element.js"),p=r("../node_modules/core-js/internals/engine-is-ios.js"),d=a.location,y=a.setImmediate,m=a.clearImmediate,b=a.process,h=a.MessageChannel,v=a.Dispatch,g=0,w={},x=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},_=function(e){return function(){x(e)}},z=function(e){x(e.data)},S=function(e){a.postMessage(e+"",d.protocol+"//"+d.host)};y&&m||(y=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return w[++g]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(g),g},m=function(e){delete w[e]},"process"==c(b)?n=function(e){b.nextTick(_(e))}:v&&v.now?n=function(e){v.now(_(e))}:h&&!p?(o=(i=new h).port2,i.port1.onmessage=z,n=l(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||u(S)||"file:"===d.protocol?n="onreadystatechange"in f("script")?function(e){s.appendChild(f("script")).onreadystatechange=function(){s.removeChild(this),x(e)}}:function(e){setTimeout(_(e),0)}:(n=S,a.addEventListener("message",z,!1))),e.exports={set:y,clear:m}},"../node_modules/core-js/internals/this-number-value.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof-raw.js");e.exports=function(e){if("number"!=typeof e&&"Number"!=n(e))throw TypeError("Incorrect invocation");return+e}},"../node_modules/core-js/internals/to-absolute-index.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},"../node_modules/core-js/internals/to-index.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),i=r("../node_modules/core-js/internals/to-length.js");e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length or index");return r}},"../node_modules/core-js/internals/to-indexed-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/indexed-object.js"),i=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return n(i(e))}},"../node_modules/core-js/internals/to-integer.js":function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},"../node_modules/core-js/internals/to-length.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},"../node_modules/core-js/internals/to-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return Object(n(e))}},"../node_modules/core-js/internals/to-offset.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-positive-integer.js");e.exports=function(e,t){var r=n(e);if(r%t)throw RangeError("Wrong offset");return r}},"../node_modules/core-js/internals/to-positive-integer.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js");e.exports=function(e){var t=n(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},"../node_modules/core-js/internals/to-primitive.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"../node_modules/core-js/internals/to-string-tag-support.js":function(e,t,r){var n={};n[r("../node_modules/core-js/internals/well-known-symbol.js")("toStringTag")]="z",e.exports="[object z]"===String(n)},"../node_modules/core-js/internals/typed-array-constructor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/typed-array-constructors-require-wrappers.js"),u=r("../node_modules/core-js/internals/array-buffer-view-core.js"),c=r("../node_modules/core-js/internals/array-buffer.js"),l=r("../node_modules/core-js/internals/an-instance.js"),s=r("../node_modules/core-js/internals/create-property-descriptor.js"),f=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),p=r("../node_modules/core-js/internals/to-length.js"),d=r("../node_modules/core-js/internals/to-index.js"),y=r("../node_modules/core-js/internals/to-offset.js"),m=r("../node_modules/core-js/internals/to-primitive.js"),b=r("../node_modules/core-js/internals/has.js"),h=r("../node_modules/core-js/internals/classof.js"),v=r("../node_modules/core-js/internals/is-object.js"),g=r("../node_modules/core-js/internals/object-create.js"),w=r("../node_modules/core-js/internals/object-set-prototype-of.js"),x=r("../node_modules/core-js/internals/object-get-own-property-names.js").f,_=r("../node_modules/core-js/internals/typed-array-from.js"),z=r("../node_modules/core-js/internals/array-iteration.js").forEach,S=r("../node_modules/core-js/internals/set-species.js"),j=r("../node_modules/core-js/internals/object-define-property.js"),E=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),T=r("../node_modules/core-js/internals/internal-state.js"),O=r("../node_modules/core-js/internals/inherit-if-required.js"),R=T.get,P=T.set,D=j.f,A=E.f,M=Math.round,C=i.RangeError,k=c.ArrayBuffer,I=c.DataView,L=u.NATIVE_ARRAY_BUFFER_VIEWS,G=u.TYPED_ARRAY_TAG,F=u.TypedArray,B=u.TypedArrayPrototype,N=u.aTypedArrayConstructor,U=u.isTypedArray,V=function(e,t){for(var r=0,n=t.length,i=new(N(e))(n);n>r;)i[r]=t[r++];return i},q=function(e,t){D(e,t,{get:function(){return R(this)[t]}})},H=function(e){var t;return e instanceof k||"ArrayBuffer"==(t=h(e))||"SharedArrayBuffer"==t},W=function(e,t){return U(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},X=function(e,t){return W(e,t=m(t,!0))?s(2,e[t]):A(e,t)},K=function(e,t,r){return!(W(e,t=m(t,!0))&&v(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?D(e,t,r):(e[t]=r.value,e)};o?(L||(E.f=X,j.f=K,q(B,"buffer"),q(B,"byteOffset"),q(B,"byteLength"),q(B,"length")),n({target:"Object",stat:!0,forced:!L},{getOwnPropertyDescriptor:X,defineProperty:K}),e.exports=function(e,t,r){var o=e.match(/\d+$/)[0]/8,u=e+(r?"Clamped":"")+"Array",c="get"+e,s="set"+e,m=i[u],b=m,h=b&&b.prototype,j={},E=function(e,t){D(e,t,{get:function(){return function(e,t){var r=R(e);return r.view[c](t*o+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var i=R(e);r&&(n=(n=M(n))<0?0:n>255?255:255&n),i.view[s](t*o+i.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};L?a&&(b=t((function(e,t,r,n){return l(e,b,u),O(v(t)?H(t)?void 0!==n?new m(t,y(r,o),n):void 0!==r?new m(t,y(r,o)):new m(t):U(t)?V(b,t):_.call(b,t):new m(d(t)),e,b)})),w&&w(b,F),z(x(m),(function(e){e in b||f(b,e,m[e])})),b.prototype=h):(b=t((function(e,t,r,n){l(e,b,u);var i,a,c,s=0,f=0;if(v(t)){if(!H(t))return U(t)?V(b,t):_.call(b,t);i=t,f=y(r,o);var m=t.byteLength;if(void 0===n){if(m%o)throw C("Wrong length");if((a=m-f)<0)throw C("Wrong length")}else if((a=p(n)*o)+f>m)throw C("Wrong length");c=a/o}else c=d(t),i=new k(a=c*o);for(P(e,{buffer:i,byteOffset:f,byteLength:a,length:c,view:new I(i)});s<c;)E(e,s++)})),w&&w(b,F),h=b.prototype=g(B)),h.constructor!==b&&f(h,"constructor",b),G&&f(h,G,u),j[u]=b,n({global:!0,forced:b!=m,sham:!L},j),"BYTES_PER_ELEMENT"in b||f(b,"BYTES_PER_ELEMENT",o),"BYTES_PER_ELEMENT"in h||f(h,"BYTES_PER_ELEMENT",o),S(u)}):e.exports=function(){}},"../node_modules/core-js/internals/typed-array-constructors-require-wrappers.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/check-correctness-of-iteration.js"),a=r("../node_modules/core-js/internals/array-buffer-view-core.js").NATIVE_ARRAY_BUFFER_VIEWS,u=n.ArrayBuffer,c=n.Int8Array;e.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new u(2),1,void 0).length}))},"../node_modules/core-js/internals/typed-array-from.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-object.js"),i=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/get-iterator-method.js"),a=r("../node_modules/core-js/internals/is-array-iterator-method.js"),u=r("../node_modules/core-js/internals/function-bind-context.js"),c=r("../node_modules/core-js/internals/array-buffer-view-core.js").aTypedArrayConstructor;e.exports=function(e){var t,r,l,s,f,p,d=n(e),y=arguments.length,m=y>1?arguments[1]:void 0,b=void 0!==m,h=o(d);if(null!=h&&!a(h))for(p=(f=h.call(d)).next,d=[];!(s=p.call(f)).done;)d.push(s.value);for(b&&y>2&&(m=u(m,arguments[2],2)),r=i(d.length),l=new(c(this))(r),t=0;r>t;t++)l[t]=b?m(d[t],t):d[t];return l}},"../node_modules/core-js/internals/uid.js":function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+n).toString(36)}},"../node_modules/core-js/internals/use-symbol-as-uid.js":function(e,t,r){var n=r("../node_modules/core-js/internals/native-symbol.js");e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"../node_modules/core-js/internals/well-known-symbol-wrapped.js":function(e,t,r){var n=r("../node_modules/core-js/internals/well-known-symbol.js");t.f=n},"../node_modules/core-js/internals/well-known-symbol.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/shared.js"),o=r("../node_modules/core-js/internals/has.js"),a=r("../node_modules/core-js/internals/uid.js"),u=r("../node_modules/core-js/internals/native-symbol.js"),c=r("../node_modules/core-js/internals/use-symbol-as-uid.js"),l=i("wks"),s=n.Symbol,f=c?s:s&&s.withoutSetter||a;e.exports=function(e){return o(l,e)||(u&&o(s,e)?l[e]=s[e]:l[e]=f("Symbol."+e)),l[e]}},"../node_modules/core-js/internals/whitespaces.js":function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"../node_modules/core-js/modules/es.array-buffer.constructor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/array-buffer.js"),a=r("../node_modules/core-js/internals/set-species.js"),u=o.ArrayBuffer;n({global:!0,forced:i.ArrayBuffer!==u},{ArrayBuffer:u}),a("ArrayBuffer")},"../node_modules/core-js/modules/es.array-buffer.is-view.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-buffer-view-core.js");n({target:"ArrayBuffer",stat:!0,forced:!i.NATIVE_ARRAY_BUFFER_VIEWS},{isView:i.isView})},"../node_modules/core-js/modules/es.array-buffer.slice.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/array-buffer.js"),a=r("../node_modules/core-js/internals/an-object.js"),u=r("../node_modules/core-js/internals/to-absolute-index.js"),c=r("../node_modules/core-js/internals/to-length.js"),l=r("../node_modules/core-js/internals/species-constructor.js"),s=o.ArrayBuffer,f=o.DataView,p=s.prototype.slice;n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new s(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(a(this),e);for(var r=a(this).byteLength,n=u(e,r),i=u(void 0===t?r:t,r),o=new(l(this,s))(c(i-n)),d=new f(this),y=new f(o),m=0;n<i;)y.setUint8(m++,d.getUint8(n++));return o}})},"../node_modules/core-js/modules/es.array.concat.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/is-array.js"),a=r("../node_modules/core-js/internals/is-object.js"),u=r("../node_modules/core-js/internals/to-object.js"),c=r("../node_modules/core-js/internals/to-length.js"),l=r("../node_modules/core-js/internals/create-property.js"),s=r("../node_modules/core-js/internals/array-species-create.js"),f=r("../node_modules/core-js/internals/array-method-has-species-support.js"),p=r("../node_modules/core-js/internals/well-known-symbol.js"),d=r("../node_modules/core-js/internals/engine-v8-version.js"),y=p("isConcatSpreadable"),m=d>=51||!i((function(){var e=[];return e[y]=!1,e.concat()[0]!==e})),b=f("concat"),h=function(e){if(!a(e))return!1;var t=e[y];return void 0!==t?!!t:o(e)};n({target:"Array",proto:!0,forced:!m||!b},{concat:function(e){var t,r,n,i,o,a=u(this),f=s(a,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(h(o=-1===t?a:arguments[t])){if(p+(i=c(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(r=0;r<i;r++,p++)r in o&&l(f,p,o[r])}else{if(p>=9007199254740991)throw TypeError("Maximum allowed index exceeded");l(f,p++,o)}return f.length=p,f}})},"../node_modules/core-js/modules/es.array.copy-within.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-copy-within.js"),o=r("../node_modules/core-js/internals/add-to-unscopables.js");n({target:"Array",proto:!0},{copyWithin:i}),o("copyWithin")},"../node_modules/core-js/modules/es.array.every.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-iteration.js").every,o=r("../node_modules/core-js/internals/array-method-is-strict.js"),a=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),u=o("every"),c=a("every");n({target:"Array",proto:!0,forced:!u||!c},{every:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.array.fill.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-fill.js"),o=r("../node_modules/core-js/internals/add-to-unscopables.js");n({target:"Array",proto:!0},{fill:i}),o("fill")},"../node_modules/core-js/modules/es.array.filter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-iteration.js").filter,o=r("../node_modules/core-js/internals/array-method-has-species-support.js"),a=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),u=o("filter"),c=a("filter");n({target:"Array",proto:!0,forced:!u||!c},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.array.find-index.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-iteration.js").findIndex,o=r("../node_modules/core-js/internals/add-to-unscopables.js"),a=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),u=!0,c=a("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){u=!1})),n({target:"Array",proto:!0,forced:u||!c},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},"../node_modules/core-js/modules/es.array.find.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-iteration.js").find,o=r("../node_modules/core-js/internals/add-to-unscopables.js"),a=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),u=!0,c=a("find");"find"in[]&&Array(1).find((function(){u=!1})),n({target:"Array",proto:!0,forced:u||!c},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("find")},"../node_modules/core-js/modules/es.array.flat-map.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/flatten-into-array.js"),o=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),u=r("../node_modules/core-js/internals/a-function.js"),c=r("../node_modules/core-js/internals/array-species-create.js");n({target:"Array",proto:!0},{flatMap:function(e){var t,r=o(this),n=a(r.length);return u(e),(t=c(r,0)).length=i(t,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},"../node_modules/core-js/modules/es.array.flat.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/flatten-into-array.js"),o=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),u=r("../node_modules/core-js/internals/to-integer.js"),c=r("../node_modules/core-js/internals/array-species-create.js");n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),r=a(t.length),n=c(t,0);return n.length=i(n,t,t,r,0,void 0===e?1:u(e)),n}})},"../node_modules/core-js/modules/es.array.for-each.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-for-each.js");n({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"../node_modules/core-js/modules/es.array.from.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-from.js");n({target:"Array",stat:!0,forced:!r("../node_modules/core-js/internals/check-correctness-of-iteration.js")((function(e){Array.from(e)}))},{from:i})},"../node_modules/core-js/modules/es.array.includes.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-includes.js").includes,o=r("../node_modules/core-js/internals/add-to-unscopables.js");n({target:"Array",proto:!0,forced:!r("../node_modules/core-js/internals/array-method-uses-to-length.js")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},"../node_modules/core-js/modules/es.array.index-of.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-includes.js").indexOf,o=r("../node_modules/core-js/internals/array-method-is-strict.js"),a=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),u=[].indexOf,c=!!u&&1/[1].indexOf(1,-0)<0,l=o("indexOf"),s=a("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:c||!l||!s},{indexOf:function(e){return c?u.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.array.is-array.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Array",stat:!0},{isArray:r("../node_modules/core-js/internals/is-array.js")})},"../node_modules/core-js/modules/es.array.iterator.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-indexed-object.js"),i=r("../node_modules/core-js/internals/add-to-unscopables.js"),o=r("../node_modules/core-js/internals/iterators.js"),a=r("../node_modules/core-js/internals/internal-state.js"),u=r("../node_modules/core-js/internals/define-iterator.js"),c=a.set,l=a.getterFor("Array Iterator");e.exports=u(Array,"Array",(function(e,t){c(this,{type:"Array Iterator",target:n(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},"../node_modules/core-js/modules/es.array.join.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/indexed-object.js"),o=r("../node_modules/core-js/internals/to-indexed-object.js"),a=r("../node_modules/core-js/internals/array-method-is-strict.js"),u=[].join,c=i!=Object,l=a("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(e){return u.call(o(this),void 0===e?",":e)}})},"../node_modules/core-js/modules/es.array.last-index-of.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-last-index-of.js");n({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},"../node_modules/core-js/modules/es.array.map.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-iteration.js").map,o=r("../node_modules/core-js/internals/array-method-has-species-support.js"),a=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),u=o("map"),c=a("map");n({target:"Array",proto:!0,forced:!u||!c},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.array.of.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/create-property.js");n({target:"Array",stat:!0,forced:i((function(){function e(){}return!(Array.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)o(r,e,arguments[e++]);return r.length=t,r}})},"../node_modules/core-js/modules/es.array.reduce-right.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-reduce.js").right,o=r("../node_modules/core-js/internals/array-method-is-strict.js"),a=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),u=o("reduceRight"),c=a("reduce",{1:0});n({target:"Array",proto:!0,forced:!u||!c},{reduceRight:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.array.reduce.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-reduce.js").left,o=r("../node_modules/core-js/internals/array-method-is-strict.js"),a=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),u=o("reduce"),c=a("reduce",{1:0});n({target:"Array",proto:!0,forced:!u||!c},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.array.reverse.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/is-array.js"),o=[].reverse,a=[1,2];n({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},"../node_modules/core-js/modules/es.array.slice.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/is-object.js"),o=r("../node_modules/core-js/internals/is-array.js"),a=r("../node_modules/core-js/internals/to-absolute-index.js"),u=r("../node_modules/core-js/internals/to-length.js"),c=r("../node_modules/core-js/internals/to-indexed-object.js"),l=r("../node_modules/core-js/internals/create-property.js"),s=r("../node_modules/core-js/internals/well-known-symbol.js"),f=r("../node_modules/core-js/internals/array-method-has-species-support.js"),p=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),d=f("slice"),y=p("slice",{ACCESSORS:!0,0:0,1:2}),m=s("species"),b=[].slice,h=Math.max;n({target:"Array",proto:!0,forced:!d||!y},{slice:function(e,t){var r,n,s,f=c(this),p=u(f.length),d=a(e,p),y=a(void 0===t?p:t,p);if(o(f)&&("function"!=typeof(r=f.constructor)||r!==Array&&!o(r.prototype)?i(r)&&null===(r=r[m])&&(r=void 0):r=void 0,r===Array||void 0===r))return b.call(f,d,y);for(n=new(void 0===r?Array:r)(h(y-d,0)),s=0;d<y;d++,s++)d in f&&l(n,s,f[d]);return n.length=s,n}})},"../node_modules/core-js/modules/es.array.some.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-iteration.js").some,o=r("../node_modules/core-js/internals/array-method-is-strict.js"),a=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),u=o("some"),c=a("some");n({target:"Array",proto:!0,forced:!u||!c},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.array.sort.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/a-function.js"),o=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/fails.js"),u=r("../node_modules/core-js/internals/array-method-is-strict.js"),c=[],l=c.sort,s=a((function(){c.sort(void 0)})),f=a((function(){c.sort(null)})),p=u("sort");n({target:"Array",proto:!0,forced:s||!f||!p},{sort:function(e){return void 0===e?l.call(o(this)):l.call(o(this),i(e))}})},"../node_modules/core-js/modules/es.array.species.js":function(e,t,r){r("../node_modules/core-js/internals/set-species.js")("Array")},"../node_modules/core-js/modules/es.array.splice.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/to-absolute-index.js"),o=r("../node_modules/core-js/internals/to-integer.js"),a=r("../node_modules/core-js/internals/to-length.js"),u=r("../node_modules/core-js/internals/to-object.js"),c=r("../node_modules/core-js/internals/array-species-create.js"),l=r("../node_modules/core-js/internals/create-property.js"),s=r("../node_modules/core-js/internals/array-method-has-species-support.js"),f=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),p=s("splice"),d=f("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,m=Math.min;n({target:"Array",proto:!0,forced:!p||!d},{splice:function(e,t){var r,n,s,f,p,d,b=u(this),h=a(b.length),v=i(e,h),g=arguments.length;if(0===g?r=n=0:1===g?(r=0,n=h-v):(r=g-2,n=m(y(o(t),0),h-v)),h+r-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(s=c(b,n),f=0;f<n;f++)(p=v+f)in b&&l(s,f,b[p]);if(s.length=n,r<n){for(f=v;f<h-n;f++)d=f+r,(p=f+n)in b?b[d]=b[p]:delete b[d];for(f=h;f>h-n+r;f--)delete b[f-1]}else if(r>n)for(f=h-n;f>v;f--)d=f+r-1,(p=f+n-1)in b?b[d]=b[p]:delete b[d];for(f=0;f<r;f++)b[f+v]=arguments[f+2];return b.length=h-n+r,s}})},"../node_modules/core-js/modules/es.array.unscopables.flat-map.js":function(e,t,r){r("../node_modules/core-js/internals/add-to-unscopables.js")("flatMap")},"../node_modules/core-js/modules/es.array.unscopables.flat.js":function(e,t,r){r("../node_modules/core-js/internals/add-to-unscopables.js")("flat")},"../node_modules/core-js/modules/es.data-view.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-buffer.js");n({global:!0,forced:!r("../node_modules/core-js/internals/array-buffer-native.js")},{DataView:i.DataView})},"../node_modules/core-js/modules/es.date.now.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},"../node_modules/core-js/modules/es.date.to-iso-string.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/date-to-iso-string.js");n({target:"Date",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},"../node_modules/core-js/modules/es.date.to-json.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-primitive.js");n({target:"Date",proto:!0,forced:i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=o(this),r=a(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},"../node_modules/core-js/modules/es.date.to-primitive.js":function(e,t,r){var n=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),i=r("../node_modules/core-js/internals/date-to-primitive.js"),o=r("../node_modules/core-js/internals/well-known-symbol.js")("toPrimitive"),a=Date.prototype;o in a||n(a,o,i)},"../node_modules/core-js/modules/es.date.to-string.js":function(e,t,r){var n=r("../node_modules/core-js/internals/redefine.js"),i=Date.prototype,o=i.toString,a=i.getTime;new Date(NaN)+""!="Invalid Date"&&n(i,"toString",(function(){var e=a.call(this);return e==e?o.call(this):"Invalid Date"}))},"../node_modules/core-js/modules/es.function.bind.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Function",proto:!0},{bind:r("../node_modules/core-js/internals/function-bind.js")})},"../node_modules/core-js/modules/es.function.has-instance.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/is-object.js"),i=r("../node_modules/core-js/internals/object-define-property.js"),o=r("../node_modules/core-js/internals/object-get-prototype-of.js"),a=r("../node_modules/core-js/internals/well-known-symbol.js")("hasInstance"),u=Function.prototype;a in u||i.f(u,a,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},"../node_modules/core-js/modules/es.function.name.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/object-define-property.js").f,o=Function.prototype,a=o.toString,u=/^\s*function ([^ (]*)/;n&&!("name"in o)&&i(o,"name",{configurable:!0,get:function(){try{return a.call(this).match(u)[1]}catch(e){return""}}})},"../node_modules/core-js/modules/es.json.to-string-tag.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js");r("../node_modules/core-js/internals/set-to-string-tag.js")(n.JSON,"JSON",!0)},"../node_modules/core-js/modules/es.map.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/collection.js"),i=r("../node_modules/core-js/internals/collection-strong.js");e.exports=n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},"../node_modules/core-js/modules/es.math.acosh.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/math-log1p.js"),o=Math.acosh,a=Math.log,u=Math.sqrt,c=Math.LN2;n({target:"Math",stat:!0,forced:!o||710!=Math.floor(o(Number.MAX_VALUE))||o(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?a(e)+c:i(e-1+u(e-1)*u(e+1))}})},"../node_modules/core-js/modules/es.math.asinh.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=Math.asinh,o=Math.log,a=Math.sqrt;n({target:"Math",stat:!0,forced:!(i&&1/i(0)>0)},{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):o(t+a(t*t+1)):t}})},"../node_modules/core-js/modules/es.math.atanh.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=Math.atanh,o=Math.log;n({target:"Math",stat:!0,forced:!(i&&1/i(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:o((1+e)/(1-e))/2}})},"../node_modules/core-js/modules/es.math.cbrt.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/math-sign.js"),o=Math.abs,a=Math.pow;n({target:"Math",stat:!0},{cbrt:function(e){return i(e=+e)*a(o(e),1/3)}})},"../node_modules/core-js/modules/es.math.clz32.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=Math.floor,o=Math.log,a=Math.LOG2E;n({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-i(o(e+.5)*a):32}})},"../node_modules/core-js/modules/es.math.cosh.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/math-expm1.js"),o=Math.cosh,a=Math.abs,u=Math.E;n({target:"Math",stat:!0,forced:!o||o(710)===1/0},{cosh:function(e){var t=i(a(e)-1)+1;return(t+1/(t*u*u))*(u/2)}})},"../node_modules/core-js/modules/es.math.expm1.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/math-expm1.js");n({target:"Math",stat:!0,forced:i!=Math.expm1},{expm1:i})},"../node_modules/core-js/modules/es.math.fround.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Math",stat:!0},{fround:r("../node_modules/core-js/internals/math-fround.js")})},"../node_modules/core-js/modules/es.math.hypot.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=Math.hypot,o=Math.abs,a=Math.sqrt;n({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(e,t){for(var r,n,i=0,u=0,c=arguments.length,l=0;u<c;)l<(r=o(arguments[u++]))?(i=i*(n=l/r)*n+1,l=r):i+=r>0?(n=r/l)*n:r;return l===1/0?1/0:l*a(i)}})},"../node_modules/core-js/modules/es.math.imul.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=Math.imul;n({target:"Math",stat:!0,forced:i((function(){return-5!=o(4294967295,5)||2!=o.length}))},{imul:function(e,t){var r=+e,n=+t,i=65535&r,o=65535&n;return 0|i*o+((65535&r>>>16)*o+i*(65535&n>>>16)<<16>>>0)}})},"../node_modules/core-js/modules/es.math.log10.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=Math.log,o=Math.LOG10E;n({target:"Math",stat:!0},{log10:function(e){return i(e)*o}})},"../node_modules/core-js/modules/es.math.log1p.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Math",stat:!0},{log1p:r("../node_modules/core-js/internals/math-log1p.js")})},"../node_modules/core-js/modules/es.math.log2.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=Math.log,o=Math.LN2;n({target:"Math",stat:!0},{log2:function(e){return i(e)/o}})},"../node_modules/core-js/modules/es.math.sign.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Math",stat:!0},{sign:r("../node_modules/core-js/internals/math-sign.js")})},"../node_modules/core-js/modules/es.math.sinh.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/math-expm1.js"),a=Math.abs,u=Math.exp,c=Math.E;n({target:"Math",stat:!0,forced:i((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){return a(e=+e)<1?(o(e)-o(-e))/2:(u(e-1)-u(-e-1))*(c/2)}})},"../node_modules/core-js/modules/es.math.tanh.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/math-expm1.js"),o=Math.exp;n({target:"Math",stat:!0},{tanh:function(e){var t=i(e=+e),r=i(-e);return t==1/0?1:r==1/0?-1:(t-r)/(o(e)+o(-e))}})},"../node_modules/core-js/modules/es.math.to-string-tag.js":function(e,t,r){r("../node_modules/core-js/internals/set-to-string-tag.js")(Math,"Math",!0)},"../node_modules/core-js/modules/es.math.trunc.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=Math.ceil,o=Math.floor;n({target:"Math",stat:!0},{trunc:function(e){return(e>0?o:i)(e)}})},"../node_modules/core-js/modules/es.number.constructor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/is-forced.js"),a=r("../node_modules/core-js/internals/redefine.js"),u=r("../node_modules/core-js/internals/has.js"),c=r("../node_modules/core-js/internals/classof-raw.js"),l=r("../node_modules/core-js/internals/inherit-if-required.js"),s=r("../node_modules/core-js/internals/to-primitive.js"),f=r("../node_modules/core-js/internals/fails.js"),p=r("../node_modules/core-js/internals/object-create.js"),d=r("../node_modules/core-js/internals/object-get-own-property-names.js").f,y=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,m=r("../node_modules/core-js/internals/object-define-property.js").f,b=r("../node_modules/core-js/internals/string-trim.js").trim,h=i.Number,v=h.prototype,g="Number"==c(p(v)),w=function(e){var t,r,n,i,o,a,u,c,l=s(e,!1);if("string"==typeof l&&l.length>2)if(43===(t=(l=b(l)).charCodeAt(0))||45===t){if(88===(r=l.charCodeAt(2))||120===r)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+l}for(a=(o=l.slice(2)).length,u=0;u<a;u++)if((c=o.charCodeAt(u))<48||c>i)return NaN;return parseInt(o,n)}return+l};if(o("Number",!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var x,_=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof _&&(g?f((function(){v.valueOf.call(r)})):"Number"!=c(r))?l(new h(w(t)),r,_):w(t)},z=n?d(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;z.length>S;S++)u(h,x=z[S])&&!u(_,x)&&m(_,x,y(h,x));_.prototype=v,v.constructor=_,a(i,"Number",_)}},"../node_modules/core-js/modules/es.number.epsilon.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},"../node_modules/core-js/modules/es.number.is-finite.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Number",stat:!0},{isFinite:r("../node_modules/core-js/internals/number-is-finite.js")})},"../node_modules/core-js/modules/es.number.is-integer.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Number",stat:!0},{isInteger:r("../node_modules/core-js/internals/is-integer.js")})},"../node_modules/core-js/modules/es.number.is-nan.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},"../node_modules/core-js/modules/es.number.is-safe-integer.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/is-integer.js"),o=Math.abs;n({target:"Number",stat:!0},{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},"../node_modules/core-js/modules/es.number.max-safe-integer.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},"../node_modules/core-js/modules/es.number.min-safe-integer.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},"../node_modules/core-js/modules/es.number.parse-float.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/number-parse-float.js");n({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},"../node_modules/core-js/modules/es.number.parse-int.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/number-parse-int.js");n({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},"../node_modules/core-js/modules/es.number.to-fixed.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/to-integer.js"),o=r("../node_modules/core-js/internals/this-number-value.js"),a=r("../node_modules/core-js/internals/string-repeat.js"),u=r("../node_modules/core-js/internals/fails.js"),c=1..toFixed,l=Math.floor,s=function(e,t,r){return 0===t?r:t%2==1?s(e,t-1,r*e):s(e*e,t/2,r)};n({target:"Number",proto:!0,forced:c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!u((function(){c.call({})}))},{toFixed:function(e){var t,r,n,u,c=o(this),f=i(e),p=[0,0,0,0,0,0],d="",y="0",m=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*p[r],p[r]=n%1e7,n=l(n/1e7)},b=function(e){for(var t=6,r=0;--t>=0;)r+=p[t],p[t]=l(r/e),r=r%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==p[e]){var r=String(p[e]);t=""===t?r:t+a.call("0",7-r.length)+r}return t};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(d="-",c=-c),c>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(c*s(2,69,1))-69)<0?c*s(2,-t,1):c/s(2,t,1),r*=4503599627370496,(t=52-t)>0){for(m(0,r),n=f;n>=7;)m(1e7,0),n-=7;for(m(s(10,n,1),0),n=t-1;n>=23;)b(1<<23),n-=23;b(1<<n),m(1,1),b(2),y=h()}else m(0,r),m(1<<-t,0),y=h()+a.call("0",f);return y=f>0?d+((u=y.length)<=f?"0."+a.call("0",f-u)+y:y.slice(0,u-f)+"."+y.slice(u-f)):d+y}})},"../node_modules/core-js/modules/es.number.to-precision.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/this-number-value.js"),a=1..toPrecision;n({target:"Number",proto:!0,forced:i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))},{toPrecision:function(e){return void 0===e?a.call(o(this)):a.call(o(this),e)}})},"../node_modules/core-js/modules/es.object.assign.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/object-assign.js");n({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},"../node_modules/core-js/modules/es.object.create.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Object",stat:!0,sham:!r("../node_modules/core-js/internals/descriptors.js")},{create:r("../node_modules/core-js/internals/object-create.js")})},"../node_modules/core-js/modules/es.object.define-getter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/object-prototype-accessors-forced.js"),a=r("../node_modules/core-js/internals/to-object.js"),u=r("../node_modules/core-js/internals/a-function.js"),c=r("../node_modules/core-js/internals/object-define-property.js");i&&n({target:"Object",proto:!0,forced:o},{__defineGetter__:function(e,t){c.f(a(this),e,{get:u(t),enumerable:!0,configurable:!0})}})},"../node_modules/core-js/modules/es.object.define-properties.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js");n({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:r("../node_modules/core-js/internals/object-define-properties.js")})},"../node_modules/core-js/modules/es.object.define-property.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js");n({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:r("../node_modules/core-js/internals/object-define-property.js").f})},"../node_modules/core-js/modules/es.object.define-setter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/object-prototype-accessors-forced.js"),a=r("../node_modules/core-js/internals/to-object.js"),u=r("../node_modules/core-js/internals/a-function.js"),c=r("../node_modules/core-js/internals/object-define-property.js");i&&n({target:"Object",proto:!0,forced:o},{__defineSetter__:function(e,t){c.f(a(this),e,{set:u(t),enumerable:!0,configurable:!0})}})},"../node_modules/core-js/modules/es.object.entries.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/object-to-array.js").entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},"../node_modules/core-js/modules/es.object.freeze.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/freezing.js"),o=r("../node_modules/core-js/internals/fails.js"),a=r("../node_modules/core-js/internals/is-object.js"),u=r("../node_modules/core-js/internals/internal-metadata.js").onFreeze,c=Object.freeze;n({target:"Object",stat:!0,forced:o((function(){c(1)})),sham:!i},{freeze:function(e){return c&&a(e)?c(u(e)):e}})},"../node_modules/core-js/modules/es.object.from-entries.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/iterate.js"),o=r("../node_modules/core-js/internals/create-property.js");n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,r){o(t,e,r)}),void 0,!0),t}})},"../node_modules/core-js/modules/es.object.get-own-property-descriptor.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/to-indexed-object.js"),a=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,u=r("../node_modules/core-js/internals/descriptors.js"),c=i((function(){a(1)}));n({target:"Object",stat:!0,forced:!u||c,sham:!u},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},"../node_modules/core-js/modules/es.object.get-own-property-descriptors.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/own-keys.js"),a=r("../node_modules/core-js/internals/to-indexed-object.js"),u=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),c=r("../node_modules/core-js/internals/create-property.js");n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,r,n=a(e),i=u.f,l=o(n),s={},f=0;l.length>f;)void 0!==(r=i(n,t=l[f++]))&&c(s,t,r);return s}})},"../node_modules/core-js/modules/es.object.get-own-property-names.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/object-get-own-property-names-external.js").f;n({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:o})},"../node_modules/core-js/modules/es.object.get-prototype-of.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/object-get-prototype-of.js"),u=r("../node_modules/core-js/internals/correct-prototype-getter.js");n({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!u},{getPrototypeOf:function(e){return a(o(e))}})},"../node_modules/core-js/modules/es.object.is-extensible.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/is-object.js"),a=Object.isExtensible;n({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isExtensible:function(e){return!!o(e)&&(!a||a(e))}})},"../node_modules/core-js/modules/es.object.is-frozen.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/is-object.js"),a=Object.isFrozen;n({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isFrozen:function(e){return!o(e)||!!a&&a(e)}})},"../node_modules/core-js/modules/es.object.is-sealed.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/is-object.js"),a=Object.isSealed;n({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isSealed:function(e){return!o(e)||!!a&&a(e)}})},"../node_modules/core-js/modules/es.object.is.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Object",stat:!0},{is:r("../node_modules/core-js/internals/same-value.js")})},"../node_modules/core-js/modules/es.object.keys.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/object-keys.js");n({target:"Object",stat:!0,forced:r("../node_modules/core-js/internals/fails.js")((function(){o(1)}))},{keys:function(e){return o(i(e))}})},"../node_modules/core-js/modules/es.object.lookup-getter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/object-prototype-accessors-forced.js"),a=r("../node_modules/core-js/internals/to-object.js"),u=r("../node_modules/core-js/internals/to-primitive.js"),c=r("../node_modules/core-js/internals/object-get-prototype-of.js"),l=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f;i&&n({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(e){var t,r=a(this),n=u(e,!0);do{if(t=l(r,n))return t.get}while(r=c(r))}})},"../node_modules/core-js/modules/es.object.lookup-setter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/object-prototype-accessors-forced.js"),a=r("../node_modules/core-js/internals/to-object.js"),u=r("../node_modules/core-js/internals/to-primitive.js"),c=r("../node_modules/core-js/internals/object-get-prototype-of.js"),l=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f;i&&n({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(e){var t,r=a(this),n=u(e,!0);do{if(t=l(r,n))return t.set}while(r=c(r))}})},"../node_modules/core-js/modules/es.object.prevent-extensions.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/is-object.js"),o=r("../node_modules/core-js/internals/internal-metadata.js").onFreeze,a=r("../node_modules/core-js/internals/freezing.js"),u=r("../node_modules/core-js/internals/fails.js"),c=Object.preventExtensions;n({target:"Object",stat:!0,forced:u((function(){c(1)})),sham:!a},{preventExtensions:function(e){return c&&i(e)?c(o(e)):e}})},"../node_modules/core-js/modules/es.object.seal.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/is-object.js"),o=r("../node_modules/core-js/internals/internal-metadata.js").onFreeze,a=r("../node_modules/core-js/internals/freezing.js"),u=r("../node_modules/core-js/internals/fails.js"),c=Object.seal;n({target:"Object",stat:!0,forced:u((function(){c(1)})),sham:!a},{seal:function(e){return c&&i(e)?c(o(e)):e}})},"../node_modules/core-js/modules/es.object.set-prototype-of.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Object",stat:!0},{setPrototypeOf:r("../node_modules/core-js/internals/object-set-prototype-of.js")})},"../node_modules/core-js/modules/es.object.to-string.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-string-tag-support.js"),i=r("../node_modules/core-js/internals/redefine.js"),o=r("../node_modules/core-js/internals/object-to-string.js");n||i(Object.prototype,"toString",o,{unsafe:!0})},"../node_modules/core-js/modules/es.object.values.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/object-to-array.js").values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},"../node_modules/core-js/modules/es.parse-float.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/number-parse-float.js");n({global:!0,forced:parseFloat!=i},{parseFloat:i})},"../node_modules/core-js/modules/es.parse-int.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/number-parse-int.js");n({global:!0,forced:parseInt!=i},{parseInt:i})},"../node_modules/core-js/modules/es.promise.finally.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/is-pure.js"),o=r("../node_modules/core-js/internals/native-promise-constructor.js"),a=r("../node_modules/core-js/internals/fails.js"),u=r("../node_modules/core-js/internals/get-built-in.js"),c=r("../node_modules/core-js/internals/species-constructor.js"),l=r("../node_modules/core-js/internals/promise-resolve.js"),s=r("../node_modules/core-js/internals/redefine.js");n({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,u("Promise")),r="function"==typeof e;return this.then(r?function(r){return l(t,e()).then((function(){return r}))}:e,r?function(r){return l(t,e()).then((function(){throw r}))}:e)}}),i||"function"!=typeof o||o.prototype.finally||s(o.prototype,"finally",u("Promise").prototype.finally)},"../node_modules/core-js/modules/es.promise.js":function(e,t,r){"use strict";var n,i,o,a,u=r("../node_modules/core-js/internals/export.js"),c=r("../node_modules/core-js/internals/is-pure.js"),l=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/get-built-in.js"),f=r("../node_modules/core-js/internals/native-promise-constructor.js"),p=r("../node_modules/core-js/internals/redefine.js"),d=r("../node_modules/core-js/internals/redefine-all.js"),y=r("../node_modules/core-js/internals/set-to-string-tag.js"),m=r("../node_modules/core-js/internals/set-species.js"),b=r("../node_modules/core-js/internals/is-object.js"),h=r("../node_modules/core-js/internals/a-function.js"),v=r("../node_modules/core-js/internals/an-instance.js"),g=r("../node_modules/core-js/internals/classof-raw.js"),w=r("../node_modules/core-js/internals/inspect-source.js"),x=r("../node_modules/core-js/internals/iterate.js"),_=r("../node_modules/core-js/internals/check-correctness-of-iteration.js"),z=r("../node_modules/core-js/internals/species-constructor.js"),S=r("../node_modules/core-js/internals/task.js").set,j=r("../node_modules/core-js/internals/microtask.js"),E=r("../node_modules/core-js/internals/promise-resolve.js"),T=r("../node_modules/core-js/internals/host-report-errors.js"),O=r("../node_modules/core-js/internals/new-promise-capability.js"),R=r("../node_modules/core-js/internals/perform.js"),P=r("../node_modules/core-js/internals/internal-state.js"),D=r("../node_modules/core-js/internals/is-forced.js"),A=r("../node_modules/core-js/internals/well-known-symbol.js"),M=r("../node_modules/core-js/internals/engine-v8-version.js"),C=A("species"),k="Promise",I=P.get,L=P.set,G=P.getterFor(k),F=f,B=l.TypeError,N=l.document,U=l.process,V=s("fetch"),q=O.f,H=q,W="process"==g(U),X=!!(N&&N.createEvent&&l.dispatchEvent),K=D(k,(function(){if(!(w(F)!==String(F))){if(66===M)return!0;if(!W&&"function"!=typeof PromiseRejectionEvent)return!0}if(c&&!F.prototype.finally)return!0;if(M>=51&&/native code/.test(F))return!1;var e=F.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[C]=t,!(e.then((function(){}))instanceof t)})),Y=K||!_((function(e){F.all(e).catch((function(){}))})),Q=function(e){var t;return!(!b(e)||"function"!=typeof(t=e.then))&&t},Z=function(e,t,r){if(!t.notified){t.notified=!0;var n=t.reactions;j((function(){for(var i=t.value,o=1==t.state,a=0;n.length>a;){var u,c,l,s=n[a++],f=o?s.ok:s.fail,p=s.resolve,d=s.reject,y=s.domain;try{f?(o||(2===t.rejection&&te(e,t),t.rejection=1),!0===f?u=i:(y&&y.enter(),u=f(i),y&&(y.exit(),l=!0)),u===s.promise?d(B("Promise-chain cycle")):(c=Q(u))?c.call(u,p,d):p(u)):d(i)}catch(e){y&&!l&&y.exit(),d(e)}}t.reactions=[],t.notified=!1,r&&!t.rejection&&$(e,t)}))}},J=function(e,t,r){var n,i;X?((n=N.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),l.dispatchEvent(n)):n={promise:t,reason:r},(i=l["on"+e])?i(n):"unhandledrejection"===e&&T("Unhandled promise rejection",r)},$=function(e,t){S.call(l,(function(){var r,n=t.value;if(ee(t)&&(r=R((function(){W?U.emit("unhandledRejection",n,e):J("unhandledrejection",e,n)})),t.rejection=W||ee(t)?2:1,r.error))throw r.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){S.call(l,(function(){W?U.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)}))},re=function(e,t,r,n){return function(i){e(t,r,i,n)}},ne=function(e,t,r,n){t.done||(t.done=!0,n&&(t=n),t.value=r,t.state=2,Z(e,t,!0))},ie=function(e,t,r,n){if(!t.done){t.done=!0,n&&(t=n);try{if(e===r)throw B("Promise can't be resolved itself");var i=Q(r);i?j((function(){var n={done:!1};try{i.call(r,re(ie,e,n,t),re(ne,e,n,t))}catch(r){ne(e,n,r,t)}})):(t.value=r,t.state=1,Z(e,t,!1))}catch(r){ne(e,{done:!1},r,t)}}};K&&(F=function(e){v(this,F,k),h(e),n.call(this);var t=I(this);try{e(re(ie,this,t),re(ne,this,t))}catch(e){ne(this,t,e)}},(n=function(e){L(this,{type:k,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(F.prototype,{then:function(e,t){var r=G(this),n=q(z(this,F));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=W?U.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&Z(this,r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n,t=I(e);this.promise=e,this.resolve=re(ie,e,t),this.reject=re(ne,e,t)},O.f=q=function(e){return e===F||e===o?new i(e):H(e)},c||"function"!=typeof f||(a=f.prototype.then,p(f.prototype,"then",(function(e,t){var r=this;return new F((function(e,t){a.call(r,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof V&&u({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return E(F,V.apply(l,arguments))}}))),u({global:!0,wrap:!0,forced:K},{Promise:F}),y(F,k,!1,!0),m(k),o=s(k),u({target:k,stat:!0,forced:K},{reject:function(e){var t=q(this);return t.reject.call(void 0,e),t.promise}}),u({target:k,stat:!0,forced:c||K},{resolve:function(e){return E(c&&this===o?F:this,e)}}),u({target:k,stat:!0,forced:Y},{all:function(e){var t=this,r=q(t),n=r.resolve,i=r.reject,o=R((function(){var r=h(t.resolve),o=[],a=0,u=1;x(e,(function(e){var c=a++,l=!1;o.push(void 0),u++,r.call(t,e).then((function(e){l||(l=!0,o[c]=e,--u||n(o))}),i)})),--u||n(o)}));return o.error&&i(o.value),r.promise},race:function(e){var t=this,r=q(t),n=r.reject,i=R((function(){var i=h(t.resolve);x(e,(function(e){i.call(t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}})},"../node_modules/core-js/modules/es.reflect.apply.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/get-built-in.js"),o=r("../node_modules/core-js/internals/a-function.js"),a=r("../node_modules/core-js/internals/an-object.js"),u=r("../node_modules/core-js/internals/fails.js"),c=i("Reflect","apply"),l=Function.apply;n({target:"Reflect",stat:!0,forced:!u((function(){c((function(){}))}))},{apply:function(e,t,r){return o(e),a(r),c?c(e,t,r):l.call(e,t,r)}})},"../node_modules/core-js/modules/es.reflect.construct.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/get-built-in.js"),o=r("../node_modules/core-js/internals/a-function.js"),a=r("../node_modules/core-js/internals/an-object.js"),u=r("../node_modules/core-js/internals/is-object.js"),c=r("../node_modules/core-js/internals/object-create.js"),l=r("../node_modules/core-js/internals/function-bind.js"),s=r("../node_modules/core-js/internals/fails.js"),f=i("Reflect","construct"),p=s((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),d=!s((function(){f((function(){}))})),y=p||d;n({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(e,t){o(e),a(t);var r=arguments.length<3?e:o(arguments[2]);if(d&&!p)return f(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(l.apply(e,n))}var i=r.prototype,s=c(u(i)?i:Object.prototype),y=Function.apply.call(e,s,t);return u(y)?y:s}})},"../node_modules/core-js/modules/es.reflect.define-property.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/to-primitive.js"),u=r("../node_modules/core-js/internals/object-define-property.js");n({target:"Reflect",stat:!0,forced:r("../node_modules/core-js/internals/fails.js")((function(){Reflect.defineProperty(u.f({},1,{value:1}),1,{value:2})})),sham:!i},{defineProperty:function(e,t,r){o(e);var n=a(t,!0);o(r);try{return u.f(e,n,r),!0}catch(e){return!1}}})},"../node_modules/core-js/modules/es.reflect.delete-property.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f;n({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var r=o(i(e),t);return!(r&&!r.configurable)&&delete e[t]}})},"../node_modules/core-js/modules/es.reflect.get-own-property-descriptor.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js");n({target:"Reflect",stat:!0,sham:!i},{getOwnPropertyDescriptor:function(e,t){return a.f(o(e),t)}})},"../node_modules/core-js/modules/es.reflect.get-prototype-of.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/object-get-prototype-of.js");n({target:"Reflect",stat:!0,sham:!r("../node_modules/core-js/internals/correct-prototype-getter.js")},{getPrototypeOf:function(e){return o(i(e))}})},"../node_modules/core-js/modules/es.reflect.get.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/is-object.js"),o=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/has.js"),u=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),c=r("../node_modules/core-js/internals/object-get-prototype-of.js");n({target:"Reflect",stat:!0},{get:function e(t,r){var n,l,s=arguments.length<3?t:arguments[2];return o(t)===s?t[r]:(n=u.f(t,r))?a(n,"value")?n.value:void 0===n.get?void 0:n.get.call(s):i(l=c(t))?e(l,r,s):void 0}})},"../node_modules/core-js/modules/es.reflect.has.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},"../node_modules/core-js/modules/es.reflect.is-extensible.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/an-object.js"),o=Object.isExtensible;n({target:"Reflect",stat:!0},{isExtensible:function(e){return i(e),!o||o(e)}})},"../node_modules/core-js/modules/es.reflect.own-keys.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"Reflect",stat:!0},{ownKeys:r("../node_modules/core-js/internals/own-keys.js")})},"../node_modules/core-js/modules/es.reflect.prevent-extensions.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/get-built-in.js"),o=r("../node_modules/core-js/internals/an-object.js");n({target:"Reflect",stat:!0,sham:!r("../node_modules/core-js/internals/freezing.js")},{preventExtensions:function(e){o(e);try{var t=i("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}})},"../node_modules/core-js/modules/es.reflect.set-prototype-of.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/a-possible-prototype.js"),a=r("../node_modules/core-js/internals/object-set-prototype-of.js");a&&n({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){i(e),o(t);try{return a(e,t),!0}catch(e){return!1}}})},"../node_modules/core-js/modules/es.reflect.set.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/is-object.js"),a=r("../node_modules/core-js/internals/has.js"),u=r("../node_modules/core-js/internals/fails.js"),c=r("../node_modules/core-js/internals/object-define-property.js"),l=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),s=r("../node_modules/core-js/internals/object-get-prototype-of.js"),f=r("../node_modules/core-js/internals/create-property-descriptor.js");n({target:"Reflect",stat:!0,forced:u((function(){var e=c.f({},"a",{configurable:!0});return!1!==Reflect.set(s(e),"a",1,e)}))},{set:function e(t,r,n){var u,p,d=arguments.length<4?t:arguments[3],y=l.f(i(t),r);if(!y){if(o(p=s(t)))return e(p,r,n,d);y=f(0)}if(a(y,"value")){if(!1===y.writable||!o(d))return!1;if(u=l.f(d,r)){if(u.get||u.set||!1===u.writable)return!1;u.value=n,c.f(d,r,u)}else c.f(d,r,f(0,n));return!0}return void 0!==y.set&&(y.set.call(d,n),!0)}})},"../node_modules/core-js/modules/es.regexp.constructor.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/is-forced.js"),a=r("../node_modules/core-js/internals/inherit-if-required.js"),u=r("../node_modules/core-js/internals/object-define-property.js").f,c=r("../node_modules/core-js/internals/object-get-own-property-names.js").f,l=r("../node_modules/core-js/internals/is-regexp.js"),s=r("../node_modules/core-js/internals/regexp-flags.js"),f=r("../node_modules/core-js/internals/regexp-sticky-helpers.js"),p=r("../node_modules/core-js/internals/redefine.js"),d=r("../node_modules/core-js/internals/fails.js"),y=r("../node_modules/core-js/internals/internal-state.js").set,m=r("../node_modules/core-js/internals/set-species.js"),b=r("../node_modules/core-js/internals/well-known-symbol.js")("match"),h=i.RegExp,v=h.prototype,g=/a/g,w=/a/g,x=new h(g)!==g,_=f.UNSUPPORTED_Y;if(n&&o("RegExp",!x||_||d((function(){return w[b]=!1,h(g)!=g||h(w)==w||"/a/i"!=h(g,"i")})))){for(var z=function(e,t){var r,n=this instanceof z,i=l(e),o=void 0===t;if(!n&&i&&e.constructor===z&&o)return e;x?i&&!o&&(e=e.source):e instanceof z&&(o&&(t=s.call(e)),e=e.source),_&&(r=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var u=a(x?new h(e,t):h(e,t),n?this:v,z);return _&&r&&y(u,{sticky:r}),u},S=function(e){e in z||u(z,e,{configurable:!0,get:function(){return h[e]},set:function(t){h[e]=t}})},j=c(h),E=0;j.length>E;)S(j[E++]);v.constructor=z,z.prototype=v,p(i,"RegExp",z)}m("RegExp")},"../node_modules/core-js/modules/es.regexp.exec.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/regexp-exec.js");n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},"../node_modules/core-js/modules/es.regexp.flags.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/object-define-property.js"),o=r("../node_modules/core-js/internals/regexp-flags.js"),a=r("../node_modules/core-js/internals/regexp-sticky-helpers.js").UNSUPPORTED_Y;n&&("g"!=/./g.flags||a)&&i.f(RegExp.prototype,"flags",{configurable:!0,get:o})},"../node_modules/core-js/modules/es.regexp.to-string.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/redefine.js"),i=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/fails.js"),a=r("../node_modules/core-js/internals/regexp-flags.js"),u=RegExp.prototype,c=u.toString,l=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),s="toString"!=c.name;(l||s)&&n(RegExp.prototype,"toString",(function(){var e=i(this),t=String(e.source),r=e.flags;return"/"+t+"/"+String(void 0===r&&e instanceof RegExp&&!("flags"in u)?a.call(e):r)}),{unsafe:!0})},"../node_modules/core-js/modules/es.set.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/collection.js"),i=r("../node_modules/core-js/internals/collection-strong.js");e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},"../node_modules/core-js/modules/es.string.anchor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("anchor")},{anchor:function(e){return i(this,"a","name",e)}})},"../node_modules/core-js/modules/es.string.big.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("big")},{big:function(){return i(this,"big","","")}})},"../node_modules/core-js/modules/es.string.blink.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("blink")},{blink:function(){return i(this,"blink","","")}})},"../node_modules/core-js/modules/es.string.bold.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("bold")},{bold:function(){return i(this,"b","","")}})},"../node_modules/core-js/modules/es.string.code-point-at.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/string-multibyte.js").codeAt;n({target:"String",proto:!0},{codePointAt:function(e){return i(this,e)}})},"../node_modules/core-js/modules/es.string.ends-with.js":function(e,t,r){"use strict";var n,i=r("../node_modules/core-js/internals/export.js"),o=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,a=r("../node_modules/core-js/internals/to-length.js"),u=r("../node_modules/core-js/internals/not-a-regexp.js"),c=r("../node_modules/core-js/internals/require-object-coercible.js"),l=r("../node_modules/core-js/internals/correct-is-regexp-logic.js"),s=r("../node_modules/core-js/internals/is-pure.js"),f="".endsWith,p=Math.min,d=l("endsWith");i({target:"String",proto:!0,forced:!!(s||d||(n=o(String.prototype,"endsWith"),!n||n.writable))&&!d},{endsWith:function(e){var t=String(c(this));u(e);var r=arguments.length>1?arguments[1]:void 0,n=a(t.length),i=void 0===r?n:p(a(r),n),o=String(e);return f?f.call(t,o,i):t.slice(i-o.length,i)===o}})},"../node_modules/core-js/modules/es.string.fixed.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("fixed")},{fixed:function(){return i(this,"tt","","")}})},"../node_modules/core-js/modules/es.string.fontcolor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("fontcolor")},{fontcolor:function(e){return i(this,"font","color",e)}})},"../node_modules/core-js/modules/es.string.fontsize.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("fontsize")},{fontsize:function(e){return i(this,"font","size",e)}})},"../node_modules/core-js/modules/es.string.from-code-point.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/to-absolute-index.js"),o=String.fromCharCode,a=String.fromCodePoint;n({target:"String",stat:!0,forced:!!a&&1!=a.length},{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,a=0;n>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},"../node_modules/core-js/modules/es.string.includes.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/not-a-regexp.js"),o=r("../node_modules/core-js/internals/require-object-coercible.js");n({target:"String",proto:!0,forced:!r("../node_modules/core-js/internals/correct-is-regexp-logic.js")("includes")},{includes:function(e){return!!~String(o(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.string.italics.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("italics")},{italics:function(){return i(this,"i","","")}})},"../node_modules/core-js/modules/es.string.iterator.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/string-multibyte.js").charAt,i=r("../node_modules/core-js/internals/internal-state.js"),o=r("../node_modules/core-js/internals/define-iterator.js"),a=i.set,u=i.getterFor("String Iterator");o(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=u(this),r=t.string,i=t.index;return i>=r.length?{value:void 0,done:!0}:(e=n(r,i),t.index+=e.length,{value:e,done:!1})}))},"../node_modules/core-js/modules/es.string.link.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("link")},{link:function(e){return i(this,"a","href",e)}})},"../node_modules/core-js/modules/es.string.match.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),i=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/to-length.js"),a=r("../node_modules/core-js/internals/require-object-coercible.js"),u=r("../node_modules/core-js/internals/advance-string-index.js"),c=r("../node_modules/core-js/internals/regexp-exec-abstract.js");n("match",1,(function(e,t,r){return[function(t){var r=a(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var a=i(e),l=String(this);if(!a.global)return c(a,l);var s=a.unicode;a.lastIndex=0;for(var f,p=[],d=0;null!==(f=c(a,l));){var y=String(f[0]);p[d]=y,""===y&&(a.lastIndex=u(l,o(a.lastIndex),s)),d++}return 0===d?null:p}]}))},"../node_modules/core-js/modules/es.string.pad-end.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/string-pad.js").end;n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-pad-webkit-bug.js")},{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.string.pad-start.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/string-pad.js").start;n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-pad-webkit-bug.js")},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.string.raw.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/to-indexed-object.js"),o=r("../node_modules/core-js/internals/to-length.js");n({target:"String",stat:!0},{raw:function(e){for(var t=i(e.raw),r=o(t.length),n=arguments.length,a=[],u=0;r>u;)a.push(String(t[u++])),u<n&&a.push(String(arguments[u]));return a.join("")}})},"../node_modules/core-js/modules/es.string.repeat.js":function(e,t,r){r("../node_modules/core-js/internals/export.js")({target:"String",proto:!0},{repeat:r("../node_modules/core-js/internals/string-repeat.js")})},"../node_modules/core-js/modules/es.string.replace.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),i=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),u=r("../node_modules/core-js/internals/to-integer.js"),c=r("../node_modules/core-js/internals/require-object-coercible.js"),l=r("../node_modules/core-js/internals/advance-string-index.js"),s=r("../node_modules/core-js/internals/regexp-exec-abstract.js"),f=Math.max,p=Math.min,d=Math.floor,y=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g;n("replace",2,(function(e,t,r,n){var b=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=n.REPLACE_KEEPS_$0,v=b?"$":"$0";return[function(r,n){var i=c(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,i,n):t.call(String(i),r,n)},function(e,n){if(!b&&h||"string"==typeof n&&-1===n.indexOf(v)){var o=r(t,e,this,n);if(o.done)return o.value}var c=i(e),d=String(this),y="function"==typeof n;y||(n=String(n));var m=c.global;if(m){var w=c.unicode;c.lastIndex=0}for(var x=[];;){var _=s(c,d);if(null===_)break;if(x.push(_),!m)break;""===String(_[0])&&(c.lastIndex=l(d,a(c.lastIndex),w))}for(var z,S="",j=0,E=0;E<x.length;E++){_=x[E];for(var T=String(_[0]),O=f(p(u(_.index),d.length),0),R=[],P=1;P<_.length;P++)R.push(void 0===(z=_[P])?z:String(z));var D=_.groups;if(y){var A=[T].concat(R,O,d);void 0!==D&&A.push(D);var M=String(n.apply(void 0,A))}else M=g(T,d,O,R,D,n);O>=j&&(S+=d.slice(j,O)+M,j=O+T.length)}return S+d.slice(j)}];function g(e,r,n,i,a,u){var c=n+e.length,l=i.length,s=m;return void 0!==a&&(a=o(a),s=y),t.call(u,s,(function(t,o){var u;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(c);case"<":u=a[o.slice(1,-1)];break;default:var s=+o;if(0===s)return t;if(s>l){var f=d(s/10);return 0===f?t:f<=l?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):t}u=i[s-1]}return void 0===u?"":u}))}}))},"../node_modules/core-js/modules/es.string.search.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),i=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/require-object-coercible.js"),a=r("../node_modules/core-js/internals/same-value.js"),u=r("../node_modules/core-js/internals/regexp-exec-abstract.js");n("search",1,(function(e,t,r){return[function(t){var r=o(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var o=i(e),c=String(this),l=o.lastIndex;a(l,0)||(o.lastIndex=0);var s=u(o,c);return a(o.lastIndex,l)||(o.lastIndex=l),null===s?-1:s.index}]}))},"../node_modules/core-js/modules/es.string.small.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("small")},{small:function(){return i(this,"small","","")}})},"../node_modules/core-js/modules/es.string.split.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),i=r("../node_modules/core-js/internals/is-regexp.js"),o=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/require-object-coercible.js"),u=r("../node_modules/core-js/internals/species-constructor.js"),c=r("../node_modules/core-js/internals/advance-string-index.js"),l=r("../node_modules/core-js/internals/to-length.js"),s=r("../node_modules/core-js/internals/regexp-exec-abstract.js"),f=r("../node_modules/core-js/internals/regexp-exec.js"),p=r("../node_modules/core-js/internals/fails.js"),d=[].push,y=Math.min,m=!p((function(){return!RegExp(4294967295,"y")}));n("split",2,(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=String(a(this)),o=void 0===r?4294967295:r>>>0;if(0===o)return[];if(void 0===e)return[n];if(!i(e))return t.call(n,e,o);for(var u,c,l,s=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),y=0,m=new RegExp(e.source,p+"g");(u=f.call(m,n))&&!((c=m.lastIndex)>y&&(s.push(n.slice(y,u.index)),u.length>1&&u.index<n.length&&d.apply(s,u.slice(1)),l=u[0].length,y=c,s.length>=o));)m.lastIndex===u.index&&m.lastIndex++;return y===n.length?!l&&m.test("")||s.push(""):s.push(n.slice(y)),s.length>o?s.slice(0,o):s}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var i=a(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,r):n.call(String(i),t,r)},function(e,i){var a=r(n,e,this,i,n!==t);if(a.done)return a.value;var f=o(e),p=String(this),d=u(f,RegExp),b=f.unicode,h=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(m?"y":"g"),v=new d(m?f:"^(?:"+f.source+")",h),g=void 0===i?4294967295:i>>>0;if(0===g)return[];if(0===p.length)return null===s(v,p)?[p]:[];for(var w=0,x=0,_=[];x<p.length;){v.lastIndex=m?x:0;var z,S=s(v,m?p:p.slice(x));if(null===S||(z=y(l(v.lastIndex+(m?0:x)),p.length))===w)x=c(p,x,b);else{if(_.push(p.slice(w,x)),_.length===g)return _;for(var j=1;j<=S.length-1;j++)if(_.push(S[j]),_.length===g)return _;x=w=z}}return _.push(p.slice(w)),_}]}),!m)},"../node_modules/core-js/modules/es.string.starts-with.js":function(e,t,r){"use strict";var n,i=r("../node_modules/core-js/internals/export.js"),o=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,a=r("../node_modules/core-js/internals/to-length.js"),u=r("../node_modules/core-js/internals/not-a-regexp.js"),c=r("../node_modules/core-js/internals/require-object-coercible.js"),l=r("../node_modules/core-js/internals/correct-is-regexp-logic.js"),s=r("../node_modules/core-js/internals/is-pure.js"),f="".startsWith,p=Math.min,d=l("startsWith");i({target:"String",proto:!0,forced:!!(s||d||(n=o(String.prototype,"startsWith"),!n||n.writable))&&!d},{startsWith:function(e){var t=String(c(this));u(e);var r=a(p(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return f?f.call(t,n,r):t.slice(r,r+n.length)===n}})},"../node_modules/core-js/modules/es.string.strike.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("strike")},{strike:function(){return i(this,"strike","","")}})},"../node_modules/core-js/modules/es.string.sub.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("sub")},{sub:function(){return i(this,"sub","","")}})},"../node_modules/core-js/modules/es.string.sup.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-html.js");n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-html-forced.js")("sup")},{sup:function(){return i(this,"sup","","")}})},"../node_modules/core-js/modules/es.string.trim-end.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/string-trim.js").end,o=r("../node_modules/core-js/internals/string-trim-forced.js")("trimEnd"),a=o?function(){return i(this)}:"".trimEnd;n({target:"String",proto:!0,forced:o},{trimEnd:a,trimRight:a})},"../node_modules/core-js/modules/es.string.trim-start.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/string-trim.js").start,o=r("../node_modules/core-js/internals/string-trim-forced.js")("trimStart"),a=o?function(){return i(this)}:"".trimStart;n({target:"String",proto:!0,forced:o},{trimStart:a,trimLeft:a})},"../node_modules/core-js/modules/es.string.trim.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/string-trim.js").trim;n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-trim-forced.js")("trim")},{trim:function(){return i(this)}})},"../node_modules/core-js/modules/es.symbol.async-iterator.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("asyncIterator")},"../node_modules/core-js/modules/es.symbol.description.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/global.js"),a=r("../node_modules/core-js/internals/has.js"),u=r("../node_modules/core-js/internals/is-object.js"),c=r("../node_modules/core-js/internals/object-define-property.js").f,l=r("../node_modules/core-js/internals/copy-constructor-properties.js"),s=o.Symbol;if(i&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var f={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new s(e):void 0===e?s():s(e);return""===e&&(f[t]=!0),t};l(p,s);var d=p.prototype=s.prototype;d.constructor=p;var y=d.toString,m="Symbol(test)"==String(s("test")),b=/^Symbol\((.*)\)[^)]+$/;c(d,"description",{configurable:!0,get:function(){var e=u(this)?this.valueOf():this,t=y.call(e);if(a(f,e))return"";var r=m?t.slice(7,-1):t.replace(b,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:p})}},"../node_modules/core-js/modules/es.symbol.has-instance.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("hasInstance")},"../node_modules/core-js/modules/es.symbol.is-concat-spreadable.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("isConcatSpreadable")},"../node_modules/core-js/modules/es.symbol.iterator.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("iterator")},"../node_modules/core-js/modules/es.symbol.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/get-built-in.js"),a=r("../node_modules/core-js/internals/is-pure.js"),u=r("../node_modules/core-js/internals/descriptors.js"),c=r("../node_modules/core-js/internals/native-symbol.js"),l=r("../node_modules/core-js/internals/use-symbol-as-uid.js"),s=r("../node_modules/core-js/internals/fails.js"),f=r("../node_modules/core-js/internals/has.js"),p=r("../node_modules/core-js/internals/is-array.js"),d=r("../node_modules/core-js/internals/is-object.js"),y=r("../node_modules/core-js/internals/an-object.js"),m=r("../node_modules/core-js/internals/to-object.js"),b=r("../node_modules/core-js/internals/to-indexed-object.js"),h=r("../node_modules/core-js/internals/to-primitive.js"),v=r("../node_modules/core-js/internals/create-property-descriptor.js"),g=r("../node_modules/core-js/internals/object-create.js"),w=r("../node_modules/core-js/internals/object-keys.js"),x=r("../node_modules/core-js/internals/object-get-own-property-names.js"),_=r("../node_modules/core-js/internals/object-get-own-property-names-external.js"),z=r("../node_modules/core-js/internals/object-get-own-property-symbols.js"),S=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),j=r("../node_modules/core-js/internals/object-define-property.js"),E=r("../node_modules/core-js/internals/object-property-is-enumerable.js"),T=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),O=r("../node_modules/core-js/internals/redefine.js"),R=r("../node_modules/core-js/internals/shared.js"),P=r("../node_modules/core-js/internals/shared-key.js"),D=r("../node_modules/core-js/internals/hidden-keys.js"),A=r("../node_modules/core-js/internals/uid.js"),M=r("../node_modules/core-js/internals/well-known-symbol.js"),C=r("../node_modules/core-js/internals/well-known-symbol-wrapped.js"),k=r("../node_modules/core-js/internals/define-well-known-symbol.js"),I=r("../node_modules/core-js/internals/set-to-string-tag.js"),L=r("../node_modules/core-js/internals/internal-state.js"),G=r("../node_modules/core-js/internals/array-iteration.js").forEach,F=P("hidden"),B=M("toPrimitive"),N=L.set,U=L.getterFor("Symbol"),V=Object.prototype,q=i.Symbol,H=o("JSON","stringify"),W=S.f,X=j.f,K=_.f,Y=E.f,Q=R("symbols"),Z=R("op-symbols"),J=R("string-to-symbol-registry"),$=R("symbol-to-string-registry"),ee=R("wks"),te=i.QObject,re=!te||!te.prototype||!te.prototype.findChild,ne=u&&s((function(){return 7!=g(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=W(V,t);n&&delete V[t],X(e,t,r),n&&e!==V&&X(V,t,n)}:X,ie=function(e,t){var r=Q[e]=g(q.prototype);return N(r,{type:"Symbol",tag:e,description:t}),u||(r.description=t),r},oe=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof q},ae=function(e,t,r){e===V&&ae(Z,t,r),y(e);var n=h(t,!0);return y(r),f(Q,n)?(r.enumerable?(f(e,F)&&e[F][n]&&(e[F][n]=!1),r=g(r,{enumerable:v(0,!1)})):(f(e,F)||X(e,F,v(1,{})),e[F][n]=!0),ne(e,n,r)):X(e,n,r)},ue=function(e,t){y(e);var r=b(t),n=w(r).concat(fe(r));return G(n,(function(t){u&&!ce.call(r,t)||ae(e,t,r[t])})),e},ce=function(e){var t=h(e,!0),r=Y.call(this,t);return!(this===V&&f(Q,t)&&!f(Z,t))&&(!(r||!f(this,t)||!f(Q,t)||f(this,F)&&this[F][t])||r)},le=function(e,t){var r=b(e),n=h(t,!0);if(r!==V||!f(Q,n)||f(Z,n)){var i=W(r,n);return!i||!f(Q,n)||f(r,F)&&r[F][n]||(i.enumerable=!0),i}},se=function(e){var t=K(b(e)),r=[];return G(t,(function(e){f(Q,e)||f(D,e)||r.push(e)})),r},fe=function(e){var t=e===V,r=K(t?Z:b(e)),n=[];return G(r,(function(e){!f(Q,e)||t&&!f(V,e)||n.push(Q[e])})),n};(c||(O((q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=A(e),r=function(e){this===V&&r.call(Z,e),f(this,F)&&f(this[F],t)&&(this[F][t]=!1),ne(this,t,v(1,e))};return u&&re&&ne(V,t,{configurable:!0,set:r}),ie(t,e)}).prototype,"toString",(function(){return U(this).tag})),O(q,"withoutSetter",(function(e){return ie(A(e),e)})),E.f=ce,j.f=ae,S.f=le,x.f=_.f=se,z.f=fe,C.f=function(e){return ie(M(e),e)},u&&(X(q.prototype,"description",{configurable:!0,get:function(){return U(this).description}}),a||O(V,"propertyIsEnumerable",ce,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:q}),G(w(ee),(function(e){k(e)})),n({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=String(e);if(f(J,t))return J[t];var r=q(t);return J[t]=r,$[r]=t,r},keyFor:function(e){if(!oe(e))throw TypeError(e+" is not a symbol");if(f($,e))return $[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!u},{create:function(e,t){return void 0===t?g(e):ue(g(e),t)},defineProperty:ae,defineProperties:ue,getOwnPropertyDescriptor:le}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:se,getOwnPropertySymbols:fe}),n({target:"Object",stat:!0,forced:s((function(){z.f(1)}))},{getOwnPropertySymbols:function(e){return z.f(m(e))}}),H)&&n({target:"JSON",stat:!0,forced:!c||s((function(){var e=q();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}))},{stringify:function(e,t,r){for(var n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=t,(d(t)||void 0!==e)&&!oe(e))return p(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!oe(t))return t}),i[1]=t,H.apply(null,i)}});q.prototype[B]||T(q.prototype,B,q.prototype.valueOf),I(q,"Symbol"),D[F]=!0},"../node_modules/core-js/modules/es.symbol.match.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("match")},"../node_modules/core-js/modules/es.symbol.replace.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("replace")},"../node_modules/core-js/modules/es.symbol.search.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("search")},"../node_modules/core-js/modules/es.symbol.species.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("species")},"../node_modules/core-js/modules/es.symbol.split.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("split")},"../node_modules/core-js/modules/es.symbol.to-primitive.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("toPrimitive")},"../node_modules/core-js/modules/es.symbol.to-string-tag.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("toStringTag")},"../node_modules/core-js/modules/es.symbol.unscopables.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("unscopables")},"../node_modules/core-js/modules/es.typed-array.copy-within.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-copy-within.js"),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("copyWithin",(function(e,t){return i.call(o(this),e,t,arguments.length>2?arguments[2]:void 0)}))},"../node_modules/core-js/modules/es.typed-array.every.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-iteration.js").every,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"../node_modules/core-js/modules/es.typed-array.fill.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-fill.js"),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("fill",(function(e){return i.apply(o(this),arguments)}))},"../node_modules/core-js/modules/es.typed-array.filter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-iteration.js").filter,o=r("../node_modules/core-js/internals/species-constructor.js"),a=n.aTypedArray,u=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("filter",(function(e){for(var t=i(a(this),e,arguments.length>1?arguments[1]:void 0),r=o(this,this.constructor),n=0,c=t.length,l=new(u(r))(c);c>n;)l[n]=t[n++];return l}))},"../node_modules/core-js/modules/es.typed-array.find-index.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-iteration.js").findIndex,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"../node_modules/core-js/modules/es.typed-array.find.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-iteration.js").find,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"../node_modules/core-js/modules/es.typed-array.float32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Float32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"../node_modules/core-js/modules/es.typed-array.float64-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Float64",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"../node_modules/core-js/modules/es.typed-array.for-each.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-iteration.js").forEach,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"../node_modules/core-js/modules/es.typed-array.from.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/typed-array-constructors-require-wrappers.js");(0,r("../node_modules/core-js/internals/array-buffer-view-core.js").exportTypedArrayStaticMethod)("from",r("../node_modules/core-js/internals/typed-array-from.js"),n)},"../node_modules/core-js/modules/es.typed-array.includes.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-includes.js").includes,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"../node_modules/core-js/modules/es.typed-array.index-of.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-includes.js").indexOf,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"../node_modules/core-js/modules/es.typed-array.int16-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"../node_modules/core-js/modules/es.typed-array.int32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"../node_modules/core-js/modules/es.typed-array.int8-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"../node_modules/core-js/modules/es.typed-array.iterator.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/array-buffer-view-core.js"),o=r("../node_modules/core-js/modules/es.array.iterator.js"),a=r("../node_modules/core-js/internals/well-known-symbol.js")("iterator"),u=n.Uint8Array,c=o.values,l=o.keys,s=o.entries,f=i.aTypedArray,p=i.exportTypedArrayMethod,d=u&&u.prototype[a],y=!!d&&("values"==d.name||null==d.name),m=function(){return c.call(f(this))};p("entries",(function(){return s.call(f(this))})),p("keys",(function(){return l.call(f(this))})),p("values",m,!y),p(a,m,!y)},"../node_modules/core-js/modules/es.typed-array.join.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=n.aTypedArray,o=n.exportTypedArrayMethod,a=[].join;o("join",(function(e){return a.apply(i(this),arguments)}))},"../node_modules/core-js/modules/es.typed-array.last-index-of.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-last-index-of.js"),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",(function(e){return i.apply(o(this),arguments)}))},"../node_modules/core-js/modules/es.typed-array.map.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-iteration.js").map,o=r("../node_modules/core-js/internals/species-constructor.js"),a=n.aTypedArray,u=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("map",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(u(o(e,e.constructor)))(t)}))}))},"../node_modules/core-js/modules/es.typed-array.of.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/typed-array-constructors-require-wrappers.js"),o=n.aTypedArrayConstructor;(0,n.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,r=new(o(this))(t);t>e;)r[e]=arguments[e++];return r}),i)},"../node_modules/core-js/modules/es.typed-array.reduce-right.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-reduce.js").right,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},"../node_modules/core-js/modules/es.typed-array.reduce.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-reduce.js").left,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},"../node_modules/core-js/modules/es.typed-array.reverse.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=n.aTypedArray,o=n.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var e,t=i(this).length,r=a(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this}))},"../node_modules/core-js/modules/es.typed-array.set.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/to-offset.js"),a=r("../node_modules/core-js/internals/to-object.js"),u=r("../node_modules/core-js/internals/fails.js"),c=n.aTypedArray;(0,n.exportTypedArrayMethod)("set",(function(e){c(this);var t=o(arguments.length>1?arguments[1]:void 0,1),r=this.length,n=a(e),u=i(n.length),l=0;if(u+t>r)throw RangeError("Wrong length");for(;l<u;)this[t+l]=n[l++]}),u((function(){new Int8Array(1).set({})})))},"../node_modules/core-js/modules/es.typed-array.slice.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/species-constructor.js"),o=r("../node_modules/core-js/internals/fails.js"),a=n.aTypedArray,u=n.aTypedArrayConstructor,c=n.exportTypedArrayMethod,l=[].slice;c("slice",(function(e,t){for(var r=l.call(a(this),e,t),n=i(this,this.constructor),o=0,c=r.length,s=new(u(n))(c);c>o;)s[o]=r[o++];return s}),o((function(){new Int8Array(1).slice()})))},"../node_modules/core-js/modules/es.typed-array.some.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/array-iteration.js").some,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"../node_modules/core-js/modules/es.typed-array.sort.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=n.aTypedArray,o=n.exportTypedArrayMethod,a=[].sort;o("sort",(function(e){return a.call(i(this),e)}))},"../node_modules/core-js/modules/es.typed-array.subarray.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/to-absolute-index.js"),a=r("../node_modules/core-js/internals/species-constructor.js"),u=n.aTypedArray;(0,n.exportTypedArrayMethod)("subarray",(function(e,t){var r=u(this),n=r.length,c=o(e,n);return new(a(r,r.constructor))(r.buffer,r.byteOffset+c*r.BYTES_PER_ELEMENT,i((void 0===t?n:o(t,n))-c))}))},"../node_modules/core-js/modules/es.typed-array.to-locale-string.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/array-buffer-view-core.js"),o=r("../node_modules/core-js/internals/fails.js"),a=n.Int8Array,u=i.aTypedArray,c=i.exportTypedArrayMethod,l=[].toLocaleString,s=[].slice,f=!!a&&o((function(){l.call(new a(1))}));c("toLocaleString",(function(){return l.apply(f?s.call(u(this)):u(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])})))},"../node_modules/core-js/modules/es.typed-array.to-string.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js").exportTypedArrayMethod,i=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/global.js").Uint8Array,a=o&&o.prototype||{},u=[].toString,c=[].join;i((function(){u.call({})}))&&(u=function(){return c.call(this)});var l=a.toString!=u;n("toString",u,l)},"../node_modules/core-js/modules/es.typed-array.uint16-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"../node_modules/core-js/modules/es.typed-array.uint32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"../node_modules/core-js/modules/es.typed-array.uint8-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},"../node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}),!0)},"../node_modules/core-js/modules/es.weak-map.js":function(e,t,r){"use strict";var n,i=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/redefine-all.js"),a=r("../node_modules/core-js/internals/internal-metadata.js"),u=r("../node_modules/core-js/internals/collection.js"),c=r("../node_modules/core-js/internals/collection-weak.js"),l=r("../node_modules/core-js/internals/is-object.js"),s=r("../node_modules/core-js/internals/internal-state.js").enforce,f=r("../node_modules/core-js/internals/native-weak-map.js"),p=!i.ActiveXObject&&"ActiveXObject"in i,d=Object.isExtensible,y=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},m=e.exports=u("WeakMap",y,c);if(f&&p){n=c.getConstructor(y,"WeakMap",!0),a.REQUIRED=!0;var b=m.prototype,h=b.delete,v=b.has,g=b.get,w=b.set;o(b,{delete:function(e){if(l(e)&&!d(e)){var t=s(this);return t.frozen||(t.frozen=new n),h.call(this,e)||t.frozen.delete(e)}return h.call(this,e)},has:function(e){if(l(e)&&!d(e)){var t=s(this);return t.frozen||(t.frozen=new n),v.call(this,e)||t.frozen.has(e)}return v.call(this,e)},get:function(e){if(l(e)&&!d(e)){var t=s(this);return t.frozen||(t.frozen=new n),v.call(this,e)?g.call(this,e):t.frozen.get(e)}return g.call(this,e)},set:function(e,t){if(l(e)&&!d(e)){var r=s(this);r.frozen||(r.frozen=new n),v.call(this,e)?w.call(this,e,t):r.frozen.set(e,t)}else w.call(this,e,t);return this}})}},"../node_modules/core-js/modules/es.weak-set.js":function(e,t,r){"use strict";r("../node_modules/core-js/internals/collection.js")("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r("../node_modules/core-js/internals/collection-weak.js"))},"../node_modules/core-js/modules/web.dom-collections.for-each.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/dom-iterables.js"),o=r("../node_modules/core-js/internals/array-for-each.js"),a=r("../node_modules/core-js/internals/create-non-enumerable-property.js");for(var u in i){var c=n[u],l=c&&c.prototype;if(l&&l.forEach!==o)try{a(l,"forEach",o)}catch(e){l.forEach=o}}},"../node_modules/core-js/modules/web.dom-collections.iterator.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/dom-iterables.js"),o=r("../node_modules/core-js/modules/es.array.iterator.js"),a=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),u=r("../node_modules/core-js/internals/well-known-symbol.js"),c=u("iterator"),l=u("toStringTag"),s=o.values;for(var f in i){var p=n[f],d=p&&p.prototype;if(d){if(d[c]!==s)try{a(d,c,s)}catch(e){d[c]=s}if(d[l]||a(d,l,f),i[f])for(var y in o)if(d[y]!==o[y])try{a(d,y,o[y])}catch(e){d[y]=o[y]}}}},"../node_modules/core-js/modules/web.immediate.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/task.js");n({global:!0,bind:!0,enumerable:!0,forced:!i.setImmediate||!i.clearImmediate},{setImmediate:o.set,clearImmediate:o.clear})},"../node_modules/core-js/modules/web.queue-microtask.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/microtask.js"),a=r("../node_modules/core-js/internals/classof-raw.js"),u=i.process,c="process"==a(u);n({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=c&&u.domain;o(t?t.bind(e):e)}})},"../node_modules/core-js/modules/web.timers.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/engine-user-agent.js"),a=[].slice,u=function(e){return function(t,r){var n=arguments.length>2,i=n?a.call(arguments,2):void 0;return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};n({global:!0,bind:!0,forced:/MSIE .\./.test(o)},{setTimeout:u(i.setTimeout),setInterval:u(i.setInterval)})},"../node_modules/core-js/modules/web.url-search-params.js":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.array.iterator.js");var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/get-built-in.js"),o=r("../node_modules/core-js/internals/native-url.js"),a=r("../node_modules/core-js/internals/redefine.js"),u=r("../node_modules/core-js/internals/redefine-all.js"),c=r("../node_modules/core-js/internals/set-to-string-tag.js"),l=r("../node_modules/core-js/internals/create-iterator-constructor.js"),s=r("../node_modules/core-js/internals/internal-state.js"),f=r("../node_modules/core-js/internals/an-instance.js"),p=r("../node_modules/core-js/internals/has.js"),d=r("../node_modules/core-js/internals/function-bind-context.js"),y=r("../node_modules/core-js/internals/classof.js"),m=r("../node_modules/core-js/internals/an-object.js"),b=r("../node_modules/core-js/internals/is-object.js"),h=r("../node_modules/core-js/internals/object-create.js"),v=r("../node_modules/core-js/internals/create-property-descriptor.js"),g=r("../node_modules/core-js/internals/get-iterator.js"),w=r("../node_modules/core-js/internals/get-iterator-method.js"),x=r("../node_modules/core-js/internals/well-known-symbol.js"),_=i("fetch"),z=i("Headers"),S=x("iterator"),j=s.set,E=s.getterFor("URLSearchParams"),T=s.getterFor("URLSearchParamsIterator"),O=/\+/g,R=Array(4),P=function(e){return R[e-1]||(R[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},D=function(e){try{return decodeURIComponent(e)}catch(t){return e}},A=function(e){var t=e.replace(O," "),r=4;try{return decodeURIComponent(t)}catch(e){for(;r;)t=t.replace(P(r--),D);return t}},M=/[!'()~]|%20/g,C={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},k=function(e){return C[e]},I=function(e){return encodeURIComponent(e).replace(M,k)},L=function(e,t){if(t)for(var r,n,i=t.split("&"),o=0;o<i.length;)(r=i[o++]).length&&(n=r.split("="),e.push({key:A(n.shift()),value:A(n.join("="))}))},G=function(e){this.entries.length=0,L(this.entries,e)},F=function(e,t){if(e<t)throw TypeError("Not enough arguments")},B=l((function(e,t){j(this,{type:"URLSearchParamsIterator",iterator:g(E(e).entries),kind:t})}),"Iterator",(function(){var e=T(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r})),N=function(){f(this,N,"URLSearchParams");var e,t,r,n,i,o,a,u,c,l=arguments.length>0?arguments[0]:void 0,s=this,d=[];if(j(s,{type:"URLSearchParams",entries:d,updateURL:function(){},updateSearchParams:G}),void 0!==l)if(b(l))if("function"==typeof(e=w(l)))for(r=(t=e.call(l)).next;!(n=r.call(t)).done;){if((a=(o=(i=g(m(n.value))).next).call(i)).done||(u=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:a.value+"",value:u.value+""})}else for(c in l)p(l,c)&&d.push({key:c,value:l[c]+""});else L(d,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},U=N.prototype;u(U,{append:function(e,t){F(arguments.length,2);var r=E(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){F(arguments.length,1);for(var t=E(this),r=t.entries,n=e+"",i=0;i<r.length;)r[i].key===n?r.splice(i,1):i++;t.updateURL()},get:function(e){F(arguments.length,1);for(var t=E(this).entries,r=e+"",n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){F(arguments.length,1);for(var t=E(this).entries,r=e+"",n=[],i=0;i<t.length;i++)t[i].key===r&&n.push(t[i].value);return n},has:function(e){F(arguments.length,1);for(var t=E(this).entries,r=e+"",n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){F(arguments.length,1);for(var r,n=E(this),i=n.entries,o=!1,a=e+"",u=t+"",c=0;c<i.length;c++)(r=i[c]).key===a&&(o?i.splice(c--,1):(o=!0,r.value=u));o||i.push({key:a,value:u}),n.updateURL()},sort:function(){var e,t,r,n=E(this),i=n.entries,o=i.slice();for(i.length=0,r=0;r<o.length;r++){for(e=o[r],t=0;t<r;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===r&&i.push(e)}n.updateURL()},forEach:function(e){for(var t,r=E(this).entries,n=d(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new B(this,"keys")},values:function(){return new B(this,"values")},entries:function(){return new B(this,"entries")}},{enumerable:!0}),a(U,S,U.entries),a(U,"toString",(function(){for(var e,t=E(this).entries,r=[],n=0;n<t.length;)e=t[n++],r.push(I(e.key)+"="+I(e.value));return r.join("&")}),{enumerable:!0}),c(N,"URLSearchParams"),n({global:!0,forced:!o},{URLSearchParams:N}),o||"function"!=typeof _||"function"!=typeof z||n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,r,n,i=[e];return arguments.length>1&&(b(t=arguments[1])&&(r=t.body,"URLSearchParams"===y(r)&&((n=t.headers?new z(t.headers):new z).has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=h(t,{body:v(0,String(r)),headers:v(0,n)}))),i.push(t)),_.apply(this,i)}}),e.exports={URLSearchParams:N,getState:E}},"../node_modules/core-js/modules/web.url.js":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.string.iterator.js");var n,i=r("../node_modules/core-js/internals/export.js"),o=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/native-url.js"),u=r("../node_modules/core-js/internals/global.js"),c=r("../node_modules/core-js/internals/object-define-properties.js"),l=r("../node_modules/core-js/internals/redefine.js"),s=r("../node_modules/core-js/internals/an-instance.js"),f=r("../node_modules/core-js/internals/has.js"),p=r("../node_modules/core-js/internals/object-assign.js"),d=r("../node_modules/core-js/internals/array-from.js"),y=r("../node_modules/core-js/internals/string-multibyte.js").codeAt,m=r("../node_modules/core-js/internals/string-punycode-to-ascii.js"),b=r("../node_modules/core-js/internals/set-to-string-tag.js"),h=r("../node_modules/core-js/modules/web.url-search-params.js"),v=r("../node_modules/core-js/internals/internal-state.js"),g=u.URL,w=h.URLSearchParams,x=h.getState,_=v.set,z=v.getterFor("URL"),S=Math.floor,j=Math.pow,E=/[A-Za-z]/,T=/[\d+-.A-Za-z]/,O=/\d/,R=/^(0x|0X)/,P=/^[0-7]+$/,D=/^\d+$/,A=/^[\dA-Fa-f]+$/,M=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,C=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,k=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,I=/[\u0009\u000A\u000D]/g,L=function(e,t){var r,n,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(r=F(t.slice(1,-1))))return"Invalid host";e.host=r}else if(X(e)){if(t=m(t),M.test(t))return"Invalid host";if(null===(r=G(t)))return"Invalid host";e.host=r}else{if(C.test(t))return"Invalid host";for(r="",n=d(t),i=0;i<n.length;i++)r+=H(n[i],N);e.host=r}},G=function(e){var t,r,n,i,o,a,u,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(i=c[n]))return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=R.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?D:8==o?P:A).test(i))return e;a=parseInt(i,o)}r.push(a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=j(256,5-t))return null}else if(a>255)return null;for(u=r.pop(),n=0;n<r.length;n++)u+=r[n]*j(256,3-n);return u},F=function(e){var t,r,n,i,o,a,u,c=[0,0,0,0,0,0,0,0],l=0,s=null,f=0,p=function(){return e.charAt(f)};if(":"==p()){if(":"!=e.charAt(1))return;f+=2,s=++l}for(;p();){if(8==l)return;if(":"!=p()){for(t=r=0;r<4&&A.test(p());)t=16*t+parseInt(p(),16),f++,r++;if("."==p()){if(0==r)return;if(f-=r,l>6)return;for(n=0;p();){if(i=null,n>0){if(!("."==p()&&n<4))return;f++}if(!O.test(p()))return;for(;O.test(p());){if(o=parseInt(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;f++}c[l]=256*c[l]+i,2!=++n&&4!=n||l++}if(4!=n)return;break}if(":"==p()){if(f++,!p())return}else if(p())return;c[l++]=t}else{if(null!==s)return;f++,s=++l}}if(null!==s)for(a=l-s,l=7;0!=l&&a>0;)u=c[l],c[l--]=c[s+a-1],c[s+--a]=u;else if(8!=l)return;return c},B=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=S(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,i=0,o=0;o<8;o++)0!==e[o]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return i>r&&(t=n,r=i),t}(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},N={},U=p({},N,{" ":1,'"':1,"<":1,">":1,"`":1}),V=p({},U,{"#":1,"?":1,"{":1,"}":1}),q=p({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),H=function(e,t){var r=y(e,0);return r>32&&r<127&&!f(t,e)?e:encodeURIComponent(e)},W={ftp:21,file:null,http:80,https:443,ws:80,wss:443},X=function(e){return f(W,e.scheme)},K=function(e){return""!=e.username||""!=e.password},Y=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Q=function(e,t){var r;return 2==e.length&&E.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},Z=function(e){var t;return e.length>1&&Q(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},J=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&Q(t[0],!0)||t.pop()},$=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},re={},ne={},ie={},oe={},ae={},ue={},ce={},le={},se={},fe={},pe={},de={},ye={},me={},be={},he={},ve={},ge={},we={},xe=function(e,t,r,i){var o,a,u,c,l,s=r||ee,p=0,y="",m=!1,b=!1,h=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(k,"")),t=t.replace(I,""),o=d(t);p<=o.length;){switch(a=o[p],s){case ee:if(!a||!E.test(a)){if(r)return"Invalid scheme";s=re;continue}y+=a.toLowerCase(),s=te;break;case te:if(a&&(T.test(a)||"+"==a||"-"==a||"."==a))y+=a.toLowerCase();else{if(":"!=a){if(r)return"Invalid scheme";y="",s=re,p=0;continue}if(r&&(X(e)!=f(W,y)||"file"==y&&(K(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=y,r)return void(X(e)&&W[e.scheme]==e.port&&(e.port=null));y="","file"==e.scheme?s=de:X(e)&&i&&i.scheme==e.scheme?s=ne:X(e)?s=ue:"/"==o[p+1]?(s=ie,p++):(e.cannotBeABaseURL=!0,e.path.push(""),s=ve)}break;case re:if(!i||i.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(i.cannotBeABaseURL&&"#"==a){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,s=we;break}s="file"==i.scheme?de:oe;continue;case ne:if("/"!=a||"/"!=o[p+1]){s=oe;continue}s=ce,p++;break;case ie:if("/"==a){s=le;break}s=he;continue;case oe:if(e.scheme=i.scheme,a==n)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==a||"\\"==a&&X(e))s=ae;else if("?"==a)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",s=ge;else{if("#"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),s=he;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",s=we}break;case ae:if(!X(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,s=he;continue}s=le}else s=ce;break;case ue:if(s=ce,"/"!=a||"/"!=y.charAt(p+1))continue;p++;break;case ce:if("/"!=a&&"\\"!=a){s=le;continue}break;case le:if("@"==a){m&&(y="%40"+y),m=!0,u=d(y);for(var v=0;v<u.length;v++){var g=u[v];if(":"!=g||h){var w=H(g,q);h?e.password+=w:e.username+=w}else h=!0}y=""}else if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&X(e)){if(m&&""==y)return"Invalid authority";p-=d(y).length+1,y="",s=se}else y+=a;break;case se:case fe:if(r&&"file"==e.scheme){s=me;continue}if(":"!=a||b){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&X(e)){if(X(e)&&""==y)return"Invalid host";if(r&&""==y&&(K(e)||null!==e.port))return;if(c=L(e,y))return c;if(y="",s=be,r)return;continue}"["==a?b=!0:"]"==a&&(b=!1),y+=a}else{if(""==y)return"Invalid host";if(c=L(e,y))return c;if(y="",s=pe,r==fe)return}break;case pe:if(!O.test(a)){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&X(e)||r){if(""!=y){var x=parseInt(y,10);if(x>65535)return"Invalid port";e.port=X(e)&&x===W[e.scheme]?null:x,y=""}if(r)return;s=be;continue}return"Invalid port"}y+=a;break;case de:if(e.scheme="file","/"==a||"\\"==a)s=ye;else{if(!i||"file"!=i.scheme){s=he;continue}if(a==n)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==a)e.host=i.host,e.path=i.path.slice(),e.query="",s=ge;else{if("#"!=a){Z(o.slice(p).join(""))||(e.host=i.host,e.path=i.path.slice(),J(e)),s=he;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",s=we}}break;case ye:if("/"==a||"\\"==a){s=me;break}i&&"file"==i.scheme&&!Z(o.slice(p).join(""))&&(Q(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),s=he;continue;case me:if(a==n||"/"==a||"\\"==a||"?"==a||"#"==a){if(!r&&Q(y))s=he;else if(""==y){if(e.host="",r)return;s=be}else{if(c=L(e,y))return c;if("localhost"==e.host&&(e.host=""),r)return;y="",s=be}continue}y+=a;break;case be:if(X(e)){if(s=he,"/"!=a&&"\\"!=a)continue}else if(r||"?"!=a)if(r||"#"!=a){if(a!=n&&(s=he,"/"!=a))continue}else e.fragment="",s=we;else e.query="",s=ge;break;case he:if(a==n||"/"==a||"\\"==a&&X(e)||!r&&("?"==a||"#"==a)){if(".."===(l=(l=y).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(J(e),"/"==a||"\\"==a&&X(e)||e.path.push("")):$(y)?"/"==a||"\\"==a&&X(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Q(y)&&(e.host&&(e.host=""),y=y.charAt(0)+":"),e.path.push(y)),y="","file"==e.scheme&&(a==n||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",s=ge):"#"==a&&(e.fragment="",s=we)}else y+=H(a,V);break;case ve:"?"==a?(e.query="",s=ge):"#"==a?(e.fragment="",s=we):a!=n&&(e.path[0]+=H(a,N));break;case ge:r||"#"!=a?a!=n&&("'"==a&&X(e)?e.query+="%27":e.query+="#"==a?"%23":H(a,N)):(e.fragment="",s=we);break;case we:a!=n&&(e.fragment+=H(a,U))}p++}},_e=function(e){var t,r,n=s(this,_e,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(e),u=_(n,{type:"URL"});if(void 0!==i)if(i instanceof _e)t=z(i);else if(r=xe(t={},String(i)))throw TypeError(r);if(r=xe(u,a,null,t))throw TypeError(r);var c=u.searchParams=new w,l=x(c);l.updateSearchParams(u.query),l.updateURL=function(){u.query=String(c)||null},o||(n.href=Se.call(n),n.origin=je.call(n),n.protocol=Ee.call(n),n.username=Te.call(n),n.password=Oe.call(n),n.host=Re.call(n),n.hostname=Pe.call(n),n.port=De.call(n),n.pathname=Ae.call(n),n.search=Me.call(n),n.searchParams=Ce.call(n),n.hash=ke.call(n))},ze=_e.prototype,Se=function(){var e=z(this),t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,a=e.path,u=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",K(e)&&(l+=r+(n?":"+n:"")+"@"),l+=B(i),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==u&&(l+="?"+u),null!==c&&(l+="#"+c),l},je=function(){var e=z(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&X(e)?t+"://"+B(e.host)+(null!==r?":"+r:""):"null"},Ee=function(){return z(this).scheme+":"},Te=function(){return z(this).username},Oe=function(){return z(this).password},Re=function(){var e=z(this),t=e.host,r=e.port;return null===t?"":null===r?B(t):B(t)+":"+r},Pe=function(){var e=z(this).host;return null===e?"":B(e)},De=function(){var e=z(this).port;return null===e?"":String(e)},Ae=function(){var e=z(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Me=function(){var e=z(this).query;return e?"?"+e:""},Ce=function(){return z(this).searchParams},ke=function(){var e=z(this).fragment;return e?"#"+e:""},Ie=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&c(ze,{href:Ie(Se,(function(e){var t=z(this),r=String(e),n=xe(t,r);if(n)throw TypeError(n);x(t.searchParams).updateSearchParams(t.query)})),origin:Ie(je),protocol:Ie(Ee,(function(e){var t=z(this);xe(t,String(e)+":",ee)})),username:Ie(Te,(function(e){var t=z(this),r=d(String(e));if(!Y(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=H(r[n],q)}})),password:Ie(Oe,(function(e){var t=z(this),r=d(String(e));if(!Y(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=H(r[n],q)}})),host:Ie(Re,(function(e){var t=z(this);t.cannotBeABaseURL||xe(t,String(e),se)})),hostname:Ie(Pe,(function(e){var t=z(this);t.cannotBeABaseURL||xe(t,String(e),fe)})),port:Ie(De,(function(e){var t=z(this);Y(t)||(""==(e=String(e))?t.port=null:xe(t,e,pe))})),pathname:Ie(Ae,(function(e){var t=z(this);t.cannotBeABaseURL||(t.path=[],xe(t,e+"",be))})),search:Ie(Me,(function(e){var t=z(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",xe(t,e,ge)),x(t.searchParams).updateSearchParams(t.query)})),searchParams:Ie(Ce),hash:Ie(ke,(function(e){var t=z(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",xe(t,e,we)):t.fragment=null}))}),l(ze,"toJSON",(function(){return Se.call(this)}),{enumerable:!0}),l(ze,"toString",(function(){return Se.call(this)}),{enumerable:!0}),g){var Le=g.createObjectURL,Ge=g.revokeObjectURL;Le&&l(_e,"createObjectURL",(function(e){return Le.apply(g,arguments)})),Ge&&l(_e,"revokeObjectURL",(function(e){return Ge.apply(g,arguments)}))}b(_e,"URL"),i({global:!0,forced:!a,sham:!o},{URL:_e})},"../node_modules/core-js/modules/web.url.to-json.js":function(e,t,r){"use strict";r("../node_modules/core-js/internals/export.js")({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},"../node_modules/gl-matrix/lib/gl-matrix.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");r.d(t,"glMatrix",(function(){return n}));var i=r("../node_modules/gl-matrix/lib/gl-matrix/mat2.js");r.d(t,"mat2",(function(){return i}));var o=r("../node_modules/gl-matrix/lib/gl-matrix/mat2d.js");r.d(t,"mat2d",(function(){return o}));var a=r("../node_modules/gl-matrix/lib/gl-matrix/mat3.js");r.d(t,"mat3",(function(){return a}));var u=r("../node_modules/gl-matrix/lib/gl-matrix/mat4.js");r.d(t,"mat4",(function(){return u}));var c=r("../node_modules/gl-matrix/lib/gl-matrix/quat.js");r.d(t,"quat",(function(){return c}));var l=r("../node_modules/gl-matrix/lib/gl-matrix/quat2.js");r.d(t,"quat2",(function(){return l}));var s=r("../node_modules/gl-matrix/lib/gl-matrix/vec2.js");r.d(t,"vec2",(function(){return s}));var f=r("../node_modules/gl-matrix/lib/gl-matrix/vec3.js");r.d(t,"vec3",(function(){return f}));var p=r("../node_modules/gl-matrix/lib/gl-matrix/vec4.js");r.d(t,"vec4",(function(){return p}))},"../node_modules/gl-matrix/lib/gl-matrix/common.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EPSILON",(function(){return n})),r.d(t,"ARRAY_TYPE",(function(){return i})),r.d(t,"RANDOM",(function(){return o})),r.d(t,"setMatrixArrayType",(function(){return a})),r.d(t,"toRadian",(function(){return c})),r.d(t,"equals",(function(){return l}));var n=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;function a(e){i=e}var u=Math.PI/180;function c(e){return e*u}function l(e,t){return Math.abs(e-t)<=n*Math.max(1,Math.abs(e),Math.abs(t))}},"../node_modules/gl-matrix/lib/gl-matrix/mat2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return i})),r.d(t,"clone",(function(){return o})),r.d(t,"copy",(function(){return a})),r.d(t,"identity",(function(){return u})),r.d(t,"fromValues",(function(){return c})),r.d(t,"set",(function(){return l})),r.d(t,"transpose",(function(){return s})),r.d(t,"invert",(function(){return f})),r.d(t,"adjoint",(function(){return p})),r.d(t,"determinant",(function(){return d})),r.d(t,"multiply",(function(){return y})),r.d(t,"rotate",(function(){return m})),r.d(t,"scale",(function(){return b})),r.d(t,"fromRotation",(function(){return h})),r.d(t,"fromScaling",(function(){return v})),r.d(t,"str",(function(){return g})),r.d(t,"frob",(function(){return w})),r.d(t,"LDU",(function(){return x})),r.d(t,"add",(function(){return _})),r.d(t,"subtract",(function(){return z})),r.d(t,"exactEquals",(function(){return S})),r.d(t,"equals",(function(){return j})),r.d(t,"multiplyScalar",(function(){return E})),r.d(t,"multiplyScalarAndAdd",(function(){return T})),r.d(t,"mul",(function(){return O})),r.d(t,"sub",(function(){return R}));var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(4);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function o(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function u(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function c(e,t,r,i){var o=new n.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o}function l(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function s(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function f(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*o-i*n;return a?(a=1/a,e[0]=o*a,e[1]=-n*a,e[2]=-i*a,e[3]=r*a,e):null}function p(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e}function d(e){return e[0]*e[3]-e[2]*e[1]}function y(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=r[0],c=r[1],l=r[2],s=r[3];return e[0]=n*u+o*c,e[1]=i*u+a*c,e[2]=n*l+o*s,e[3]=i*l+a*s,e}function m(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+o*u,e[1]=i*c+a*u,e[2]=n*-u+o*c,e[3]=i*-u+a*c,e}function b(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=r[0],c=r[1];return e[0]=n*u,e[1]=i*u,e[2]=o*c,e[3]=a*c,e}function h(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e}function v(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function g(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function w(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))}function x(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]}function _(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function z(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function S(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function j(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],u=t[0],c=t[1],l=t[2],s=t[3];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))}function E(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function T(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}var O=y,R=z},"../node_modules/gl-matrix/lib/gl-matrix/mat2d.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return i})),r.d(t,"clone",(function(){return o})),r.d(t,"copy",(function(){return a})),r.d(t,"identity",(function(){return u})),r.d(t,"fromValues",(function(){return c})),r.d(t,"set",(function(){return l})),r.d(t,"invert",(function(){return s})),r.d(t,"determinant",(function(){return f})),r.d(t,"multiply",(function(){return p})),r.d(t,"rotate",(function(){return d})),r.d(t,"scale",(function(){return y})),r.d(t,"translate",(function(){return m})),r.d(t,"fromRotation",(function(){return b})),r.d(t,"fromScaling",(function(){return h})),r.d(t,"fromTranslation",(function(){return v})),r.d(t,"str",(function(){return g})),r.d(t,"frob",(function(){return w})),r.d(t,"add",(function(){return x})),r.d(t,"subtract",(function(){return _})),r.d(t,"multiplyScalar",(function(){return z})),r.d(t,"multiplyScalarAndAdd",(function(){return S})),r.d(t,"exactEquals",(function(){return j})),r.d(t,"equals",(function(){return E})),r.d(t,"mul",(function(){return T})),r.d(t,"sub",(function(){return O}));var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(6);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function o(e){var t=new n.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function u(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function c(e,t,r,i,o,a){var u=new n.ARRAY_TYPE(6);return u[0]=e,u[1]=t,u[2]=r,u[3]=i,u[4]=o,u[5]=a,u}function l(e,t,r,n,i,o,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e}function s(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=r*o-n*i;return c?(c=1/c,e[0]=o*c,e[1]=-n*c,e[2]=-i*c,e[3]=r*c,e[4]=(i*u-o*a)*c,e[5]=(n*a-r*u)*c,e):null}function f(e){return e[0]*e[3]-e[1]*e[2]}function p(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],l=r[0],s=r[1],f=r[2],p=r[3],d=r[4],y=r[5];return e[0]=n*l+o*s,e[1]=i*l+a*s,e[2]=n*f+o*p,e[3]=i*f+a*p,e[4]=n*d+o*y+u,e[5]=i*d+a*y+c,e}function d(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],l=Math.sin(r),s=Math.cos(r);return e[0]=n*s+o*l,e[1]=i*s+a*l,e[2]=n*-l+o*s,e[3]=i*-l+a*s,e[4]=u,e[5]=c,e}function y(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],l=r[0],s=r[1];return e[0]=n*l,e[1]=i*l,e[2]=o*s,e[3]=a*s,e[4]=u,e[5]=c,e}function m(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],l=r[0],s=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=n*l+o*s+u,e[5]=i*l+a*s+c,e}function b(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function h(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function v(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function g(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function w(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)}function x(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function _(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function z(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function S(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e}function j(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function E(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],c=e[5],l=t[0],s=t[1],f=t[2],p=t[3],d=t[4],y=t[5];return Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-s)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-f)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-p)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(u-d)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(c-y)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))}var T=p,O=_},"../node_modules/gl-matrix/lib/gl-matrix/mat3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return i})),r.d(t,"fromMat4",(function(){return o})),r.d(t,"clone",(function(){return a})),r.d(t,"copy",(function(){return u})),r.d(t,"fromValues",(function(){return c})),r.d(t,"set",(function(){return l})),r.d(t,"identity",(function(){return s})),r.d(t,"transpose",(function(){return f})),r.d(t,"invert",(function(){return p})),r.d(t,"adjoint",(function(){return d})),r.d(t,"determinant",(function(){return y})),r.d(t,"multiply",(function(){return m})),r.d(t,"translate",(function(){return b})),r.d(t,"rotate",(function(){return h})),r.d(t,"scale",(function(){return v})),r.d(t,"fromTranslation",(function(){return g})),r.d(t,"fromRotation",(function(){return w})),r.d(t,"fromScaling",(function(){return x})),r.d(t,"fromMat2d",(function(){return _})),r.d(t,"fromQuat",(function(){return z})),r.d(t,"normalFromMat4",(function(){return S})),r.d(t,"projection",(function(){return j})),r.d(t,"str",(function(){return E})),r.d(t,"frob",(function(){return T})),r.d(t,"add",(function(){return O})),r.d(t,"subtract",(function(){return R})),r.d(t,"multiplyScalar",(function(){return P})),r.d(t,"multiplyScalarAndAdd",(function(){return D})),r.d(t,"exactEquals",(function(){return A})),r.d(t,"equals",(function(){return M})),r.d(t,"mul",(function(){return C})),r.d(t,"sub",(function(){return k}));var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(9);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function a(e){var t=new n.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function c(e,t,r,i,o,a,u,c,l){var s=new n.ARRAY_TYPE(9);return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s[4]=o,s[5]=a,s[6]=u,s[7]=c,s[8]=l,s}function l(e,t,r,n,i,o,a,u,c,l){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e[6]=u,e[7]=c,e[8]=l,e}function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function f(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function p(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=t[6],l=t[7],s=t[8],f=s*a-u*l,p=-s*o+u*c,d=l*o-a*c,y=r*f+n*p+i*d;return y?(y=1/y,e[0]=f*y,e[1]=(-s*n+i*l)*y,e[2]=(u*n-i*a)*y,e[3]=p*y,e[4]=(s*r-i*c)*y,e[5]=(-u*r+i*o)*y,e[6]=d*y,e[7]=(-l*r+n*c)*y,e[8]=(a*r-n*o)*y,e):null}function d(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=t[6],l=t[7],s=t[8];return e[0]=a*s-u*l,e[1]=i*l-n*s,e[2]=n*u-i*a,e[3]=u*c-o*s,e[4]=r*s-i*c,e[5]=i*o-r*u,e[6]=o*l-a*c,e[7]=n*c-r*l,e[8]=r*a-n*o,e}function y(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],u=e[6],c=e[7],l=e[8];return t*(l*o-a*c)+r*(-l*i+a*u)+n*(c*i-o*u)}function m(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],l=t[6],s=t[7],f=t[8],p=r[0],d=r[1],y=r[2],m=r[3],b=r[4],h=r[5],v=r[6],g=r[7],w=r[8];return e[0]=p*n+d*a+y*l,e[1]=p*i+d*u+y*s,e[2]=p*o+d*c+y*f,e[3]=m*n+b*a+h*l,e[4]=m*i+b*u+h*s,e[5]=m*o+b*c+h*f,e[6]=v*n+g*a+w*l,e[7]=v*i+g*u+w*s,e[8]=v*o+g*c+w*f,e}function b(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],l=t[6],s=t[7],f=t[8],p=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=c,e[6]=p*n+d*a+l,e[7]=p*i+d*u+s,e[8]=p*o+d*c+f,e}function h(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],l=t[6],s=t[7],f=t[8],p=Math.sin(r),d=Math.cos(r);return e[0]=d*n+p*a,e[1]=d*i+p*u,e[2]=d*o+p*c,e[3]=d*a-p*n,e[4]=d*u-p*i,e[5]=d*c-p*o,e[6]=l,e[7]=s,e[8]=f,e}function v(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function g(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function w(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function x(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function _(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function z(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,u=n+n,c=i+i,l=r*a,s=n*a,f=n*u,p=i*a,d=i*u,y=i*c,m=o*a,b=o*u,h=o*c;return e[0]=1-f-y,e[3]=s-h,e[6]=p+b,e[1]=s+h,e[4]=1-l-y,e[7]=d-m,e[2]=p-b,e[5]=d+m,e[8]=1-l-f,e}function S(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=t[6],l=t[7],s=t[8],f=t[9],p=t[10],d=t[11],y=t[12],m=t[13],b=t[14],h=t[15],v=r*u-n*a,g=r*c-i*a,w=r*l-o*a,x=n*c-i*u,_=n*l-o*u,z=i*l-o*c,S=s*m-f*y,j=s*b-p*y,E=s*h-d*y,T=f*b-p*m,O=f*h-d*m,R=p*h-d*b,P=v*R-g*O+w*T+x*E-_*j+z*S;return P?(P=1/P,e[0]=(u*R-c*O+l*T)*P,e[1]=(c*E-a*R-l*j)*P,e[2]=(a*O-u*E+l*S)*P,e[3]=(i*O-n*R-o*T)*P,e[4]=(r*R-i*E+o*j)*P,e[5]=(n*E-r*O-o*S)*P,e[6]=(m*z-b*_+h*x)*P,e[7]=(b*w-y*z-h*g)*P,e[8]=(y*_-m*w+h*v)*P,e):null}function j(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function E(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function T(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))}function O(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function R(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function P(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function D(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e}function A(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function M(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],c=e[5],l=e[6],s=e[7],f=e[8],p=t[0],d=t[1],y=t[2],m=t[3],b=t[4],h=t[5],v=t[6],g=t[7],w=t[8];return Math.abs(r-p)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-d)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-y)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-m)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(u-b)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-h)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(l-v)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(s-g)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(f-w)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))}var C=m,k=R},"../node_modules/gl-matrix/lib/gl-matrix/mat4.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return i})),r.d(t,"clone",(function(){return o})),r.d(t,"copy",(function(){return a})),r.d(t,"fromValues",(function(){return u})),r.d(t,"set",(function(){return c})),r.d(t,"identity",(function(){return l})),r.d(t,"transpose",(function(){return s})),r.d(t,"invert",(function(){return f})),r.d(t,"adjoint",(function(){return p})),r.d(t,"determinant",(function(){return d})),r.d(t,"multiply",(function(){return y})),r.d(t,"translate",(function(){return m})),r.d(t,"scale",(function(){return b})),r.d(t,"rotate",(function(){return h})),r.d(t,"rotateX",(function(){return v})),r.d(t,"rotateY",(function(){return g})),r.d(t,"rotateZ",(function(){return w})),r.d(t,"fromTranslation",(function(){return x})),r.d(t,"fromScaling",(function(){return _})),r.d(t,"fromRotation",(function(){return z})),r.d(t,"fromXRotation",(function(){return S})),r.d(t,"fromYRotation",(function(){return j})),r.d(t,"fromZRotation",(function(){return E})),r.d(t,"fromRotationTranslation",(function(){return T})),r.d(t,"fromQuat2",(function(){return O})),r.d(t,"getTranslation",(function(){return R})),r.d(t,"getScaling",(function(){return P})),r.d(t,"getRotation",(function(){return D})),r.d(t,"fromRotationTranslationScale",(function(){return A})),r.d(t,"fromRotationTranslationScaleOrigin",(function(){return M})),r.d(t,"fromQuat",(function(){return C})),r.d(t,"frustum",(function(){return k})),r.d(t,"perspective",(function(){return I})),r.d(t,"perspectiveFromFieldOfView",(function(){return L})),r.d(t,"ortho",(function(){return G})),r.d(t,"lookAt",(function(){return F})),r.d(t,"targetTo",(function(){return B})),r.d(t,"str",(function(){return N})),r.d(t,"frob",(function(){return U})),r.d(t,"add",(function(){return V})),r.d(t,"subtract",(function(){return q})),r.d(t,"multiplyScalar",(function(){return H})),r.d(t,"multiplyScalarAndAdd",(function(){return W})),r.d(t,"exactEquals",(function(){return X})),r.d(t,"equals",(function(){return K})),r.d(t,"mul",(function(){return Y})),r.d(t,"sub",(function(){return Q}));var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(16);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function o(e){var t=new n.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function u(e,t,r,i,o,a,u,c,l,s,f,p,d,y,m,b){var h=new n.ARRAY_TYPE(16);return h[0]=e,h[1]=t,h[2]=r,h[3]=i,h[4]=o,h[5]=a,h[6]=u,h[7]=c,h[8]=l,h[9]=s,h[10]=f,h[11]=p,h[12]=d,h[13]=y,h[14]=m,h[15]=b,h}function c(e,t,r,n,i,o,a,u,c,l,s,f,p,d,y,m,b){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e[6]=u,e[7]=c,e[8]=l,e[9]=s,e[10]=f,e[11]=p,e[12]=d,e[13]=y,e[14]=m,e[15]=b,e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function s(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function f(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=t[6],l=t[7],s=t[8],f=t[9],p=t[10],d=t[11],y=t[12],m=t[13],b=t[14],h=t[15],v=r*u-n*a,g=r*c-i*a,w=r*l-o*a,x=n*c-i*u,_=n*l-o*u,z=i*l-o*c,S=s*m-f*y,j=s*b-p*y,E=s*h-d*y,T=f*b-p*m,O=f*h-d*m,R=p*h-d*b,P=v*R-g*O+w*T+x*E-_*j+z*S;return P?(P=1/P,e[0]=(u*R-c*O+l*T)*P,e[1]=(i*O-n*R-o*T)*P,e[2]=(m*z-b*_+h*x)*P,e[3]=(p*_-f*z-d*x)*P,e[4]=(c*E-a*R-l*j)*P,e[5]=(r*R-i*E+o*j)*P,e[6]=(b*w-y*z-h*g)*P,e[7]=(s*z-p*w+d*g)*P,e[8]=(a*O-u*E+l*S)*P,e[9]=(n*E-r*O-o*S)*P,e[10]=(y*_-m*w+h*v)*P,e[11]=(f*w-s*_-d*v)*P,e[12]=(u*j-a*T-c*S)*P,e[13]=(r*T-n*j+i*S)*P,e[14]=(m*g-y*x-b*v)*P,e[15]=(s*x-f*g+p*v)*P,e):null}function p(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=t[6],l=t[7],s=t[8],f=t[9],p=t[10],d=t[11],y=t[12],m=t[13],b=t[14],h=t[15];return e[0]=u*(p*h-d*b)-f*(c*h-l*b)+m*(c*d-l*p),e[1]=-(n*(p*h-d*b)-f*(i*h-o*b)+m*(i*d-o*p)),e[2]=n*(c*h-l*b)-u*(i*h-o*b)+m*(i*l-o*c),e[3]=-(n*(c*d-l*p)-u*(i*d-o*p)+f*(i*l-o*c)),e[4]=-(a*(p*h-d*b)-s*(c*h-l*b)+y*(c*d-l*p)),e[5]=r*(p*h-d*b)-s*(i*h-o*b)+y*(i*d-o*p),e[6]=-(r*(c*h-l*b)-a*(i*h-o*b)+y*(i*l-o*c)),e[7]=r*(c*d-l*p)-a*(i*d-o*p)+s*(i*l-o*c),e[8]=a*(f*h-d*m)-s*(u*h-l*m)+y*(u*d-l*f),e[9]=-(r*(f*h-d*m)-s*(n*h-o*m)+y*(n*d-o*f)),e[10]=r*(u*h-l*m)-a*(n*h-o*m)+y*(n*l-o*u),e[11]=-(r*(u*d-l*f)-a*(n*d-o*f)+s*(n*l-o*u)),e[12]=-(a*(f*b-p*m)-s*(u*b-c*m)+y*(u*p-c*f)),e[13]=r*(f*b-p*m)-s*(n*b-i*m)+y*(n*p-i*f),e[14]=-(r*(u*b-c*m)-a*(n*b-i*m)+y*(n*c-i*u)),e[15]=r*(u*p-c*f)-a*(n*p-i*f)+s*(n*c-i*u),e}function d(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],u=e[6],c=e[7],l=e[8],s=e[9],f=e[10],p=e[11],d=e[12],y=e[13],m=e[14],b=e[15];return(t*a-r*o)*(f*b-p*m)-(t*u-n*o)*(s*b-p*y)+(t*c-i*o)*(s*m-f*y)+(r*u-n*a)*(l*b-p*d)-(r*c-i*a)*(l*m-f*d)+(n*c-i*u)*(l*y-s*d)}function y(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],l=t[6],s=t[7],f=t[8],p=t[9],d=t[10],y=t[11],m=t[12],b=t[13],h=t[14],v=t[15],g=r[0],w=r[1],x=r[2],_=r[3];return e[0]=g*n+w*u+x*f+_*m,e[1]=g*i+w*c+x*p+_*b,e[2]=g*o+w*l+x*d+_*h,e[3]=g*a+w*s+x*y+_*v,g=r[4],w=r[5],x=r[6],_=r[7],e[4]=g*n+w*u+x*f+_*m,e[5]=g*i+w*c+x*p+_*b,e[6]=g*o+w*l+x*d+_*h,e[7]=g*a+w*s+x*y+_*v,g=r[8],w=r[9],x=r[10],_=r[11],e[8]=g*n+w*u+x*f+_*m,e[9]=g*i+w*c+x*p+_*b,e[10]=g*o+w*l+x*d+_*h,e[11]=g*a+w*s+x*y+_*v,g=r[12],w=r[13],x=r[14],_=r[15],e[12]=g*n+w*u+x*f+_*m,e[13]=g*i+w*c+x*p+_*b,e[14]=g*o+w*l+x*d+_*h,e[15]=g*a+w*s+x*y+_*v,e}function m(e,t,r){var n=r[0],i=r[1],o=r[2],a=void 0,u=void 0,c=void 0,l=void 0,s=void 0,f=void 0,p=void 0,d=void 0,y=void 0,m=void 0,b=void 0,h=void 0;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],u=t[1],c=t[2],l=t[3],s=t[4],f=t[5],p=t[6],d=t[7],y=t[8],m=t[9],b=t[10],h=t[11],e[0]=a,e[1]=u,e[2]=c,e[3]=l,e[4]=s,e[5]=f,e[6]=p,e[7]=d,e[8]=y,e[9]=m,e[10]=b,e[11]=h,e[12]=a*n+s*i+y*o+t[12],e[13]=u*n+f*i+m*o+t[13],e[14]=c*n+p*i+b*o+t[14],e[15]=l*n+d*i+h*o+t[15]),e}function b(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function h(e,t,r,i){var o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R=i[0],P=i[1],D=i[2],A=Math.sqrt(R*R+P*P+D*D);return A<n.EPSILON?null:(R*=A=1/A,P*=A,D*=A,o=Math.sin(r),u=1-(a=Math.cos(r)),c=t[0],l=t[1],s=t[2],f=t[3],p=t[4],d=t[5],y=t[6],m=t[7],b=t[8],h=t[9],v=t[10],g=t[11],w=R*R*u+a,x=P*R*u+D*o,_=D*R*u-P*o,z=R*P*u-D*o,S=P*P*u+a,j=D*P*u+R*o,E=R*D*u+P*o,T=P*D*u-R*o,O=D*D*u+a,e[0]=c*w+p*x+b*_,e[1]=l*w+d*x+h*_,e[2]=s*w+y*x+v*_,e[3]=f*w+m*x+g*_,e[4]=c*z+p*S+b*j,e[5]=l*z+d*S+h*j,e[6]=s*z+y*S+v*j,e[7]=f*z+m*S+g*j,e[8]=c*E+p*T+b*O,e[9]=l*E+d*T+h*O,e[10]=s*E+y*T+v*O,e[11]=f*E+m*T+g*O,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function v(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],u=t[6],c=t[7],l=t[8],s=t[9],f=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*n,e[5]=a*i+s*n,e[6]=u*i+f*n,e[7]=c*i+p*n,e[8]=l*i-o*n,e[9]=s*i-a*n,e[10]=f*i-u*n,e[11]=p*i-c*n,e}function g(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],u=t[2],c=t[3],l=t[8],s=t[9],f=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-l*n,e[1]=a*i-s*n,e[2]=u*i-f*n,e[3]=c*i-p*n,e[8]=o*n+l*i,e[9]=a*n+s*i,e[10]=u*n+f*i,e[11]=c*n+p*i,e}function w(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],u=t[2],c=t[3],l=t[4],s=t[5],f=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*n,e[1]=a*i+s*n,e[2]=u*i+f*n,e[3]=c*i+p*n,e[4]=l*i-o*n,e[5]=s*i-a*n,e[6]=f*i-u*n,e[7]=p*i-c*n,e}function x(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function _(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function z(e,t,r){var i,o,a,u=r[0],c=r[1],l=r[2],s=Math.sqrt(u*u+c*c+l*l);return s<n.EPSILON?null:(u*=s=1/s,c*=s,l*=s,i=Math.sin(t),a=1-(o=Math.cos(t)),e[0]=u*u*a+o,e[1]=c*u*a+l*i,e[2]=l*u*a-c*i,e[3]=0,e[4]=u*c*a-l*i,e[5]=c*c*a+o,e[6]=l*c*a+u*i,e[7]=0,e[8]=u*l*a+c*i,e[9]=c*l*a-u*i,e[10]=l*l*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function S(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function E(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function T(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=n+n,c=i+i,l=o+o,s=n*u,f=n*c,p=n*l,d=i*c,y=i*l,m=o*l,b=a*u,h=a*c,v=a*l;return e[0]=1-(d+m),e[1]=f+v,e[2]=p-h,e[3]=0,e[4]=f-v,e[5]=1-(s+m),e[6]=y+b,e[7]=0,e[8]=p+h,e[9]=y-b,e[10]=1-(s+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function O(e,t){var r=new n.ARRAY_TYPE(3),i=-t[0],o=-t[1],a=-t[2],u=t[3],c=t[4],l=t[5],s=t[6],f=t[7],p=i*i+o*o+a*a+u*u;return p>0?(r[0]=2*(c*u+f*i+l*a-s*o)/p,r[1]=2*(l*u+f*o+s*i-c*a)/p,r[2]=2*(s*u+f*a+c*o-l*i)/p):(r[0]=2*(c*u+f*i+l*a-s*o),r[1]=2*(l*u+f*o+s*i-c*a),r[2]=2*(s*u+f*a+c*o-l*i)),T(e,t,r),e}function R(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function P(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],u=t[6],c=t[8],l=t[9],s=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(o*o+a*a+u*u),e[2]=Math.sqrt(c*c+l*l+s*s),e}function D(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e}function A(e,t,r,n){var i=t[0],o=t[1],a=t[2],u=t[3],c=i+i,l=o+o,s=a+a,f=i*c,p=i*l,d=i*s,y=o*l,m=o*s,b=a*s,h=u*c,v=u*l,g=u*s,w=n[0],x=n[1],_=n[2];return e[0]=(1-(y+b))*w,e[1]=(p+g)*w,e[2]=(d-v)*w,e[3]=0,e[4]=(p-g)*x,e[5]=(1-(f+b))*x,e[6]=(m+h)*x,e[7]=0,e[8]=(d+v)*_,e[9]=(m-h)*_,e[10]=(1-(f+y))*_,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function M(e,t,r,n,i){var o=t[0],a=t[1],u=t[2],c=t[3],l=o+o,s=a+a,f=u+u,p=o*l,d=o*s,y=o*f,m=a*s,b=a*f,h=u*f,v=c*l,g=c*s,w=c*f,x=n[0],_=n[1],z=n[2],S=i[0],j=i[1],E=i[2],T=(1-(m+h))*x,O=(d+w)*x,R=(y-g)*x,P=(d-w)*_,D=(1-(p+h))*_,A=(b+v)*_,M=(y+g)*z,C=(b-v)*z,k=(1-(p+m))*z;return e[0]=T,e[1]=O,e[2]=R,e[3]=0,e[4]=P,e[5]=D,e[6]=A,e[7]=0,e[8]=M,e[9]=C,e[10]=k,e[11]=0,e[12]=r[0]+S-(T*S+P*j+M*E),e[13]=r[1]+j-(O*S+D*j+C*E),e[14]=r[2]+E-(R*S+A*j+k*E),e[15]=1,e}function C(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,u=n+n,c=i+i,l=r*a,s=n*a,f=n*u,p=i*a,d=i*u,y=i*c,m=o*a,b=o*u,h=o*c;return e[0]=1-f-y,e[1]=s+h,e[2]=p-b,e[3]=0,e[4]=s-h,e[5]=1-l-y,e[6]=d+m,e[7]=0,e[8]=p+b,e[9]=d-m,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function k(e,t,r,n,i,o,a){var u=1/(r-t),c=1/(i-n),l=1/(o-a);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*c,e[6]=0,e[7]=0,e[8]=(r+t)*u,e[9]=(i+n)*c,e[10]=(a+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*l,e[15]=0,e}function I(e,t,r,n,i){var o=1/Math.tan(t/2),a=void 0;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}function L(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),c=2/(a+u),l=2/(i+o);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*c*.5,e[9]=(i-o)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function G(e,t,r,n,i,o,a){var u=1/(t-r),c=1/(n-i),l=1/(o-a);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*u,e[13]=(i+n)*c,e[14]=(a+o)*l,e[15]=1,e}function F(e,t,r,i){var o=void 0,a=void 0,u=void 0,c=void 0,s=void 0,f=void 0,p=void 0,d=void 0,y=void 0,m=void 0,b=t[0],h=t[1],v=t[2],g=i[0],w=i[1],x=i[2],_=r[0],z=r[1],S=r[2];return Math.abs(b-_)<n.EPSILON&&Math.abs(h-z)<n.EPSILON&&Math.abs(v-S)<n.EPSILON?l(e):(p=b-_,d=h-z,y=v-S,o=w*(y*=m=1/Math.sqrt(p*p+d*d+y*y))-x*(d*=m),a=x*(p*=m)-g*y,u=g*d-w*p,(m=Math.sqrt(o*o+a*a+u*u))?(o*=m=1/m,a*=m,u*=m):(o=0,a=0,u=0),c=d*u-y*a,s=y*o-p*u,f=p*a-d*o,(m=Math.sqrt(c*c+s*s+f*f))?(c*=m=1/m,s*=m,f*=m):(c=0,s=0,f=0),e[0]=o,e[1]=c,e[2]=p,e[3]=0,e[4]=a,e[5]=s,e[6]=d,e[7]=0,e[8]=u,e[9]=f,e[10]=y,e[11]=0,e[12]=-(o*b+a*h+u*v),e[13]=-(c*b+s*h+f*v),e[14]=-(p*b+d*h+y*v),e[15]=1,e)}function B(e,t,r,n){var i=t[0],o=t[1],a=t[2],u=n[0],c=n[1],l=n[2],s=i-r[0],f=o-r[1],p=a-r[2],d=s*s+f*f+p*p;d>0&&(s*=d=1/Math.sqrt(d),f*=d,p*=d);var y=c*p-l*f,m=l*s-u*p,b=u*f-c*s;return(d=y*y+m*m+b*b)>0&&(y*=d=1/Math.sqrt(d),m*=d,b*=d),e[0]=y,e[1]=m,e[2]=b,e[3]=0,e[4]=f*b-p*m,e[5]=p*y-s*b,e[6]=s*m-f*y,e[7]=0,e[8]=s,e[9]=f,e[10]=p,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e}function N(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function U(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function V(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function q(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function H(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function W(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function X(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function K(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],c=e[5],l=e[6],s=e[7],f=e[8],p=e[9],d=e[10],y=e[11],m=e[12],b=e[13],h=e[14],v=e[15],g=t[0],w=t[1],x=t[2],_=t[3],z=t[4],S=t[5],j=t[6],E=t[7],T=t[8],O=t[9],R=t[10],P=t[11],D=t[12],A=t[13],M=t[14],C=t[15];return Math.abs(r-g)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(i-w)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(o-x)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-_)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(u-z)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(z))&&Math.abs(c-S)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-j)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(j))&&Math.abs(s-E)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(f-T)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(p-O)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(d-R)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(y-P)<=n.EPSILON*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(m-D)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(b-A)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(A))&&Math.abs(h-M)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(v-C)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(C))}var Y=y,Q=q},"../node_modules/gl-matrix/lib/gl-matrix/quat.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return u})),r.d(t,"identity",(function(){return c})),r.d(t,"setAxisAngle",(function(){return l})),r.d(t,"getAxisAngle",(function(){return s})),r.d(t,"multiply",(function(){return f})),r.d(t,"rotateX",(function(){return p})),r.d(t,"rotateY",(function(){return d})),r.d(t,"rotateZ",(function(){return y})),r.d(t,"calculateW",(function(){return m})),r.d(t,"slerp",(function(){return b})),r.d(t,"random",(function(){return h})),r.d(t,"invert",(function(){return v})),r.d(t,"conjugate",(function(){return g})),r.d(t,"fromMat3",(function(){return w})),r.d(t,"fromEuler",(function(){return x})),r.d(t,"str",(function(){return _})),r.d(t,"clone",(function(){return R})),r.d(t,"fromValues",(function(){return P})),r.d(t,"copy",(function(){return D})),r.d(t,"set",(function(){return A})),r.d(t,"add",(function(){return M})),r.d(t,"mul",(function(){return C})),r.d(t,"scale",(function(){return k})),r.d(t,"dot",(function(){return I})),r.d(t,"lerp",(function(){return L})),r.d(t,"length",(function(){return G})),r.d(t,"len",(function(){return F})),r.d(t,"squaredLength",(function(){return B})),r.d(t,"sqrLen",(function(){return N})),r.d(t,"normalize",(function(){return U})),r.d(t,"exactEquals",(function(){return V})),r.d(t,"equals",(function(){return q})),r.d(t,"rotationTo",(function(){return H})),r.d(t,"sqlerp",(function(){return W})),r.d(t,"setAxes",(function(){return X}));var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js"),i=r("../node_modules/gl-matrix/lib/gl-matrix/mat3.js"),o=r("../node_modules/gl-matrix/lib/gl-matrix/vec3.js"),a=r("../node_modules/gl-matrix/lib/gl-matrix/vec4.js");function u(){var e=new n.ARRAY_TYPE(4);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function c(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function l(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function s(e,t){var r=2*Math.acos(t[3]),i=Math.sin(r/2);return i>n.EPSILON?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),r}function f(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=r[0],c=r[1],l=r[2],s=r[3];return e[0]=n*s+a*u+i*l-o*c,e[1]=i*s+a*c+o*u-n*l,e[2]=o*s+a*l+n*c-i*u,e[3]=a*s-n*u-i*c-o*l,e}function p(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=i*c+o*u,e[2]=o*c-i*u,e[3]=a*c-n*u,e}function d(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c-o*u,e[1]=i*c+a*u,e[2]=o*c+n*u,e[3]=a*c-i*u,e}function y(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+i*u,e[1]=i*c-n*u,e[2]=o*c+a*u,e[3]=a*c-o*u,e}function m(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function b(e,t,r,i){var o=t[0],a=t[1],u=t[2],c=t[3],l=r[0],s=r[1],f=r[2],p=r[3],d=void 0,y=void 0,m=void 0,b=void 0,h=void 0;return(y=o*l+a*s+u*f+c*p)<0&&(y=-y,l=-l,s=-s,f=-f,p=-p),1-y>n.EPSILON?(d=Math.acos(y),m=Math.sin(d),b=Math.sin((1-i)*d)/m,h=Math.sin(i*d)/m):(b=1-i,h=i),e[0]=b*o+h*l,e[1]=b*a+h*s,e[2]=b*u+h*f,e[3]=b*c+h*p,e}function h(e){var t=n.RANDOM(),r=n.RANDOM(),i=n.RANDOM(),o=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=o*Math.sin(2*Math.PI*r),e[1]=o*Math.cos(2*Math.PI*r),e[2]=a*Math.sin(2*Math.PI*i),e[3]=a*Math.cos(2*Math.PI*i),e}function v(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o,u=a?1/a:0;return e[0]=-r*u,e[1]=-n*u,e[2]=-i*u,e[3]=o*u,e}function g(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function w(e,t){var r=t[0]+t[4]+t[8],n=void 0;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e}function x(e,t,r,n){var i=.5*Math.PI/180;t*=i,r*=i,n*=i;var o=Math.sin(t),a=Math.cos(t),u=Math.sin(r),c=Math.cos(r),l=Math.sin(n),s=Math.cos(n);return e[0]=o*c*s-a*u*l,e[1]=a*u*s+o*c*l,e[2]=a*c*l-o*u*s,e[3]=a*c*s+o*u*l,e}function _(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var z,S,j,E,T,O,R=a.clone,P=a.fromValues,D=a.copy,A=a.set,M=a.add,C=f,k=a.scale,I=a.dot,L=a.lerp,G=a.length,F=G,B=a.squaredLength,N=B,U=a.normalize,V=a.exactEquals,q=a.equals,H=(z=o.create(),S=o.fromValues(1,0,0),j=o.fromValues(0,1,0),function(e,t,r){var n=o.dot(t,r);return n<-.999999?(o.cross(z,S,t),o.len(z)<1e-6&&o.cross(z,j,t),o.normalize(z,z),l(e,z,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(o.cross(z,t,r),e[0]=z[0],e[1]=z[1],e[2]=z[2],e[3]=1+n,U(e,e))}),W=(E=u(),T=u(),function(e,t,r,n,i,o){return b(E,t,i,o),b(T,r,n,o),b(e,E,T,2*o*(1-o)),e}),X=(O=i.create(),function(e,t,r,n){return O[0]=r[0],O[3]=r[1],O[6]=r[2],O[1]=n[0],O[4]=n[1],O[7]=n[2],O[2]=-t[0],O[5]=-t[1],O[8]=-t[2],U(e,w(e,O))})},"../node_modules/gl-matrix/lib/gl-matrix/quat2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return a})),r.d(t,"clone",(function(){return u})),r.d(t,"fromValues",(function(){return c})),r.d(t,"fromRotationTranslationValues",(function(){return l})),r.d(t,"fromRotationTranslation",(function(){return s})),r.d(t,"fromTranslation",(function(){return f})),r.d(t,"fromRotation",(function(){return p})),r.d(t,"fromMat4",(function(){return d})),r.d(t,"copy",(function(){return y})),r.d(t,"identity",(function(){return m})),r.d(t,"set",(function(){return b})),r.d(t,"getReal",(function(){return h})),r.d(t,"getDual",(function(){return v})),r.d(t,"setReal",(function(){return g})),r.d(t,"setDual",(function(){return w})),r.d(t,"getTranslation",(function(){return x})),r.d(t,"translate",(function(){return _})),r.d(t,"rotateX",(function(){return z})),r.d(t,"rotateY",(function(){return S})),r.d(t,"rotateZ",(function(){return j})),r.d(t,"rotateByQuatAppend",(function(){return E})),r.d(t,"rotateByQuatPrepend",(function(){return T})),r.d(t,"rotateAroundAxis",(function(){return O})),r.d(t,"add",(function(){return R})),r.d(t,"multiply",(function(){return P})),r.d(t,"mul",(function(){return D})),r.d(t,"scale",(function(){return A})),r.d(t,"dot",(function(){return M})),r.d(t,"lerp",(function(){return C})),r.d(t,"invert",(function(){return k})),r.d(t,"conjugate",(function(){return I})),r.d(t,"length",(function(){return L})),r.d(t,"len",(function(){return G})),r.d(t,"squaredLength",(function(){return F})),r.d(t,"sqrLen",(function(){return B})),r.d(t,"normalize",(function(){return N})),r.d(t,"str",(function(){return U})),r.d(t,"exactEquals",(function(){return V})),r.d(t,"equals",(function(){return q}));var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js"),i=r("../node_modules/gl-matrix/lib/gl-matrix/quat.js"),o=r("../node_modules/gl-matrix/lib/gl-matrix/mat4.js");function a(){var e=new n.ARRAY_TYPE(8);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function u(e){var t=new n.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function c(e,t,r,i,o,a,u,c){var l=new n.ARRAY_TYPE(8);return l[0]=e,l[1]=t,l[2]=r,l[3]=i,l[4]=o,l[5]=a,l[6]=u,l[7]=c,l}function l(e,t,r,i,o,a,u){var c=new n.ARRAY_TYPE(8);c[0]=e,c[1]=t,c[2]=r,c[3]=i;var l=.5*o,s=.5*a,f=.5*u;return c[4]=l*i+s*r-f*t,c[5]=s*i+f*e-l*r,c[6]=f*i+l*t-s*e,c[7]=-l*e-s*t-f*r,c}function s(e,t,r){var n=.5*r[0],i=.5*r[1],o=.5*r[2],a=t[0],u=t[1],c=t[2],l=t[3];return e[0]=a,e[1]=u,e[2]=c,e[3]=l,e[4]=n*l+i*c-o*u,e[5]=i*l+o*a-n*c,e[6]=o*l+n*u-i*a,e[7]=-n*a-i*u-o*c,e}function f(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function p(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function d(e,t){var r=i.create();o.getRotation(r,t);var a=new n.ARRAY_TYPE(3);return o.getTranslation(a,t),s(e,r,a),e}function y(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function m(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function b(e,t,r,n,i,o,a,u,c){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e[6]=u,e[7]=c,e}var h=i.copy;function v(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var g=i.copy;function w(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function x(e,t){var r=t[4],n=t[5],i=t[6],o=t[7],a=-t[0],u=-t[1],c=-t[2],l=t[3];return e[0]=2*(r*l+o*a+n*c-i*u),e[1]=2*(n*l+o*u+i*a-r*c),e[2]=2*(i*l+o*c+r*u-n*a),e}function _(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=.5*r[0],c=.5*r[1],l=.5*r[2],s=t[4],f=t[5],p=t[6],d=t[7];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=a*u+i*l-o*c+s,e[5]=a*c+o*u-n*l+f,e[6]=a*l+n*c-i*u+p,e[7]=-n*u-i*c-o*l+d,e}function z(e,t,r){var n=-t[0],o=-t[1],a=-t[2],u=t[3],c=t[4],l=t[5],s=t[6],f=t[7],p=c*u+f*n+l*a-s*o,d=l*u+f*o+s*n-c*a,y=s*u+f*a+c*o-l*n,m=f*u-c*n-l*o-s*a;return i.rotateX(e,t,r),n=e[0],o=e[1],a=e[2],u=e[3],e[4]=p*u+m*n+d*a-y*o,e[5]=d*u+m*o+y*n-p*a,e[6]=y*u+m*a+p*o-d*n,e[7]=m*u-p*n-d*o-y*a,e}function S(e,t,r){var n=-t[0],o=-t[1],a=-t[2],u=t[3],c=t[4],l=t[5],s=t[6],f=t[7],p=c*u+f*n+l*a-s*o,d=l*u+f*o+s*n-c*a,y=s*u+f*a+c*o-l*n,m=f*u-c*n-l*o-s*a;return i.rotateY(e,t,r),n=e[0],o=e[1],a=e[2],u=e[3],e[4]=p*u+m*n+d*a-y*o,e[5]=d*u+m*o+y*n-p*a,e[6]=y*u+m*a+p*o-d*n,e[7]=m*u-p*n-d*o-y*a,e}function j(e,t,r){var n=-t[0],o=-t[1],a=-t[2],u=t[3],c=t[4],l=t[5],s=t[6],f=t[7],p=c*u+f*n+l*a-s*o,d=l*u+f*o+s*n-c*a,y=s*u+f*a+c*o-l*n,m=f*u-c*n-l*o-s*a;return i.rotateZ(e,t,r),n=e[0],o=e[1],a=e[2],u=e[3],e[4]=p*u+m*n+d*a-y*o,e[5]=d*u+m*o+y*n-p*a,e[6]=y*u+m*a+p*o-d*n,e[7]=m*u-p*n-d*o-y*a,e}function E(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],u=t[0],c=t[1],l=t[2],s=t[3];return e[0]=u*a+s*n+c*o-l*i,e[1]=c*a+s*i+l*n-u*o,e[2]=l*a+s*o+u*i-c*n,e[3]=s*a-u*n-c*i-l*o,u=t[4],c=t[5],l=t[6],s=t[7],e[4]=u*a+s*n+c*o-l*i,e[5]=c*a+s*i+l*n-u*o,e[6]=l*a+s*o+u*i-c*n,e[7]=s*a-u*n-c*i-l*o,e}function T(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=r[0],c=r[1],l=r[2],s=r[3];return e[0]=n*s+a*u+i*l-o*c,e[1]=i*s+a*c+o*u-n*l,e[2]=o*s+a*l+n*c-i*u,e[3]=a*s-n*u-i*c-o*l,u=r[4],c=r[5],l=r[6],s=r[7],e[4]=n*s+a*u+i*l-o*c,e[5]=i*s+a*c+o*u-n*l,e[6]=o*s+a*l+n*c-i*u,e[7]=a*s-n*u-i*c-o*l,e}function O(e,t,r,i){if(Math.abs(i)<n.EPSILON)return y(e,t);var o=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);i*=.5;var a=Math.sin(i),u=a*r[0]/o,c=a*r[1]/o,l=a*r[2]/o,s=Math.cos(i),f=t[0],p=t[1],d=t[2],m=t[3];e[0]=f*s+m*u+p*l-d*c,e[1]=p*s+m*c+d*u-f*l,e[2]=d*s+m*l+f*c-p*u,e[3]=m*s-f*u-p*c-d*l;var b=t[4],h=t[5],v=t[6],g=t[7];return e[4]=b*s+g*u+h*l-v*c,e[5]=h*s+g*c+v*u-b*l,e[6]=v*s+g*l+b*c-h*u,e[7]=g*s-b*u-h*c-v*l,e}function R(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e}function P(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=r[4],c=r[5],l=r[6],s=r[7],f=t[4],p=t[5],d=t[6],y=t[7],m=r[0],b=r[1],h=r[2],v=r[3];return e[0]=n*v+a*m+i*h-o*b,e[1]=i*v+a*b+o*m-n*h,e[2]=o*v+a*h+n*b-i*m,e[3]=a*v-n*m-i*b-o*h,e[4]=n*s+a*u+i*l-o*c+f*v+y*m+p*h-d*b,e[5]=i*s+a*c+o*u-n*l+p*v+y*b+d*m-f*h,e[6]=o*s+a*l+n*c-i*u+d*v+y*h+f*b-p*m,e[7]=a*s-n*u-i*c-o*l+y*v-f*m-p*b-d*h,e}var D=P;function A(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e}var M=i.dot;function C(e,t,r,n){var i=1-n;return M(t,r)<0&&(n=-n),e[0]=t[0]*i+r[0]*n,e[1]=t[1]*i+r[1]*n,e[2]=t[2]*i+r[2]*n,e[3]=t[3]*i+r[3]*n,e[4]=t[4]*i+r[4]*n,e[5]=t[5]*i+r[5]*n,e[6]=t[6]*i+r[6]*n,e[7]=t[7]*i+r[7]*n,e}function k(e,t){var r=F(t);return e[0]=-t[0]/r,e[1]=-t[1]/r,e[2]=-t[2]/r,e[3]=t[3]/r,e[4]=-t[4]/r,e[5]=-t[5]/r,e[6]=-t[6]/r,e[7]=t[7]/r,e}function I(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var L=i.length,G=L,F=i.squaredLength,B=F;function N(e,t){var r=F(t);if(r>0){r=Math.sqrt(r);var n=t[0]/r,i=t[1]/r,o=t[2]/r,a=t[3]/r,u=t[4],c=t[5],l=t[6],s=t[7],f=n*u+i*c+o*l+a*s;e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=(u-n*f)/r,e[5]=(c-i*f)/r,e[6]=(l-o*f)/r,e[7]=(s-a*f)/r}return e}function U(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function V(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function q(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],c=e[5],l=e[6],s=e[7],f=t[0],p=t[1],d=t[2],y=t[3],m=t[4],b=t[5],h=t[6],v=t[7];return Math.abs(r-f)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-p)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-d)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-y)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(u-m)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-b)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(l-h)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(h))&&Math.abs(s-v)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))}},"../node_modules/gl-matrix/lib/gl-matrix/vec2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return i})),r.d(t,"clone",(function(){return o})),r.d(t,"fromValues",(function(){return a})),r.d(t,"copy",(function(){return u})),r.d(t,"set",(function(){return c})),r.d(t,"add",(function(){return l})),r.d(t,"subtract",(function(){return s})),r.d(t,"multiply",(function(){return f})),r.d(t,"divide",(function(){return p})),r.d(t,"ceil",(function(){return d})),r.d(t,"floor",(function(){return y})),r.d(t,"min",(function(){return m})),r.d(t,"max",(function(){return b})),r.d(t,"round",(function(){return h})),r.d(t,"scale",(function(){return v})),r.d(t,"scaleAndAdd",(function(){return g})),r.d(t,"distance",(function(){return w})),r.d(t,"squaredDistance",(function(){return x})),r.d(t,"length",(function(){return _})),r.d(t,"squaredLength",(function(){return z})),r.d(t,"negate",(function(){return S})),r.d(t,"inverse",(function(){return j})),r.d(t,"normalize",(function(){return E})),r.d(t,"dot",(function(){return T})),r.d(t,"cross",(function(){return O})),r.d(t,"lerp",(function(){return R})),r.d(t,"random",(function(){return P})),r.d(t,"transformMat2",(function(){return D})),r.d(t,"transformMat2d",(function(){return A})),r.d(t,"transformMat3",(function(){return M})),r.d(t,"transformMat4",(function(){return C})),r.d(t,"rotate",(function(){return k})),r.d(t,"angle",(function(){return I})),r.d(t,"str",(function(){return L})),r.d(t,"exactEquals",(function(){return G})),r.d(t,"equals",(function(){return F})),r.d(t,"len",(function(){return N})),r.d(t,"sub",(function(){return U})),r.d(t,"mul",(function(){return V})),r.d(t,"div",(function(){return q})),r.d(t,"dist",(function(){return H})),r.d(t,"sqrDist",(function(){return W})),r.d(t,"sqrLen",(function(){return X})),r.d(t,"forEach",(function(){return K}));var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(2);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function o(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function a(e,t){var r=new n.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r}function u(e,t){return e[0]=t[0],e[1]=t[1],e}function c(e,t,r){return e[0]=t,e[1]=r,e}function l(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function f(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function p(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function d(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function y(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function m(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function b(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function h(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function v(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function g(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function w(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function x(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function _(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function z(e){var t=e[0],r=e[1];return t*t+r*r}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e}function j(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function E(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function T(e,t){return e[0]*t[0]+e[1]*t[1]}function O(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function R(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function P(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function D(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}function A(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function M(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function C(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}function k(e,t,r,n){var i=t[0]-r[0],o=t[1]-r[1],a=Math.sin(n),u=Math.cos(n);return e[0]=i*u-o*a+r[0],e[1]=i*a+o*u+r[1],e}function I(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],a=r*r+n*n;a>0&&(a=1/Math.sqrt(a));var u=i*i+o*o;u>0&&(u=1/Math.sqrt(u));var c=(r*i+n*o)*a*u;return c>1?0:c<-1?Math.PI:Math.acos(c)}function L(e){return"vec2("+e[0]+", "+e[1]+")"}function G(e,t){return e[0]===t[0]&&e[1]===t[1]}function F(e,t){var r=e[0],i=e[1],o=t[0],a=t[1];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))}var B,N=_,U=s,V=f,q=p,H=w,W=x,X=z,K=(B=i(),function(e,t,r,n,i,o){var a=void 0,u=void 0;for(t||(t=2),r||(r=0),u=n?Math.min(n*t+r,e.length):e.length,a=r;a<u;a+=t)B[0]=e[a],B[1]=e[a+1],i(B,B,o),e[a]=B[0],e[a+1]=B[1];return e})},"../node_modules/gl-matrix/lib/gl-matrix/vec3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return i})),r.d(t,"clone",(function(){return o})),r.d(t,"length",(function(){return a})),r.d(t,"fromValues",(function(){return u})),r.d(t,"copy",(function(){return c})),r.d(t,"set",(function(){return l})),r.d(t,"add",(function(){return s})),r.d(t,"subtract",(function(){return f})),r.d(t,"multiply",(function(){return p})),r.d(t,"divide",(function(){return d})),r.d(t,"ceil",(function(){return y})),r.d(t,"floor",(function(){return m})),r.d(t,"min",(function(){return b})),r.d(t,"max",(function(){return h})),r.d(t,"round",(function(){return v})),r.d(t,"scale",(function(){return g})),r.d(t,"scaleAndAdd",(function(){return w})),r.d(t,"distance",(function(){return x})),r.d(t,"squaredDistance",(function(){return _})),r.d(t,"squaredLength",(function(){return z})),r.d(t,"negate",(function(){return S})),r.d(t,"inverse",(function(){return j})),r.d(t,"normalize",(function(){return E})),r.d(t,"dot",(function(){return T})),r.d(t,"cross",(function(){return O})),r.d(t,"lerp",(function(){return R})),r.d(t,"hermite",(function(){return P})),r.d(t,"bezier",(function(){return D})),r.d(t,"random",(function(){return A})),r.d(t,"transformMat4",(function(){return M})),r.d(t,"transformMat3",(function(){return C})),r.d(t,"transformQuat",(function(){return k})),r.d(t,"rotateX",(function(){return I})),r.d(t,"rotateY",(function(){return L})),r.d(t,"rotateZ",(function(){return G})),r.d(t,"angle",(function(){return F})),r.d(t,"str",(function(){return B})),r.d(t,"exactEquals",(function(){return N})),r.d(t,"equals",(function(){return U})),r.d(t,"sub",(function(){return q})),r.d(t,"mul",(function(){return H})),r.d(t,"div",(function(){return W})),r.d(t,"dist",(function(){return X})),r.d(t,"sqrDist",(function(){return K})),r.d(t,"len",(function(){return Y})),r.d(t,"sqrLen",(function(){return Q})),r.d(t,"forEach",(function(){return Z}));var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(3);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function o(e){var t=new n.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function u(e,t,r){var i=new n.ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=r,i}function c(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function l(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function s(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function f(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function p(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function d(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function y(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function m(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function b(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function h(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function v(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function g(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function w(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function x(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}function _(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function z(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function j(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function E(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function T(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function O(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],u=r[1],c=r[2];return e[0]=i*c-o*u,e[1]=o*a-n*c,e[2]=n*u-i*a,e}function R(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}function P(e,t,r,n,i,o){var a=o*o,u=a*(2*o-3)+1,c=a*(o-2)+o,l=a*(o-1),s=a*(3-2*o);return e[0]=t[0]*u+r[0]*c+n[0]*l+i[0]*s,e[1]=t[1]*u+r[1]*c+n[1]*l+i[1]*s,e[2]=t[2]*u+r[2]*c+n[2]*l+i[2]*s,e}function D(e,t,r,n,i,o){var a=1-o,u=a*a,c=o*o,l=u*a,s=3*o*u,f=3*c*a,p=c*o;return e[0]=t[0]*l+r[0]*s+n[0]*f+i[0]*p,e[1]=t[1]*l+r[1]*s+n[1]*f+i[1]*p,e[2]=t[2]*l+r[2]*s+n[2]*f+i[2]*p,e}function A(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI,i=2*n.RANDOM()-1,o=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=i*t,e}function M(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function C(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function k(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],u=t[0],c=t[1],l=t[2],s=i*l-o*c,f=o*u-n*l,p=n*c-i*u,d=i*p-o*f,y=o*s-n*p,m=n*f-i*s,b=2*a;return s*=b,f*=b,p*=b,d*=2,y*=2,m*=2,e[0]=u+s+d,e[1]=c+f+y,e[2]=l+p+m,e}function I(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function L(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function G(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function F(e,t){var r=u(e[0],e[1],e[2]),n=u(t[0],t[1],t[2]);E(r,r),E(n,n);var i=T(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)}function B(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function N(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function U(e,t){var r=e[0],i=e[1],o=e[2],a=t[0],u=t[1],c=t[2];return Math.abs(r-a)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}var V,q=f,H=p,W=d,X=x,K=_,Y=a,Q=z,Z=(V=i(),function(e,t,r,n,i,o){var a=void 0,u=void 0;for(t||(t=3),r||(r=0),u=n?Math.min(n*t+r,e.length):e.length,a=r;a<u;a+=t)V[0]=e[a],V[1]=e[a+1],V[2]=e[a+2],i(V,V,o),e[a]=V[0],e[a+1]=V[1],e[a+2]=V[2];return e})},"../node_modules/gl-matrix/lib/gl-matrix/vec4.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return i})),r.d(t,"clone",(function(){return o})),r.d(t,"fromValues",(function(){return a})),r.d(t,"copy",(function(){return u})),r.d(t,"set",(function(){return c})),r.d(t,"add",(function(){return l})),r.d(t,"subtract",(function(){return s})),r.d(t,"multiply",(function(){return f})),r.d(t,"divide",(function(){return p})),r.d(t,"ceil",(function(){return d})),r.d(t,"floor",(function(){return y})),r.d(t,"min",(function(){return m})),r.d(t,"max",(function(){return b})),r.d(t,"round",(function(){return h})),r.d(t,"scale",(function(){return v})),r.d(t,"scaleAndAdd",(function(){return g})),r.d(t,"distance",(function(){return w})),r.d(t,"squaredDistance",(function(){return x})),r.d(t,"length",(function(){return _})),r.d(t,"squaredLength",(function(){return z})),r.d(t,"negate",(function(){return S})),r.d(t,"inverse",(function(){return j})),r.d(t,"normalize",(function(){return E})),r.d(t,"dot",(function(){return T})),r.d(t,"lerp",(function(){return O})),r.d(t,"random",(function(){return R})),r.d(t,"transformMat4",(function(){return P})),r.d(t,"transformQuat",(function(){return D})),r.d(t,"str",(function(){return A})),r.d(t,"exactEquals",(function(){return M})),r.d(t,"equals",(function(){return C})),r.d(t,"sub",(function(){return I})),r.d(t,"mul",(function(){return L})),r.d(t,"div",(function(){return G})),r.d(t,"dist",(function(){return F})),r.d(t,"sqrDist",(function(){return B})),r.d(t,"len",(function(){return N})),r.d(t,"sqrLen",(function(){return U})),r.d(t,"forEach",(function(){return V}));var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(4);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function o(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t,r,i){var o=new n.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function c(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function l(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function f(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function p(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function d(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function y(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function m(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function b(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function h(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function v(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function g(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}function w(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+o*o)}function x(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return r*r+n*n+i*i+o*o}function _(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)}function z(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function j(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function E(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a),e}function T(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function O(e,t,r,n){var i=t[0],o=t[1],a=t[2],u=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=u+n*(r[3]-u),e}function R(e,t){var r,i,o,a,u,c;t=t||1;do{u=(r=2*n.RANDOM()-1)*r+(i=2*n.RANDOM()-1)*i}while(u>=1);do{c=(o=2*n.RANDOM()-1)*o+(a=2*n.RANDOM()-1)*a}while(c>=1);var l=Math.sqrt((1-u)/c);return e[0]=t*r,e[1]=t*i,e[2]=t*o*l,e[3]=t*a*l,e}function P(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}function D(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],u=r[1],c=r[2],l=r[3],s=l*n+u*o-c*i,f=l*i+c*n-a*o,p=l*o+a*i-u*n,d=-a*n-u*i-c*o;return e[0]=s*l+d*-a+f*-c-p*-u,e[1]=f*l+d*-u+p*-a-s*-c,e[2]=p*l+d*-c+s*-u-f*-a,e[3]=t[3],e}function A(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function M(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function C(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],u=t[0],c=t[1],l=t[2],s=t[3];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))}var k,I=s,L=f,G=p,F=w,B=x,N=_,U=z,V=(k=i(),function(e,t,r,n,i,o){var a=void 0,u=void 0;for(t||(t=4),r||(r=0),u=n?Math.min(n*t+r,e.length):e.length,a=r;a<u;a+=t)k[0]=e[a],k[1]=e[a+1],k[2]=e[a+2],k[3]=e[a+3],i(k,k,o),e[a]=k[0],e[a+1]=k[1],e[a+2]=k[2],e[a+3]=k[3];return e})},"../node_modules/process/browser.js":function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c,l=[],s=!1,f=-1;function p(){s&&c&&(s=!1,c.length?l=c.concat(l):f=-1,l.length&&d())}function d(){if(!s){var e=u(p);s=!0;for(var t=l.length;t;){for(c=l,l=[];++f<t;)c&&c[f].run();f=-1,t=l.length}c=null,s=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new y(e,t)),1!==l.length||s||u(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"../node_modules/reflect-metadata/Reflect.js":function(e,t,r){(function(e,t){var r;!function(r){!function(n){var i="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=a(r);function a(e,t){return function(r,n){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0===i.Reflect?i.Reflect=r:o=a(i.Reflect,o),function(t){var r=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,u={__proto__:[]}instanceof Array,c=!a&&!u,l={create:a?function(){return M(Object.create(null))}:u?function(){return M({__proto__:null})}:function(){return M({})},has:c?function(e,t){return r.call(e,t)}:function(e,t){return t in e},get:c?function(e,t){return r.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},s=Object.getPrototypeOf(Function),f="object"==typeof e&&e.env&&"true"===e.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,i)},t.prototype.entries=function(){return new r(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}():Map,d=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,y=new(f||"function"!=typeof WeakMap?function(){var e=l.create(),t=n();return function(){function e(){this._key=n()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=n()},e}();function n(){var t;do{t="@@WeakMap@@"+a()}while(l.has(e,t));return e[t]=!0,t}function i(e,n){if(!r.call(e,t)){if(!n)return;Object.defineProperty(e,t,{value:l.create()})}return e[t]}function o(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function a(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var r="",n=0;n<16;++n){var i=t[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}():WeakMap);function m(e,t,r){var n=y.get(e);if(x(n)){if(!r)return;n=new p,y.set(e,n)}var i=n.get(t);if(x(i)){if(!r)return;i=new p,n.set(t,i)}return i}function b(e,t,r){var n=m(t,r,!1);return!x(n)&&!!n.has(e)}function h(e,t,r){var n=m(t,r,!1);if(!x(n))return n.get(e)}function v(e,t,r,n){m(r,n,!0).set(e,t)}function g(e,t){var r=[],n=m(e,t,!1);if(x(n))return r;for(var i=function(e){var t=R(e,o);if(!T(t))throw new TypeError;var r=t.call(e);if(!z(r))throw new TypeError;return r}(n.keys()),a=0;;){var u=P(i);if(!u)return r.length=a,r;var c=u.value;try{r[a]=c}catch(e){try{D(i)}finally{throw e}}a++}}function w(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function x(e){return void 0===e}function _(e){return null===e}function z(e){return"object"==typeof e?null!==e:"function"==typeof e}function S(e,t){switch(w(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=3===t?"string":5===t?"number":"default",n=R(e,i);if(void 0!==n){var o=n.call(e,r);if(z(o))throw new TypeError;return o}return function(e,t){if("string"===t){var r=e.toString;if(T(r))if(!z(i=r.call(e)))return i;if(T(n=e.valueOf))if(!z(i=n.call(e)))return i}else{var n;if(T(n=e.valueOf))if(!z(i=n.call(e)))return i;var i,o=e.toString;if(T(o))if(!z(i=o.call(e)))return i}throw new TypeError}(e,"default"===r?"number":r)}function j(e){var t=S(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function E(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function T(e){return"function"==typeof e}function O(e){return"function"==typeof e}function R(e,t){var r=e[t];if(null!=r){if(!T(r))throw new TypeError;return r}}function P(e){var t=e.next();return!t.done&&t}function D(e){var t=e.return;t&&t.call(e)}function A(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===s)return t;if(t!==s)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i||i===e?t:i}function M(e){return e.__=void 0,delete e.__,e}t("decorate",(function(e,t,r,n){if(x(r)){if(!E(e))throw new TypeError;if(!O(t))throw new TypeError;return function(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!x(n)&&!_(n)){if(!O(n))throw new TypeError;t=n}}return t}(e,t)}if(!E(e))throw new TypeError;if(!z(t))throw new TypeError;if(!z(n)&&!x(n)&&!_(n))throw new TypeError;return _(n)&&(n=void 0),function(e,t,r,n){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,r,n);if(!x(o)&&!_(o)){if(!z(o))throw new TypeError;n=o}}return n}(e,t,r=j(r),n)})),t("metadata",(function(e,t){return function(r,n){if(!z(r))throw new TypeError;if(!x(n)&&!function(e){switch(w(e)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;v(e,t,r,n)}})),t("defineMetadata",(function(e,t,r,n){if(!z(r))throw new TypeError;return x(n)||(n=j(n)),v(e,t,r,n)})),t("hasMetadata",(function(e,t,r){if(!z(t))throw new TypeError;return x(r)||(r=j(r)),function e(t,r,n){if(b(t,r,n))return!0;var i=A(r);return!_(i)&&e(t,i,n)}(e,t,r)})),t("hasOwnMetadata",(function(e,t,r){if(!z(t))throw new TypeError;return x(r)||(r=j(r)),b(e,t,r)})),t("getMetadata",(function(e,t,r){if(!z(t))throw new TypeError;return x(r)||(r=j(r)),function e(t,r,n){if(b(t,r,n))return h(t,r,n);var i=A(r);return _(i)?void 0:e(t,i,n)}(e,t,r)})),t("getOwnMetadata",(function(e,t,r){if(!z(t))throw new TypeError;return x(r)||(r=j(r)),h(e,t,r)})),t("getMetadataKeys",(function(e,t){if(!z(e))throw new TypeError;return x(t)||(t=j(t)),function e(t,r){var n=g(t,r),i=A(t);if(null===i)return n;var o=e(i,r);if(o.length<=0)return n;if(n.length<=0)return o;for(var a=new d,u=[],c=0,l=n;c<l.length;c++){var s=l[c];a.has(s)||(a.add(s),u.push(s))}for(var f=0,p=o;f<p.length;f++){s=p[f];a.has(s)||(a.add(s),u.push(s))}return u}(e,t)})),t("getOwnMetadataKeys",(function(e,t){if(!z(e))throw new TypeError;return x(t)||(t=j(t)),g(e,t)})),t("deleteMetadata",(function(e,t,r){if(!z(t))throw new TypeError;x(r)||(r=j(r));var n=m(t,r,!1);if(x(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var i=y.get(t);return i.delete(r),i.size>0||y.delete(t),!0}))}(o)}()}(r||(r={}))}).call(this,r("../node_modules/process/browser.js"),r("../node_modules/webpack/buildin/global.js"))},"../node_modules/regenerator-runtime/runtime.js":function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),a=new z(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return j()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===s)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function f(){}function p(){}function d(){}var y={};y[i]=function(){return this};var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==t&&r.call(b,i)&&(y=b);var h=d.prototype=f.prototype=Object.create(y);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=l(e[i],e,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function z(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=h.constructor=d,d.constructor=p,p.displayName=u(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,a,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},v(g.prototype),g.prototype[o]=function(){return this},e.AsyncIterator=g,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new g(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(h),u(h,a,"Generator"),h[i]=function(){return this},h.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,z.prototype={constructor:z,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},"../node_modules/webgl-obj-loader/dist/webgl-obj-loader.min.js":function(module,exports,__webpack_require__){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=0)}({"./src/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OBJ", function() { return OBJ; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "version", function() { return version; });\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Mesh", function() { return _mesh__WEBPACK_IMPORTED_MODULE_0__["default"]; });\n\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["Material"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"]; });\n\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"]; });\n\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./src/utils.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"]; });\n\n\n\n\n\nconst version = "2.0.3";\nconst OBJ = {\n    Attribute: _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"],\n    DuplicateAttributeException: _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"],\n    Layout: _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"],\n    Material: _material__WEBPACK_IMPORTED_MODULE_1__["Material"],\n    MaterialLibrary: _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"],\n    Mesh: _mesh__WEBPACK_IMPORTED_MODULE_0__["default"],\n    TYPES: _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"],\n    downloadModels: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"],\n    downloadMeshes: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"],\n    initMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"],\n    deleteMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"],\n    version,\n};\n/**\n * @namespace\n */\n\n\n\n//# sourceURL=webpack:///./src/index.ts?')},"./src/layout.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return TYPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return DuplicateAttributeException; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return Attribute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return Layout; });\nvar TYPES;\n(function (TYPES) {\n    TYPES["BYTE"] = "BYTE";\n    TYPES["UNSIGNED_BYTE"] = "UNSIGNED_BYTE";\n    TYPES["SHORT"] = "SHORT";\n    TYPES["UNSIGNED_SHORT"] = "UNSIGNED_SHORT";\n    TYPES["FLOAT"] = "FLOAT";\n})(TYPES || (TYPES = {}));\n/**\n * An exception for when two or more of the same attributes are found in the\n * same layout.\n * @private\n */\nclass DuplicateAttributeException extends Error {\n    /**\n     * Create a DuplicateAttributeException\n     * @param {Attribute} attribute - The attribute that was found more than\n     *        once in the {@link Layout}\n     */\n    constructor(attribute) {\n        super(`found duplicate attribute: ${attribute.key}`);\n    }\n}\n/**\n * Represents how a vertex attribute should be packed into an buffer.\n * @private\n */\nclass Attribute {\n    /**\n     * Create an attribute. Do not call this directly, use the predefined\n     * constants.\n     * @param {string} key - The name of this attribute as if it were a key in\n     *        an Object. Use the camel case version of the upper snake case\n     *        const name.\n     * @param {number} size - The number of components per vertex attribute.\n     *        Must be 1, 2, 3, or 4.\n     * @param {string} type - The data type of each component for this\n     *        attribute. Possible values:<br/>\n     *        "BYTE": signed 8-bit integer, with values in [-128, 127]<br/>\n     *        "SHORT": signed 16-bit integer, with values in\n     *            [-32768, 32767]<br/>\n     *        "UNSIGNED_BYTE": unsigned 8-bit integer, with values in\n     *            [0, 255]<br/>\n     *        "UNSIGNED_SHORT": unsigned 16-bit integer, with values in\n     *            [0, 65535]<br/>\n     *        "FLOAT": 32-bit floating point number\n     * @param {boolean} normalized - Whether integer data values should be\n     *        normalized when being casted to a float.<br/>\n     *        If true, signed integers are normalized to [-1, 1].<br/>\n     *        If true, unsigned integers are normalized to [0, 1].<br/>\n     *        For type "FLOAT", this parameter has no effect.\n     */\n    constructor(key, size, type, normalized = false) {\n        this.key = key;\n        this.size = size;\n        this.type = type;\n        this.normalized = normalized;\n        switch (type) {\n            case "BYTE":\n            case "UNSIGNED_BYTE":\n                this.sizeOfType = 1;\n                break;\n            case "SHORT":\n            case "UNSIGNED_SHORT":\n                this.sizeOfType = 2;\n                break;\n            case "FLOAT":\n                this.sizeOfType = 4;\n                break;\n            default:\n                throw new Error(`Unknown gl type: ${type}`);\n        }\n        this.sizeInBytes = this.sizeOfType * size;\n    }\n}\n/**\n * A class to represent the memory layout for a vertex attribute array. Used by\n * {@link Mesh}\'s TBD(...) method to generate a packed array from mesh data.\n * <p>\n * Layout can sort of be thought of as a C-style struct declaration.\n * {@link Mesh}\'s TBD(...) method will use the {@link Layout} instance to\n * pack an array in the given attribute order.\n * <p>\n * Layout also is very helpful when calling a WebGL context\'s\n * <code>vertexAttribPointer</code> method. If you\'ve created a buffer using\n * a Layout instance, then the same Layout instance can be used to determine\n * the size, type, normalized, stride, and offset parameters for\n * <code>vertexAttribPointer</code>.\n * <p>\n * For example:\n * <pre><code>\n *\n * const index = glctx.getAttribLocation(shaderProgram, "pos");\n * glctx.vertexAttribPointer(\n *   layout.position.size,\n *   glctx[layout.position.type],\n *   layout.position.normalized,\n *   layout.position.stride,\n *   layout.position.offset);\n * </code></pre>\n * @see {@link Mesh}\n */\nclass Layout {\n    /**\n     * Create a Layout object. This constructor will throw if any duplicate\n     * attributes are given.\n     * @param {Array} ...attributes - An ordered list of attributes that\n     *        describe the desired memory layout for each vertex attribute.\n     *        <p>\n     *\n     * @see {@link Mesh}\n     */\n    constructor(...attributes) {\n        this.attributes = attributes;\n        this.attributeMap = {};\n        let offset = 0;\n        let maxStrideMultiple = 0;\n        for (const attribute of attributes) {\n            if (this.attributeMap[attribute.key]) {\n                throw new DuplicateAttributeException(attribute);\n            }\n            // Add padding to satisfy WebGL\'s requirement that all\n            // vertexAttribPointer calls have an offset that is a multiple of\n            // the type size.\n            if (offset % attribute.sizeOfType !== 0) {\n                offset += attribute.sizeOfType - (offset % attribute.sizeOfType);\n                console.warn("Layout requires padding before " + attribute.key + " attribute");\n            }\n            this.attributeMap[attribute.key] = {\n                attribute: attribute,\n                size: attribute.size,\n                type: attribute.type,\n                normalized: attribute.normalized,\n                offset: offset,\n            };\n            offset += attribute.sizeInBytes;\n            maxStrideMultiple = Math.max(maxStrideMultiple, attribute.sizeOfType);\n        }\n        // Add padding to the end to satisfy WebGL\'s requirement that all\n        // vertexAttribPointer calls have a stride that is a multiple of the\n        // type size. Because we\'re putting differently sized attributes into\n        // the same buffer, it must be padded to a multiple of the largest\n        // type size.\n        if (offset % maxStrideMultiple !== 0) {\n            offset += maxStrideMultiple - (offset % maxStrideMultiple);\n            console.warn("Layout requires padding at the back");\n        }\n        this.stride = offset;\n        for (const attribute of attributes) {\n            this.attributeMap[attribute.key].stride = this.stride;\n        }\n    }\n}\n// Geometry attributes\n/**\n * Attribute layout to pack a vertex\'s x, y, & z as floats\n *\n * @see {@link Layout}\n */\nLayout.POSITION = new Attribute("position", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s x, y, & z as floats\n *\n * @see {@link Layout}\n */\nLayout.NORMAL = new Attribute("normal", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s x, y, & z as floats.\n * <p>\n * This value will be computed on-the-fly based on the texture coordinates.\n * If no texture coordinates are available, the generated value will default to\n * 0, 0, 0.\n *\n * @see {@link Layout}\n */\nLayout.TANGENT = new Attribute("tangent", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s bitangent x, y, & z as floats.\n * <p>\n * This value will be computed on-the-fly based on the texture coordinates.\n * If no texture coordinates are available, the generated value will default to\n * 0, 0, 0.\n * @see {@link Layout}\n */\nLayout.BITANGENT = new Attribute("bitangent", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s texture coordinates\' u & v as floats\n *\n * @see {@link Layout}\n */\nLayout.UV = new Attribute("uv", 2, TYPES.FLOAT);\n// Material attributes\n/**\n * Attribute layout to pack an unsigned short to be interpreted as a the index\n * into a {@link Mesh}\'s materials list.\n * <p>\n * The intention of this value is to send all of the {@link Mesh}\'s materials\n * into multiple shader uniforms and then reference the current one by this\n * vertex attribute.\n * <p>\n * example glsl code:\n *\n * <pre><code>\n *  // this is bound using MATERIAL_INDEX\n *  attribute int materialIndex;\n *\n *  struct Material {\n *    vec3 diffuse;\n *    vec3 specular;\n *    vec3 specularExponent;\n *  };\n *\n *  uniform Material materials[MAX_MATERIALS];\n *\n *  // ...\n *\n *  vec3 diffuse = materials[materialIndex];\n *\n * </code></pre>\n * TODO: More description & test to make sure subscripting by attributes even\n * works for webgl\n *\n * @see {@link Layout}\n */\nLayout.MATERIAL_INDEX = new Attribute("materialIndex", 1, TYPES.SHORT);\nLayout.MATERIAL_ENABLED = new Attribute("materialEnabled", 1, TYPES.UNSIGNED_SHORT);\nLayout.AMBIENT = new Attribute("ambient", 3, TYPES.FLOAT);\nLayout.DIFFUSE = new Attribute("diffuse", 3, TYPES.FLOAT);\nLayout.SPECULAR = new Attribute("specular", 3, TYPES.FLOAT);\nLayout.SPECULAR_EXPONENT = new Attribute("specularExponent", 3, TYPES.FLOAT);\nLayout.EMISSIVE = new Attribute("emissive", 3, TYPES.FLOAT);\nLayout.TRANSMISSION_FILTER = new Attribute("transmissionFilter", 3, TYPES.FLOAT);\nLayout.DISSOLVE = new Attribute("dissolve", 1, TYPES.FLOAT);\nLayout.ILLUMINATION = new Attribute("illumination", 1, TYPES.UNSIGNED_SHORT);\nLayout.REFRACTION_INDEX = new Attribute("refractionIndex", 1, TYPES.FLOAT);\nLayout.SHARPNESS = new Attribute("sharpness", 1, TYPES.FLOAT);\nLayout.MAP_DIFFUSE = new Attribute("mapDiffuse", 1, TYPES.SHORT);\nLayout.MAP_AMBIENT = new Attribute("mapAmbient", 1, TYPES.SHORT);\nLayout.MAP_SPECULAR = new Attribute("mapSpecular", 1, TYPES.SHORT);\nLayout.MAP_SPECULAR_EXPONENT = new Attribute("mapSpecularExponent", 1, TYPES.SHORT);\nLayout.MAP_DISSOLVE = new Attribute("mapDissolve", 1, TYPES.SHORT);\nLayout.ANTI_ALIASING = new Attribute("antiAliasing", 1, TYPES.UNSIGNED_SHORT);\nLayout.MAP_BUMP = new Attribute("mapBump", 1, TYPES.SHORT);\nLayout.MAP_DISPLACEMENT = new Attribute("mapDisplacement", 1, TYPES.SHORT);\nLayout.MAP_DECAL = new Attribute("mapDecal", 1, TYPES.SHORT);\nLayout.MAP_EMISSIVE = new Attribute("mapEmissive", 1, TYPES.SHORT);\n\n\n//# sourceURL=webpack:///./src/layout.ts?')},"./src/material.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return Material; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return MaterialLibrary; });\n/**\n * The Material class.\n */\nclass Material {\n    constructor(name) {\n        this.name = name;\n        /**\n         * Constructor\n         * @param {String} name the unique name of the material\n         */\n        // The values for the following attibutes\n        // are an array of R, G, B normalized values.\n        // Ka - Ambient Reflectivity\n        this.ambient = [0, 0, 0];\n        // Kd - Defuse Reflectivity\n        this.diffuse = [0, 0, 0];\n        // Ks\n        this.specular = [0, 0, 0];\n        // Ke\n        this.emissive = [0, 0, 0];\n        // Tf\n        this.transmissionFilter = [0, 0, 0];\n        // d\n        this.dissolve = 0;\n        // valid range is between 0 and 1000\n        this.specularExponent = 0;\n        // either d or Tr; valid values are normalized\n        this.transparency = 0;\n        // illum - the enum of the illumination model to use\n        this.illumination = 0;\n        // Ni - Set to "normal" (air).\n        this.refractionIndex = 1;\n        // sharpness\n        this.sharpness = 0;\n        // map_Kd\n        this.mapDiffuse = emptyTextureOptions();\n        // map_Ka\n        this.mapAmbient = emptyTextureOptions();\n        // map_Ks\n        this.mapSpecular = emptyTextureOptions();\n        // map_Ns\n        this.mapSpecularExponent = emptyTextureOptions();\n        // map_d\n        this.mapDissolve = emptyTextureOptions();\n        // map_aat\n        this.antiAliasing = false;\n        // map_bump or bump\n        this.mapBump = emptyTextureOptions();\n        // disp\n        this.mapDisplacement = emptyTextureOptions();\n        // decal\n        this.mapDecal = emptyTextureOptions();\n        // map_Ke\n        this.mapEmissive = emptyTextureOptions();\n        // refl - when the reflection type is a cube, there will be multiple refl\n        //        statements for each side of the cube. If it\'s a spherical\n        //        reflection, there should only ever be one.\n        this.mapReflections = [];\n    }\n}\nconst SENTINEL_MATERIAL = new Material("sentinel");\n/**\n * https://en.wikipedia.org/wiki/Wavefront_.obj_file\n * http://paulbourke.net/dataformats/mtl/\n */\nclass MaterialLibrary {\n    constructor(data) {\n        this.data = data;\n        /**\n         * Constructs the Material Parser\n         * @param mtlData the MTL file contents\n         */\n        this.currentMaterial = SENTINEL_MATERIAL;\n        this.materials = {};\n        this.parse();\n    }\n    /* eslint-disable camelcase */\n    /* the function names here disobey camelCase conventions\n     to make parsing/routing easier. see the parse function\n     documentation for more information. */\n    /**\n     * Creates a new Material object and adds to the registry.\n     * @param tokens the tokens associated with the directive\n     */\n    parse_newmtl(tokens) {\n        const name = tokens[0];\n        // console.info(\'Parsing new Material:\', name);\n        this.currentMaterial = new Material(name);\n        this.materials[name] = this.currentMaterial;\n    }\n    /**\n     * See the documenation for parse_Ka below for a better understanding.\n     *\n     * Given a list of possible color tokens, returns an array of R, G, and B\n     * color values.\n     *\n     * @param tokens the tokens associated with the directive\n     * @return {*} a 3 element array containing the R, G, and B values\n     * of the color.\n     */\n    parseColor(tokens) {\n        if (tokens[0] == "spectral") {\n            throw new Error("The MTL parser does not support spectral curve files. You will " +\n                "need to convert the MTL colors to either RGB or CIEXYZ.");\n        }\n        if (tokens[0] == "xyz") {\n            throw new Error("The MTL parser does not currently support XYZ colors. Either convert the " +\n                "XYZ values to RGB or create an issue to add support for XYZ");\n        }\n        // from my understanding of the spec, RGB values at this point\n        // will either be 3 floats or exactly 1 float, so that\'s the check\n        // that i\'m going to perform here\n        if (tokens.length == 3) {\n            const [x, y, z] = tokens;\n            return [parseFloat(x), parseFloat(y), parseFloat(z)];\n        }\n        // Since tokens at this point has a length of 3, we\'re going to assume\n        // it\'s exactly 1, skipping the check for 2.\n        const value = parseFloat(tokens[0]);\n        // in this case, all values are equivalent\n        return [value, value, value];\n    }\n    /**\n     * Parse the ambient reflectivity\n     *\n     * A Ka directive can take one of three forms:\n     *   - Ka r g b\n     *   - Ka spectral file.rfl\n     *   - Ka xyz x y z\n     * These three forms are mutually exclusive in that only one\n     * declaration can exist per material. It is considered a syntax\n     * error otherwise.\n     *\n     * The "Ka" form specifies the ambient reflectivity using RGB values.\n     * The "g" and "b" values are optional. If only the "r" value is\n     * specified, then the "g" and "b" values are assigned the value of\n     * "r". Values are normally in the range 0.0 to 1.0. Values outside\n     * of this range increase or decrease the reflectivity accordingly.\n     *\n     * The "Ka spectral" form specifies the ambient reflectivity using a\n     * spectral curve. "file.rfl" is the name of the ".rfl" file containing\n     * the curve data. "factor" is an optional argument which is a multiplier\n     * for the values in the .rfl file and defaults to 1.0 if not specified.\n     *\n     * The "Ka xyz" form specifies the ambient reflectivity using CIEXYZ values.\n     * "x y z" are the values of the CIEXYZ color space. The "y" and "z" arguments\n     * are optional and take on the value of the "x" component if only "x" is\n     * specified. The "x y z" values are normally in the range of 0.0 to 1.0 and\n     * increase or decrease ambient reflectivity accordingly outside of that\n     * range.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ka(tokens) {\n        this.currentMaterial.ambient = this.parseColor(tokens);\n    }\n    /**\n     * Diffuse Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace "Ka" with "Kd" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Kd(tokens) {\n        this.currentMaterial.diffuse = this.parseColor(tokens);\n    }\n    /**\n     * Spectral Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace "Ks" with "Kd" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ks(tokens) {\n        this.currentMaterial.specular = this.parseColor(tokens);\n    }\n    /**\n     * Emissive\n     *\n     * The amount and color of light emitted by the object.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ke(tokens) {\n        this.currentMaterial.emissive = this.parseColor(tokens);\n    }\n    /**\n     * Transmission Filter\n     *\n     * Any light passing through the object is filtered by the transmission\n     * filter, which only allows specific colors to pass through. For example, Tf\n     * 0 1 0 allows all of the green to pass through and filters out all of the\n     * red and blue.\n     *\n     * Similar to the Ka directive. Simply replace "Ks" with "Tf" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Tf(tokens) {\n        this.currentMaterial.transmissionFilter = this.parseColor(tokens);\n    }\n    /**\n     * Specifies the dissolve for the current material.\n     *\n     * Statement: d [-halo] `factor`\n     *\n     * Example: "d 0.5"\n     *\n     * The factor is the amount this material dissolves into the background. A\n     * factor of 1.0 is fully opaque. This is the default when a new material is\n     * created. A factor of 0.0 is fully dissolved (completely transparent).\n     *\n     * Unlike a real transparent material, the dissolve does not depend upon\n     * material thickness nor does it have any spectral character. Dissolve works\n     * on all illumination models.\n     *\n     * The dissolve statement allows for an optional "-halo" flag which indicates\n     * that a dissolve is dependent on the surface orientation relative to the\n     * viewer. For example, a sphere with the following dissolve, "d -halo 0.0",\n     * will be fully dissolved at its center and will appear gradually more opaque\n     * toward its edge.\n     *\n     * "factor" is the minimum amount of dissolve applied to the material. The\n     * amount of dissolve will vary between 1.0 (fully opaque) and the specified\n     * "factor". The formula is:\n     *\n     *    dissolve = 1.0 - (N*v)(1.0-factor)\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_d(tokens) {\n        // this ignores the -halo option as I can\'t find any documentation on what\n        // it\'s supposed to be.\n        this.currentMaterial.dissolve = parseFloat(tokens.pop() || "0");\n    }\n    /**\n     * The "illum" statement specifies the illumination model to use in the\n     * material. Illumination models are mathematical equations that represent\n     * various material lighting and shading effects.\n     *\n     * The illumination number can be a number from 0 to 10. The following are\n     * the list of illumination enumerations and their summaries:\n     * 0. Color on and Ambient off\n     * 1. Color on and Ambient on\n     * 2. Highlight on\n     * 3. Reflection on and Ray trace on\n     * 4. Transparency: Glass on, Reflection: Ray trace on\n     * 5. Reflection: Fresnel on and Ray trace on\n     * 6. Transparency: Refraction on, Reflection: Fresnel off and Ray trace on\n     * 7. Transparency: Refraction on, Reflection: Fresnel on and Ray trace on\n     * 8. Reflection on and Ray trace off\n     * 9. Transparency: Glass on, Reflection: Ray trace off\n     * 10. Casts shadows onto invisible surfaces\n     *\n     * Example: "illum 2" to specify the "Highlight on" model\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_illum(tokens) {\n        this.currentMaterial.illumination = parseInt(tokens[0]);\n    }\n    /**\n     * Optical Density (AKA Index of Refraction)\n     *\n     * Statement: Ni `index`\n     *\n     * Example: Ni 1.0\n     *\n     * Specifies the optical density for the surface. `index` is the value\n     * for the optical density. The values can range from 0.001 to 10.  A value of\n     * 1.0 means that light does not bend as it passes through an object.\n     * Increasing the optical_density increases the amount of bending. Glass has\n     * an index of refraction of about 1.5. Values of less than 1.0 produce\n     * bizarre results and are not recommended\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ni(tokens) {\n        this.currentMaterial.refractionIndex = parseFloat(tokens[0]);\n    }\n    /**\n     * Specifies the specular exponent for the current material. This defines the\n     * focus of the specular highlight.\n     *\n     * Statement: Ns `exponent`\n     *\n     * Example: "Ns 250"\n     *\n     * `exponent` is the value for the specular exponent. A high exponent results\n     * in a tight, concentrated highlight. Ns Values normally range from 0 to\n     * 1000.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ns(tokens) {\n        this.currentMaterial.specularExponent = parseInt(tokens[0]);\n    }\n    /**\n     * Specifies the sharpness of the reflections from the local reflection map.\n     *\n     * Statement: sharpness `value`\n     *\n     * Example: "sharpness 100"\n     *\n     * If a material does not have a local reflection map defined in its material\n     * defintions, sharpness will apply to the global reflection map defined in\n     * PreView.\n     *\n     * `value` can be a number from 0 to 1000. The default is 60. A high value\n     * results in a clear reflection of objects in the reflection map.\n     *\n     * Tip: sharpness values greater than 100 introduce aliasing effects in\n     * flat surfaces that are viewed at a sharp angle.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_sharpness(tokens) {\n        this.currentMaterial.sharpness = parseInt(tokens[0]);\n    }\n    /**\n     * Parses the -cc flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -cc flag\n     * @param options the Object of all image options\n     */\n    parse_cc(values, options) {\n        options.colorCorrection = values[0] == "on";\n    }\n    /**\n     * Parses the -blendu flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendu flag\n     * @param options the Object of all image options\n     */\n    parse_blendu(values, options) {\n        options.horizontalBlending = values[0] == "on";\n    }\n    /**\n     * Parses the -blendv flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendv flag\n     * @param options the Object of all image options\n     */\n    parse_blendv(values, options) {\n        options.verticalBlending = values[0] == "on";\n    }\n    /**\n     * Parses the -boost flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -boost flag\n     * @param options the Object of all image options\n     */\n    parse_boost(values, options) {\n        options.boostMipMapSharpness = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -mm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -mm flag\n     * @param options the Object of all image options\n     */\n    parse_mm(values, options) {\n        options.modifyTextureMap.brightness = parseFloat(values[0]);\n        options.modifyTextureMap.contrast = parseFloat(values[1]);\n    }\n    /**\n     * Parses and sets the -o, -s, and -t  u, v, and w values\n     *\n     * @param values the values passed to the -o, -s, -t flag\n     * @param {Object} option the Object of either the -o, -s, -t option\n     * @param {Integer} defaultValue the Object of all image options\n     */\n    parse_ost(values, option, defaultValue) {\n        while (values.length < 3) {\n            values.push(defaultValue.toString());\n        }\n        option.u = parseFloat(values[0]);\n        option.v = parseFloat(values[1]);\n        option.w = parseFloat(values[2]);\n    }\n    /**\n     * Parses the -o flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -o flag\n     * @param options the Object of all image options\n     */\n    parse_o(values, options) {\n        this.parse_ost(values, options.offset, 0);\n    }\n    /**\n     * Parses the -s flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -s flag\n     * @param options the Object of all image options\n     */\n    parse_s(values, options) {\n        this.parse_ost(values, options.scale, 1);\n    }\n    /**\n     * Parses the -t flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -t flag\n     * @param options the Object of all image options\n     */\n    parse_t(values, options) {\n        this.parse_ost(values, options.turbulence, 0);\n    }\n    /**\n     * Parses the -texres flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -texres flag\n     * @param options the Object of all image options\n     */\n    parse_texres(values, options) {\n        options.textureResolution = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -clamp flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -clamp flag\n     * @param options the Object of all image options\n     */\n    parse_clamp(values, options) {\n        options.clamp = values[0] == "on";\n    }\n    /**\n     * Parses the -bm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -bm flag\n     * @param options the Object of all image options\n     */\n    parse_bm(values, options) {\n        options.bumpMultiplier = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -imfchan flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -imfchan flag\n     * @param options the Object of all image options\n     */\n    parse_imfchan(values, options) {\n        options.imfChan = values[0];\n    }\n    /**\n     * This only exists for relection maps and denotes the type of reflection.\n     *\n     * @param values the values passed to the -type flag\n     * @param options the Object of all image options\n     */\n    parse_type(values, options) {\n        options.reflectionType = values[0];\n    }\n    /**\n     * Parses the texture\'s options and returns an options object with the info\n     *\n     * @param tokens all of the option tokens to pass to the texture\n     * @return {Object} a complete object of objects to apply to the texture\n     */\n    parseOptions(tokens) {\n        const options = emptyTextureOptions();\n        let option;\n        let values;\n        const optionsToValues = {};\n        tokens.reverse();\n        while (tokens.length) {\n            // token is guaranteed to exists here, hence the explicit "as"\n            const token = tokens.pop();\n            if (token.startsWith("-")) {\n                option = token.substr(1);\n                optionsToValues[option] = [];\n            }\n            else if (option) {\n                optionsToValues[option].push(token);\n            }\n        }\n        for (option in optionsToValues) {\n            if (!optionsToValues.hasOwnProperty(option)) {\n                continue;\n            }\n            values = optionsToValues[option];\n            const optionMethod = this[`parse_${option}`];\n            if (optionMethod) {\n                optionMethod.bind(this)(values, options);\n            }\n        }\n        return options;\n    }\n    /**\n     * Parses the given texture map line.\n     *\n     * @param tokens all of the tokens representing the texture\n     * @return a complete object of objects to apply to the texture\n     */\n    parseMap(tokens) {\n        // according to wikipedia:\n        // (https://en.wikipedia.org/wiki/Wavefront_.obj_file#Vendor_specific_alterations)\n        // there is at least one vendor that places the filename before the options\n        // rather than after (which is to spec). All options start with a \'-\'\n        // so if the first token doesn\'t start with a \'-\', we\'re going to assume\n        // it\'s the name of the map file.\n        let optionsString;\n        let filename = "";\n        if (!tokens[0].startsWith("-")) {\n            [filename, ...optionsString] = tokens;\n        }\n        else {\n            filename = tokens.pop();\n            optionsString = tokens;\n        }\n        const options = this.parseOptions(optionsString);\n        options.filename = filename.replace(/\\\\/g, "/");\n        return options;\n    }\n    /**\n     * Parses the ambient map.\n     *\n     * @param tokens list of tokens for the map_Ka direcive\n     */\n    parse_map_Ka(tokens) {\n        this.currentMaterial.mapAmbient = this.parseMap(tokens);\n    }\n    /**\n     * Parses the diffuse map.\n     *\n     * @param tokens list of tokens for the map_Kd direcive\n     */\n    parse_map_Kd(tokens) {\n        this.currentMaterial.mapDiffuse = this.parseMap(tokens);\n    }\n    /**\n     * Parses the specular map.\n     *\n     * @param tokens list of tokens for the map_Ks direcive\n     */\n    parse_map_Ks(tokens) {\n        this.currentMaterial.mapSpecular = this.parseMap(tokens);\n    }\n    /**\n     * Parses the emissive map.\n     *\n     * @param tokens list of tokens for the map_Ke direcive\n     */\n    parse_map_Ke(tokens) {\n        this.currentMaterial.mapEmissive = this.parseMap(tokens);\n    }\n    /**\n     * Parses the specular exponent map.\n     *\n     * @param tokens list of tokens for the map_Ns direcive\n     */\n    parse_map_Ns(tokens) {\n        this.currentMaterial.mapSpecularExponent = this.parseMap(tokens);\n    }\n    /**\n     * Parses the dissolve map.\n     *\n     * @param tokens list of tokens for the map_d direcive\n     */\n    parse_map_d(tokens) {\n        this.currentMaterial.mapDissolve = this.parseMap(tokens);\n    }\n    /**\n     * Parses the anti-aliasing option.\n     *\n     * @param tokens list of tokens for the map_aat direcive\n     */\n    parse_map_aat(tokens) {\n        this.currentMaterial.antiAliasing = tokens[0] == "on";\n    }\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the map_bump direcive\n     */\n    parse_map_bump(tokens) {\n        this.currentMaterial.mapBump = this.parseMap(tokens);\n    }\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the bump direcive\n     */\n    parse_bump(tokens) {\n        this.parse_map_bump(tokens);\n    }\n    /**\n     * Parses the disp map.\n     *\n     * @param tokens list of tokens for the disp direcive\n     */\n    parse_disp(tokens) {\n        this.currentMaterial.mapDisplacement = this.parseMap(tokens);\n    }\n    /**\n     * Parses the decal map.\n     *\n     * @param tokens list of tokens for the map_decal direcive\n     */\n    parse_decal(tokens) {\n        this.currentMaterial.mapDecal = this.parseMap(tokens);\n    }\n    /**\n     * Parses the refl map.\n     *\n     * @param tokens list of tokens for the refl direcive\n     */\n    parse_refl(tokens) {\n        this.currentMaterial.mapReflections.push(this.parseMap(tokens));\n    }\n    /**\n     * Parses the MTL file.\n     *\n     * Iterates line by line parsing each MTL directive.\n     *\n     * This function expects the first token in the line\n     * to be a valid MTL directive. That token is then used\n     * to try and run a method on this class. parse_[directive]\n     * E.g., the `newmtl` directive would try to call the method\n     * parse_newmtl. Each parsing function takes in the remaining\n     * list of tokens and updates the currentMaterial class with\n     * the attributes provided.\n     */\n    parse() {\n        const lines = this.data.split(/\\r?\\n/);\n        for (let line of lines) {\n            line = line.trim();\n            if (!line || line.startsWith("#")) {\n                continue;\n            }\n            const [directive, ...tokens] = line.split(/\\s/);\n            const parseMethod = this[`parse_${directive}`];\n            if (!parseMethod) {\n                console.warn(`Don\'t know how to parse the directive: "${directive}"`);\n                continue;\n            }\n            // console.log(`Parsing "${directive}" with tokens: ${tokens}`);\n            parseMethod.bind(this)(tokens);\n        }\n        // some cleanup. These don\'t need to be exposed as public data.\n        delete this.data;\n        this.currentMaterial = SENTINEL_MATERIAL;\n    }\n}\nfunction emptyTextureOptions() {\n    return {\n        colorCorrection: false,\n        horizontalBlending: true,\n        verticalBlending: true,\n        boostMipMapSharpness: 0,\n        modifyTextureMap: {\n            brightness: 0,\n            contrast: 1,\n        },\n        offset: { u: 0, v: 0, w: 0 },\n        scale: { u: 1, v: 1, w: 1 },\n        turbulence: { u: 0, v: 0, w: 0 },\n        clamp: false,\n        textureResolution: null,\n        bumpMultiplier: 1,\n        imfChan: null,\n        filename: "",\n    };\n}\n\n\n//# sourceURL=webpack:///./src/material.ts?')},"./src/mesh.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Mesh; });\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");\n\n/**\n * The main Mesh class. The constructor will parse through the OBJ file data\n * and collect the vertex, vertex normal, texture, and face information. This\n * information can then be used later on when creating your VBOs. See\n * OBJ.initMeshBuffers for an example of how to use the newly created Mesh\n */\nclass Mesh {\n    /**\n     * Create a Mesh\n     * @param {String} objectData - a string representation of an OBJ file with\n     *     newlines preserved.\n     * @param {Object} options - a JS object containing valid options. See class\n     *     documentation for options.\n     * @param {bool} options.enableWTextureCoord - Texture coordinates can have\n     *     an optional "w" coordinate after the u and v coordinates. This extra\n     *     value can be used in order to perform fancy transformations on the\n     *     textures themselves. Default is to truncate to only the u an v\n     *     coordinates. Passing true will provide a default value of 0 in the\n     *     event that any or all texture coordinates don\'t provide a w value.\n     *     Always use the textureStride attribute in order to determine the\n     *     stride length of the texture coordinates when rendering the element\n     *     array.\n     * @param {bool} options.calcTangentsAndBitangents - Calculate the tangents\n     *     and bitangents when loading of the OBJ is completed. This adds two new\n     *     attributes to the Mesh instance: `tangents` and `bitangents`.\n     */\n    constructor(objectData, options) {\n        this.name = "";\n        this.indicesPerMaterial = [];\n        this.materialsByIndex = {};\n        this.tangents = [];\n        this.bitangents = [];\n        options = options || {};\n        options.materials = options.materials || {};\n        options.enableWTextureCoord = !!options.enableWTextureCoord;\n        // the list of unique vertex, normal, texture, attributes\n        this.vertexNormals = [];\n        this.textures = [];\n        // the indicies to draw the faces\n        this.indices = [];\n        this.textureStride = options.enableWTextureCoord ? 3 : 2;\n        /*\n        The OBJ file format does a sort of compression when saving a model in a\n        program like Blender. There are at least 3 sections (4 including textures)\n        within the file. Each line in a section begins with the same string:\n          * \'v\': indicates vertex section\n          * \'vn\': indicates vertex normal section\n          * \'f\': indicates the faces section\n          * \'vt\': indicates vertex texture section (if textures were used on the model)\n        Each of the above sections (except for the faces section) is a list/set of\n        unique vertices.\n\n        Each line of the faces section contains a list of\n        (vertex, [texture], normal) groups.\n\n        **Note:** The following documentation will use a capital "V" Vertex to\n        denote the above (vertex, [texture], normal) groups whereas a lowercase\n        "v" vertex is used to denote an X, Y, Z coordinate.\n\n        Some examples:\n            // the texture index is optional, both formats are possible for models\n            // without a texture applied\n            f 1/25 18/46 12/31\n            f 1//25 18//46 12//31\n\n            // A 3 vertex face with texture indices\n            f 16/92/11 14/101/22 1/69/1\n\n            // A 4 vertex face\n            f 16/92/11 40/109/40 38/114/38 14/101/22\n\n        The first two lines are examples of a 3 vertex face without a texture applied.\n        The second is an example of a 3 vertex face with a texture applied.\n        The third is an example of a 4 vertex face. Note: a face can contain N\n        number of vertices.\n\n        Each number that appears in one of the groups is a 1-based index\n        corresponding to an item from the other sections (meaning that indexing\n        starts at one and *not* zero).\n\n        For example:\n            `f 16/92/11` is saying to\n              - take the 16th element from the [v] vertex array\n              - take the 92nd element from the [vt] texture array\n              - take the 11th element from the [vn] normal array\n            and together they make a unique vertex.\n        Using all 3+ unique Vertices from the face line will produce a polygon.\n\n        Now, you could just go through the OBJ file and create a new vertex for\n        each face line and WebGL will draw what appears to be the same model.\n        However, vertices will be overlapped and duplicated all over the place.\n\n        Consider a cube in 3D space centered about the origin and each side is\n        2 units long. The front face (with the positive Z-axis pointing towards\n        you) would have a Top Right vertex (looking orthogonal to its normal)\n        mapped at (1,1,1) The right face would have a Top Left vertex (looking\n        orthogonal to its normal) at (1,1,1) and the top face would have a Bottom\n        Right vertex (looking orthogonal to its normal) at (1,1,1). Each face\n        has a vertex at the same coordinates, however, three distinct vertices\n        will be drawn at the same spot.\n\n        To solve the issue of duplicate Vertices (the `(vertex, [texture], normal)`\n        groups), while iterating through the face lines, when a group is encountered\n        the whole group string (\'16/92/11\') is checked to see if it exists in the\n        packed.hashindices object, and if it doesn\'t, the indices it specifies\n        are used to look up each attribute in the corresponding attribute arrays\n        already created. The values are then copied to the corresponding unpacked\n        array (flattened to play nice with WebGL\'s ELEMENT_ARRAY_BUFFER indexing),\n        the group string is added to the hashindices set and the current unpacked\n        index is used as this hashindices value so that the group of elements can\n        be reused. The unpacked index is incremented. If the group string already\n        exists in the hashindices object, its corresponding value is the index of\n        that group and is appended to the unpacked indices array.\n       */\n        const verts = [];\n        const vertNormals = [];\n        const textures = [];\n        const materialNamesByIndex = [];\n        const materialIndicesByName = {};\n        // keep track of what material we\'ve seen last\n        let currentMaterialIndex = -1;\n        let currentObjectByMaterialIndex = 0;\n        // unpacking stuff\n        const unpacked = {\n            verts: [],\n            norms: [],\n            textures: [],\n            hashindices: {},\n            indices: [[]],\n            materialIndices: [],\n            index: 0,\n        };\n        const VERTEX_RE = /^v\\s/;\n        const NORMAL_RE = /^vn\\s/;\n        const TEXTURE_RE = /^vt\\s/;\n        const FACE_RE = /^f\\s/;\n        const WHITESPACE_RE = /\\s+/;\n        const USE_MATERIAL_RE = /^usemtl/;\n        // array of lines separated by the newline\n        const lines = objectData.split("\\n");\n        for (let line of lines) {\n            line = line.trim();\n            if (!line || line.startsWith("#")) {\n                continue;\n            }\n            const elements = line.split(WHITESPACE_RE);\n            elements.shift();\n            if (VERTEX_RE.test(line)) {\n                // if this is a vertex\n                verts.push(...elements);\n            }\n            else if (NORMAL_RE.test(line)) {\n                // if this is a vertex normal\n                vertNormals.push(...elements);\n            }\n            else if (TEXTURE_RE.test(line)) {\n                let coords = elements;\n                // by default, the loader will only look at the U and V\n                // coordinates of the vt declaration. So, this truncates the\n                // elements to only those 2 values. If W texture coordinate\n                // support is enabled, then the texture coordinate is\n                // expected to have three values in it.\n                if (elements.length > 2 && !options.enableWTextureCoord) {\n                    coords = elements.slice(0, 2);\n                }\n                else if (elements.length === 2 && options.enableWTextureCoord) {\n                    // If for some reason W texture coordinate support is enabled\n                    // and only the U and V coordinates are given, then we supply\n                    // the default value of 0 so that the stride length is correct\n                    // when the textures are unpacked below.\n                    coords.push("0");\n                }\n                textures.push(...coords);\n            }\n            else if (USE_MATERIAL_RE.test(line)) {\n                const materialName = elements[0];\n                // check to see if we\'ve ever seen it before\n                if (!(materialName in materialIndicesByName)) {\n                    // new material we\'ve never seen\n                    materialNamesByIndex.push(materialName);\n                    materialIndicesByName[materialName] = materialNamesByIndex.length - 1;\n                    // push new array into indices\n                    // already contains an array at index zero, don\'t add\n                    if (materialIndicesByName[materialName] > 0) {\n                        unpacked.indices.push([]);\n                    }\n                }\n                // keep track of the current material index\n                currentMaterialIndex = materialIndicesByName[materialName];\n                // update current index array\n                currentObjectByMaterialIndex = currentMaterialIndex;\n            }\n            else if (FACE_RE.test(line)) {\n                // if this is a face\n                /*\n                split this face into an array of Vertex groups\n                for example:\n                   f 16/92/11 14/101/22 1/69/1\n                becomes:\n                  [\'16/92/11\', \'14/101/22\', \'1/69/1\'];\n                */\n                const triangles = triangulate(elements);\n                for (const triangle of triangles) {\n                    for (let j = 0, eleLen = triangle.length; j < eleLen; j++) {\n                        const hash = triangle[j] + "," + currentMaterialIndex;\n                        if (hash in unpacked.hashindices) {\n                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                        }\n                        else {\n                            /*\n                        Each element of the face line array is a Vertex which has its\n                        attributes delimited by a forward slash. This will separate\n                        each attribute into another array:\n                            \'19/92/11\'\n                        becomes:\n                            Vertex = [\'19\', \'92\', \'11\'];\n                        where\n                            Vertex[0] is the vertex index\n                            Vertex[1] is the texture index\n                            Vertex[2] is the normal index\n                         Think of faces having Vertices which are comprised of the\n                         attributes location (v), texture (vt), and normal (vn).\n                         */\n                            const vertex = triangle[j].split("/");\n                            // it\'s possible for faces to only specify the vertex\n                            // and the normal. In this case, vertex will only have\n                            // a length of 2 and not 3 and the normal will be the\n                            // second item in the list with an index of 1.\n                            const normalIndex = vertex.length - 1;\n                            /*\n                         The verts, textures, and vertNormals arrays each contain a\n                         flattend array of coordinates.\n\n                         Because it gets confusing by referring to Vertex and then\n                         vertex (both are different in my descriptions) I will explain\n                         what\'s going on using the vertexNormals array:\n\n                         vertex[2] will contain the one-based index of the vertexNormals\n                         section (vn). One is subtracted from this index number to play\n                         nice with javascript\'s zero-based array indexing.\n\n                         Because vertexNormal is a flattened array of x, y, z values,\n                         simple pointer arithmetic is used to skip to the start of the\n                         vertexNormal, then the offset is added to get the correct\n                         component: +0 is x, +1 is y, +2 is z.\n\n                         This same process is repeated for verts and textures.\n                         */\n                            // Vertex position\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 0]);\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 1]);\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 2]);\n                            // Vertex textures\n                            if (textures.length) {\n                                const stride = options.enableWTextureCoord ? 3 : 2;\n                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 0]);\n                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 1]);\n                                if (options.enableWTextureCoord) {\n                                    unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 2]);\n                                }\n                            }\n                            // Vertex normals\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 0]);\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 1]);\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 2]);\n                            // Vertex material indices\n                            unpacked.materialIndices.push(currentMaterialIndex);\n                            // add the newly created Vertex to the list of indices\n                            unpacked.hashindices[hash] = unpacked.index;\n                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                            // increment the counter\n                            unpacked.index += 1;\n                        }\n                    }\n                }\n            }\n        }\n        this.vertices = unpacked.verts;\n        this.vertexNormals = unpacked.norms;\n        this.textures = unpacked.textures;\n        this.vertexMaterialIndices = unpacked.materialIndices;\n        this.indices = unpacked.indices[currentObjectByMaterialIndex];\n        this.indicesPerMaterial = unpacked.indices;\n        this.materialNames = materialNamesByIndex;\n        this.materialIndices = materialIndicesByName;\n        this.materialsByIndex = {};\n        if (options.calcTangentsAndBitangents) {\n            this.calculateTangentsAndBitangents();\n        }\n    }\n    /**\n     * Calculates the tangents and bitangents of the mesh that forms an orthogonal basis together with the\n     * normal in the direction of the texture coordinates. These are useful for setting up the TBN matrix\n     * when distorting the normals through normal maps.\n     * Method derived from: http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/\n     *\n     * This method requires the normals and texture coordinates to be parsed and set up correctly.\n     * Adds the tangents and bitangents as members of the class instance.\n     */\n    calculateTangentsAndBitangents() {\n        console.assert(!!(this.vertices &&\n            this.vertices.length &&\n            this.vertexNormals &&\n            this.vertexNormals.length &&\n            this.textures &&\n            this.textures.length), "Missing attributes for calculating tangents and bitangents");\n        const unpacked = {\n            tangents: [...new Array(this.vertices.length)].map(_ => 0),\n            bitangents: [...new Array(this.vertices.length)].map(_ => 0),\n        };\n        // Loop through all faces in the whole mesh\n        const indices = this.indices;\n        const vertices = this.vertices;\n        const normals = this.vertexNormals;\n        const uvs = this.textures;\n        for (let i = 0; i < indices.length; i += 3) {\n            const i0 = indices[i + 0];\n            const i1 = indices[i + 1];\n            const i2 = indices[i + 2];\n            const x_v0 = vertices[i0 * 3 + 0];\n            const y_v0 = vertices[i0 * 3 + 1];\n            const z_v0 = vertices[i0 * 3 + 2];\n            const x_uv0 = uvs[i0 * 2 + 0];\n            const y_uv0 = uvs[i0 * 2 + 1];\n            const x_v1 = vertices[i1 * 3 + 0];\n            const y_v1 = vertices[i1 * 3 + 1];\n            const z_v1 = vertices[i1 * 3 + 2];\n            const x_uv1 = uvs[i1 * 2 + 0];\n            const y_uv1 = uvs[i1 * 2 + 1];\n            const x_v2 = vertices[i2 * 3 + 0];\n            const y_v2 = vertices[i2 * 3 + 1];\n            const z_v2 = vertices[i2 * 3 + 2];\n            const x_uv2 = uvs[i2 * 2 + 0];\n            const y_uv2 = uvs[i2 * 2 + 1];\n            const x_deltaPos1 = x_v1 - x_v0;\n            const y_deltaPos1 = y_v1 - y_v0;\n            const z_deltaPos1 = z_v1 - z_v0;\n            const x_deltaPos2 = x_v2 - x_v0;\n            const y_deltaPos2 = y_v2 - y_v0;\n            const z_deltaPos2 = z_v2 - z_v0;\n            const x_uvDeltaPos1 = x_uv1 - x_uv0;\n            const y_uvDeltaPos1 = y_uv1 - y_uv0;\n            const x_uvDeltaPos2 = x_uv2 - x_uv0;\n            const y_uvDeltaPos2 = y_uv2 - y_uv0;\n            const rInv = x_uvDeltaPos1 * y_uvDeltaPos2 - y_uvDeltaPos1 * x_uvDeltaPos2;\n            const r = 1.0 / Math.abs(rInv < 0.0001 ? 1.0 : rInv);\n            // Tangent\n            const x_tangent = (x_deltaPos1 * y_uvDeltaPos2 - x_deltaPos2 * y_uvDeltaPos1) * r;\n            const y_tangent = (y_deltaPos1 * y_uvDeltaPos2 - y_deltaPos2 * y_uvDeltaPos1) * r;\n            const z_tangent = (z_deltaPos1 * y_uvDeltaPos2 - z_deltaPos2 * y_uvDeltaPos1) * r;\n            // Bitangent\n            const x_bitangent = (x_deltaPos2 * x_uvDeltaPos1 - x_deltaPos1 * x_uvDeltaPos2) * r;\n            const y_bitangent = (y_deltaPos2 * x_uvDeltaPos1 - y_deltaPos1 * x_uvDeltaPos2) * r;\n            const z_bitangent = (z_deltaPos2 * x_uvDeltaPos1 - z_deltaPos1 * x_uvDeltaPos2) * r;\n            // Gram-Schmidt orthogonalize\n            //t = glm::normalize(t - n * glm:: dot(n, t));\n            const x_n0 = normals[i0 * 3 + 0];\n            const y_n0 = normals[i0 * 3 + 1];\n            const z_n0 = normals[i0 * 3 + 2];\n            const x_n1 = normals[i1 * 3 + 0];\n            const y_n1 = normals[i1 * 3 + 1];\n            const z_n1 = normals[i1 * 3 + 2];\n            const x_n2 = normals[i2 * 3 + 0];\n            const y_n2 = normals[i2 * 3 + 1];\n            const z_n2 = normals[i2 * 3 + 2];\n            // Tangent\n            const n0_dot_t = x_tangent * x_n0 + y_tangent * y_n0 + z_tangent * z_n0;\n            const n1_dot_t = x_tangent * x_n1 + y_tangent * y_n1 + z_tangent * z_n1;\n            const n2_dot_t = x_tangent * x_n2 + y_tangent * y_n2 + z_tangent * z_n2;\n            const x_resTangent0 = x_tangent - x_n0 * n0_dot_t;\n            const y_resTangent0 = y_tangent - y_n0 * n0_dot_t;\n            const z_resTangent0 = z_tangent - z_n0 * n0_dot_t;\n            const x_resTangent1 = x_tangent - x_n1 * n1_dot_t;\n            const y_resTangent1 = y_tangent - y_n1 * n1_dot_t;\n            const z_resTangent1 = z_tangent - z_n1 * n1_dot_t;\n            const x_resTangent2 = x_tangent - x_n2 * n2_dot_t;\n            const y_resTangent2 = y_tangent - y_n2 * n2_dot_t;\n            const z_resTangent2 = z_tangent - z_n2 * n2_dot_t;\n            const magTangent0 = Math.sqrt(x_resTangent0 * x_resTangent0 + y_resTangent0 * y_resTangent0 + z_resTangent0 * z_resTangent0);\n            const magTangent1 = Math.sqrt(x_resTangent1 * x_resTangent1 + y_resTangent1 * y_resTangent1 + z_resTangent1 * z_resTangent1);\n            const magTangent2 = Math.sqrt(x_resTangent2 * x_resTangent2 + y_resTangent2 * y_resTangent2 + z_resTangent2 * z_resTangent2);\n            // Bitangent\n            const n0_dot_bt = x_bitangent * x_n0 + y_bitangent * y_n0 + z_bitangent * z_n0;\n            const n1_dot_bt = x_bitangent * x_n1 + y_bitangent * y_n1 + z_bitangent * z_n1;\n            const n2_dot_bt = x_bitangent * x_n2 + y_bitangent * y_n2 + z_bitangent * z_n2;\n            const x_resBitangent0 = x_bitangent - x_n0 * n0_dot_bt;\n            const y_resBitangent0 = y_bitangent - y_n0 * n0_dot_bt;\n            const z_resBitangent0 = z_bitangent - z_n0 * n0_dot_bt;\n            const x_resBitangent1 = x_bitangent - x_n1 * n1_dot_bt;\n            const y_resBitangent1 = y_bitangent - y_n1 * n1_dot_bt;\n            const z_resBitangent1 = z_bitangent - z_n1 * n1_dot_bt;\n            const x_resBitangent2 = x_bitangent - x_n2 * n2_dot_bt;\n            const y_resBitangent2 = y_bitangent - y_n2 * n2_dot_bt;\n            const z_resBitangent2 = z_bitangent - z_n2 * n2_dot_bt;\n            const magBitangent0 = Math.sqrt(x_resBitangent0 * x_resBitangent0 +\n                y_resBitangent0 * y_resBitangent0 +\n                z_resBitangent0 * z_resBitangent0);\n            const magBitangent1 = Math.sqrt(x_resBitangent1 * x_resBitangent1 +\n                y_resBitangent1 * y_resBitangent1 +\n                z_resBitangent1 * z_resBitangent1);\n            const magBitangent2 = Math.sqrt(x_resBitangent2 * x_resBitangent2 +\n                y_resBitangent2 * y_resBitangent2 +\n                z_resBitangent2 * z_resBitangent2);\n            unpacked.tangents[i0 * 3 + 0] += x_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 1] += y_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 2] += z_resTangent0 / magTangent0;\n            unpacked.tangents[i1 * 3 + 0] += x_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 1] += y_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 2] += z_resTangent1 / magTangent1;\n            unpacked.tangents[i2 * 3 + 0] += x_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 1] += y_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 2] += z_resTangent2 / magTangent2;\n            unpacked.bitangents[i0 * 3 + 0] += x_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 1] += y_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 2] += z_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i1 * 3 + 0] += x_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 1] += y_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 2] += z_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i2 * 3 + 0] += x_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 1] += y_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 2] += z_resBitangent2 / magBitangent2;\n            // TODO: check handedness\n        }\n        this.tangents = unpacked.tangents;\n        this.bitangents = unpacked.bitangents;\n    }\n    /**\n     * @param layout - A {@link Layout} object that describes the\n     * desired memory layout of the generated buffer\n     * @return The packed array in the ... TODO\n     */\n    makeBufferData(layout) {\n        const numItems = this.vertices.length / 3;\n        const buffer = new ArrayBuffer(layout.stride * numItems);\n        buffer.numItems = numItems;\n        const dataView = new DataView(buffer);\n        for (let i = 0, vertexOffset = 0; i < numItems; i++) {\n            vertexOffset = i * layout.stride;\n            // copy in the vertex data in the order and format given by the\n            // layout param\n            for (const attribute of layout.attributes) {\n                const offset = vertexOffset + layout.attributeMap[attribute.key].offset;\n                switch (attribute.key) {\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].POSITION.key:\n                        dataView.setFloat32(offset, this.vertices[i * 3], true);\n                        dataView.setFloat32(offset + 4, this.vertices[i * 3 + 1], true);\n                        dataView.setFloat32(offset + 8, this.vertices[i * 3 + 2], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].UV.key:\n                        dataView.setFloat32(offset, this.textures[i * 2], true);\n                        dataView.setFloat32(offset + 4, this.textures[i * 2 + 1], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].NORMAL.key:\n                        dataView.setFloat32(offset, this.vertexNormals[i * 3], true);\n                        dataView.setFloat32(offset + 4, this.vertexNormals[i * 3 + 1], true);\n                        dataView.setFloat32(offset + 8, this.vertexNormals[i * 3 + 2], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].MATERIAL_INDEX.key:\n                        dataView.setInt16(offset, this.vertexMaterialIndices[i], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].AMBIENT.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.ambient[0], true);\n                        dataView.setFloat32(offset + 4, material.ambient[1], true);\n                        dataView.setFloat32(offset + 8, material.ambient[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DIFFUSE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.diffuse[0], true);\n                        dataView.setFloat32(offset + 4, material.diffuse[1], true);\n                        dataView.setFloat32(offset + 8, material.diffuse[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.specular[0], true);\n                        dataView.setFloat32(offset + 4, material.specular[1], true);\n                        dataView.setFloat32(offset + 8, material.specular[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR_EXPONENT.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.specularExponent, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].EMISSIVE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.emissive[0], true);\n                        dataView.setFloat32(offset + 4, material.emissive[1], true);\n                        dataView.setFloat32(offset + 8, material.emissive[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].TRANSMISSION_FILTER.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.transmissionFilter[0], true);\n                        dataView.setFloat32(offset + 4, material.transmissionFilter[1], true);\n                        dataView.setFloat32(offset + 8, material.transmissionFilter[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DISSOLVE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.dissolve, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ILLUMINATION.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setInt16(offset, material.illumination, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].REFRACTION_INDEX.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.refractionIndex, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SHARPNESS.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.sharpness, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ANTI_ALIASING.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setInt16(offset, material.antiAliasing ? 1 : 0, true);\n                        break;\n                    }\n                }\n            }\n        }\n        return buffer;\n    }\n    makeIndexBufferData() {\n        const buffer = new Uint16Array(this.indices);\n        buffer.numItems = this.indices.length;\n        return buffer;\n    }\n    makeIndexBufferDataForMaterials(...materialIndices) {\n        const indices = new Array().concat(...materialIndices.map(mtlIdx => this.indicesPerMaterial[mtlIdx]));\n        const buffer = new Uint16Array(indices);\n        buffer.numItems = indices.length;\n        return buffer;\n    }\n    addMaterialLibrary(mtl) {\n        for (const name in mtl.materials) {\n            if (!(name in this.materialIndices)) {\n                // This material is not referenced by the mesh\n                continue;\n            }\n            const material = mtl.materials[name];\n            // Find the material index for this material\n            const materialIndex = this.materialIndices[material.name];\n            // Put the material into the materialsByIndex object at the right\n            // spot as determined when the obj file was parsed\n            this.materialsByIndex[materialIndex] = material;\n        }\n    }\n}\nfunction* triangulate(elements) {\n    if (elements.length <= 3) {\n        yield elements;\n    }\n    else if (elements.length === 4) {\n        yield [elements[0], elements[1], elements[2]];\n        yield [elements[2], elements[3], elements[0]];\n    }\n    else {\n        for (let i = 1; i < elements.length - 1; i++) {\n            yield [elements[0], elements[i], elements[i + 1]];\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/mesh.ts?')},"./src/utils.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return downloadModels; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return downloadMeshes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return initMeshBuffers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return deleteMeshBuffers; });\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n\n\nfunction downloadMtlTextures(mtl, root) {\n    const mapAttributes = [\n        "mapDiffuse",\n        "mapAmbient",\n        "mapSpecular",\n        "mapDissolve",\n        "mapBump",\n        "mapDisplacement",\n        "mapDecal",\n        "mapEmissive",\n    ];\n    if (!root.endsWith("/")) {\n        root += "/";\n    }\n    const textures = [];\n    for (const materialName in mtl.materials) {\n        if (!mtl.materials.hasOwnProperty(materialName)) {\n            continue;\n        }\n        const material = mtl.materials[materialName];\n        for (const attr of mapAttributes) {\n            const mapData = material[attr];\n            if (!mapData || !mapData.filename) {\n                continue;\n            }\n            const url = root + mapData.filename;\n            textures.push(fetch(url)\n                .then(response => {\n                if (!response.ok) {\n                    throw new Error();\n                }\n                return response.blob();\n            })\n                .then(function (data) {\n                const image = new Image();\n                image.src = URL.createObjectURL(data);\n                mapData.texture = image;\n                return new Promise(resolve => (image.onload = resolve));\n            })\n                .catch(() => {\n                console.error(`Unable to download texture: ${url}`);\n            }));\n        }\n    }\n    return Promise.all(textures);\n}\nfunction getMtl(modelOptions) {\n    if (!(typeof modelOptions.mtl === "string")) {\n        return modelOptions.obj.replace(/\\.obj$/, ".mtl");\n    }\n    return modelOptions.mtl;\n}\n/**\n * Accepts a list of model request objects and returns a Promise that\n * resolves when all models have been downloaded and parsed.\n *\n * The list of model objects follow this interface:\n * {\n *  obj: \'path/to/model.obj\',\n *  mtl: true | \'path/to/model.mtl\',\n *  downloadMtlTextures: true | false\n *  mtlTextureRoot: \'/models/suzanne/maps\'\n *  name: \'suzanne\'\n * }\n *\n * The `obj` attribute is required and should be the path to the\n * model\'s .obj file relative to the current repo (absolute URLs are\n * suggested).\n *\n * The `mtl` attribute is optional and can either be a boolean or\n * a path to the model\'s .mtl file relative to the current URL. If\n * the value is `true`, then the path and basename given for the `obj`\n * attribute is used replacing the .obj suffix for .mtl\n * E.g.: {obj: \'models/foo.obj\', mtl: true} would search for \'models/foo.mtl\'\n *\n * The `name` attribute is optional and is a human friendly name to be\n * included with the parsed OBJ and MTL files. If not given, the base .obj\n * filename will be used.\n *\n * The `downloadMtlTextures` attribute is a flag for automatically downloading\n * any images found in the MTL file and attaching them to each Material\n * created from that file. For example, if material.mapDiffuse is set (there\n * was data in the MTL file), then material.mapDiffuse.texture will contain\n * the downloaded image. This option defaults to `true`. By default, the MTL\'s\n * URL will be used to determine the location of the images.\n *\n * The `mtlTextureRoot` attribute is optional and should point to the location\n * on the server that this MTL\'s texture files are located. The default is to\n * use the MTL file\'s location.\n *\n * @returns {Promise} the result of downloading the given list of models. The\n * promise will resolve with an object whose keys are the names of the models\n * and the value is its Mesh object. Each Mesh object will automatically\n * have its addMaterialLibrary() method called to set the given MTL data (if given).\n */\nfunction downloadModels(models) {\n    const finished = [];\n    for (const model of models) {\n        if (!model.obj) {\n            throw new Error(\'"obj" attribute of model object not set. The .obj file is required to be set \' +\n                "in order to use downloadModels()");\n        }\n        const options = {\n            indicesPerMaterial: !!model.indicesPerMaterial,\n            calcTangentsAndBitangents: !!model.calcTangentsAndBitangents,\n        };\n        // if the name is not provided, dervive it from the given OBJ\n        let name = model.name;\n        if (!name) {\n            const parts = model.obj.split("/");\n            name = parts[parts.length - 1].replace(".obj", "");\n        }\n        const namePromise = Promise.resolve(name);\n        const meshPromise = fetch(model.obj)\n            .then(response => response.text())\n            .then(data => {\n            return new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data, options);\n        });\n        let mtlPromise;\n        // Download MaterialLibrary file?\n        if (model.mtl) {\n            const mtl = getMtl(model);\n            mtlPromise = fetch(mtl)\n                .then(response => response.text())\n                .then((data) => {\n                const material = new _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"](data);\n                if (model.downloadMtlTextures !== false) {\n                    let root = model.mtlTextureRoot;\n                    if (!root) {\n                        // get the directory of the MTL file as default\n                        root = mtl.substr(0, mtl.lastIndexOf("/"));\n                    }\n                    // downloadMtlTextures returns a Promise that\n                    // is resolved once all of the images it\n                    // contains are downloaded. These are then\n                    // attached to the map data objects\n                    return Promise.all([Promise.resolve(material), downloadMtlTextures(material, root)]);\n                }\n                return Promise.all([Promise.resolve(material), undefined]);\n            })\n                .then((value) => {\n                return value[0];\n            });\n        }\n        const parsed = [namePromise, meshPromise, mtlPromise];\n        finished.push(Promise.all(parsed));\n    }\n    return Promise.all(finished).then(ms => {\n        // the "finished" promise is a list of name, Mesh instance,\n        // and MaterialLibary instance. This unpacks and returns an\n        // object mapping name to Mesh (Mesh points to MTL).\n        const models = {};\n        for (const model of ms) {\n            const [name, mesh, mtl] = model;\n            mesh.name = name;\n            if (mtl) {\n                mesh.addMaterialLibrary(mtl);\n            }\n            models[name] = mesh;\n        }\n        return models;\n    });\n}\n/**\n * Takes in an object of `mesh_name`, `\'/url/to/OBJ/file\'` pairs and a callback\n * function. Each OBJ file will be ajaxed in and automatically converted to\n * an OBJ.Mesh. When all files have successfully downloaded the callback\n * function provided will be called and passed in an object containing\n * the newly created meshes.\n *\n * **Note:** In order to use this function as a way to download meshes, a\n * webserver of some sort must be used.\n *\n * @param {Object} nameAndAttrs an object where the key is the name of the mesh and the value is the url to that mesh\'s OBJ file\n *\n * @param {Function} completionCallback should contain a function that will take one parameter: an object array where the keys will be the unique object name and the value will be a Mesh object\n *\n * @param {Object} meshes In case other meshes are loaded separately or if a previously declared variable is desired to be used, pass in a (possibly empty) json object of the pattern: { \'<mesh_name>\': OBJ.Mesh }\n *\n */\nfunction downloadMeshes(nameAndURLs, completionCallback, meshes) {\n    if (meshes === undefined) {\n        meshes = {};\n    }\n    const completed = [];\n    for (const mesh_name in nameAndURLs) {\n        if (!nameAndURLs.hasOwnProperty(mesh_name)) {\n            continue;\n        }\n        const url = nameAndURLs[mesh_name];\n        completed.push(fetch(url)\n            .then(response => response.text())\n            .then(data => {\n            return [mesh_name, new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data)];\n        }));\n    }\n    Promise.all(completed).then(ms => {\n        for (const [name, mesh] of ms) {\n            meshes[name] = mesh;\n        }\n        return completionCallback(meshes);\n    });\n}\nfunction _buildBuffer(gl, type, data, itemSize) {\n    const buffer = gl.createBuffer();\n    const arrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;\n    gl.bindBuffer(type, buffer);\n    gl.bufferData(type, new arrayView(data), gl.STATIC_DRAW);\n    buffer.itemSize = itemSize;\n    buffer.numItems = data.length / itemSize;\n    return buffer;\n}\n/**\n * Takes in the WebGL context and a Mesh, then creates and appends the buffers\n * to the mesh object as attributes.\n *\n * @param {WebGLRenderingContext} gl the `canvas.getContext(\'webgl\')` context instance\n * @param {Mesh} mesh a single `OBJ.Mesh` instance\n *\n * The newly created mesh attributes are:\n *\n * Attrbute | Description\n * :--- | ---\n * **normalBuffer**       |contains the model&#39;s Vertex Normals\n * normalBuffer.itemSize  |set to 3 items\n * normalBuffer.numItems  |the total number of vertex normals\n * |\n * **textureBuffer**      |contains the model&#39;s Texture Coordinates\n * textureBuffer.itemSize |set to 2 items\n * textureBuffer.numItems |the number of texture coordinates\n * |\n * **vertexBuffer**       |contains the model&#39;s Vertex Position Coordinates (does not include w)\n * vertexBuffer.itemSize  |set to 3 items\n * vertexBuffer.numItems  |the total number of vertices\n * |\n * **indexBuffer**        |contains the indices of the faces\n * indexBuffer.itemSize   |is set to 1\n * indexBuffer.numItems   |the total number of indices\n *\n * A simple example (a lot of steps are missing, so don\'t copy and paste):\n *\n *     const gl   = canvas.getContext(\'webgl\'),\n *         mesh = OBJ.Mesh(obj_file_data);\n *     // compile the shaders and create a shader program\n *     const shaderProgram = gl.createProgram();\n *     // compilation stuff here\n *     ...\n *     // make sure you have vertex, vertex normal, and texture coordinate\n *     // attributes located in your shaders and attach them to the shader program\n *     shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");\n *     gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\n *\n *     shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, "aVertexNormal");\n *     gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);\n *\n *     shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");\n *     gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *\n *     // create and initialize the vertex, vertex normal, and texture coordinate buffers\n *     // and save on to the mesh object\n *     OBJ.initMeshBuffers(gl, mesh);\n *\n *     // now to render the mesh\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);\n *     gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     // it\'s possible that the mesh doesn\'t contain\n *     // any texture coordinates (e.g. suzanne.obj in the development branch).\n *     // in this case, the texture vertexAttribArray will need to be disabled\n *     // before the call to drawElements\n *     if(!mesh.textures.length){\n *       gl.disableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *     }\n *     else{\n *       // if the texture vertexAttribArray has been previously\n *       // disabled, then it needs to be re-enabled\n *       gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *       gl.bindBuffer(gl.ARRAY_BUFFER, mesh.textureBuffer);\n *       gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     }\n *\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.normalBuffer);\n *     gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute, mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *\n *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.mesh.indexBuffer);\n *     gl.drawElements(gl.TRIANGLES, model.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);\n */\nfunction initMeshBuffers(gl, mesh) {\n    mesh.normalBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertexNormals, 3);\n    mesh.textureBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.textures, mesh.textureStride);\n    mesh.vertexBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertices, 3);\n    mesh.indexBuffer = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indices, 1);\n    return mesh;\n}\nfunction deleteMeshBuffers(gl, mesh) {\n    gl.deleteBuffer(mesh.normalBuffer);\n    gl.deleteBuffer(mesh.textureBuffer);\n    gl.deleteBuffer(mesh.vertexBuffer);\n    gl.deleteBuffer(mesh.indexBuffer);\n}\n\n\n//# sourceURL=webpack:///./src/utils.ts?')},0:function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__(/*! /home/aaron/google_drive/projects/webgl-obj-loader/src/index.ts */"./src/index.ts");\n\n\n//# sourceURL=webpack:///multi_./src/index.ts?')}})},module.exports=t()},"../node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"../shaders/decal/decalcounterv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"decalcounterv5",(function(){return c}));var n,i=r("../shaders/decal/shared/index.js"),o=r("../shaders/shared/func.js"),a=r("./global/constant/d3d.js");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={name:"decalcounterv5",replaces:"graphics/effect.gles2/managed/space/decals/v5/decalcounterv5",description:"killmark decal shader",techniques:{Main:{vs:i.vs.decal_PosTexTan,ps:{constants:[i.constant.DecalTextureScaling,i.constant.DecalIntensityData,i.constant.DecalGlowColor],textures:[i.texture.DecalAlbedoMap_SamplerWrap,i.texture.DecalTransparencyMap_SamplerWrap],shader:"\n\n                    ".concat(o.precision,"\n                    ").concat(i.ps.shadowHeader,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    \n                    uniform sampler2D s0;       // DecalAlbedoMap;\n                    uniform sampler2D s1;       // DecalTransparencyMap;\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[4];\n                    uniform vec4 cb7[3];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        \n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r2;\n                        \n                        vec4 c3=vec4(0.5,1,3,9);\n                        vec4 c4=vec4(3.32192802,2,4.5,0.5);\n                        vec4 c5=vec4(-1.44269507e-005,-0.00313080009,12.9200001,0.416666657);\n                        vec4 c6=vec4(1.05499995,-0.0549999997,0,0);\n                        vec4 c7=vec4(1,4.5,1.5,0);\n                        \n                        v0=texcoord;\n                        v1=texcoord4;\n                        v2=texcoord5;\n                        \n                        r0.xyz=(-cb4[2].xyz)+v2.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[2].w;\n                        r0=cb4[3].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        r0.xy=c7.xx+v0.zw;\n                        r0.zw=r0.yx*(-c3.xx)+c3.yy;\n                        r1.xy=r0.zw*c3.zw;\n                        r1.zw=fract(r1.xy);\n                        {\n                            bvec2 tmp=greaterThanEqual((-r1.zw),vec2(0.0));\n                            r2.xy=vec2(tmp.x?c7.w:c7.x,tmp.y?c7.w:c7.x);\n                        }\n                        {\n                            bvec2 tmp=greaterThanEqual(r0.zw,vec2(0.0));\n                            r0.zw=vec2(tmp.x?c7.w:r2.x,tmp.y?c7.w:r2.y);\n                        }\n                        r1.xy=r1.xy+(-r1.zw);\n                        r0.zw=r0.zw+r1.xy;\n                        r1.xy=r0.xy*c7.yz;\n                        r1.zw=fract(r1.yx);\n                        r1.xy=r1.yx+(-r1.zw);\n                        {\n                            bvec2 tmp=greaterThanEqual((-r1.zw),vec2(0.0));\n                            r1.zw=vec2(tmp.x?c7.w:c7.x,tmp.y?c7.w:c7.x);\n                        }\n                        {\n                            bvec2 tmp=greaterThanEqual(r0.yx,vec2(0.0));\n                            r1.zw=vec2(tmp.x?c7.w:r1.z,tmp.y?c7.w:r1.w);\n                        }\n                        r1.xy=r1.zw+r1.xy;\n                        r2.xy=mix(r1.xy,r0.zw,cb7[0].yx);\n                        r0.zw=r2.xy+c3.yx;\n                        r0.z=r0.z*c4.x;\n                        r0.z=exp2(r0.z);\n                        r1.x=1.0/r0.z;\n                        r1.x=r1.x*cb4[0].x;\n                        r1.y=fract(abs(r1.x));\n                        r1.x=r1.x>=0.0?r1.y:(-r1.y);\n                        r0.z=r1.x*r0.z+c3.x;\n                        r1.x=r2.x*c4.x;\n                        r1.x=exp2(r1.x);\n                        r1.x=1.0/r1.x;\n                        r0.z=r0.z*r1.x;\n                        r1.x=fract(r0.z);\n                        r1.y=(-r1.x)>=0.0?c7.w:c7.x;\n                        r1.y=r0.z>=0.0?c7.w:r1.y;\n                        r0.z=r0.z+(-r1.x);\n                        r0.z=r1.y+r0.z;\n                        r0.z=(-r0.w)+r0.z;\n                        {\n                            bvec4 tmp=greaterThanEqual(r0.zzzz,vec4(0.0));\n                            r1=vec4(tmp.x?(-c7.w):(-c7.x),tmp.y?(-c7.w):(-c7.x),tmp.z?(-c7.w):(-c7.x),tmp.w?(-c7.w):(-c7.x));\n                        }\n                        if(any(lessThan(r1,vec4(0.0))))discard;\n                        r0.zw=r0.xy*c4.zw;\n                        \n                        // DecalAlbedoMap\n                        r1.xyz=texture2D(s0,r0.zw).xyz;\n                        \n                        // DecalTransparencyMap\n                        r1.w=texture2D(s1,r0.zw).x;\n                        \n                        r0.z=r1.w*cb7[1].x;\n                        r0.z=r0.z*cb4[1].y;\n                        {\n                            bvec2 tmp=greaterThanEqual(r0.xy,vec2(0.0));\n                            r1.xy=vec2(tmp.x?c7.x:c7.w,tmp.y?c7.x:c7.w);\n                        }\n                        r0.w=r1.y*r1.x;\n                        r0.xy=(-r0.xy)+c4.yy;\n                        {\n                            bvec2 tmp=greaterThanEqual(r0.xy,vec2(0.0));\n                            r0.xy=vec2(tmp.x?c7.x:c7.w,tmp.y?c7.x:c7.w);\n                        }\n                        r0.xz=r0.xz*r0.wz;\n                        r0.x=r0.y*r0.x;\n                        r0.x=r0.x*r0.z;\n                        r0.y=cb2[15].w*v1.w;\n                        r0.y=r0.y*c5.x;\n                        r0.y=exp2(r0.y);\n                        r1.xyz=cb2[15].xyz;\n                        r1.xyz=(-r1.xyz)+cb7[2].xyz;\n                        r0.yzw=r0.yyy*r1.xyz+cb2[15].xyz;\n                        r0.yzw=r0.yzw*cb4[1].yyy;\n                        r0.xyz=r0.xxx*r0.yzw;\n                        r1.xyz=max(r0.xyz,c7.www);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c5.www;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c6.xxx+c6.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz*c5.zzz;\n                        r2.xyz=r2.xyz+c5.yyy;\n                        {\n                            bvec3 tmp=greaterThanEqual(r2.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r0.x,tmp.y?r1.y:r0.y,tmp.z?r1.z:r0.z);\n                        }\n                        gl_FragData[0].w=c7.w;\n                            \n                        ").concat(i.ps.shadowFooter,"\n                    }\n\n                ")},states:(n={},u(n,a.RS_ZWRITEENABLE,0),u(n,a.RS_ALPHATESTENABLE,0),u(n,a.RS_SRCBLEND,a.BLEND_ONE),u(n,a.RS_DESTBLEND,a.BLEND_ONE),u(n,a.RS_ALPHABLENDENABLE,1),u(n,a.RS_BLENDOP,a.BLENDOP_ADD),n)}}}},"../shaders/decal/decalcylindricv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"decalCylindricV5",(function(){return s}));var n,i=r("./global/constant/d3d.js"),o=r("../shaders/decal/shared/index.js"),a=r("../shaders/shared/func.js"),u=r("../shaders/shared/texture.js"),c=r("../shaders/quad/shared/texture.js");function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={name:"decalCylindricV5",replaces:"graphics/effect.gles2/managed/space/decals/v5/decalCylindricV5",description:"decal cylindric shader",techniques:{Main:{vs:o.vs.decal_PosTexTan,ps:{constants:[o.constant.DecalTextureScaling],textures:[u.EveSpaceSceneEnvMap,u.EveSpaceSceneShadowMap,c.NormalMap,c.AoMap,o.texture.DecalAlbedoMap_SamplerBorder,o.texture.DecalTransparencyMap_SamplerBorder,o.texture.DecalFresnelMap_SamplerBorder,o.texture.DecalNormalMap_SamplerBorder,o.texture.DecalRoughnessMap_SamplerBorder],shader:"\n\n                    ".concat(o.ps.header,"\n                    ").concat(a.clampToBorder,"\n\n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    varying vec4 texcoord9;\n                    varying vec4 texcoord10;\n                    \n                    uniform samplerCube s0; // EveSpaceSceneEnvMap,\n                    uniform sampler2D s1;   // EveSpaceSceneShadowMap,\n                    uniform sampler2D s2;   // NormalMap,\n                    uniform sampler2D s3;   // AoMap,\n                    uniform sampler2D s4;   // DecalAlbedoMapSamplerBorder,\n                    uniform sampler2D s5;   // DecalTransparencyMapSamplerBorder,\n                    uniform sampler2D s6;   // DecalFresnelMapSamplerBorder,\n                    uniform sampler2D s7;   // DecalNormalMapSamplerBorder,\n                    uniform sampler2D s8;   // DecalRoughnessMapSamplerBorder\n                         \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[4];\n                    uniform vec4 cb7[1];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 v8;\n                        vec4 v9;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r10;\n                        vec4 r11;\n                        vec4 r12;\n                        vec4 r13;\n                        vec4 r14;\n                        vec4 r15;\n                        vec4 r16;\n                        vec4 r17;\n                        vec4 r18;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        vec4 c1=vec4(9.99999997e-007,0.666666687,3.14159274,-1e-015);\n                        vec4 c2=vec4(0.0208350997,-0.0851330012,0.180141002,-0.330299497);\n                        vec4 c3=vec4(0.999866009,0,1,3.14159274);\n                        vec4 c4=vec4(-2,1.57079637,0.159154937,0.5);\n                        vec4 c5=vec4(6.28318548,-3.14159274,0.5,-0.5);\n                        vec4 c6=vec4(0.5,1,2,-1);\n                        vec4 c7=vec4(9.99999987e+014,1,1.54499996,1.10000002);\n                        vec4 c8=vec4(6,0,-0.015625,0.75);\n                        vec4 c9=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c10=vec4(-9.27999973,7,0.119999997,0.318309873);\n                        vec4 c11=vec4(-1.44269507e-005,-0.00313080009,12.9200001,0.416666657);\n                        vec4 c12=vec4(1.05499995,-0.0549999997,0,0);\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord7;\n                        v7=texcoord8;\n                        v8=texcoord9;\n                        v9=texcoord10;\n                        \n                        r0.xyz=(-cb4[2].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[2].w;\n                        r0=cb4[3].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        r0.x=(-cb2[19].x)+cb2[19].y;\n                        r0.x=1.0/r0.x;\n                        r0.y=(-cb2[19].x)+v6.z;\n                        r0.x=r0.x*r0.y;\n                        r0.x=sqrt(abs(r0.x));\n                        r0.y=1.0/v7.w;\n                        r0.yz=r0.yy*v7.xy;\n                        r0.yz=r0.yz*c5.zw+c5.zz;\n                        r0.w=c4.w;\n                        r0.yz=cb2[18].xy*r0.ww+r0.yz;\n                        r1=texture2D(s1,r0.yz);\n                        r0.y=r0.x+(-r1.x);\n                        r0.z=r1.x*(-r1.x)+r1.y;\n                        r0.w=r1.x+cb2[18].z;\n                        r0.x=(-r0.x)+r0.w;\n                        r0.x=r0.x>=0.0?c3.z:c3.y;\n                        r1.x=max(r0.z,c1.x);\n                        r0.y=r0.y*r0.y+r1.x;\n                        r0.y=1.0/r0.y;\n                        r0.y=r0.y*r1.x;\n                        r1.x=saturate(max(r0.x,r0.y));\n                        r0.x=r1.x+(-cb2[18].w);\n                        r0.z=c3.z;\n                        r0.y=r0.z+(-cb2[18].w);\n                        r0.y=1.0/r0.y;\n                        r0.x=saturate(r0.y*r0.x);\n                        r0.x=(-cb2[19].x)>=0.0?r0.x:r0.z;\n                        r1.x=max(cb2[19].z,r0.x);\n                        r0.x=r1.x*r1.x;\n                        r0.xyz=r0.xxx*cb2[13].xyz;\n                        r0.xyz=r0.xyz*c1.yyy;\n                        r1.xy=(-abs(v0.zw))+abs(v0.wz);\n                        {\n                            bvec2 tmp=greaterThanEqual(r1.xx,vec2(0.0));\n                            r1.xz=vec2(tmp.x?abs(v0.z):abs(v0.w),tmp.y?abs(v0.w):abs(v0.z));\n                        }\n                        r0.w=r1.y>=0.0?c3.y:c3.z;\n                        r1.y=1.0/r1.z;\n                        r1.x=r1.y*r1.x;\n                        r1.y=r1.x*r1.x;\n                        r1.z=r1.y*c2.x+c2.y;\n                        r1.z=r1.y*r1.z+c2.z;\n                        r1.z=r1.y*r1.z+c2.w;\n                        r1.y=r1.y*r1.z+c3.x;\n                        r1.x=r1.y*r1.x;\n                        r1.y=r1.x*c4.x+c4.y;\n                        r0.w=r1.y*r0.w+r1.x;\n                        r1.x=v0.z>=0.0?(-c3.y):(-c3.w);\n                        r0.w=r0.w+r1.x;\n                        r1.x=r0.w+r0.w;\n                        r1.y=(-v0.z)+v0.w;\n                        {\n                            bvec2 tmp=greaterThanEqual(r1.yy,vec2(0.0));\n                            r1.yz=vec2(tmp.x?v0.z:v0.w,tmp.y?v0.w:v0.z);\n                        }\n                        {\n                            bvec2 tmp=greaterThanEqual(r1.yz,vec2(0.0));\n                            r1.yz=vec2(tmp.x?c3.y:c3.z,tmp.y?c3.z:c3.y);\n                        }\n                        r1.y=r1.z*r1.y;\n                        r0.w=r1.y*(-r1.x)+r0.w;\n                        r0.w=r0.w+c3.w;\n                        r0.w=r0.w*cb7[0].w;\n                        r0.w=r0.w*c4.z;\n                        \n                        r4.x=fract(r0.w);\n                        r4.y=v8.w*c4.w+c4.w;\n                        \n                        // DecalAlbedoMapSamplerBorder\n                        r1.xyz=clampToBorder(s4,r4.xy).xyz;\n                       \n                        // DecalTransparencyMapSamplerBorder\n                        r1.w=clampToBorder(s5,r4.xy).x;\n                        \n                        // DecalFresnelMapSamplerBorder\n                        r2=clampToBorder(s6,r4.xy);\n                        \n                        // DecalNormalMapSamplerBorder\n                        r3.xzw=clampToBorder(s7,r4.xy).xyz;\n                        r3.w = 1.0 - r3.w;\n\n                        // DecalRoughnessMapSamplerBorder\n                        r3.y=clampToBorder(s8,r4.xy).x;\n                        \n                        r4.xyz=r3.yyy*(-r2.xyz)+c3.zzz;\n                        r2.xyz=r2.xyz*r3.yyy;\n                        r3.xyz=(-r3.yxz)+c6.yxx;\n                        r0.w=dot(v4.xyz,v4.xyz);\n                        r0.w=r0.w==0.0?3.402823466e+38:inversesqrt(abs(r0.w));\n                        r5.xyz=v4.xyz*r0.www+cb2[12].xyz;\n                        r6.xyz=r0.www*v4.xyz;\n                        r7.xyz=normalize(r5.xyz);\n                        r0.w=clamp(dot(cb2[12].xyz,r7.xyz),0.0, 1.0);\n                        r0.w=(-r0.w)+c3.z;\n                        r2.w=r0.w*r0.w;\n                        r2.w=r2.w*r2.w;\n                        r0.w=r0.w*r2.w;\n                        r4.xyz=r4.xyz*r0.www+r2.xyz;\n                        r5.xyz=(-r4.xyz)+c3.zzz;\n                        r5.xyz=r1.xyz*r5.xyz;\n                        r3.x=saturate(r3.x);\n                        r3.yz=r3.zy*c4.zz+c4.ww;\n                        r3.yz=fract(r3.yz);\n                        r3.yz=r3.yz*c5.xx+c5.yy;\n                        r8.xy=(-r3.xx)+c7.yz;\n                        r0.w=min(r8.y,c3.z);\n                        r8.yzw=c8.yzw;\n                        r8=r8.xxxx*c9+r8.yyzw;\n                        r2.w=clamp(dot(r7.xyz,r6.xyz),0.0, 1.0);\n                        r2.w=r2.w*r2.w;\n                        r2.w=r2.w*r0.w+c7.w;\n                        r0.w=(-r0.w)+r2.w;\n                        r0.w=1.0/r0.w;\n                        r4.xyz=r0.www*r4.xyz;\n                        r0.w=r3.x*r3.x;\n                        r9.w=r3.x*c8.x;\n                        r2.w=r0.w*r0.w;\n                        r0.w=r0.w*r0.w+(-c3.z);\n                        r10.xy=vec2(cos(r3.z), sin(r3.z));\n                        r11.xy=vec2(cos(r3.y), sin(r3.y));\n                        r3.x=(-r10.x)+c3.z;\n                        r3.yzw=r3.xxx*v9.xxy;\n                        r3.yzw=r3.yzw*v9.zyz;\n                        r10.xzw=(-v9.yzx)*r10.yyy+r3.yzw;\n                        r3.yzw=v9.zyx*r10.yyy+r3.zyw;\n                        r12.y=r10.z;\n                        r12.z=r3.z;\n                        r13.xyz=v9.xyz*v9.xyz+(-c3.zzz);\n                        r13.xyz=r3.xxx*r13.xyz+c3.zzz;\n                        r12.x=r13.x;\n                        r3.x=(-r11.x)+c3.z;\n                        r11.xzw=r3.xxx*v8.xxy;\n                        r11.xzw=r11.xzw*v8.zyz;\n                        r14.xyz=(-v8.yzx)*r11.yyy+r11.xzw;\n                        r11.xyz=v8.zyx*r11.yyy+r11.zxw;\n                        r15.y=r14.y;\n                        r15.z=r11.y;\n                        r16.xyz=v8.xyz*v8.xyz+(-c3.zzz);\n                        r16.xyz=r3.xxx*r16.xyz+c3.zzz;\n                        r15.x=r16.x;\n                        \n                        // NormalMap \n                        r17.ywx=texture2D(s2,v0.xy).xyz; \n                        \n                        // AoMap\n                        r17.z=texture2D(s3,v0.xy).x;  \n                        \n                        r13.xw=r17.yw*c6.zz+c6.ww;\n                        r17.xyz=r13.www*v3.xyz;\n                        r17.xyz=r13.xxx*v2.xyz+r17.xyz;\n                        r3.x=saturate(dot(r13.xw,r13.xw)+c3.y);\n                        r3.x=(-r3.x)+c3.z;\n                        r3.x=sqrt(abs(r3.x));\n                        r17.xyz=r3.xxx*v1.xyz+r17.xyz;\n                        r18.xyz=normalize(r17.xyz);\n                        r15.x=dot(r18.xyz,r15.xyz);\n                        r14.y=r11.z;\n                        r11.z=r14.z;\n                        r11.y=r16.y;\n                        r14.z=r16.z;\n                        r15.z=dot(r18.xyz,r14.xyz);\n                        r15.y=dot(r18.xyz,r11.xyz);\n                        r11.x=dot(r15.xyz,r12.xyz);\n                        r10.z=r3.w;\n                        r3.w=r10.w;\n                        r3.z=r13.y;\n                        r10.w=r13.z;\n                        r11.z=dot(r15.xyz,r10.xzw);\n                        r11.y=dot(r15.xyz,r3.yzw);\n                        r3.x=clamp(dot(r11.xyz,r7.xyz),0.0, 1.0);\n                        r3.x=r3.x*r3.x;\n                        r0.w=r3.x*r0.w+c3.z;\n                        r0.w=r0.w*r0.w;\n                        r3.x=r0.w*c3.w;\n                        r0.w=r0.w*c1.z+c1.w;\n                        r3.x=1.0/r3.x;\n                        r0.w=r0.w>=0.0?r3.x:c7.x;\n                        r0.w=r0.w*r2.w;\n                        r3.xyz=r4.xyz*r0.www+r5.xyz;\n                        r0.w=clamp(dot(cb2[12].xyz,r11.xyz),0.0, 1.0);\n                        r3.xyz=r0.www*r3.xyz;\n                        r0.xyz=r0.xyz*r3.xyz;\n                        r3.xyz=max(r0.xyz,c3.yyy);\n                        r0.x=dot(r6.xyz,r11.xyz);\n                        r0.y=r0.x+r0.x;\n                        r0.x=saturate(r0.x);\n                        r0.x=r0.x*c10.x;\n                        r0.x=exp2(r0.x);\n                        r2.w=min(r0.x,r8.y);\n                        r0.x=r8.x*r2.w+r8.z;\n                        r4.xyz=saturate(mix(r0.xxx,r8.www,r2.xyz));\n                        r0.xyz=r11.xyz*(-r0.yyy)+r6.xyz;\n                        r9.x=dot((-r0.xyz),cb2[8].xyz);\n                        r9.y=dot((-r0.xyz),cb2[9].xyz);\n                        r9.z=dot((-r0.xyz),cb2[10].xyz);\n                        r0=textureCubeLod(s0,r9.xyz,r9.w);\n                        r0.xyz=r0.xyz*cb2[14].www;\n                        r11.w=c10.y;\n                        r2=textureCubeLod(s0,r11.xyz,r11.w);\n                        r0.w=cb2[14].w;\n                        r0.w=r0.w*c10.z;\n                        r2.xyz=r2.xyz*cb2[14].www+r0.www;\n                        r5.xyz=(-r4.xyz)+c3.zzz;\n                        r1.xyz=r1.xyz*r5.xyz;\n                        gl_FragData[0].w=r1.w;\n                        r1.xyz=r2.xyz*r1.xyz;\n                        r1.xyz=r1.xyz*c10.www;\n                        r0.xyz=r0.xyz*r4.xyz+r1.xyz;\n                        r1.xyz=max(r0.xyz,c3.yyy);\n                        r0.xyz=r1.xyz+r3.xyz;\n                        r0.w=cb2[15].w*v4.w;\n                        r0.w=r0.w*c11.x;\n                        r0.w=exp2(r0.w);\n                        r1.xyz=mix(cb2[15].xyz,r0.xyz,r0.www);\n                        r0.xyz=max(r1.xyz,c3.yyy);\n                        r1.x=r0.x>0.0?log2(r0.x):-3.402823466e+38;\n                        r1.y=r0.y>0.0?log2(r0.y):-3.402823466e+38;\n                        r1.z=r0.z>0.0?log2(r0.z):-3.402823466e+38;\n                        r0.xyz=r1.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c11.www;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c12.xxx+c12.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c11.yyy;\n                        r2.xyz=r2.xyz*c11.zzz;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n\n                        ").concat(o.ps.shadowFooter,"\n                    }\n                ")},states:(n={},l(n,i.RS_ZWRITEENABLE,0),l(n,i.RS_ALPHATESTENABLE,0),l(n,i.RS_SRCBLEND,i.BLEND_SRCALPHA),l(n,i.RS_DESTBLEND,i.BLEND_INVSRCALPHA),l(n,i.RS_ALPHABLENDENABLE,1),l(n,i.RS_BLENDOP,i.BLENDOP_ADD),n)}}}},"../shaders/decal/decalglowcylindricv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"decalGlowCylindricV5",(function(){return c}));var n,i=r("./global/constant/d3d.js"),o=r("../shaders/decal/shared/index.js"),a=r("../shaders/shared/func.js");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={name:"decalGlowCylindricV5",replaces:"graphics/effect.gles2/managed/space/decals/v5/decalGlowCylindricV5",description:"decal glow cylindric shader",techniques:{Main:{vs:o.vs.decal_PosTexTan,ps:{constants:[o.constant.DecalTextureScaling,o.constant.DecalTextureOffset,o.constant.DecalIntensityData,o.constant.DecalGlowColor],textures:[o.texture.DecalAlbedoMap_SamplerWrap,o.texture.DecalTransparencyMap_SamplerWrap],shader:"\n\n                    ".concat(a.precision,"\n                    ").concat(o.ps.shadowHeader,"\n\n                    varying vec4 texcoord;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord9;\n                    \n                    uniform sampler2D s0; // DecalAlbedoMapSamplerWrap\n                    uniform sampler2D s1; // DecalTransparencySampleWrap\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[4];\n                    uniform vec4 cb7[4];\n\n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r2;\n                        \n                        vec4 c4=vec4(0.0208350997,-0.0851330012,0.180141002,-0.330299497);\n                        vec4 c5=vec4(0.999866009,0,1,3.14159274);\n                        vec4 c6=vec4(-2,1.57079637,0.159154937,0.5);\n                        vec4 c7=vec4(6.28318548,-3.14159274,1,-1);\n                        vec4 c8=vec4(-1.44269507e-005,-0.00313080009,12.9200001,0.416666657);\n                        vec4 c9=vec4(1.05499995,-0.0549999997,0,0);\n                        \n                        v0=texcoord;\n                        v1=texcoord4;\n                        v2=texcoord5;\n                        v3=texcoord9;\n                        \n                        r0.xyz=(-cb4[2].xyz)+v2.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[2].w;\n                        r0=cb4[3].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        r0.xy=(-abs(v0.zw))+abs(v0.wz);\n                        {\n                            bvec2 tmp=greaterThanEqual(r0.xx,vec2(0.0));\n                            r0.xz=vec2(tmp.x?abs(v0.z):abs(v0.w),tmp.y?abs(v0.w):abs(v0.z));\n                        }\n                        r0.y=r0.y>=0.0?c5.y:c5.z;\n                        r0.z=1.0/r0.z;\n                        r0.x=r0.z*r0.x;\n                        r0.z=r0.x*r0.x;\n                        r0.w=r0.z*c4.x+c4.y;\n                        r0.w=r0.z*r0.w+c4.z;\n                        r0.w=r0.z*r0.w+c4.w;\n                        r0.z=r0.z*r0.w+c5.x;\n                        r0.x=r0.z*r0.x;\n                        r0.z=r0.x*c6.x+c6.y;\n                        r0.x=r0.z*r0.y+r0.x;\n                        r0.y=v0.z>=0.0?(-c5.y):(-c5.w);\n                        r0.x=r0.y+r0.x;\n                        r0.y=r0.x+r0.x;\n                        r0.z=(-v0.z)+v0.w;\n                        {\n                            bvec2 tmp=greaterThanEqual(r0.zz,vec2(0.0));\n                            r0.zw=vec2(tmp.x?v0.z:v0.w,tmp.y?v0.w:v0.z);\n                        }\n                        r0.w=r0.w>=0.0?c5.z:c5.y;\n                        r0.z=r0.z>=0.0?c5.y:r0.w;\n                        r0.x=r0.z*(-r0.y)+r0.x;\n                        r0.x=r0.x+c5.w;\n                        r0.x=r0.x*cb7[0].w;\n                        r0.x=r0.x*c6.z;\n                        r1.xyz=cb7[0].xyz;\n                        r2.x=cb2[21].x;\n                        r0.zw=r2.xx*r1.xy+cb7[1].xy;\n                        r0.zw=fract(r0.zw);\n                        r0.y=v3.w*c6.w+c6.w;\n                        r0.zw=(-r0.xy)+r0.zw;\n                        {\n                            bvec2 tmp=greaterThanEqual((-r1.xy),vec2(0.0));\n                            r2.xy=vec2(tmp.x?c5.y:c5.z,tmp.y?c5.y:c5.z);\n                        }\n                        {\n                            bvec2 tmp=greaterThanEqual(r1.xy,vec2(0.0));\n                            r1.xy=vec2(tmp.x?(-c5.y):(-c5.z),tmp.y?(-c5.y):(-c5.z));\n                        }\n                        r1.xy=r1.xy+r2.xy;\n                        r0.zw=r1.xy*r0.zw+r0.xy;\n                        \n                        // DecalAlbedoMapSamplerWrap\n                        r2.xyz=texture2D(s0, r0.xy).xyz;\n                       \n                        // DecalTransparencyMapSamplerWrap\n                        r2.w=texture2D(s1, r0.xy).x;\n                        \n                        r0.x=r2.w*cb7[2].x;\n                        r0.x=r0.x*cb4[1].y;\n                        r0.yz=r0.zw+(-c6.ww);\n                        r0.w=r1.z*cb2[21].x;\n                        r0.w=r0.w*c6.z+c6.w;\n                        r0.w=fract(r0.w);\n                        r0.w=r0.w*c7.x+c7.y;\n                        r1.xy=vec2(cos(r0.w), sin(r0.w));\n                        r1.zw=r1.xy*c7.zw;\n                        r1.y=dot(r1.yx,r0.yz)+c5.y;\n                        r1.x=dot(r1.zw,r0.yz)+c5.y;\n                        r0.yz=r1.xy+c6.ww;\n                                                \n                        // DecalAlbedoMapSamplerWrap\n                        r1.xyz=texture2D(s0, r0.yz).xyz;\n                       \n                        // DecalTransparencyMapSamplerWrap\n                        r1.w=texture2D(s1, r0.yz).x;\n                        \n                        r2.xyz=cb2[15].xyz;\n                        r0.yzw=cb7[3].xyz*r1.xyz+(-r2.xyz);\n                        r1.x=cb2[15].w*v1.w;\n                        r1.x=r1.x*c8.x;\n                        r1.x=exp2(r1.x);\n                        r0.yzw=r1.xxx*r0.yzw+cb2[15].xyz;\n                        r0.yzw=r0.yzw*cb4[1].yyy;\n                        r0.xyz=r0.xxx*r0.yzw;\n                        r1.xyz=max(r0.xyz,c5.yyy);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c8.www;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c9.xxx+c9.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c8.yyy;\n                        r2.xyz=r2.xyz*c8.zzz;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n                        gl_FragData[0].w=c5.y;\n                        \n                        ").concat(o.ps.shadowFooter,"\n                    }\n                ")},states:(n={},u(n,i.RS_ZWRITEENABLE,0),u(n,i.RS_ALPHATESTENABLE,0),u(n,i.RS_SRCBLEND,i.BLEND_ONE),u(n,i.RS_DESTBLEND,i.BLEND_ONE),u(n,i.RS_ALPHABLENDENABLE,1),u(n,i.RS_BLENDOP,i.BLENDOP_ADD),n)}}}},"../shaders/decal/decalglowv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"decalGlowV5",(function(){return c}));var n,i=r("./global/constant/d3d.js"),o=r("../shaders/decal/shared/index.js"),a=r("../shaders/shared/func.js");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={name:"decalGlowV5",replaces:"graphics/effect.gles2/managed/space/decals/v5/decalGlowV5",description:"decal glow shader",techniques:{Main:{vs:o.vs.decal_PosTexTan,ps:{constants:[o.constant.DecalTextureScaling,o.constant.DecalTextureOffset,o.constant.DecalIntensityData,o.constant.DecalGlowColor],textures:[o.texture.DecalGlowMap_SamplerBorder,o.texture.DecalTransparencyMap_SamplerBorder,o.texture.DecalGlowMap_SamplerWrap,o.texture.DecalTransparencyMap_SamplerWrap],shader:"\n                \n                    ".concat(a.precision,"\n                    ").concat(a.clampToBorder,"\n                    ").concat(o.ps.shadowHeader,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    \n                    uniform sampler2D s0; // DecalGlowMapSamplerBorder\n                    uniform sampler2D s1; // TransparencyMapSamplerBorder\n                    uniform sampler2D s2; // DecalGlowMapSamplerWrap\n                    uniform sampler2D s3; // TransparencyMapSamplerWrap\n                   \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[4];\n                    uniform vec4 cb7[4];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r2;\n                        \n                        vec4 c4=vec4(6.28318548,-3.14159274,1,-1);\n                        vec4 c5=vec4(1,0.5,0,0.159154937);\n                        vec4 c6=vec4(-1.44269507e-005,-0.00313080009,12.9200001,0.416666657);\n                        vec4 c7=vec4(1.05499995,-0.0549999997,0,0);\n                        \n                        v0=texcoord;\n                        v1=texcoord4;\n                        v2=texcoord5;\n                        \n                        r0.xyz=(-cb4[2].xyz)+v2.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[2].w;\n                        r0=cb4[3].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        r0.xz=c5.xz;\n                        {\n                            bvec2 tmp=greaterThanEqual((-cb7[0].xy),vec2(0.0));\n                            r0.yw=vec2(tmp.x?r0.z:r0.x,tmp.y?r0.z:r0.x);\n                        }\n                        {\n                            bvec2 tmp=greaterThanEqual(cb7[0].xy,vec2(0.0));\n                            r0.xz=vec2(tmp.x?(-r0.z):(-r0.x),tmp.y?(-r0.z):(-r0.x));\n                        }\n                        r0.xy=r0.xz+r0.yw;\n                        r1.xyz=cb7[0].xyz;\n                        r2.x=cb2[21].x;\n                        r0.zw=r2.xx*r1.xy+cb7[1].xy;\n                        r0.zw=fract(r0.zw);\n                        r1.xy=c5.xx+v0.zw;\n                        r0.zw=r1.xy*(-c5.yy)+r0.zw;\n                        r1.xy=r1.xy*c5.yy;\n                        r0.xy=r0.xy*r0.zw+r1.xy;\n                        \n                        // DecalGlowMapSamplerBorder\n                        r2.xyz=clampToBorder(s0,r1.xy).xxx;\n                        \n                        // TransparencyMapSamplerBorder\n                        r2.w=clampToBorder(s1,r1.xy).x;\n                        \n                        r0.z=r2.w*cb7[2].x;\n                        r0.z=r0.z*cb4[1].y;\n                        r0.z=r0.z*r0.z;\n                        r0.xy=r0.xy+(-c5.yy);\n                        \n                        // DecalTextureScaling.z * Current time\n                        r0.w=r1.z*cb2[21].x;        \n                        \n                        r0.w=r0.w*c5.w+c5.y;\n                        r0.w=fract(r0.w);\n                        r0.w=r0.w*c4.x+c4.y;\n                        r1.xy=vec2(cos(r0.w), sin(r0.w));\n                        r1.zw=r1.xy*c4.zw;\n                        r1.y=dot(r1.yx,r0.xy)+c5.z;\n                        r1.x=dot(r1.zw,r0.xy)+c5.z;\n                        r0.xy=r1.xy+c5.yy;\n                         \n                        // DecalGlowMapSamplerBorder\n                        r1.xyz=texture2D(s2,r0.xy).xxx;\n                        \n                        // TransparencyMapSamplerWrap\n                        r1.w=texture2D(s3,r0.xy).x;\n                        \n                        r2.xyz=cb2[15].xyz;\n                        r0.xyw=cb7[3].xyz*r1.xyz+(-r2.xyz);\n                        r1.x=cb2[15].w*v1.w;\n                        r1.x=r1.x*c6.x;\n                        r1.x=exp2(r1.x);\n                        r0.xyw=r1.xxx*r0.xyw+cb2[15].xyz;\n                        r0.xyw=r0.xyw*cb4[1].yyy;\n                        r0.xyz=r0.zzz*r0.xyw;\n                        r1.xyz=max(r0.xyz,c5.zzz);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c6.www;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c7.xxx+c7.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c6.yyy;\n                        r2.xyz=r2.xyz*c6.zzz;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n                        gl_FragData[0].w=c5.z;\n                        \n                        ").concat(o.ps.shadowFooter,"\n                    }\n                ")},states:(n={},u(n,i.RS_ZWRITEENABLE,0),u(n,i.RS_ALPHATESTENABLE,0),u(n,i.RS_SRCBLEND,i.BLEND_ONE),u(n,i.RS_DESTBLEND,i.BLEND_ONE),u(n,i.RS_ALPHABLENDENABLE,1),u(n,i.RS_BLENDOP,i.BLENDOP_ADD),n)}}}},"../shaders/decal/decalholev5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"decalHoleV5",(function(){return l}));var n,i=r("../shaders/decal/shared/index.js"),o=r("../shaders/shared/func.js"),a=r("../shaders/shared/input.js"),u=r("./global/constant/index.js");function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={name:"decalHoleV5",replaces:"graphics/effect.gles2/managed/space/decals/v5/decalHoleV5",description:"quad shader",todo:"Add dirt",techniques:{Main:{vs:{inputDefinitions:a.PosTexTan,shader:"\n                \n                    ".concat(i.vs.shadowHeader,"\n                    \n                    attribute vec4 attr0;\n                    attribute vec4 attr1;\n                    attribute vec4 attr2;\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    varying vec4 texcoord9;\n                    varying vec4 texcoord10;\n                    uniform vec4 cb1[29];\n                    uniform vec4 cb3[20];\n                    uniform vec3 ssyf;\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        \n                        vec4 c0=vec4(6.28318548,-3.14159274,0.159154937,0.5);\n                        vec4 c1=vec4(0,1,0,0);\n                        \n                        v0=attr0;\n                        v1=attr1;\n                        v2=attr2;\n                        \n                        r0=cb3[17];\n                        r1=r0*cb3[3].yyyy;\n                        r2=cb3[16];\n                        r1=r2*cb3[3].xxxx+r1;\n                        r3=cb3[18];\n                        r1=r3*cb3[3].zzzz+r1;\n                        r4=cb3[19];\n                        r1=r4*cb3[3].wwww+r1;\n                        r5=v0.xyzx*c1.yyyx+c1.xxxy;\n                        r1.w=dot(r5,r1);\n                        r6=r0*cb3[0].yyyy;\n                        r6=r2*cb3[0].xxxx+r6;\n                        r6=r3*cb3[0].zzzz+r6;\n                        r6=r4*cb3[0].wwww+r6;\n                        r1.x=dot(r5,r6);\n                        r7=r0*cb3[1].yyyy;\n                        r7=r2*cb3[1].xxxx+r7;\n                        r7=r3*cb3[1].zzzz+r7;\n                        r7=r4*cb3[1].wwww+r7;\n                        r1.y=dot(r5,r7);\n                        r0=r0*cb3[2].yyyy;\n                        r0=r2*cb3[2].xxxx+r0;\n                        r0=r3*cb3[2].zzzz+r0;\n                        r0=r4*cb3[2].wwww+r0;\n                        r1.z=dot(r5,r0);\n                        gl_Position.x=dot(r1,cb1[4]);\n                        gl_Position.y=dot(r1,cb1[5]);\n                        gl_Position.z=dot(r1,cb1[6]);\n                        gl_Position.w=dot(r1,cb1[7]);\n                        r2=v2*c0.xxxx+c0.yyyy;\n                        {bvec4 tmp=lessThan(c1.xxxx,r2.ywzw);r3.xy=(vec4(tmp.x?1.0:0.0,tmp.y?1.0:0.0,tmp.z?1.0:0.0,tmp.w?1.0:0.0)).xy;};\n                        r2=r2*c0.zzzz+c0.wwww;\n                        r2=fract(r2);\n                        r2=r2*c0.xxxx+c0.yyyy;\n                        r0.w=r3.y*r3.x;\n                        r3.xy=vec2(cos(r2.x), sin(r2.x));\n                        r4.xy=vec2(cos(r2.y), sin(r2.y));\n                        r3.xy=r3.xy*abs(r4.yy);\n                        r3.z=r4.x;\n                        r4.xy=vec2(cos(r2.z), sin(r2.z));\n                        r8.xy=vec2(cos(r2.w), sin(r2.w));\n                        r2.xy=r4.xy*abs(r8.yy);\n                        r2.z=r8.x;\n                        r4.xyz=r2.yzx*r3.zxy;\n                        r4.xyz=r3.yzx*r2.zxy+(-r4.xyz);\n                        r8.xyz=mix((-r4.xyz),r4.xyz,r0.www);\n                        texcoord1.x=dot(r8.xyz,r6.xyz);\n                        texcoord1.y=dot(r8.xyz,r7.xyz);\n                        texcoord1.z=dot(r8.xyz,r0.xyz);\n                        texcoord2.x=dot(r3.xyz,r6.xyz);\n                        texcoord3.x=dot(r2.xyz,r6.xyz);\n                        texcoord2.y=dot(r3.xyz,r7.xyz);\n                        texcoord3.y=dot(r2.xyz,r7.xyz);\n                        texcoord3.z=dot(r2.xyz,r0.xyz);\n                        texcoord2.z=dot(r3.xyz,r0.xyz);\n                        r0.xyz=(-r1.xyz)+cb1[3].xyz;\n                        r0.w=dot(r0.xyz,r0.xyz);\n                        r0.w=r0.w==0.0?3.402823466e+38:inversesqrt(abs(r0.w));\n                        texcoord4.xyz=r0.www*r0.xyz;\n                        r0.x=1.0/r0.w;\n                        texcoord7.x=dot(r1,cb1[16]);\n                        texcoord7.y=dot(r1,cb1[17]);\n                        texcoord7.z=dot(r1,cb1[18]);\n                        texcoord7.w=dot(r1,cb1[19]);\n                        texcoord8.x=dot(r1,cb1[20]);\n                        texcoord8.y=dot(r1,cb1[21]);\n                        texcoord8.z=dot(r1,cb1[22]);\n                        texcoord8.w=dot(r1,cb1[23]);\n                        texcoord9.x=dot(r5,cb3[12]);\n                        texcoord9.y=dot(r5,cb3[13]);\n                        texcoord9.z=dot(r5,cb3[14]);\n                        r1.xy=c1.xy;\n                        r1=cb1[3].xyzx*r1.yyyx+r1.xxxy;\n                        r2.x=dot(r1,cb3[4]);\n                        r2.y=dot(r1,cb3[5]);\n                        r2.z=dot(r1,cb3[6]);\n                        r2.w=dot(r1,cb3[7]);\n                        texcoord10.x=dot(r2,cb3[12]);\n                        texcoord10.y=dot(r2,cb3[13]);\n                        texcoord10.z=dot(r2,cb3[14]);\n                        r1.xyz=cb1[28].xyz;\n                        r2.x=dot(r1.xyz,cb3[4].xyz);\n                        r2.y=dot(r1.xyz,cb3[5].xyz);\n                        r2.z=dot(r1.xyz,cb3[6].xyz);\n                        r2.w=dot(r1.xyz,cb3[7].xyz);\n                        texcoord9.w=dot(r2,cb3[12]);\n                        texcoord10.w=dot(r2,cb3[13]);\n                        texcoord.w=dot(r2,cb3[14]);\n                        texcoord.xyz=v1.xyy;\n                        texcoord4.w=r0.x;\n                        texcoord5.w=r0.x;\n                        texcoord5.xyz=v0.xyz;\n                    \n                        ").concat(i.vs.shadowFooter,"\n                    }\n                ")},ps:{constants:[i.constant.DecalGlowColor],textures:[i.texture.DecalTransparencyMap_SamplerBorder,i.texture.DecalHoleMap,i.texture.DecalInsideCubeMap],shader:"\n\n                    ".concat(o.precision,"\n                    ").concat(o.clampToBorder,"\n                    ").concat(i.ps.shadowHeader,"\n                    \n                    varying vec4 texcoord5;\n                    varying vec4 texcoord9;\n                    varying vec4 texcoord10;\n                    \n                    uniform sampler2D s0;\n                    uniform sampler2D s1;\n                    uniform samplerCube s2;\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[4];\n                    uniform vec4 cb7[1];\n\n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r2;\n                        \n                        vec4 c1=vec4(1,0.5,0,-0.00313080009);\n                        vec4 c2=vec4(12.9200001,0.416666657,1.05499995,-0.0549999997);\n                        \n                        v0=texcoord5;\n                        v1=texcoord9;\n                        v2=texcoord10;\n                        \n                        r0.xyz=(-cb4[2].xyz)+v0.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[2].w;\n                        r0=cb4[3].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        r0.x=dot(v2.xyz,v2.xyz);\n                        r1.xyz=v2.xyz;\n                        r0.yzw=(-r1.xyz)+v1.xyz;\n                        r1.xyz=normalize(r0.yzw);\n                        r0.y=dot(r1.xyz,v2.xyz);\n                        r0.x=r0.y*r0.y+(-r0.x);\n                        r2=r0.xxxx+c1.xxxx;\n                        r0.x=sqrt(abs(r2.w));\n                        r0.x=r0.x+(-r0.y);\n                        r0.xyz=r0.xxx*r1.xyz+v2.xyz;\n                        r1.xyz=normalize(r0.xyz);\n                        r0=textureCube(s2,r1.xyz);\n                        if(any(lessThan(r2,vec4(0.0))))discard;\n                        r0.xy=c1.xx+v1.yz;\n                        r0.xy=r0.xy*c1.yy;\n                        r1=clampToBorder(s1,r0.xy);\n                        r2=clampToBorder(s0,r0.xy);\n                        gl_FragData[0].w=r2.w;\n                        r0.xyz=r1.xxx*cb7[0].xyz;\n                        r1.xyz=cb7[0].xyz*r0.www+(-r0.xyz);\n                        r0.xyz=r1.www*r1.xyz+r0.xyz;\n                        r1.xyz=max(r0.xyz,c1.zzz);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c2.yyy;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c2.zzz+c2.www;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c1.www;\n                        r2.xyz=r2.xyz*c2.xxx;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n\n                        ").concat(i.ps.shadowFooter,"\n                    }\n                ")},states:(n={},c(n,u.RS_ZWRITEENABLE,0),c(n,u.RS_ALPHATESTENABLE,0),c(n,u.RS_SRCBLEND,u.BLEND_SRCALPHA),c(n,u.RS_DESTBLEND,u.BLEND_INVSRCALPHA),c(n,u.RS_ALPHABLENDENABLE,1),c(n,u.RS_BLENDOP,u.BLENDOP_ADD),n)}}}},"../shaders/decal/decalv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"decalV5",(function(){return s}));var n,i=r("../shaders/decal/shared/index.js"),o=r("../shaders/shared/func.js"),a=r("../shaders/shared/texture.js"),u=r("../shaders/quad/shared/texture.js"),c=r("./global/constant/d3d.js");function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={name:"decalV5",replaces:"graphics/effect.gles2/managed/space/decals/v5/decalV5",description:"decal shader",techniques:{Main:{vs:i.vs.decal_PosTexTan,ps:{textures:[a.EveSpaceSceneEnvMap,a.EveSpaceSceneShadowMap,u.NormalMap,u.AoMap,i.texture.DecalAlbedoMap_SamplerBorder,i.texture.DecalTransparencyMap_SamplerBorder,i.texture.DecalFresnelMap_SamplerBorder,i.texture.DecalNormalMap_SamplerBorder,i.texture.DecalRoughnessMap_SamplerBorder],shader:"\n                \n                    ".concat(i.ps.header,"\n                    ").concat(o.clampToBorder,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    varying vec4 texcoord9;\n                    varying vec4 texcoord10;\n                    \n                    uniform samplerCube s0;          // EveSpaceSceneEnvMap\n                    uniform sampler2D s1;            // EveSpaceSceneShadowMap\n                    uniform sampler2D s2;            // Normal map\n                    uniform sampler2D s3;            // Ambient Occlusion map\n                    uniform sampler2D s4;            // DecalAlbedoMap\n                    uniform sampler2D s5;            // DecalTransparencyMap\n                    uniform sampler2D s6;            // DecalFresnelMap\n                    uniform sampler2D s7;            // DecalNormalMap\n                    uniform sampler2D s8;            // DecalRoughnessMap\n                   \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[4];\n                   \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 v8;\n                        vec4 v9;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        \n                        vec4 c0=vec4(9.99999997e-007,0.666666687,3.14159274,-1e-015);\n                        vec4 c1=vec4(6.28318548,-3.14159274,1,0);\n                        vec4 c2=vec4(1,0.5,2,-1);\n                        vec4 c3=vec4(0,0.159154937,0.5,-0.5);\n                        vec4 c4=vec4(9.99999987e+014,1,1.54499996,1.10000002);\n                        vec4 c5=vec4(6,0,-0.015625,0.75);\n                        vec4 c6=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c7=vec4(-9.27999973,7,0.119999997,0.318309873);\n                        vec4 c8=vec4(-1.44269507e-005,-0.00313080009,12.9200001,0.416666657);\n                        vec4 c9=vec4(1.05499995,-0.0549999997,0,0);\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord7;\n                        v7=texcoord8;\n                        v8=texcoord9;\n                        v9=texcoord10;\n                        \n                        r0.xyz=(-cb4[2].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[2].w;\n                        r0=cb4[3].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        r0.x=(-cb2[19].x)+cb2[19].y;\n                        r0.x=1.0/r0.x;\n                        r0.y=(-cb2[19].x)+v6.z;\n                        r0.x=r0.x*r0.y;\n                        r0.x=sqrt(abs(r0.x));\n                        r0.y=1.0/v7.w;\n                        r0.yz=r0.yy*v7.xy;\n                        r0.yz=r0.yz*c3.zw+c3.zz;\n                        r1.xy=c2.xy;\n                        r0.yz=cb2[18].xy*r1.yy+r0.yz;\n                        r2=texture2D(s1,r0.yz);\n                        r0.y=r0.x+(-r2.x);\n                        r0.z=r2.x*(-r2.x)+r2.y;\n                        r0.w=r2.x+cb2[18].z;\n                        r0.x=(-r0.x)+r0.w;\n                        r0.x=r0.x>=0.0?c1.z:c1.w;\n                        r1.y=max(r0.z,c0.x);\n                        r0.y=r0.y*r0.y+r1.y;\n                        r0.y=1.0/r0.y;\n                        r0.y=r0.y*r1.y;\n                        r1.y=saturate(max(r0.x,r0.y));\n                        r0.x=r1.y+(-cb2[18].w);\n                        r0.y=r1.x+(-cb2[18].w);\n                        r0.y=1.0/r0.y;\n                        r0.x=saturate(r0.y*r0.x);\n                        r0.x=(-cb2[19].x)>=0.0?r0.x:r1.x;\n                        r1.x=max(cb2[19].z,r0.x);\n                        r0.x=r1.x*r1.x;\n                        r0.xyz=r0.xxx*cb2[13].xyz;\n                        r0.xyz=r0.xyz*c0.yyy;\n                        \n                        // NormalMap\n                        r1.ywx=texture2D(s2,v0.xy).xyz;\n                         \n                        // AoMap\n                        r1.z=texture2D(s3,v0.xy).x;\n                        \n                        r1.xy=r1.yw*c2.zz+c2.ww;\n                        r2.xyz=r1.yyy*v3.xyz;\n                        r2.xyz=r1.xxx*v2.xyz+r2.xyz;\n                        r0.w=saturate(dot(r1.xy,r1.xy)+c3.x);\n                        r0.w=(-r0.w)+c2.x;\n                        r0.w=sqrt(abs(r0.w));\n                        r1.xyz=r0.www*v1.xyz+r2.xyz;\n                        r2.xyz=normalize(r1.xyz);\n                        r1.xy=c2.xx+v0.zw;\n                        r1.xy=r1.xy*c2.yy;\n                        \n                        // DecalNormalMap\n                        r3.xzw=clampToBorder(s7,r1.xy).xyz;\n                        r3.w = 1.0 - r3.w;\n                        \n                        // DecalRoughnessMap\n                        r3.y=clampToBorder(s8, r1.xy).x;\n                        \n                        r3.xzw=(-r3.yxz)+c2.xyy;\n                        r1.zw=r3.wz*c3.yy+c3.zz;\n                        r3.x=saturate(r3.x);\n                        r1.zw=fract(r1.zw);\n                        r1.zw=r1.zw*c1.xx+c1.yy;\n                        r4.xy=vec2(cos(r1.z), sin(r1.z));\n                        r5.xy=vec2(cos(r1.w), sin(r1.w));\n                        r0.w=(-r4.x)+c2.x;\n                        r4.xzw=r0.www*v8.xxy;\n                        r4.xzw=r4.xzw*v8.zyz;\n                        r6.xyz=(-v8.yzx)*r4.yyy+r4.xzw;\n                        r4.xyz=v8.zyx*r4.yyy+r4.zxw;\n                        r7.y=r6.y;\n                        r7.z=r4.y;\n                        r8.xyz=v8.xyz*v8.xyz+c2.www;\n                        r8.xyz=r0.www*r8.xyz+c2.xxx;\n                        r7.x=r8.x;\n                        r7.x=dot(r2.xyz,r7.xyz);\n                        r6.y=r4.z;\n                        r4.z=r6.z;\n                        r4.y=r8.y;\n                        r6.z=r8.z;\n                        r7.z=dot(r2.xyz,r6.xyz);\n                        r7.y=dot(r2.xyz,r4.xyz);\n                        r0.w=(-r5.x)+c2.x;\n                        r2.xyz=r0.www*v9.xxy;\n                        r2.xyz=r2.xyz*v9.zyz;\n                        r4.xyz=(-v9.yzx)*r5.yyy+r2.xyz;\n                        r2.xyz=v9.zyx*r5.yyy+r2.yxz;\n                        r5.y=r4.y;\n                        r5.z=r2.y;\n                        r6.xyz=v9.xyz*v9.xyz+c2.www;\n                        r6.xyz=r0.www*r6.xyz+c2.xxx;\n                        r5.x=r6.x;\n                        r5.x=dot(r7.xyz,r5.xyz);\n                        r4.y=r2.z;\n                        r2.z=r4.z;\n                        r2.y=r6.y;\n                        r4.z=r6.z;\n                        r5.z=dot(r7.xyz,r4.xyz);\n                        r5.y=dot(r7.xyz,r2.xyz);\n                        r0.w=dot(v4.xyz,v4.xyz);\n                        r0.w=r0.w==0.0?3.402823466e+38:inversesqrt(abs(r0.w));\n                        r2.xyz=v4.xyz*r0.www+cb2[12].xyz;\n                        r4.xyz=r0.www*v4.xyz;\n                        r6.xyz=normalize(r2.xyz);\n                        r0.w=clamp(dot(r5.xyz,r6.xyz),0.0, 1.0);\n                        r0.w=r0.w*r0.w;\n                        r1.z=r3.x*r3.x;\n                        r1.w=r1.z*r1.z+c2.w;\n                        r1.z=r1.z*r1.z;\n                        r0.w=r0.w*r1.w+c2.x;\n                        r0.w=r0.w*r0.w;\n                        r1.w=r0.w*(-c1.y);\n                        r0.w=r0.w*c0.z+c0.w;\n                        r1.w=1.0/r1.w;\n                        r0.w=r0.w>=0.0?r1.w:c4.x;\n                        r0.w=r0.w*r1.z;\n                        r1.z=clamp(dot(cb2[12].xyz,r6.xyz),0.0, 1.0);\n                        r1.w=clamp(dot(r6.xyz,r4.xyz),0.0, 1.0);\n                        r1.w=r1.w*r1.w;\n                        r1.z=(-r1.z)+c2.x;\n                        r2.x=r1.z*r1.z;\n                        r2.x=r2.x*r2.x;\n                        r1.z=r1.z*r2.x;\n                        \n                        // DecalFresnelMap\n                        r2=clampToBorder(s6,r1.xy);\n                        \n                        // DecalAlbedoMap\n                        r6.xyz=clampToBorder(s4,r1.xy).xyz;\n                        \n                        // DecalTransparencyMap\n                        r6.w = clampToBorder(s5,r1.xy).x;\n                        \n                        r7.xyz=r3.yyy*(-r2.xyz)+c2.xxx;\n                        r2.xyz=r2.xyz*r3.yyy;\n                        r1.xyz=r7.xyz*r1.zzz+r2.xyz;\n                        r3.yz=(-r3.xx)+c4.yz;\n                        r7.w=r3.x*c5.x;\n                        r2.w=min(r3.z,c2.x);\n                        r8.yzw=c5.yzw;\n                        r3=r3.yyyy*c6+r8.yyzw;\n                        r1.w=r1.w*r2.w+c4.w;\n                        r1.w=(-r2.w)+r1.w;\n                        r1.w=1.0/r1.w;\n                        r8.xyz=r1.www*r1.xyz;\n                        r1.xyz=(-r1.xyz)+c2.xxx;\n                        r1.xyz=r1.xyz*r6.xyz;\n                        r1.xyz=r8.xyz*r0.www+r1.xyz;\n                        r0.w=clamp(dot(cb2[12].xyz,r5.xyz),0.0, 1.0);\n                        r1.xyz=r0.www*r1.xyz;\n                        r0.xyz=r0.xyz*r1.xyz;\n                        r1.xyz=max(r0.xyz,c3.xxx);\n                        r0.x=dot(r4.xyz,r5.xyz);\n                        r0.y=r0.x+r0.x;\n                        r0.x=saturate(r0.x);\n                        r0.x=r0.x*c7.x;\n                        r0.x=exp2(r0.x);\n                        r1.w=min(r0.x,r3.y);\n                        r0.x=r3.x*r1.w+r3.z;\n                        r8.xyz=saturate(mix(r0.xxx,r3.www,r2.xyz));\n                        r0.xyz=r5.xyz*(-r0.yyy)+r4.xyz;\n                        r7.x=dot((-r0.xyz),cb2[8].xyz);\n                        r7.y=dot((-r0.xyz),cb2[9].xyz);\n                        r7.z=dot((-r0.xyz),cb2[10].xyz);\n                        r0=textureCubeLod(s0,r7.xyz,r7.w);\n                        r0.xyz=r0.xyz*cb2[14].www;\n                        r5.w=c7.y;\n                        r2=textureCubeLod(s0,r5.xyz,r5.w);\n                        r0.w=cb2[14].w;\n                        r0.w=r0.w*c7.z;\n                        r2.xyz=r2.xyz*cb2[14].www+r0.www;\n                        r3.xyz=(-r8.xyz)+c2.xxx;\n                        r3.xyz=r3.xyz*r6.xyz;\n                        gl_FragData[0].w=r6.w;\n                        r2.xyz=r2.xyz*r3.xyz;\n                        r2.xyz=r2.xyz*c7.www;\n                        r0.xyz=r0.xyz*r8.xyz+r2.xyz;\n                        r2.xyz=max(r0.xyz,c3.xxx);\n                        r0.xyz=r1.xyz+r2.xyz;\n                        r0.w=cb2[15].w*v4.w;\n                        r0.w=r0.w*c8.x;\n                        r0.w=exp2(r0.w);\n                        r1.xyz=mix(cb2[15].xyz,r0.xyz,r0.www);\n                        r0.xyz=max(r1.xyz,c3.xxx);\n                        r1.x=r0.x>0.0?log2(r0.x):-3.402823466e+38;\n                        r1.y=r0.y>0.0?log2(r0.y):-3.402823466e+38;\n                        r1.z=r0.z>0.0?log2(r0.z):-3.402823466e+38;\n                        r0.xyz=r1.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c8.www;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c9.xxx+c9.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c8.yyy;\n                        r2.xyz=r2.xyz*c8.zzz;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n                        \n                        ").concat(i.ps.shadowFooter,"\n                    }\n                    ")},states:(n={},l(n,c.RS_ZWRITEENABLE,0),l(n,c.RS_ALPHABLENDENABLE,0),l(n,c.RS_SRCBLEND,c.BLEND_SRCALPHA),l(n,c.RS_DESTBLEND,c.BLEND_INVSRCALPHA),l(n,c.RS_ALPHABLENDENABLE,1),l(n,c.RS_BLENDOP,c.BLENDOP_ADD),n)}}}},"../shaders/decal/index.js":function(e,t,r){"use strict";r.r(t);var n=r("../shaders/decal/decalcounterv5.js");r.d(t,"decalcounterv5",(function(){return n.decalcounterv5}));var i=r("../shaders/decal/decalcylindricv5.js");r.d(t,"decalCylindricV5",(function(){return i.decalCylindricV5}));var o=r("../shaders/decal/decalglowcylindricv5.js");r.d(t,"decalGlowCylindricV5",(function(){return o.decalGlowCylindricV5}));var a=r("../shaders/decal/decalglowv5.js");r.d(t,"decalGlowV5",(function(){return a.decalGlowV5}));var u=r("../shaders/decal/decalholev5.js");r.d(t,"decalHoleV5",(function(){return u.decalHoleV5}));var c=r("../shaders/decal/decalv5.js");r.d(t,"decalV5",(function(){return c.decalV5}))},"../shaders/decal/shared/constant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DecalClampToBorder",(function(){return i})),r.d(t,"DecalTextureOffset",(function(){return o})),r.d(t,"DecalTextureScaling",(function(){return a})),r.d(t,"DecalGlowColor",(function(){return u})),r.d(t,"DecalIntensityData",(function(){return c}));var n=r("../shaders/shared/util.js"),i={name:"DecalClampToBorder",value:[0,0,0,0],ui:{group:"Decal",description:"Overrides address modes to clamp to border",components:["u","v","w"],widget:n.WidgetType.MIXED}},o={name:"DecalTextureOffset",value:[0,0,0,0],ui:{group:"Decal",description:"Decal options",components:["u offset","v offset"],widget:n.WidgetType.MIXED,display:!0}},a={name:"DecalTextureScaling",value:[1,1,0,1],ui:{group:"Decal",components:["u scale","v scale","uv angular rotation speed","circular stretch"],widget:n.WidgetType.MIXED,display:!0}},u=Object(n.createLinearColor)({name:"DecalGlowColor",ui:{group:"Decal",description:"glow color"}}),c={name:"DecalIntensityData",value:[1,0,0,0],ui:{group:"Decal",description:"glow intensity",components:["decalGlowIntensity"],widget:n.WidgetType.MIXED,display:!0}}},"../shaders/decal/shared/index.js":function(e,t,r){"use strict";r.r(t);var n=r("../shaders/decal/shared/constant.js");r.d(t,"constant",(function(){return n}));var i=r("../shaders/decal/shared/texture.js");r.d(t,"texture",(function(){return i}));var o=r("../shaders/decal/shared/ps.js");r.d(t,"ps",(function(){return o}));var a=r("../shaders/decal/shared/vs.js");r.d(t,"vs",(function(){return a}))},"../shaders/decal/shared/ps.js":function(e,t,r){"use strict";r.r(t);var n=r("../shaders/shared/ps.js");r.d(t,"shadowHeader",(function(){return n.shadowHeader})),r.d(t,"shadowFooter",(function(){return n.shadowFooter}));var i=r("../shaders/quad/shared/ps.js");r.d(t,"header",(function(){return i.header}))},"../shaders/decal/shared/texture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DecalHoleMap",(function(){return S})),r.d(t,"DecalInsideCubeMap",(function(){return j})),r.d(t,"DecalAlbedoMap_SamplerBorder",(function(){return u})),r.d(t,"DecalAlbedoMap_SamplerWrap",(function(){return c})),r.d(t,"DecalTransparencyMap_SamplerBorder",(function(){return s})),r.d(t,"DecalTransparencyMap_SamplerWrap",(function(){return f})),r.d(t,"DecalFresnelMap_SamplerBorder",(function(){return d})),r.d(t,"DecalFresnelMap_SamplerWrap",(function(){return y})),r.d(t,"DecalNormalMap_SamplerBorder",(function(){return b})),r.d(t,"DecalNormalMap_SamplerWrap",(function(){return h})),r.d(t,"DecalRoughnessMap_SamplerBorder",(function(){return g})),r.d(t,"DecalRoughnessMap_SamplerWrap",(function(){return w})),r.d(t,"DecalGlowMap_SamplerBorder",(function(){return _})),r.d(t,"DecalGlowMap_SamplerWrap",(function(){return z}));var n=r("../shaders/shared/util.js");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=i(Object(n.createBorderAndWrap)("DecalAlbedoMap",n.TEX_2D,{isSRGB:1,ui:{suffix:"_a",components:["red","green","blue"]}}),2),u=a[0],c=a[1],l=i(Object(n.createBorderAndWrap)("DecalTransparencyMap",n.TEX_2D,{ui:{suffix:"_t",components:["transparency mask"]}}),2),s=l[0],f=l[1],p=i(Object(n.createBorderAndWrap)("DecalFresnelMap",n.TEX_2D,{isSRGB:1,ui:{suffix:"_f",components:["red","green","blue"]}}),2),d=p[0],y=p[1],m=i(Object(n.createBorderAndWrap)("DecalNormalMap",n.TEX_2D,{ui:{suffix:"_n",components:["normal x","normal y"]}}),2),b=m[0],h=m[1],v=i(Object(n.createBorderAndWrap)("DecalRoughnessMap",n.TEX_2D,{ui:{suffix:"_r",components:["roughness mask"]}}),2),g=v[0],w=v[1],x=i(Object(n.createBorderAndWrap)("DecalGlowMap",n.TEX_2D,{ui:{suffix:"_g",components:["glow mask"]}}),2),_=x[0],z=x[1],S=Object(n.createTex)("DecalHoleMap",n.TEX_2D,{sampler:{addressUMode:n.WrapMode.CLAMP_TO_EDGE,addressVMode:n.WrapMode.CLAMP_TO_EDGE}}),j=Object(n.createTex)("DecalInsideCubeMap",n.TEX_CUBE_MAP,{sampler:{addressUMode:n.WrapMode.CLAMP_TO_EDGE,addressVMode:n.WrapMode.CLAMP_TO_EDGE}})},"../shaders/decal/shared/vs.js":function(e,t,r){"use strict";r.r(t),r.d(t,"decal_PosTexTan",(function(){return i}));var n=r("../shaders/quad/shared/vs.js");r.d(t,"shadowHeader",(function(){return n.shadowHeader})),r.d(t,"shadowFooter",(function(){return n.shadowFooter}));var i={inputDefinitions:r("../shaders/shared/input.js").PosTexTan,shader:"\n    \n        ".concat(n.shadowHeader,"\n        \n        attribute vec4 attr0;\n        attribute vec4 attr1;\n        attribute vec4 attr2;\n        \n        varying vec4 texcoord;\n        varying vec4 texcoord1;\n        varying vec4 texcoord2;\n        varying vec4 texcoord3;\n        varying vec4 texcoord4;\n        varying vec4 texcoord5;\n        varying vec4 texcoord7;\n        varying vec4 texcoord8;\n        varying vec4 texcoord9;\n        varying vec4 texcoord10;\n        \n        uniform vec4 cb1[24];\n        uniform vec4 cb3[20];\n        uniform vec3 ssyf;\n        \n        void main()\n        {\n            vec4 v0;\n            vec4 v1;\n            vec4 v2;\n            vec4 r0;\n            vec4 r1;\n            vec4 r2;\n            vec4 r3;\n            vec4 r4;\n            vec4 r5;\n            vec4 r6;\n            vec4 r7;\n            vec4 r8;\n            \n            vec4 c0=vec4(6.28318548,-3.14159274,0.159154937,0.5);\n            vec4 c1=vec4(0,1,0,0);\n            \n            v0=attr0;\n            v1=attr1;\n            v2=attr2;\n            \n            r0=cb3[17];\n            r1=r0*cb3[3].yyyy;\n            r2=cb3[16];\n            r1=r2*cb3[3].xxxx+r1;\n            r3=cb3[18];\n            r1=r3*cb3[3].zzzz+r1;\n            r4=cb3[19];\n            r1=r4*cb3[3].wwww+r1;\n            r5=v0.xyzx*c1.yyyx+c1.xxxy;\n            r1.w=dot(r5,r1);\n            r6=r0*cb3[0].yyyy;\n            r6=r2*cb3[0].xxxx+r6;\n            r6=r3*cb3[0].zzzz+r6;\n            r6=r4*cb3[0].wwww+r6;\n            r1.x=dot(r5,r6);\n            r7=r0*cb3[1].yyyy;\n            r7=r2*cb3[1].xxxx+r7;\n            r7=r3*cb3[1].zzzz+r7;\n            r7=r4*cb3[1].wwww+r7;\n            r1.y=dot(r5,r7);\n            r0=r0*cb3[2].yyyy;\n            r0=r2*cb3[2].xxxx+r0;\n            r0=r3*cb3[2].zzzz+r0;\n            r0=r4*cb3[2].wwww+r0;\n            r1.z=dot(r5,r0);\n            gl_Position.x=dot(r1,cb1[4]);\n            gl_Position.y=dot(r1,cb1[5]);\n            gl_Position.z=dot(r1,cb1[6]);\n            gl_Position.w=dot(r1,cb1[7]);\n            r2=v2*c0.xxxx+c0.yyyy;\n            {\n                bvec4 tmp=lessThan(c1.xxxx,r2.ywzw);\n                r3.xy=(vec4(tmp.x?1.0:0.0,tmp.y?1.0:0.0,tmp.z?1.0:0.0,tmp.w?1.0:0.0)).xy;\n            }\n            r2=r2*c0.zzzz+c0.wwww;\n            r2=fract(r2);\n            r2=r2*c0.xxxx+c0.yyyy;\n            r0.w=r3.y*r3.x;\n            r3.xy=vec2(cos(r2.x), sin(r2.x));\n            r4.xy=vec2(cos(r2.y), sin(r2.y));\n            r3.xy=r3.xy*abs(r4.yy);\n            r3.z=r4.x;\n            r4.xy=vec2(cos(r2.z), sin(r2.z));\n            r8.xy=vec2(cos(r2.w), sin(r2.w));\n            r2.xy=r4.xy*abs(r8.yy);\n            r2.z=r8.x;\n            r4.xyz=r2.yzx*r3.zxy;\n            r4.xyz=r3.yzx*r2.zxy+(-r4.xyz);\n            r8.xyz=mix((-r4.xyz),r4.xyz,r0.www);\n            texcoord1.x=dot(r8.xyz,r6.xyz);\n            texcoord1.y=dot(r8.xyz,r7.xyz);\n            texcoord1.z=dot(r8.xyz,r0.xyz);\n            texcoord2.x=dot(r3.xyz,r6.xyz);\n            texcoord3.x=dot(r2.xyz,r6.xyz);\n            texcoord2.y=dot(r3.xyz,r7.xyz);\n            texcoord3.y=dot(r2.xyz,r7.xyz);\n            texcoord3.z=dot(r2.xyz,r0.xyz);\n            texcoord2.z=dot(r3.xyz,r0.xyz);\n            r0.xyz=(-r1.xyz)+cb1[3].xyz;\n            r0.w=dot(r0.xyz,r0.xyz);\n            r0.w=r0.w==0.0?3.402823466e+38:inversesqrt(abs(r0.w));\n            texcoord4.xyz=r0.www*r0.xyz;\n            r0.x=1.0/r0.w;\n            texcoord7.x=dot(r1,cb1[16]);\n            texcoord7.y=dot(r1,cb1[17]);\n            texcoord7.z=dot(r1,cb1[18]);\n            texcoord7.w=dot(r1,cb1[19]);\n            texcoord8.x=dot(r1,cb1[20]);\n            texcoord8.y=dot(r1,cb1[21]);\n            texcoord8.z=dot(r1,cb1[22]);\n            texcoord8.w=dot(r1,cb1[23]);\n            texcoord9.w=dot(r5,cb3[12]);\n            texcoord.z=dot(r5,cb3[13]);\n            texcoord.w=dot(r5,cb3[14]);\n            r1.x=cb3[8].y;\n            r1.y=cb3[9].y;\n            r1.z=cb3[10].y;\n            r1.w=cb3[11].y;\n            r2.x=dot(r1,cb3[16]);\n            r2.y=dot(r1,cb3[17]);\n            r2.z=dot(r1,cb3[18]);\n            r2.w=dot(r1,cb3[19]);\n            r1.x=dot(r2,cb3[0]);\n            r1.y=dot(r2,cb3[1]);\n            r1.z=dot(r2,cb3[2]);\n            r0.y=dot(r1.xyz,r1.xyz);\n            r0.y=r0.y==0.0?3.402823466e+38:inversesqrt(abs(r0.y));\n            texcoord9.xyz=r0.yyy*r1.xyz;\n            r1.x=cb3[8].z;\n            r1.y=cb3[9].z;\n            r1.z=cb3[10].z;\n            r1.w=cb3[11].z;\n            r2.x=dot(r1,cb3[16]);\n            r2.y=dot(r1,cb3[17]);\n            r2.z=dot(r1,cb3[18]);\n            r2.w=dot(r1,cb3[19]);\n            r1.x=dot(r2,cb3[0]);\n            r1.y=dot(r2,cb3[1]);\n            r1.z=dot(r2,cb3[2]);\n            r0.y=dot(r1.xyz,r1.xyz);\n            r0.y=r0.y==0.0?3.402823466e+38:inversesqrt(abs(r0.y));\n            texcoord10.xyz=r0.yyy*r1.xyz;\n            texcoord.xy=v1.xy;\n            texcoord4.w=r0.x;\n            texcoord5.w=r0.x;\n            texcoord5.xyz=v0.xyz;\n            texcoord10.w=c1.x;\n            \n            ").concat(n.shadowFooter,"\n        }\n    ")}},"../shaders/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"shaders",(function(){return s})),r.d(t,"getOverriddenShaderPath",(function(){return d}));var n=r("./core/index.js"),i=r("../shaders/decal/index.js"),o=r("../shaders/quad/index.js"),a=r("../shaders/organic/index.js"),u=r("../shaders/specialFx/index.js"),c=r("../shaders/postProcess/index.js"),l=r("./global/index.js"),s=[];function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/^\s*$(?:\r\n?|\n)/gm,"").replace(/ +(?= )/g,"")}function p(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t],n=r.name,i=r.replaces,o=r.description,a=void 0===o?"":o,u=r.techniques,c=void 0===u?{}:u;for(var l in n=i?i.toLowerCase():n.toLowerCase(),c)if(c.hasOwnProperty(l)){var p={name:l,passes:null},d=c[l];p.passes="passes"in d?d.passes:Array.isArray(d)?d:[d];for(var y=0;y<p.passes.length;y++){var m=p.passes[y],b=m.vs||m.vertex||null,h=m.ps||m.fragment||null;b&&b.shader&&(b.shader=f(b.shader)),h&&h.shader&&(h.shader=f(h.shader))}c[l]=p}var v={name:n,description:a,techniques:c};s.push(v)}}function d(e){if(!e)return"";var t=e.substring(e.lastIndexOf("."));switch(t){case".sm_json":if(0===e.indexOf("manual:/")){var r=s.find((function(r){return r.name===e.split(":/")[1].replace(t,"").toLowerCase()}));r&&!l.tw2.resMan.motherLode.Has(e)&&n.Tw2EffectRes.fromJSON(r)}break;case".fx":case".sm_hi":case".sm_lo":var i=e.split(":/")[1].replace(t,"").replace("/effect/","/effect.gles2/").toLowerCase(),o=s.find((function(e){return e.name===i}));if(o){var a="manual:/".concat(i,".sm_json");return l.tw2.Debug({name:"Shader override",message:"Replaced '".concat(e,"' with '").concat(a,"'")}),l.tw2.resMan.motherLode.Has(a)||n.Tw2EffectRes.fromJSON(o),a}}return e}p(i),p(o),p(a),p(u),p(c)},"../shaders/organic/asteroidV5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"asteroidV5",(function(){return u})),r.d(t,"skinnedAsteroidV5",(function(){return c}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/quad/index.js"),o=r("../shaders/shared/texture.js"),a=r("../shaders/shared/util.js"),u={name:"asteroidV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/organic/asteroidV5",description:"asteroid shader",techniques:{Depth:i.quadDepthV5.techniques.Main,Picking:i.quadPickingV5.techniques.Main,Main:{vs:n.vs.quadV5_PosTexTanTex,ps:{constants:[n.constant.GeneralData,n.constant.GeneralGlowColor,n.constant.Mtl1DiffuseColor,n.constant.Mtl2DiffuseColor,n.constant.Mtl3DiffuseColor,n.constant.Mtl4DiffuseColor,n.constant.Mtl1FresnelColor,n.constant.Mtl2FresnelColor,n.constant.Mtl3FresnelColor,n.constant.Mtl4FresnelColor,n.constant.Mtl1Gloss,n.constant.Mtl2Gloss,n.constant.Mtl3Gloss,n.constant.Mtl4Gloss,Object(a.overrideConstant)(n.constant.Detail1Data,{value:[1,1,0,0],ui:{group:"Detail 1"}}),Object(a.overrideConstant)(n.constant.DetailAlbedoColor,{value:[0,0,0,0],ui:{group:"Detail 1"}}),Object(a.overrideConstant)(n.constant.DetailFresnelColor,{value:[0,0,0,0],ui:{group:"Detail 1"}}),Object(a.overrideConstant)(n.constant.DetailSelector,{value:[1,1,1,1]})],textures:[o.EveSpaceSceneEnvMap,o.EveSpaceSceneShadowMap,n.texture.AlbedoMap,n.texture.RoughnessMap,n.texture.NormalMap,n.texture.AoMap,n.texture.PaintMaskMap,n.texture.MaterialMap,n.texture.DirtMap,n.texture.GlowMap,n.texture.Detail1Map],shader:"\n                \n                    ".concat(n.ps.header,"\n                \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    \n                    uniform samplerCube s0; \n                    uniform sampler2D s1;\n                    uniform sampler2D s2;  // AlbedoMap,\n                    uniform sampler2D s3;  // RoughnessMap,\n                    uniform sampler2D s4;  // NormalMap,\n                    uniform sampler2D s5;  // AoMap,\n                    uniform sampler2D s6;  // PaintMaskMap,\n                    uniform sampler2D s7;  // MaterialMap,\n                    uniform sampler2D s8;  // DirtMap,\n                    uniform sampler2D s9;  // GlowMap,\n                    uniform sampler2D s10; // Detail1Map\n                   \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[3];\n                    uniform vec4 cb7[18];\n\n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r10;\n                        vec4 r11;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        vec4 c18=vec4(9.99999997e-007,0.0383840017,0.0393519998,0.0391650014);\n                        vec4 c19=vec4(-0,-0.333333343,-0.666666687,-1);\n                        vec4 c20=vec4(3.19148946,1.03191495,0.5,-0.5);\n                        vec4 c21=vec4(1,2,-1,0);\n                        vec4 c22=vec4(0.400000006,3.14159274,-1e-015,9.99999987e+014);\n                        vec4 c23=vec4(1,1.54499996,1.10000002,6);\n                        vec4 c24=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c25=vec4(0,-0.015625,0.75,-9.27999973);\n                        vec4 c26=vec4(7,0.119999997,0.318309873,-1.44269507e-005);\n                        vec4 c27=vec4(-0.00313080009,12.9200001,0.416666657,0);\n                        vec4 c28=vec4(1.05499995,-0.0549999997,0,0);\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord7;\n                        v7=texcoord8;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        // PaintMaskMap\n                        r0.x=texture2D(s6,v0.xy).x * ").concat(n.texture.PaintMaskMap.multiplier,";\n                        \n                        // MaterialMap\n                        r0.y=texture2D(s7,v0.xy).x;    \n                        \n                        // DirtMap (Not required here) <----------------------------------------------------------------\n                        r0.z=texture2D(s8,v0.xy).x;   \n                        \n                        // GlowMap     \n                        r0.w=texture2D(s9,v0.xy).x;    \n                        \n                        gl_FragData[0].w=(-r0.x)+c21.x;\n                        r0.z=(-cb2[19].x)+cb2[19].y;\n                        r0.z=1.0/r0.z;\n                        r1.x=(-cb2[19].x)+v6.z;\n                        r0.z=r0.z*r1.x;\n                        r0.z=sqrt(abs(r0.z));\n                        r1.x=1.0/v7.w;\n                        r1.xy=r1.xx*v7.xy;\n                        r1.xy=r1.xy*c20.zw+c20.zz;\n                        r1.z=c20.z;\n                        r1.xy=cb2[18].xy*r1.zz+r1.xy;\n                        r1=texture2D(s1,r1.xy);\n                        r1.z=r0.z+(-r1.x);\n                        r1.y=r1.x*(-r1.x)+r1.y;\n                        r1.x=r1.x+cb2[18].z;\n                        r0.z=(-r0.z)+r1.x;\n                        r0.z=r0.z>=0.0?c21.x:c21.w;\n                        r2.x=max(r1.y,c18.x);\n                        r1.x=r1.z*r1.z+r2.x;\n                        r1.x=1.0/r1.x;\n                        r1.x=r1.x*r2.x;\n                        r2.x=saturate(max(r0.z,r1.x));\n                        r0.z=r2.x+(-cb2[18].w);\n                        r1.x=c21.x;\n                        r1.y=r1.x+(-cb2[18].w);\n                        r1.y=1.0/r1.y;\n                        r0.z=saturate(r0.z*r1.y);\n                        r0.z=(-cb2[19].x)>=0.0?r0.z:r1.x;\n                        r1.x=max(cb2[19].z,r0.z);\n                        r0.z=r1.x*r1.x;\n                        r1.xyz=r0.zzz*cb2[13].xyz;\n                        r1.xyz=r1.xyz*(-c19.zzz);\n                        r0.z=dot(v4.xyz,v4.xyz);\n                        r0.z=r0.z==0.0?3.402823466e+38:inversesqrt(abs(r0.z));\n                        r2.xyz=v4.xyz*r0.zzz+cb2[12].xyz;\n                        r3.xyz=r0.zzz*v4.xyz;\n                        r4.xyz=normalize(r2.xyz);\n                        r0.z=clamp(dot(cb2[12].xyz,r4.xyz),0.0, 1.0);\n                        r0.z=(-r0.z)+c21.x;\n                        r1.w=r0.z*r0.z;\n                        r1.w=r1.w*r1.w;\n                        r0.z=r0.z*r1.w;\n                        r2=r0.yyyy+c19;\n                        r2=r2*c20.xxxx;\n                        r2=saturate((-abs(r2))+c20.yyyy);\n                        r5.xyz=r2.yyy*cb7[7].xyz;\n                        r5.xyz=r2.xxx*cb7[6].xyz+r5.xyz;\n                        r5.xyz=r2.zzz*cb7[8].xyz+r5.xyz;\n                        r5.xyz=r2.www*cb7[9].xyz+r5.xyz;\n                        r6.xy=cb7[14].xx*v0.xy;\n                        r6=texture2D(s10,r6.xy);\n                        r0.y=dot(cb7[17],r2);\n                        r1.w=r0.y*r6.w;\n                        r6.xyz=r6.xyz*c21.yyy+c21.zzz;\n                        r6.xyz=r6.xyz*cb7[14].yyy;\n                        r7.xyz=mix(r5.xyz,cb7[16].xyz,r1.www);\n                        \n                        // AlbedoMap\n                        r5.xyz=texture2D(s2,v0.xy).xyz;\n                        \n                        // RoughnessMap\n                        r5.w=texture2D(s3,v0.xy).x;\n                        \n                        r8.xyz=r7.xyz*r5.www;\n                        r7.xyz=r5.www*(-r7.xyz)+c18.yzw;\n                        r0.x=r0.x*cb7[0].x;\n                        r7.xyz=r0.xxx*r7.xyz+r8.xyz;\n                        r8.xyz=mix(r7.xyz,c21.xxx,r0.zzz);\n                        r0.z=r2.y*cb7[11].x;\n                        r0.z=r2.x*cb7[10].x+r0.z;\n                        r0.z=r2.z*cb7[12].x+r0.z;\n                        r0.z=r2.w*cb7[13].x+r0.z;\n                        r3.w=r0.z*r5.w;\n                        r0.z=r5.w*(-r0.z)+c22.x;\n                        r0.z=r0.x*r0.z+r3.w;\n                        r0.z=saturate((-r0.z)+c21.x);\n                        r9.xy=(-r0.zz)+c23.xy;\n                        r3.w=min(r9.y,c21.x);\n                        r10.xyz=c25.xyz;\n                        r9=r9.xxxx*c24+r10.xxyz;\n                        r4.w=clamp(dot(r4.xyz,r3.xyz),0.0, 1.0);\n                        r4.w=r4.w*r4.w;\n                        r4.w=r4.w*r3.w+c23.z;\n                        r3.w=(-r3.w)+r4.w;\n                        r3.w=1.0/r3.w;\n                        r10.xyz=r3.www*r8.xyz;\n                        r8.xyz=(-r8.xyz)+c21.xxx;\n                        r11.xyz=r2.yyy*cb7[3].xyz;\n                        r11.xyz=r2.xxx*cb7[2].xyz+r11.xyz;\n                        r2.xyz=r2.zzz*cb7[4].xyz+r11.xyz;\n                        r2.xyz=r2.www*cb7[5].xyz+r2.xyz;\n                        r11.xyz=mix(r2.xyz,cb7[15].xyz,r1.www);\n                        r2.xyz=mix(r11.xyz,c21.xxx,r0.xxx);\n                        r2.xyz=r2.xyz*r5.xyz;\n                        r5.xyz=r8.xyz*r2.xyz;\n                        \n                        // NormalMap\n                        r8.ywx=texture2D(s4,v0.xy).xyz;\n                        \n                        // AoMap\n                        r8.z=texture2D(s5,v0.xy).x;\n                        \n                        r8.xy=r8.yw*c21.yy+c21.zz;\n                        r0.x=saturate(dot(r8.xy,r8.xy)+c21.w);\n                        r0.x=(-r0.x)+c21.x;\n                        r0.x=r0.x==0.0?3.402823466e+38:inversesqrt(abs(r0.x));\n                        r8.z=1.0/r0.x;\n                        r6.xyz=r6.xyz*r0.yyy+r8.xyz;\n                        r8.xyz=normalize(r6.xyz);\n                        r6.xyz=r8.yyy*v3.xyz;\n                        r6.xyz=r8.xxx*v2.xyz+r6.xyz;\n                        r6.xyz=r8.zzz*v1.xyz+r6.xyz;\n                        r8.xyz=normalize(r6.xyz);\n                        r0.x=clamp(dot(r8.xyz,r4.xyz),0.0, 1.0);\n                        r0.xy=r0.xz*r0.xz;\n                        r4.w=r0.z*c23.w;\n                        r0.z=r0.y*r0.y+c21.z;\n                        r0.x=r0.x*r0.z+c21.x;\n                        r0.xyw=r0.xyw*r0.xyw;\n                        r0.z=r0.x*c22.y;\n                        r0.x=r0.x*c22.y+c22.z;\n                        r0.z=1.0/r0.z;\n                        r0.x=r0.x>=0.0?r0.z:c22.w;\n                        r0.x=r0.x*r0.y;\n                        r0.xyz=r10.xyz*r0.xxx+r5.xyz;\n                        r1.w=clamp(dot(cb2[12].xyz,r8.xyz),0.0, 1.0);\n                        r0.xyz=r0.xyz*r1.www;\n                        r0.xyz=r1.xyz*r0.xyz;\n                        r1.xyz=max(r0.xyz,c21.www);\n                        r0.x=dot(r3.xyz,r8.xyz);\n                        r0.y=r0.x+r0.x;\n                        r0.x=saturate(r0.x);\n                        r0.x=r0.x*c25.w;\n                        r0.x=exp2(r0.x);\n                        r1.w=min(r0.x,r9.y);\n                        r0.x=r9.x*r1.w+r9.z;\n                        r5.xyz=saturate(mix(r0.xxx,r9.www,r7.xyz));\n                        r0.xyz=r8.xyz*(-r0.yyy)+r3.xyz;\n                        r4.x=dot((-r0.xyz),cb2[8].xyz);\n                        r4.y=dot((-r0.xyz),cb2[9].xyz);\n                        r4.z=dot((-r0.xyz),cb2[10].xyz);\n                        r3=textureCubeLod(s0,r4.xyz,r4.w);\n                        r0.xyz=r3.xyz*cb2[14].www;\n                        r8.w=c26.x;\n                        r3=textureCubeLod(s0,r8.xyz,r8.w);\n                        r1.w=cb2[14].w;\n                        r1.w=r1.w*c26.y;\n                        r3.xyz=r3.xyz*cb2[14].www+r1.www;\n                        r4.xyz=(-r5.xyz)+c21.xxx;\n                        r2.xyz=r2.xyz*r4.xyz;\n                        r2.xyz=r3.xyz*r2.xyz;\n                        r2.xyz=r2.xyz*c26.zzz;\n                        r0.xyz=r0.xyz*r5.xyz+r2.xyz;\n                        r2.xyz=max(r0.xyz,c21.www);\n                        r0.xyz=r1.xyz+r2.xyz;\n                        r4.xy=mix(v0.xy,v0.zw,cb7[0].yy);\n                                                \n                        // NormalMap\n                        r1.ywx=texture2D(s4,r4.xy).xyz;\n                        \n                        // AoMap\n                        r1.z=texture2D(s5,r4.xy).x;\n                        \n                        r0.xyz=r0.xyz*r1.zzz+(-cb2[15].xyz);\n                        r1.x=cb2[15].w*v4.w;\n                        r1.x=r1.x*c26.w;\n                        r1.x=exp2(r1.x);\n                        r0.xyz=r1.xxx*r0.xyz+cb2[15].xyz;\n                        r2.xyz=cb2[15].xyz;\n                        r1.yzw=(-r2.xyz)+cb7[1].xyz;\n                        r1.xyz=r1.xxx*r1.yzw+cb2[15].xyz;\n                        r1.xyz=r1.xyz*cb4[0].yyy;\n                        r0.xyz=r1.xyz*r0.www+r0.xyz;\n                        r1.xyz=max(r0.xyz,c21.www);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c27.zzz;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c28.xxx+c28.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c27.xxx;\n                        r2.xyz=r2.xyz*c27.yyy;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n                        \n                        ").concat(n.ps.shadowFooter,"\n                    }\n                ")}}}},c={name:"skinned_asteroidV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/organic/skinned_asteroidV5",description:"skinned ".concat(u.description),techniques:{Depth:i.skinnedQuadDepthV5.techniques.Main,Picking:i.skinnedQuadPickingV5.techniques.Main,Main:{vs:n.vs.skinnedQuadV5_PosBwtTexTanTex,ps:u.techniques.Main.ps}}}},"../shaders/organic/index.js":function(e,t,r){"use strict";r.r(t);var n=r("../shaders/organic/asteroidV5.js");r.d(t,"asteroidV5",(function(){return n.asteroidV5})),r.d(t,"skinnedAsteroidV5",(function(){return n.skinnedAsteroidV5}));var i=r("../shaders/organic/rockV5.js");r.d(t,"rockV5",(function(){return i.rockV5})),r.d(t,"skinnedRockV5",(function(){return i.skinnedRockV5}))},"../shaders/organic/rockV5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"rockV5",(function(){return i})),r.d(t,"skinnedRockV5",(function(){return o}));var n=r("../shaders/organic/asteroidV5.js"),i={name:"rockV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/organic/rockV5",description:"rock shader",techniques:n.asteroidV5.techniques},o={name:"skinned_rockV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/organic/skinned_rockV5",description:"skinned rock shader",techniques:n.skinnedAsteroidV5.techniques}},"../shaders/postProcess/index.js":function(e,t){},"../shaders/quad/extended/constant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Outline",(function(){return i})),r.d(t,"Mode",(function(){return o})),r.d(t,"SelectorMode",(function(){return a})),r.d(t,"SelectorColor",(function(){return u}));var n=r("../shaders/shared/util.js"),i={name:"Outline",value:[1,0,0,10],ui:{group:"Outline",components:["linear red","linear green","linear blue","size"],widget:n.WidgetType.MIXED,display:0}},o={NORMALS:1,BI_TANGENTS:2,TANGENTS:3,PAINT_MASK:4,MATERIAL_MAP:5,MATERIAL_1_MASK:6,MATERIAL_2_MASK:7,MATERIAL_3_MASK:8,MATERIAL_4_MASK:9,DIRT_MASK:10,GLOW_MASK:11,ALBEDO_MAP:12,ROUGHNESS_MAP:13,NORMAL_MAP:14,NORMAL_MAP_POSITIVE:15,NORMAL_MAP_NEGATIVE:16,AMBIENT_OCCLUSION_MAP:17,PATTERN_1_MASK:18,PATTERN_2_MASK:19,DUST_NOISE_MAP:20,HEAT:21,GLASS:22,SAILS_MAP:23,SAILS_MAP_PATTERN:24,SAILS_MAP_BACKGROUND:25,DETAIL_1_MAP:26,DETAIL_2_MAP:27,DETAIL_3_MAP:28},a={name:"SelectorMode",value:[0,0,0,0],ui:{group:"Selector",components:["mode","threshold","pulse rate"],widget:n.WidgetType.MIXED,display:1}},u=Object(n.createLinearColor)({name:"SelectorColor",ui:{group:"Selector",display:1}})},"../shaders/quad/extended/func.js":function(e,t,r){"use strict";r.r(t),r.d(t,"calculateOutline",(function(){return n})),r.d(t,"getVec2FromID",(function(){return i})),r.d(t,"isMasked",(function(){return o})),r.d(t,"getMaterialMask",(function(){return a})),r.d(t,"getPatternLayer",(function(){return u})),r.d(t,"pulse",(function(){return c}));var n="\n\n    vec4 calculateOutline(float thickness, vec4 pos, vec3 normal, vec4 skinned)\n    {\n        const float ratio = 1.0;\n        vec4 pos2 = projectionMatrix\n    }\n\n",i="\n\n    vec2 getVec2FromID(float id)\n    {\n        vec4 c2=vec4(1,0.00390625,0.00392156886,1.00392163);\n        vec4 tmp;\n        tmp.x=c2.x;\n        tmp.y=tmp.x+id;\n        tmp.z=tmp.y*c2.y;\n        tmp.w=fract(tmp.z);\n        tmp.w=(-tmp.w)+tmp.z;\n        tmp.z=fract(abs(tmp.z));\n        tmp.y=tmp.y>=0.0?tmp.z:(-tmp.z);\n        return tmp.wy*c2.zw;\n    }\n    \n",o="\n\n    bool isMasked(sampler2D maskMap, vec2 uv, float multiplier)\n    {\n        float x = texture2D(maskMap, uv).x * multiplier;\n        return x > 0.0;     \n    }\n    \n    bool isMasked(sampler2D maskMap, vec2 uv)\n    {\n        float x = texture2D(maskMap, uv).x;\n        return x > 0.0;     \n    }\n\n",a="\n\n    vec4 getMaterialMask(sampler2D materialSampler,vec2 uv)\n    {\n        vec4 v0;\n        float material=texture2D(materialSampler,uv).x;\n        if      (material<".concat(.165,") {v0.x=1.0;}\n        else if (material>").concat(.835,") {v0.w=1.0;}\n        else if (material<").concat(.495,") {v0.y=1.0;} \n        else                           {v0.z=1.0;}\n        return v0;\n    }\n    \n"),u="\n    \n    float getPatternLayer(sampler2D pattern,vec2 uv,vec2 clamp,vec4 mask,vec4 materialMask)\n    {\n        float p=clampToBorder(pattern,uv,clamp).x;\n        if (any(greaterThan(mask*materialMask*p,vec4(0.0)))) return p;\n        return 0.0;\n    }\n     \n",c="\n\n    // Todo: Replace with proper method\n    vec4 pulse(float modifier, float time, vec3 base, vec4 color)\n    {\n        vec4 result;\n        result.w=color.w;\n        if(any(greaterThan(color.xyz,vec3(0.0)))){\n            if (modifier>0.0){\n                result.x=fract(time);\n                if(result.x>0.5)result.x=1.0-result.x;\n                result.x=min(1.0,time*modifier);\n            }\n            else result.x=1.0;\n            result.xyz=base*color.xyz*result.x;\n        }\n        return result;\n    }\n\n"},"../shaders/quad/extended/quadEmissiveV5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadEmissiveV5",(function(){return i})),r.d(t,"skinnedQuadEmissiveV5",(function(){return o}));var n=r("../shaders/quad/shared/index.js"),i={name:"quadEmissiveV5",description:"quad emissive only shader",techniques:{Main:{vs:n.vs.quadV5_PosTexTanTex,ps:{constants:[n.constant.GeneralData,n.constant.GeneralGlowColor],textures:[n.texture.GlowMap],shader:"\n                \n                    ".concat(n.ps.headerNoShadow," // reduce this to only what is required\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord5;\n                    \n                    uniform sampler2D s0; // GlowMap\n                    \n                    uniform vec4 cb4[3];\n                    uniform vec4 cb7[2];\n        \n                    void main()\n                    {\n                        vec2 uv=texcoord.xy;\n                        vec4 v1=texcoord5;                 \n                        vec4 r0;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v1.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        gl_FragData[0].w=(-r0.x)+1.0;\n                        \n                        // GlowMap     \n                        r0.w=texture2D(s0,uv).x; \n                        if (r0.w==0.0)discard;    \n                        \n                        gl_FragData[0].xyz=cb7[1].xyz * r0.w;\n                    }\n               ")}}}},o={name:"skinned_quadEmissiveV5",description:"skinned ".concat(i.description),techniques:{Main:{vs:n.vs.skinnedQuadV5_PosBwtTexTanTex,ps:i.techniques.Main.ps}}}},"../shaders/quad/extended/quadExtendedPickingHeatV5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadExtendedPickingHeatV5",(function(){return c})),r.d(t,"skinnedQuadExtendedPickingHeatV5",(function(){return l}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/shared/constant.js"),o=r("../shaders/quad/extended/func.js"),a=r("../shaders/shared/func.js"),u=r("./global/constant/index.js"),c={name:"quadExtendedPickingHeatV5",description:"quad picking shader with materials, patterns and paint",techniques:{Main:{vs:n.vs.quadV5_PosTexTanTex,ps:{constants:[i.ObjectID],textures:[n.texture.PaintMaskMap,n.texture.MaterialMap,n.texture.PatternMask1Map,n.texture.PatternMask2Map],shader:"\n    \n                    ".concat(n.ps.headerNoShadow,"\n                    ").concat(o.getVec2FromID,"\n                    ").concat(o.isMasked,"\n                    ").concat(o.getMaterialMask,"\n                    ").concat(a.clampToBorder,"\n                    ").concat(o.getPatternLayer,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord6;\n                    \n                    uniform sampler2D s0; // PaintMaskMap\n                    uniform sampler2D s1; // MaterialMap\n                    uniform sampler2D s2; // PatternMask1Map\n                    uniform sampler2D s3; // PatternMask2Map\n                    \n                    uniform vec4 cb4[14];\n                    uniform vec4 cb7[1];\n            \n                    void main()\n                    {\n                        vec4 v0;        \n                        vec4 v5;\n                        vec4 v6;\n                        vec4 r0;\n                        \n                        int i0=0;\n                        float c0 = 0.00392156886;\n            \n                        v0=texcoord;\n                        v5=texcoord5;\n                        v6=texcoord6;\n                        \n                        // Cull\n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        if(texture2D(s0,v0.xy).x>0.0)\n                        {\n                            i0=").concat(u.PickingBlueChannel.PAINT,";\n                        }\n                        else\n                        {\n                            r0=getMaterialMask(s1,v0.xy);\n                            if (r0.x>0.0) {i0=").concat(u.PickingBlueChannel.MATERIAL_1,";}\n                            else if (r0.y>0.0) {i0=").concat(u.PickingBlueChannel.MATERIAL_2,";}\n                            else if (r0.z>0.0) {i0=").concat(u.PickingBlueChannel.MATERIAL_3,";}\n                            else {i0=").concat(u.PickingBlueChannel.MATERIAL_4,";}\n                            \n                            r0.x=getPatternLayer(s2,v6.xy,cb4[10].yz,cb4[12],r0);\n                            if(r0.x>0.5){i0=").concat(u.PickingBlueChannel.MATERIAL_5,";}\n                            r0.x=getPatternLayer(s3,v6.zw,cb4[11].yz,cb4[13],r0);\n                            if(r0.x>0.5){i0=").concat(u.PickingBlueChannel.MATERIAL_6,";}\n                        }\n                        if (i0==0) discard;\n                        \n                        gl_FragData[0].xy=getVec2FromID(cb7[0].x);\n                        gl_FragData[0].z=float(i0)*c0;\n                        gl_FragData[0].w=1.0;\n                    }\n                ")}}}},l={name:"skinned_quadHeatExtendedPickingV5",description:"skinned ".concat(c.description),techniques:{Main:{vs:n.vs.skinnedQuadV5_PosBwtTexTanTex,ps:c.techniques.Main.ps}}}},"../shaders/quad/extended/quadExtendedPickingNoPatternV5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadExtendedPickingNoPatternV5",(function(){return u})),r.d(t,"skinnedQuadExtendedPickingNoPatternV5",(function(){return c}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/shared/constant.js"),o=r("../shaders/quad/extended/func.js"),a=r("./global/constant/index.js"),u={name:"quadExtendedPickingNoPatternV5",description:"quad picking shader with materials, glow and paint",techniques:{Main:{vs:n.vs.quadV5_PosTexTanTex,ps:{constants:[i.ObjectID],textures:[n.texture.PaintMaskMap,n.texture.MaterialMap,n.texture.GlowMap],shader:"\n    \n                    ".concat(n.ps.headerNoShadow,"\n                    ").concat(o.getVec2FromID,"\n                    ").concat(o.isMasked,"\n                    ").concat(o.getMaterialMask,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord5;\n                    \n                    uniform sampler2D s0; // PaintMaskMap\n                    uniform sampler2D s1; // MaterialMap\n                    uniform sampler2D s2; // GlowMap\n\n                    uniform vec4 cb4[14];\n                    uniform vec4 cb7[1];\n            \n                    void main()\n                    {\n                        vec4 v0;      \n                        vec4 v5;\n                        vec4 r0;\n                        \n                        int i0 = 0;            \n                        float c0 = 0.00392156886;\n            \n                        v0=texcoord;\n                        v5=texcoord5;\n            \n                        // Cull\n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n\n                        if(texture2D(s0,v0.xy).x>0.0)\n                        {\n                            gl_FragData[0].z=float(").concat(a.PickingBlueChannel.PAINT,")*c0;\n                            return;            \n                        }\n                        \n                        if(texture2D(s2,v0.xy).x>0.0)\n                        {\n                            gl_FragData[0].z=float(").concat(a.PickingBlueChannel.GLOW,")*c0;\n                            return;            \n                        }\n                        \n                        r0=getMaterialMask(s1,v0.xy);\n                        if (r0.x>0.0) {i0=").concat(a.PickingBlueChannel.MATERIAL_1,";}\n                        else if (r0.y>0.0) {i0=").concat(a.PickingBlueChannel.MATERIAL_2,";}\n                        else if (r0.z>0.0) {i0=").concat(a.PickingBlueChannel.MATERIAL_3,";}\n                        else {i0=").concat(a.PickingBlueChannel.MATERIAL_4,";}\n                        \n                        if (i0==0) discard;\n                       \n                        gl_FragData[0].xy=getVec2FromID(cb7[0].x);\n                        gl_FragData[0].z=float(i0)*c0;\n                        gl_FragData[0].w=1.0;\n                    }\n                ")}}}},c={name:"skinned_quadExtendedPickingNoPatternV5",description:"skinned ".concat(u.description),techniques:{Main:{vs:n.vs.skinnedQuadV5_PosBwtTexTanTex,ps:u.techniques.Main.ps}}}},"../shaders/quad/extended/quadExtendedPickingSailsV5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadExtendedPickingSailsV5",(function(){return l})),r.d(t,"skinnedQuadExtendedPickingSailsV5",(function(){return s}));var n=r("../shaders/quad/extended/func.js"),i=r("../shaders/quad/shared/index.js"),o=r("../shaders/shared/func.js"),a=r("../shaders/shared/constant.js"),u=r("./global/constant/index.js"),c=r("../shaders/quad/shared/constant.js"),l={name:"quadExtendedPickingSailsV5",description:"quad sails picking shader with materials, patterns, glow and paint",techniques:{Main:{vs:i.vs.quadV5_PosTexTanTex,ps:{constants:[a.ObjectID,c.SailsDetailData],textures:[i.texture.PaintMaskMap,i.texture.MaterialMap,i.texture.GlowMap,i.texture.SailsDetailMap],shader:"\n    \n                    ".concat(i.ps.headerNoShadow,"\n                    ").concat(o.clampToBorder,"\n                    ").concat(n.getVec2FromID,"\n                    ").concat(n.isMasked,"\n                    ").concat(n.getMaterialMask,"\n                    ").concat(n.getPatternLayer,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord5;\n\n                    uniform sampler2D s0; // PaintMaskMap\n                    uniform sampler2D s1; // MaterialMap\n                    uniform sampler2D s2; // GlowMap\n                    uniform sampler2D s3; // SailsDetailMap \n                    \n                    uniform vec4 cb4[15];\n                    uniform vec4 cb7[3];\n            \n                    void main(){\n                    \n                        vec4 v0;\n                        vec4 v5;        \n                        vec4 r0;\n                        \n                        int i0=0;\n                        float c0=0.00392156886;\n                        \n                        v0=texcoord;\n                        v5=texcoord5;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        if(texture2D(s0,v0.xy).x>0.0)discard;\n                        \n                        if(texture2D(s2,v0.xy).x>0.0)i0=").concat(u.PickingBlueChannel.GLOW,";\n                        else{\n                            r0=getMaterialMask(s1,v0.xy);\n                            if (r0.x>0.0) {\n                                vec4 c16=vec4(0.159154937,0.5,6.28318548,-3.14159274);\n                                vec4 c25=vec4(-1,-0,2,0);\n                                vec4 c26=vec4(1,-1,0.5,-0.5);\n                                vec4 r1;\n                                vec4 r2;\n                                vec4 r3;\n                                vec4 r4;\n                                r1.yz=cb7[1].xx*v0.xy;  \n                                r2.xy=c16.xy;\n                                r0.x=cb7[1].y*r2.x+r2.y;            \n                                r0.x=fract(r0.x);\n                                r0.x=r0.x*c16.z+c16.w;\n                                r3.xy=vec2(cos(r0.x),sin(r0.x));            \n                                r4.y=dot(r3.yx,r1.yz)+c25.w;\n                                r2.xz=r3.xy*c26.xy;\n                                r4.x=dot(r2.xz,r1.yz)+c25.w;\n                                r3.x=texture2D(s3,r4.xy).x;\n                                if (r3.x>0.9)i0=").concat(u.PickingBlueChannel.MATERIAL_4,";\n                                else i0=").concat(u.PickingBlueChannel.MATERIAL_3,";\n                            }\n                            else if(r0.y>0.0)i0=").concat(u.PickingBlueChannel.MATERIAL_2,";\n                        }\n                        gl_FragData[0].xy=getVec2FromID(cb7[0].x);\n                        gl_FragData[0].z=float(i0)*c0;\n                        gl_FragData[0].w=1.0;\n                    }\n                ")}}}},s={name:"skinned_quadSailsExtendedPickingV5",description:"skinned ".concat(l.description),techniques:{Main:{vs:i.vs.skinnedQuadV5_PosBwtTexTanTex,ps:l.techniques.Main.ps}}}},"../shaders/quad/extended/quadExtendedPickingV5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadExtendedPickingV5",(function(){return c})),r.d(t,"skinnedQuadExtendedPickingV5",(function(){return l}));var n=r("../shaders/quad/extended/func.js"),i=r("../shaders/quad/shared/index.js"),o=r("../shaders/shared/func.js"),a=r("../shaders/shared/constant.js"),u=r("./global/constant/index.js"),c={name:"quadExtendedPickingV5",description:"quad picking shader with materials, patterns, glow and paint",techniques:{Main:{vs:i.vs.quadV5_PosTexTanTex,ps:{constants:[a.ObjectID],textures:[i.texture.PaintMaskMap,i.texture.MaterialMap,i.texture.GlowMap,i.texture.PatternMask1Map,i.texture.PatternMask2Map],shader:"\n    \n                    ".concat(i.ps.headerNoShadow,"\n                    ").concat(n.getVec2FromID,"\n                    ").concat(n.isMasked,"\n                    ").concat(n.getMaterialMask,"\n                    ").concat(o.clampToBorder,"\n                    ").concat(n.getPatternLayer,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord6;\n                    \n                    uniform sampler2D s0; // PaintMaskMap\n                    uniform sampler2D s1; // MaterialMap\n                    uniform sampler2D s2; // GlowMap\n                    uniform sampler2D s3; // PatternMask1Map\n                    uniform sampler2D s4; // PatternMask2Map\n                    \n                    uniform vec4 cb4[14];\n                    uniform vec4 cb7[1];\n            \n                    void main()\n                    {\n                        vec4 v0;   \n                        vec4 v5;\n                        vec4 v6;\n                        vec4 r0;\n                        \n                        int i0=0;\n                        float c0 = 0.00392156886;\n            \n                        v0=texcoord;\n                        v5=texcoord5;\n                        v6=texcoord6;\n                        \n                        // Cull\n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        if(texture2D(s0,v0.xy).x>0.0)\n                        {\n                            i0=").concat(u.PickingBlueChannel.PAINT,";\n                        }\n                        else if(texture2D(s2,v0.xy).x>0.0)\n                        {\n                            i0=").concat(u.PickingBlueChannel.GLOW,";\n                        }\n                        else\n                        {\n                            r0=getMaterialMask(s1,v0.xy);\n                            if (r0.x>0.0) {i0=").concat(u.PickingBlueChannel.MATERIAL_1,";}\n                            else if (r0.y>0.0) {i0=").concat(u.PickingBlueChannel.MATERIAL_2,";}\n                            else if (r0.z>0.0) {i0=").concat(u.PickingBlueChannel.MATERIAL_3,";}\n                            else {i0=").concat(u.PickingBlueChannel.MATERIAL_4,";}\n                            \n                            r0.x=getPatternLayer(s3,v6.xy,cb4[10].yz,cb4[12],r0);\n                            if(r0.x>0.5){i0=").concat(u.PickingBlueChannel.MATERIAL_5,";}\n                            \n                            r0.x=getPatternLayer(s4,v6.zw,cb4[11].yz,cb4[13],r0);\n                            if(r0.x>0.5){i0=").concat(u.PickingBlueChannel.MATERIAL_6,";}\n                        }\n                         \n                        if (i0==0) discard;\n                        \n                        gl_FragData[0].xy=getVec2FromID(cb7[0].x);\n                        gl_FragData[0].z=float(i0)*c0;\n                        gl_FragData[0].w=1.0;\n                    }\n                ")}}}},l={name:"skinned_quadExtendedPickingV5",description:"skinned ".concat(c.description),techniques:{Main:{vs:i.vs.skinnedQuadV5_PosBwtTexTanTex,ps:c.techniques.Main.ps}}}},"../shaders/quad/extended/quadOutlineSails.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadOutlineSailsV5",(function(){return u})),r.d(t,"skinnedQuadOutlineSailsV5",(function(){return c}));var n=r("../shaders/quad/extended/constant.js"),i=r("../shaders/quad/shared/texture.js"),o=r("../shaders/quad/shared/ps.js"),a=r("../shaders/quad/extended/quadOutlineV5.js"),u={name:"quadOutlineSailsV5",description:"quad sails outline shader",techniques:{Main:{vs:a.quadOutlineV5.techniques.Main.vs,ps:{constants:[n.Outline],textures:[i.PaintMaskMap],shader:"\n\n                    ".concat(o.headerNoShadow,"\n                    \n                    varying vec4 texcoord;\n\n                    uniform sampler2D s0; // PaintMaskMap\n\n                    uniform vec4 cb4[15];\n                    uniform vec4 cb7[1];\n            \n                    void main(){\n                    \n                        vec4 v0;\n                        v0=texcoord;\n                        \n                        // Todo: Add culling\n                        \n                        if(texture2D(s0,v0.xy).x>0.0)discard;\n                        gl_FragData[0].xyz = cb7[0].xyz;\n                        gl_FragData[0].w = 1.0;\n                   }\n                ")}}}},c={name:"skinned_quadOutlineSailsV5",description:"quad outline shader",techniques:{Main:{vs:a.skinnedQuadOutlineV5.techniques.Main.vs,ps:u.techniques.Main.ps}}}},"../shaders/quad/extended/quadOutlineV5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadOutlineV5",(function(){return a})),r.d(t,"skinnedQuadOutlineV5",(function(){return u}));var n=r("../shaders/shared/input.js"),i=r("../shaders/shared/func.js"),o=r("../shaders/quad/extended/constant.js"),a={name:"quadOutlineV5",description:"quad outline shader",techniques:{Main:{vs:{inputDefinitions:n.PosTexTanTex,constants:[o.Outline],shader:"\n    \n                    varying vec4 texcoord;\n    \n                    attribute vec4 attr0;\n                    attribute vec4 attr1;\n                    attribute vec4 attr2;\n                    attribute vec4 attr3;\n                    \n                    uniform vec4 cb0[1];\n                    uniform vec4 cb1[24];\n                    uniform vec4 cb3[26];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                      \n                        vec4 c0=vec4(6.28318548,-3.14159274,0.159154937,0.5);\n                        vec4 c1=vec4(0,1,0,0);\n                        \n                        v0=attr0;\n                        v1=attr1;\n                        v2=attr2;\n                        v3=attr3;\n                        \n                        texcoord.xy=v2.xy;\n                        texcoord.zw=v3.xy;\n                \n                        r0=v2*c0.xxxx+c0.yyyy;\n                        {\n                            bvec4 tmp=lessThan(c1.xxxx,r0.ywzw);\n                            r2.xy=(vec4(tmp.x?1.0:0.0,tmp.y?1.0:0.0,tmp.z?1.0:0.0,tmp.w?1.0:0.0)).xy;\n                        }\n                        \n                        r0=r0*c0.zzzz+c0.wwww;\n                        r0=fract(r0);\n                        r0=r0*c0.xxxx+c0.yyyy;\n                        r2.x=r2.y*r2.x;\n                        r3.xy=vec2(cos(r0.x), sin(r0.x));\n                        r4.xy=vec2(cos(r0.y), sin(r0.y));\n                        r3.xy=r3.xy*abs(r4.yy);\n                        r3.z=r4.x;\n                        r4.xy=vec2(cos(r0.z), sin(r0.z));\n                        r5.xy=vec2(cos(r0.w), sin(r0.w));\n                        r0.xy=r4.xy*abs(r5.yy);\n                        r0.z=r5.x;\n                        r2.yzw=r0.yzx*r3.zxy;\n                        r2.yzw=r3.yzx*r0.zxy+(-r2.yzw);\n                        r4.xyz=mix((-r2.yzw),r2.yzw,r2.xxx);\n                        r2.x=dot(r4.xyz,cb3[0].xyz);\n                        r2.y=dot(r4.xyz,cb3[1].xyz);\n                        r2.z=dot(r4.xyz,cb3[2].xyz);\n                        \n                        r0.xyz=v0.xyz+r2.xyz*cb0[0].w;\n                        r0=r0.xyzx*c1.yyyx+c1.xxxy;\n                        r1.x=dot(r0,cb3[0]);\n                        r1.y=dot(r0,cb3[1]);\n                        r1.z=dot(r0,cb3[2]);\n                        r1.w=dot(r0,cb3[3]);\n                        gl_Position.x=dot(r1,cb1[4]);\n                        gl_Position.y=dot(r1,cb1[5]);\n                        gl_Position.z=dot(r1,cb1[6]);\n                        gl_Position.w=dot(r1,cb1[7]);\n                        \n                    }\n                "},ps:{constants:[o.Outline],shader:"\n\n                    ".concat(i.precision,"        \n        \n                    uniform vec4 cb7[1];\n                    \n                    void main()\n                    {\n                        // Todo: Add culling\n                        gl_FragData[0].xyz = cb7[0].xyz;\n                        gl_FragData[0].w = 1.0;                     \n                    }\n        \n                ")}}}},u={name:"skinned_quadOutlineV5",description:"quad outline shader",techniques:{Main:{vs:{inputDefinitions:n.PosBwtTexTanTex,constants:[o.Outline],shader:"\n    \n                    varying vec4 texcoord;\n    \n                    attribute vec4 attr0;\n                    attribute vec4 attr1;\n                    attribute vec4 attr2;\n                    attribute vec4 attr3;\n                    attribute vec4 attr4;\n                    \n                    uniform vec4 cb0[1];\n                    uniform vec4 cb1[24];\n                    uniform vec4 cb3[200];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        vec4 position;\n                        vec4 normal;\n                        \n                        ivec4 a0;\n                        \n                        texcoord.xy=v2.xy;\n                        texcoord.zw=v4.xy;\n                        \n                        vec4 c0=vec4(3,0,1,0.5);\n                        vec4 c1=vec4(6.28318548,-3.14159274,0.159154937,0.5);\n                        \n                        v0=attr0;\n                        v1=attr1;\n                        v2=attr2;\n                        v3=attr3;\n                        v4=attr4;\n                        \n                        r0.x=c0.x*v1.x;         \n                        a0.x=int(r0.x+0.5);      \n                        r0=cb3[27+a0.x];\n                        \n                        r5=v0.xyzx*c0.zzzy+c0.yyyz;\n                        \n                        r1=r0*cb3[3].yyyy;\n                        r2=cb3[26+a0.x];\n                        r1=r2*cb3[3].xxxx+r1;\n                        r3=cb3[28+a0.x];\n                        r1=r3*cb3[3].zzzz+r1;\n                        r4.yz=c0.yz;\n                        r1=cb3[3].wwww*r4.yyyz+r1;\n                        \n                        r6=r0*cb3[0].yyyy;\n                        r6=r2*cb3[0].xxxx+r6;\n                        r6=r3*cb3[0].zzzz+r6;\n                        r6=cb3[0].wwww*r4.yyyz+r6;\n                        \n                        r7=r0*cb3[1].yyyy;\n                        r7=r2*cb3[1].xxxx+r7;\n                        r7=r3*cb3[1].zzzz+r7;\n                        r7=cb3[1].wwww*r4.yyyz+r7;\n                        \n                        r9=r0*cb3[2].yyyy;\n                        r9=r2*cb3[2].xxxx+r9;\n                        r9=r3*cb3[2].zzzz+r9;\n                        r9=cb3[2].wwww*r4.yyyz+r9;\n                        \n                        r2=v3*c1.xxxx+c1.yyyy;\n                        {\n                            bvec4 tmp=lessThan(c0.yyyy,r2.ywzw);\n                            r3.xy=(vec4(tmp.x?1.0:0.0,tmp.y?1.0:0.0,tmp.z?1.0:0.0,tmp.w?1.0:0.0)).xy;\n                        }\n                        r2=r2*c1.zzzz+c1.wwww;\n                        r2=fract(r2);\n                        r2=r2*c1.xxxx+c1.yyyy;\n                        r0.w=r3.y*r3.x;\n                        r3.xy=vec2(cos(r2.x), sin(r2.x));\n                        r4.xy=vec2(cos(r2.y), sin(r2.y));\n                        r3.xy=r3.xy*abs(r4.yy);\n                        r3.z=r4.x;\n                        r4.xy=vec2(cos(r2.z), sin(r2.z));\n                        r8.xy=vec2(cos(r2.w), sin(r2.w));\n                        r2.xy=r4.xy*abs(r8.yy);\n                        r2.z=r8.x;\n                        r4.xyz=r2.yzx*r3.zxy;\n                        r4.xyz=r3.yzx*r2.zxy+(-r4.xyz);\n                        r8.xyz=mix((-r4.xyz),r4.xyz,r0.www);\n                        r2.x=dot(r8.xyz,r6.xyz);\n                        r2.y=dot(r8.xyz,r7.xyz);\n                        r2.z=dot(r8.xyz,r9.xyz);\n                        \n                        r5.xyz=r5.xyz+r2.xyz*cb0[0].w;\n                        r2.x=dot(r5,r6);\n                        r2.y=dot(r5,r7);\n                        r2.z=dot(r5,r9);\n                        r2.w=dot(r5,r1);\n                        gl_Position.x=dot(r2,cb1[4]);\n                        gl_Position.y=dot(r2,cb1[5]);\n                        gl_Position.z=dot(r2,cb1[6]);\n                        gl_Position.w=dot(r2,cb1[7]);\n                    }\n                "},ps:a.techniques.Main.ps}}}},"../shaders/quad/extended/quadUtilityHeatV5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadUtilityHeatV5",(function(){return s})),r.d(t,"skinnedQuadUtilityHeatV5",(function(){return f}));var n=r("../shaders/shared/func.js"),i=r("../shaders/quad/shared/vs.js"),o=r("../shaders/quad/shared/index.js"),a=r("../shaders/shared/texture.js"),u=r("../shaders/quad/extended/func.js"),c=r("../shaders/quad/extended/constant.js"),l=r("../shaders/shared/constant.js"),s={name:"quadUtilityHeatV5",description:"quad heat utility shader",techniques:{Main:{vs:i.quadV5_PosTexTanTex,ps:{constants:[o.constant.GeneralData,l.Time,c.SelectorMode,c.SelectorColor,o.constant.Mtl1HeatGlowData,o.constant.Mtl2HeatGlowData,o.constant.Mtl3HeatGlowData,o.constant.Mtl4HeatGlowData],textures:[o.texture.AlbedoMap,o.texture.RoughnessMap,o.texture.NormalMap,o.texture.AoMap,o.texture.PaintMaskMap,o.texture.MaterialMap,o.texture.DirtMap,o.texture.GlowMap,o.texture.PatternMask1Map,o.texture.PatternMask2Map,o.texture.HeatGlowNoiseMap,a.DustNoiseMap],shader:"\n\n                    ".concat(o.ps.headerNoShadow,"\n                    ").concat(n.clampToBorder,"\n                    ").concat(u.getMaterialMask,"\n                    ").concat(u.pulse,"\n\n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord6;\n                    varying vec4 texcoord7;\n                    \n                    uniform sampler2D s0;   // AlbedoMap\n                    uniform sampler2D s1;   // RoughnessMap\n                    uniform sampler2D s2;   // NormalMap\n                    uniform sampler2D s3;   // AoMap\n                    uniform sampler2D s4;   // PaintMaskMap\n                    uniform sampler2D s5;   // MaterialMap\n                    uniform sampler2D s6;   // DirtMap\n                    uniform sampler2D s7;   // GlowMap\n                    uniform sampler2D s8;   // PatternMask1Map\n                    uniform sampler2D s9;   // PatternMask2Map\n                    uniform sampler2D s10;  // HeatGlowNoiseMap\n                    uniform sampler2D s11;  // DustNoiseMap\n                    \n                    uniform vec4 cb4[14];\n                    uniform vec4 cb7[8];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 r0;\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v5=texcoord5;\n                        v6=texcoord6;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        int mode = int(cb7[2].x);\n                        vec3 color;\n                        if (mode==").concat(c.Mode.NORMALS,")color=v1.xyz;\n                        else if(mode==").concat(c.Mode.BI_TANGENTS,")color=v2.xyz;                       \n                        else if(mode==").concat(c.Mode.TANGENTS,")color=v3.xyz;\n                        else if(mode==").concat(c.Mode.ALBEDO_MAP,")color=texture2D(s0,v0.xy).xyz;                   \n                        else if(mode==").concat(c.Mode.ROUGHNESS_MAP,")color=texture2D(s1,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.NORMAL_MAP,")color=texture2D(s2,v0.xy).xyz;\n                        else if(mode==").concat(c.Mode.NORMAL_MAP_POSITIVE,")color=texture2D(s2,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.NORMAL_MAP_NEGATIVE,")color=texture2D(s2,v0.xy).yyy;\n                        else if(mode==").concat(c.Mode.AMBIENT_OCCLUSION_MAP,")color=texture2D(s3,mix(v0.xy,v0.zw,cb7[0].yy)).xxx;                            \n                        else if(mode==").concat(c.Mode.PAINT_MASK,")color=texture2D(s4,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.MATERIAL_MAP,")color=texture2D(s5,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.MATERIAL_1_MASK,")color=getMaterialMask(s5,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.MATERIAL_2_MASK,")color=getMaterialMask(s5,v0.xy).yyy;\n                        else if(mode==").concat(c.Mode.MATERIAL_3_MASK,")color=getMaterialMask(s5,v0.xy).zzz;\n                        else if(mode==").concat(c.Mode.MATERIAL_4_MASK,")color=getMaterialMask(s5,v0.xy).www;                \n                        else if(mode==").concat(c.Mode.DIRT_MASK,")color=texture2D(s6,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.GLOW_MASK,")color=texture2D(s7, v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.PATTERN_1_MASK,"){\n                            r0=getMaterialMask(s5,v0.xy);\n                            r0=cb4[12]*r0;\n                            if(any(greaterThan(r0,vec4(0.0)))){\n                                color=clampToBorder(s8,v6.xy,cb4[10].yz).xxx;                          \n                            }\n                        }\n                        else if (mode == ").concat(c.Mode.PATTERN_2_MASK,"){\n                            r0=getMaterialMask(s5,v0.xy);\n                            r0=cb4[13]*r0;   \n                            if(any(greaterThan(r0,vec4(0.0)))){\n                               color=clampToBorder(s9,v6.zw,cb4[11].yz).xxx;                          \n                            }\n                        }\n                        else if (mode == ").concat(c.Mode.DUST_NOISE_MAP,"){\n                            \n                        }\n                        else if(mode==").concat(c.Mode.HEAT,"){\n                            vec4 r1;\n                            vec4 r2;\n                            vec4 r3;\n                            vec4 c26=vec4(3.19148946,1.03191495,0.5,-0.5);\n                            vec4 c31=vec4(0.318309873,-1.44269507e-005,-0.00499999989,66.6666641);\n                            vec4 c34=vec4(1,2,-1,0);\n                            r2=getMaterialMask(s5,v0.xy);\n                            r1=r2.yyyy*cb7[4];\n                            r1=r2.xxxx*cb7[5]+r1;\n                            r1=r2.zzzz*cb7[6]+r1;\n                            r1=r2.wwww*cb7[7]+r1;\n                            r2.xy=r1.yy*cb7[1].xx+v0.xy;\n                            r2.xy=r1.zz*r2.xy;\n                            r2=texture2D(s10,r2.xy);\n                            r2.zw=r1.yy*(-cb7[1].xx)+v0.xy;\n                            r1.yz=r1.zz*r2.zw;\n                            r3=texture2D(s10,r1.yz);\n                            r1.yz=r2.xy*r3.xy+c26.ww;\n                            r2.z=c31.z;\n                            r0.w=r2.z+cb4[0].x;\n                            r0.w=saturate(r0.w*c31.w);\n                            r0.w=r0.w+c34.z;\n                            r0.w=saturate(r1.x*r0.w+c34.x);\n                            r1.x=r1.w*r0.w;\n                            r1.xy=r1.xx*r1.yz+v0.xy;\n                            color=texture2D(s7,r1.xy).xxx*c34.y;\n                        }\n                        \n                        gl_FragData[0]=pulse(cb7[2].z,cb7[1].y,color,cb7[3]);\n                    }\n                ")}}}},f={name:"skinned_QuadUtilityHeatV5",description:"skinned ".concat(s.description),techniques:{Main:{vs:i.skinnedQuadV5_PosBwtTexTanTex,ps:s.techniques.Main.ps}}}},"../shaders/quad/extended/quadUtilitySailsV5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadUtilitySailsV5",(function(){return f})),r.d(t,"skinnedQuadUtilitySailsV5",(function(){return p}));var n=r("../shaders/shared/func.js"),i=r("../shaders/quad/shared/vs.js"),o=r("../shaders/quad/shared/index.js"),a=r("../shaders/shared/texture.js"),u=r("../shaders/quad/extended/func.js"),c=r("../shaders/quad/extended/constant.js"),l=r("../shaders/shared/constant.js"),s=r("../shaders/quad/shared/constant.js"),f={name:"quadUtilitySailsV5",description:"quad sails utility shader",techniques:{Main:{vs:i.quadV5_PosTexTanTex,ps:{constants:[o.constant.GeneralData,l.Time,c.SelectorMode,c.SelectorColor,s.SailsDetailData],textures:[o.texture.AlbedoMap,o.texture.RoughnessMap,o.texture.NormalMap,o.texture.AoMap,o.texture.PaintMaskMap,o.texture.MaterialMap,o.texture.DirtMap,o.texture.GlowMap,o.texture.SailsDetailMap,a.DustNoiseMap],shader:"\n\n                    ".concat(o.ps.headerNoShadow,"\n                    ").concat(n.clampToBorder,"\n                    ").concat(u.getMaterialMask,"\n                    ").concat(u.pulse,"\n\n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord5;\n                    \n                    uniform sampler2D s0;   // AlbedoMap\n                    uniform sampler2D s1;   // RoughnessMap\n                    uniform sampler2D s2;   // NormalMap\n                    uniform sampler2D s3;   // AoMap\n                    uniform sampler2D s4;   // PaintMaskMap\n                    uniform sampler2D s5;   // MaterialMap\n                    uniform sampler2D s6;   // DirtMap\n                    uniform sampler2D s7;   // GlowMap\n                    uniform sampler2D s8;   // SailsDetailMap;\n                    uniform sampler2D s9;   // DustNoiseMap\n                    \n                    uniform vec4 cb4[14];\n                    uniform vec4 cb7[5];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v5;\n                        vec4 r0;\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v5=texcoord5;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        int mode=int(cb7[2].x);\n                        r0.x=texture2D(s4,v0.xy).x;\n                        if (mode!=").concat(c.Mode.PAINT_MASK,"&&r0.x>0.0) discard;\n                        vec3 color;\n                        if(mode==").concat(c.Mode.PAINT_MASK,")color=r0.xxx;\n                        else if(mode==").concat(c.Mode.NORMALS,")color=v1.xyz;\n                        else if(mode==").concat(c.Mode.BI_TANGENTS,")color=v2.xyz;\n                        else if(mode==").concat(c.Mode.TANGENTS,")color=v3.xyz;\n                        else if(mode==").concat(c.Mode.ALBEDO_MAP,")color=texture2D(s0,v0.xy).xyz;                \n                        else if(mode==").concat(c.Mode.ROUGHNESS_MAP,")color=texture2D(s1,v0.xy).xxx; \n                        else if(mode==").concat(c.Mode.NORMAL_MAP,")color=texture2D(s2,v0.xy).xyz;\n                        else if(mode==").concat(c.Mode.NORMAL_MAP_POSITIVE,")color=texture2D(s2,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.NORMAL_MAP_NEGATIVE,")color=texture2D(s2,v0.xy).yyy;\n                        else if(mode==").concat(c.Mode.AMBIENT_OCCLUSION_MAP,")color=texture2D(s3,mix(v0.xy,v0.zw,cb7[0].yy)).xxx;\n                        else if(mode==").concat(c.Mode.MATERIAL_MAP,")color=texture2D(s5,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.DIRT_MASK,")color=texture2D(s6,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.GLOW_MASK,")color=texture2D(s7, v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.MATERIAL_2_MASK,")color==getMaterialMask(s5,v0.xy).yyy;\n                        else if(mode==").concat(c.Mode.SAILS_MAP,"||mode==").concat(c.Mode.SAILS_MAP_PATTERN,"||mode==").concat(c.Mode.SAILS_MAP_BACKGROUND,"){\n                            r0.x=getMaterialMask(s5,v0.xy).x;\n                            if (r0.x!=0.0){\n                                vec4 c16=vec4(0.159154937,0.5,6.28318548,-3.14159274);\n                                vec4 c25=vec4(-1,-0,2,0);\n                                vec4 c26=vec4(1,-1,0.5,-0.5);\n                                vec4 r1;\n                                vec4 r2;\n                                vec4 r3;\n                                vec4 r4;\n                                r1.yz=cb7[4].xx*v0.xy;\n                                r2.xy=c16.xy;\n                                r0.x=cb7[4].y*r2.x+r2.y;            \n                                r0.x=fract(r0.x);\n                                r0.x=r0.x*c16.z+c16.w;\n                                r3.xy=vec2(cos(r0.x),sin(r0.x));            \n                                r4.y=dot(r3.yx,r1.yz)+c25.w;\n                                r2.xz=r3.xy*c26.xy;\n                                r4.x=dot(r2.xz,r1.yz)+c25.w;\n                                r3.x=texture2D(s8,r4.xy).x;\n                                if (mode==").concat(c.Mode.SAILS_MAP,") color=c26.xxx; \n                                else if(mode==").concat(c.Mode.SAILS_MAP_BACKGROUND,"&&r3.x>0.9)color=c26.xxx; \n                                else if(mode==").concat(c.Mode.SAILS_MAP_PATTERN,"&&r3.x<=0.9)color=c26.xxx;\n                            }\n                        }\n                        else if (mode==").concat(c.Mode.DUST_NOISE_MAP,"){\n                            \n                        }\n                        \n                        gl_FragData[0]=pulse(cb7[2].z,cb7[1].y,color,cb7[3]);\n                    }\n                ")}}}},p={name:"skinned_quadUtilityV5",description:"skinned ".concat(f.description),techniques:{Main:{vs:i.skinnedQuadV5_PosBwtTexTanTex,ps:f.techniques.Main.ps}}}},"../shaders/quad/extended/quadUtilityV5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadUtilityV5",(function(){return s})),r.d(t,"skinnedQuadUtilityV5",(function(){return f}));var n=r("../shaders/shared/func.js"),i=r("../shaders/quad/shared/vs.js"),o=r("../shaders/quad/shared/index.js"),a=r("../shaders/shared/texture.js"),u=r("../shaders/quad/extended/func.js"),c=r("../shaders/quad/extended/constant.js"),l=r("../shaders/shared/constant.js"),s={name:"quadUtilityV5",description:"quad utility shader",techniques:{Main:{vs:i.quadV5_PosTexTanTex,ps:{constants:[o.constant.GeneralData,l.Time,c.SelectorMode,c.SelectorColor],textures:[o.texture.AlbedoMap,o.texture.RoughnessMap,o.texture.NormalMap,o.texture.AoMap,o.texture.PaintMaskMap,o.texture.MaterialMap,o.texture.DirtMap,o.texture.GlowMap,o.texture.PatternMask1Map,o.texture.PatternMask2Map,a.DustNoiseMap],shader:"\n\n                    ".concat(o.ps.headerNoShadow,"\n                    ").concat(n.clampToBorder,"\n                    ").concat(u.getMaterialMask,"\n                    ").concat(u.pulse,"\n\n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord6;\n                    varying vec4 texcoord7;\n                    \n                    uniform sampler2D s0;   // AlbedoMap\n                    uniform sampler2D s1;   // RoughnessMap\n                    uniform sampler2D s2;   // NormalMap\n                    uniform sampler2D s3;   // AoMap\n                    uniform sampler2D s4;   // PaintMaskMap\n                    uniform sampler2D s5;   // MaterialMap\n                    uniform sampler2D s6;   // DirtMap\n                    uniform sampler2D s7;   // GlowMap\n                    uniform sampler2D s8;   // PatternMask1Map;\n                    uniform sampler2D s9;   // PatternMask2Map;\n                    uniform sampler2D s10;  // DustNoiseMap\n                    \n                    uniform vec4 cb4[14];\n                    uniform vec4 cb7[4];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 r0;\n\n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v5=texcoord5;\n                        v6=texcoord6;\n                        v7=texcoord7;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        int mode = int(cb7[2].x);\n                        vec3 color;\n                        if (mode==").concat(c.Mode.NORMALS,")color=v1.xyz;\n                        else if(mode==").concat(c.Mode.BI_TANGENTS,")color=v2.xyz;                       \n                        else if(mode==").concat(c.Mode.TANGENTS,")color=v3.xyz;\n                        else if(mode==").concat(c.Mode.ALBEDO_MAP,")color=texture2D(s0,v0.xy).xyz;                   \n                        else if(mode==").concat(c.Mode.ROUGHNESS_MAP,")color=texture2D(s1,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.NORMAL_MAP,")color=texture2D(s2,v0.xy).xyz;\n                        else if(mode==").concat(c.Mode.NORMAL_MAP_POSITIVE,")color=texture2D(s2,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.NORMAL_MAP_NEGATIVE,")color=texture2D(s2,v0.xy).yyy;\n                        else if(mode==").concat(c.Mode.AMBIENT_OCCLUSION_MAP,")color=texture2D(s3,mix(v0.xy,v0.zw,cb7[0].yy)).xxx;                            \n                        else if(mode==").concat(c.Mode.PAINT_MASK,")color=texture2D(s4,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.MATERIAL_MAP,")color=texture2D(s5,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.MATERIAL_1_MASK,")color=getMaterialMask(s5,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.MATERIAL_2_MASK,")color=getMaterialMask(s5,v0.xy).yyy;\n                        else if(mode==").concat(c.Mode.MATERIAL_3_MASK,")color=getMaterialMask(s5,v0.xy).zzz;\n                        else if(mode==").concat(c.Mode.MATERIAL_4_MASK,")color=getMaterialMask(s5,v0.xy).www;                \n                        else if(mode==").concat(c.Mode.DIRT_MASK,")color=texture2D(s6,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.GLOW_MASK,")color=texture2D(s7,v0.xy).xxx;\n                        else if(mode==").concat(c.Mode.PATTERN_1_MASK,")\n                        {\n                            r0=getMaterialMask(s5,v0.xy);\n                            r0=cb4[12]*r0;\n                            if(any(greaterThan(r0,vec4(0.0))))\n                            {\n                                color=clampToBorder(s8,v6.xy,cb4[10].yz).xxx;                          \n                            }\n                        }\n                        else if (mode == ").concat(c.Mode.PATTERN_2_MASK,")\n                        {\n                            r0=getMaterialMask(s5,v0.xy);\n                            r0=cb4[13]*r0;   \n                            if(any(greaterThan(r0,vec4(0.0))))\n                            {\n                               color=clampToBorder(s9,v6.zw,cb4[11].yz).xxx;                          \n                            }\n                        }\n                        else if (mode == ").concat(c.Mode.DUST_NOISE_MAP,")\n                        {\n                            \n                        }\n                        \n                        gl_FragData[0]=pulse(cb7[2].z,cb7[1].y,color,cb7[3]);\n                    }\n                ")}}}},f={name:"skinned_quadUtilityV5",description:"skinned ".concat(s.description),techniques:{Main:{vs:i.skinnedQuadV5_PosBwtTexTanTex,ps:s.techniques.Main.ps}}}},"../shaders/quad/index.js":function(e,t,r){"use strict";r.r(t);var n=r("../shaders/quad/quaddepthv5.js");r.d(t,"quadDepthV5",(function(){return n.quadDepthV5})),r.d(t,"skinnedQuadDepthV5",(function(){return n.skinnedQuadDepthV5}));var i=r("../shaders/quad/quaddetailv5.js");r.d(t,"quadDetailV5",(function(){return i.quadDetailV5})),r.d(t,"skinnedQuadDetailV5",(function(){return i.skinnedQuadDetailV5}));var o=r("../shaders/quad/quadglassv5.js");r.d(t,"quadGlassV5",(function(){return o.quadGlassV5})),r.d(t,"skinnedQuadGlassV5",(function(){return o.skinnedQuadGlassV5}));var a=r("../shaders/quad/quadheatv5.js");r.d(t,"quadHeatV5",(function(){return a.quadHeatV5})),r.d(t,"skinnedQuadHeatV5",(function(){return a.skinnedQuadHeatV5}));var u=r("../shaders/quad/quadheatdetailv5.js");r.d(t,"quadHeatDetailV5",(function(){return u.quadHeatDetailV5})),r.d(t,"skinnedQuadHeatDetailV5",(function(){return u.skinnedQuadHeatDetailV5}));var c=r("../shaders/quad/quadinstancedv5.js");r.d(t,"quadInstancedV5",(function(){return c.quadInstancedV5})),r.d(t,"skinnedQuadInstancedV5",(function(){return c.skinnedQuadInstancedV5}));var l=r("../shaders/quad/quadoilv5.js");r.d(t,"quadOilV5",(function(){return l.quadOilV5})),r.d(t,"skinnedQuadOilV5",(function(){return l.skinnedQuadOilV5}));var s=r("../shaders/quad/quadpickingv5.js");r.d(t,"quadPickingV5",(function(){return s.quadPickingV5})),r.d(t,"skinnedQuadPickingV5",(function(){return s.skinnedQuadPickingV5}));var f=r("../shaders/quad/quadsailsv5.js");r.d(t,"quadSailsV5",(function(){return f.quadSailsV5})),r.d(t,"skinnedQuadSailsV5",(function(){return f.skinnedQuadSailsV5}));var p=r("../shaders/quad/quadturretv5.js");r.d(t,"quadTurretV5",(function(){return p.quadTurretV5}));var d=r("../shaders/quad/quadv5.js");r.d(t,"quadV5",(function(){return d.quadV5})),r.d(t,"skinnedQuadV5",(function(){return d.skinnedQuadV5}));var y=r("../shaders/quad/quadwreckv5.js");r.d(t,"quadWreckV5",(function(){return y.quadWreckV5}));var m=r("../shaders/quad/quadenvironmentv5.js");r.d(t,"quadEnvironmentV5",(function(){return m.quadEnvironmentV5})),r.d(t,"skinnedQuadEnvironmentV5",(function(){return m.skinnedQuadEnvironmentV5}))},"../shaders/quad/quaddepthv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadDepthV5",(function(){return i})),r.d(t,"skinnedQuadDepthV5",(function(){return o}));var n=r("../shaders/quad/shared/index.js"),i={name:"quadDepthV5",description:"depth quad shader",techniques:{Main:{vs:n.vs.quadV5_PosTex,ps:{shader:"\n\n                    ".concat(n.ps.headerNoShadow,"\n                    \n                    varying vec4 texcoord;\n                    uniform vec4 cb4[3];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 r0;\n                        vec4 c0=vec4(0,1,0,0);\n                        v0=texcoord;\n                        r0.xyz=(-cb4[1].xyz)+v0.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        gl_FragData[0]=c0.xxxy;\n                    }\n                    \n                ")}}}},o={name:"skinned_quadDepthV5",description:"skinned ".concat(i.description),techniques:{Main:{vs:n.vs.skinnedQuadV5_PosBwtTex,ps:i.techniques.Main.ps}}}},"../shaders/quad/quaddetailv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadDetailV5",(function(){return s})),r.d(t,"skinnedQuadDetailV5",(function(){return f}));var n=r("../shaders/quad/quaddepthv5.js"),i=r("../shaders/quad/quadpickingv5.js"),o=r("../shaders/quad/shared/index.js"),a=r("../shaders/shared/func.js"),u=r("../shaders/shared/texture.js"),c=r("../shaders/quad/extended/quadEmissiveV5.js"),l=r("../shaders/quad/extended/quadOutlineV5.js"),s={name:"quadDetailV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/quadDetailV5",description:"detail quad shader",todo:"Add dirt",techniques:{Depth:n.quadDepthV5.techniques.Main,Picking:i.quadPickingV5.techniques.Main,Emissive:c.quadEmissiveV5.techniques.Main,Outline:l.quadOutlineV5.techniques.Main,Main:{vs:o.vs.quadV5_PosTexTanTex,ps:{constants:[o.constant.GeneralData,o.constant.GeneralGlowColor,o.constant.Mtl1DiffuseColor,o.constant.Mtl2DiffuseColor,o.constant.Mtl3DiffuseColor,o.constant.Mtl4DiffuseColor,o.constant.Mtl1FresnelColor,o.constant.Mtl2FresnelColor,o.constant.Mtl3FresnelColor,o.constant.Mtl4FresnelColor,o.constant.Mtl1Gloss,o.constant.Mtl2Gloss,o.constant.Mtl3Gloss,o.constant.Mtl4Gloss,o.constant.PMtl1DiffuseColor,o.constant.PMtl1FresnelColor,o.constant.PMtl1Gloss,o.constant.PMtl2DiffuseColor,o.constant.PMtl2FresnelColor,o.constant.PMtl2Gloss,o.constant.Detail1Data,o.constant.Detail2Data,o.constant.Detail3Data,o.constant.DetailAlbedoColor,o.constant.DetailFresnelColor,o.constant.DetailSelector,o.constant.Mtl1DustDiffuseColor,o.constant.Mtl2DustDiffuseColor,o.constant.Mtl3DustDiffuseColor,o.constant.Mtl4DustDiffuseColor],textures:[u.EveSpaceSceneEnvMap,u.EveSpaceSceneShadowMap,o.texture.AlbedoMap,o.texture.RoughnessMap,o.texture.NormalMap,o.texture.AoMap,o.texture.PaintMaskMap,o.texture.MaterialMap,o.texture.DirtMap,o.texture.GlowMap,o.texture.PatternMask1Map,o.texture.PatternMask2Map,u.DustNoiseMap,o.texture.Detail1Map,o.texture.Detail2Map,o.texture.Detail3Map],shader:"\n                \n                    ".concat(o.ps.header,"\n                    ").concat(a.clampToBorder,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord6;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    \n                    uniform samplerCube s0;\n                    uniform sampler2D s1;\n                    uniform sampler2D s2;   // AlbedoMap\n                    uniform sampler2D s3;   // RoughnessMap\n                    uniform sampler2D s4;   // NormalMap\n                    uniform sampler2D s5;   // AoMap\n                    uniform sampler2D s6;   // PaintMaskMap\n                    uniform sampler2D s7;   // MaterialMap\n                    uniform sampler2D s8;   // DirtMap\n                    uniform sampler2D s9;   // GlowMap\n                    uniform sampler2D s10;  // PatternMask1Map;\n                    uniform sampler2D s11;  // PatternMask2Map;\n                    uniform sampler2D s12;  // DustNoiseMap\n                    uniform sampler2D s13;  // Detail1Map\n                    uniform sampler2D s14;  // Detail2Map\n                    uniform sampler2D s15;  // Detail3Map\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[14];\n                    uniform vec4 cb7[30];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 v8;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r10;\n                        vec4 r11;\n                        vec4 r12;\n                        vec4 r13;\n                        vec4 r14;\n                        vec4 r15;\n                        vec4 r16;\n                        vec4 r17;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        vec4 c26=vec4(9.99999997e-007,-5,0.400000006,3.14159274);\n                        vec4 c27=vec4(1,2,-1,0);\n                        vec4 c28=vec4(-0,-0.333333343,-0.666666687,-1);\n                        vec4 c29=vec4(3.19148946,1.03191495,0.5,-0.5);\n                        vec4 c30=vec4(0.0383840017,0.0393519998,0.0391650014,9.99999987e+014);\n                        vec4 c31=vec4(1.10000002,6,-9.27999973,7);\n                        vec4 c32=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c33=vec4(0,-0.015625,0.75,0.119999997);\n                        vec4 c34=vec4(0.318309873,-1.44269507e-005,-0.00313080009,12.9200001);\n                        vec4 c35=vec4(0.416666657,1.05499995,-0.0549999997,0);\n                        vec4 c36=vec4(-1,-2,-3,-4);\n                        vec4 c37=vec4(3.14159274,-1e-015,1,1.54499996);\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord6;\n                        v7=texcoord7;\n                        v8=texcoord8;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        // PaintMaskMap\n                        r0.x=texture2D(s6,v0.xy).x * ").concat(o.texture.PaintMaskMap.multiplier,";  \n                        \n                        // MaterialMap\n                        r0.y=texture2D(s7,v0.xy).x;    \n                        \n                        // DirtMap (Not required here) <----------------------------------------------------------------    \n                        r0.z=texture2D(s8,v0.xy).x;   \n                        \n                        // GlowMap     \n                        r0.w=texture2D(s9,v0.xy).x; \n                        \n                        gl_FragData[0].w=(-r0.x)+c27.x;\n                        r0.z=(-cb2[19].x)+cb2[19].y;\n                        r0.z=1.0/r0.z;\n                        r1.x=(-cb2[19].x)+v7.z;\n                        r0.z=r0.z*r1.x;\n                        r0.z=sqrt(abs(r0.z));\n                        r1.x=1.0/v8.w;\n                        r1.xy=r1.xx*v8.xy;\n                        r1.xy=r1.xy*c29.zw+c29.zz;\n                        r1.z=c29.z;\n                        r1.xy=cb2[18].xy*r1.zz+r1.xy;\n                        r1=texture2D(s1,r1.xy);\n                        r1.z=r0.z+(-r1.x);\n                        r1.y=r1.x*(-r1.x)+r1.y;\n                        r1.x=r1.x+cb2[18].z;\n                        r0.z=(-r0.z)+r1.x;\n                        r0.z=r0.z>=0.0?c27.x:c27.w;\n                        r2.x=max(r1.y,c26.x);\n                        r1.x=r1.z*r1.z+r2.x;\n                        r1.x=1.0/r1.x;\n                        r1.x=r1.x*r2.x;\n                        r2.x=saturate(max(r0.z,r1.x));\n                        r0.z=r2.x+(-cb2[18].w);\n                        r1.x=c27.x;\n                        r1.y=r1.x+(-cb2[18].w);\n                        r1.y=1.0/r1.y;\n                        r0.z=saturate(r0.z*r1.y);\n                        r0.z=(-cb2[19].x)>=0.0?r0.z:r1.x;\n                        r1.x=max(cb2[19].z,r0.z);\n                        r0.z=r1.x*r1.x;\n                        r1.xyz=r0.zzz*cb2[13].xyz;\n                        r1.xyz=r1.xyz*(-c28.zzz);\n                        r0.z=dot(v4.xyz,v4.xyz);\n                        r0.z=r0.z==0.0?3.402823466e+38:inversesqrt(abs(r0.z));\n                        r2.xyz=v4.xyz*r0.zzz+cb2[12].xyz;\n                        r3.xyz=r0.zzz*v4.xyz;\n                        r4.xyz=normalize(r2.xyz);\n                        r0.z=clamp(dot(cb2[12].xyz,r4.xyz),0.0, 1.0);\n                        r0.z=(-r0.z)+c27.x;\n                        r1.w=r0.z*r0.z;\n                        r1.w=r1.w*r1.w;\n                        r0.z=r0.z*r1.w;\n                       \n                        // Detail 2 map\n                        r2.xy=cb7[21].xx*v0.xy+cb7[21].zw;\n                        r2=texture2D(s14,r2.xy);\n                        r1.w=r2.w*cb7[21].y;\n                        \n                        // Detail 1 map\n                        r5.xy=cb7[20].xx*v0.xy+cb7[20].zw;\n                        r5=texture2D(s13,r5.xy);\n                        r1.w=cb7[20].y*r5.w+r1.w;\n                        \n                        r5.xyz=r5.xyz*c27.yyy+c27.zzz;\n                        r2.xyz=r2.xyz*c27.yyy+r5.xyz;\n                        \n                        // Detail 3 map\n                        r5.xy=cb7[22].xx*v0.xy+cb7[22].zw;\n                        r5=texture2D(s15,r5.xy);\n                        r1.w=saturate(cb7[22].y*r5.w+r1.w);\n                        \n                        r2.xyz=r5.xyz*c27.yyy+r2.xyz;\n                        r2.xyz=r2.xyz+(-c27.yyy);\n                        r5=r0.yyyy+c28;\n                        r5=r5*c29.xxxx;\n                        r5=saturate((-abs(r5))+c29.yyyy);\n                        \n                        r0.y=dot(cb7[25],r5);\n                        r1.w=r0.y*r1.w;\n                        r6.x=cb4[11].x;\n                        r2.w=r6.x+c26.y;\n                        r7.xyz=cb7[18].xyz;\n                        {bvec3 tmp=greaterThanEqual(r2.www,vec3(0.0));r6.yzw=vec3(tmp.x?r7.x:cb7[15].x,tmp.y?r7.y:cb7[15].y,tmp.z?r7.z:cb7[15].z);};\n                        r8=r6.xxxx+c36;\n                        {bvec3 tmp=greaterThanEqual(r8.www,vec3(0.0));r6.xyz=vec3(tmp.x?r6.y:cb7[9].x,tmp.y?r6.z:cb7[9].y,tmp.z?r6.w:cb7[9].z);};\n                        {bvec3 tmp=greaterThanEqual(r8.zzz,vec3(0.0));r6.xyz=vec3(tmp.x?r6.x:cb7[8].x,tmp.y?r6.y:cb7[8].y,tmp.z?r6.z:cb7[8].z);};\n                        {bvec3 tmp=greaterThanEqual(r8.yyy,vec3(0.0));r6.xyz=vec3(tmp.x?r6.x:cb7[7].x,tmp.y?r6.y:cb7[7].y,tmp.z?r6.z:cb7[7].z);};\n                        {bvec3 tmp=greaterThanEqual(r8.xxx,vec3(0.0));r6.xyz=vec3(tmp.x?r6.x:cb7[6].x,tmp.y?r6.y:cb7[6].y,tmp.z?r6.z:cb7[6].z);};\n                        r9.x=cb4[10].x;\n                        r3.w=r9.x+c26.y;\n                        {bvec3 tmp=greaterThanEqual(r3.www,vec3(0.0));r7.xyz=vec3(tmp.x?r7.x:cb7[15].x,tmp.y?r7.y:cb7[15].y,tmp.z?r7.z:cb7[15].z);};\n                        r9=r9.xxxx+c36;\n                        {bvec3 tmp=greaterThanEqual(r9.www,vec3(0.0));r7.xyz=vec3(tmp.x?r7.x:cb7[9].x,tmp.y?r7.y:cb7[9].y,tmp.z?r7.z:cb7[9].z);};\n                        {bvec3 tmp=greaterThanEqual(r9.zzz,vec3(0.0));r7.xyz=vec3(tmp.x?r7.x:cb7[8].x,tmp.y?r7.y:cb7[8].y,tmp.z?r7.z:cb7[8].z);};\n                        {bvec3 tmp=greaterThanEqual(r9.yyy,vec3(0.0));r7.xyz=vec3(tmp.x?r7.x:cb7[7].x,tmp.y?r7.y:cb7[7].y,tmp.z?r7.z:cb7[7].z);};\n                        {bvec3 tmp=greaterThanEqual(r9.xxx,vec3(0.0));r7.xyz=vec3(tmp.x?r7.x:cb7[6].x,tmp.y?r7.y:cb7[6].y,tmp.z?r7.z:cb7[6].z);};\n                        \n                        // webgl doesn't support CLAMP_TO_BORDER\n                        \n                        // PatternMask1Map\n                        r10=clampToBorder(s10,v6.xy, cb4[10].yz, c27.wwww);\n                        \n                        // PatternMask2Map\n                        r12=clampToBorder(s11,v6.zw, cb4[11].yz, c27.wwww);\n                        \n                        r10=r10.xxxx*cb4[12];\n                        r11.xyz=mix(cb7[6].xyz,r7.xyz,r10.xxx);\n                        r12=r12.xxxx*cb4[13];\n                        r13.xyz=mix(r11.xyz,r6.xyz,r12.xxx);\n                        r11.xyz=mix(cb7[7].xyz,r7.xyz,r10.yyy);\n                        r14.xyz=mix(r11.xyz,r6.xyz,r12.yyy);\n                        r11.xyz=r5.yyy*r14.xyz;\n                        r11.xyz=r5.xxx*r13.xyz+r11.xyz;\n                        r13.xyz=mix(cb7[8].xyz,r7.xyz,r10.zzz);\n                        r14.xyz=mix(cb7[9].xyz,r7.xyz,r10.www);\n                        r7.xyz=mix(r14.xyz,r6.xyz,r12.www);\n                        r14.xyz=mix(r13.xyz,r6.xyz,r12.zzz);\n                        r6.xyz=r5.zzz*r14.xyz+r11.xyz;\n                        r6.xyz=r5.www*r7.xyz+r6.xyz;\n                        r7.xyz=mix(r6.xyz,cb7[24].xyz,r1.www);\n                        \n                        // AlbedoMap \n                        r6.xyz=texture2D(s2,v0.xy).xyz;    \n                        \n                        // RoughnessMap    \n                        r6.w=texture2D(s3,v0.xy).x;  \n                        \n                        r11.xyz=r7.xyz*r6.www;\n                        r7.xyz=r6.www*(-r7.xyz)+c30.xyz;\n                        r0.x=r0.x*cb7[0].x;\n                        r7.xyz=r0.xxx*r7.xyz+r11.xyz;\n                        r11.xyz=mix(r7.xyz,c27.xxx,r0.zzz);\n                        r13.x=cb7[19].x;\n                        r0.z=r2.w>=0.0?r13.x:cb7[16].x;\n                        r14.xyz=cb7[17].xyz;\n                        {bvec3 tmp=greaterThanEqual(r2.www,vec3(0.0));r13.yzw=vec3(tmp.x?r14.x:cb7[14].x,tmp.y?r14.y:cb7[14].y,tmp.z?r14.z:cb7[14].z);};\n                        {bvec3 tmp=greaterThanEqual(r8.www,vec3(0.0));r13.yzw=vec3(tmp.x?r13.y:cb7[5].x,tmp.y?r13.z:cb7[5].y,tmp.z?r13.w:cb7[5].z);};\n                        {bvec3 tmp=greaterThanEqual(r8.zzz,vec3(0.0));r13.yzw=vec3(tmp.x?r13.y:cb7[4].x,tmp.y?r13.z:cb7[4].y,tmp.z?r13.w:cb7[4].z);};\n                        {bvec3 tmp=greaterThanEqual(r8.yyy,vec3(0.0));r13.yzw=vec3(tmp.x?r13.y:cb7[3].x,tmp.y?r13.z:cb7[3].y,tmp.z?r13.w:cb7[3].z);};\n                        {bvec3 tmp=greaterThanEqual(r8.xxx,vec3(0.0));r13.yzw=vec3(tmp.x?r13.y:cb7[2].x,tmp.y?r13.z:cb7[2].y,tmp.z?r13.w:cb7[2].z);};\n                        r0.z=r8.w>=0.0?r0.z:cb7[13].x;\n                        r0.z=r8.z>=0.0?r0.z:cb7[12].x;\n                        r0.z=r8.y>=0.0?r0.z:cb7[11].x;\n                        r0.z=r8.x>=0.0?r0.z:cb7[10].x;\n                        r2.w=r3.w>=0.0?r13.x:cb7[16].x;\n                        {bvec3 tmp=greaterThanEqual(r3.www,vec3(0.0));r8.xyz=vec3(tmp.x?r14.x:cb7[14].x,tmp.y?r14.y:cb7[14].y,tmp.z?r14.z:cb7[14].z);};\n                        {bvec3 tmp=greaterThanEqual(r9.www,vec3(0.0));r8.xyz=vec3(tmp.x?r8.x:cb7[5].x,tmp.y?r8.y:cb7[5].y,tmp.z?r8.z:cb7[5].z);};\n                        {bvec3 tmp=greaterThanEqual(r9.zzz,vec3(0.0));r8.xyz=vec3(tmp.x?r8.x:cb7[4].x,tmp.y?r8.y:cb7[4].y,tmp.z?r8.z:cb7[4].z);};\n                        {bvec3 tmp=greaterThanEqual(r9.yyy,vec3(0.0));r8.xyz=vec3(tmp.x?r8.x:cb7[3].x,tmp.y?r8.y:cb7[3].y,tmp.z?r8.z:cb7[3].z);};\n                        {bvec3 tmp=greaterThanEqual(r9.xxx,vec3(0.0));r8.xyz=vec3(tmp.x?r8.x:cb7[2].x,tmp.y?r8.y:cb7[2].y,tmp.z?r8.z:cb7[2].z);};\n                        r2.w=r9.w>=0.0?r2.w:cb7[13].x;\n                        r2.w=r9.z>=0.0?r2.w:cb7[12].x;\n                        r2.w=r9.y>=0.0?r2.w:cb7[11].x;\n                        r2.w=r9.x>=0.0?r2.w:cb7[10].x;\n                        r3.w=mix(cb7[10].x,r2.w,r10.x);\n                        r4.w=mix(r3.w,r0.z,r12.x);\n                        r3.w=mix(cb7[11].x,r2.w,r10.y);\n                        r7.w=mix(r3.w,r0.z,r12.y);\n                        r3.w=r5.y*r7.w;\n                        r3.w=r5.x*r4.w+r3.w;\n                        r4.w=mix(cb7[12].x,r2.w,r10.z);\n                        r7.w=mix(cb7[13].x,r2.w,r10.w);\n                        r2.w=mix(r7.w,r0.z,r12.w);\n                        r7.w=mix(r4.w,r0.z,r12.z);\n                        r0.z=r5.z*r7.w+r3.w;\n                        r0.z=r5.w*r2.w+r0.z;\n                        r2.w=r0.z*r6.w;\n                        r0.z=r6.w*(-r0.z)+c26.z;\n                        r0.z=r0.x*r0.z+r2.w;\n                        r0.z=saturate((-r0.z)+c27.x);\n                        r9.xy=(-r0.zz)+c37.zw;\n                        r2.w=min(r9.y,c27.x);\n                        r14=c33;\n                        r9=r9.xxxx*c32+r14.xxyz;\n                        r3.w=clamp(dot(r4.xyz,r3.xyz),0.0, 1.0);\n                        r3.w=r3.w*r3.w;\n                        r3.w=r3.w*r2.w+c31.x;\n                        r2.w=(-r2.w)+r3.w;\n                        r2.w=1.0/r2.w;\n                        r14.xyz=r2.www*r11.xyz;\n                        r11.xyz=(-r11.xyz)+c27.xxx;\n                        r15.xyz=mix(cb7[3].xyz,r8.xyz,r10.yyy);\n                        r16.xyz=mix(r15.xyz,r13.yzw,r12.yyy);\n                        r15.xyz=r5.yyy*r16.xyz;\n                        r16.xyz=mix(cb7[2].xyz,r8.xyz,r10.xxx);\n                        r17.xyz=mix(r16.xyz,r13.yzw,r12.xxx);\n                        r15.xyz=r5.xxx*r17.xyz+r15.xyz;\n                        r16.xyz=mix(cb7[4].xyz,r8.xyz,r10.zzz);\n                        r17.xyz=mix(cb7[5].xyz,r8.xyz,r10.www);\n                        r8.xyz=mix(r17.xyz,r13.yzw,r12.www);\n                        r10.xyz=mix(r16.xyz,r13.yzw,r12.zzz);\n                        r5.xyz=r5.zzz*r10.xyz+r15.xyz;\n                        r5.xyz=r5.www*r8.xyz+r5.xyz;\n                        r8.xyz=mix(r5.xyz,cb7[23].xyz,r1.www);\n                        r5.xyz=mix(r8.xyz,c27.xxx,r0.xxx);\n                        r5.xyz=r5.xyz*r6.xyz;\n                        r6.xyz=r11.xyz*r5.xyz;\n                        r0.x=r0.z*r0.z;\n                        r8.w=r0.z*c31.y;\n                        r0.z=r0.x*r0.x+c27.z;\n                        \n                        // NormalMap \n                        r10.ywx=texture2D(s4,v0.xy).xyz; \n                        \n                        // AoMap\n                        r10.z=texture2D(s5,v0.xy).x;   \n                        \n                        r10.xy=r10.yw*c27.yy+c27.zz;\n                        r1.w=saturate(dot(r10.xy,r10.xy)+c27.w);\n                        r1.w=(-r1.w)+c27.x;\n                        r1.w=r1.w==0.0?3.402823466e+38:inversesqrt(abs(r1.w));\n                        r10.z=1.0/r1.w;\n                        r2.xyz=r2.xyz*r0.yyy+r10.xyz;\n                        r10.xyz=normalize(r2.xyz);\n                        r2.xyz=r10.yyy*v3.xyz;\n                        r2.xyz=r10.xxx*v2.xyz+r2.xyz;\n                        r2.xyz=r10.zzz*v1.xyz+r2.xyz;\n                        r10.xyz=normalize(r2.xyz);\n                        r0.y=clamp(dot(r10.xyz,r4.xyz),0.0, 1.0);\n                        r0.y=r0.y*r0.y;\n                        r0.y=r0.y*r0.z+c27.x;\n                        r0.xyw=r0.xyw*r0.xyw;\n                        r0.z=r0.y*c26.w;\n                        r0.y=r0.y*c37.x+c37.y;\n                        r0.z=1.0/r0.z;\n                        r0.y=r0.y>=0.0?r0.z:c30.w;\n                        r0.x=r0.y*r0.x;\n                        r0.xyz=r14.xyz*r0.xxx+r6.xyz;\n                        r1.w=clamp(dot(cb2[12].xyz,r10.xyz),0.0, 1.0);\n                        r0.xyz=r0.xyz*r1.www;\n                        r0.xyz=r1.xyz*r0.xyz;\n                        r1.xyz=max(r0.xyz,c27.www);\n                        r0.x=dot(r3.xyz,r10.xyz);\n                        r0.y=r0.x+r0.x;\n                        r0.x=saturate(r0.x);\n                        r0.x=r0.x*c31.z;\n                        r0.x=exp2(r0.x);\n                        r1.w=min(r0.x,r9.y);\n                        r0.x=r9.x*r1.w+r9.z;\n                        r2.xyz=saturate(mix(r0.xxx,r9.www,r7.xyz));\n                        r0.xyz=r10.xyz*(-r0.yyy)+r3.xyz;\n                        r8.x=dot((-r0.xyz),cb2[8].xyz);\n                        r8.y=dot((-r0.xyz),cb2[9].xyz);\n                        r8.z=dot((-r0.xyz),cb2[10].xyz);\n                        r3=textureCubeLod(s0,r8.xyz,r8.w);\n                        r0.xyz=r3.xyz*cb2[14].www;\n                        r10.w=c31.w;\n                        r3=textureCubeLod(s0,r10.xyz,r10.w);\n                        r1.w=r14.w*cb2[14].w;\n                        r3.xyz=r3.xyz*cb2[14].www+r1.www;\n                        r4.xyz=(-r2.xyz)+c27.xxx;\n                        r4.xyz=r4.xyz*r5.xyz;\n                        r3.xyz=r3.xyz*r4.xyz;\n                        r3.xyz=r3.xyz*c34.xxx;\n                        r0.xyz=r0.xyz*r2.xyz+r3.xyz;\n                        r2.xyz=max(r0.xyz,c27.www);\n                        r0.xyz=r1.xyz+r2.xyz;\n                        \n                        r10.xy=mix(v0.xy,v0.zw,cb7[0].yy);\n                        \n                        // NormalMap \n                        r1.ywx=texture2D(s4,r10.xy).xyz; \n                        \n                        // AoMap\n                        r1.z=texture2D(s5,r10.xy).x;   \n                        \n                        r0.xyz=r0.xyz*r1.zzz+(-cb2[15].xyz);\n                        r1.x=cb2[15].w*v4.w;\n                        r1.x=r1.x*c34.y;\n                        r1.x=exp2(r1.x);\n                        r0.xyz=r1.xxx*r0.xyz+cb2[15].xyz;\n                        r2.xyz=cb2[15].xyz;\n                        r1.yzw=(-r2.xyz)+cb7[1].xyz;\n                        r1.xyz=r1.xxx*r1.yzw+cb2[15].xyz;\n                        r1.xyz=r1.xyz*cb4[0].yyy;\n                        r0.xyz=r1.xyz*r0.www+r0.xyz;\n                        r1.xyz=max(r0.xyz,c27.www);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c35.xxx;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c35.yyy+c35.zzz;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c34.zzz;\n                        r2.xyz=r2.xyz*c34.www;\n                        {bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);};\n\n                        ").concat(o.ps.shadowFooter,"\n                        \n                    }\n                ")}}}},f={name:"skinned_quadDetailV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/skinned_quadDetailV5",description:"skinned ".concat(s.description),todo:s.todo,techniques:{Depth:n.skinnedQuadDepthV5.techniques.Main,Picking:i.skinnedQuadPickingV5.techniques.Main,Emissive:c.skinnedQuadEmissiveV5.techniques.Main,Outline:l.skinnedQuadOutlineV5.techniques.Main,Main:{vs:o.vs.skinnedQuadV5_PosBwtTexTanTex,ps:s.techniques.Main.ps}}}},"../shaders/quad/quadenvironmentv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadEnvironmentV5",(function(){return l})),r.d(t,"skinnedQuadEnvironmentV5",(function(){return s}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/quad/quadpickingv5.js"),o=r("../shaders/quad/quaddepthv5.js"),a=r("../shaders/shared/texture.js"),u=r("../shaders/quad/extended/quadOutlineV5.js"),c=r("../shaders/quad/extended/quadEmissiveV5.js"),l={name:"quadEnvironmentV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/quadEnvironmentV5",description:"asteroid quad shader",techniques:{Picking:i.quadPickingV5.techniques.Main,Depth:o.quadDepthV5.techniques.Main,Emissive:c.quadEmissiveV5.techniques.Main,Outline:u.quadOutlineV5.techniques.Main,Main:{vs:n.vs.quadV5_PosTexTanTex,ps:{constants:[n.constant.GeneralData,n.constant.GeneralGlowColor,n.constant.Mtl1DiffuseColor,n.constant.Mtl2DiffuseColor,n.constant.Mtl3DiffuseColor,n.constant.Mtl4DiffuseColor,n.constant.Mtl1FresnelColor,n.constant.Mtl2FresnelColor,n.constant.Mtl3FresnelColor,n.constant.Mtl4FresnelColor,n.constant.Mtl1Gloss,n.constant.Mtl2Gloss,n.constant.Mtl3Gloss,n.constant.Mtl4Gloss,n.constant.DetailData,n.constant.GeneralTiling,n.constant.Detail1AlbedoColor,n.constant.Detail1FresnelColor,n.constant.Detail2AlbedoColor,n.constant.Detail2FresnelColor,n.constant.Detail1Material,n.constant.Detail2Material],textures:[a.EveSpaceSceneEnvMap,a.EveSpaceSceneShadowMap,n.texture.AlbedoMap,n.texture.RoughnessMap,n.texture.NormalMap,n.texture.AoMap,n.texture.PaintMaskMap,n.texture.MaterialMap,n.texture.DirtMap,n.texture.GlowMap,n.texture.Detail1Map,n.texture.Detail2Map],shader:"\n                \n                    ".concat(n.ps.header,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    \n                    uniform samplerCube s0;\n                    uniform sampler2D s1;\n                    uniform sampler2D s2;  // AlbedoMap,  \n                    uniform sampler2D s3;  // RoughnessMap,   \n                    uniform sampler2D s4;  // NormalMap,\n                    uniform sampler2D s5;  // AoMap,\n                    uniform sampler2D s6;  // PaintMaskMap,\n                    uniform sampler2D s7;  // MaterialMap,\n                    uniform sampler2D s8;  // DirtMap,\n                    uniform sampler2D s9;  // GlowMap,\n                    uniform sampler2D s10; // Detail1Map\n                    uniform sampler2D s11; // Detail2Map\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[3];\n                    uniform vec4 cb7[22];\n\n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r10;\n                        vec4 r11;\n                        vec4 r12;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        vec4 c22=vec4(9.99999997e-007,3.14159274,-1e-015,9.99999987e+014);\n                        vec4 c23=vec4(-0,-0.333333343,-0.666666687,-1);\n                        vec4 c24=vec4(1,2,-1,0);\n                        vec4 c25=vec4(3.19148946,1.03191495,0.5,-0.5);\n                        vec4 c26=vec4(1,1.54499996,1.10000002,6);\n                        vec4 c27=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c28=vec4(0,-0.015625,0.75,-9.27999973);\n                        vec4 c29=vec4(7,0.119999997,0.318309873,-1.44269507e-005);\n                        vec4 c30=vec4(-0.00313080009,12.9200001,0.416666657,0);\n                        vec4 c31=vec4(1.05499995,-0.0549999997,0,0);\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord7;\n                        v7=texcoord8;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        r0=cb7[14].xxyy*v0.xyxy;\n                        \n                         // PaintMaskMap\n                        r1.x=texture2D(s6,r0.zw).x * ").concat(n.texture.PaintMaskMap.multiplier,";\n                        \n                        // MaterialMap\n                        r1.y=texture2D(s7,r0.zw).x;    \n                        \n                        // DirtMap (Not required here) <----------------------------------------------------------------\n                        r1.z=texture2D(s8,r0.zw).x;   \n                        \n                        // GlowMap     \n                        r1.w=texture2D(s9,r0.zw).x;    \n                        \n                        gl_FragData[0].w=(-r1.x)+c24.x;\n                        r1.y=(-cb2[19].x)+cb2[19].y;\n                        r1.y=1.0/r1.y;\n                        r1.z=(-cb2[19].x)+v6.z;\n                        r1.xy=r1.wy*r1.wz;\n                        r1.y=sqrt(abs(r1.y));\n                        r1.z=1.0/v7.w;\n                        r1.zw=r1.zz*v7.xy;\n                        r1.zw=r1.zw*c25.zw+c25.zz;\n                        r2.z=c25.z;\n                        r1.zw=cb2[18].xy*r2.zz+r1.zw;\n                        r2=texture2D(s1,r1.zw);\n                        r1.z=r1.y+(-r2.x);\n                        r1.w=r2.x*(-r2.x)+r2.y;\n                        r2.x=r2.x+cb2[18].z;\n                        r1.y=(-r1.y)+r2.x;\n                        r1.y=r1.y>=0.0?c24.x:c24.w;\n                        r2.x=max(r1.w,c22.x);\n                        r1.z=r1.z*r1.z+r2.x;\n                        r1.z=1.0/r1.z;\n                        r1.z=r1.z*r2.x;\n                        r2.x=saturate(max(r1.y,r1.z));\n                        r1.y=r2.x+(-cb2[18].w);\n                        r2.x=c24.x;\n                        r1.z=r2.x+(-cb2[18].w);\n                        r1.z=1.0/r1.z;\n                        r1.y=saturate(r1.z*r1.y);\n                        r1.y=(-cb2[19].x)>=0.0?r1.y:r2.x;\n                        r2.x=max(cb2[19].z,r1.y);\n                        r1.y=r2.x*r2.x;\n                        r1.yzw=r1.yyy*cb2[13].xyz;\n                        r1.yzw=r1.yzw*(-c23.zzz);\n                        r2.x=dot(v4.xyz,v4.xyz);\n                        r2.x=r2.x==0.0?3.402823466e+38:inversesqrt(abs(r2.x));\n                        r2.yzw=v4.xyz*r2.xxx+cb2[12].xyz;\n                        r3.xyz=r2.xxx*v4.xyz;\n                        r4.xyz=normalize(r2.yzw);\n                        r2.x=clamp(dot(cb2[12].xyz,r4.xyz),0.0, 1.0);\n                        r2.x=(-r2.x)+c24.x;\n                        r2.y=r2.x*r2.x;\n                        r2.y=r2.y*r2.y;\n                        r2.x=r2.y*r2.x;\n                        r5=cb7[15].xxyy*v0.xyxy;\n                        \n                        // Detail1Map\n                        r6=texture2D(s10,r5.xy);\n                        \n                        // Detail2Map\n                        r5=texture2D(s11,r5.zw);\n                        \n                        // PaintMaskMap\n                        r7.x=texture2D(s6,r0.xy).x * ").concat(n.texture.PaintMaskMap.multiplier,";\n                        \n                        // MaterialMap\n                        r7.y=texture2D(s7,r0.xy).x;    \n                        \n                        // DirtMap (Not required here) <----------------------------------------------------------------\n                        r7.z=texture2D(s8,r0.xy).x;   \n                        \n                        // GlowMap     \n                        r7.w=texture2D(s9,r0.xy).x;   \n                        \n                        r7=r7.yyyy+c23;\n                        r7=r7*c25.xxxx;\n                        r7=saturate((-abs(r7))+c25.yyyy);\n                        r8.xz=r7.xy*cb7[20].xy;\n                        r8.yw=r7.xy*cb7[21].xy;\n                        r0.xy=r8.zw+r8.xy;\n                        r8.xz=r7.zw*cb7[20].zw;\n                        r8.yw=r7.zw*cb7[21].zw;\n                        r0.xy=r0.xy+r8.xy;\n                        r0.xy=r8.zw+r0.xy;\n                        r2.yz=saturate(r0.xy);\n                        r2.y=r6.w*r2.y;\n                        r6.xyz=r6.xyz*c24.yyy+c24.zzz;\n                        r2.z=r5.w*r2.z;\n                        r5.xyz=r5.xyz*c24.yyy+c24.zzz;\n                        r5.xyz=r0.yyy*r5.xyz;\n                        r5.xyz=r0.xxx*r6.xyz+r5.xyz;\n                        r6.xyz=r7.yyy*cb7[7].xyz;\n                        r6.xyz=r7.xxx*cb7[6].xyz+r6.xyz;\n                        r6.xyz=r7.zzz*cb7[8].xyz+r6.xyz;\n                        r6.xyz=r7.www*cb7[9].xyz+r6.xyz;\n                        r8.xyz=mix(r6.xyz,cb7[17].xyz,r2.yyy);\n                        r6.xyz=mix(r8.xyz,cb7[19].xyz,r2.zzz);\n                       \n                        // AlbedoMap\n                        r8.xyz=texture2D(s2,r0.zw).xyz;\n                        \n                        // RoughnessMap\n                        r8.w=texture2D(s3,r0.zw).x;\n                        \n                        // NormalMap\n                        r0.ywx=texture2D(s4,r0.zw).xyz;\n                        \n                        // AoMap\n                        r0.z=texture2D(s5,r0.zw).x;\n                        \n                        r0.xy=r0.yw*c24.yy+c24.zz;\n                        r9.xyz=r8.www*(-r6.xyz)+c24.xxx;\n                        r6.xyz=r6.xyz*r8.www;\n                        r9.xyz=r9.xyz*r2.xxx+r6.xyz;\n                        r10.xyz=(-r9.xyz)+c24.xxx;\n                        r11.xyz=r7.yyy*cb7[3].xyz;\n                        r11.xyz=r7.xxx*cb7[2].xyz+r11.xyz;\n                        r11.xyz=r7.zzz*cb7[4].xyz+r11.xyz;\n                        r11.xyz=r7.www*cb7[5].xyz+r11.xyz;\n                        r12.xyz=mix(r11.xyz,cb7[16].xyz,r2.yyy);\n                        r11.xyz=mix(r12.xyz,cb7[18].xyz,r2.zzz);\n                        r2.xyz=r8.xyz*r11.xyz;\n                        r8.xyz=r10.xyz*r2.xyz;\n                        r0.w=r7.y*cb7[11].x;\n                        r0.w=r7.x*cb7[10].x+r0.w;\n                        r0.w=r7.z*cb7[12].x+r0.w;\n                        r0.w=r7.w*cb7[13].x+r0.w;\n                        r0.w=saturate(r8.w*(-r0.w)+c24.x);\n                        r7.xy=(-r0.ww)+c26.xy;\n                        r2.w=min(r7.y,c24.x);\n                        r10.xyz=c28.xyz;\n                        r7=r7.xxxx*c27+r10.xxyz;\n                        r3.w=clamp(dot(r4.xyz,r3.xyz),0.0, 1.0);\n                        r3.w=r3.w*r3.w;\n                        r3.w=r3.w*r2.w+c26.z;\n                        r2.w=(-r2.w)+r3.w;\n                        r2.w=1.0/r2.w;\n                        r9.xyz=r2.www*r9.xyz;\n                        r2.w=saturate(dot(r0.xy,r0.xy)+c24.w);\n                        r2.w=(-r2.w)+c24.x;\n                        r2.w=r2.w==0.0?3.402823466e+38:inversesqrt(abs(r2.w));\n                        r0.z=1.0/r2.w;\n                        r0.xyz=r5.xyz+r0.xyz;\n                        r5.xyz=normalize(r0.xyz);\n                        r0.xyz=r5.yyy*v3.xyz;\n                        r0.xyz=r5.xxx*v2.xyz+r0.xyz;\n                        r0.xyz=r5.zzz*v1.xyz+r0.xyz;\n                        r5.xyz=normalize(r0.xyz);\n                        r0.x=clamp(dot(r5.xyz,r4.xyz),0.0, 1.0);\n                        r0.xy=r0.xw*r0.xw;\n                        r4.w=r0.w*c26.w;\n                        r0.z=r0.y*r0.y+c24.z;\n                        r0.x=r0.x*r0.z+c24.x;\n                        r0.xy=r0.xy*r0.xy;\n                        r0.z=r0.x*c22.y;\n                        r0.x=r0.x*c22.y+c22.z;\n                        r0.z=1.0/r0.z;\n                        r0.x=r0.x>=0.0?r0.z:c22.w;\n                        r0.x=r0.x*r0.y;\n                        r0.xyz=r9.xyz*r0.xxx+r8.xyz;\n                        r0.w=clamp(dot(cb2[12].xyz,r5.xyz),0.0, 1.0);\n                        r0.xyz=r0.www*r0.xyz;\n                        r0.xyz=r1.yzw*r0.xyz;\n                        r1.yzw=max(r0.xyz,c24.www);\n                        r0.x=dot(r3.xyz,r5.xyz);\n                        r0.y=r0.x+r0.x;\n                        r0.x=saturate(r0.x);\n                        r0.x=r0.x*c28.w;\n                        r0.x=exp2(r0.x);\n                        r2.w=min(r0.x,r7.y);\n                        r0.x=r7.x*r2.w+r7.z;\n                        r8.xyz=saturate(mix(r0.xxx,r7.www,r6.xyz));\n                        r0.xyz=r5.xyz*(-r0.yyy)+r3.xyz;\n                        r4.x=dot((-r0.xyz),cb2[8].xyz);\n                        r4.y=dot((-r0.xyz),cb2[9].xyz);\n                        r4.z=dot((-r0.xyz),cb2[10].xyz);\n                        r0=textureCubeLod(s0,r4.xyz,r4.w);\n                        r0.xyz=r0.xyz*cb2[14].www;\n                        r5.w=c29.x;\n                        r3=textureCubeLod(s0,r5.xyz,r5.w);\n                        r0.w=cb2[14].w;\n                        r0.w=r0.w*c29.y;\n                        r3.xyz=r3.xyz*cb2[14].www+r0.www;\n                        r4.xyz=(-r8.xyz)+c24.xxx;\n                        r2.xyz=r2.xyz*r4.xyz;\n                        r2.xyz=r3.xyz*r2.xyz;\n                        r2.xyz=r2.xyz*c29.zzz;\n                        r0.xyz=r0.xyz*r8.xyz+r2.xyz;\n                        r2.xyz=max(r0.xyz,c24.www);\n                        r0.xyz=r1.yzw+r2.xyz;\n                        r1.yz=mix(v0.xy,v0.zw,cb7[0].yy);\n                        \n                        // NormalMap\n                        r2.ywx=texture2D(s4,r1.yz).xyz;\n                        \n                        // AoMap\n                        r2.z=texture2D(s5,r1.yz).x;\n                        \n                        r0.xyz=r0.xyz*r2.zzz+(-cb2[15].xyz);\n                        r0.w=cb2[15].w*v4.w;\n                        r0.w=r0.w*c29.w;\n                        r0.w=exp2(r0.w);\n                        r0.xyz=r0.www*r0.xyz+cb2[15].xyz;\n                        r2.xyz=cb2[15].xyz;\n                        r1.yzw=(-r2.xyz)+cb7[1].xyz;\n                        r1.yzw=r0.www*r1.yzw+cb2[15].xyz;\n                        r1.yzw=r1.yzw*cb4[0].yyy;\n                        r0.xyz=r1.yzw*r1.xxx+r0.xyz;\n                        r1.xyz=max(r0.xyz,c24.www);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c30.zzz;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c31.xxx+c31.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c30.xxx;\n                        r2.xyz=r2.xyz*c30.yyy;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n                        \n                        ").concat(n.ps.shadowFooter,"\n                    }\n                ")}}}},s={name:"skinnedQuadEnvironmentV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/skinnedQuadEnvironmentV5",description:"skinned ".concat(l.description),techniques:{Picking:i.skinnedQuadPickingV5.techniques.Main,Depth:o.skinnedQuadDepthV5.techniques.Main,Emissive:c.skinnedQuadEmissiveV5.techniques.Main,Outline:u.skinnedQuadOutlineV5.techniques.Main,Main:{vs:n.vs.skinnedQuadV5_PosBwtTexTanTex,ps:l.techniques.Main.ps}}}},"../shaders/quad/quadglassv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadGlassV5",(function(){return d})),r.d(t,"skinnedQuadGlassV5",(function(){return y}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/shared/texture.js"),o=r("../shaders/quad/quaddepthv5.js"),a=r("../shaders/quad/quadpickingv5.js"),u=r("./global/constant/index.js"),c=r("../shaders/quad/extended/quadOutlineV5.js"),l=r("../shaders/quad/extended/quadEmissiveV5.js"),s=r("../shaders/quad/extended/quadExtendedPickingNoPatternV5.js");function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p={vs:n.vs.quadV5_PosTexTanTex,ps:{constants:[n.constant.GeneralData,n.constant.GeneralGlowColor,n.constant.Mtl1DiffuseColor,n.constant.Mtl2DiffuseColor,n.constant.Mtl3DiffuseColor,n.constant.Mtl4DiffuseColor,n.constant.Mtl1FresnelColor,n.constant.Mtl2FresnelColor,n.constant.Mtl3FresnelColor,n.constant.Mtl4FresnelColor,n.constant.Mtl1Gloss,n.constant.Mtl2Gloss,n.constant.Mtl3Gloss,n.constant.Mtl4Gloss,n.constant.Mtl1DustDiffuseColor,n.constant.Mtl2DustDiffuseColor,n.constant.Mtl3DustDiffuseColor,n.constant.Mtl4DustDiffuseColor],textures:[i.EveSpaceSceneEnvMap,i.EveSpaceSceneShadowMap,n.texture.AlbedoMap,n.texture.RoughnessMap,n.texture.NormalMap,n.texture.AoMap,n.texture.PaintMaskMap,n.texture.MaterialMap,n.texture.DirtMap,n.texture.GlowMap,i.DustNoiseMap],shader:"\n\n            ".concat(n.ps.header,"\n            \n            varying vec4 texcoord;\n            varying vec4 texcoord1;\n            varying vec4 texcoord2;\n            varying vec4 texcoord3;\n            varying vec4 texcoord4;\n            varying vec4 texcoord5;\n            varying vec4 texcoord7;\n            varying vec4 texcoord8;\n            \n            uniform samplerCube s0; // EveSpaceSceneEnvMap\n            uniform sampler2D s1;   // EveSpaceSceneShadowMap\n            uniform sampler2D s2;   // AlbedoMap\n            uniform sampler2D s3;   // RoughnessMap\n            uniform sampler2D s4;   // NormalMap\n            uniform sampler2D s5;   // AoMap\n            uniform sampler2D s6;   // PaintMaskMap\n            uniform sampler2D s7;   // MaterialMap\n            uniform sampler2D s8;   // DirtMap\n            uniform sampler2D s9;   // GlowMap\n            uniform sampler2D s10;  // DustNoiseMap\n            \n            uniform vec4 cb2[22];\n            uniform vec4 cb4[3];\n            uniform vec4 cb7[18];\n            \n            void main()\n            {\n                vec4 v0;\n                vec4 v1;\n                vec4 v2;\n                vec4 v3;\n                vec4 v4;\n                vec4 v5;\n                vec4 v6;\n                vec4 v7;\n                vec4 r0;\n                vec4 r1;\n                vec4 r2;\n                vec4 r3;\n                vec4 r4;\n                vec4 r5;\n                vec4 r6;\n                vec4 r7;\n                vec4 r8;\n                \n                vec4 c14=vec4(9.99999997e-007,3.14159274,-1e-015,9.99999987e+014);\n                vec4 c15=vec4(-0,-0.333333343,-0.666666687,-1);\n                vec4 c16=vec4(3.19148946,1.03191495,0.5,-0.5);\n                vec4 c17=vec4(1,-1,0,-0);\n                vec4 c18=vec4(1,1.54499996,1.10000002,6);\n                vec4 c19=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                vec4 c20=vec4(0,-0.015625,0.75,-9.27999973);\n                vec4 c21=vec4(12.9200001,0.416666657,1.05499995,-0.0549999997);\n                vec4 c22=vec4(0.75,1,-1.44269507e-005,-0.00313080009);\n                vec4 c23=vec4(1,1.00999999,2,-1);\n                \n                v0=texcoord;\n                v1=texcoord1;\n                v2=texcoord2;\n                v3=texcoord3;\n                v4=texcoord4;\n                v5=texcoord5;\n                v6=texcoord7;\n                v7=texcoord8;\n                \n                vec4 vFace = gl_FrontFacing ? vec4(1.0) : vec4(-1.0);\n                \n                r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                r0.x=dot(r0.xyz,r0.xyz);\n                r0.w=cb4[1].w;\n                r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                if(any(lessThan(r0,vec4(0.0))))discard;\n                r0.x=(-cb2[19].x)+cb2[19].y;\n                r0.x=1.0/r0.x;\n                r0.y=(-cb2[19].x)+v6.z;\n                r0.x=r0.x*r0.y;\n                r0.x=sqrt(abs(r0.x));\n                r0.y=1.0/v7.w;\n                r0.yz=r0.yy*v7.xy;\n                r0.yz=r0.yz*c16.zw+c16.zz;\n                r1.z=c16.z;\n                r0.yz=cb2[18].xy*r1.zz+r0.yz;\n                r1=texture2D(s1,r0.yz);\n                r0.y=r0.x+(-r1.x);\n                r0.z=r1.x*(-r1.x)+r1.y;\n                r0.w=r1.x+cb2[18].z;\n                r0.x=(-r0.x)+r0.w;\n                r0.x=r0.x>=0.0?c17.x:c17.z;\n                r1.x=max(r0.z,c14.x);\n                r0.y=r0.y*r0.y+r1.x;\n                r0.y=1.0/r0.y;\n                r0.y=r0.y*r1.x;\n                r1.x=saturate(max(r0.x,r0.y));\n                r0.x=r1.x+(-cb2[18].w);\n                r1.x=c17.x;\n                r0.y=r1.x+(-cb2[18].w);\n                r0.y=1.0/r0.y;\n                r0.x=saturate(r0.y*r0.x);\n                r0.x=(-cb2[19].x)>=0.0?r0.x:r1.x;\n                r1.x=max(cb2[19].z,r0.x);\n                r0.x=r1.x*r1.x;\n                r0.xyz=r0.xxx*cb2[13].xyz;\n                r0.xyz=r0.xyz*(-c15.zzz);\n                r0.w=vFace.w>=0.0?c17.x:c17.y;\n                r0.w=(-r0.w)>=0.0?c17.z:c17.x;\n                r1.x=vFace.x>=0.0?c17.w:c17.y;\n                r0.w=r0.w+r1.x;\n                r1.xyz=(-r0.www)*v1.xyz;\n                \n                // NormalMap\n                r2.ywx=texture2D(s4,v0.xy).xyz;\n                \n                // AoMap\n                r2.z=texture2D(s5,v0.xy).x;\n                \n                r2.xy=r2.yw*c23.zz+c23.ww;\n                r3.xyz=r2.yyy*v3.xyz;\n                r3.xyz=r2.xxx*v2.xyz+r3.xyz;\n                r0.w=saturate(dot(r2.xy,r2.xy)+c17.z);\n                r0.w=(-r0.w)+c17.x;\n                r0.w=sqrt(abs(r0.w));\n                r1.xyz=r0.www*r1.xyz+r3.xyz;\n                r2.xyz=normalize(r1.xyz);\n                r0.w=clamp(dot(cb2[12].xyz,r2.xyz),0.0, 1.0);\n                r1.x=dot(v4.xyz,v4.xyz);\n                r1.x=r1.x==0.0?3.402823466e+38:inversesqrt(abs(r1.x));\n                r1.yzw=v4.xyz*r1.xxx+cb2[12].xyz;\n                r3.xyz=r1.xxx*v4.xyz;\n                r4.xyz=normalize(r1.yzw);\n                r1.x=clamp(dot(cb2[12].xyz,r4.xyz),0.0, 1.0);\n                r1.x=(-r1.x)+c17.x;\n                r1.y=r1.x*r1.x;\n                r1.y=r1.y*r1.y;\n                r1.x=r1.y*r1.x;\n                \n                // PaintMaskMap\n                r5.x=texture2D(s6,v0.xy).x * ").concat(n.texture.PaintMaskMap.multiplier,";\n                \n                // MaterialMap\n                r5.y=texture2D(s7,v0.xy).x;    \n                \n                // DirtMap (Not required here) <----------------------------------------------------------------\n                r5.z=texture2D(s8,v0.xy).x;   \n                \n                // GlowMap     \n                r5.w=texture2D(s9,v0.xy).x;    \n                \n                r6=r5.yyyy+c15;\n                r6=r6*c16.xxxx;\n                r6=saturate((-abs(r6))+c16.yyyy);\n                r1.yzw=r6.yyy*cb7[7].xyz;\n                r1.yzw=r6.xxx*cb7[6].xyz+r1.yzw;\n                r1.yzw=r6.zzz*cb7[8].xyz+r1.yzw;\n                r1.yzw=r6.www*cb7[9].xyz+r1.yzw;\n                \n                // AlbedoMap\n                r7.xyz=texture2D(s2,v0.xy).xyz;\n                \n                // RoughnessMap\n                r7.w=texture2D(s3,v0.xy).x;\n                \n                r7.xyz=r7.www*(-r1.yzw)+c17.xxx;\n                r1.yzw=r1.yzw*r7.www;\n                r7.xyz=r7.xyz*r1.xxx+r1.yzw;\n                r1.x=clamp(dot(r4.xyz,r3.xyz),0.0,1.0);\n                r2.w=clamp(dot(r2.xyz,r4.xyz),0.0,1.0);\n                r2.w=r2.w*r2.w;\n                r1.x=r1.x*r1.x;\n                r3.w=r6.y*cb7[11].x;\n                r3.w=r6.x*cb7[10].x+r3.w;\n                r3.w=r6.z*cb7[12].x+r3.w;\n                r3.w=r6.w*cb7[13].x+r3.w;\n                r3.w=saturate(r7.w*(-r3.w)+c17.x);\n                r4.xy=(-r3.ww)+c18.xy;\n                r5.y=min(r4.y,c17.x);\n                r8.xyz=c20.xyz;\n                r4=r4.xxxx*c19+r8.xxyz;\n                r1.x=r1.x*r5.y+c18.z;\n                r1.x=(-r5.y)+r1.x;\n                r1.x=1.0/r1.x;\n                r7.xyz=r1.xxx*r7.xyz;\n                r1.x=r3.w*r3.w;\n                r8.w=r3.w*c18.w;\n                r3.w=r1.x*r1.x+c17.y;\n                r1.x=r1.x*r1.x;\n                r2.w=r2.w*r3.w+c17.x;\n                r2.w=r2.w*r2.w;\n                r3.w=r2.w*c14.y;\n                r2.w=r2.w*c14.y+c14.z;\n                r3.w=1.0/r3.w;\n                r2.w=r2.w>=0.0?r3.w:c14.w;\n                r1.x=r1.x*r2.w;\n                r7.xyz=r1.xxx*r7.xyz;\n                r7.xyz=r0.www*r7.xyz;\n                r0.xyz=r0.xyz*r7.xyz;\n                r7.xyz=max(r0.xyz,c17.zzz);\n                r0.x=dot(r3.xyz,r2.xyz);\n                r0.y=r0.x+r0.x;\n                r0.yzw=r2.xyz*(-r0.yyy)+r3.xyz;\n                r8.x=dot((-r0.yzw),cb2[8].xyz);\n                r8.y=dot((-r0.yzw),cb2[9].xyz);\n                r8.z=dot((-r0.yzw),cb2[10].xyz);\n                r2=textureCubeLod(s0,r8.xyz,r8.w);\n                r0.yzw=r2.xyz*cb2[14].www;\n                r1.x=saturate(r0.x);\n                r0.x=abs(r0.x)*(-c22.x)+c22.y;\n                r1.x=r1.x*c20.w;\n                r1.x=exp2(r1.x);\n                r2.x=min(r1.x,r4.y);\n                r1.x=r4.x*r2.x+r4.z;\n                r2.xyz=saturate(mix(r1.xxx,r4.www,r1.yzw));\n                r0.yzw=r0.yzw*r2.xyz;\n                r1.xyz=max(r0.yzw,c17.zzz);\n                r0.yzw=r1.xyz+r7.xyz;\n                r1.xyz=r6.yyy*cb7[3].xyz;\n                r1.xyz=r6.xxx*cb7[2].xyz+r1.xyz;\n                r1.xyz=r6.zzz*cb7[4].xyz+r1.xyz;\n                r1.xyz=r6.www*cb7[5].xyz+r1.xyz;\n                r2.xy=(-r5.xx)+c23.xy;\n                r1.w=r5.w*r5.w;\n                r2.z=(-r2.x)+c17.x;\n                r1.xyz=r1.xyz*r2.zzz;\n                r0.xyz=r1.xyz*r0.xxx+r0.yzw;\n                r1.xy=mix(v0.xy,v0.zw,cb7[0].yy);\n                \n                // NormalMap\n                r3.ywx=texture2D(s4,r1.xy).xyz;\n                \n                // AoMap\n                r3.z=texture2D(s5,r1.xy).x;\n                \n                r0.xyz=r0.xyz*r3.zzz+(-cb2[15].xyz);\n                r0.w=cb2[15].w*v4.w;\n                r0.w=r0.w*c22.z;\n                r0.w=exp2(r0.w);\n                r0.xyz=r0.www*r0.xyz+cb2[15].xyz;\n                r1.xyz=cb2[15].xyz;\n                r1.xyz=(-r1.xyz)+cb7[1].xyz;\n                r1.xyz=r0.www*r1.xyz+cb2[15].xyz;\n                r1.xyz=r1.xyz*cb4[0].yyy;\n                r0.xyz=r1.xyz*r1.www+r0.xyz;\n                r1.xyz=max(r0.xyz,c17.zzz);\n                r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                r0.xyz=r0.xyz*cb2[21].www;\n                r1.xyz=r0.xyz*c21.yyy;\n                r3.x=exp2(r1.x);\n                r3.y=exp2(r1.y);\n                r3.z=exp2(r1.z);\n                r1.xyz=r3.xyz*c21.zzz+c21.www;\n                r3.x=exp2(r0.x);\n                r3.y=exp2(r0.y);\n                r3.z=exp2(r0.z);\n                r0.xyz=r3.xyz+c22.www;\n                r3.xyz=r3.xyz*c21.xxx;\n                {\n                    bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                    r0.xyz=vec3(tmp.x?r1.x:r3.x,tmp.y?r1.y:r3.y,tmp.z?r1.z:r3.z);\n                };\n                r0.w=1.0/r2.y;\n                gl_FragData[0].w=r2.x;\n                r1.xyz=r0.www*r0.xyz;\n                r0.xyz=r0.xyz*(-r0.www)+r0.xyz;\n                gl_FragData[0].xyz=r6.xxx*r0.xyz+r1.xyz;\n\n                ").concat(n.ps.shadowFooter,"                        \n            }\n        ")}},d={name:"quadGlassV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/quadGlassV5",description:"glass quad shader",todo:"Add dirt",techniques:{Depth:o.quadDepthV5.techniques.Main,Picking:a.quadPickingV5.techniques.Main,Emissive:l.quadEmissiveV5.techniques.Main,ExtendedPicking:s.quadExtendedPickingNoPatternV5.techniques.Main,Outline:c.quadOutlineV5.techniques.Main,Main:[{vs:p.vs,ps:p.ps,states:f({},u.RS_CULLMODE,3)},{vs:p.vs,ps:p.ps,states:f({},u.RS_CULLMODE,2)}]}},y={name:"skinned_quadGlassV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/skinned_quadGlassV5",description:"skinned ".concat(d.description),todo:d.todo,techniques:{Depth:o.skinnedQuadDepthV5.techniques.Main,Picking:a.skinnedQuadPickingV5.techniques.Main,Emissive:l.skinnedQuadEmissiveV5.techniques.Main,ExtendedPicking:s.skinnedQuadExtendedPickingNoPatternV5.techniques.Main,Outline:c.skinnedQuadOutlineV5.techniques.Main,Main:[{vs:n.vs.skinnedQuadV5_PosBwtTexTanTex,ps:p.ps,states:f({},u.RS_CULLMODE,3)},{vs:n.vs.skinnedQuadV5_PosBwtTexTanTex,ps:p.ps,states:f({},u.RS_CULLMODE,2)}]}}},"../shaders/quad/quadheatdetailv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadHeatDetailV5",(function(){return i})),r.d(t,"skinnedQuadHeatDetailV5",(function(){return o}));var n=r("../shaders/quad/quadheatv5.js"),i=Object.assign({},n.quadHeatV5,{name:"quadHeatDetailV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/quadHeatDetailV5"}),o=Object.assign({},n.skinnedQuadHeatV5,{name:"skinned_quadHeatDetailV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/skinned_quadHeatDetailV5"})},"../shaders/quad/quadheatv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadHeatV5",(function(){return f})),r.d(t,"skinnedQuadHeatV5",(function(){return p}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/shared/texture.js"),o=r("../shaders/quad/quaddepthv5.js"),a=r("../shaders/quad/quadpickingv5.js"),u=r("../shaders/shared/func.js"),c=r("../shaders/quad/extended/quadOutlineV5.js"),l=r("../shaders/quad/extended/quadExtendedPickingHeatV5.js"),s=r("../shaders/quad/extended/quadUtilityHeatV5.js"),f={name:"quadHeatV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/quadHeatV5",description:"heat quad shader",todo:"Add dirt",techniques:{Depth:o.quadDepthV5.techniques.Main,Picking:a.quadPickingV5.techniques.Main,Outline:c.quadOutlineV5.techniques.Main,ExtendedPicking:l.quadExtendedPickingHeatV5.techniques.Main,Utility:s.quadUtilityHeatV5.techniques.Main,Main:{vs:n.vs.quadV5_PosTexTanTex,ps:{constants:[n.constant.GeneralData,n.constant.Mtl1DiffuseColor,n.constant.Mtl2DiffuseColor,n.constant.Mtl3DiffuseColor,n.constant.Mtl4DiffuseColor,n.constant.Mtl1FresnelColor,n.constant.Mtl2FresnelColor,n.constant.Mtl3FresnelColor,n.constant.Mtl4FresnelColor,n.constant.Mtl1Gloss,n.constant.Mtl2Gloss,n.constant.Mtl3Gloss,n.constant.Mtl4Gloss,n.constant.PMtl1DiffuseColor,n.constant.PMtl1FresnelColor,n.constant.PMtl1Gloss,n.constant.PMtl2DiffuseColor,n.constant.PMtl2FresnelColor,n.constant.PMtl2Gloss,n.constant.Mtl1HeatGlowData,n.constant.Mtl2HeatGlowData,n.constant.Mtl3HeatGlowData,n.constant.Mtl4HeatGlowData,n.constant.GeneralHeatGlowColor,n.constant.Mtl1DustDiffuseColor,n.constant.Mtl2DustDiffuseColor,n.constant.Mtl3DustDiffuseColor,n.constant.Mtl4DustDiffuseColor],textures:[i.EveSpaceSceneEnvMap,i.EveSpaceSceneShadowMap,n.texture.AlbedoMap,n.texture.RoughnessMap,n.texture.NormalMap,n.texture.AoMap,n.texture.PaintMaskMap,n.texture.MaterialMap,n.texture.DirtMap,n.texture.GlowMap,n.texture.PatternMask1Map,n.texture.PatternMask2Map,n.texture.HeatGlowNoiseMap,i.DustNoiseMap],shader:"\n\n                    ".concat(n.ps.header,"\n                    ").concat(u.clampToBorder,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord6;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    \n                    uniform samplerCube s0; // EveSpaceSceneEnvMap\n                    uniform sampler2D s1;   // EveSpaceSceneShadowMap\n                    uniform sampler2D s2;   // AlbedoMap\n                    uniform sampler2D s3;   // RoughnessMap\n                    uniform sampler2D s4;   // NormalMap\n                    uniform sampler2D s5;   // AoMap\n                    uniform sampler2D s6;   // PaintMaskMap\n                    uniform sampler2D s7;   // MaterialMap\n                    uniform sampler2D s8;   // DirtMap\n                    uniform sampler2D s9;   // GlowMap\n                    uniform sampler2D s10;  // PatternMask1Map;\n                    uniform sampler2D s11;  // PatternMask2Map;\n                    uniform sampler2D s12;  // HeatGlowNoiseMap;\n                    uniform sampler2D s13;  // DustNoiseMap\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[14];\n                    uniform vec4 cb7[28];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 v8;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r10;\n                        vec4 r11;\n                        vec4 r12;\n                        vec4 r13;\n                        vec4 r14;\n                        vec4 r15;\n                        vec4 r16;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        vec4 c24=vec4(9.99999997e-007,-5,0.400000006,3.14159274);\n                        vec4 c25=vec4(-0,-0.333333343,-0.666666687,-1);\n                        vec4 c26=vec4(3.19148946,1.03191495,0.5,-0.5);\n                        vec4 c27=vec4(0.0383840017,0.0393519998,0.0391650014,9.99999987e+014);\n                        vec4 c28=vec4(1.10000002,6,-9.27999973,7);\n                        vec4 c29=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c30=vec4(0,-0.015625,0.75,0.119999997);\n                        vec4 c31=vec4(0.318309873,-1.44269507e-005,-0.00499999989,66.6666641);\n                        vec4 c32=vec4(-0.00313080009,12.9200001,0.416666657,0);\n                        vec4 c33=vec4(1.05499995,-0.0549999997,0,0);\n                        vec4 c34=vec4(1,2,-1,0);\n                        vec4 c35=vec4(-1,-2,-3,-4);\n                        vec4 c36=vec4(3.14159274,-1e-015,1,1.54499996);\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord6;\n                        v7=texcoord7;\n                        v8=texcoord8;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        // PaintMaskMap\n                        r0.x=texture2D(s6,v0.xy).x * ").concat(n.texture.PaintMaskMap.multiplier,";   \n                         \n                        // MaterialMap\n                        r0.y=texture2D(s7,v0.xy).x;    \n                        \n                        // DirtMap (Not required here) <----------------------------------------------------------------\n                        r0.z=texture2D(s8,v0.xy).x;   \n                        \n                        // GlowMap     \n                        r0.w=texture2D(s9,v0.xy).x; \n                        \n                        gl_FragData[0].w=(-r0.x)+c34.x;\n                        r0.z=(-cb2[19].x)+cb2[19].y;\n                        r0.z=1.0/r0.z;\n                        r0.w=(-cb2[19].x)+v7.z;\n                        r0.z=r0.z*r0.w;\n                        r0.z=sqrt(abs(r0.z));\n                        r0.w=1.0/v8.w;\n                        r1.xy=r0.ww*v8.xy;\n                        r1.xy=r1.xy*c26.zw+c26.zz;\n                        r1.z=c26.z;\n                        r1.xy=cb2[18].xy*r1.zz+r1.xy;\n                        r1=texture2D(s1,r1.xy);\n                        r0.w=r0.z+(-r1.x);\n                        r1.y=r1.x*(-r1.x)+r1.y;\n                        r1.x=r1.x+cb2[18].z;\n                        r0.z=(-r0.z)+r1.x;\n                        r0.z=r0.z>=0.0?c34.x:c34.w;\n                        r2.x=max(r1.y,c24.x);\n                        r0.w=r0.w*r0.w+r2.x;\n                        r0.w=1.0/r0.w;\n                        r0.w=r0.w*r2.x;\n                        r1.x=saturate(max(r0.z,r0.w));\n                        r0.z=r1.x+(-cb2[18].w);\n                        r1.x=c34.x;\n                        r0.w=r1.x+(-cb2[18].w);\n                        r0.w=1.0/r0.w;\n                        r0.z=saturate(r0.w*r0.z);\n                        r0.z=(-cb2[19].x)>=0.0?r0.z:r1.x;\n                        r1.x=max(cb2[19].z,r0.z);\n                        r0.z=r1.x*r1.x;\n                        r1.xyz=r0.zzz*cb2[13].xyz;\n                        r1.xyz=r1.xyz*(-c25.zzz);\n                        r0.z=dot(v4.xyz,v4.xyz);\n                        r0.z=r0.z==0.0?3.402823466e+38:inversesqrt(abs(r0.z));\n                        r2.xyz=v4.xyz*r0.zzz+cb2[12].xyz;\n                        r3.xyz=r0.zzz*v4.xyz;\n                        r4.xyz=normalize(r2.xyz);\n                        r0.z=clamp(dot(r4.xyz,r3.xyz),0.0, 1.0);\n                        r0.z=r0.z*r0.z;\n                        r0.x=r0.x*cb7[0].x;\n                        r2=r0.yyyy+c25;\n                        r2=r2*c26.xxxx;\n                        r2=saturate((-abs(r2))+c26.yyyy);\n                        r5.x=cb4[11].x;\n                        r0.y=r5.x+c24.y;\n                        r6.x=cb7[18].x;\n                        r0.w=r0.y>=0.0?r6.x:cb7[15].x;\n                        r5=r5.xxxx+c35;\n                        r0.w=r5.w>=0.0?r0.w:cb7[12].x;\n                        r0.w=r5.z>=0.0?r0.w:cb7[11].x;\n                        r0.w=r5.y>=0.0?r0.w:cb7[10].x;\n                        r0.w=r5.x>=0.0?r0.w:cb7[9].x;\n                        r7.x=cb4[10].x;\n                        r1.w=r7.x+c24.y;\n                        r3.w=r1.w>=0.0?r6.x:cb7[15].x;\n                        r6=r7.xxxx+c35;\n                        r3.w=r6.w>=0.0?r3.w:cb7[12].x;\n                        r3.w=r6.z>=0.0?r3.w:cb7[11].x;\n                        r3.w=r6.y>=0.0?r3.w:cb7[10].x;\n                        r3.w=r6.x>=0.0?r3.w:cb7[9].x;\n                        \n                        // Webgl doesn't support CLAMP_TO_BORDER\n                        \n                        // PatternMask1Map\n                        r7=clampToBorder(s10,v6.xy, cb4[10].yz, c34.wwww); \n                        \n                        // PatternMask2Map\n                        r8=clampToBorder(s11,v6.zw, cb4[11].yz, c34.wwww); \n                        \n                        r7=r7.xxxx*cb4[12];\n                        r4.w=mix(cb7[9].x,r3.w,r7.x);\n                        r8=r8.xxxx*cb4[13];\n                        r9.x=mix(r4.w,r0.w,r8.x);\n                        r4.w=mix(cb7[10].x,r3.w,r7.y);\n                        r9.y=mix(r4.w,r0.w,r8.y);\n                        r4.w=r2.y*r9.y;\n                        r4.w=r2.x*r9.x+r4.w;\n                        r9.x=mix(cb7[11].x,r3.w,r7.z);\n                        r9.y=mix(cb7[12].x,r3.w,r7.w);\n                        r3.w=mix(r9.y,r0.w,r8.w);\n                        r10.x=mix(r9.x,r0.w,r8.z);\n                        r0.w=r2.z*r10.x+r4.w;\n                        r0.w=r2.w*r3.w+r0.w;\n                        \n                        // AlbedoMap \n                        r9.xyz=texture2D(s2,v0.xy).xyz;    \n                        \n                        // RoughnessMap    \n                        r9.w=texture2D(s3,v0.xy).x;  \n                        \n                        r3.w=r0.w*r9.w;\n                        r0.w=r9.w*(-r0.w)+c24.z;\n                        r0.w=r0.x*r0.w+r3.w;\n                        r0.w=saturate((-r0.w)+c34.x);\n                        r10.xy=(-r0.ww)+c36.zw;\n                        r3.w=min(r10.y,c34.x);\n                        r11=c30;\n                        r10=r10.xxxx*c29+r11.xxyz;\n                        r0.z=r0.z*r3.w+c28.x;\n                        r0.z=(-r3.w)+r0.z;\n                        r0.z=1.0/r0.z;\n                        r3.w=clamp(dot(cb2[12].xyz,r4.xyz),0.0, 1.0);\n                        r3.w=(-r3.w)+c34.x;\n                        r4.w=r3.w*r3.w;\n                        r4.w=r4.w*r4.w;\n                        r3.w=r3.w*r4.w;\n                        r11.xyz=cb7[17].xyz;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.yyy,vec3(0.0));\n                            r12.xyz=vec3(tmp.x?r11.x:cb7[14].x,tmp.y?r11.y:cb7[14].y,tmp.z?r11.z:cb7[14].z);\n                        }\n                        r13.xyz=cb7[16].xyz;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.yyy,vec3(0.0));\n                            r14.xyz=vec3(tmp.x?r13.x:cb7[13].x,tmp.y?r13.y:cb7[13].y,tmp.z?r13.z:cb7[13].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.www,vec3(0.0));\n                            r14.xyz=vec3(tmp.x?r14.x:cb7[4].x,tmp.y?r14.y:cb7[4].y,tmp.z?r14.z:cb7[4].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.zzz,vec3(0.0));\n                            r14.xyz=vec3(tmp.x?r14.x:cb7[3].x,tmp.y?r14.y:cb7[3].y,tmp.z?r14.z:cb7[3].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.yyy,vec3(0.0));\n                            r14.xyz=vec3(tmp.x?r14.x:cb7[2].x,tmp.y?r14.y:cb7[2].y,tmp.z?r14.z:cb7[2].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.xxx,vec3(0.0));\n                            r14.xyz=vec3(tmp.x?r14.x:cb7[1].x,tmp.y?r14.y:cb7[1].y,tmp.z?r14.z:cb7[1].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.www,vec3(0.0));\n                            r12.xyz=vec3(tmp.x?r12.x:cb7[8].x,tmp.y?r12.y:cb7[8].y,tmp.z?r12.z:cb7[8].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.zzz,vec3(0.0));\n                            r12.xyz=vec3(tmp.x?r12.x:cb7[7].x,tmp.y?r12.y:cb7[7].y,tmp.z?r12.z:cb7[7].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.yyy,vec3(0.0));\n                            r5.yzw=vec3(tmp.x?r12.x:cb7[6].x,tmp.y?r12.y:cb7[6].y,tmp.z?r12.z:cb7[6].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.xxx,vec3(0.0));\n                            r5.xyz=vec3(tmp.x?r5.y:cb7[5].x,tmp.y?r5.z:cb7[5].y,tmp.z?r5.w:cb7[5].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r1.www,vec3(0.0));\n                            r11.xyz=vec3(tmp.x?r11.x:cb7[14].x,tmp.y?r11.y:cb7[14].y,tmp.z?r11.z:cb7[14].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r1.www,vec3(0.0));\n                            r12.xyz=vec3(tmp.x?r13.x:cb7[13].x,tmp.y?r13.y:cb7[13].y,tmp.z?r13.z:cb7[13].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.www,vec3(0.0));\n                            r12.xyz=vec3(tmp.x?r12.x:cb7[4].x,tmp.y?r12.y:cb7[4].y,tmp.z?r12.z:cb7[4].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.zzz,vec3(0.0));\n                            r12.xyz=vec3(tmp.x?r12.x:cb7[3].x,tmp.y?r12.y:cb7[3].y,tmp.z?r12.z:cb7[3].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.yyy,vec3(0.0));\n                            r12.xyz=vec3(tmp.x?r12.x:cb7[2].x,tmp.y?r12.y:cb7[2].y,tmp.z?r12.z:cb7[2].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.xxx,vec3(0.0));\n                            r12.xyz=vec3(tmp.x?r12.x:cb7[1].x,tmp.y?r12.y:cb7[1].y,tmp.z?r12.z:cb7[1].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.www,vec3(0.0));\n                            r11.xyz=vec3(tmp.x?r11.x:cb7[8].x,tmp.y?r11.y:cb7[8].y,tmp.z?r11.z:cb7[8].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.zzz,vec3(0.0));\n                            r11.xyz=vec3(tmp.x?r11.x:cb7[7].x,tmp.y?r11.y:cb7[7].y,tmp.z?r11.z:cb7[7].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.yyy,vec3(0.0));\n                            r6.yzw=vec3(tmp.x?r11.x:cb7[6].x,tmp.y?r11.y:cb7[6].y,tmp.z?r11.z:cb7[6].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.xxx,vec3(0.0));\n                            r6.xyz=vec3(tmp.x?r6.y:cb7[5].x,tmp.y?r6.z:cb7[5].y,tmp.z?r6.w:cb7[5].z);\n                        }\n                        \n                        r11.xyz=mix(cb7[5].xyz,r6.xyz,r7.xxx);\n                        r13.xyz=mix(r11.xyz,r5.xyz,r8.xxx);\n                        r11.xyz=mix(cb7[6].xyz,r6.xyz,r7.yyy);\n                        r15.xyz=mix(r11.xyz,r5.xyz,r8.yyy);\n                        r11.xyz=r2.yyy*r15.xyz;\n                        r11.xyz=r2.xxx*r13.xyz+r11.xyz;\n                        r13.xyz=mix(cb7[7].xyz,r6.xyz,r7.zzz);\n                        r15.xyz=mix(cb7[8].xyz,r6.xyz,r7.www);\n                        r6.xyz=mix(r15.xyz,r5.xyz,r8.www);\n                        r15.xyz=mix(r13.xyz,r5.xyz,r8.zzz);\n                        r5.xyz=r2.zzz*r15.xyz+r11.xyz;\n                        r5.xyz=r2.www*r6.xyz+r5.xyz;\n                        r6.xyz=r5.xyz*r9.www;\n                        r5.xyz=r9.www*(-r5.xyz)+c27.xyz;\n                        r5.xyz=r0.xxx*r5.xyz+r6.xyz;\n                        r6.xyz=mix(r5.xyz,c34.xxx,r3.www);\n                        r11.xyz=r0.zzz*r6.xyz;\n                        r6.xyz=(-r6.xyz)+c34.xxx;\n                        r13.xyz=mix(cb7[1].xyz,r12.xyz,r7.xxx);\n                        r15.xyz=mix(r13.xyz,r14.xyz,r8.xxx);\n                        r13.xyz=mix(cb7[2].xyz,r12.xyz,r7.yyy);\n                        r16.xyz=mix(r13.xyz,r14.xyz,r8.yyy);\n                        r13.xyz=r2.yyy*r16.xyz;\n                        r13.xyz=r2.xxx*r15.xyz+r13.xyz;\n                        r15.xyz=mix(cb7[3].xyz,r12.xyz,r7.zzz);\n                        r16.xyz=mix(cb7[4].xyz,r12.xyz,r7.www);\n                        r7.xyz=mix(r16.xyz,r14.xyz,r8.www);\n                        r12.xyz=mix(r15.xyz,r14.xyz,r8.zzz);\n                        r8.xyz=r2.zzz*r12.xyz+r13.xyz;\n                        r7.xyz=r2.www*r7.xyz+r8.xyz;\n                        r8.xyz=mix(r7.xyz,c34.xxx,r0.xxx);\n                        r0.xyz=r8.xyz*r9.xyz;\n                        r6.xyz=r6.xyz*r0.xyz;\n                        r1.w=r0.w*r0.w;\n                        r7.w=r0.w*c28.y;\n                        r0.w=r1.w*r1.w+c34.z;\n                        r1.w=r1.w*r1.w;\n                        \n                        // NormalMap \n                        r8.ywx=texture2D(s4,v0.xy).xyz; \n                        \n                        // AoMap\n                        r8.z=texture2D(s5,v0.xy).x;  \n                        \n                        r8.xy=r8.yw*c34.yy+c34.zz;\n                        r9.xyz=r8.yyy*v3.xyz;\n                        r9.xyz=r8.xxx*v2.xyz+r9.xyz;\n                        r3.w=saturate(dot(r8.xy,r8.xy)+c34.w);\n                        r3.w=(-r3.w)+c34.x;\n                        r3.w=sqrt(abs(r3.w));\n                        r8.xyz=r3.www*v1.xyz+r9.xyz;\n                        r9.xyz=normalize(r8.xyz);\n                        r3.w=clamp(dot(r9.xyz,r4.xyz),0.0, 1.0);\n                        r3.w=r3.w*r3.w;\n                        r0.w=r3.w*r0.w+c34.x;\n                        r0.w=r0.w*r0.w;\n                        r3.w=r0.w*c24.w;\n                        r0.w=r0.w*c36.x+c36.y;\n                        r3.w=1.0/r3.w;\n                        r0.w=r0.w>=0.0?r3.w:c27.w;\n                        r0.w=r0.w*r1.w;\n                        r4.xyz=r11.xyz*r0.www+r6.xyz;\n                        r0.w=clamp(dot(cb2[12].xyz,r9.xyz),0.0, 1.0);\n                        r4.xyz=r0.www*r4.xyz;\n                        r1.xyz=r1.xyz*r4.xyz;\n                        r4.xyz=max(r1.xyz,c34.www);\n                        r0.w=dot(r3.xyz,r9.xyz);\n                        r1.x=saturate(r0.w);\n                        r0.w=r0.w+r0.w;\n                        r1.yzw=r9.xyz*(-r0.www)+r3.xyz;\n                        r0.w=r1.x*c28.z;\n                        r0.w=exp2(r0.w);\n                        r1.x=min(r0.w,r10.y);\n                        r0.w=r10.x*r1.x+r10.z;\n                        r3.xyz=saturate(mix(r0.www,r10.www,r5.xyz));\n                        r5.xyz=(-r3.xyz)+c34.xxx;\n                        r0.xyz=r0.xyz*r5.xyz;\n                        r9.w=c28.w;\n                        r5=textureCubeLod(s0,r9.xyz,r9.w);\n                        r0.w=r11.w*cb2[14].w;\n                        r5.xyz=r5.xyz*cb2[14].www+r0.www;\n                        r0.xyz=r0.xyz*r5.xyz;\n                        r0.xyz=r0.xyz*c31.xxx;\n                        r7.x=dot((-r1.yzw),cb2[8].xyz);\n                        r7.y=dot((-r1.yzw),cb2[9].xyz);\n                        r7.z=dot((-r1.yzw),cb2[10].xyz);\n                        r1=textureCubeLod(s0,r7.xyz,r7.w);\n                        r1.xyz=r1.xyz*cb2[14].www;\n                        r0.xyz=r1.xyz*r3.xyz+r0.xyz;\n                        r1.xyz=max(r0.xyz,c34.www);\n                        r0.xyz=r1.xyz+r4.xyz;\n                        \n                        // Use r3 instead of r1 <-----------------------------------------------------------------------\n                        r3.xy=mix(v0.xy,v0.zw,cb7[0].yy);\n                        \n                        // NormalMap \n                        r1.ywx=texture2D(s4,r3.xy).xyz; \n                        \n                        // AoMap\n                        r1.z=texture2D(s5,r3.xy).x;    \n                        \n                        r0.xyz=r0.xyz*r1.zzz+(-cb2[15].xyz);\n                        r0.w=cb2[15].w*v4.w;\n                        r0.w=r0.w*c31.y;\n                        r0.w=exp2(r0.w);\n                        r0.xyz=r0.www*r0.xyz+cb2[15].xyz;\n                        r1=r2.yyyy*cb7[20];\n                        r1=r2.xxxx*cb7[19]+r1;\n                        r1=r2.zzzz*cb7[21]+r1;\n                        r1=r2.wwww*cb7[22]+r1;\n                        r2.xy=r1.yy*cb2[21].xx+v0.xy;\n                        r2.xy=r1.zz*r2.xy;\n                        \n                        // HeatGlowMap\n                        r2=texture2D(s12,r2.xy);\n                        \n                        r2.zw=r1.yy*(-cb2[21].xx)+v0.xy;\n                        r1.yz=r1.zz*r2.zw;\n                        \n                        // HeatGlowMap\n                        r3=texture2D(s12,r1.yz);\n                        \n                        r1.yz=r2.xy*r3.xy+c26.ww;\n                        r2.z=c31.z;\n                        r0.w=r2.z+cb4[0].x;\n                        r0.w=saturate(r0.w*c31.w);\n                        r0.w=r0.w+c34.z;\n                        r0.w=saturate(r1.x*r0.w+c34.x);\n                        r1.x=r1.w*r0.w;\n                        r1.xy=r1.xx*r1.yz+v0.xy;\n                        \n                        r5.xy = r1.xy;\n                        \n                        // PaintMaskMap\n                        r1.x=texture2D(s6,r5.xy).x * ").concat(n.texture.PaintMaskMap.multiplier,";  \n                        \n                        // MaterialMap\n                        r1.y=texture2D(s7,r5.xy).x;    \n                        \n                        // DirtMap (Not required here) <----------------------------------------------------------------    \n                        r1.z=texture2D(s8,r5.xy).x;   \n                        \n                        // GlowMap     \n                        r1.w=texture2D(s9,r5.xy).x;    \n                        \n                        r1.x=r1.w*r1.w;\n                        r1.x=r1.x*cb4[0].y;\n                        r0.w=r0.w*r1.x;\n                        r0.xyz=cb7[23].xyz*r0.www+r0.xyz;\n                        r1.xyz=max(r0.xyz,c34.www);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c32.zzz;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c33.xxx+c33.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c32.xxx;\n                        r2.xyz=r2.xyz*c32.yyy;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n                        \n                        ").concat(n.ps.shadowFooter,"\n                    }\n                ")}}}},p={name:"skinned_quadHeatV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/skinned_quadHeatV5",description:"skinned ".concat(f.description),todo:f.todo,techniques:{Depth:o.skinnedQuadDepthV5.techniques.Main,Picking:a.skinnedQuadPickingV5.techniques.Main,Outline:c.skinnedQuadOutlineV5.techniques.Main,ExtendedPicking:l.skinnedQuadExtendedPickingHeatV5.techniques.Main,Utility:s.skinnedQuadUtilityHeatV5.techniques.Main,Main:{vs:n.vs.skinnedQuadV5_PosBwtTexTanTex,ps:f.techniques.Main.ps}}}},"../shaders/quad/quadinstancedv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadInstancedV5",(function(){return c})),r.d(t,"skinnedQuadInstancedV5",(function(){return l}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/quad/quaddepthv5.js"),o=r("../shaders/quad/quadpickingv5.js"),a=r("../shaders/shared/texture.js"),u=r("../shaders/shared/func.js"),c={name:"quadInstancedV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/quadInstancedV5",description:"instanced quad shader",todo:"Add dirt",techniques:{Depth:{vs:n.vs.quadInstancedV5_PosTexTexTexTex,ps:i.quadDepthV5.techniques.Main.ps},Picking:{vs:n.vs.quadInstancedV5_PosTexTexTexTex,ps:o.quadPickingV5.techniques.Main.ps},Main:{vs:n.vs.quadInstancedV5_PosTexTanTexTexTexTex,ps:{textures:[a.EveSpaceSceneEnvMap,a.EveSpaceSceneShadowMap,n.texture.AlbedoMap,n.texture.RoughnessMap,n.texture.NormalMap,n.texture.AoMap,n.texture.PaintMaskMap,n.texture.MaterialMap,n.texture.DirtMap,n.texture.GlowMap,n.texture.PatternMask1Map,n.texture.PatternMask2Map,a.DustNoiseMap],constants:[n.constant.GeneralGlowColor,n.constant.Mtl1DiffuseColor,n.constant.Mtl2DiffuseColor,n.constant.Mtl3DiffuseColor,n.constant.Mtl4DiffuseColor,n.constant.Mtl1FresnelColor,n.constant.Mtl2FresnelColor,n.constant.Mtl3FresnelColor,n.constant.Mtl4FresnelColor,n.constant.Mtl1Gloss,n.constant.Mtl2Gloss,n.constant.Mtl3Gloss,n.constant.Mtl4Gloss,n.constant.PMtl1DiffuseColor,n.constant.PMtl1FresnelColor,n.constant.PMtl1Gloss,n.constant.PMtl2DiffuseColor,n.constant.PMtl2FresnelColor,n.constant.PMtl2Gloss,n.constant.Mtl1DustDiffuseColor,n.constant.Mtl2DustDiffuseColor,n.constant.Mtl3DustDiffuseColor,n.constant.Mtl4DustDiffuseColor],shader:"\n                \n                    ".concat(n.ps.header,"\n                    ").concat(u.clampToBorder,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord6;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    \n                    uniform samplerCube s0;\n                    uniform sampler2D s1;\n                    uniform sampler2D s2;   // AlbedoMap\n                    uniform sampler2D s3;   // RoughnessMap\n                    uniform sampler2D s4;   // NormalMap\n                    uniform sampler2D s5;   // AoMap\n                    uniform sampler2D s6;   // PaintMaskMap\n                    uniform sampler2D s7;   // MaterialMap\n                    uniform sampler2D s8;   // DirtMap\n                    uniform sampler2D s9;   // GlowMap\n                    uniform sampler2D s10;  // PatternMask1Map;\n                    uniform sampler2D s11;  // PatternMask2Map;\n                    uniform sampler2D s12;  // DustNoiseMap\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[14];\n                    uniform vec4 cb7[23];\n\n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 v8;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r10;\n                        vec4 r11;\n                        vec4 r12;\n                        vec4 r13;\n                        vec4 r14;\n                        vec4 r15;\n                        vec4 r16;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        vec4 c19=vec4(9.99999997e-007,-5,3.14159274,-1e-015);\n                        vec4 c20=vec4(1,2,-1,0);\n                        vec4 c21=vec4(-0,-0.333333343,-0.666666687,-1);\n                        vec4 c22=vec4(3.19148946,1.03191495,0.5,-0.5);\n                        vec4 c23=vec4(9.99999987e+014,1,1.54499996,1.10000002);\n                        vec4 c24=vec4(6,0,-0.015625,0.75);\n                        vec4 c25=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c26=vec4(-9.27999973,7,0.119999997,0.318309873);\n                        vec4 c27=vec4(-1.44269507e-005,-0.00313080009,12.9200001,0.416666657);\n                        vec4 c28=vec4(1.05499995,-0.0549999997,0,0);\n                        vec4 c29=vec4(-1,-2,-3,-4);\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord6;\n                        v7=texcoord7;\n                        v8=texcoord8;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        // PaintMaskMap\n                        r0.x=texture2D(s6,v0.xy).x * ").concat(n.texture.PaintMaskMap.multiplier,";  \n                        \n                        // MaterialMap\n                        r0.y=texture2D(s7,v0.xy).x;    \n                        \n                        // DirtMap (Not required here) <----------------------------------------------------------------    \n                        r0.z=texture2D(s8,v0.xy).x;   \n                        \n                        // GlowMap     \n                        r0.w=texture2D(s9,v0.xy).x; \n                        \n                        gl_FragData[0].w=(-r0.x)+c20.x;\n                        r0.x=(-cb2[19].x)+cb2[19].y;\n                        r0.x=1.0/r0.x;\n                        r0.z=(-cb2[19].x)+v7.z;\n                        r0.x=r0.x*r0.z;\n                        r0.x=sqrt(abs(r0.x));\n                        r0.z=1.0/v8.w;\n                        r1.xy=r0.zz*v8.xy;\n                        r1.xy=r1.xy*c22.zw+c22.zz;\n                        r0.z=c22.z;\n                        r1.xy=cb2[18].xy*r0.zz+r1.xy;\n                        r1=texture2D(s1,r1.xy);\n                        r0.z=r0.x+(-r1.x);\n                        r1.y=r1.x*(-r1.x)+r1.y;\n                        r1.x=r1.x+cb2[18].z;\n                        r0.x=(-r0.x)+r1.x;\n                        r0.x=r0.x>=0.0?c20.x:c20.w;\n                        r2.x=max(r1.y,c19.x);\n                        r0.z=r0.z*r0.z+r2.x;\n                        r0.z=1.0/r0.z;\n                        r0.z=r0.z*r2.x;\n                        r1.x=saturate(max(r0.x,r0.z));\n                        r0.x=r1.x+(-cb2[18].w);\n                        r1.x=c20.x;\n                        r0.z=r1.x+(-cb2[18].w);\n                        r0.z=1.0/r0.z;\n                        r0.x=saturate(r0.z*r0.x);\n                        r0.x=(-cb2[19].x)>=0.0?r0.x:r1.x;\n                        r1.x=max(cb2[19].z,r0.x);\n                        r0.x=r1.x*r1.x;\n                        r1.xyz=r0.xxx*cb2[13].xyz;\n                        r1.xyz=r1.xyz*(-c21.zzz);\n                        r0.x=dot(v4.xyz,v4.xyz);\n                        r0.x=r0.x==0.0?3.402823466e+38:inversesqrt(abs(r0.x));\n                        r2.xyz=v4.xyz*r0.xxx+cb2[12].xyz;\n                        r3.xyz=r0.xxx*v4.xyz;\n                        r4.xyz=normalize(r2.xyz);\n                        r0.x=clamp(dot(cb2[12].xyz,r4.xyz),0.0, 1.0);\n                        r0.x=(-r0.x)+c20.x;\n                        r0.z=r0.x*r0.x;\n                        r0.z=r0.z*r0.z;\n                        r0.x=r0.z*r0.x;\n                        r2.y=c19.y;\n                        r0.z=r2.y+cb4[11].x;\n                        r5.xyz=cb7[17].xyz;\n                        {bvec3 tmp=greaterThanEqual(r0.zzz,vec3(0.0));r2.xzw=vec3(tmp.x?r5.x:cb7[14].x,tmp.y?r5.y:cb7[14].y,tmp.z?r5.z:cb7[14].z);};\n                        r6=c29;\n                        r7=r6+cb4[11].xxxx;\n                        {bvec3 tmp=greaterThanEqual(r7.www,vec3(0.0));r2.xzw=vec3(tmp.x?r2.x:cb7[8].x,tmp.y?r2.z:cb7[8].y,tmp.z?r2.w:cb7[8].z);};\n                        {bvec3 tmp=greaterThanEqual(r7.zzz,vec3(0.0));r2.xzw=vec3(tmp.x?r2.x:cb7[7].x,tmp.y?r2.z:cb7[7].y,tmp.z?r2.w:cb7[7].z);};\n                        {bvec3 tmp=greaterThanEqual(r7.yyy,vec3(0.0));r2.xzw=vec3(tmp.x?r2.x:cb7[6].x,tmp.y?r2.z:cb7[6].y,tmp.z?r2.w:cb7[6].z);};\n                        {bvec3 tmp=greaterThanEqual(r7.xxx,vec3(0.0));r2.xzw=vec3(tmp.x?r2.x:cb7[5].x,tmp.y?r2.z:cb7[5].y,tmp.z?r2.w:cb7[5].z);};\n                        r1.w=r2.y+cb4[10].x;\n                        {bvec3 tmp=greaterThanEqual(r1.www,vec3(0.0));r5.xyz=vec3(tmp.x?r5.x:cb7[14].x,tmp.y?r5.y:cb7[14].y,tmp.z?r5.z:cb7[14].z);};\n                        r6=r6+cb4[10].xxxx;\n                        {bvec3 tmp=greaterThanEqual(r6.www,vec3(0.0));r5.xyz=vec3(tmp.x?r5.x:cb7[8].x,tmp.y?r5.y:cb7[8].y,tmp.z?r5.z:cb7[8].z);};\n                        {bvec3 tmp=greaterThanEqual(r6.zzz,vec3(0.0));r5.xyz=vec3(tmp.x?r5.x:cb7[7].x,tmp.y?r5.y:cb7[7].y,tmp.z?r5.z:cb7[7].z);};\n                        {bvec3 tmp=greaterThanEqual(r6.yyy,vec3(0.0));r5.xyz=vec3(tmp.x?r5.x:cb7[6].x,tmp.y?r5.y:cb7[6].y,tmp.z?r5.z:cb7[6].z);};\n                        {bvec3 tmp=greaterThanEqual(r6.xxx,vec3(0.0));r5.xyz=vec3(tmp.x?r5.x:cb7[5].x,tmp.y?r5.y:cb7[5].y,tmp.z?r5.z:cb7[5].z);};\n                        \n                        // Webgl doesn't support CLAMP_TO_EDGE\n                        \n                        // PatternMask1Map\n                        r8=clampToBorder(s10,v6.xy, cb4[10].yz, c20.wwww);\n                        \n                        // PatternMask2Map\n                        r10=clampToBorder(s11,v6.zw, cb4[11].yz, c20.wwww);\n                        \n                        r8=r8.xxxx*cb4[12];\n                        r9.xyz=mix(cb7[6].xyz,r5.xyz,r8.yyy);\n                        r10=r10.xxxx*cb4[13];\n                        r11.xyz=mix(r9.xyz,r2.xzw,r10.yyy);\n                        r9=r0.yyyy+c21;\n                        r0.y=r0.w*r0.w;\n                        r9=r9*c22.xxxx;\n                        r9=saturate((-abs(r9))+c22.yyyy);\n                        r11.xyz=r11.xyz*r9.yyy;\n                        r12.xyz=mix(cb7[5].xyz,r5.xyz,r8.xxx);\n                        r13.xyz=mix(r12.xyz,r2.xzw,r10.xxx);\n                        r11.xyz=r9.xxx*r13.xyz+r11.xyz;\n                        r12.xyz=mix(cb7[7].xyz,r5.xyz,r8.zzz);\n                        r13.xyz=mix(cb7[8].xyz,r5.xyz,r8.www);\n                        r5.xyz=mix(r13.xyz,r2.xzw,r10.www);\n                        r13.xyz=mix(r12.xyz,r2.xzw,r10.zzz);\n                        r2.xyz=r9.zzz*r13.xyz+r11.xyz;\n                        r2.xyz=r9.www*r5.xyz+r2.xyz;\n                        \n                        // AlbedoMap \n                        r5.xyz=texture2D(s2,v0.xy).xyz;    \n                        \n                        // RoughnessMap    \n                        r5.w=texture2D(s3,v0.xy).x;  \n                        \n                        r11.xyz=r5.www*(-r2.xyz)+c20.xxx;\n                        r2.xyz=r2.xyz*r5.www;\n                        r11.xyz=r11.xyz*r0.xxx+r2.xyz;\n                        r0.x=cb7[18].x;\n                        r0.w=r0.z>=0.0?r0.x:cb7[15].x;\n                        r12.xyz=cb7[16].xyz;\n                        {bvec3 tmp=greaterThanEqual(r0.zzz,vec3(0.0));r13.xyz=vec3(tmp.x?r12.x:cb7[13].x,tmp.y?r12.y:cb7[13].y,tmp.z?r12.z:cb7[13].z);};\n                        {bvec3 tmp=greaterThanEqual(r7.www,vec3(0.0));r13.xyz=vec3(tmp.x?r13.x:cb7[4].x,tmp.y?r13.y:cb7[4].y,tmp.z?r13.z:cb7[4].z);};\n                        {bvec3 tmp=greaterThanEqual(r7.zzz,vec3(0.0));r13.xyz=vec3(tmp.x?r13.x:cb7[3].x,tmp.y?r13.y:cb7[3].y,tmp.z?r13.z:cb7[3].z);};\n                        {bvec3 tmp=greaterThanEqual(r7.yyy,vec3(0.0));r13.xyz=vec3(tmp.x?r13.x:cb7[2].x,tmp.y?r13.y:cb7[2].y,tmp.z?r13.z:cb7[2].z);};\n                        {bvec3 tmp=greaterThanEqual(r7.xxx,vec3(0.0));r13.xyz=vec3(tmp.x?r13.x:cb7[1].x,tmp.y?r13.y:cb7[1].y,tmp.z?r13.z:cb7[1].z);};\n                        r0.z=r7.w>=0.0?r0.w:cb7[12].x;\n                        r0.z=r7.z>=0.0?r0.z:cb7[11].x;\n                        r0.z=r7.y>=0.0?r0.z:cb7[10].x;\n                        r0.z=r7.x>=0.0?r0.z:cb7[9].x;\n                        r0.x=r1.w>=0.0?r0.x:cb7[15].x;\n                        {bvec3 tmp=greaterThanEqual(r1.www,vec3(0.0));r7.xyz=vec3(tmp.x?r12.x:cb7[13].x,tmp.y?r12.y:cb7[13].y,tmp.z?r12.z:cb7[13].z);};\n                        {bvec3 tmp=greaterThanEqual(r6.www,vec3(0.0));r7.xyz=vec3(tmp.x?r7.x:cb7[4].x,tmp.y?r7.y:cb7[4].y,tmp.z?r7.z:cb7[4].z);};\n                        {bvec3 tmp=greaterThanEqual(r6.zzz,vec3(0.0));r7.xyz=vec3(tmp.x?r7.x:cb7[3].x,tmp.y?r7.y:cb7[3].y,tmp.z?r7.z:cb7[3].z);};\n                        {bvec3 tmp=greaterThanEqual(r6.yyy,vec3(0.0));r7.xyz=vec3(tmp.x?r7.x:cb7[2].x,tmp.y?r7.y:cb7[2].y,tmp.z?r7.z:cb7[2].z);};\n                        {bvec3 tmp=greaterThanEqual(r6.xxx,vec3(0.0));r7.xyz=vec3(tmp.x?r7.x:cb7[1].x,tmp.y?r7.y:cb7[1].y,tmp.z?r7.z:cb7[1].z);};\n                        r0.x=r6.w>=0.0?r0.x:cb7[12].x;\n                        r0.x=r6.z>=0.0?r0.x:cb7[11].x;\n                        r0.x=r6.y>=0.0?r0.x:cb7[10].x;\n                        r0.x=r6.x>=0.0?r0.x:cb7[9].x;\n                        r1.w=mix(cb7[9].x,r0.x,r8.x);\n                        r2.w=mix(r1.w,r0.z,r10.x);\n                        r1.w=mix(cb7[10].x,r0.x,r8.y);\n                        r3.w=mix(r1.w,r0.z,r10.y);\n                        r0.w=r3.w*r9.y;\n                        r0.w=r9.x*r2.w+r0.w;\n                        r1.w=mix(cb7[11].x,r0.x,r8.z);\n                        r2.w=mix(cb7[12].x,r0.x,r8.w);\n                        r3.w=mix(r2.w,r0.z,r10.w);\n                        r2.w=mix(r1.w,r0.z,r10.z);\n                        r0.x=r9.z*r2.w+r0.w;\n                        r0.x=r9.w*r3.w+r0.x;\n                        r0.x=saturate(r5.w*(-r0.x)+c20.x);\n                        r0.zw=(-r0.xx)+c23.yz;\n                        r1.w=min(r0.w,c20.x);\n                        r6.yzw=c24.yzw;\n                        r6=r0.zzzz*c25+r6.yyzw;\n                        r0.z=clamp(dot(r4.xyz,r3.xyz),0.0, 1.0);\n                        r0.z=r0.z*r0.z;\n                        r0.z=r0.z*r1.w+c23.w;\n                        r0.z=(-r1.w)+r0.z;\n                        r0.z=1.0/r0.z;\n                        r12.xyz=r0.zzz*r11.xyz;\n                        r11.xyz=(-r11.xyz)+c20.xxx;\n                        r14.xyz=mix(cb7[2].xyz,r7.xyz,r8.yyy);\n                        r15.xyz=mix(r14.xyz,r13.xyz,r10.yyy);\n                        r14.xyz=r9.yyy*r15.xyz;\n                        r15.xyz=mix(cb7[1].xyz,r7.xyz,r8.xxx);\n                        r16.xyz=mix(r15.xyz,r13.xyz,r10.xxx);\n                        r14.xyz=r9.xxx*r16.xyz+r14.xyz;\n                        r15.xyz=mix(cb7[3].xyz,r7.xyz,r8.zzz);\n                        r16.xyz=mix(cb7[4].xyz,r7.xyz,r8.www);\n                        r7.xyz=mix(r16.xyz,r13.xyz,r10.www);\n                        r8.xyz=mix(r15.xyz,r13.xyz,r10.zzz);\n                        r8.xyz=r9.zzz*r8.xyz+r14.xyz;\n                        r7.xyz=r9.www*r7.xyz+r8.xyz;\n                        r5.xyz=r5.xyz*r7.xyz;\n                        r7.xyz=r11.xyz*r5.xyz;\n                        r0.z=r0.x*r0.x;\n                        r8.w=r0.x*c24.x;\n                        r0.x=r0.z*r0.z;\n                        r0.z=r0.z*r0.z+c20.z;\n                        \n                        // NormalMap \n                        r9.ywx=texture2D(s4,v0.xy).xyz; \n                        \n                        // AoMap\n                        r9.z=texture2D(s5,v0.xy).x;   \n                        \n                        r9.xy=r9.yw*c20.yy+c20.zz;\n                        r10.xyz=r9.yyy*v3.xyz;\n                        r10.xyz=r9.xxx*v2.xyz+r10.xyz;\n                        r0.w=saturate(dot(r9.xy,r9.xy)+c20.w);\n                        r0.w=(-r0.w)+c20.x;\n                        r0.w=sqrt(abs(r0.w));\n                        r9.xyz=r0.www*v1.xyz+r10.xyz;\n                        r10.xyz=normalize(r9.xyz);\n                        r0.w=clamp(dot(r10.xyz,r4.xyz),0.0, 1.0);\n                        r0.w=r0.w*r0.w;\n                        r0.z=r0.w*r0.z+c20.x;\n                        r0.z=r0.z*r0.z;\n                        r0.w=r0.z*c19.z;\n                        r0.z=r0.z*c19.z+c19.w;\n                        r0.w=1.0/r0.w;\n                        r0.z=r0.z>=0.0?r0.w:c23.x;\n                        r0.x=r0.z*r0.x;\n                        r0.xzw=r12.xyz*r0.xxx+r7.xyz;\n                        r1.w=clamp(dot(cb2[12].xyz,r10.xyz),0.0, 1.0);\n                        r0.xzw=r0.xzw*r1.www;\n                        r0.xzw=r1.xyz*r0.xzw;\n                        r1.xyz=max(r0.xzw,c20.www);\n                        r0.x=dot(r3.xyz,r10.xyz);\n                        r0.z=r0.x+r0.x;\n                        r0.x=saturate(r0.x);\n                        r0.x=r0.x*c26.x;\n                        r0.x=exp2(r0.x);\n                        r1.w=min(r0.x,r6.y);\n                        r0.x=r6.x*r1.w+r6.z;\n                        r4.xyz=saturate(mix(r0.xxx,r6.www,r2.xyz));\n                        r0.xzw=r10.xyz*(-r0.zzz)+r3.xyz;\n                        r8.x=dot((-r0.xzw),cb2[8].xyz);\n                        r8.y=dot((-r0.xzw),cb2[9].xyz);\n                        r8.z=dot((-r0.xzw),cb2[10].xyz);\n                        r2=textureCubeLod(s0,r8.xyz,r8.w);\n                        r0.xzw=r2.xyz*cb2[14].www;\n                        r10.w=c26.y;\n                        r2=textureCubeLod(s0,r10.xyz,r10.w);\n                        r1.w=cb2[14].w;\n                        r1.w=r1.w*c26.z;\n                        r2.xyz=r2.xyz*cb2[14].www+r1.www;\n                        r3.xyz=(-r4.xyz)+c20.xxx;\n                        r3.xyz=r3.xyz*r5.xyz;\n                        r2.xyz=r2.xyz*r3.xyz;\n                        r2.xyz=r2.xyz*c26.www;\n                        r0.xzw=r0.xzw*r4.xyz+r2.xyz;\n                        r2.xyz=max(r0.xzw,c20.www);\n                        r0.xzw=r1.xyz+r2.xyz;\n                        r1.x=cb2[15].w*v4.w;\n                        r1.x=r1.x*c27.x;\n                        r1.x=exp2(r1.x);\n                        r2.xyz=mix(cb2[15].xyz,r0.xzw,r1.xxx);\n                        r3.xyz=cb2[15].xyz;\n                        r0.xzw=(-r3.xyz)+cb7[0].xyz;\n                        r0.xzw=r1.xxx*r0.xzw+cb2[15].xyz;\n                        r0.xzw=r0.xzw*cb4[0].yyy;\n                        r0.xyz=r0.xzw*r0.yyy+r2.xyz;\n                        r1.xyz=max(r0.xyz,c20.www);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c27.www;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c28.xxx+c28.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c27.yyy;\n                        r2.xyz=r2.xyz*c27.zzz;\n                        {bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);};\n                        \n                        ").concat(n.ps.shadowFooter,"\n                    }               \n                ")}}}},l={name:"skinned_quadInstancedV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/skinned_quadInstancedV5",description:"skinned ".concat(c.description),techniques:c.techniques}},"../shaders/quad/quadoilv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadOilV5",(function(){return l})),r.d(t,"skinnedQuadOilV5",(function(){return s}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/shared/texture.js"),o=r("../shaders/quad/quaddepthv5.js"),a=r("../shaders/quad/quadpickingv5.js"),u=r("../shaders/quad/quadv5.js"),c=r("../shaders/quad/extended/quadExtendedPickingNoPatternV5.js"),l={name:"quadOilV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/quadOilV5",description:"oil quad shader",todo:"Add dirt",techniques:{Picking:a.quadPickingV5.techniques.Main,Depth:o.quadDepthV5.techniques.Main,Emissive:u.quadV5.techniques.Emissive,ExtendedPicking:c.quadExtendedPickingNoPatternV5.techniques.Main,Main:{vs:n.vs.quadOilV5_PosTexTanTex,ps:{constants:[n.constant.GeneralData,n.constant.GeneralGlowColor,n.constant.Mtl1DiffuseColor,n.constant.Mtl2DiffuseColor,n.constant.Mtl3DiffuseColor,n.constant.Mtl4DiffuseColor,n.constant.Mtl1FresnelColor,n.constant.Mtl2FresnelColor,n.constant.Mtl3FresnelColor,n.constant.Mtl4FresnelColor,n.constant.Mtl1Gloss,n.constant.Mtl2Gloss,n.constant.Mtl3Gloss,n.constant.Mtl4Gloss,n.constant.Mtl1DustDiffuseColor,n.constant.Mtl2DustDiffuseColor,n.constant.Mtl3DustDiffuseColor,n.constant.Mtl4DustDiffuseColor],textures:[i.EveSpaceSceneEnvMap,i.EveSpaceSceneShadowMap,n.texture.AlbedoMap,n.texture.RoughnessMap,n.texture.NormalMap,n.texture.AoMap,n.texture.PaintMaskMap,n.texture.MaterialMap,n.texture.DirtMap,n.texture.GlowMap,n.texture.OilFilmLookupMap,i.DustNoiseMap],shader:"\n                \n                    ".concat(n.ps.header,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    \n                    uniform samplerCube s0; // EveSpaceSceneEnvMap\n                    uniform sampler2D s1;   // EveSpaceSceneShadowMap\n                    uniform sampler2D s2;   // AlbedoMap\n                    uniform sampler2D s3;   // RoughnessMap\n                    uniform sampler2D s4;   // NormalMap\n                    uniform sampler2D s5;   // AoMap\n                    uniform sampler2D s6;   // PaintMaskMap\n                    uniform sampler2D s7;   // MaterialMap\n                    uniform sampler2D s8;   // DirtMap\n                    uniform sampler2D s9;   // GlowMap\n                    uniform sampler2D s10;  // OilFilmLookupMap\n                    uniform sampler2D s11;  // DustNoiseMap\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[3];\n                    uniform vec4 cb7[18];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r10;\n                        vec4 r11;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        vec4 c14=vec4(9.99999997e-007,0.0383840017,0.0393519998,0.0391650014);\n                        vec4 c15=vec4(1,2,-1,0);\n                        vec4 c16=vec4(-0,-0.333333343,-0.666666687,-1);\n                        vec4 c17=vec4(3.19148946,1.03191495,0.5,-0.5);\n                        vec4 c18=vec4(0.400000006,3.14159274,-1e-015,9.99999987e+014);\n                        vec4 c19=vec4(1,1.54499996,1.10000002,6);\n                        vec4 c20=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c21=vec4(0,-0.015625,0.75,-9.27999973);\n                        vec4 c22=vec4(7,0.119999997,0.318309873,-1.44269507e-005);\n                        vec4 c23=vec4(0.5,0,0.0199999996,16);\n                        vec4 c24=vec4(-0.00313080009,12.9200001,0.416666657,0);\n                        vec4 c25=vec4(1.05499995,-0.0549999997,0,0);\n                        vec4 c26=vec4(-0.00100000005,0.00100000005,0.699999988,3);\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord7;\n                        v7=texcoord8;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        // PaintMaskMap\n                        r0.x=texture2D(s6,v0.xy).x * ").concat(n.texture.PaintMaskMap.multiplier,";  \n                        \n                        // MaterialMap\n                        r0.y=texture2D(s7,v0.xy).x;    \n                        \n                        // DirtMap (Not required here) <----------------------------------------------------------------    \n                        r0.z=texture2D(s8,v0.xy).x;   \n                        \n                        // GlowMap     \n                        r0.w=texture2D(s9,v0.xy).x;      \n                        \n                        gl_FragData[0].w=(-r0.x)+c15.x;\n                        r0.z=(-cb2[19].x)+cb2[19].y;\n                        r0.z=1.0/r0.z;\n                        r1.x=(-cb2[19].x)+v6.z;\n                        r0.z=r0.z*r1.x;\n                        r0.z=sqrt(abs(r0.z));\n                        r1.x=1.0/v7.w;\n                        r1.xy=r1.xx*v7.xy;\n                        r1.xy=r1.xy*c17.zw+c17.zz;\n                        r1.z=c17.z;\n                        r1.xy=cb2[18].xy*r1.zz+r1.xy;\n                        r1=texture2D(s1,r1.xy);\n                        r1.z=r0.z+(-r1.x);\n                        r1.y=r1.x*(-r1.x)+r1.y;\n                        r1.x=r1.x+cb2[18].z;\n                        r0.z=(-r0.z)+r1.x;\n                        r0.z=r0.z>=0.0?c15.x:c15.w;\n                        r2.x=max(r1.y,c14.x);\n                        r1.x=r1.z*r1.z+r2.x;\n                        r1.x=1.0/r1.x;\n                        r1.x=r1.x*r2.x;\n                        r2.x=saturate(max(r0.z,r1.x));\n                        r0.z=r2.x+(-cb2[18].w);\n                        r1.x=c15.x;\n                        r1.y=r1.x+(-cb2[18].w);\n                        r1.y=1.0/r1.y;\n                        r0.z=saturate(r0.z*r1.y);\n                        r0.z=(-cb2[19].x)>=0.0?r0.z:r1.x;\n                        r1.x=max(cb2[19].z,r0.z);\n                        r0.z=r1.x*r1.x;\n                        r1.yzw=r0.zzz*cb2[13].xyz;\n                        r1.yzw=r1.yzw*(-c16.zzz);\n                        r0.z=dot(v4.xyz,v4.xyz);\n                        r0.z=r0.z==0.0?3.402823466e+38:inversesqrt(abs(r0.z));\n                        r2.xyz=v4.xyz*r0.zzz+cb2[12].xyz;\n                        r3.xyz=r0.zzz*v4.xyz;\n                        r4.xyz=normalize(r2.xyz);\n                        r0.z=clamp(dot(r4.xyz,r3.xyz),0.0, 1.0);\n                        r0.z=r0.z*r0.z;\n                        r0.x=r0.x*cb7[0].x;\n                        r2=r0.yyyy+c16;\n                        r0.y=r0.w*r0.w;\n                        r2=r2*c17.xxxx;\n                        r2=saturate((-abs(r2))+c17.yyyy);\n                        r0.w=r2.y*cb7[11].x;\n                        r0.w=r2.x*cb7[10].x+r0.w;\n                        r0.w=r2.z*cb7[12].x+r0.w;\n                        r0.w=r2.w*cb7[13].x+r0.w;\n                        \n                        // AlbedoMap \n                        r5.xyz=texture2D(s2,v0.xy).xyz;    \n                        \n                        // RoughnessMap    \n                        r5.w=texture2D(s3,v0.xy).x;  \n                        \n                        r3.w=r0.w*r5.w;\n                        r0.w=r5.w*(-r0.w)+c18.x;\n                        r0.w=r0.x*r0.w+r3.w;\n                        r0.w=saturate((-r0.w)+c15.x);\n                        r6.xy=(-r0.ww)+c19.xy;\n                        r3.w=min(r6.y,c15.x);\n                        r7.xyz=c21.xyz;\n                        r6=r6.xxxx*c20+r7.xxyz;\n                        r0.z=r0.z*r3.w+c19.z;\n                        r0.z=(-r3.w)+r0.z;\n                        r0.z=1.0/r0.z;\n                        r3.w=clamp(dot(cb2[12].xyz,r4.xyz),0.0, 1.0);\n                        r3.w=(-r3.w)+c15.x;\n                        r4.w=r3.w*r3.w;\n                        r4.w=r4.w*r4.w;\n                        r3.w=r3.w*r4.w;\n                        r7.xyz=r2.yyy*cb7[7].xyz;\n                        r7.xyz=r2.xxx*cb7[6].xyz+r7.xyz;\n                        r7.xyz=r2.zzz*cb7[8].xyz+r7.xyz;\n                        r7.xyz=r2.www*cb7[9].xyz+r7.xyz;\n                        r8.xyz=r5.www*r7.xyz;\n                        r7.xyz=r5.www*(-r7.xyz)+c14.yzw;\n                        r7.xyz=r0.xxx*r7.xyz+r8.xyz;\n                        r8.xyz=mix(r7.xyz,c15.xxx,r3.www);\n                        r9.xyz=r0.zzz*r8.xyz;\n                        r8.xyz=(-r8.xyz)+c15.xxx;\n                        r10.xyz=r2.yyy*cb7[3].xyz;\n                        r10.xyz=r2.xxx*cb7[2].xyz+r10.xyz;\n                        r2.xyz=r2.zzz*cb7[4].xyz+r10.xyz;\n                        r2.xyz=r2.www*cb7[5].xyz+r2.xyz;\n                        r10.xyz=mix(r2.xyz,c15.xxx,r0.xxx);\n                        r2.xyz=r5.xyz*r10.xyz;\n                        r5.xyz=r8.xyz*r2.xyz;\n                        r0.x=r0.w*r0.w;\n                        r8.w=r0.w*c19.w;\n                        r0.z=r0.x*r0.x;\n                        r0.x=r0.x*r0.x+c15.z;\n                        \n                        // NormalMap \n                        r10.ywx=texture2D(s4,v0.xy).xyz; \n                        \n                        // AoMap\n                        r10.z=texture2D(s5,v0.xy).x;  \n                        \n                        r10.xy=r10.yw*c15.yy+c15.zz;\n                        r0.w=saturate(dot(r10.xy,r10.xy)+c15.w);\n                        r0.w=(-r0.w)+c15.x;\n                        r0.w=sqrt(abs(r0.w));\n                        r11.xyz=r10.yyy*v3.xyz;\n                        r11.xyz=r10.xxx*v2.xyz+r11.xyz;\n                        r2.w=r10.y+r10.x;\n                        r2.w=r2.w*c26.z;\n                        r10.xyz=r0.www*v1.xyz+r11.xyz;\n                        r11.xyz=normalize(r10.xyz);\n                        r0.w=clamp(dot(r11.xyz,r4.xyz),0.0, 1.0);\n                        r0.w=r0.w*r0.w;\n                        r0.x=r0.w*r0.x+c15.x;\n                        r0.x=r0.x*r0.x;\n                        r0.w=r0.x*c18.y;\n                        r0.x=r0.x*c18.y+c18.z;\n                        r0.w=1.0/r0.w;\n                        r0.x=r0.x>=0.0?r0.w:c18.w;\n                        r0.x=r0.x*r0.z;\n                        r0.xzw=r9.xyz*r0.xxx+r5.xyz;\n                        r3.w=clamp(dot(cb2[12].xyz,r11.xyz),0.0, 1.0);\n                        r0.xzw=r0.xzw*r3.www;\n                        r0.xzw=r1.yzw*r0.xzw;\n                        r1.yzw=max(r0.xzw,c15.www);\n                        r0.x=dot(r3.xyz,r11.xyz);\n                        r0.z=saturate(r0.x);\n                        r0.x=r0.x+r0.x;\n                        r3.xyz=r11.xyz*(-r0.xxx)+r3.xyz;\n                        r0.x=r0.z*c21.w;\n                        r0.x=exp2(r0.x);\n                        r3.w=min(r0.x,r6.y);\n                        r0.x=r6.x*r3.w+r6.z;\n                        r4.xyz=saturate(mix(r0.xxx,r6.www,r7.xyz));\n                        r0.xzw=(-r4.xyz)+c15.xxx;\n                        r0.xzw=r0.xzw*r2.xyz;\n                        r11.w=c22.x;\n                        r6=textureCubeLod(s0,r11.xyz,r11.w);\n                        r3.w=cb2[14].w;\n                        r2.x=r3.w*c22.y;\n                        r2.xyz=r6.xyz*cb2[14].www+r2.xxx;\n                        r0.xzw=r0.xzw*r2.xyz;\n                        r0.xzw=r0.xzw*c22.zzz;\n                        r8.x=dot((-r3.xyz),cb2[8].xyz);\n                        r8.y=dot((-r3.xyz),cb2[9].xyz);\n                        r8.z=dot((-r3.xyz),cb2[10].xyz);\n                        r3=textureCubeLod(s0,r8.xyz,r8.w);\n                        r2.xyz=r3.xyz*cb2[14].www;\n                        r0.xzw=r2.xyz*r4.xyz+r0.xzw;\n                        r2.xyz=max(r0.xzw,c15.www);\n                        r0.xzw=r1.yzw+r2.xyz;\n                        r1.yz=mix(v0.xy,v0.zw,cb7[0].yy);\n                        \n                        // NormalMap \n                        r3.ywx=texture2D(s4,r1.yz).xyz; \n                        \n                        // AoMap\n                        r3.z=texture2D(s5,r1.yz).x;  \n                        \n                        r0.xzw=r0.xzw*r3.zzz+(-cb2[15].xyz);\n                        r1.y=cb2[15].w*v4.w;\n                        r1.y=r1.y*c22.w;\n                        r1.y=exp2(r1.y);\n                        r0.xzw=r1.yyy*r0.xzw+cb2[15].xyz;\n                        r1.z=dot(v4.xyz,r11.xyz);\n                        r1.w=r1.z+c26.x;\n                        r2.x=saturate(r1.z);\n                        r1.z=r1.z+r1.z;\n                        r3.xyz=r11.xyz*(-r1.zzz)+v4.xyz;\n                        r3.xyz=(-r3.xyz);\n                        r1.z=r1.w>=0.0?r2.x:c26.y;\n                        r4.w=1.0/r1.z;\n                        r1.z=sqrt(abs(r1.z));\n                        r1.z=(-r1.z)+c15.y;\n                        r1.z=r1.z*c23.z;\n                        r4.x=r4.w*c26.w+r2.w;\n                        r4.yz=c23.xy;\n                        r2=texture2DLod(s10,r4.xy,r4.w);\n                        r2.xyz=r1.zzz*r2.xyz;\n                        r3.w=c15.x;\n                        r4.x=dot(r3,cb2[8]);\n                        r4.y=dot(r3,cb2[9]);\n                        r4.z=dot(r3,cb2[10]);\n                        r1.z=dot(cb2[12].xyz,r4.xyz);\n                        r1.z=saturate(r1.z*c17.z+c17.z);\n                        r2.w=pow(r1.z,c23.w);\n                        r2.xyz=r2.www*r2.xyz;\n                        r2.xyz=r5.www*r2.xyz;\n                        r0.xzw=r2.xyz*r1.xxx+r0.xzw;\n                        r2.xyz=cb2[15].xyz;\n                        r1.xzw=(-r2.xyz)+cb7[1].xyz;\n                        r1.xyz=r1.yyy*r1.xzw+cb2[15].xyz;\n                        r1.xyz=r1.xyz*cb4[0].yyy;\n                        r0.xyz=r1.xyz*r0.yyy+r0.xzw;\n                        r1.xyz=max(r0.xyz,c15.www);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c24.zzz;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c25.xxx+c25.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c24.xxx;\n                        r2.xyz=r2.xyz*c24.yyy;\n                        \n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n                        \n                        ").concat(n.ps.shadowFooter,"\n                    }\n                                    \n                ")}}}},s={name:"skinned_quadOilV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/skinned_quadOilV5",description:"skinned ".concat(l.description),todo:l.todo,techniques:{Picking:o.skinnedQuadDepthV5.techniques.Main,Depth:a.skinnedQuadPickingV5.techniques.Main,Emissive:u.skinnedQuadV5.techniques.Emissive,ExtendedPicking:c.skinnedQuadExtendedPickingNoPatternV5.techniques.Main,Main:{vs:n.vs.skinnedQuadOilV5_PosBwtTexTanTex,ps:l.techniques.Main.ps}}}},"../shaders/quad/quadpickingv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadPickingV5",(function(){return o})),r.d(t,"skinnedQuadPickingV5",(function(){return a}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/shared/index.js"),o={name:"quadPickingV5",description:"picking shader",techniques:{Main:{vs:n.vs.quadV5_PosTexTanTex,ps:{constants:[i.constant.ObjectID,i.constant.AreaID],shader:"\n                \n                    ".concat(n.ps.headerNoShadow,"\n                    \n                    varying vec4 texcoord;\n                    uniform vec4 cb4[3];\n                    uniform vec4 cb7[2];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 r0;\n                        vec4 c2=vec4(1,0.00390625,0.00392156886,1.00392163);\n                        v0=texcoord;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v0.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        r0.x=c2.x;\n                        r0.y=r0.x+cb7[0].x;\n                        r0.z=r0.y*c2.y;\n                        r0.w=fract(r0.z);\n                        r0.w=(-r0.w)+r0.z;\n                        r0.z=fract(abs(r0.z));\n                        r0.y=r0.y>=0.0?r0.z:(-r0.z);\n                        gl_FragData[0].xy=r0.wy*c2.zw;\n                        r0.x=r0.x+cb7[1].x;\n                        r0.y=r0.x*c2.y;\n                        r0.z=fract(r0.y);\n                        r0.z=(-r0.z)+r0.y;\n                        r0.y=fract(abs(r0.y));\n                        r0.x=r0.x>=0.0?r0.y:(-r0.y);\n                        gl_FragData[0].zw=r0.zx*c2.zw;\n                    }\n                ")}}}},a={name:"skinned_quadPicking",description:"skinned ".concat(o.description),techniques:{Main:{vs:n.vs.skinnedQuadV5_PosBwtTex,ps:o.techniques.Main.ps}}}},"../shaders/quad/quadsailsv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadSailsV5",(function(){return m})),r.d(t,"skinnedQuadSailsV5",(function(){return b}));var n=r("../shaders/shared/texture.js"),i=r("../shaders/quad/shared/index.js"),o=r("./global/constant/index.js"),a=r("../shaders/quad/quaddepthv5.js"),u=r("../shaders/quad/quadpickingv5.js"),c=(r("../shaders/quad/extended/quadOutlineV5.js"),r("../shaders/quad/extended/quadEmissiveV5.js")),l=r("../shaders/quad/extended/quadUtilitySailsV5.js"),s=r("../shaders/quad/extended/quadExtendedPickingSailsV5.js"),f=r("../shaders/quad/extended/quadOutlineSails.js");var p,d,y,m={name:"quadSailsV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/quadSailsV5",description:"sail quad shader",todo:"Add dirt",techniques:{Depth:a.quadDepthV5.techniques.Main,Picking:u.quadPickingV5.techniques.Main,Emissive:c.quadEmissiveV5.techniques.Main,Outline:f.quadOutlineSailsV5.techniques.Main,Utility:l.quadUtilitySailsV5.techniques.Main,ExtendedPicking:s.quadExtendedPickingSailsV5.techniques.Main,Main:{vs:i.vs.quadV5_PosTexTanTex,ps:{textures:[n.EveSpaceSceneEnvMap,n.EveSpaceSceneShadowMap,i.texture.AlbedoMap,i.texture.RoughnessMap,i.texture.NormalMap,i.texture.AoMap,i.texture.PaintMaskMap,i.texture.MaterialMap,i.texture.DirtMap,i.texture.GlowMap,n.DustNoiseMap,i.texture.SailsDetailMap],constants:[i.constant.GeneralData,i.constant.GeneralGlowColor,i.constant.Mtl1DiffuseColor,i.constant.Mtl2DiffuseColor,i.constant.Mtl3DiffuseColor,i.constant.Mtl4DiffuseColor,i.constant.Mtl1FresnelColor,i.constant.Mtl2FresnelColor,i.constant.Mtl3FresnelColor,i.constant.Mtl4FresnelColor,i.constant.Mtl1Gloss,i.constant.Mtl2Gloss,i.constant.Mtl3Gloss,i.constant.Mtl4Gloss,i.constant.SailsDetailData,i.constant.Mtl1DustDiffuseColor,i.constant.Mtl2DustDiffuseColor,i.constant.Mtl3DustDiffuseColor,i.constant.Mtl4DustDiffuseColor],shader:"\n                    \n                    ".concat(i.ps.header,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    \n                    uniform samplerCube s0;\n                    uniform sampler2D s1;\n                    uniform sampler2D s2;   // AlbedoMap\n                    uniform sampler2D s3;   // RoughnessMap\n                    uniform sampler2D s4;   // NormalMap\n                    uniform sampler2D s5;   // AoMap\n                    uniform sampler2D s6;   // PaintMaskMap\n                    uniform sampler2D s7;   // MaterialMap\n                    uniform sampler2D s8;   // DirtMap\n                    uniform sampler2D s9;   // GlowMap\n                    uniform sampler2D s10;  // DustNoiseMap\n                    uniform sampler2D s11;  // SailsDetailMap\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[3];\n                    uniform vec4 cb7[23];\n\n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        vec4 c15=vec4(9.99999997e-007,3.14159274,-1e-015,9.99999987e+014);\n                        vec4 c16=vec4(0.159154937,0.5,6.28318548,-3.14159274);\n                        vec4 c17=vec4(-0,-0.333333343,-0.666666687,-1);\n                        vec4 c18=vec4(1,3.19148946,1.03191495,0.498039216);\n                        vec4 c19=vec4(1,1.54499996,1.10000002,6);\n                        vec4 c20=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c21=vec4(0,-0.015625,0.75,-9.27999973);\n                        vec4 c22=vec4(7,0.119999997,0.318309873,-1.44269507e-005);\n                        vec4 c23=vec4(-0.00313080009,12.9200001,0.416666657,0);\n                        vec4 c24=vec4(1.05499995,-0.0549999997,0,0);\n                        vec4 c25=vec4(-1,-0,2,0);\n                        vec4 c26=vec4(1,-1,0.5,-0.5);\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord7;\n                        v7=texcoord8;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        // PaintMaskMap\n                        r0.x=texture2D(s6,v0.xy).x * ").concat(i.texture.PaintMaskMap.multiplier,";  \n                        \n                        // MaterialMap\n                        r0.y=texture2D(s7,v0.xy).x;    \n                        \n                        // DirtMap (Not required here) <----------------------------------------------------------------    \n                        r0.z=texture2D(s8,v0.xy).x;   \n                        \n                        // GlowMap     \n                        r0.w=texture2D(s9,v0.xy).x;   \n                        \n                        r0.x=(-r0.x)+c18.x;\n                        r0.z=r0.y*c18.y;\n                        r0.z=saturate((-abs(r0.z))+c18.z);\n                        r1.x=mix(r0.x,c18.x,r0.z);\n                        r0.x=(-r1.x)+c18.w;\n                        {\n                            bvec4 tmp=greaterThanEqual(r0.xxxx,vec4(0.0));\n                            r2=vec4(tmp.x?c25.x:c25.y,tmp.y?c25.x:c25.y,tmp.z?c25.x:c25.y,tmp.w?c25.x:c25.y);\n                        }\n                        if(any(lessThan(r2,vec4(0.0))))discard;\n                        \n                        // Sails UV\n                        r2.xy=c16.xy;\n                        r0.x=cb7[14].y*r2.x+r2.y;           // rotation\n                        r0.x=fract(r0.x);\n                        r0.x=r0.x*c16.z+c16.w;\n                        r3.xy=vec2(cos(r0.x),sin(r0.x));\n                        r1.yz=cb7[14].xx*v0.xy;             // scaling\n                        r4.y=dot(r3.yx,r1.yz)+c25.w;\n                        r2.xz=r3.xy*c26.xy;\n                        r4.x=dot(r2.xz,r1.yz)+c25.w;\n                        \n                        // SailsDetailMap,\n                        r3=texture2D(s11,r4.xy);\n                        \n                        r1.y=mix(r0.y,r3.x,r0.z);\n                        r0.x=r0.w*r0.w;\n                        r3=r1.yyyy+c17;\n                        r3=r3*c18.yyyy;\n                        r3=saturate((-abs(r3))+c18.zzzz);\n                        r0.y=r3.y*cb7[11].x;\n                        r0.y=r3.x*cb7[10].x+r0.y;\n                        r0.y=r3.z*cb7[12].x+r0.y;\n                        r0.y=r3.w*cb7[13].x+r0.y;\n                        \n                        // NormalMap \n                        r4.ywx=texture2D(s4,v0.xy).xyz; \n                        \n                        // AoMap\n                        r4.z=texture2D(s5,v0.xy).x;    \n                        \n                        r0.zw=r4.yw*c25.zz+c25.xx;\n                        r1.y=saturate(dot(r0.zw,r0.zw)+c25.w);\n                        r1.y=(-r1.y)+c18.x;\n                        r1.y=sqrt(abs(r1.y));\n                        r2.xzw=r0.www*v3.xyz;\n                        r2.xzw=r0.zzz*v2.xyz+r2.xzw;\n                        r1.yzw=r1.yyy*v1.xyz+r2.xzw;\n                        r4.xyz=normalize(r1.yzw);\n                        r4.w=c22.x;\n                        r5=textureCubeLod(s0,r4.xyz,r4.w);\n                        r0.w=cb2[14].w;\n                        r0.z=r0.w*c22.y;\n                        r1.yzw=r5.xyz*cb2[14].www+r0.zzz;\n                        r0.z=dot(v4.xyz,v4.xyz);\n                        r0.z=r0.z==0.0?3.402823466e+38:inversesqrt(abs(r0.z));\n                        r2.xzw=v4.xyz*r0.zzz+cb2[12].xyz;\n                        r5.xyz=normalize(r2.xzw);\n                        r2.xzw=r0.zzz*v4.xyz;\n                        r0.z=clamp(dot(r5.xyz,r2.xzw),0.0, 1.0);\n                        r0.w=dot(r2.xzw,r4.xyz);\n                        r4.w=r0.w+r0.w;\n                        r2.xzw=r4.xyz*(-r4.www)+r2.xzw;\n                        r6.z=dot((-r2.xzw),cb2[10].xyz);\n                        r0.z=r0.z*r0.z;\n                        r0.w=saturate(r0.w);\n                        r0.w=r0.w*c21.w;\n                        r0.w=exp2(r0.w);\n                        r7.xyz=r3.yyy*cb7[3].xyz;\n                        r7.xyz=r3.xxx*cb7[2].xyz+r7.xyz;\n                        r7.xyz=r3.zzz*cb7[4].xyz+r7.xyz;\n                        r7.xyz=r3.www*cb7[5].xyz+r7.xyz;\n                        \n                        // AlbedoMap \n                        r8.xyz=texture2D(s2,v0.xy).xyz;    \n                        \n                        // RoughnessMap    \n                        r8.w=texture2D(s3,v0.xy).x;   \n                        \n                        r7.xyz=r7.xyz*r8.xyz;\n                        r0.y=saturate(r8.w*(-r0.y)+c18.x);\n                        r6.w=r0.y*c19.w;\n                        r6.x=dot((-r2.xzw),cb2[8].xyz);\n                        r6.y=dot((-r2.xzw),cb2[9].xyz);\n                        r6=textureCubeLod(s0,r6.xyz,r6.w);\n                        r2.xzw=r6.xyz*cb2[14].www;\n                        r6.xy=(-r0.yy)+c19.xy;\n                        r8.xyz=c21.xyz;\n                        r9=r6.xxxx*c20+r8.xxyz;\n                        r4.w=min(r0.w,r9.y);\n                        r0.w=r9.x*r4.w+r9.z;\n                        r6.xzw=r3.yyy*cb7[7].xyz;\n                        r6.xzw=r3.xxx*cb7[6].xyz+r6.xzw;\n                        r3.xyz=r3.zzz*cb7[8].xyz+r6.xzw;\n                        r3.xyz=r3.www*cb7[9].xyz+r3.xyz;\n                        r6.xzw=r3.xyz*r8.www;\n                        r8.xyz=saturate(mix(r0.www,r9.www,r6.xzw));\n                        r9.xyz=(-r8.xyz)+c18.xxx;\n                        r9.xyz=r7.xyz*r9.xyz;\n                        r1.yzw=r1.yzw*r9.xyz;\n                        r1.yzw=r1.yzw*c22.zzz;\n                        r1.yzw=r2.xzw*r8.xyz+r1.yzw;\n                        r2.xzw=r8.www*(-r3.xyz)+c18.xxx;\n                        r0.w=min(r6.y,c18.x);\n                        r0.z=r0.z*r0.w+c19.z;\n                        r0.z=(-r0.w)+r0.z;\n                        r0.y=r0.y*r0.y;\n                        r0.w=r0.y*r0.y+(-c18.x);\n                        r3.x=clamp(dot(r4.xyz,r5.xyz),0.0, 1.0);\n                        r3.x=r3.x*r3.x;\n                        r0.w=r3.x*r0.w+c18.x;\n                        r0.yw=r0.yw*r0.yw;\n                        r3.x=r0.w*c15.y+c15.z;\n                        r0.w=r0.w*(-c16.w);\n                        r0.w=1.0/r0.w;\n                        r0.w=r3.x>=0.0?r0.w:c15.w;\n                        r0.y=r0.w*r0.y;\n                        r0.w=clamp(dot(cb2[12].xyz,r5.xyz),0.0, 1.0);\n                        r0.w=(-r0.w)+c18.x;\n                        r3.x=r0.w*r0.w;\n                        r3.x=r3.x*r3.x;\n                        r0.w=r0.w*r3.x;\n                        r2.xzw=r2.xzw*r0.www+r6.xzw;\n                        r0.z=1.0/r0.z;\n                        r3.xyz=(-r2.xzw)+c18.xxx;\n                        r3.xyz=r3.xyz*r7.xyz;\n                        r2.xzw=r0.zzz*r2.xzw;\n                        r0.yzw=r2.xzw*r0.yyy+r3.xyz;\n                        r2.x=(-cb2[19].x)+cb2[19].y;\n                        r2.x=1.0/r2.x;\n                        r2.z=(-cb2[19].x)+v6.z;\n                        r2.x=r2.x*r2.z;\n                        r2.x=sqrt(abs(r2.x));\n                        r2.z=1.0/v7.w;\n                        r2.zw=r2.zz*v7.xy;\n                        r2.zw=r2.zw*c26.zw+c26.zz;\n                        r2.yz=cb2[18].xy*r2.yy+r2.zw;\n                        r3=texture2D(s1,r2.yz);\n                        r2.y=r2.x+(-r3.x);\n                        r2.z=r3.x*(-r3.x)+r3.y;\n                        r3.y=max(r2.z,c15.x);\n                        r2.y=r2.y*r2.y+r3.y;\n                        r2.y=1.0/r2.y;\n                        r2.y=r2.y*r3.y;\n                        r2.z=r3.x+cb2[18].z;\n                        r2.x=(-r2.x)+r2.z;\n                        r2.x=r2.x>=0.0?(-c25.x):(-c25.y);\n                        r3.x=saturate(max(r2.x,r2.y));\n                        r2.x=r3.x+(-cb2[18].w);\n                        r3.x=c18.x;\n                        r2.y=r3.x+(-cb2[18].w);\n                        r2.y=1.0/r2.y;\n                        r2.x=saturate(r2.y*r2.x);\n                        r2.x=(-cb2[19].x)>=0.0?r2.x:r3.x;\n                        r3.x=max(cb2[19].z,r2.x);\n                        r2.x=r3.x*r3.x;\n                        r2.y=clamp(dot(cb2[12].xyz,r4.xyz),0.0, 1.0);\n                        r0.yzw=r0.yzw*r2.yyy;\n                        r2.xyz=r2.xxx*cb2[13].xyz;\n                        r2.xyz=r2.xyz*(-c17.zzz);\n                        r0.yzw=r0.yzw*r2.xyz;\n                        r2.xyz=max(r0.yzw,c25.www);\n                        r0.yzw=max(r1.yzw,c25.www);\n                        r0.yzw=r0.yzw+r2.xyz;\n                        r1.y=cb2[15].w*v4.w;\n                        r1.y=r1.y*c22.w;\n                        r1.y=exp2(r1.y);\n                        r1.zw=mix(v0.xy,v0.zw,cb7[0].yy);\n                        \n                        // NormalMap \n                        r2.ywx=texture2D(s4,r1.zw).xyz;     \n                        \n                        // AoMap        \n                        r2.z=texture2D(s5,r1.zw).x;     \n                        \n                        r0.yzw=r0.yzw*r2.zzz+(-cb2[15].xyz);\n                        r0.yzw=r1.yyy*r0.yzw+cb2[15].xyz;\n                        r2.xyz=cb2[15].xyz;\n                        r2.xyz=(-r2.xyz)+cb7[1].xyz;\n                        r1.yzw=r1.yyy*r2.xyz+cb2[15].xyz;\n                        r1.yzw=r1.yzw*cb4[0].yyy;\n                        r0.xyz=r1.yzw*r0.xxx+r0.yzw;\n                        r1.yzw=max(r0.xyz,c25.www);\n                        r0.x=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.y=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.z=r1.w>0.0?log2(r1.w):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.yzw=r0.xyz*c23.zzz;\n                        r2.x=exp2(r1.y);\n                        r2.y=exp2(r1.z);\n                        r2.z=exp2(r1.w);\n                        r1.yzw=r2.xyz*c24.xxx+c24.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz*c23.yyy;\n                        r2.xyz=r2.xyz+c23.xxx;\n                        {\n                            bvec3 tmp=greaterThanEqual(r2.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.y:r0.x,tmp.y?r1.z:r0.y,tmp.z?r1.w:r0.z);\n                        }\n                        gl_FragData[0].w=r1.x;\n                        \n                        ").concat(i.ps.shadowFooter,"\n                    }\n                ")},states:(p={},d=o.RS_ZWRITEENABLE,y=1,d in p?Object.defineProperty(p,d,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[d]=y,p)}}},b={name:"skinned_quadSailsV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/skinned_quadSailsV5",description:"skinned ".concat(m.description),todo:m.todo,techniques:{Depth:a.skinnedQuadDepthV5.techniques.Main,Picking:u.skinnedQuadPickingV5.techniques.Main,Emissive:c.skinnedQuadEmissiveV5.techniques.Main,Outline:f.skinnedQuadOutlineSailsV5.techniques.Main,Utility:l.skinnedQuadUtilitySailsV5.techniques.Main,ExtendedPicking:s.skinnedQuadExtendedPickingSailsV5.techniques.Main,Main:{vs:i.vs.skinnedQuadV5_PosBwtTexTanTex,ps:m.techniques.Main.ps}}}},"../shaders/quad/quadturretv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadTurretV5",(function(){return l}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/shared/func.js"),o=r("../shaders/shared/constant.js"),a=r("../shaders/shared/texture.js"),u=r("../shaders/shared/input.js"),c={inputDefinitions:u.PosBwtTex,shader:"\n\n        ".concat(n.vs.shadowHeader,"\n        \n        attribute vec4 attr0;\n        attribute vec4 attr1;\n        attribute vec4 attr2;\n        \n        varying vec4 texcoord;\n        varying vec4 texcoord1;\n        \n        uniform vec4 cb1[8];\n        uniform vec4 cb3[198];\n        uniform vec3 ssyf;\n        \n        void main()\n        {\n            vec4 v0;\n            vec4 v1;\n            vec4 v2;\n            vec4 r0;\n            vec4 r1;\n            vec4 r10;\n            vec4 r11;\n            vec4 r2;\n            vec4 r3;\n            vec4 r4;\n            vec4 r5;\n            vec4 r6;\n            vec4 r7;\n            vec4 r8;\n            vec4 r9;\n        \n            ivec4 a0;\n            vec4 c0=vec4(2,1,0,0);\n        \n            v0=attr0;\n            v1=attr1;\n            v2=attr2;\n        \n            r0.x=v2.x;\n            r0.x=cb3[1].x*r0.x+v1.x;\n            r0.y=r0.x+r0.x;\n            r0.x=r0.x*c0.x+c0.y;\n            r0.z=fract(r0.y);\n            r0.xy=r0.xy+(-r0.zz);\n            a0.xy=ivec2(r0.xy+vec2(0.5));\n            r0.x=fract(v2.x);\n            r0.x=(-r0.x)+v2.x;\n            a0.z=int(r0.x+0.5);\n            r0=cb3[30+a0.z].zyxx+cb3[30+a0.z].zyxx;\n            r1.xy=cb3[30+a0.z].xy;\n            r1.xyz=r0.yzz*(-r1.yxx)+c0.yyy;\n            r1.xyz=r0.xxy*(-cb3[30+a0.z].zzy)+r1.xyz;\n            r2.w=r1.x;\n            r0.x=r0.x*cb3[30+a0.z].w;\n            r2.x=r0.w*cb3[30+a0.z].y+(-r0.x);\n            r3.x=r0.w*cb3[30+a0.z].y+r0.x;\n            r4=r0.wwyy*cb3[30+a0.z].zwzw;\n            r3.zw=r0.yw*cb3[30+a0.z].zz+(-r4.yw);\n            r2.yz=r4.yw+r4.zx;\n            r0.xyz=r2.wxz;\n            r0.w=cb3[6+a0.z].x;\n            r0.x=dot(cb3[54+a0.y],r0);\n            r4.w=r0.x;\n            r5=cb3[54+a0.x].zyxx+cb3[54+a0.x].zyxx;\n            r6.xy=cb3[54+a0.x].xy;\n            r6.xyz=r5.yzz*(-r6.yxx)+c0.yyy;\n            r6.xyz=r5.xxy*(-cb3[54+a0.x].zzy)+r6.xyz;\n            r7.w=r6.x;\n            r1.x=r5.x*cb3[54+a0.x].w;\n            r7.x=r5.w*cb3[54+a0.x].y+r1.x;\n            r8.x=r5.w*cb3[54+a0.x].y+(-r1.x);\n            r9=r5.wwyy*cb3[54+a0.x].zwzw;\n            r7.yz=r5.wy*cb3[54+a0.x].zz+(-r9.wy);\n            r8.zw=r9.yw+r9.zx;\n            r5.x=dot(r7.xyw,r2.xzw);\n            r4.x=r5.x;\n            r8.y=r6.y;\n            r9.x=dot(r8.yzx,r2.xzw);\n            r4.y=r9.x;\n            r6.x=r8.w;\n            r6.y=r7.z;\n            r10.x=dot(r6.yzx,r2.xzw);\n            r4.z=r10.x;\n            r11=v0.xyzx*c0.yyyz+c0.zzzy;\n            texcoord.x=dot(r11,r4);\n            r3.y=r1.y;\n            r2.z=r1.z;\n            r9.y=dot(r8.xyz,r3.xyz);\n            r1.y=r9.y;\n            r5.y=dot(r7.wxy,r3.xyz);\n            r1.x=r5.y;\n            r10.y=dot(r6.xyz,r3.xyz);\n            r2.x=r3.w;\n            r1.z=r10.y;\n            r3.w=cb3[6+a0.z].y;\n            r0.y=dot(cb3[54+a0.y],r3);\n            r1.w=r0.y;\n            texcoord.y=dot(r11,r1);\n            r9.z=dot(r8.xyz,r2.xyz);\n            r1.y=r9.z;\n            r5.z=dot(r7.wxy,r2.xyz);\n            r8.xz=r7.xz;\n            r1.x=r5.z;\n            r10.z=dot(r6.xyz,r2.xyz);\n            r1.z=r10.z;\n            r2.w=cb3[6+a0.z].z;\n            r3.w=cb3[54+a0.y].w;\n            r0.w=r3.w*cb3[6+a0.z].w;\n            r0.z=dot(cb3[54+a0.y],r2);\n            r8.w=cb3[54+a0.y].y;\n            r2.x=dot(r11,r8);\n            texcoord1.x=r2.x+(-cb3[0].x);\n            r1.w=r0.z;\n            texcoord.z=dot(r11,r1);\n            r1.z=dot(r10.xyz,cb3[2].xyz);\n            r1.x=dot(r5.xyz,cb3[2].xyz);\n            r1.y=dot(r9.xyz,cb3[2].xyz);\n            r1.w=dot(r0,cb3[2]);\n            r1.x=dot(r11,r1);\n            r2.z=dot(r10.xyz,cb3[3].xyz);\n            r2.x=dot(r5.xyz,cb3[3].xyz);\n            r2.y=dot(r9.xyz,cb3[3].xyz);\n            r2.w=dot(r0,cb3[3]);\n            r1.y=dot(r11,r2);\n            r2.z=dot(r10.xyz,cb3[4].xyz);\n            r3.z=dot(r10.xyz,cb3[5].xyz);\n            r2.x=dot(r5.xyz,cb3[4].xyz);\n            r3.x=dot(r5.xyz,cb3[5].xyz);\n            r2.y=dot(r9.xyz,cb3[4].xyz);\n            r3.y=dot(r9.xyz,cb3[5].xyz);\n            r2.w=dot(r0,cb3[4]);\n            r3.w=dot(r0,cb3[5]);\n            texcoord.w=r0.w;\n            r1.w=dot(r11,r3);\n            r1.z=dot(r11,r2);\n            gl_Position.x=dot(r1,cb1[4]);\n            gl_Position.y=dot(r1,cb1[5]);\n            gl_Position.z=dot(r1,cb1[6]);\n            gl_Position.w=dot(r1,cb1[7]);\n            texcoord1.y=c0.z;\n        \n            ").concat(n.vs.shadowFooter,"\n        }\n    ")},l={name:"quadV5",replaces:"graphics/effect.gles2/managed/space/turret/v5/quadV5",description:"skinned turret quad shader",todo:"add dirt",techniques:{Picking:{vs:c,ps:{constants:[o.ObjectID,o.AreaID],shader:"\n                \n                    ".concat(n.ps.header,"\n                    \n                    varying vec4 texcoord1;\n                    uniform vec4 cb7[2];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 r0;\n                        \n                        vec4 c2=vec4(1,0.00390625,0.00392156886,1.00392163);\n                        \n                        v0=texcoord1;\n                        r0=v0.xxxx;\n                        \n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        r0.x=c2.x;\n                        r0.y=r0.x+cb7[0].x;\n                        r0.z=r0.y*c2.y;\n                        r0.w=fract(r0.z);\n                        r0.w=(-r0.w)+r0.z;\n                        r0.z=fract(abs(r0.z));\n                        r0.y=r0.y>=0.0?r0.z:(-r0.z);\n                        gl_FragData[0].xy=r0.wy*c2.zw;\n                        r0.x=r0.x+cb7[1].x;\n                        r0.y=r0.x*c2.y;\n                        r0.z=fract(r0.y);\n                        r0.z=(-r0.z)+r0.y;\n                        r0.y=fract(abs(r0.y));\n                        r0.x=r0.x>=0.0?r0.y:(-r0.y);\n                        gl_FragData[0].zw=r0.zx*c2.zw;\n                        \n                        ").concat(n.ps.shadowFooter,"\n                    }\n                \n                ")}},Depth:{vs:c,ps:{shader:"\n                \n                    ".concat(i.precision,"\n                    ").concat(n.ps.header,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    uniform vec4 cb4[3];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 r0;\n                        vec4 c0=vec4(0,1,0,0);\n                        v0=texcoord;\n                        v1=texcoord1;\n                        r0=v1.xxxx;\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        r0.xyz=(-cb4[1].xyz)+v0.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        gl_FragData[0]=c0.xxxy;\n                        \n                        ").concat(n.ps.shadowFooter,"\n                    }\n                ")}},Main:{vs:{inputDefinitions:u.PosBwtTexTanTex,shader:"\n\n                    ".concat(n.vs.shadowHeader,"\n                    \n                    attribute vec4 attr0;\n                    attribute vec4 attr1;\n                    attribute vec4 attr2;\n                    attribute vec4 attr3;\n                    attribute vec4 attr4;\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord6;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    \n                    uniform vec4 cb1[24];\n                    uniform vec4 cb3[198];\n                    uniform vec3 ssyf;\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r10;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        ivec4 a0;\n                        \n                        vec4 c0=vec4(2,1,6.28318548,-3.14159274);\n                        vec4 c1=vec4(0.159154937,0.5,0,1);\n                        \n                        v0=attr0;\n                        v1=attr1;\n                        v2=attr2;\n                        v3=attr3;\n                        v4=attr4;\n                        \n                        r0.x=v4.x;\n                        r0.x=cb3[1].x*r0.x+v1.x;\n                        r0.y=r0.x+r0.x;\n                        r0.x=r0.x*c0.x+c0.y;\n                        r0.z=fract(r0.y);\n                        r0.xy=r0.xy+(-r0.zz);\n                        a0.xy=ivec2(r0.xy+vec2(0.5));\n                        r0.x=fract(v4.x);\n                        r0.x=(-r0.x)+v4.x;\n                        a0.z=int(r0.x+0.5);\n                        r0=cb3[30+a0.z].zyxx+cb3[30+a0.z].zyxx;\n                        r1.y=c0.y;\n                        r1.xzw=r0.yzz*(-cb3[30+a0.z].yxx)+r1.yyy;\n                        r2.xyz=r0.xxy*(-cb3[30+a0.z].zzy)+r1.xzw;\n                        r3.w=r2.y;\n                        r0.x=r0.x*cb3[30+a0.z].w;\n                        r3.x=r0.w*cb3[30+a0.z].y+r0.x;\n                        r4.x=r0.w*cb3[30+a0.z].y+(-r0.x);\n                        r5=r0.wwyy*cb3[30+a0.z].zwzw;\n                        r3.yz=r0.wy*cb3[30+a0.z].zz+(-r5.wy);\n                        r4.yz=r5.yw+r5.zx;\n                        r0.xyz=r3.xwz;\n                        r0.w=cb3[6+a0.z].y;\n                        r0.y=dot(cb3[54+a0.y],r0);\n                        r5.w=cb3[6+a0.z].x;\n                        r4.w=r2.x;\n                        r5.xyz=r4.wxz;\n                        r0.x=dot(cb3[54+a0.y],r5);\n                        r2.w=cb3[6+a0.z].z;\n                        r1.w=cb3[54+a0.y].w;\n                        r0.z=r1.w*cb3[6+a0.z].w;\n                        r2.x=r3.y;\n                        r2.y=r4.y;\n                        r0.w=dot(cb3[54+a0.y],r2);\n                        r5.w=cb3[54+a0.y].y;\n                        r6.w=dot(r0.xywz,cb3[5]);\n                        r7=cb3[54+a0.x].zyxx+cb3[54+a0.x].zyxx;\n                        r1.xyz=r7.yzz*(-cb3[54+a0.x].yxx)+r1.yyy;\n                        r1.xyz=r7.xxy*(-cb3[54+a0.x].zzy)+r1.xyz;\n                        r8.w=r1.x;\n                        r1.x=r7.x*cb3[54+a0.x].w;\n                        r8.x=r7.w*cb3[54+a0.x].y+r1.x;\n                        r9.x=r7.w*cb3[54+a0.x].y+(-r1.x);\n                        r10=r7.wwyy*cb3[54+a0.x].zwzw;\n                        r8.yz=r7.wy*cb3[54+a0.x].zz+(-r10.wy);\n                        r9.yz=r10.yw+r10.zx;\n                        r7.x=dot(r8.xyw,r4.xzw);\n                        r7.y=dot(r8.wyx,r3.xzw);\n                        r7.z=dot(r8.wxy,r2.xyz);\n                        r5.xz=r8.xz;\n                        r8.y=r5.z;\n                        r6.x=dot(r7.xyz,cb3[5].xyz);\n                        r9.w=r1.y;\n                        r8.z=r1.z;\n                        r1.x=dot(r9.wyx,r4.xzw);\n                        r1.y=dot(r9.xyw,r3.xzw);\n                        r1.z=dot(r9.xwy,r2.xyz);\n                        r8.x=r9.z;\n                        r5.y=r9.w;\n                        r6.y=dot(r1.xyz,cb3[5].xyz);\n                        r4.x=dot(r8.yzx,r4.xzw);\n                        r4.z=dot(r8.xzy,r3.xzw);\n                        r4.y=dot(r8.xyz,r2.xyz);\n                        r6.z=dot(r4.xzy,cb3[5].xyz);\n                        r2=v0.xyzx*c1.wwwz+c1.zzzw;\n                        r3.w=dot(r2,r6);\n                        r6.w=dot(r0.xywz,cb3[2]);\n                        r6.z=dot(r4.xzy,cb3[2].xyz);\n                        r6.x=dot(r7.xyz,cb3[2].xyz);\n                        r6.y=dot(r1.xyz,cb3[2].xyz);\n                        r3.x=dot(r2,r6);\n                        r8.w=dot(r0.xywz,cb3[3]);\n                        r9.w=dot(r0.xywz,cb3[4]);\n                        r10.w=r0.x;\n                        r4.w=r0.y;\n                        r8.z=dot(r4.xzy,cb3[3].xyz);\n                        r8.x=dot(r7.xyz,cb3[3].xyz);\n                        r8.y=dot(r1.xyz,cb3[3].xyz);\n                        r3.y=dot(r2,r8);\n                        r9.z=dot(r4.xzy,cb3[4].xyz);\n                        r0.z=r4.y;\n                        r10.z=r4.x;\n                        r9.x=dot(r7.xyz,cb3[4].xyz);\n                        r0.x=r7.z;\n                        r10.x=r7.x;\n                        r4.x=r7.y;\n                        r9.y=dot(r1.xyz,cb3[4].xyz);\n                        r0.y=r1.z;\n                        texcoord5.z=dot(r2,r0);\n                        r10.y=r1.x;\n                        texcoord5.x=dot(r2,r10);\n                        r4.y=r1.y;\n                        texcoord5.y=dot(r2,r4);\n                        r3.z=dot(r2,r9);\n                        r0.x=dot(r2,r5);\n                        texcoord.w=r0.x+(-cb3[0].x);\n                        gl_Position.x=dot(r3,cb1[4]);\n                        gl_Position.y=dot(r3,cb1[5]);\n                        gl_Position.z=dot(r3,cb1[6]);\n                        gl_Position.w=dot(r3,cb1[7]);\n                        r0=v3*c0.zzzz+c0.wwww;\n                        {\n                            bvec4 tmp=lessThan(c1.zzzz,r0.ywzw);\n                            r1.xy=(vec4(tmp.x?1.0:0.0,tmp.y?1.0:0.0,tmp.z?1.0:0.0,tmp.w?1.0:0.0)).xy;\n                        }\n                        r0=r0*c1.xxxx+c1.yyyy;\n                        r0=fract(r0);\n                        r0=r0*c0.zzzz+c0.wwww;\n                        r1.x=r1.y*r1.x;\n                        r2.xy=vec2(cos(r0.x), sin(r0.x));\n                        r4.xy=vec2(cos(r0.y), sin(r0.y));\n                        r2.xy=r2.xy*abs(r4.yy);\n                        r2.z=r4.x;\n                        r4.xy=vec2(cos(r0.z), sin(r0.z));\n                        r5.xy=vec2(cos(r0.w), sin(r0.w));\n                        r0.xy=r4.xy*abs(r5.yy);\n                        r0.z=r5.x;\n                        r1.yzw=r0.yzx*r2.zxy;\n                        r1.yzw=r2.yzx*r0.zxy+(-r1.yzw);\n                        r4.xyz=mix((-r1.yzw),r1.yzw,r1.xxx);\n                        texcoord1.x=dot(r4.xyz,r6.xyz);\n                        texcoord1.y=dot(r4.xyz,r8.xyz);\n                        texcoord1.z=dot(r4.xyz,r9.xyz);\n                        texcoord2.x=dot(r2.xyz,r6.xyz);\n                        texcoord3.x=dot(r0.xyz,r6.xyz);\n                        texcoord2.y=dot(r2.xyz,r8.xyz);\n                        texcoord3.y=dot(r0.xyz,r8.xyz);\n                        texcoord3.z=dot(r0.xyz,r9.xyz);\n                        texcoord2.z=dot(r2.xyz,r9.xyz);\n                        r0.xyz=(-r3.xyz)+cb1[3].xyz;\n                        r0.w=dot(r0.xyz,r0.xyz);\n                        r0.w=r0.w==0.0?3.402823466e+38:inversesqrt(abs(r0.w));\n                        texcoord4.xyz=r0.www*r0.xyz;\n                        r0.x=1.0/r0.w;\n                        texcoord7.x=dot(r3,cb1[16]);\n                        texcoord7.y=dot(r3,cb1[17]);\n                        texcoord7.z=dot(r3,cb1[18]);\n                        texcoord7.w=dot(r3,cb1[19]);\n                        texcoord8.x=dot(r3,cb1[20]);\n                        texcoord8.y=dot(r3,cb1[21]);\n                        texcoord8.z=dot(r3,cb1[22]);\n                        texcoord8.w=dot(r3,cb1[23]);\n                        texcoord.xyz=v2.xyy;\n                        texcoord4.w=r0.x;\n                        texcoord5.w=r0.x;\n                        texcoord6=c1.zzzz;\n                        \n                        ").concat(n.vs.shadowFooter,"\n                    }\n                ")},ps:{textures:[a.EveSpaceSceneEnvMap,a.EveSpaceSceneShadowMap,n.texture.AlbedoMap,n.texture.RoughnessMap,n.texture.NormalMap,n.texture.AoMap,n.texture.PaintMaskMap,n.texture.MaterialMap,n.texture.DirtMap,n.texture.GlowMap,a.DustNoiseMap],constants:[n.constant.GeneralData,n.constant.GeneralGlowColor,n.constant.Mtl1DiffuseColor,n.constant.Mtl2DiffuseColor,n.constant.Mtl3DiffuseColor,n.constant.Mtl4DiffuseColor,n.constant.Mtl1FresnelColor,n.constant.Mtl2FresnelColor,n.constant.Mtl3FresnelColor,n.constant.Mtl4FresnelColor,n.constant.Mtl1Gloss,n.constant.Mtl2Gloss,n.constant.Mtl3Gloss,n.constant.Mtl4Gloss,n.constant.Mtl1DustDiffuseColor,n.constant.Mtl2DustDiffuseColor,n.constant.Mtl3DustDiffuseColor,n.constant.Mtl4DustDiffuseColor],shader:"\n                \n                    ".concat(n.ps.header,"\n\n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    \n                    uniform samplerCube s0; // EveSpaceSceneEnvMap\n                    uniform sampler2D s1;   // EveSpaceSceneShadowMap\n                    uniform sampler2D s2;   // AlbedoMap\n                    uniform sampler2D s3;   // RoughnessMap\n                    uniform sampler2D s4;   // NormalMap\n                    uniform sampler2D s5;   // AoMap\n                    uniform sampler2D s6;   // PaintMaskMap\n                    uniform sampler2D s7;   // MaterialMap\n                    uniform sampler2D s8;   // DirtMap\n                    uniform sampler2D s9;   // GlowMap\n                    uniform sampler2D s10;  // DustNoiseMap\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[3];\n                    uniform vec4 cb7[18];\n\n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r10;\n                        vec4 r11;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        vec4 c14=vec4(9.99999997e-007,0.0383840017,0.0393519998,0.0391650014);\n                        vec4 c15=vec4(1,2,-1,0);\n                        vec4 c16=vec4(-0,-0.333333343,-0.666666687,-1);\n                        vec4 c17=vec4(3.19148946,1.03191495,0.5,-0.5);\n                        vec4 c18=vec4(0.400000006,3.14159274,-1e-015,9.99999987e+014);\n                        vec4 c19=vec4(1,1.54499996,1.10000002,6);\n                        vec4 c20=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c21=vec4(0,-0.015625,0.75,-9.27999973);\n                        vec4 c22=vec4(7,0.119999997,0.318309873,-1.44269507e-005);\n                        vec4 c23=vec4(-0.00313080009,12.9200001,0.416666657,0);\n                        vec4 c24=vec4(1.05499995,-0.0549999997,0,0);\n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord7;\n                        v7=texcoord8;\n                        r0=v0.wwww;\n                        \n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        // PaintMaskMap\n                        r0.x=texture2D(s6,v0.xy).x * ").concat(n.texture.PaintMaskMap.multiplier,";  \n                        \n                        // MaterialMap\n                        r0.y=texture2D(s7,v0.xy).x;    \n                        \n                        // DirtMap (Not required here) <----------------------------------------------------------------    \n                        r0.z=texture2D(s8,v0.xy).x;   \n                        \n                        // GlowMap     \n                        r0.w=texture2D(s9,v0.xy).x;     \n                        \n                        gl_FragData[0].w=(-r0.x)+c15.x;\n                        r0.z=(-cb2[19].x)+cb2[19].y;\n                        r0.z=1.0/r0.z;\n                        r1.x=(-cb2[19].x)+v6.z;\n                        r0.z=r0.z*r1.x;\n                        r0.z=sqrt(abs(r0.z));\n                        r1.x=1.0/v7.w;\n                        r1.xy=r1.xx*v7.xy;\n                        r1.xy=r1.xy*c17.zw+c17.zz;\n                        r1.z=c17.z;\n                        r1.xy=cb2[18].xy*r1.zz+r1.xy;\n                        r1=texture2D(s1,r1.xy);\n                        r1.z=r0.z+(-r1.x);\n                        r1.y=r1.x*(-r1.x)+r1.y;\n                        r1.x=r1.x+cb2[18].z;\n                        r0.z=(-r0.z)+r1.x;\n                        r0.z=r0.z>=0.0?c15.x:c15.w;\n                        r2.x=max(r1.y,c14.x);\n                        r1.x=r1.z*r1.z+r2.x;\n                        r1.x=1.0/r1.x;\n                        r1.x=r1.x*r2.x;\n                        r2.x=saturate(max(r0.z,r1.x));\n                        r0.z=r2.x+(-cb2[18].w);\n                        r1.x=c15.x;\n                        r1.y=r1.x+(-cb2[18].w);\n                        r1.y=1.0/r1.y;\n                        r0.z=saturate(r0.z*r1.y);\n                        r0.z=(-cb2[19].x)>=0.0?r0.z:r1.x;\n                        r1.x=max(cb2[19].z,r0.z);\n                        r0.z=r1.x*r1.x;\n                        r1.xyz=r0.zzz*cb2[13].xyz;\n                        r1.xyz=r1.xyz*(-c16.zzz);\n                        r0.z=dot(v4.xyz,v4.xyz);\n                        r0.z=r0.z==0.0?3.402823466e+38:inversesqrt(abs(r0.z));\n                        r2.xyz=v4.xyz*r0.zzz+cb2[12].xyz;\n                        r3.xyz=r0.zzz*v4.xyz;\n                        r4.xyz=normalize(r2.xyz);\n                        r0.z=clamp(dot(r4.xyz,r3.xyz),0.0, 1.0);\n                        r0.z=r0.z*r0.z;\n                        r0.x=r0.x*cb7[0].x;\n                        r2=r0.yyyy+c16;\n                        r0.y=r0.w*r0.w;\n                        r2=r2*c17.xxxx;\n                        r2=saturate((-abs(r2))+c17.yyyy);\n                        r0.w=r2.y*cb7[11].x;\n                        r0.w=r2.x*cb7[10].x+r0.w;\n                        r0.w=r2.z*cb7[12].x+r0.w;\n                        r0.w=r2.w*cb7[13].x+r0.w;\n                        \n                        // AlbedoMap \n                        r5.xyz=texture2D(s2,v0.xy).xyz;    \n                        \n                        // RoughnessMap    \n                        r5.w=texture2D(s3,v0.xy).x;   \n\n                        r1.w=r0.w*r5.w;\n                        r0.w=r5.w*(-r0.w)+c18.x;\n                        r0.w=r0.x*r0.w+r1.w;\n                        r0.w=saturate((-r0.w)+c15.x);\n                        r6.xy=(-r0.ww)+c19.xy;\n                        r1.w=min(r6.y,c15.x);\n                        r7.xyz=c21.xyz;\n                        r6=r6.xxxx*c20+r7.xxyz;\n                        r0.z=r0.z*r1.w+c19.z;\n                        r0.z=(-r1.w)+r0.z;\n                        r0.z=1.0/r0.z;\n                        r7.xyz=r2.yyy*cb7[7].xyz;\n                        r7.xyz=r2.xxx*cb7[6].xyz+r7.xyz;\n                        r7.xyz=r2.zzz*cb7[8].xyz+r7.xyz;\n                        r7.xyz=r2.www*cb7[9].xyz+r7.xyz;\n                        r8.xyz=r5.www*r7.xyz;\n                        r7.xyz=r5.www*(-r7.xyz)+c14.yzw;\n                        r7.xyz=r0.xxx*r7.xyz+r8.xyz;\n                        r1.w=clamp(dot(cb2[12].xyz,r4.xyz),0.0, 1.0);\n                        r1.w=(-r1.w)+c15.x;\n                        r3.w=r1.w*r1.w;\n                        r3.w=r3.w*r3.w;\n                        r1.w=r1.w*r3.w;\n                        r8.xyz=mix(r7.xyz,c15.xxx,r1.www);\n                        r9.xyz=r0.zzz*r8.xyz;\n                        r8.xyz=(-r8.xyz)+c15.xxx;\n                        r10.xyz=r2.yyy*cb7[3].xyz;\n                        r10.xyz=r2.xxx*cb7[2].xyz+r10.xyz;\n                        r2.xyz=r2.zzz*cb7[4].xyz+r10.xyz;\n                        r2.xyz=r2.www*cb7[5].xyz+r2.xyz;\n                        r10.xyz=mix(r2.xyz,c15.xxx,r0.xxx);\n                        r2.xyz=r5.xyz*r10.xyz;\n                        r5.xyz=r8.xyz*r2.xyz;\n                        r0.x=r0.w*r0.w;\n                        r8.w=r0.w*c19.w;\n                        r0.z=r0.x*r0.x;\n                        r0.x=r0.x*r0.x+c15.z;\n                        \n                        // NormalMap \n                        r10.ywx=texture2D(s4,v0.xy).xyz; \n                        \n                        // AoMap\n                        r10.z=texture2D(s5,v0.xy).x;  \n                        \n                        r10.xy=r10.yw*c15.yy+c15.zz;\n                        r0.w=saturate(dot(r10.xy,r10.xy)+c15.w);\n                        r0.w=(-r0.w)+c15.x;\n                        r0.w=sqrt(abs(r0.w));\n                        r11.xyz=r10.yyy*v3.xyz;\n                        r10.xyw=r10.xxx*v2.xyz+r11.xyz;\n                        r10.xyw=r0.www*v1.xyz+r10.xyw;\n                        r11.xyz=normalize(r10.xyw);\n                        r0.w=clamp(dot(r11.xyz,r4.xyz),0.0, 1.0);\n                        r0.w=r0.w*r0.w;\n                        r0.x=r0.w*r0.x+c15.x;\n                        r0.x=r0.x*r0.x;\n                        r0.w=r0.x*c18.y;\n                        r0.x=r0.x*c18.y+c18.z;\n                        r0.w=1.0/r0.w;\n                        r0.x=r0.x>=0.0?r0.w:c18.w;\n                        r0.x=r0.x*r0.z;\n                        r0.xzw=r9.xyz*r0.xxx+r5.xyz;\n                        r1.w=clamp(dot(cb2[12].xyz,r11.xyz),0.0, 1.0);\n                        r0.xzw=r0.xzw*r1.www;\n                        r0.xzw=r1.xyz*r0.xzw;\n                        r1.xyz=max(r0.xzw,c15.www);\n                        r0.x=dot(r3.xyz,r11.xyz);\n                        r0.z=saturate(r0.x);\n                        r0.x=r0.x+r0.x;\n                        r3.xyz=r11.xyz*(-r0.xxx)+r3.xyz;\n                        r0.x=r0.z*c21.w;\n                        r0.x=exp2(r0.x);\n                        r1.w=min(r0.x,r6.y);\n                        r0.x=r6.x*r1.w+r6.z;\n                        r4.xyz=saturate(mix(r0.xxx,r6.www,r7.xyz));\n                        r0.xzw=(-r4.xyz)+c15.xxx;\n                        r0.xzw=r0.xzw*r2.xyz;\n                        r11.w=c22.x;\n                        r2=textureCubeLod(s0,r11.xyz,r11.w);\n                        r1.w=cb2[14].w;\n                        r1.w=r1.w*c22.y;\n                        r2.xyz=r2.xyz*cb2[14].www+r1.www;\n                        r0.xzw=r0.xzw*r2.xyz;\n                        r0.xzw=r0.xzw*c22.zzz;\n                        r8.x=dot((-r3.xyz),cb2[8].xyz);\n                        r8.y=dot((-r3.xyz),cb2[9].xyz);\n                        r8.z=dot((-r3.xyz),cb2[10].xyz);\n                        r2=textureCubeLod(s0,r8.xyz,r8.w);\n                        r2.xyz=r2.xyz*cb2[14].www;\n                        r0.xzw=r2.xyz*r4.xyz+r0.xzw;\n                        r2.xyz=max(r0.xzw,c15.www);\n                        r0.xzw=r1.xyz+r2.xyz;\n                        r0.xzw=r0.xzw*r10.zzz+(-cb2[15].xyz);\n                        r1.x=cb2[15].w*v4.w;\n                        r1.x=r1.x*c22.w;\n                        r1.x=exp2(r1.x);\n                        r0.xzw=r1.xxx*r0.xzw+cb2[15].xyz;\n                        r2.xyz=cb2[15].xyz;\n                        r1.yzw=(-r2.xyz)+cb7[1].xyz;\n                        r1.xyz=r1.xxx*r1.yzw+cb2[15].xyz;\n                        r1.xyz=r1.xyz*cb4[0].yyy;\n                        r0.xyz=r1.xyz*r0.yyy+r0.xzw;\n                        r1.xyz=max(r0.xyz,c15.www);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c23.zzz;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c24.xxx+c24.yyy;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c23.xxx;\n                        r2.xyz=r2.xyz*c23.yyy;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n                        \n                        ").concat(n.ps.shadowFooter,"\n                    }\n                \n                ")}}}}},"../shaders/quad/quadv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadV5",(function(){return p})),r.d(t,"skinnedQuadV5",(function(){return d}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/shared/func.js"),o=r("../shaders/shared/texture.js"),a=r("../shaders/quad/quaddepthv5.js"),u=r("../shaders/quad/quadpickingv5.js"),c=r("../shaders/quad/extended/quadOutlineV5.js"),l=r("../shaders/quad/extended/quadEmissiveV5.js"),s=r("../shaders/quad/extended/quadExtendedPickingV5.js"),f=r("../shaders/quad/extended/quadUtilityV5.js"),p={name:"quadV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/quadV5",description:"general quad shader",todo:"Add dirt",techniques:{Depth:a.quadDepthV5.techniques.Main,Picking:u.quadPickingV5.techniques.Main,Outline:c.quadOutlineV5.techniques.Main,Emissive:l.quadEmissiveV5.techniques.Main,ExtendedPicking:s.quadExtendedPickingV5.techniques.Main,Utility:f.quadUtilityV5.techniques.Main,Main:{vs:n.vs.quadV5_PosTexTanTex,ps:{constants:[n.constant.GeneralData,n.constant.GeneralGlowColor,n.constant.Mtl1DiffuseColor,n.constant.Mtl2DiffuseColor,n.constant.Mtl3DiffuseColor,n.constant.Mtl4DiffuseColor,n.constant.Mtl1FresnelColor,n.constant.Mtl2FresnelColor,n.constant.Mtl3FresnelColor,n.constant.Mtl4FresnelColor,n.constant.Mtl1Gloss,n.constant.Mtl2Gloss,n.constant.Mtl3Gloss,n.constant.Mtl4Gloss,n.constant.PMtl1DiffuseColor,n.constant.PMtl1FresnelColor,n.constant.PMtl1Gloss,n.constant.PMtl2DiffuseColor,n.constant.PMtl2FresnelColor,n.constant.PMtl2Gloss,n.constant.Mtl1DustDiffuseColor,n.constant.Mtl2DustDiffuseColor,n.constant.Mtl3DustDiffuseColor,n.constant.Mtl4DustDiffuseColor],textures:[o.EveSpaceSceneEnvMap,o.EveSpaceSceneShadowMap,n.texture.AlbedoMap,n.texture.RoughnessMap,n.texture.NormalMap,n.texture.AoMap,n.texture.PaintMaskMap,n.texture.MaterialMap,n.texture.DirtMap,n.texture.GlowMap,n.texture.PatternMask1Map,n.texture.PatternMask2Map,o.DustNoiseMap],shader:"\n                \n                    ".concat(n.ps.header,"\n                    ").concat(i.clampToBorder,"\n\n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord6;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    \n                    uniform samplerCube s0; // EveSpaceSceneEnvMap\n                    uniform sampler2D s1;   // EveSpaceSceneShadowMap\n                    uniform sampler2D s2;   // AlbedoMap\n                    uniform sampler2D s3;   // RoughnessMap\n                    uniform sampler2D s4;   // NormalMap\n                    uniform sampler2D s5;   // AoMap\n                    uniform sampler2D s6;   // PaintMaskMap\n                    uniform sampler2D s7;   // MaterialMap\n                    uniform sampler2D s8;   // DirtMap\n                    uniform sampler2D s9;   // GlowMap\n                    uniform sampler2D s10;  // PatternMask1Map;\n                    uniform sampler2D s11;  // PatternMask2Map;\n                    uniform sampler2D s12;  // DustNoiseMap\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[14];\n                    uniform vec4 cb7[24];\n       \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 v8;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r10;\n                        vec4 r11;\n                        vec4 r12;\n                        vec4 r13;\n                        vec4 r14;\n                        vec4 r15;\n                        vec4 r16;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        vec4 c20=vec4(9.99999997e-007,-5,0.400000006,3.14159274);\n                        vec4 c21=vec4(1,2,-1,0);\n                        vec4 c22=vec4(-0,-0.333333343,-0.666666687,-1);\n                        vec4 c23=vec4(3.19148946,1.03191495,0.5,-0.5);\n                        vec4 c24=vec4(0.0383840017,0.0393519998,0.0391650014,9.99999987e+014);\n                        vec4 c25=vec4(1.10000002,6,-9.27999973,7);\n                        vec4 c26=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c27=vec4(0,-0.015625,0.75,0.119999997);\n                        vec4 c28=vec4(0.318309873,-1.44269507e-005,-0.00313080009,12.9200001);\n                        vec4 c29=vec4(0.416666657,1.05499995,-0.0549999997,0);\n                        vec4 c30=vec4(-1,-2,-3,-4);\n                        vec4 c31=vec4(3.14159274,-1e-015,1,1.54499996);\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord6;\n                        v7=texcoord7;\n                        v8=texcoord8;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        // PaintMaskMap\n                        r0.x=texture2D(s6,v0.xy).x * ").concat(n.texture.PaintMaskMap.multiplier,";  \n                        \n                        // MaterialMap\n                        r0.y=texture2D(s7,v0.xy).x;    \n                        \n                        // DirtMap (Not required here)     \n                        r0.z=texture2D(s8,v0.xy).x;   \n                        \n                        // GlowMap     \n                        r0.w=texture2D(s9,v0.xy).x;     \n                        \n                        gl_FragData[0].w=(-r0.x)+c21.x;\n                        r0.z=(-cb2[19].x)+cb2[19].y;\n                        r0.z=1.0/r0.z;\n                        r1.x=(-cb2[19].x)+v7.z;\n                        r0.z=r0.z*r1.x;\n                        r0.z=sqrt(abs(r0.z));\n                        r1.x=1.0/v8.w;\n                        r1.xy=r1.xx*v8.xy;\n                        r1.xy=r1.xy*c23.zw+c23.zz;\n                        r1.z=c23.z;\n                        r1.xy=cb2[18].xy*r1.zz+r1.xy;\n                        r1=texture2D(s1,r1.xy);\n                        r1.z=r0.z+(-r1.x);\n                        r1.y=r1.x*(-r1.x)+r1.y;\n                        r1.x=r1.x+cb2[18].z;\n                        r0.z=(-r0.z)+r1.x;\n                        r0.z=r0.z>=0.0?c21.x:c21.w;\n                        r2.x=max(r1.y,c20.x);\n                        r1.x=r1.z*r1.z+r2.x;\n                        r1.x=1.0/r1.x;\n                        r1.x=r1.x*r2.x;\n                        r2.x=saturate(max(r0.z,r1.x));\n                        r0.z=r2.x+(-cb2[18].w);\n                        r1.x=c21.x;\n                        r1.y=r1.x+(-cb2[18].w);\n                        r1.y=1.0/r1.y;\n                        r0.z=saturate(r0.z*r1.y);\n                        r0.z=(-cb2[19].x)>=0.0?r0.z:r1.x;\n                        r1.x=max(cb2[19].z,r0.z);\n                        r0.z=r1.x*r1.x;\n                        r1.xyz=r0.zzz*cb2[13].xyz;\n                        r1.xyz=r1.xyz*(-c22.zzz);\n                        r0.z=dot(v4.xyz,v4.xyz);\n                        r0.z=r0.z==0.0?3.402823466e+38:inversesqrt(abs(r0.z));\n                        r2.xyz=v4.xyz*r0.zzz+cb2[12].xyz;\n                        r3.xyz=r0.zzz*v4.xyz;\n                        r4.xyz=normalize(r2.xyz);\n                        r0.z=clamp(dot(r4.xyz,r3.xyz),0.0, 1.0);\n                        r0.z=r0.z*r0.z;\n                        r0.x=r0.x*cb7[0].x;\n                        r2.x=cb4[11].x;\n                        r1.w=r2.x+c20.y;\n                        r5.x=cb7[19].x;\n                        r2.y=r1.w>=0.0?r5.x:cb7[16].x;\n                        r6=r2.xxxx+c30;\n                        r2.x=r6.w>=0.0?r2.y:cb7[13].x;\n                        r2.x=r6.z>=0.0?r2.x:cb7[12].x;\n                        r2.x=r6.y>=0.0?r2.x:cb7[11].x;\n                        r2.x=r6.x>=0.0?r2.x:cb7[10].x;\n                        r7.x=cb4[10].x;\n                        r2.y=r7.x+c20.y;\n                        r2.z=r2.y>=0.0?r5.x:cb7[16].x;\n                        r5=r7.xxxx+c30;\n                        r2.z=r5.w>=0.0?r2.z:cb7[13].x;\n                        r2.z=r5.z>=0.0?r2.z:cb7[12].x;\n                        r2.z=r5.y>=0.0?r2.z:cb7[11].x;\n                        r2.z=r5.x>=0.0?r2.z:cb7[10].x;\n                        \n                        // Webgl doesn't support CLAMP_TO_BORDER\n                        \n                        // PatternMask1Map\n                        r7=clampToBorder(s10,v6.xy,cb4[10].yz,c21.wwww);\n                         \n                        // PatternMask2Map\n                        r8=clampToBorder(s11,v6.zw,cb4[11].yz,c21.wwww); \n                        \n                        r7=r7.xxxx*cb4[12];\n                        r3.w=mix(cb7[11].x,r2.z,r7.y);\n                        r8=r8.xxxx*cb4[13];\n                        r4.w=mix(r3.w,r2.x,r8.y);\n                        r9=r0.yyyy+c22;\n                        r0.y=r0.w*r0.w;\n                        r9=r9*c23.xxxx;\n                        r9=saturate((-abs(r9))+c23.yyyy);\n                        r0.w=r4.w*r9.y;\n                        r3.w=mix(cb7[10].x,r2.z,r7.x);\n                        r4.w=mix(r3.w,r2.x,r8.x);\n                        r0.w=r9.x*r4.w+r0.w;\n                        r3.w=mix(cb7[12].x,r2.z,r7.z);\n                        r4.w=mix(cb7[13].x,r2.z,r7.w);\n                        r10.x=mix(r4.w,r2.x,r8.w);\n                        r4.w=mix(r3.w,r2.x,r8.z);\n                        r0.w=r9.z*r4.w+r0.w;\n                        r0.w=r9.w*r10.x+r0.w;\n                        \n                        // AlbedoMap \n                        r10.xyz=texture2D(s2,v0.xy).xyz;    \n                        \n                        // RoughnessMap    \n                        r10.w=texture2D(s3,v0.xy).x;        \n                        \n                        r2.x=r0.w*r10.w;\n                        r0.w=r10.w*(-r0.w)+c20.z;\n                        r0.w=r0.x*r0.w+r2.x;\n                        r0.w=saturate((-r0.w)+c21.x);\n                        r2.xz=(-r0.ww)+c31.zw;\n                        r3.w=min(r2.z,c21.x);\n                        r11=c27;\n                        r12=r2.xxxx*c26+r11.xxyz;\n                        r0.z=r0.z*r3.w+c25.x;\n                        r0.z=(-r3.w)+r0.z;\n                        r0.z=1.0/r0.z;\n                        \n                        r11.xyz=cb7[18].xyz;\n                        {\n                            bvec3 tmp=greaterThanEqual(r1.www,vec3(0.0));\n                            r2.xzw=vec3(tmp.x?r11.x:cb7[15].x,tmp.y?r11.y:cb7[15].y,tmp.z?r11.z:cb7[15].z);\n                        }\n                        r13.xyz=cb7[17].xyz;\n                        {\n                            bvec3 tmp=greaterThanEqual(r1.www,vec3(0.0));\n                            r14.xyz=vec3(tmp.x?r13.x:cb7[14].x,tmp.y?r13.y:cb7[14].y,tmp.z?r13.z:cb7[14].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.www,vec3(0.0));\n                            r14.xyz=vec3(tmp.x?r14.x:cb7[5].x,tmp.y?r14.y:cb7[5].y,tmp.z?r14.z:cb7[5].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.zzz,vec3(0.0));\n                            r14.xyz=vec3(tmp.x?r14.x:cb7[4].x,tmp.y?r14.y:cb7[4].y,tmp.z?r14.z:cb7[4].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.yyy,vec3(0.0));\n                            r14.xyz=vec3(tmp.x?r14.x:cb7[3].x,tmp.y?r14.y:cb7[3].y,tmp.z?r14.z:cb7[3].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.xxx,vec3(0.0));\n                            r14.xyz=vec3(tmp.x?r14.x:cb7[2].x,tmp.y?r14.y:cb7[2].y,tmp.z?r14.z:cb7[2].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.www,vec3(0.0));\n                            r2.xzw=vec3(tmp.x?r2.x:cb7[9].x,tmp.y?r2.z:cb7[9].y,tmp.z?r2.w:cb7[9].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.zzz,vec3(0.0));\n                            r2.xzw=vec3(tmp.x?r2.x:cb7[8].x,tmp.y?r2.z:cb7[8].y,tmp.z?r2.w:cb7[8].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.yyy,vec3(0.0));\n                            r2.xzw=vec3(tmp.x?r2.x:cb7[7].x,tmp.y?r2.z:cb7[7].y,tmp.z?r2.w:cb7[7].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r6.xxx,vec3(0.0));\n                            r2.xzw=vec3(tmp.x?r2.x:cb7[6].x,tmp.y?r2.z:cb7[6].y,tmp.z?r2.w:cb7[6].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r2.yyy,vec3(0.0));\n                            r6.xyz=vec3(tmp.x?r11.x:cb7[15].x,tmp.y?r11.y:cb7[15].y,tmp.z?r11.z:cb7[15].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r2.yyy,vec3(0.0));\n                            r11.xyz=vec3(tmp.x?r13.x:cb7[14].x,tmp.y?r13.y:cb7[14].y,tmp.z?r13.z:cb7[14].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.www,vec3(0.0));\n                            r11.xyz=vec3(tmp.x?r11.x:cb7[5].x,tmp.y?r11.y:cb7[5].y,tmp.z?r11.z:cb7[5].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.zzz,vec3(0.0));\n                            r11.xyz=vec3(tmp.x?r11.x:cb7[4].x,tmp.y?r11.y:cb7[4].y,tmp.z?r11.z:cb7[4].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.yyy,vec3(0.0));\n                            r11.xyz=vec3(tmp.x?r11.x:cb7[3].x,tmp.y?r11.y:cb7[3].y,tmp.z?r11.z:cb7[3].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.xxx,vec3(0.0));\n                            r11.xyz=vec3(tmp.x?r11.x:cb7[2].x,tmp.y?r11.y:cb7[2].y,tmp.z?r11.z:cb7[2].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.www,vec3(0.0));\n                            r6.xyz=vec3(tmp.x?r6.x:cb7[9].x,tmp.y?r6.y:cb7[9].y,tmp.z?r6.z:cb7[9].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.zzz,vec3(0.0));\n                            r6.xyz=vec3(tmp.x?r6.x:cb7[8].x,tmp.y?r6.y:cb7[8].y,tmp.z?r6.z:cb7[8].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.yyy,vec3(0.0));\n                            r5.yzw=vec3(tmp.x?r6.x:cb7[7].x,tmp.y?r6.y:cb7[7].y,tmp.z?r6.z:cb7[7].z);\n                        }\n                        {\n                            bvec3 tmp=greaterThanEqual(r5.xxx,vec3(0.0));\n                            r5.xyz=vec3(tmp.x?r5.y:cb7[6].x,tmp.y?r5.z:cb7[6].y,tmp.z?r5.w:cb7[6].z);\n                        }\n                        \n                        // r7 = pattern mask 1 (on/off each mat layer)\n                        // r5 = pattern mask 1 fresnel\n                        // r11 = pattern mask 1 diffuse \n                        \n                        // r8 = pattern mask 2 (on/off each mat layer)\n                        // r14 = pattern mask 1 diffuse\n                        // r2 = pattern mask 2 fresnel\n                        \n                        r6.xyz=mix(cb7[6].xyz,r5.xyz,r7.xxx);\n                        r13.xyz=mix(r6.xyz,r2.xzw,r8.xxx);\n                        r6.xyz=mix(cb7[7].xyz,r5.xyz,r7.yyy);\n                        r15.xyz=mix(r6.xyz,r2.xzw,r8.yyy);\n                        r6.xyz=r9.yyy*r15.xyz;\n                        r6.xyz=r9.xxx*r13.xyz+r6.xyz;\n                        r13.xyz=mix(cb7[8].xyz,r5.xyz,r7.zzz);\n                        r15.xyz=mix(cb7[9].xyz,r5.xyz,r7.www);\n                        r5.xyz=mix(r15.xyz,r2.xzw,r8.www);\n                        r15.xyz=mix(r13.xyz,r2.xzw,r8.zzz);\n                        r2.xyz=r9.zzz*r15.xyz+r6.xyz;\n                        r2.xyz=r9.www*r5.xyz+r2.xyz;\n                        r5.xyz=r2.xyz*r10.www;\n                        r2.xyz=r10.www*(-r2.xyz)+c24.xyz;\n                        r2.xyz=r0.xxx*r2.xyz+r5.xyz;\n                        r1.w=clamp(dot(cb2[12].xyz,r4.xyz),0.0, 1.0);\n                        r1.w=(-r1.w)+c21.x;\n                        r2.w=r1.w*r1.w;\n                        r2.w=r2.w*r2.w;\n                        r1.w=r1.w*r2.w;\n                        r5.xyz=mix(r2.xyz,c21.xxx,r1.www);\n                        r6.xyz=r0.zzz*r5.xyz;\n                        r5.xyz=(-r5.xyz)+c21.xxx;\n                        r13.xyz=mix(cb7[3].xyz,r11.xyz,r7.yyy);\n                        r15.xyz=mix(r13.xyz,r14.xyz,r8.yyy);\n                        r13.xyz=r9.yyy*r15.xyz;\n                        r15.xyz=mix(cb7[2].xyz,r11.xyz,r7.xxx);\n                        r16.xyz=mix(r15.xyz,r14.xyz,r8.xxx);\n                        r13.xyz=r9.xxx*r16.xyz+r13.xyz;\n                        r15.xyz=mix(cb7[4].xyz,r11.xyz,r7.zzz);\n                        r16.xyz=mix(cb7[5].xyz,r11.xyz,r7.www);\n                        r7.xyz=mix(r16.xyz,r14.xyz,r8.www);\n                        r11.xyz=mix(r15.xyz,r14.xyz,r8.zzz);\n                        r8.xyz=r9.zzz*r11.xyz+r13.xyz;\n                        r7.xyz=r9.www*r7.xyz+r8.xyz;\n                        r8.xyz=mix(r7.xyz,c21.xxx,r0.xxx);\n                        \n                        r7.xyz=r8.xyz*r10.xyz;\n                        r5.xyz=r5.xyz*r7.xyz;\n                        r0.x=r0.w*r0.w;\n                        r8.w=r0.w*c25.y;\n                        r0.z=r0.x*r0.x;\n                        r0.x=r0.x*r0.x+c21.z;\n                        \n                        // NormalMap \n                        r9.ywx=texture2D(s4,v0.xy).xyz; \n                        \n                        // AoMap\n                        r9.z=texture2D(s5,v0.xy).x;     \n                        \n                        r9.xy=r9.yw*c21.yy+c21.zz;\n                        r10.xyz=r9.yyy*v3.xyz;\n                        r10.xyz=r9.xxx*v2.xyz+r10.xyz;\n                        r0.w=saturate(dot(r9.xy,r9.xy)+c21.w);\n                        r0.w=(-r0.w)+c21.x;\n                        r0.w=sqrt(abs(r0.w));\n                        r9.xyz=r0.www*v1.xyz+r10.xyz;\n                        r10.xyz=normalize(r9.xyz);\n                        r0.w=clamp(dot(r10.xyz,r4.xyz),0.0, 1.0);\n                        r0.w=r0.w*r0.w;\n                        r0.x=r0.w*r0.x+c21.x;\n                        r0.x=r0.x*r0.x;\n                        r0.w=r0.x*c20.w;\n                        r0.x=r0.x*c31.x+c31.y;\n                        r0.w=1.0/r0.w;\n                        r0.x=r0.x>=0.0?r0.w:c24.w;\n                        r0.x=r0.x*r0.z;\n                        r0.xzw=r6.xyz*r0.xxx+r5.xyz;\n                        r1.w=clamp(dot(cb2[12].xyz,r10.xyz),0.0, 1.0);\n                        \n                        // Dirt test\n                        float unknown1 = r1.w; // Whatever this is? \n                        vec4 dustDetailNoise = texture2D(s12, v0.xy);\n                        vec3 dirt = texture2D(s8,v0.xy).xxx; \n                        dustDetailNoise = dustDetailNoise += vec4(0.5);\n                        float unknownShadowValue = 0.0;\n                        float unknown0 = saturate(unknownShadowValue * (-dustDetailNoise.z) + 1.0);\n                        float dirty = dirt.x * dustDetailNoise.w;\n                        dustDetailNoise.xy = (vec2(-unknown0)) + vec2(1,1.54499996);\n                        float unknown3 = min(dustDetailNoise.y, 1.0);\n                        dustDetailNoise = dustDetailNoise.xxxx * vec4(1.04166663,0.474999994,0.018229166,0.25) + r8.xxyz;  \n                        \n                        r0.xzw=r0.xzw*r1.www;\n                        r0.xzw=r1.xyz*r0.xzw;\n                        r1.xyz=max(r0.xzw,c21.www);\n                        r0.x=dot(r3.xyz,r10.xyz);\n                        r0.z=r0.x+r0.x;\n                        r0.x=saturate(r0.x);\n                        r0.x=r0.x*c25.z;\n                        r0.x=exp2(r0.x);\n                        r1.w=min(r0.x,r12.y);\n                        r0.x=r12.x*r1.w+r12.z;\n                        r4.xyz=saturate(mix(r0.xxx,r12.www,r2.xyz));\n                        r0.xzw=r10.xyz*(-r0.zzz)+r3.xyz;\n                        r8.x=dot((-r0.xzw),cb2[8].xyz);\n                        r8.y=dot((-r0.xzw),cb2[9].xyz);\n                        r8.z=dot((-r0.xzw),cb2[10].xyz);\n                        r2=textureCubeLod(s0,r8.xyz,r8.w);\n                        r0.xzw=r2.xyz*cb2[14].www;\n                        r10.w=c25.w;\n                        r2=textureCubeLod(s0,r10.xyz,r10.w);\n                        r1.w=r11.w*cb2[14].w;\n                        r2.xyz=r2.xyz*cb2[14].www+r1.www;\n                        r3.xyz=(-r4.xyz)+c21.xxx;\n                        r3.xyz=r3.xyz*r7.xyz;\n                        r2.xyz=r2.xyz*r3.xyz;\n                        r2.xyz=r2.xyz*c28.xxx;\n                        r0.xzw=r0.xzw*r4.xyz+r2.xyz;\n                        r2.xyz=max(r0.xzw,c21.www);\n                        r0.xzw=r1.xyz+r2.xyz;\n                        r2.xy=mix(v0.xy,v0.zw,cb7[0].yy);\n                        \n                        // NormalMap \n                        r1.ywx=texture2D(s4,r2.xy).xyz;     \n                        \n                        // AoMap        \n                        r1.z=texture2D(s5,r2.xy).x;         \n                       \n                        r0.xzw=r0.xzw*r1.zzz+(-cb2[15].xyz);\n                        r1.x=cb2[15].w*v4.w;\n                        r1.x=r1.x*c28.y;\n                        r1.x=exp2(r1.x);\n                        r0.xzw=r1.xxx*r0.xzw+cb2[15].xyz;\n                        r2.xyz=cb2[15].xyz;\n                        r1.yzw=(-r2.xyz)+cb7[1].xyz;\n                        r1.xyz=r1.xxx*r1.yzw+cb2[15].xyz;\n                        r1.xyz=r1.xyz*cb4[0].yyy;\n                        r0.xyz=r1.xyz*r0.yyy+r0.xzw;\n                        r1.xyz=max(r0.xyz,c21.www);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c29.xxx;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c29.yyy+c29.zzz;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c28.zzz;\n                        r2.xyz=r2.xyz*c28.www;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n                        \n                        // Dirt test\n                        gl_FragData[0].xyz = mix(gl_FragData[0].xyz, dirt * cb4[0].z, dirt / 5.0);\n                        \n                        ").concat(n.ps.shadowFooter,"\n                    }\n                ")}}}},d={name:"skinned_quadV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/skinned_quadV5",description:"skinned ".concat(p.description),todo:p.todo,techniques:{Depth:a.skinnedQuadDepthV5.techniques.Main,Picking:u.skinnedQuadPickingV5.techniques.Main,Outline:c.skinnedQuadOutlineV5.techniques.Main,Emissive:l.skinnedQuadEmissiveV5.techniques.Main,ExtendedPicking:s.skinnedQuadExtendedPickingV5.techniques.Main,Utility:f.skinnedQuadUtilityV5.techniques.Main,Main:{vs:n.vs.skinnedQuadV5_PosBwtTexTanTex,ps:p.techniques.Main.ps}}}},"../shaders/quad/quadwreckv5.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadWreckV5",(function(){return a}));var n=r("../shaders/quad/shared/index.js"),i=r("../shaders/shared/texture.js"),o={name:"g_wreckShaderAdjustments",value:[1.1,3,.1,0],autoRegister:!0,ui:{description:"Provides adjustments so that wrecks look correct in webgl",components:["adjust pow","albedo override","adjust lights"],widget:r("../shaders/shared/util.js").WidgetType.MIXED,display:0}},a={name:"quadWreckV5",replaces:"graphics/effect.gles2/managed/space/spaceobject/v5/quad/quadWreckV5",description:"wreck quad shader",todo:"Add picking and depth",techniques:{Main:{vs:{inputDefinitions:[{usage:"POSITION",usageIndex:0},{usage:"TEXCOORD",usageIndex:0},{usage:"TANGENT",usageIndex:0},{usage:"COLOR",usageIndex:0},{usage:"TEXCOORD",usageIndex:1}],shader:"\n                \n                    ".concat(n.vs.shadowHeader,"\n                \n                    attribute vec4 attr0;\n                    attribute vec4 attr1;\n                    attribute vec4 attr2;\n                    attribute vec4 attr3;\n                    attribute vec4 attr4;\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord6;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    \n                    varying vec4 color;\n                    uniform vec4 cb1[24];\n                    uniform vec4 cb3[4];\n                    uniform vec3 ssyf;\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        \n                        vec4 c0=vec4(6.28318548,-3.14159274,0.159154937,0.5);\n                        vec4 c1=vec4(0,1,0,0);\n                        \n                        v0=attr0;\n                        v1=attr1;\n                        v2=attr2;\n                        v3=attr3;\n                        v4=attr4;\n                        \n                        r0=v0.xyzx*c1.yyyx+c1.xxxy;\n                        r1.w=dot(r0,cb3[3]);\n                        r1.x=dot(r0,cb3[0]);\n                        r1.y=dot(r0,cb3[1]);\n                        r1.z=dot(r0,cb3[2]);\n                        gl_Position.x=dot(r1,cb1[4]);\n                        gl_Position.y=dot(r1,cb1[5]);\n                        gl_Position.z=dot(r1,cb1[6]);\n                        gl_Position.w=dot(r1,cb1[7]);\n                        \n                        r0=v2*c0.xxxx+c0.yyyy;\n                        {bvec4 tmp=lessThan(c1.xxxx,r0.ywzw);r2.xy=(vec4(tmp.x?1.0:0.0,tmp.y?1.0:0.0,tmp.z?1.0:0.0,tmp.w?1.0:0.0)).xy;};\n                        r0=r0*c0.zzzz+c0.wwww;\n                        r0=fract(r0);\n                        r0=r0*c0.xxxx+c0.yyyy;\n                        r2.x=r2.y*r2.x;\n                        r3.xy=vec2(cos(r0.x), sin(r0.x));\n                        r4.xy=vec2(cos(r0.y), sin(r0.y));\n                        r3.xy=r3.xy*abs(r4.yy);\n                        r3.z=r4.x;\n                        r4.xy=vec2(cos(r0.z), sin(r0.z));\n                        r5.xy=vec2(cos(r0.w), sin(r0.w));\n                        r0.xy=r4.xy*abs(r5.yy);\n                        r0.z=r5.x;\n                        r2.yzw=r0.yzx*r3.zxy;\n                        r2.yzw=r3.yzx*r0.zxy+(-r2.yzw);\n                        r4.xyz=mix((-r2.yzw),r2.yzw,r2.xxx);\n                        texcoord1.x=dot(r4.xyz,cb3[0].xyz);\n                        texcoord1.y=dot(r4.xyz,cb3[1].xyz);\n                        texcoord1.z=dot(r4.xyz,cb3[2].xyz);\n                        texcoord2.x=dot(r3.xyz,cb3[0].xyz);\n                        texcoord2.y=dot(r3.xyz,cb3[1].xyz);\n                        texcoord2.z=dot(r3.xyz,cb3[2].xyz);\n                        texcoord3.x=dot(r0.xyz,cb3[0].xyz);\n                        texcoord3.y=dot(r0.xyz,cb3[1].xyz);\n                        texcoord3.z=dot(r0.xyz,cb3[2].xyz);\n                        r0.xyz=(-r1.xyz)+cb1[3].xyz;\n                        r0.w=dot(r0.xyz,r0.xyz);\n                        r0.w=r0.w==0.0?3.402823466e+38:inversesqrt(abs(r0.w));\n                        texcoord4.xyz=r0.www*r0.xyz;\n                        r0.x=1.0/r0.w;\n                        texcoord7.x=dot(r1,cb1[16]);\n                        texcoord7.y=dot(r1,cb1[17]);\n                        texcoord7.z=dot(r1,cb1[18]);\n                        texcoord7.w=dot(r1,cb1[19]);\n                        texcoord8.x=dot(r1,cb1[20]);\n                        texcoord8.y=dot(r1,cb1[21]);\n                        texcoord8.z=dot(r1,cb1[22]);\n                        texcoord8.w=dot(r1,cb1[23]);\n                        texcoord.xy=v1.xy;\n                        texcoord.zw=v4.xy;\n                        texcoord4.w=r0.x;\n                        texcoord5.w=r0.x;\n                        texcoord5.xyz=v0.xyz;\n                        texcoord6=c1.xxxx;\n                        color=v3;\n                        \n                        ").concat(n.vs.shadowFooter,"\n                    }\n                ")},ps:{constants:[n.constant.GeneralData,n.constant.GeneralGlowColor,n.constant.Mtl1DiffuseColor,n.constant.Mtl2DiffuseColor,n.constant.Mtl3DiffuseColor,n.constant.Mtl4DiffuseColor,n.constant.Mtl1FresnelColor,n.constant.Mtl2FresnelColor,n.constant.Mtl3FresnelColor,n.constant.Mtl4FresnelColor,n.constant.Mtl1Gloss,n.constant.Mtl2Gloss,n.constant.Mtl3Gloss,n.constant.Mtl4Gloss,n.constant.WreckColor,n.constant.WreckFactors,o],textures:[i.EveSpaceSceneEnvMap,i.EveSpaceSceneShadowMap,n.texture.AlphaThresholdMap,n.texture.AlbedoMap,n.texture.RoughnessMap,n.texture.NormalMap,n.texture.AoMap,n.texture.PaintMaskMap,n.texture.MaterialMap,n.texture.DirtMap,n.texture.GlowMap],shader:"\n                \n                    ".concat(n.ps.header,"\n                    \n                    varying vec4 texcoord;\n                    varying vec4 texcoord1;\n                    varying vec4 texcoord2;\n                    varying vec4 texcoord3;\n                    varying vec4 texcoord4;\n                    varying vec4 texcoord5;\n                    varying vec4 texcoord7;\n                    varying vec4 texcoord8;\n                    varying vec4 color;\n                    \n                    uniform samplerCube s0;\n                    uniform sampler2D s1;\n                    uniform sampler2D s2;  // AlphaThresholdMap\n                    uniform sampler2D s3;  // AlbedoMap,\n                    uniform sampler2D s4;  // RoughnessMap\n                    uniform sampler2D s5;  // NormalMap,\n                    uniform sampler2D s6;  // AoMap,\n                    uniform sampler2D s7;  // PaintMaskMap\n                    uniform sampler2D s8;  // MaterialMap,\n                    uniform sampler2D s9;  // DirtMap,\n                    uniform sampler2D s10; // GlowMap\n                   \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb4[3];\n                    uniform vec4 cb7[17];\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 v1;\n                        vec4 v2;\n                        vec4 v3;\n                        vec4 v4;\n                        vec4 v5;\n                        vec4 v6;\n                        vec4 v7;\n                        vec4 v8;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r10;\n                        vec4 r11;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 r4;\n                        vec4 r5;\n                        vec4 r6;\n                        vec4 r7;\n                        vec4 r8;\n                        vec4 r9;\n                        \n                        vec4 c16=vec4(9.99999997e-007,15,0.0666666701,0.400000006);\n                        vec4 c17=vec4(-0,-0.333333343,-0.666666687,-1);\n                        vec4 c18=vec4(3.19148946,1.03191495,0.5,-0.5);\n                        vec4 c19=vec4(0.0383840017,0.0393519998,0.0391650014,3.14159274);\n                        vec4 c20=vec4(1,2,-1,0);\n                        vec4 c21=vec4(3.14159274,-1e-015,9.99999987e+014,1.10000002);\n                        vec4 c22=vec4(1,1.54499996,6,-9.27999973);\n                        vec4 c23=vec4(1.04166663,0.474999994,0.018229166,0.25);\n                        vec4 c24=vec4(0,-0.015625,0.75,7);\n                        vec4 c25=vec4(0.119999997,0.318309873,-1.44269507e-005,-0.00313080009);\n                        vec4 c26=vec4(12.9200001,0.416666657,1.05499995,-0.0549999997);\n                        \n                        v0=texcoord;\n                        v1=texcoord1;\n                        v2=texcoord2;\n                        v3=texcoord3;\n                        v4=texcoord4;\n                        v5=texcoord5;\n                        v6=texcoord7;\n                        v7=texcoord8;\n                        v8=color;\n                        \n                        r0.xyz=(-cb4[1].xyz)+v5.xyz;\n                        r0.x=dot(r0.xyz,r0.xyz);\n                        r0.w=cb4[1].w;\n                        r0=cb4[2].xxxx*r0.xxxx+(-r0.wwww);\n                        if(any(lessThan(r0,vec4(0.0))))discard;\n                        \n                        // PaintMaskMap\n                        r0.x=texture2D(s7,v0.xy).x * ").concat(n.texture.PaintMaskMap.multiplier,";\n                        \n                        // MaterialMap\n                        r0.y=texture2D(s8,v0.xy).x;    \n                        \n                        // DirtMap (Not required here) <----------------------------------------------------------------\n                        r0.z=texture2D(s9,v0.xy).x;   \n                        \n                        // GlowMap     \n                        r0.w=texture2D(s10,v0.xy).x;  \n                        \n                        gl_FragData[0].w=(-r0.x)+c20.x;\n                        r0.z=(-cb2[19].x)+cb2[19].y;\n                        r0.z=1.0/r0.z;\n                        r1.x=(-cb2[19].x)+v6.z;\n                        r0.z=r0.z*r1.x;\n                        r0.z=sqrt(abs(r0.z));\n                        r1.x=1.0/v7.w;\n                        r1.xy=r1.xx*v7.xy;\n                        r1.xy=r1.xy*c18.zw+c18.zz;\n                        r1.z=c18.z;\n                        r1.xy=cb2[18].xy*r1.zz+r1.xy;\n                        r1=texture2D(s1,r1.xy);\n                        r1.z=r0.z+(-r1.x);\n                        r1.y=r1.x*(-r1.x)+r1.y;\n                        r1.x=r1.x+cb2[18].z;\n                        r0.z=(-r0.z)+r1.x;\n                        r0.z=r0.z>=0.0?c20.x:c20.w;\n                        r2.x=max(r1.y,c16.x);\n                        r1.x=r1.z*r1.z+r2.x;\n                        r1.x=1.0/r1.x;\n                        r1.x=r1.x*r2.x;\n                        r2.x=saturate(max(r0.z,r1.x));\n                        r0.z=r2.x+(-cb2[18].w);\n                        r1.x=c20.x;\n                        r1.y=r1.x+(-cb2[18].w);\n                        r1.y=1.0/r1.y;\n                        r0.z=saturate(r0.z*r1.y);\n                        r0.z=(-cb2[19].x)>=0.0?r0.z:r1.x;\n                        r1.y=max(cb2[19].z,r0.z);\n                        r0.z=r1.y*r1.y;\n                        r1.yzw=r0.zzz*cb2[13].xyz;\n                        r1.yzw=r1.yzw*(-c17.zzz);\n                        r0.z=dot(v4.xyz,v4.xyz);\n                        r0.z=r0.z==0.0?3.402823466e+38:inversesqrt(abs(r0.z));\n                        r2.xyz=v4.xyz*r0.zzz+cb2[12].xyz;\n                        r3.xyz=r0.zzz*v4.xyz;\n                        r4.xyz=normalize(r2.xyz);\n                        r0.z=clamp(dot(r4.xyz,r3.xyz),0.0, 1.0);\n                        r0.z=r0.z*r0.z;\n                        r0.x=r0.x*cb7[0].x;\n                        r2=r0.yyyy+c17;\n                        r0.y=r0.w*r0.w;\n                        r2=r2*c18.xxxx;\n                        r2=saturate((-abs(r2))+c18.yyyy);\n                        r0.w=r2.y*cb7[11].x;\n                        r0.w=r2.x*cb7[10].x+r0.w;\n                        r0.w=r2.z*cb7[12].x+r0.w;\n                        r0.w=r2.w*cb7[13].x+r0.w;\n                        \n                        // AlbedoMap\n                        r5.xyz=texture2D(s3,v0.xy).xyz;\n                        \n                        // RoughnessMap\n                        r5.w=texture2D(s4,v0.xy).x;\n                        \n                        r3.w=r0.w*r5.w;\n                        r0.w=r5.w*(-r0.w)+c16.w;\n                        r0.w=r0.x*r0.w+r3.w;\n                        r0.w=saturate((-r0.w)+c20.x);\n                        r6.xy=(-r0.ww)+c22.xy;\n                        r3.w=min(r6.y,c20.x);\n                        r7.xyz=c24.xyz;\n                        r6=r6.xxxx*c23+r7.xxyz;\n                        r0.z=r0.z*r3.w+c21.w;\n                        r0.z=(-r3.w)+r0.z;\n                        r0.z=1.0/r0.z;\n                        r7.xyz=r2.yyy*cb7[7].xyz;\n                        r7.xyz=r2.xxx*cb7[6].xyz+r7.xyz;\n                        r7.xyz=r2.zzz*cb7[8].xyz+r7.xyz;\n                        r7.xyz=r2.www*cb7[9].xyz+r7.xyz;\n                        r8.xyz=r5.www*r7.xyz;\n                        r7.xyz=r5.www*(-r7.xyz)+c19.xyz;\n                        r7.xyz=r0.xxx*r7.xyz+r8.xyz;\n                        r3.w=clamp(dot(cb2[12].xyz,r4.xyz),0.0, 1.0);\n                        r3.w=(-r3.w)+c20.x;\n                        r4.w=r3.w*r3.w;\n                        r4.w=r4.w*r4.w;\n                        r3.w=r3.w*r4.w;\n                        r8.xyz=mix(r7.xyz,c20.xxx,r3.www);\n                        r9.xyz=r0.zzz*r8.xyz;\n                        r8.xyz=(-r8.xyz)+c20.xxx;\n                        r10.xyz=r2.yyy*cb7[3].xyz;\n                        r10.xyz=r2.xxx*cb7[2].xyz+r10.xyz;\n                        r2.xyz=r2.zzz*cb7[4].xyz+r10.xyz;\n                        r2.xyz=r2.www*cb7[5].xyz+r2.xyz;\n                        r10.xyz=mix(r2.xyz,c20.xxx,r0.xxx);\n                        r2.xyz=r5.xyz*r10.xyz;\n                        r5.xyz=r8.xyz*r2.xyz;\n                        r0.x=r0.w*r0.w;\n                        r8.w=r0.w*c22.z;\n                        r0.z=r0.x*r0.x;\n                        r0.x=r0.x*r0.x+c20.z;\n                        \n                        // NormalMap\n                        r10.ywx=texture2D(s5,v0.xy).xyz;\n                        \n                        // AoMap\n                        r10.z=texture2D(s6,v0.xy).x;\n                        \n                        r10.xy=r10.yw*c20.yy+c20.zz;\n                        r11.xyz=r10.yyy*v3.xyz;\n                        r11.xyz=r10.xxx*v2.xyz+r11.xyz;\n                        r0.w=saturate(dot(r10.xy,r10.xy)+c20.w);\n                        r0.w=(-r0.w)+c20.x;\n                        r0.w=sqrt(abs(r0.w));\n                        r10.xyz=r0.www*v1.xyz+r11.xyz;\n                        r11.xyz=normalize(r10.xyz);\n                        r0.w=clamp(dot(r11.xyz,r4.xyz),0.0, 1.0);\n                        r0.w=r0.w*r0.w;\n                        r0.x=r0.w*r0.x+c20.x;\n                        r0.x=r0.x*r0.x;\n                        r0.w=r0.x*c19.w;\n                        r0.x=r0.x*c21.x+c21.y;\n                        r0.w=1.0/r0.w;\n                        r0.x=r0.x>=0.0?r0.w:c21.z;\n                        r0.x=r0.x*r0.z;\n                        r0.xzw=r9.xyz*r0.xxx+r5.xyz;\n                        r2.w=clamp(dot(cb2[12].xyz,r11.xyz),0.0, 1.0);\n                        r0.xzw=r0.xzw*r2.www;\n                        r0.xzw=r1.yzw*r0.xzw;\n                        r1.yzw=max(r0.xzw,c20.www);\n                        r0.x=dot(r3.xyz,r11.xyz);\n                        r0.z=r0.x+r0.x;\n                        r0.x=saturate(r0.x);\n                        r0.x=r0.x*c22.w;\n                        r0.x=exp2(r0.x);\n                        r2.w=min(r0.x,r6.y);\n                        r0.x=r6.x*r2.w+r6.z;\n                        r4.xyz=saturate(mix(r0.xxx,r6.www,r7.xyz));\n                        r0.xzw=r11.xyz*(-r0.zzz)+r3.xyz;\n                        r8.x=dot((-r0.xzw),cb2[8].xyz);\n                        r8.y=dot((-r0.xzw),cb2[9].xyz);\n                        r8.z=dot((-r0.xzw),cb2[10].xyz);\n                        r3=textureCubeLod(s0,r8.xyz,r8.w);\n                        r0.xzw=r3.xyz*cb2[14].www;\n                        r11.w=c24.w;\n                        r3=textureCubeLod(s0,r11.xyz,r11.w);\n                        r5.x=c25.x;\n                        r2.w=r5.x*cb2[14].w;\n                        r3.xyz=r3.xyz*cb2[14].www+r2.www;\n                        r5.xyz=(-r4.xyz)+c20.xxx;\n                        r2.xyz=r2.xyz*r5.xyz;\n                        r2.xyz=r3.xyz*r2.xyz;\n                        r2.xyz=r2.xyz*c25.yyy;\n                        r0.xzw=r0.xzw*r4.xyz+r2.xyz;\n                        r2.xyz=max(r0.xzw,c20.www);\n                        r0.xzw=r1.yzw+r2.xyz;\n                        r1.yz=mix(v0.xy,v0.zw,cb7[0].yy);\n                        \n                        // NormalMap\n                        r2.ywx=texture2D(s5,r1.xy).xyz;\n                        \n                        if (cb7[16].y > 0.0)\n                        {\n                            r2.z=cb7[16].y;\n                        }\n                        else\n                        {\n                            // AoMap\n                            r2.z=texture2D(s6,r1.xy).x;\n                        }\n                        \n                        r0.xzw=r0.xzw*r2.zzz+(-cb2[15].xyz);\n                        r1.y=cb2[15].w*v4.w;\n                        r1.y=r1.y*c25.z;\n                        r1.y=exp2(r1.y);\n                        r0.xzw=r1.yyy*r0.xzw+cb2[15].xyz;\n                        r1.zw=c16.yy*v0.xy;\n                        r2.xy=fract(r1.zw);\n                        r1.zw=r1.zw+(-r2.xy);\n                        r1.zw=r1.zw*c16.zz;\n                        r2.x=dot(r1.zw,r1.zw)+c20.w;\n                        r2.x=r2.x==0.0?3.402823466e+38:inversesqrt(abs(r2.x));\n                        r2.xy=r1.zw*r2.xx;\n                        r2.xy=r2.xy*cb7[15].ww;\n                        r1.zw=r2.xy*cb2[21].xx+r1.zw;\n                        \n                        // GlowMap     \n                        r2.w=texture2D(s10,r1.zw).x;  \n                        \n                        r1.z=r2.w*r2.w;\n                        r1.z=sqrt(abs(r1.z));\n                        r1.w=r1.z*cb7[15].z;\n                        r1.x=cb7[15].z*(-r1.z)+r1.x;\n                        r1.z=saturate((-cb7[15].z)) + cb7[16].z;\n                        r1.x=r1.z*r1.x+r1.w;\n                        r2.xyz=cb2[15].xyz;\n                        r1.xzw=cb7[1].xyz*r1.xxx+(-r2.xyz);\n                        r1.xyz=r1.yyy*r1.xzw+cb2[15].xyz;\n                        r1.xyz=r1.xyz*cb4[0].yyy;\n                        r0.xyz=r1.xyz*r0.yyy+r0.xzw;\n                        r1.xy=cb7[15].xx*v0.xy;\n                        \n                        // AlphaThresholdMap\n                        r1=texture2D(s2,r1.xy);\n                        \n                        r0.xyz=cb7[14].xyz*(-r1.xyz)+r0.xyz;\n                        r0.w=saturate(r1.w+v8.x);\n                        r1.xyz=r1.xyz*cb7[14].xyz;\n                        r1.w=pow(r0.w,cb7[15].y-cb7[16].x);\n                        r0.xyz=r1.www*r0.xyz+r1.xyz;\n                        r1.xyz=max(r0.xyz,c20.www);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c26.yyy;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c26.zzz+c26.www;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c25.www;\n                        r2.xyz=r2.xyz*c26.xxx;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            gl_FragData[0].xyz=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n                        \n                        ").concat(n.ps.shadowFooter,"\n                    }\n                ")}}}}},"../shaders/quad/shared/constant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"GeneralData",(function(){return i})),r.d(t,"GeneralGlowColor",(function(){return o})),r.d(t,"Mtl1DiffuseColor",(function(){return a})),r.d(t,"Mtl2DiffuseColor",(function(){return u})),r.d(t,"Mtl3DiffuseColor",(function(){return c})),r.d(t,"Mtl4DiffuseColor",(function(){return l})),r.d(t,"Mtl1FresnelColor",(function(){return s})),r.d(t,"Mtl2FresnelColor",(function(){return f})),r.d(t,"Mtl3FresnelColor",(function(){return p})),r.d(t,"Mtl4FresnelColor",(function(){return d})),r.d(t,"Mtl1Gloss",(function(){return y})),r.d(t,"Mtl2Gloss",(function(){return m})),r.d(t,"Mtl3Gloss",(function(){return b})),r.d(t,"Mtl4Gloss",(function(){return h})),r.d(t,"PMtl1DiffuseColor",(function(){return v})),r.d(t,"PMtl1FresnelColor",(function(){return g})),r.d(t,"PMtl1Gloss",(function(){return w})),r.d(t,"PMtl2DiffuseColor",(function(){return x})),r.d(t,"PMtl2FresnelColor",(function(){return _})),r.d(t,"PMtl2Gloss",(function(){return z})),r.d(t,"Mtl1DustDiffuseColor",(function(){return S})),r.d(t,"Mtl2DustDiffuseColor",(function(){return j})),r.d(t,"Mtl3DustDiffuseColor",(function(){return E})),r.d(t,"Mtl4DustDiffuseColor",(function(){return T})),r.d(t,"Mtl1HeatGlowData",(function(){return P})),r.d(t,"Mtl2HeatGlowData",(function(){return D})),r.d(t,"Mtl3HeatGlowData",(function(){return A})),r.d(t,"Mtl4HeatGlowData",(function(){return M})),r.d(t,"GeneralHeatGlowColor",(function(){return C})),r.d(t,"SailsDetailData",(function(){return k})),r.d(t,"DetailData",(function(){return G})),r.d(t,"Detail1Data",(function(){return F})),r.d(t,"Detail2Data",(function(){return B})),r.d(t,"Detail3Data",(function(){return N})),r.d(t,"DetailSelector",(function(){return U})),r.d(t,"DetailAlbedoColor",(function(){return V})),r.d(t,"DetailFresnelColor",(function(){return q})),r.d(t,"Detail1AlbedoColor",(function(){return H})),r.d(t,"Detail1FresnelColor",(function(){return W})),r.d(t,"Detail1Material",(function(){return X})),r.d(t,"Detail2AlbedoColor",(function(){return K})),r.d(t,"Detail2FresnelColor",(function(){return Y})),r.d(t,"Detail2Material",(function(){return Q})),r.d(t,"GeneralTiling",(function(){return Z})),r.d(t,"WreckColor",(function(){return J})),r.d(t,"WreckFactors",(function(){return $}));var n=r("../shaders/shared/util.js"),i={name:"GeneralData",value:[1,0,0,0],ui:{group:"General",widget:n.WidgetType.MIXED,components:["paint mask influence","uv selector"],description:"general controls for the material",display:1}},o=Object(n.createLinearColor)({name:"GeneralGlowColor",ui:{group:"General",description:"lights color"}}),a=Object(n.createLinearColor)({name:"Mtl1DiffuseColor",ui:{group:"Material 1",description:"albedo color"}}),u=Object(n.createLinearColor)({name:"Mtl2DiffuseColor",ui:{group:"Material 2",description:"albedo color"}}),c=Object(n.createLinearColor)({name:"Mtl3DiffuseColor",ui:{group:"Material 3",description:"albedo color"}}),l=Object(n.createLinearColor)({name:"Mtl4DiffuseColor",ui:{group:"Material 4",description:"albedo color"}}),s=Object(n.createLinearColor)({name:"Mtl1FresnelColor",ui:{group:"Material 1",description:"fresnel color"}}),f=Object(n.createLinearColor)({name:"Mtl2FresnelColor",ui:{group:"Material 2",description:"fresnel color"}}),p=Object(n.createLinearColor)({name:"Mtl3FresnelColor",ui:{group:"Material 3",description:"fresnel color"}}),d=Object(n.createLinearColor)({name:"Mtl4FresnelColor",ui:{group:"Material 4",description:"fresnel color"}}),y=Object(n.createGloss)({name:"Mtl1Gloss",ui:{group:"Material 1",description:"gloss"}}),m=Object(n.createGloss)({name:"Mtl2Gloss",ui:{group:"Material 2",description:"gloss"}}),b=Object(n.createGloss)({name:"Mtl3Gloss",ui:{group:"Material 3",description:"gloss"}}),h=Object(n.createGloss)({name:"Mtl4Gloss",ui:{group:"Material 4",description:"gloss"}}),v=Object(n.createLinearColor)({name:"PMtl1DiffuseColor",ui:{group:"Pattern Material 1",description:"albedo color"}}),g=Object(n.createLinearColor)({name:"PMtl1FresnelColor",ui:{group:"Pattern Material 1",description:"fresnel color"}}),w=Object(n.createGloss)({name:"PMtl1Gloss",ui:{group:"Pattern Material 1",description:"gloss"}}),x=Object(n.createLinearColor)({name:"PMtl2DiffuseColor",ui:{group:"Pattern Material 2",description:"albedo color"}}),_=Object(n.createLinearColor)({name:"PMtl2FresnelColor",ui:{group:"Pattern Material 2",description:"fresnel color"}}),z=Object(n.createGloss)({name:"PMtl2Gloss",ui:{group:"Pattern Material 2",description:"gloss"}}),S=Object(n.createLinearColor)({name:"Mtl1DustDiffuseColor",ui:{group:"Material 1",description:"dust albedo color"}}),j=Object(n.createLinearColor)({name:"Mtl2DustDiffuseColor",ui:{group:"Material 2",description:"dust albedo color"}}),E=Object(n.createLinearColor)({name:"Mtl3DustDiffuseColor",ui:{group:"Material 3",description:"dust albedo color"}}),T=Object(n.createLinearColor)({name:"Mtl4DustDiffuseColor",ui:{group:"Material 4",description:"dust albedo color"}}),O=["heat booster gain influence","heat shimmer speed","heat shimmer size","heat shimmer strength"],R=[1,0,0,0],P={name:"Mtl1HeatGlowData",value:R,ui:{group:"Material 1",description:"heat glow data",components:O,widget:n.WidgetType.MIXED}},D={name:"Mtl2HeatGlowData",value:R,ui:{group:"Material 2",description:"heat glow data",components:O,widget:n.WidgetType.MIXED}},A={name:"Mtl3HeatGlowData",value:R,ui:{group:"Material 3",description:"heat glow data",components:O,widget:n.WidgetType.MIXED}},M={name:"Mtl4HeatGlowData",value:R,ui:{group:"Material 4",description:"heat glow data",components:O,widget:n.WidgetType.MIXED}},C=Object(n.createLinearColor)({name:"GeneralHeatGlowColor",ui:{group:"Heat",description:"heat glow color"}}),k={name:"SailsDetailData",value:[1,0,0,0],ui:{group:"Sails",description:"sail detail data",components:["sail scale","sail rotation","sail specular","sail alpha"],widget:n.WidgetType.MIXED}},I=["detail scale","detail intensity","detail offset x","detail offset y"],L=["mtl1 intensity","mtl2 intensity","mtl3 intensity","mtl4 intensity"],G={name:"DetailData",value:[0,0,0,0],ui:{group:"Detail",components:["detail 1 scale","detail 2 scale"],componentGroups:["Detail 1","Detail 2"],widget:n.WidgetType.MIXED}},F={name:"Detail1Data",value:[0,0,0,0],ui:{group:"Detail 1",components:I,widget:n.WidgetType.MIXED}},B={name:"Detail2Data",value:[0,0,0,0],ui:{group:"Detail 2",components:I,widget:n.WidgetType.MIXED}},N={name:"Detail3Data",value:[0,0,0,0],ui:{group:"Detail 3",components:I,widget:n.WidgetType.MIXED}},U={name:"DetailSelector",value:[0,0,0,0],ui:{group:"Detail",components:L,componentGroups:["Detail","Detail","Detail","Detail"],widget:n.WidgetType.MIXED}},V=Object(n.createLinearColor)({name:"DetailAlbedoColor",ui:{group:"Detail",description:"albedo color"}}),q=Object(n.createLinearColor)({name:"DetailFresnelColor",ui:{group:"Detail",description:"fresnel color"}}),H=Object(n.createLinearColor)({name:"Detail1AlbedoColor",value:[0,0,0,0],ui:{group:"Detail 1",description:"albedo color"}}),W=Object(n.createLinearColor)({name:"Detail1FresnelColor",value:[0,0,0,0],ui:{group:"Detail 1",description:"fresnel color"}}),X={name:"Detail1Material",value:[0,0,0,0],ui:{group:"Detail 1",description:"Select materials for detail 1",components:L}},K=Object(n.createLinearColor)({name:"Detail2AlbedoColor",value:[0,0,0,0],ui:{group:"Detail 2",description:"albedo color"}}),Y=Object(n.createLinearColor)({name:"Detail2FresnelColor",value:[0,0,0,0],ui:{group:"Detail 2",description:"fresnel color"}}),Q={name:"Detail2Material",value:[0,0,0,0],ui:{group:"Detail 2",description:"Select materials for detail 2",components:L}},Z={name:"General Tiling",value:[0,0,0,0],ui:{group:"Detail",description:"Tiling of main textures",components:["material map tiling","base texture tiling"],widget:n.WidgetType.MIXED}},J=Object(n.createLinearColor)({name:"WreckColor",ui:{group:"Wreck",description:"albedo color"}}),$={name:"WreckFactors",value:[1,1,0,0],ui:{group:"Wreck",components:["map scale uv","map sharpness","glow intensity","glow flicker speed"]}}},"../shaders/quad/shared/index.js":function(e,t,r){"use strict";r.r(t);var n=r("../shaders/quad/shared/ps.js");r.d(t,"ps",(function(){return n}));var i=r("../shaders/quad/shared/vs.js");r.d(t,"vs",(function(){return i}));var o=r("../shaders/quad/shared/constant.js");r.d(t,"constant",(function(){return o}));var a=r("../shaders/quad/shared/texture.js");r.d(t,"texture",(function(){return a}))},"../shaders/quad/shared/ps.js":function(e,t,r){"use strict";r.r(t),r.d(t,"headerNoShadow",(function(){return o})),r.d(t,"header",(function(){return a}));var n=r("../shaders/shared/func.js"),i=r("../shaders/shared/ps.js");r.d(t,"shadowFooter",(function(){return i.shadowFooter}));var o="\n\n    ".concat(n.texture2DLod,"\n    ").concat(n.precision,"\n    ").concat(n.texture2DLodPolyfill,"\n    ").concat(n.saturate,"\n\n"),a="\n\n    ".concat(o,"\n    ").concat(i.shadowHeader,"\n    \n")},"../shaders/quad/shared/texture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PaintMaskMap",(function(){return i})),r.d(t,"MaterialMap",(function(){return o})),r.d(t,"DirtMap",(function(){return a})),r.d(t,"GlowMap",(function(){return u})),r.d(t,"NormalMap",(function(){return c})),r.d(t,"AoMap",(function(){return l})),r.d(t,"AlbedoMap",(function(){return s})),r.d(t,"RoughnessMap",(function(){return f})),r.d(t,"PatternMask1Map",(function(){return p})),r.d(t,"PatternMask2Map",(function(){return d})),r.d(t,"HeatGlowNoiseMap",(function(){return y})),r.d(t,"SailsDetailMap",(function(){return m})),r.d(t,"Detail1Map",(function(){return b})),r.d(t,"Detail2Map",(function(){return h})),r.d(t,"Detail3Map",(function(){return v})),r.d(t,"OilFilmLookupMap",(function(){return g})),r.d(t,"AlphaThresholdMap",(function(){return w}));var n=r("../shaders/shared/util.js"),i=Object(n.createTex)("PaintMaskMap",n.TEX_2D,{multiplier:"1.0",ui:{suffix:"_p3",description:"paint mask",components:["mask"]}}),o=Object(n.createTex)("MaterialMap",n.TEX_2D,{ui:{suffix:"_m",description:"material mask",components:["mask"]}}),a=Object(n.createTex)("DirtMap",n.TEX_2D,{ui:{suffix:"_d",description:"dirt mask",components:["mask"]}}),u=Object(n.createTex)("GlowMap",n.TEX_2D,{ui:{suffix:"_g",description:"glow mask",components:["mask"]}}),c=Object(n.createTex)("NormalMap",n.TEX_2D,{ui:{suffix:"_n",description:"normal",components:["normal x","normal y"]}}),l=Object(n.createTex)("AoMap",n.TEX_2D,{ui:{suffix:"_o",description:"ambient occlusion",components:["ambient occlusion"]}}),s=Object(n.createTex)("AlbedoMap",n.TEX_2D,{isSRGB:1,ui:{suffix:"_a",description:"albedo",components:["red","green","blue"]}}),f=Object(n.createTex)("RoughnessMap",n.TEX_2D,{ui:{suffix:"_r",description:"roughness",components:["roughness"]}}),p=Object(n.createTex)("PatternMask1Map",n.TEX_2D,{ui:{description:"pattern 1",components:["mask"]}}),d=Object(n.createTex)("PatternMask2Map",n.TEX_2D,{ui:{description:"pattern 2",components:["mask"]}}),y=Object(n.createTex)("HeatGlowNoiseMap",n.TEX_2D,{isSRGB:!0,ui:{description:"Heat glow noise map",components:["red","green","blue","alpha"]}}),m=Object(n.createTex)("SailsDetailMap",n.TEX_2D,{ui:{description:"Sail detail map"}}),b=Object(n.createTex)("Detail1Map",n.TEX_2D,{ui:{description:"detail map"}}),h=Object(n.createTex)("Detail1Map",n.TEX_2D,{ui:{description:"detail map"}}),v=Object(n.createTex)("Detail1Map",n.TEX_2D,{ui:{description:"detail map"}}),g=Object(n.createTex)("OilFilmLookupMap",n.TEX_2D,{isSRGB:1,ui:{description:"Oil lookup map",components:["red","green","blue","alpha"]}}),w=Object(n.createTex)("AlphaThresholdMap",n.TEX_2D,{isSRGB:1,ui:{description:"Alpha threshold map",components:["red","green","blue","alpha"],sampler:{}}})},"../shaders/quad/shared/vs.js":function(e,t,r){"use strict";r.r(t),r.d(t,"quadV5_PosTexTanTex",(function(){return o})),r.d(t,"quadOilV5_PosTexTanTex",(function(){return a})),r.d(t,"quadV5_PosTex",(function(){return u})),r.d(t,"skinnedQuadV5_PosBwtTexTanTex",(function(){return c})),r.d(t,"skinnedQuadOilV5_PosBwtTexTanTex",(function(){return l})),r.d(t,"skinnedQuadV5_PosBwtTex",(function(){return s})),r.d(t,"quadInstancedV5_PosTexTanTexTexTexTex",(function(){return f})),r.d(t,"quadInstancedV5_PosTexTexTexTex",(function(){return p}));var n=r("../shaders/shared/vs.js");r.d(t,"shadowHeader",(function(){return n.shadowHeader})),r.d(t,"shadowFooter",(function(){return n.shadowFooter}));var i=r("../shaders/shared/input.js"),o={inputDefinitions:i.PosTexTanTex,shader:"\n\n        ".concat(n.shadowHeader,"\n            \n        attribute vec4 attr0;\n        attribute vec4 attr1;\n        attribute vec4 attr2;\n        attribute vec4 attr3;\n        \n        varying vec4 texcoord;\n        varying vec4 texcoord1;\n        varying vec4 texcoord2;\n        varying vec4 texcoord3;\n        varying vec4 texcoord4;\n        varying vec4 texcoord5;\n        varying vec4 texcoord6;\n        varying vec4 texcoord7;\n        varying vec4 texcoord8;\n        \n        uniform vec4 cb1[24];\n        uniform vec4 cb3[26];\n        uniform vec3 ssyf;\n        \n        void main()\n        {\n            vec4 v0;\n            vec4 v1;\n            vec4 v2;\n            vec4 v3;\n            vec4 r0;\n            vec4 r1;\n            vec4 r2;\n            vec4 r3;\n            vec4 r4;\n            vec4 r5;\n            \n            vec4 c0=vec4(6.28318548,-3.14159274,0.159154937,0.5);\n            vec4 c1=vec4(0,1,0,0);\n            \n            v0=attr0;\n            v1=attr1;\n            v2=attr2;\n            v3=attr3;\n            \n            r0=v0.xyzx*c1.yyyx+c1.xxxy;\n            r1.x=dot(r0,cb3[0]);\n            r1.y=dot(r0,cb3[1]);\n            r1.z=dot(r0,cb3[2]);\n            r1.w=dot(r0,cb3[3]);\n            gl_Position.x=dot(r1,cb1[4]);\n            gl_Position.y=dot(r1,cb1[5]);\n            gl_Position.z=dot(r1,cb1[6]);\n            gl_Position.w=dot(r1,cb1[7]);\n            \n            r0=v2*c0.xxxx+c0.yyyy;\n            {\n                bvec4 tmp=lessThan(c1.xxxx,r0.ywzw);\n                r2.xy=(vec4(tmp.x?1.0:0.0,tmp.y?1.0:0.0,tmp.z?1.0:0.0,tmp.w?1.0:0.0)).xy;\n            }\n            r0=r0*c0.zzzz+c0.wwww;\n            r0=fract(r0);\n            r0=r0*c0.xxxx+c0.yyyy;\n            r2.x=r2.y*r2.x;\n            r3.xy=vec2(cos(r0.x), sin(r0.x));\n            r4.xy=vec2(cos(r0.y), sin(r0.y));\n            r3.xy=r3.xy*abs(r4.yy);\n            r3.z=r4.x;\n            r4.xy=vec2(cos(r0.z), sin(r0.z));\n            r5.xy=vec2(cos(r0.w), sin(r0.w));\n            r0.xy=r4.xy*abs(r5.yy);\n            r0.z=r5.x;\n            r2.yzw=r0.yzx*r3.zxy;\n            r2.yzw=r3.yzx*r0.zxy+(-r2.yzw);\n            r4.xyz=mix((-r2.yzw),r2.yzw,r2.xxx);\n            texcoord1.x=dot(r4.xyz,cb3[0].xyz);\n            texcoord1.y=dot(r4.xyz,cb3[1].xyz);\n            texcoord1.z=dot(r4.xyz,cb3[2].xyz);\n            texcoord2.x=dot(r3.xyz,cb3[0].xyz);\n            texcoord2.y=dot(r3.xyz,cb3[1].xyz);\n            texcoord2.z=dot(r3.xyz,cb3[2].xyz);\n            texcoord3.x=dot(r0.xyz,cb3[0].xyz);\n            texcoord3.y=dot(r0.xyz,cb3[1].xyz);\n            texcoord3.z=dot(r0.xyz,cb3[2].xyz);\n            r0.xyz=(-r1.xyz)+cb1[3].xyz;\n            r0.w=dot(r0.xyz,r0.xyz);\n            r0.w=r0.w==0.0?3.402823466e+38:inversesqrt(abs(r0.w));\n            texcoord4.xyz=r0.www*r0.xyz;\n            r0.x=1.0/r0.w;\n            texcoord7.x=dot(r1,cb1[16]);\n            texcoord7.y=dot(r1,cb1[17]);\n            texcoord7.z=dot(r1,cb1[18]);\n            texcoord7.w=dot(r1,cb1[19]);\n            texcoord8.x=dot(r1,cb1[20]);\n            texcoord8.y=dot(r1,cb1[21]);\n            texcoord8.z=dot(r1,cb1[22]);\n            texcoord8.w=dot(r1,cb1[23]);\n            r1.x=v0.x;\n            r1.x=(-r1.x)+abs(r1.x);\n            r1.yzw=c1.xxy;\n            r2.xyz=cb3[24].yyy*r1.xyz+v0.xyz;\n            r1.xyz=cb3[25].yyy*r1.xyz+v0.xyz;\n            r2.w=c1.y;\n            r3.x=dot(r2,cb3[17]);\n            r3.y=dot(r2,cb3[18]);\n            r0.yz=r3.xy+c1.yy;\n            texcoord6.xy=r0.yz*c0.ww;\n            r0.z=dot(r1,cb3[21]);\n            r0.w=dot(r1,cb3[22]);\n            r0.yz=r0.zw+c1.yy;\n            texcoord6.zw=r0.yz*c0.ww;\n            texcoord.xy=v1.xy;\n            texcoord.zw=v3.xy;\n            texcoord4.w=r0.x;\n            texcoord5.w=r0.x;\n            texcoord5.xyz=v0.xyz;\n            \n            ").concat(n.shadowFooter,"\n        }\n    ")},a={inputDefinitions:i.PosTexTanTex,shader:"\n    \n        ".concat(n.shadowHeader,"\n    \n        attribute vec4 attr0;\n        attribute vec4 attr1;\n        attribute vec4 attr2;\n        attribute vec4 attr3;\n        \n        varying vec4 texcoord;\n        varying vec4 texcoord1;\n        varying vec4 texcoord2;\n        varying vec4 texcoord3;\n        varying vec4 texcoord4;\n        varying vec4 texcoord5;\n        varying vec4 texcoord6;\n        varying vec4 texcoord7;\n        varying vec4 texcoord8;\n        \n        uniform vec4 cb1[24];\n        uniform vec4 cb3[4];\n        uniform vec3 ssyf;\n        \n        void main()\n        {\n            vec4 v0;\n            vec4 v1;\n            vec4 v2;\n            vec4 v3;\n            vec4 r0;\n            vec4 r1;\n            vec4 r2;\n            vec4 r3;\n            vec4 r4;\n            vec4 r5;\n            vec4 c0=vec4(6.28318548,-3.14159274,0.159154937,0.5);\n            vec4 c1=vec4(0,1,0,0);\n            \n            v0=attr0;\n            v1=attr1;\n            v2=attr2;\n            v3=attr3;\n            \n            r0=v0.xyzx*c1.yyyx+c1.xxxy;\n            r1.w=dot(r0,cb3[3]);\n            r1.x=dot(r0,cb3[0]);\n            r1.y=dot(r0,cb3[1]);\n            r1.z=dot(r0,cb3[2]);\n            gl_Position.x=dot(r1,cb1[4]);\n            gl_Position.y=dot(r1,cb1[5]);\n            gl_Position.z=dot(r1,cb1[6]);\n            gl_Position.w=dot(r1,cb1[7]);\n            \n            r0=v2*c0.xxxx+c0.yyyy;\n            {\n                bvec4 tmp=lessThan(c1.xxxx,r0.ywzw);\n                r2.xy=(vec4(tmp.x?1.0:0.0,tmp.y?1.0:0.0,tmp.z?1.0:0.0,tmp.w?1.0:0.0)).xy;\n            }\n            r0=r0*c0.zzzz+c0.wwww;\n            r0=fract(r0);\n            r0=r0*c0.xxxx+c0.yyyy;\n            r2.x=r2.y*r2.x;\n            r3.xy=vec2(cos(r0.x), sin(r0.x));\n            r4.xy=vec2(cos(r0.y), sin(r0.y));\n            r3.xy=r3.xy*abs(r4.yy);\n            r3.z=r4.x;\n            r4.xy=vec2(cos(r0.z), sin(r0.z));\n            r5.xy=vec2(cos(r0.w), sin(r0.w));\n            r0.xy=r4.xy*abs(r5.yy);\n            r0.z=r5.x;\n            r2.yzw=r0.yzx*r3.zxy;\n            r2.yzw=r3.yzx*r0.zxy+(-r2.yzw);\n            r4.xyz=mix((-r2.yzw),r2.yzw,r2.xxx);\n            texcoord1.x=dot(r4.xyz,cb3[0].xyz);\n            texcoord1.y=dot(r4.xyz,cb3[1].xyz);\n            texcoord1.z=dot(r4.xyz,cb3[2].xyz);\n            texcoord2.x=dot(r3.xyz,cb3[0].xyz);\n            texcoord2.y=dot(r3.xyz,cb3[1].xyz);\n            texcoord2.z=dot(r3.xyz,cb3[2].xyz);\n            texcoord3.x=dot(r0.xyz,cb3[0].xyz);\n            texcoord3.y=dot(r0.xyz,cb3[1].xyz);\n            texcoord3.z=dot(r0.xyz,cb3[2].xyz);\n            r0.xyz=(-r1.xyz)+cb1[3].xyz;\n            r0.w=dot(r0.xyz,r0.xyz);\n            r0.w=r0.w==0.0?3.402823466e+38:inversesqrt(abs(r0.w));\n            texcoord4.xyz=r0.www*r0.xyz;\n            r0.x=1.0/r0.w;\n            texcoord7.x=dot(r1,cb1[16]);\n            texcoord7.y=dot(r1,cb1[17]);\n            texcoord7.z=dot(r1,cb1[18]);\n            texcoord7.w=dot(r1,cb1[19]);\n            texcoord8.x=dot(r1,cb1[20]);\n            texcoord8.y=dot(r1,cb1[21]);\n            texcoord8.z=dot(r1,cb1[22]);\n            texcoord8.w=dot(r1,cb1[23]);\n            texcoord.xy=v1.xy;\n            texcoord.zw=v3.xy;\n            texcoord4.w=r0.x;\n            texcoord5.w=r0.x;\n            texcoord5.xyz=v0.xyz;\n            texcoord6=c1.xxxx;\n            \n            ").concat(n.shadowFooter,"\n        }\n    ")},u={inputDefinitions:i.PosTex,shader:"\n        \n        ".concat(n.shadowHeader,"\n                \n        attribute vec4 attr0;\n        attribute vec4 attr1;\n        \n        varying vec4 texcoord;\n        varying vec4 texcoord1;\n        \n        uniform vec4 cb1[8];\n        uniform vec4 cb3[4];\n        uniform vec3 ssyf;\n        \n        void main()\n        {\n            vec4 v0;\n            vec4 v1;\n            vec4 r0;\n            vec4 r1;\n            \n            vec4 c0=vec4(1,0,0,0);\n            \n            v0=attr0;\n            v1=attr1;\n            \n            r0=v0.xyzx*c0.xxxy+c0.yyyx;\n            r1.x=dot(r0,cb3[0]);\n            r1.y=dot(r0,cb3[1]);\n            r1.z=dot(r0,cb3[2]);\n            r1.w=dot(r0,cb3[3]);\n            gl_Position.x=dot(r1,cb1[4]);\n            gl_Position.y=dot(r1,cb1[5]);\n            gl_Position.z=dot(r1,cb1[6]);\n            gl_Position.w=dot(r1,cb1[7]);\n            \n            texcoord=c0.xxxy*v0.xyzx;\n            texcoord1.xy=v1.xy;\n        \n            ").concat(n.shadowFooter,"\n        }\n    ")},c={inputDefinitions:i.PosBwtTexTanTex,shader:"\n    \n        ".concat(n.shadowHeader,"\n        \n        attribute vec4 attr0;\n        attribute vec4 attr1;\n        attribute vec4 attr2;\n        attribute vec4 attr3;\n        attribute vec4 attr4;\n        \n        varying vec4 texcoord;\n        varying vec4 texcoord1;\n        varying vec4 texcoord2;\n        varying vec4 texcoord3;\n        varying vec4 texcoord4;\n        varying vec4 texcoord5;\n        varying vec4 texcoord6;\n        varying vec4 texcoord7;\n        varying vec4 texcoord8;\n        \n        uniform vec4 cb1[24];\n        uniform vec4 cb3[200];\n        uniform vec3 ssyf;\n        \n        void main()\n        {\n            vec4 v0;\n            vec4 v1;\n            vec4 v2;\n            vec4 v3;\n            vec4 v4;\n            vec4 r0;\n            vec4 r1;\n            vec4 r2;\n            vec4 r3;\n            vec4 r4;\n            vec4 r5;\n            vec4 r6;\n            vec4 r7;\n            vec4 r8;\n            \n            ivec4 a0;\n            \n            vec4 c0=vec4(3,0,1,0.5);\n            vec4 c1=vec4(6.28318548,-3.14159274,0.159154937,0.5);\n            \n            v0=attr0;\n            v1=attr1;\n            v2=attr2;\n            v3=attr3;\n            v4=attr4;\n            \n            r0.x=c0.x*v1.x;         \n            a0.x=int(r0.x+0.5);      \n            r0=cb3[27+a0.x];\n            r1=r0*cb3[3].yyyy;\n            r2=cb3[26+a0.x];\n            r1=r2*cb3[3].xxxx+r1;\n            r3=cb3[28+a0.x];\n            r1=r3*cb3[3].zzzz+r1;\n            r4.yz=c0.yz;\n            r1=cb3[3].wwww*r4.yyyz+r1;\n            r5=v0.xyzx*c0.zzzy+c0.yyyz;\n            r1.w=dot(r5,r1);\n            r6=r0*cb3[0].yyyy;\n            r6=r2*cb3[0].xxxx+r6;\n            r6=r3*cb3[0].zzzz+r6;\n            r6=cb3[0].wwww*r4.yyyz+r6;\n            r1.x=dot(r5,r6);\n            r7=r0*cb3[1].yyyy;\n            r7=r2*cb3[1].xxxx+r7;\n            r7=r3*cb3[1].zzzz+r7;\n            r7=cb3[1].wwww*r4.yyyz+r7;\n            r1.y=dot(r5,r7);\n            r0=r0*cb3[2].yyyy;\n            r0=r2*cb3[2].xxxx+r0;\n            r0=r3*cb3[2].zzzz+r0;\n            r0=cb3[2].wwww*r4.yyyz+r0;\n            r1.z=dot(r5,r0);\n            gl_Position.x=dot(r1,cb1[4]);\n            gl_Position.y=dot(r1,cb1[5]);\n            gl_Position.z=dot(r1,cb1[6]);\n            gl_Position.w=dot(r1,cb1[7]);\n            \n            r2=v3*c1.xxxx+c1.yyyy;\n            {\n                bvec4 tmp=lessThan(c0.yyyy,r2.ywzw);\n                r3.xy=(vec4(tmp.x?1.0:0.0,tmp.y?1.0:0.0,tmp.z?1.0:0.0,tmp.w?1.0:0.0)).xy;\n            }\n            r2=r2*c1.zzzz+c1.wwww;\n            r2=fract(r2);\n            r2=r2*c1.xxxx+c1.yyyy;\n            r0.w=r3.y*r3.x;\n            r3.xy=vec2(cos(r2.x), sin(r2.x));\n            r4.xy=vec2(cos(r2.y), sin(r2.y));\n            r3.xy=r3.xy*abs(r4.yy);\n            r3.z=r4.x;\n            r4.xy=vec2(cos(r2.z), sin(r2.z));\n            r8.xy=vec2(cos(r2.w), sin(r2.w));\n            r2.xy=r4.xy*abs(r8.yy);\n            r2.z=r8.x;\n            r4.xyz=r2.yzx*r3.zxy;\n            r4.xyz=r3.yzx*r2.zxy+(-r4.xyz);\n            r8.xyz=mix((-r4.xyz),r4.xyz,r0.www);\n            texcoord1.x=dot(r8.xyz,r6.xyz);\n            texcoord1.y=dot(r8.xyz,r7.xyz);\n            texcoord1.z=dot(r8.xyz,r0.xyz);\n            texcoord2.x=dot(r3.xyz,r6.xyz);\n            texcoord3.x=dot(r2.xyz,r6.xyz);\n            texcoord2.y=dot(r3.xyz,r7.xyz);\n            texcoord3.y=dot(r2.xyz,r7.xyz);\n            texcoord3.z=dot(r2.xyz,r0.xyz);\n            texcoord2.z=dot(r3.xyz,r0.xyz);\n            r0.xyz=(-r1.xyz)+cb1[3].xyz;\n            r0.w=dot(r0.xyz,r0.xyz);\n            r0.w=r0.w==0.0?3.402823466e+38:inversesqrt(abs(r0.w));\n            texcoord4.xyz=r0.www*r0.xyz;\n            r0.x=1.0/r0.w;\n            texcoord7.x=dot(r1,cb1[16]);\n            texcoord7.y=dot(r1,cb1[17]);\n            texcoord7.z=dot(r1,cb1[18]);\n            texcoord7.w=dot(r1,cb1[19]);\n            texcoord8.x=dot(r1,cb1[20]);\n            texcoord8.y=dot(r1,cb1[21]);\n            texcoord8.z=dot(r1,cb1[22]);\n            texcoord8.w=dot(r1,cb1[23]);\n            texcoord5.x=dot(r5,cb3[26+a0.x]);\n            texcoord5.y=dot(r5,cb3[27+a0.x]);\n            texcoord5.z=dot(r5,cb3[28+a0.x]);\n            r1.x=v0.x;\n            r1.x=(-r1.x)+abs(r1.x);\n            r1.yzw=c0.yyz;\n            r2.xyz=cb3[24].yyy*r1.xyz+v0.xyz;\n            r1.xyz=cb3[25].yyy*r1.xyz+v0.xyz;\n            r2.w=c0.z;\n            r3.x=dot(r2,cb3[17]);\n            r3.y=dot(r2,cb3[18]);\n            r0.yz=r3.xy+c0.zz;\n            texcoord6.xy=r0.yz*c0.ww;\n            r0.z=dot(r1,cb3[21]);\n            r0.w=dot(r1,cb3[22]);\n            r0.yz=r0.zw+c0.zz;\n            texcoord6.zw=r0.yz*c0.ww;\n            texcoord.xy=v2.xy;\n            texcoord.zw=v4.xy;\n            texcoord4.w=r0.x;\n            texcoord5.w=r0.x;\n            \n            ").concat(n.shadowFooter,"\n        }\n    ")},l={inputDefinitions:i.PosBwtTexTanTex,shader:"\n    \n        ".concat(n.shadowHeader,"\n        \n        attribute vec4 attr0;\n        attribute vec4 attr1;\n        attribute vec4 attr2;\n        attribute vec4 attr3;\n        attribute vec4 attr4;\n        \n        varying vec4 texcoord;\n        varying vec4 texcoord1;\n        varying vec4 texcoord2;\n        varying vec4 texcoord3;\n        varying vec4 texcoord4;\n        varying vec4 texcoord5;\n        varying vec4 texcoord6;\n        varying vec4 texcoord7;\n        varying vec4 texcoord8;\n        \n        uniform vec4 cb1[24];\n        uniform vec4 cb3[200];\n        uniform vec3 ssyf;\n\n        void main()\n        {\n            vec4 v0;\n            vec4 v1;\n            vec4 v2;\n            vec4 v3;\n            vec4 v4;\n            vec4 r0;\n            vec4 r1;\n            vec4 r2;\n            vec4 r3;\n            vec4 r4;\n            vec4 r5;\n            vec4 r6;\n            vec4 r7;\n            vec4 r8;\n            ivec4 a0;\n            \n            vec4 c0=vec4(3,0,1,0);\n            vec4 c1=vec4(6.28318548,-3.14159274,0.159154937,0.5);\n            \n            v0=attr0;\n            v1=attr1;\n            v2=attr2;\n            v3=attr3;\n            v4=attr4;\n            \n            r0.x=c0.x*v1.x;\n            a0.x=int(r0.x+0.5);\n            r0=cb3[27+a0.x];\n            r1=r0*cb3[3].yyyy;\n            r2=cb3[26+a0.x];\n            r1=r2*cb3[3].xxxx+r1;\n            r3=cb3[28+a0.x];\n            r1=r3*cb3[3].zzzz+r1;\n            r4.yz=c0.yz;\n            r1=cb3[3].wwww*r4.yyyz+r1;\n            r5=v0.xyzx*c0.zzzy+c0.yyyz;\n            r1.w=dot(r5,r1);\n            r6=r0*cb3[0].yyyy;\n            r6=r2*cb3[0].xxxx+r6;\n            r6=r3*cb3[0].zzzz+r6;\n            r6=cb3[0].wwww*r4.yyyz+r6;\n            r1.x=dot(r5,r6);\n            r7=r0*cb3[1].yyyy;\n            r7=r2*cb3[1].xxxx+r7;\n            r7=r3*cb3[1].zzzz+r7;\n            r7=cb3[1].wwww*r4.yyyz+r7;\n            r1.y=dot(r5,r7);\n            r0=r0*cb3[2].yyyy;\n            r0=r2*cb3[2].xxxx+r0;\n            r0=r3*cb3[2].zzzz+r0;\n            r0=cb3[2].wwww*r4.yyyz+r0;\n            r1.z=dot(r5,r0);\n            gl_Position.x=dot(r1,cb1[4]);\n            gl_Position.y=dot(r1,cb1[5]);\n            gl_Position.z=dot(r1,cb1[6]);\n            gl_Position.w=dot(r1,cb1[7]);\n            \n            r2=v3*c1.xxxx+c1.yyyy;\n            {\n                bvec4 tmp=lessThan(c0.yyyy,r2.ywzw);\n                r3.xy=(vec4(tmp.x?1.0:0.0,tmp.y?1.0:0.0,tmp.z?1.0:0.0,tmp.w?1.0:0.0)).xy;\n            }\n            r2=r2*c1.zzzz+c1.wwww;\n            r2=fract(r2);\n            r2=r2*c1.xxxx+c1.yyyy;\n            r0.w=r3.y*r3.x;\n            r3.xy=vec2(cos(r2.x), sin(r2.x));\n            r4.xy=vec2(cos(r2.y), sin(r2.y));\n            r3.xy=r3.xy*abs(r4.yy);\n            r3.z=r4.x;\n            r4.xy=vec2(cos(r2.z), sin(r2.z));\n            r8.xy=vec2(cos(r2.w), sin(r2.w));\n            r2.xy=r4.xy*abs(r8.yy);\n            r2.z=r8.x;\n            r4.xyz=r2.yzx*r3.zxy;\n            r4.xyz=r3.yzx*r2.zxy+(-r4.xyz);\n            r8.xyz=mix((-r4.xyz),r4.xyz,r0.www);\n            texcoord1.x=dot(r8.xyz,r6.xyz);\n            texcoord1.y=dot(r8.xyz,r7.xyz);\n            texcoord1.z=dot(r8.xyz,r0.xyz);\n            texcoord2.x=dot(r3.xyz,r6.xyz);\n            texcoord3.x=dot(r2.xyz,r6.xyz);\n            texcoord2.y=dot(r3.xyz,r7.xyz);\n            texcoord3.y=dot(r2.xyz,r7.xyz);\n            texcoord3.z=dot(r2.xyz,r0.xyz);\n            texcoord2.z=dot(r3.xyz,r0.xyz);\n            r0.xyz=(-r1.xyz)+cb1[3].xyz;\n            r0.w=dot(r0.xyz,r0.xyz);\n            r0.w=r0.w==0.0?3.402823466e+38:inversesqrt(abs(r0.w));\n            texcoord4.xyz=r0.www*r0.xyz;\n            r0.x=1.0/r0.w;\n            texcoord7.x=dot(r1,cb1[16]);\n            texcoord7.y=dot(r1,cb1[17]);\n            texcoord7.z=dot(r1,cb1[18]);\n            texcoord7.w=dot(r1,cb1[19]);\n            texcoord8.x=dot(r1,cb1[20]);\n            texcoord8.y=dot(r1,cb1[21]);\n            texcoord8.z=dot(r1,cb1[22]);\n            texcoord8.w=dot(r1,cb1[23]);\n            texcoord5.x=dot(r5,cb3[26+a0.x]);\n            texcoord5.y=dot(r5,cb3[27+a0.x]);\n            texcoord5.z=dot(r5,cb3[28+a0.x]);\n            texcoord.xy=v2.xy;\n            texcoord.zw=v4.xy;\n            texcoord4.w=r0.x;\n            texcoord5.w=r0.x;\n            texcoord6=c0.yyyy;\n            \n            ").concat(n.shadowFooter,"\n        }\n    ")},s={inputDefinitions:i.PosBwtTex,shader:"\n    \n        ".concat(n.shadowHeader,"\n        \n        attribute vec4 attr0;\n        attribute vec4 attr1;\n        attribute vec4 attr2;\n        \n        varying vec4 texcoord;\n        varying vec4 texcoord1;\n        \n        uniform vec4 cb1[8];\n        uniform vec4 cb3[200];\n        uniform vec3 ssyf;\n        \n        void main()\n        {\n            vec4 v0;\n            vec4 v1;\n            vec4 v2;\n            vec4 r0;\n            vec4 r1;\n            vec4 r2;\n            vec4 r3;\n            vec4 r4;\n            vec4 r5;\n            vec4 r6;\n            \n            ivec4 a0;\n            vec4 c0=vec4(3,0,1,0);\n            \n            v0=attr0;\n            v1=attr1;\n            v2=attr2;\n            \n            r0.x=c0.x*v1.x;\n            a0.x=int(r0.x+0.5);\n            r0=cb3[27+a0.x];\n            r1=r0*cb3[0].yyyy;\n            r2=cb3[26+a0.x];\n            r1=r2*cb3[0].xxxx+r1;\n            r3=cb3[28+a0.x];\n            r1=r3*cb3[0].zzzz+r1;\n            r4.yz=c0.yz;\n            r1=cb3[0].wwww*r4.yyyz+r1;\n            r5=v0.xyzx*c0.zzzy+c0.yyyz;\n            r1.x=dot(r5,r1);\n            r6=r0*cb3[1].yyyy;\n            r6=r2*cb3[1].xxxx+r6;\n            r6=r3*cb3[1].zzzz+r6;\n            r6=cb3[1].wwww*r4.yyyz+r6;\n            r1.y=dot(r5,r6);\n            r6=r0*cb3[2].yyyy;\n            r6=r2*cb3[2].xxxx+r6;\n            r6=r3*cb3[2].zzzz+r6;\n            r6=cb3[2].wwww*r4.yyyz+r6;\n            r1.z=dot(r5,r6);\n            r0=r0*cb3[3].yyyy;\n            r0=r2*cb3[3].xxxx+r0;\n            r0=r3*cb3[3].zzzz+r0;\n            r0=cb3[3].wwww*r4.yyyz+r0;\n            r1.w=dot(r5,r0);\n            gl_Position.x=dot(r1,cb1[4]);\n            gl_Position.y=dot(r1,cb1[5]);\n            gl_Position.z=dot(r1,cb1[6]);\n            gl_Position.w=dot(r1,cb1[7]);\n            \n            texcoord.x=dot(r5,cb3[26+a0.x]);\n            texcoord.y=dot(r5,cb3[27+a0.x]);\n            texcoord.z=dot(r5,cb3[28+a0.x]);\n            texcoord.w=c0.y;\n            texcoord1.xy=v2.xy;\n            \n            ").concat(n.shadowFooter,"\n        }\n    ")},f={inputDefinitions:[{usage:"POSITION",usageIndex:0},{usage:"TEXCOORD",usageIndex:0},{usage:"TANGENT",usageIndex:0},{usage:"TEXCOORD",usageIndex:8},{usage:"TEXCOORD",usageIndex:9},{usage:"TEXCOORD",usageIndex:10},{usage:"TEXCOORD",usageIndex:1}],shader:"\n  \n        ".concat(n.shadowHeader,"\n        \n        attribute vec4 attr0;\n        attribute vec4 attr1;\n        attribute vec4 attr2;\n        attribute vec4 attr3;\n        attribute vec4 attr4;\n        attribute vec4 attr5;\n        attribute vec4 attr6;\n        \n        varying vec4 texcoord;\n        varying vec4 texcoord1;\n        varying vec4 texcoord2;\n        varying vec4 texcoord3;\n        varying vec4 texcoord4;\n        varying vec4 texcoord5;\n        varying vec4 texcoord6;\n        varying vec4 texcoord7;\n        varying vec4 texcoord8;\n        \n        uniform vec4 cb1[24];\n        uniform vec4 cb3[4];\n        uniform vec3 ssyf;\n        \n        void main()\n        {\n            vec4 v0;\n            vec4 v1;\n            vec4 v2;\n            vec4 v3;\n            vec4 v4;\n            vec4 v5;\n            vec4 v6;\n            vec4 r0;\n            vec4 r1;\n            vec4 r2;\n            vec4 r3;\n            vec4 r4;\n            vec4 r5;\n            \n            vec4 c0=vec4(6.28318548,-3.14159274,0.159154937,0.5);\n            vec4 c1=vec4(0,1,0,0);\n            \n            v0=attr0;\n            v1=attr1;\n            v2=attr2;\n            v3=attr3;\n            v4=attr4;\n            v5=attr5;\n            v6=attr6;\n            \n            r0.w=c1.y;\n            r1=v0.xyzx*c1.yyyx+c1.xxxy;\n            r0.x=dot(r1,v3);\n            r0.y=dot(r1,v4);\n            r0.z=dot(r1,v5);\n            r1.w=dot(r0,cb3[3]);\n            r1.x=dot(r0,cb3[0]);\n            r1.y=dot(r0,cb3[1]);\n            r1.z=dot(r0,cb3[2]);\n            texcoord5.xyz=r0.xyz;\n            gl_Position.x=dot(r1,cb1[4]);\n            gl_Position.y=dot(r1,cb1[5]);\n            gl_Position.z=dot(r1,cb1[6]);\n            gl_Position.w=dot(r1,cb1[7]);\n            \n            r0=v2*c0.xxxx+c0.yyyy;\n            {bvec4 tmp=lessThan(c1.xxxx,r0.ywzw);r2.xy=(vec4(tmp.x?1.0:0.0,tmp.y?1.0:0.0,tmp.z?1.0:0.0,tmp.w?1.0:0.0)).xy;};\n            r0=r0*c0.zzzz+c0.wwww;\n            r0=fract(r0);\n            r0=r0*c0.xxxx+c0.yyyy;\n            r2.x=r2.y*r2.x;\n            r3.xy=vec2(cos(r0.x), sin(r0.x));\n            r4.xy=vec2(cos(r0.y), sin(r0.y));\n            r3.xy=r3.xy*abs(r4.yy);\n            r3.z=r4.x;\n            r4.xy=vec2(cos(r0.z), sin(r0.z));\n            r5.xy=vec2(cos(r0.w), sin(r0.w));\n            r0.xy=r4.xy*abs(r5.yy);\n            r0.z=r5.x;\n            r2.yzw=r0.yzx*r3.zxy;\n            r2.yzw=r3.yzx*r0.zxy+(-r2.yzw);\n            r4.xyz=mix((-r2.yzw),r2.yzw,r2.xxx);\n            r2.x=dot(r4.xyz,v3.xyz);\n            r2.y=dot(r4.xyz,v4.xyz);\n            r2.z=dot(r4.xyz,v5.xyz);\n            r4.xyz=normalize(r2.xyz);\n            texcoord1.x=dot(r4.xyz,cb3[0].xyz);\n            texcoord1.y=dot(r4.xyz,cb3[1].xyz);\n            texcoord1.z=dot(r4.xyz,cb3[2].xyz);\n            r2.x=dot(r3.xyz,v3.xyz);\n            r2.y=dot(r3.xyz,v4.xyz);\n            r2.z=dot(r3.xyz,v5.xyz);\n            r3.xyz=normalize(r2.xyz);\n            texcoord2.x=dot(r3.xyz,cb3[0].xyz);\n            texcoord2.y=dot(r3.xyz,cb3[1].xyz);\n            texcoord2.z=dot(r3.xyz,cb3[2].xyz);\n            r2.x=dot(r0.xyz,v3.xyz);\n            r2.y=dot(r0.xyz,v4.xyz);\n            r2.z=dot(r0.xyz,v5.xyz);\n            r0.xyz=normalize(r2.xyz);\n            texcoord3.x=dot(r0.xyz,cb3[0].xyz);\n            texcoord3.y=dot(r0.xyz,cb3[1].xyz);\n            texcoord3.z=dot(r0.xyz,cb3[2].xyz);\n            r0.xyz=(-r1.xyz)+cb1[3].xyz;\n            r0.w=dot(r0.xyz,r0.xyz);\n            r0.w=r0.w==0.0?3.402823466e+38:inversesqrt(abs(r0.w));\n            texcoord4.xyz=r0.www*r0.xyz;\n            r0.x=1.0/r0.w;\n            texcoord7.x=dot(r1,cb1[16]);\n            texcoord7.y=dot(r1,cb1[17]);\n            texcoord7.z=dot(r1,cb1[18]);\n            texcoord7.w=dot(r1,cb1[19]);\n            texcoord8.x=dot(r1,cb1[20]);\n            texcoord8.y=dot(r1,cb1[21]);\n            texcoord8.z=dot(r1,cb1[22]);\n            texcoord8.w=dot(r1,cb1[23]);\n            texcoord.xy=v1.xy;\n            texcoord.zw=v6.xy;\n            texcoord4.w=r0.x;\n            texcoord5.w=r0.x;\n            texcoord6=c1.xxxx;\n                         \n            ").concat(n.shadowFooter,"\n        }\n    ")},p={inputDefinitions:[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:2},{usage:"TEXCOORD",usageIndex:8,elements:4},{usage:"TEXCOORD",usageIndex:9,elements:4},{usage:"TEXCOORD",usageIndex:10,elements:4}],shader:"\n    \n        ".concat(n.shadowHeader,"\n       \n        attribute vec4 attr0;\n        attribute vec4 attr1;\n        attribute vec4 attr2;\n        attribute vec4 attr3;\n        attribute vec4 attr4;\n        \n        varying vec4 texcoord;\n        varying vec4 texcoord1;\n        \n        uniform vec4 cb1[8];\n        uniform vec4 cb3[4];\n        uniform vec3 ssyf;\n        \n        void main()\n        {\n            vec4 v0;\n            vec4 v1;\n            vec4 v2;\n            vec4 v3;\n            vec4 v4;\n            vec4 r0;\n            vec4 r1;\n            \n            vec4 c0=vec4(1,0,0,0);\n            \n            v0=attr0;\n            v1=attr1;\n            v2=attr2;\n            v3=attr3;\n            v4=attr4;\n            \n            r0.w=c0.x;\n            r1=v0.xyzx*c0.xxxy+c0.yyyx;\n            r0.x=dot(r1,v2);\n            r0.y=dot(r1,v3);\n            r0.z=dot(r1,v4);\n            r1.x=dot(r0,cb3[0]);\n            r1.y=dot(r0,cb3[1]);\n            r1.z=dot(r0,cb3[2]);\n            r1.w=dot(r0,cb3[3]);\n            texcoord.xyz=r0.xyz;\n            gl_Position.x=dot(r1,cb1[4]);\n            gl_Position.y=dot(r1,cb1[5]);\n            gl_Position.z=dot(r1,cb1[6]);\n            gl_Position.w=dot(r1,cb1[7]);\n            \n            texcoord.w=c0.y;\n            texcoord1.xy=v1.xy;\n            \n            ").concat(n.shadowFooter,"\n        }\n    \n    ")}},"../shaders/shared/constant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Time",(function(){return i})),r.d(t,"G_TEXEL_SIZE",(function(){return o})),r.d(t,"G_CAMERA",(function(){return a})),r.d(t,"PlaneCornerOffset",(function(){return u})),r.d(t,"PlaneTexCoord",(function(){return c})),r.d(t,"PlaneNormal",(function(){return l})),r.d(t,"PlaneData",(function(){return s})),r.d(t,"MainIntensity",(function(){return f})),r.d(t,"ZOffset",(function(){return p})),r.d(t,"ObjectID",(function(){return d})),r.d(t,"AreaID",(function(){return y}));var n=r("../shaders/shared/util.js"),i={name:"Time",value:[0,0,0,0],ui:{group:"Global",components:["current time","current time fract","frame","previous time"],widget:n.WidgetType.MIXED,display:0}},o={name:"g_texel_size",value:[0,0,0,0],isAutoregister:1,ui:{group:"Global",description:"Texel size : 1/width, 1/height",components:["texel width","texel height"],widget:n.WidgetType.MIXED,display:0}},a={name:"g_camera",value:[0,0,0,0],isAutoregister:1,ui:{group:"Global",components:["near plane","far plane","fov","depth mode"],widget:n.WidgetType.MIXED,display:0}},u={name:"PlaneCornerOffset",value:[-.5,-.5,0,0,.5,-.5,0,0,.5,.5,0,0,-.5,.5,0,0],dimension:4,elements:4,size:16},c={name:"PlaneTexCoord",value:[0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0],dimension:4,elements:4,size:16},l={name:"PlaneNormal",value:[0,0,1,0]},s={name:"PlaneData",value:[1,1,0,0]},f={name:"MainIntensity",value:[1,0,0,0],ui:{group:"None",description:"main intensity of the whole set",width:n.WidgetType.MIXED}},p={name:"zOffset",value:[0,0,0,0],ui:{group:"None",description:"Offsets z",widget:n.WidgetType.MIXED}},d={name:"objectId",value:[0,0,0,0],ui:{display:0}},y={name:"areaId",value:[0,0,0,0],ui:{display:0}}},"../shaders/shared/func.js":function(e,t,r){"use strict";r.r(t),r.d(t,"precision",(function(){return n})),r.d(t,"texture2DLod",(function(){return i})),r.d(t,"texture2DLodPolyfill",(function(){return o})),r.d(t,"texture3D",(function(){return a})),r.d(t,"saturate",(function(){return u})),r.d(t,"clampToBorder",(function(){return c})),r.d(t,"getID",(function(){return l}));var n="\n\n    #ifdef GL_ES\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n    #endif\n    \n",i="\n\n    #if defined(GL_EXT_shader_texture_lod)\n    #extension GL_EXT_shader_texture_lod: enable\n    #define texture2DLod texture2DLodEXT\n    #define texture2DProjLod texture2DProjLodEXT\n    #define textureCubeLod textureCubeLodEXT\n    #define texture2DGrad texture2DGradEXT\n    #define texture2DProjGrad texture2DProjGradEXT\n    #define textureCubeGrad textureCubeGradEXT\n    #elif defined(EXT_shader_texture_lod)\n    #extension EXT_shader_texture_lod: enable\n    #define texture2DLod texture2DLodEXT\n    #define texture2DProjLod texture2DProjLodEXT\n    #define textureCubeLod textureCubeLodEXT\n    #define texture2DGrad texture2DGradEXT\n    #define texture2DProjGrad texture2DProjGradEXT\n    #define textureCubeGrad textureCubeGradEXT\n    #elif defined(GL_ARB_shader_texture_lod)\n    #extension GL_ARB_shader_texture_lod: enable\n    #define texture2DGrad texture2DGradARB\n    #endif\n    \n",o="\n\n    #if defined(GL_ES)&&!defined(GL_EXT_shader_texture_lod)&&!defined(EXT_shader_texture_lod)\n    #define texture2DLod(s,u,l) texture2D(s,u)\n    #define textureCubeLod(s,u,l) textureCube(s,u)\n    #define texture2DGrad(s,u,x,y) texture2D(s,u)\n    #define textureCubeGrad(s,u,x,y) textureCube(s,u)\n    #endif\n    \n",a="\n\n    // #ifdef GL_OES_texture_3D\n    // #extension GL_OES_texture_3D: enable\n    // #endif\n\n    #if !defined(GL_ES)||defined(GL_OES_texture_3D)\n    #define tex3D(s,uvw,sl,su,sw,lw,l) texture3D(s,uvw,l)\n    #ifdef GL_EXT_shader_texture_lod\n    #define tex3DLod(s,uvw,l,sl,su,sw,lw) texture3DLod(s,uvw,l)\n    #else\n    #define tex3DLod(s,uvw,l,sl,su,sw,lw) texture3D(s,uvw)\n    #endif\n    #else\n    #define sampler3D sampler2D\n    vec4 tex3D(sampler2D s,vec3 uvw,float sl,bool su,bool sw,bool lw,float l)\n    {\n        float y;\n        if(su) y=fract(uvw.y);\n        else y=clamp(uvw.y,0.0,1.0);\n        y/=sl;\n        float z,s0,s1;\n        z=uvw.z*sl;\n        s0=floor(z);\n        s1=s0+1.0;\n        if(!sw){\n            s0=clamp(s0,0.0,sl-1.0);\n            s1=clamp(s0,0.0,sl-1.0);\n        }\n        s0/=sl;\n        s1/=sl;\n        z=fract(z);\n        vec4 c0=texture2D(s,vec2(uvw.x,y+s0));\n        vec4 c1=texture2D(s,vec2(uvw.x,y+s1));\n        if(lw) return mix(c0,c1,z);\n        return z<0.5?c0:c1;\n    }\n    #ifndef tex3DLod\n    vec4 tex3DLod(sampler2D s,vec3 uvw,float l,float sl,bool su,bool sw,bool lw)\n    {\n        float y;\n        if(su) y=fract(uvw.y);\n        else y=clamp(uvw.y,0.0,1.0);\n        y/=sl;\n        float z,s0,s1;\n        z=uvw.z*sl;\n        s0=floor(z);\n        s1=s0+1.0;\n        if(!sw){\n            s0=clamp(s0,0.0,sl-1.0);\n            s1=clamp(s0,0.0,sl-1.0);\n        }\n        s0/=sl;\n        s1/=sl;\n        z=fract(z);\n        vec4 c0=texture2DLod(s,vec2(uvw.x,y+s0),l);\n        vec4 c1=texture2DLod(s,vec2(uvw.x,y+s1),l);\n        if(lw) return mix(c0,c1,z);\n        return z<0.5?c0:c1;\n    }\n    #endif\n    #endif\n    \n",u="\n\n    float saturate(float x){\n        return clamp(x,0.0,1.0);\n    }\n    \n    vec2 saturate(vec2 x){\n        return clamp(x,vec2(0.0),vec2(1.0));\n    }\n    \n    vec3 saturate(vec3 x){\n        return clamp(x,vec3(0.0),vec3(1.0));\n    }\n    \n    vec4 saturate(vec4 x){\n        return clamp(x,vec4(0.0),vec4(1.0));\n    }\n    \n",c="\n\n    vec4 clampToBorder(sampler2D ts, vec2 uv)\n    {\n        vec4 c = texture2D(ts, uv);    \n        if(uv.x>1.0 || uv.x<0.0) return vec4(0.0);\n        if(uv.y>1.0 || uv.y<0.0) return vec4(0.0);\n        return c;\n    }\n    \n    vec4 clampToBorder(sampler2D ts, vec2 uv, vec2 clampUV)\n    {\n        vec4 c = texture2D(ts, uv);    \n        if(clampUV.x > 0.0 && (uv.x>1.0 || uv.x<0.0)) return vec4(0.0);\n        if(clampUV.y > 0.0 && (uv.y>1.0 || uv.y<0.0)) return vec4(0.0);\n        return c;\n    }\n    \n    vec4 clampToBorder(sampler2D ts, vec2 uv, vec4 borderColor)\n    {\n        vec4 c = texture2D(ts, uv);    \n        if(uv.x>1.0 || uv.x<0.0) return borderColor;\n        if(uv.y>1.0 || uv.y<0.0) return borderColor;\n        return c;\n    }\n    \n    vec4 clampToBorder(sampler2D ts, vec2 uv, vec2 clampUV, vec4 borderColor)\n    {\n        vec4 c = texture2D(ts, uv);    \n        if(clampUV.x > 0.0 && (uv.x>1.0 || uv.x<0.0)) return borderColor;\n        if(clampUV.y > 0.0 && (uv.y>1.0 || uv.y<0.0)) return borderColor;\n        return c;\n    }\n    \n",l="\n\n    vec2 getID(float id)\n    {\n        vec4 c2=vec4(1,0.00390625,0.00392156886,1.00392163);\n        vec4 tmp;\n        tmp.x=c2.x;\n        tmp.y=tmp.x+id;\n        tmp.z=tmp.y*c2.y;\n        tmp.w=fract(tmp.z);\n        tmp.w=(-tmp.w)+tmp.z;\n        tmp.z=fract(abs(tmp.z));\n        tmp.y=tmp.y>=0.0?tmp.z:(-tmp.z);\n        return tmp.wy*c2.zw;\n    }\n    \n"},"../shaders/shared/index.js":function(e,t,r){"use strict";r.r(t);var n=r("../shaders/shared/constant.js");r.d(t,"constant",(function(){return n}));var i=r("../shaders/shared/func.js");r.d(t,"func",(function(){return i}));var o=r("../shaders/shared/input.js");r.d(t,"input",(function(){return o}));var a=r("../shaders/shared/texture.js");r.d(t,"texture",(function(){return a}));var u=r("../shaders/shared/util.js");r.d(t,"util",(function(){return u}));var c=r("../shaders/shared/ps.js");r.d(t,"ps",(function(){return c}));var l=r("../shaders/shared/vs.js");r.d(t,"vs",(function(){return l}))},"../shaders/shared/input.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Pos",(function(){return n})),r.d(t,"PosTexTanTex",(function(){return i})),r.d(t,"PosBwtTan",(function(){return o})),r.d(t,"PosTexTan",(function(){return a})),r.d(t,"PosTexNor",(function(){return u})),r.d(t,"PosTex",(function(){return c})),r.d(t,"PosBwtTex",(function(){return l})),r.d(t,"PosBwtTexTanTex",(function(){return s}));var n=[{usage:"POSITION",usageIndex:0,elements:3}],i=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:2},{usage:"TANGENT",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:2}],o=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"BLENDWEIGHT",usageIndex:0,elements:4},{usage:"TANGENT",usageIndex:0,elements:4}],a=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:2},{usage:"TANGENT",usageIndex:0,elements:4}],u=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:2},{usage:"NORMAL",usageIndex:0,elements:3}],c=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:2}],l=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"BLENDWEIGHT",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:0,elements:2}],s=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"BLENDWEIGHT",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:0,elements:2},{usage:"TANGENT",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:2}]},"../shaders/shared/ps.js":function(e,t,r){"use strict";r.r(t),r.d(t,"shadowHeader",(function(){return n})),r.d(t,"shadowFooter",(function(){return i}));var n="\n\n    #ifdef PS\n    uniform vec4 ssi;\n    varying float ssv;\n    #endif\n    \n",i="\n\n    #ifdef PS\n    float av=floor(clamp(gl_FragData[0].a,0.0,1.0)*255.0+0.5);\n    if(ssi.z==0.0)\n    {\n        if(av*ssi.x+ssi.y<0.0) discard;\n    }\n    else\n    {\n        if(ssi.x>0.0)\n        {\n            if(av==ssi.y) discard;\n        }\n        else\n        {\n            if(av!=ssi.y) discard;\n        }\n    }\n    if(ssv<0.0)discard;\n    #endif\n    \n"},"../shaders/shared/texture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceSceneEnvMap",(function(){return i})),r.d(t,"EveSpaceSceneShadowMap",(function(){return o})),r.d(t,"EveSpaceSceneDepthMap",(function(){return a})),r.d(t,"BlitCurrent",(function(){return u})),r.d(t,"BlitOriginal",(function(){return c})),r.d(t,"TextureMap",(function(){return l})),r.d(t,"TextureMap_ClampBorder",(function(){return s})),r.d(t,"DustNoiseMap",(function(){return f}));var n=r("../shaders/shared/util.js"),i=Object(n.createTex)("EveSpaceSceneEnvMap",n.TEX_CUBE_MAP,{isSRGB:1,isAutoregister:1,ui:{display:0}}),o=Object(n.createTex)("EveSpaceSceneShadowMap",n.TEX_PROJECTION,{isAutoregister:1,ui:{display:0}}),a=Object(n.createTex)("EveSpaceSceneDepthMap",n.TEX_2D,{isAutoregister:1,ui:{display:0}}),u=Object(n.createTex)("BlitCurrent",n.TEX_2D,{ui:{display:0}}),c=Object(n.createTex)("BlitOriginal",n.TEX_2D,{ui:{display:0}}),l=Object(n.createTex)("TextureMap",n.TEX_2D,{isSRGB:!0}),s=Object(n.createTex)("TextureMap",n.TEX_2D,{isSRGB:!0,sampler:{name:"TextureMapClampBorderSampler",addressUMode:n.WrapMode.CLAMP_TO_EDGE,addressVMode:n.WrapMode.CLAMP_TO_EDGE}}),f=Object(n.createTex)("DustNoiseMap",n.TEX_2D,{isSRGB:!0,ui:{description:"Dust noise map",components:["red","green","blue","alpha"]}})},"../shaders/shared/util.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WidgetType",(function(){return o})),r.d(t,"createTex",(function(){return p})),r.d(t,"createBorderAndWrap",(function(){return d})),r.d(t,"overrideTex",(function(){return y})),r.d(t,"overrideConstant",(function(){return m})),r.d(t,"createLinearColor",(function(){return b})),r.d(t,"createGloss",(function(){return h}));var n=r("./global/constant/index.js");function i(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,"TEX_2D",(function(){return n.TEX_2D})),r.d(t,"TEX_CUBE_MAP",(function(){return n.TEX_CUBE_MAP})),r.d(t,"TEX_PROJECTION",(function(){return n.TEX_PROJECTION})),r.d(t,"TEX_VOLUME",(function(){return n.TEX_VOLUME})),r.d(t,"WrapMode",(function(){return n.WrapMode}));var o={LINEAR_COLOR:"LINEARCOLOR",MIXED:"MIXEDVECTOR",TEXTURE:"TEXTURE"},a={group:"Textures",display:1,widget:o.TEXTURE},u={addressUMode:n.WrapMode.REPEAT,addressVMode:n.WrapMode.REPEAT,addressWMode:n.WrapMode.REPEAT,filterMode:n.FilterMode.LINEAR,mipFilterMode:n.MipFilterMode.LINEAR,maxAnisotropy:4},c={type:n.TEX_2D,isSRGB:0,isAutoregister:0,isVolume:0,sampler:u},l={type:n.TEX_CUBE_MAP,isSRGB:0,isAutoregister:0,isVolume:0,sampler:u},s={type:n.TEX_VOLUME,isSRGB:0,isAutoregister:0,isVolume:0,sampler:u},f={type:n.TEX_PROJECTION,isSRGB:0,isAutoregister:0,isVolume:1,sampler:{addressUMode:n.WrapMode.CLAMP_TO_EDGE,addressVMode:n.WrapMode.CLAMP_TO_EDGE,addressWMode:n.WrapMode.CLAMP_TO_EDGE,filterMode:n.FilterMode.LINEAR,mipFilterMode:n.MipFilterMode.NONE,maxAnisotropy:4}};function p(e,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(t){case n.TEX_CUBE_MAP:r=l;break;case n.TEX_PROJECTION:r=f;break;case n.TEX_VOLUME:r=s;break;default:r=c}var u=o.sampler,p=void 0===u?{}:u,d=o.ui,y=void 0===d?{}:d,m=i(o,["sampler","ui"]),b=Object.assign({name:e},r,m);return b.isSRGB=b.isSRGB?1:0,b.isAutoregister=b.isAutoregister?1:0,b.sampler=Object.assign({name:"".concat(e,"Sampler")},r.sampler,p),b.ui=Object.assign({},a,y),b.isSRGB&&!b.ui.components&&(b.ui.components=["red","green","blue","alpha"]),b}function d(e,t,r){var i=p(e,t,r);return[y(i,{sampler:{name:"".concat(e,"BorderSampler"),addressUMode:n.WrapMode.CLAMP_TO_EDGE,addressVMode:n.WrapMode.CLAMP_TO_EDGE}}),y(i,{sampler:{name:"".concat(e,"WrapSampler"),addressUMode:n.WrapMode.REPEAT,addressVMode:n.WrapMode.REPEAT}})]}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({},e,t);return t.ui&&(r.ui=Object.assign({},e.ui,t.ui)),t.sampler&&(r.sampler=Object.assign({},e.sampler,t.sampler)),r}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ui,n=i(t,["ui"]),o=Object.assign({},e,n);return r&&(o.ui=Object.assign({},e.ui,r)),o}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ui,r=void 0===t?{}:t,n=i(e,["ui"]),a=Object.assign({value:[1,1,1,1]},n);return a.ui=Object.assign({group:"None",widget:o.LINEAR_COLOR,components:["linear red","linear green","linear blue","linear alpha"],description:"Linear colour",display:1},r),a}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ui,r=void 0===t?{}:t,n=i(e,["ui"]),a=Object.assign({value:[.4000000059604645,1,1,1]},n);return a.ui=Object.assign({group:"None",widget:o.MIXED,components:["gloss"],description:"Gloss",display:1},r),a}},"../shaders/shared/vs.js":function(e,t,r){"use strict";r.r(t),r.d(t,"shadowHeader",(function(){return n})),r.d(t,"shadowFooter",(function(){return i}));var n="\n\n    #ifdef PS\n    uniform vec4 ssf[4];\n    varying float ssv;\n    #endif\n\n",i="\n\n    #ifdef PS\n    ssv=dot(ssf[0],gl_Position);\n    #endif\n    \n    gl_Position.xy+=ssyf.xy*gl_Position.w;\n    gl_Position.y*=ssyf.z;\n    gl_Position.z=gl_Position.z*2.0-gl_Position.w;\n\n"},"../shaders/specialFx/background.js":function(e,t,r){"use strict";r.r(t),r.d(t,"test_background",(function(){return v}));var n,i=r("../shaders/shared/util.js"),o=r("./global/constant/index.js"),a=r("../shaders/shared/func.js"),u=r("../shaders/shared/input.js");function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={name:"NebulaScaling",value:[1,1,1,1],ui:{group:"Nebula",description:"Nebula scaling",components:["scale x","scale y","scale z"],visible:0,widget:i.WidgetType.MIXED}},s={name:"StarParameters",value:[2,3,7,1.5],ui:{group:"Stars",components:["Tiling 1","Tiling 2","Tiling 3","Intensity"],visible:1,widget:i.WidgetType.MIXED}},f={name:"AlphaBlend1",value:[.699999988079071,.8999999761581421,0,.05000000074505806],ui:{group:"Stars",components:["1u","1v","2u","2v"],componentGroups:["Star tile 1","Star tile 1","Star tile 2","Start tile 3"],visible:1,widget:i.WidgetType.MIXED}},p={name:"AlphaBlend2",value:[0,.004999999888241291,.05000000074505806,1],ui:{group:"Star tile 3",components:["3u","3v"],visible:1,widget:i.WidgetType.MIXED}},d=Object(i.createLinearColor)({name:"Tint",ui:{group:"Nebula"}}),y={name:"NebulaBrightnessOverride",value:[1,0,0,0],ui:{group:"Nebula",components:["brightness"],visible:1,widget:i.WidgetType.MIXED}},m=Object(i.createTex)("StarMap",i.TEX_2D),b=Object(i.createTex)("NebulaMap",i.TEX_CUBE_MAP),h=Object(i.createTex)("AlphaMap",i.TEX_CUBE_MAP),v={name:"background",replaces:"graphics/effect.gles2/managed/space/specialfx/background",description:"nebula shader",todo:"Temporary fix, come back and fix this up",techniques:{Main:{vertex:{inputDefinitions:u.Pos,constants:[l],shader:"\n                \n                    attribute vec4 attr0;\n                    \n                    varying vec4 texcoord;\n                    \n                    uniform vec4 cb0[1];\n                    uniform vec4 cb1[28];\n                    uniform vec3 ssyf;\n                    \n                    #ifdef PS\n                    uniform vec4 ssf[4];\n                    varying float ssv;\n                    #endif\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 r0;\n                        vec4 c1=vec4(1,0,0,0);\n                        v0=attr0;\n                        r0.xyz=cb1[9].xyz*v0.yyy;\n                        r0.xyz=v0.xxx*cb1[8].xyz+r0.xyz;\n                        r0.xyz=v0.zzz*cb1[10].xyz+r0.xyz;\n                        r0.xyz=r0.xyz*cb0[0].xyz;\n                        r0.w=c1.x;\n                        texcoord.x=dot(r0,cb1[24]);\n                        texcoord.y=dot(r0,cb1[25]);\n                        texcoord.z=dot(r0,cb1[26]);\n                        texcoord.w=dot(r0,cb1[27]);\n                        r0.x=dot(v0,cb1[12]);\n                        r0.y=dot(v0,cb1[13]);\n                        r0.z=dot(v0,cb1[15]);\n                        gl_Position=r0.xyzz;\n                        \n                        #ifdef PS\n                        ssv=dot(ssf[0],gl_Position);\n                        #endif\n                        \n                        gl_Position.xy += ssyf.xy*gl_Position.w;\n                        gl_Position.y*=ssyf.z;\n                        gl_Position.z=gl_Position.z*2.0-gl_Position.w;\n                    }\n                "},fragment:{constants:[s,f,p,d,y],textures:[m,b,h],shader:"\n                \n                    ".concat(a.precision,"\n                    ").concat(a.saturate,"\n                    \n                    varying vec4 texcoord;\n                    \n                    uniform sampler2D s0;   // StarMap\n                    uniform samplerCube s1; // NebulaMap\n                    uniform samplerCube s2; // AlphaMap\n                    \n                    uniform vec4 cb2[22];\n                    uniform vec4 cb7[5];\n                    \n                    #ifdef PS\n                    uniform vec4 ssi;\n                    varying float ssv;\n                    #endif\n                    \n                    void main()\n                    {\n                        vec4 v0;\n                        vec4 r0;\n                        vec4 r1;\n                        vec4 r2;\n                        vec4 r3;\n                        vec4 c5=vec4(0.0773993805,0.0549999997,0.947867274,2.4000001);\n                        vec4 c6=vec4(1,0,-0.5,0.344139993);\n                        vec4 c7=vec4(1,-1,-0.00313080009,12.9200001);\n                        vec4 c8=vec4(0.416666657,1.05499995,-0.0549999997,0);\n                        vec4 c9=vec4(0.714139998,1.40199995,1.77199996,-0.0404499359);\n                        v0=texcoord;\n                        \n                        r0.xyz=c7.xyx*v0.zzx;\n                        r0.w=max(abs(v0.y),abs(v0.z));\n                        r1.x=max(abs(v0.x),r0.w);\n                        r1.yzw=(-r1.xxx)+abs(v0.xyz);\n                        r0.w=1.0/r1.x;\n                        \n                        {\n                            bvec3 tmp=greaterThanEqual(r1.yzw,vec3(0.0));\n                            r1.xyz=vec3(tmp.x?c6.x:c6.y,tmp.y?c6.x:c6.y,tmp.z?c6.x:c6.y);\n                        }\n                        \n                        r0.x=dot(r1.xyz,r0.xyz);\n                        r2.xyz=c7.xxy*v0.yxy;\n                        r0.y=dot(r1.xyz,r2.xyz);\n                        r0.xy=r0.xy*r0.ww+c6.xx;\n                        r0.xy=r0.xy*(-c6.zz);\n                        r1=r0.xyxy*cb7[0].xxyy;\n                        r0.xy=r0.xy*cb7[0].zz;\n                        \n                        // Stars\n                        r0=texture2D(s0,r0.xy);\n                        r2=texture2D(s0,r1.xy);\n                        r1=texture2D(s0,r1.zw);\n                        \n                        r3.xy=(-cb7[1].xz)+cb7[1].yw;\n                        r0.w=1.0/r3.y;\n                        r1.w=1.0/r3.x;\n                        \n                        // AlphaMap\n                        r3=textureCube(s2,v0.xyz);\n                        \n                        r3.xy=r3.ww+(-cb7[1].xz);\n                        r2.w=r3.w+(-cb7[2].x);\n                        r0.w=saturate(r0.w*r3.y);\n                        r1.w=saturate(r1.w*r3.x);\n                        r1.w=(-r1.w)+c6.x;\n                        r0.w=(-r0.w)+c6.x;\n                        r1.xyz=r1.xyz*r0.www;\n                        r1.xyz=r1.www*r2.xyz+r1.xyz;\n                        r0.w=(-cb7[2].x)+cb7[2].y;\n                        r0.w=1.0/r0.w;\n                        r0.w=saturate(r0.w*r2.w);\n                        r0.w=(-r0.w)+c6.x;\n                        r0.xyz=r0.www*r0.xyz+r1.xyz;\n                        \n                        // NebulaMap\n                        r1=textureCube(s1,v0.xyz);\n                        \n                        // UVMap\n                        r2=c6.yyyy;\n                        \n                        r3=c6.xxxx;\n                        {\n                            bvec2 tmp=greaterThanEqual((-abs(r2.xy)),vec2(0.0));\n                            r1.yz=vec2(tmp.x?c6.x:c6.y,tmp.y?c6.x:c6.y);\n                        }\n                        \n                        r0.w=r1.z*r1.y;\n                        r1.y=r3.y*(-c6.w)+r1.x;\n                        r2.xz=r3.xw*c9.yz+r1.xx;\n                        r2.y=r3.z*(-c9.x)+r1.y;\n                        r1.xyz=r2.xyz+c5.yyy;\n                        r1.xyz=r1.xyz*c5.zzz;\n                        r3.x=abs(r1.x)>0.0?log2(abs(r1.x)):-3.402823466e+38;\n                        r3.y=abs(r1.y)>0.0?log2(abs(r1.y)):-3.402823466e+38;\n                        r3.z=abs(r1.z)>0.0?log2(abs(r1.z)):-3.402823466e+38;\n                        r1.xyz=r3.xyz*c5.www;\n                        r3.x=exp2(r1.x);\n                        r3.y=exp2(r1.y);\n                        r3.z=exp2(r1.z);\n                        r1.xyz=r2.xyz+c9.www;\n                        r2.xyz=r2.xyz*c5.xxx;\n                        \n                        {\n                            bvec3 tmp=greaterThanEqual(r1.xyz,vec3(0.0));\n                            r1.xyz=vec3(tmp.x?r3.x:r2.x,tmp.y?r3.y:r2.y,tmp.z?r3.z:r2.z);\n                        }\n                        \n                        {\n                            bvec3 tmp=greaterThanEqual((-r0.www),vec3(0.0));\n                            r1.xyz=vec3(tmp.x?r1.x:c6.y,tmp.y?r1.y:c6.y,tmp.z?r1.z:c6.y);\n                        }\n                        \n                        r0.xyz=cb7[0].www*r0.xyz+r1.xyz;\n                        r1.xyz=cb7[3].xyz;\n                        r1.xyz=r1.xyz*cb7[4].xxx;\n                        r0.xyz=r0.xyz*r1.xyz;\n                        r1.xyz=max(r0.xyz,c6.yyy);\n                        r0.x=r1.x>0.0?log2(r1.x):-3.402823466e+38;\n                        r0.y=r1.y>0.0?log2(r1.y):-3.402823466e+38;\n                        r0.z=r1.z>0.0?log2(r1.z):-3.402823466e+38;\n                        r0.xyz=r0.xyz*cb2[21].www;\n                        r1.xyz=r0.xyz*c8.xxx;\n                        r2.x=exp2(r1.x);\n                        r2.y=exp2(r1.y);\n                        r2.z=exp2(r1.z);\n                        r1.xyz=r2.xyz*c8.yyy+c8.zzz;\n                        r2.x=exp2(r0.x);\n                        r2.y=exp2(r0.y);\n                        r2.z=exp2(r0.z);\n                        r0.xyz=r2.xyz+c7.zzz;\n                        r2.xyz=r2.xyz*c7.www;\n                        vec3 result;\n                        {\n                            bvec3 tmp=greaterThanEqual(r0.xyz,vec3(0.0));\n                            result=vec3(tmp.x?r1.x:r2.x,tmp.y?r1.y:r2.y,tmp.z?r1.z:r2.z);\n                        }\n                        \n                         vec4 cube=textureCube(s1,v0.xyz);\n                         vec4 refl=textureCube(s2, v0.xyz);\n                         \n                         gl_FragData[0].w = 1.0;\n                         gl_FragData[0].xyz = cube.xyz;\n                         gl_FragData[0].xyz += max(result * (.6-refl.x), vec3(0.0));\n                         \n                         if (refl.x < 0.25) gl_FragData[0].xyz += result;\n                        \n                        #ifdef PS\n                        float av=floor(clamp(gl_FragData[0].a,0.0,1.0)*255.0+0.5);\n                        if(ssi.z==0.0)\n                        {\n                            if(av*ssi.x+ssi.y<0.0) discard;\n                        }\n                        else\n                        {\n                            if(ssi.x>0.0)\n                            {\n                                if(av==ssi.y) discard;\n                            }\n                            else\n                            {\n                                if(av!=ssi.y) discard;\n                            }\n                        }\n                        if(ssv<0.0)discard;\n                        #endif\n                    }\n\n               ")},states:(n={},c(n,o.RS_ZENABLE,0),c(n,o.RS_ZWRITEENABLE,0),c(n,o.RS_ZFUNC,o.CMP_ALWAYS),n)}}}},"../shaders/specialFx/index.js":function(e,t,r){"use strict";r.r(t);var n=r("../shaders/specialFx/background.js");r.d(t,"test_background",(function(){return n.test_background}))},"./config.js":function(e,t,r){"use strict";r.r(t),r.d(t,"config",(function(){return f}));var n=r("./core/index.js"),i=r("./curve/index.js"),o=r("./eve/index.js"),a=r("./particle/index.js"),u=r("./sof/index.js"),c=r("./unsupported/index.js"),l=r("./global/constant/ccpwgl.js"),s=r("./global/math/index.js"),f={debug:!1,black:{"*":function(e){return e.replace("res:/","cdn:/").toLowerCase()},dds:function(e){return"dds"===e.split(".").pop()&&e.includes("_cube")?e.replace(".dds",".qube"):e.replace(".dds",".png")},gr2:function(e){return e.replace(".gr2",".gr2_json")},red:function(e){return e.replace(".red",".black")}},glParams:{alpha:!1,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,powerPreference:"default",failIfMajorPerformanceCaveat:!1,descynchronized:!1},device:{textureQuality:l.DeviceTextureQuality.HIGH,shaderQuality:l.DeviceShaderQuality.HIGH,antialiasing:!0,anisotropicFiltering:!0,webgl2:!0,webvr:!1,performanceClock:!0},resMan:{systemMirror:!1,autoPurgeResources:!1,purgeTime:60,maxPrepareTime:.05,maxWatchedFramed:500,maxWatchedCount:10,maxWatchTime:.05},logger:{name:"CCPWGL2",history:50,throttle:10,display:!0,visible:{error:!0,warning:!1,log:!1,info:!1,debug:!1}},paths:{res:"https://developers.eveonline.com/ccpwgl/assetpath/1097993/",cdn:"http://localhost:3000/"},extensions:{sm_json:n.Tw2EffectRes,sm_depth:n.Tw2EffectRes,sm_hi:n.Tw2EffectRes,sm_lo:n.Tw2EffectRes,fx:n.Tw2EffectRes,gr2_json:n.Tw2GeometryRes,wbg:n.Tw2GeometryRes,cake:n.Tw2GeometryRes,obj:n.Tw2GeometryRes,png:n.Tw2TextureRes,dds:n.Tw2TextureRes,cube:n.Tw2TextureRes,qube:n.Tw2TextureRes,mp4:n.Tw2VideoRes,ogg:n.Tw2VideoRes,webm:n.Tw2VideoRes,black:n.Tw2LoadingObject,red:n.Tw2LoadingObject},constructors:[n,i,o,a,u,c],variableTypes:{float:n.Tw2FloatParameter,number:n.Tw2FloatParameter,texture:n.Tw2TextureParameter,vector2:n.Tw2Vector2Parameter,vector3:n.Tw2Vector3Parameter,vector4:n.Tw2Vector4Parameter,matrix4:n.Tw2Matrix4Parameter},variables:{WorldMat:s.mat4.create(),ViewMat:s.mat4.create(),ProjectionMat:s.mat4.create(),ViewProjectionMat:s.mat4.create(),ViewportSize:s.vec4.create(),Time:s.vec4.create(),u_DecalMatrix:s.mat4.create(),u_InvDecalMatrix:s.mat4.create(),EveSpaceSceneEnvMap:"",EveSpaceSceneShadowMap:"",EnvMap1:"",EnvMap2:"",EnvMap3:"",ShadowLightness:0,OccluderValue:[1,1,0,0],LensflareFxOccScale:[1,1,0,0],LensflareFxDirectionScale:[0,0,0,0],g_wreckShaderAdjustments:[1.1,3,.1,0],EveSpaceSceneDepthMap:""}}},"./core/Tw2DepthRenderTarget.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2DepthRenderTarget",(function(){return z}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./core/resource/index.js"),m=r("./global/index.js"),b=r("./global/utils/index.js"),h=r("./core/parameter/index.js");function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),e}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=b.meta.type("Tw2DepthRenderTarget"),i=b.meta.string,o=b.meta.float,a=b.meta.float,u=b.meta.uint,n((s=_((l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16,o=arguments.length>4?arguments[4]:void 0;g(this,e),v(this,"name",s,this),v(this,"width",f,this),v(this,"height",p,this),v(this,"precision",d,this),this._attached=!1,this._internalFormat=null,this._depthTexture=null,this._colorTexture=null,this._frameBuffer=null,this.name=t,this.height=n,this.width=r,this.precision=i,this.AttachDepthTexture(o,0==r&&0==n)}return x(e,[{key:"isAttached",get:function(){return this._attached}},{key:"hasDepth",get:function(){return!0}},{key:"depthTexture",get:function(){return this._depthTexture}},{key:"depthTextureGL",get:function(){return this._depthTexture?this._depthTexture.texture:null}},{key:"texture",get:function(){return this._colorTexture}},{key:"textureGL",get:function(){return this._colorTexture?this._colorTexture.texture:null}}]),x(e,[{key:"AttachDepthTexture",value:function(e,t){if(!e){var r=!1;return this._attached=!1,this._depthTexture&&(this._depthTexture=null,r=!0),t||this.Create(this.width,this.height,this.precision),r}return this._attached=!0,e instanceof h.Tw2TextureParameter?(!e.textureRes||e.textureRes!==this._depthTexture)&&(e.AttachTextureRes(new y.Tw2TextureRes),this._depthTexture=e.textureRes,t||this.Create(this.width,this.height,this.precision),!0):this._depthTexture!==e&&(this._depthTexture=e,t||this.Create(this.width,this.height,this.precision),!0)}},{key:"Update",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.precision;return(this.width!==e||this.height!==t||this.precision!==r)&&(this.Create(e,t),!0)}},{key:"Initialize",value:function(){this.width&&this.height&&this.Create(this.width,this.height,this.precision)}},{key:"IsGood",value:function(){return!!(this._frameBuffer&&this._depthTexture&&this._depthTexture.IsGood())}},{key:"KeepAlive",value:function(){this._depthTexture&&this._depthTexture.KeepAlive(),this._colorTexture&&this._colorTexture.KeepAlive()}},{key:"Destroy",value:function(){var e=m.tw2.gl;this._depthTexture&&this._depthTexture.DeleteGL(),this._colorTexture&&this._colorTexture.DeleteGL(),this._frameBuffer&&(e.deleteFramebuffer(this._frameBuffer),this._frameBuffer=null),this._internalFormat=null}},{key:"Create",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.precision;this.Destroy();var n,i,o=m.tw2.device,a=o.gl,u=o.glVersion;if(1===u){var c=m.tw2.device.GetExtension("WEBGL_depth_texture");if(!c)throw new ReferenceError("Depth textures not supported by device");n=a.DEPTH_COMPONENT,i=a.UNSIGNED_SHORT,void 0!==r&&16!==r&&(m.tw2.Warning({name:"Depth precision",description:"Invalid depth for device, falling back to 16BIT"}),r=16)}else switch(r){case 24:n=a.DEPTH_COMPONENT24,i=a.UNSIGNED_INT;break;case 32:n=a.DEPTH_COMPONENT32F,i=a.FLOAT;break;default:16!==r&&m.tw2.Warning({name:"Depth precision",description:"Invalid depth for device, falling back to 16BIT"}),r=16,n=a.DEPTH_COMPONENT16,i=a.UNSIGNED_SHORT}if(this.precision=r,this._attached&&!this._depthTexture)throw new ReferenceError("Missing depth texture attachment");this._attached||this._depthTexture||(this._depthTexture=new y.Tw2TextureRes),this._depthTexture.Attach(a.createTexture()),this._internalFormat=n;var l=this._depthTexture,s=l.texture;l._hasMipMaps=!1,l._forceMipMaps=!1,l._target=a.TEXTURE_2D,l._internalFormat=n,l._width=this.width=e,l._height=this.height=t,l._type=i,a.bindTexture(a.TEXTURE_2D,s),a.texImage2D(l._target,0,l._internalFormat,l._width,l._height,0,a.DEPTH_COMPONENT,l._type,null),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.bindTexture(a.TEXTURE_2D,null),this._frameBuffer=a.createFramebuffer(),a.bindFramebuffer(a.FRAMEBUFFER,this._frameBuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,s,0),this._colorTexture||(this._colorTexture=new y.Tw2TextureRes),this._colorTexture.Attach(a.createTexture());var f=this._colorTexture,p=this._colorTexture.texture;f._hasMipMaps=!1,f._forceMipMaps=!1,f._target=a.TEXTURE_2D,f._internalFormat=a.RGBA,f._width=e,f._height=t,f._type=a.UNSIGNED_BYTE,a.bindTexture(a.TEXTURE_2D,p),a.texImage2D(f._target,0,f._internalFormat,f._width,f._height,0,a.RGBA,f._type,null),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.bindTexture(a.TEXTURE_2D,null),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,p,0),a.bindFramebuffer(a.FRAMEBUFFER,null)}},{key:"Clear",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;if(!this.IsGood())throw new Error("Invalid frame buffer");var i=m.tw2.gl;i.bindFramebuffer(i.FRAMEBUFFER,this._frameBuffer),i.viewport(0,0,this.width,this.height),m.tw2.ClearBufferBits(e,t,r),n&&m.tw2.SetClearColor(n),i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,m.tw2.width,m.tw2.height)}},{key:"Set",value:function(e){if(!this.IsGood())throw new Error("Invalid frame buffer");var t=m.tw2.gl;t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),t.viewport(0,0,this.width,this.height),e&&(m.tw2.ClearBufferBits(e.clearColorBit,e.clearDepthBit,e.clearStencilBit),e.clearColor&&m.tw2.SetClearColor(e.clearColor))}},{key:"Unset",value:function(){if(!this.IsGood())throw new Error("Invalid frame buffer");var e=m.tw2.gl,t=m.tw2.width,r=m.tw2.height;e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,t,r)}},{key:"ReadPixels",value:function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=n*i*4,a=0;a<o;a++)e[a]=0;if(!this.IsGood())return null;var u=m.tw2.gl;return u.bindFramebuffer(u.FRAMEBUFFER,this._frameBuffer),u.checkFramebufferStatus(u.FRAMEBUFFER)!==u.FRAMEBUFFER_COMPLETE?(u.bindFramebuffer(u.FRAMEBUFFER,null),null):(u.readPixels(Math.floor(t),Math.floor(r),n,i,u.RGBA,u.UNSIGNED_BYTE,e),u.bindFramebuffer(u.FRAMEBUFFER,null),e)}}]),e}()).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=_(l.prototype,"width",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=_(l.prototype,"height",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=_(l.prototype,"precision",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 16}}),c=l))||c)},"./core/Tw2Error.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Error",(function(){return h})),r.d(t,"ErrFeatureNotImplemented",(function(){return v})),r.d(t,"ErrIndexBounds",(function(){return g})),r.d(t,"ErrWrapped",(function(){return w})),r.d(t,"ErrSingletonInstantiation",(function(){return x})),r.d(t,"ErrAbstractClass",(function(){return _})),r.d(t,"ErrAbstractMethod",(function(){return z}));var n=r("./global/utils/index.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function c(e){var t=d();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t="function"==typeof Map?new Map:void 0;return(f=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return p(e,arguments,m(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)})(e)}function p(e,t,r){return(p=d()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&y(i,r.prototype),i}).apply(null,arguments)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=Object(n.isFunction)(Error.captureStackTrace),h=function(e){u(f,e);var t,r,i,l=c(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Undefined error";o(this,f);var i=r;return"string"==typeof t?(i=t,t={}):t.message&&(i=t.message,delete t.message),(e=l.call(this)).message=Object(n.template)(i,t),e.name=e.constructor.name,e.data=t,e.data.data&&console.debug(JSON.stringify(e.data.data,null,4)),b?Error.captureStackTrace(s(e),f):e.stack=new Error(e.message).stack,e}return t=f,(r=[{key:"emitOn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";return e&&e.EmitEvent&&e.EmitEvent(t,this),this}}])&&a(t.prototype,r),i&&a(t,i),f}(f(Error)),v=function(e){u(r,e);var t=c(r);function r(e){return o(this,r),t.call(this,e,"%feature=Feature% not implemented")}return r}(h),g=function(e){u(r,e);var t=c(r);function r(e){return o(this,r),t.call(this,e,"Array index out of bounds")}return r}(h),w=function(e){u(r,e);var t=c(r);function r(e){return o(this,r),t.call(this,e,"Invalid wrapped object(s) (%reason%)")}return r}(h),x=function(e){u(r,e);var t=c(r);function r(e){return o(this,r),t.call(this,e,"Cannot re-instantiate singleton (%class%)")}return r}(h),_=function(e){u(r,e);var t=c(r);function r(e){return o(this,r),t.call(this,e,"Abstract class cannot be directly instantiated (%class%)")}return r}(h),z=function(e){u(r,e);var t=c(r);function r(e){return o(this,r),t.call(this,e,"Abstract class method not implemented on class '%class%': (%method%)")}return r}(h)},"./core/Tw2EventEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EventEmitter",(function(){return a}));var n=r("./global/utils/index.js");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=new WeakMap,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"EmitEvent",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=o.get(this);return i?((e=e.toLowerCase())in i&&(i[e].forEach((function(t,n){n.call.apply(n,[t.context].concat(r)),t.once&&i[e].delete(n)})),0===i[e].size&&Reflect.deleteProperty(i,e)),this):this}},{key:"AddEvents",value:function(e){if(!e)return this;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t],i=t,o=void 0,a=void 0;if(-1!==t.indexOf(".once")&&t.lastIndexOf(".once")===t.length-5&&(i=t.substring(0,t.length-5),a=!0),Object(n.isArray)(r)&&(o=(r=r[0])[1]),!Object(n.isFunction)(r))throw new Error("Invalid listener");this.OnEvent(i,r,o,a)}return this}},{key:"OnEvent",value:function(e,t,r,n){var i=o.get(this);if(i||(i={},o.set(this,i)),i[e=e.toLowerCase()]||(i[e]=new Map),!i[e].has(t))if(this.constructor.onListener){if(this.constructor.onListener(this,e,t,r)&&n)return this}else if(this.OnEventFirstListener&&this.OnEventFirstListener(this,e,t,r)&&n)return this;return i[e].set(t,{context:r,once:n}),this}},{key:"OnceEvent",value:function(e,t,r){return this.OnEvent(e,t,r,!0)}},{key:"OffEvent",value:function(e,t){var r=o.get(this);if(!r)return this;if("*"===e){for(var n in r)r.hasOwnProperty(n)&&(r[n].delete(t),0===r[n].size&&Reflect.deleteProperty(r,n));return this}return(e=e.toLowerCase())in r&&(r[e].delete(t),0===r[e].size&&Reflect.deleteProperty(r,e)),this}},{key:"HasEvent",value:function(e,t){var r=o.get(this);if(!r)return!1;if("*"===e){for(var n in r)if(r.hasOwnProperty(n)&&r[n].has(t))return!0;return!1}return!(!t||!(e in r))&&("*"===t?!!r[e].size:r[e].has(t))}},{key:"ClearEvent",value:function(e){var t=o.get(this);return t?"*"===e?(o.delete(this),this):((e=e.toLowerCase())in t&&(t[e].clear(),Reflect.deleteProperty(t,e)),this):this}}])&&i(t.prototype,r),a&&i(t,a),e}()},"./core/Tw2Frustum.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Frustum",(function(){return l}));var n,i,o,a=r("./global/utils/index.js"),u=r("./global/math/index.js");function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=a.meta.type("Tw2Frustum")((o=i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._halfWidthProjection=1,this._viewPos=null,this._viewDir=null,this._planes=[u.pln.create(),u.pln.create(),u.pln.create(),u.pln.create(),u.pln.create(),u.pln.create()]}var t,r,n;return t=e,(r=[{key:"Initialize",value:function(t,r,n,i,o){var a=e.global.mat4_0;this._viewPos||(this._viewPos=new u.vec3.create),this._viewDir||(this._viewDir=new u.vec3.create);var c=i||u.mat4.invert(a,t);this._viewPos.set(c.subarray(12,14)),this._viewDir.set(c.subarray(8,10)),this._halfWidthProjection=r[0]*n*.5;var l=o||u.mat4.multiply(a,r,t);this.FromViewProjectionMatrix(l)}},{key:"IsSphereVisible",value:function(e,t){return this.IntersectsPositionRadius(e,t)}},{key:"IntersectsPositionRadius",value:function(e,t){for(var r=this._planes,n=0;n<6;++n)if(r[n][0]*e[0]+r[n][1]*e[1]+r[n][2]*e[2]+r[n][3]<-t)return!1;return!0}},{key:"IntersectsSph3",value:function(e){return this.IntersectsPositionRadius(e,e[3])}},{key:"IntersectsBox3",value:function(e){for(var t=this.constructor.global.vec3_0,r=0;r<6;r++){var n=this._planes[r];if(t[0]=n[0]>0?e[0]:e[3],t[1]=n[1]>0?e[1]:e[4],t[2]=n[2]>0?e[2]:e[5],u.pln.distanceToPoint(n,t)<0)return!1}return!0}},{key:"IntersectsBounds",value:function(e,t){return this.IntersectsBox3([e[0],e[1],e[2],t[0],t[1],t[2]])}},{key:"ContainsPoint",value:function(e){for(var t=this._planes,r=0;r<6;r++)if(u.pln.distanceToPoint(t[r],e)<0)return!1;return!0}},{key:"GetPixelSizeAcross",value:function(t,r){var n=u.vec3.subtract(e.global.vec3_0,this._viewPos,t),i=u.vec3.dot(this._viewDir,n);return i<1e-5&&(i=1e-5),r<1e-5?0:r/i*this._halfWidthProjection*2}},{key:"FromViewProjectionMatrix",value:function(e){var t=this._planes,r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],c=e[5],l=e[6],s=e[7],f=e[8],p=e[9],d=e[10],y=e[11],m=e[12],b=e[13],h=e[14],v=e[15];return u.pln.setAndNormalize(t[0],o-r,s-a,y-f,v-m),u.pln.setAndNormalize(t[1],o+r,s+a,y+f,v+m),u.pln.setAndNormalize(t[2],o+n,s+c,y+p,v+b),u.pln.setAndNormalize(t[3],o-n,s-c,y-p,v-b),u.pln.setAndNormalize(t[4],o-i,s-l,y-d,v-h),u.pln.setAndNormalize(t[5],o+i,s+l,y+d,v+h),this}}])&&c(t.prototype,r),n&&c(t,n),e}(),i.global={vec3_0:u.vec3.create(),mat4_0:u.mat4.create()},n=o))||n},"./core/Tw2Picker.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Picker",(function(){return P}));var n,i,o,a,u,c,l=r("./global/utils/index.js"),s=r("./core/Tw2RenderTarget.js"),f=r("./core/batch/index.js"),p=r("./global/math/index.js"),d=r("./global/index.js"),y=r("./global/constant/index.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S,j,E,T,O,R,P=(n=l.meta.type("Tw2Picker"),i=l.meta.string,n((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,e);var t,r,n,i=w(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return b(e=i.call.apply(i,[this].concat(r)),"techniqueName",u,_(e)),e._accumulator=new f.Tw2BatchAccumulator,e._clearColor=p.vec4.fromValues(0,0,0,0),e._lastPick=null,e._readBuffer=new Uint8Array(4),e._renderTarget=new s.Tw2RenderTarget("pick_buffer",d.tw2.width,d.tw2.height,!0),e._lastFrame=-1,e._lastObjects=[],e}return t=o,(r=[{key:"GetLastPick",value:function(){return this._lastPick}},{key:"SetClearColor",value:function(e){p.vec4.copy(this._clearColor,e)}},{key:"PickFromEvent",value:function(e,t,r){var n=p.vec2.pixelPositionFromEvent([],t,r);return this.Pick(e,n)}},{key:"Pick",value:function(e,t){if(this._lastPick=null,!e||!e.length)return null;var r=!1;if(this._lastFrame!==d.tw2.frame||this._lastObjects.length!==e.length)r=!0;else for(var n=0;n<e.length;n++)if(-1===this._lastObjects.indexOf(e[n])){r=!0;break}if(r){this._lastFrame=d.tw2.frame,this._lastObjects.splice(0);for(var i=0;i<e.length;i++)this._lastObjects.push(e[i]);this._accumulator.Clear();for(var o=0;o<e.length;o++)e[o].GetBatches(d.tw2.const.RM_OPAQUE,this._accumulator)||(e.splice(o,1),o--);this._renderTarget.Update(d.tw2.width,d.tw2.height),this._renderTarget.Set(),d.tw2.ClearBufferBits(!0,!0,!0),d.tw2.SetClearColor(this._clearColor),this._accumulator.Render(this.techniqueName),this._renderTarget.Unset()}if(this._renderTarget.ReadPixels(this._readBuffer,t[0],t[1])){var a=(this._readBuffer[0]<<8|255&this._readBuffer[1])-1;if(-1!==a)for(var u=0;u<e.length;u++){var c=e[u].FindObjectByID(a);if(c){this._lastPick={id:a,item:c,root:e[u],type:this._readBuffer[2],alpha:this._readBuffer[3],typeName:Object(l.getKeyFromValue)(y.PickingBlueChannel,this._readBuffer[2])};break}}}return this._lastPick}}])&&v(t.prototype,r),n&&v(t,n),o}(l.meta.Model),S=(a=c).prototype,j="techniqueName",E=[i],T={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ExtendedPicking"}},R={},Object.keys(T).forEach((function(e){R[e]=T[e]})),R.enumerable=!!R.enumerable,R.configurable=!!R.configurable,("value"in R||R.initializer)&&(R.writable=!0),R=E.slice().reverse().reduce((function(e,t){return t(S,j,e)||e}),R),O&&void 0!==R.initializer&&(R.value=R.initializer?R.initializer.call(O):void 0,R.initializer=void 0),void 0===R.initializer&&(Object.defineProperty(S,j,R),R=null),u=R,o=a))||o)},"./core/Tw2RayCaster.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RayCaster",(function(){return f}));var n,i,o,a,u,c=r("./global/math/index.js"),l=r("./global/index.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ray=c.ray3.create(),this.nearSquared=0,this.farSquared=1/0,this._pixelPosition=c.vec2.create(),this._viewport=c.vec4.create(),this.options={faces:{backfaceCulling:!0},edges:{computeClosest:!0},vertices:{computeClosest:!0},locators:{radius:20}},this._maskFunction=null,this._sortFunction=c.ray3.SORT}var t,r,f;return t=e,(r=[{key:"UpdateFromEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target;c.vec2.pixelPositionFromEvent(this._pixelPosition,e,t),c.vec4.set(this._viewport,0,0,l.device.viewportWidth,l.device.viewportHeight),this.Unproject(this._pixelPosition,this._viewport)}},{key:"UpdateFromCoordinates",value:function(e){c.vec2.copy(this._pixelPosition,e),c.vec4.set(this._viewport,0,0,l.device.viewportWidth,l.device.viewportHeight),this.Unproject(this._pixelPosition,this._viewport)}},{key:"GetOption",value:function(e,t,r){return e in this.options&&t in this.options[e]?this.options[e][t]:r}},{key:"SetOption",value:function(e,t,r){this.options[e]||(this.options[e]={}),this.options[e][t]=r}},{key:"DoFaceIntersection",value:function(){return!this.GetOption("faces","skip",!1)}},{key:"DoBackfaceCulling",value:function(){return this.GetOption("faces","backfaceCulling",!0)}},{key:"DoFindClosestEdge",value:function(){return this.GetOption("edges","computeClosest",!0)}},{key:"DoFindClosestVertex",value:function(){return this.GetOption("vertices","computeClosest",!0)}},{key:"GetLocalRay",value:function(e,t){var r=a=a||c.mat4.create();return c.mat4.invert(r,t),c.ray3.transformMat4(e,e,r),e}},{key:"From",value:function(e,t){c.ray3.from(this.ray,e,t),c.ray3.normalize(this.ray,this.ray)}},{key:"FromStartEnd",value:function(e,t){c.ray3.fromStartEnd(this.ray,e,t)}},{key:"FromCamera",value:function(e,t){if(!("SetRayFromCoords"in t))throw new Error("Camera does not support ray casting");t.SetRayFromCoords(e,this.ray),c.ray3.normalize(this.ray,this.ray)}},{key:"Unproject",value:function(e,t,r){c.ray3.unproject(this.ray,e,r||l.device.viewProjectionInverse,t||[0,0,l.device.viewportWidth,l.device.viewportHeight])}},{key:"IsMasked",value:function(e){return!!this._maskFunction&&this._maskFunction(e)}},{key:"SetMask",value:function(e){this._maskFunction=e}},{key:"IntersectObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"Intersect"in e&&(e.Intersect(this,t),t.sort(c.ray3.SORT)),t}},{key:"IntersectObjects",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=0;r<e.length;r++)this.IntersectObject(e[r],t);return t.sort(c.ray3.SORT),t}},{key:"IntersectWorldSph3",value:function(e){if(c.ray3.intersectsSph3(this.ray,e)){o=o||c.vec3.create(),c.ray3.getIntersectSph3(o,this.ray,e);var t=c.vec3.squaredDistance(this.ray,o);if(t>this.nearSquared&&t<this.farSquared)return{name:"",item:null,root:null,distance:t,point:c.vec3.clone(o)}}}},{key:"IntersectSph3",value:function(e,t){return n=n=c.sph3.create(),c.sph3.transformMat4(n,e,t),this.IntersectWorldSph3(n)}},{key:"IntersectPositionRadius",value:function(e,t,r){return this.IntersectSph3([e[0],e[1],e[2],t],r)}},{key:"IntersectTransformRadius",value:function(e,t,r){return o=o||c.vec3.create(),c.mat4.getTranslation(o,e),this.IntersectSph3([o[0],o[1],o[2],t],r)}},{key:"IntersectWorldBox3",value:function(e){if(c.ray3.intersectsBox3(this.ray,e)){o=o||c.vec3.create(),c.ray3.getIntersectBox3(o,this.ray,e);var t=c.vec3.squaredDistance(this.ray,o);if(t>this.nearSquared&&t<this.farSquared)return{name:"",item:null,root:null,distance:t,point:c.vec3.clone(o)}}}},{key:"IntersectBox3",value:function(e,t){return i=i||c.box3.create(),c.box3.transformMat4(i,e,t),this.IntersectWorldBox3(i)}},{key:"IntersectBounds",value:function(e,t,r){return this.IntersectBox3([e[0],e[1],e[2],t[0],t[1],t[2]],r)}},{key:"IntersectWorldPln",value:function(e){if(c.ray3.intersectsPln(this.ray,e)){o=o||c.vec3.create(),c.ray3.getIntersectPln(o,this.ray,e);var t=c.vec3.squaredDistance(this.ray,o);if(t>this.nearSquared&&t<this.farSquared)return{distance:t,point:c.vec3.clone(o)}}}},{key:"IntersectPln",value:function(e,t){return u=u||c.pln.create(),c.pln.transformMat4(u,e,t),this.IntersectWorldPln(u)}},{key:"IntersectNormalConstant",value:function(e,t,r){return this.IntersectPln([e[0],e[1],e[2],t],r)}}])&&s(t.prototype,r),f&&s(t,f),e}();f.Type={VERTEX:0,EDGE:1,FACE:2,MESH_AREA:3,MESH:4,GEOMETRY:5,SET_ITEM:6,LOCATOR:7,SET:8,OBJECT:9}},"./core/Tw2RenderTarget.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RenderTarget",(function(){return _}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js"),m=r("./global/index.js"),b=r("./core/resource/Tw2TextureRes.js");function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),e}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=y.meta.type("Tw2RenderTarget"),i=y.meta.string,o=y.meta.float,a=y.meta.float,u=y.meta.boolean,n((s=x((l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];v(this,e),h(this,"name",s,this),h(this,"width",f,this),h(this,"height",p,this),h(this,"hasDepth",d,this),this._frameBuffer=null,this._renderBuffer=null,this._texture=null,this.name=t,r&&(this.width=r),n&&(this.height=n),this.hasDepth=i,this.width&&this.height&&this.Create(this.width,this.height,this.hasDepth)}return w(e,[{key:"texture",get:function(){return this._texture}},{key:"glTexture",get:function(){return this._texture?this._texture.texture:null}}]),w(e,[{key:"Initialize",value:function(){this.width&&this.height&&!this.IsGood()&&this.Create(this.width,this.height,this.hasDepth)}},{key:"IsGood",value:function(){return!!(this._frameBuffer&&this._texture&&this._texture.IsGood()&&!this.hasDepth||this._renderBuffer)}},{key:"Destroy",value:function(){var e=m.tw2.gl;this._texture&&(e.deleteTexture(this._texture.texture),this._texture.texture=null),this._renderBuffer&&(e.deleteRenderbuffer(this._renderBuffer),this._renderBuffer=null),this._frameBuffer&&(e.deleteFramebuffer(this._frameBuffer),this._frameBuffer=null),this.hasDepth=!1,this.width=0,this.height=0}},{key:"Update",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hasDepth;return(this.width!==e||this.height!==t||r!==this.hasDepth)&&(this.Create(e,t,r),!0)}},{key:"Create",value:function(e,t,r){var n=m.tw2.gl;this.Destroy(),this._texture||(this._texture=new b.Tw2TextureRes),this._texture.Attach(n.createTexture());var i=this._texture;i._target=n.TEXTURE_2D,i._format=n.RGBA,i._type=n.UNSIGNED_BYTE,i._hasMipMaps=!1,i._forceMipMaps=!1,i._width=this.width=e,i._height=this.height=t,this._frameBuffer=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,this._frameBuffer),n.bindTexture(n.TEXTURE_2D,i.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),this._renderBuffer=null,r&&(this._renderBuffer=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this._renderBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e,t)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,i.texture,0),r&&n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this._renderBuffer),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),this.hasDepth=r}},{key:"Clear",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;if(!this.IsGood())throw new Error("Invalid frame buffer");var i=m.tw2.gl;i.bindFramebuffer(i.FRAMEBUFFER,this._frameBuffer),i.viewport(0,0,this.width,this.height),m.tw2.ClearBufferBits(e,t,r),n&&m.tw2.SetClearColor(n),i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,m.tw2.width,m.tw2.height)}},{key:"Set",value:function(e){if(!this.IsGood())throw new Error("Invalid frame buffer");var t=m.tw2.gl;t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),t.viewport(0,0,this.width,this.height),e&&(m.tw2.ClearBufferBits(e.clearColorBit,e.clearDepthBit,e.clearStencilBit),e.clearColor&&m.tw2.SetClearColor(e.clearColor))}},{key:"Unset",value:function(){if(!this.IsGood())throw new Error("Invalid frame buffer");m.tw2.gl.bindFramebuffer(m.tw2.gl.FRAMEBUFFER,null),m.tw2.gl.viewport(0,0,m.tw2.width,m.tw2.height)}},{key:"ReadPixels",value:function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=n*i*4,a=0;a<o;a++)e[a]=0;if(!this.IsGood())return null;var u=m.tw2.gl;return u.bindFramebuffer(u.FRAMEBUFFER,this._frameBuffer),u.checkFramebufferStatus(u.FRAMEBUFFER)!==u.FRAMEBUFFER_COMPLETE?(u.bindFramebuffer(u.FRAMEBUFFER,null),null):(u.readPixels(Math.floor(t),Math.floor(r),n,i,u.RGBA,u.UNSIGNED_BYTE,e),u.bindFramebuffer(u.FRAMEBUFFER,null),e)}}]),e}()).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=x(l.prototype,"width",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=x(l.prototype,"height",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=x(l.prototype,"hasDepth",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=l))||c)},"./core/Tw2RuntimeInstanceData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RuntimeInstanceData",(function(){return m}));var n,i=r("./global/utils/index.js"),o=r("./global/index.js"),a=r("./core/vertex/index.js"),u=r("./particle/element/Tw2ParticleElementDeclaration.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=i.meta.type("Tw2RuntimeInstanceData","Tr2RuntimeInstanceData")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(c,e);var t,r,n,i=p(c);function c(){var e;l(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r)))._count=0,e._data=null,e._dirty=!0,e._declaration=null,e._vb=null,e._vertexStride=0,e}return t=c,(r=[{key:"GetMaxInstanceCount",value:function(){return this._data?this._data.length:1}},{key:"SetElementLayout",value:function(e){this._vb&&(o.device.gl.deleteBuffer(this._vb),this._vb=null),this._vertexStride=0,this._declaration=new a.Tw2VertexDeclaration;for(var t=0;t<e.length;++t){var r=new u.Tw2ParticleElementDeclaration;r.elementType=e[t][0],r.dimension=e[t][2],r.usageIndex=e[t][1];var n=r.GetDeclaration();n.offset=4*this._vertexStride,this._declaration.elements.push(n),this._vertexStride+=r.dimension}this._declaration.RebuildHash()}},{key:"SetData",value:function(e){this._declaration&&(this._data=e,this._count=this._data.length,this._dirty=!0,this.UpdateData())}},{key:"SetItemElement",value:function(e,t,r){if(this._declaration.elements[t].elements>1)for(var n=0;n<this._declaration.elements[t].elements;++n)this._data[e][t][n]=r[n];else this._data[e][t]=r;this._dirty=!0}},{key:"SetItemElementRef",value:function(e,t,r){this._data[e][t]=r,this._dirty=!0}},{key:"GetItemElement",value:function(e,t){return this._data[e][t]}},{key:"UpdateData",value:function(){if(this._dirty&&this._declaration){for(var e=o.device.gl,t=new Float32Array(this._data.length*this._vertexStride),r=0,n=0;n<this._data.length;++n)for(var i=0;i<this._declaration.elements.length;++i)if(1===this._declaration.elements[i].elements)t[r++]=this._data[n][i];else for(var a=0;a<this._declaration.elements[i].elements;++a)t[r++]=this._data[n][i][a];this._vb||(this._vb=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._dirty=!1}}},{key:"Unload",value:function(){this._vb&&(o.device.gl.deleteBuffer(this._vb),this._vb=null)}},{key:"GetInstanceBuffer",value:function(){return this._vb}},{key:"GetInstanceDeclaration",value:function(){return this._declaration}},{key:"GetInstanceStride",value:function(){return 4*this._vertexStride}},{key:"GetInstanceCount",value:function(){return this._count}}])&&s(t.prototype,r),n&&s(t,n),c}(i.meta.Model))||n},"./core/Tw2Transform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Transform",(function(){return k}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js"),h=r("./global/math/index.js");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function w(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t,r){return(z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P=h.vec3.create(),D=h.vec3.create(),A=h.vec3.create(),M=h.quat.create(),C=h.mat4.create(),k=(n=b.meta.type("Tw2Transform"),i=b.meta.string,o=b.meta.quaternion,a=b.meta.vector3,u=b.meta.vector3,n((m=y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,r,n,i=j(o);function o(){var e;x(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return w(e=i.call.apply(i,[this].concat(r)),"name",s,T(e)),w(e,"rotation",f,T(e)),w(e,"translation",p,T(e)),w(e,"scaling",d,T(e)),e._localTransform=h.mat4.create(),e._worldTransform=h.mat4.create(),e._rebuildLocal=!0,e._rebuildWorld=!0,e._boundsDirty=!0,e._boundingBox=null,e._boundingSphere=null,e}return t=o,n=[{key:"set",value:function(e,t,r){if(!t)return!1;var n=t.rotation,i=(t.euler,t.scale),a=t.radius,u=t.position,c=g(t,["rotation","euler","scale","radius","position"]);return void 0!==a&&(i=2*a),void 0!==i&&(c.scaling=[i,i,i]),n&&(3===n.length?c.rotation=h.quat.fromEuler([0,0,0,1],n):c.rotation=n),u&&(c.translation=u),z(O(o),"set",this).call(this,e,c,r)}},{key:"get",value:function(e,t,r){return e.RebuildTransforms(r),z(O(o),"get",this).call(this,e,t,r)}},{key:"Vector3FromObject",value:function(e){if("r"in e)return new Float32Array([e.r,e.g,e.b]);if("x"in e)return new Float32Array([e.x,e.y,e.z]);throw new Error("Invalid vector3 object")}},{key:"Vector4FromObject",value:function(e){if("r"in e)return new Float32Array([e.r,e.g,e.b,"a"in e.a?e.a:1]);if("x"in e)return new Float32Array([e.x,e.y,e.z,"w"in e?e.w:1]);throw new Error("Invalid vector4 object")}}],(r=[{key:"Initialize",value:function(){this.RebuildTransforms({force:!0,skipUpdate:!0})}},{key:"RebuildBounds",value:function(e){this._boundingBox||(this._boundingBox=h.box3.create(),this._boundingSphere=h.sph3.create(),this._boundsDirty=!0),(e||this._boundsDirty)&&(h.box3.empty(this._boundingBox),h.sph3.empty(this._boundingSphere),this.OnRebuildBounds())}},{key:"OnRebuildBounds",value:function(){this._boundsDirty=!0}},{key:"GetBoundingBox",value:function(e,t){return this.RebuildBounds(t),h.box3.copy(e,this._boundingBox),this._boundsDirty?null:e}},{key:"GetWorldBoundingBox",value:function(e,t){return this.GetBoundingBox(e,t)?(this.GetWorldTransform(C),h.box3.transformMat4(e,e,C)):null}},{key:"GetBoundingSphere",value:function(e,t){return this.RebuildBounds(t),h.sph3.copy(e,this._boundingSphere),this._boundsDirty?null:e}},{key:"GetWorldBoundingSphere",value:function(e,t){return this.GetBoundingSphere(e,t)?(this.GetWorldTransform(C),h.sph3.transformMat4(e,e,C)):null}},{key:"OnWorldModified",value:function(e){return this._onWorldTransformModified=e,this}},{key:"OnValueChanged",value:function(e){e&&e.skipTransforms||this.RebuildTransforms({force:!0,skipUpdate:!0})}},{key:"RebuildTransforms",value:function(e){var t=e&&e.force,r=e&&e.skipUpdate;return(t||this._rebuildLocal)&&(h.mat4.fromRotationTranslationScale(this._localTransform,this.rotation,this.translation,this.scaling),this._localTranspose&&h.mat4.transpose(this._localTranspose,this._localTransform),this._localInverse&&h.mat4.invert(this._localInverse,this._localTransform),this._localInverseTranspose&&(this._localInverse?h.mat4.transpose(this._localInverseTranspose,this._localInverse):(h.mat4.invert(this._localInverseTranspose,this._localTransform),h.mat4.transpose(this._localInverseTranspose,this._localInverseTranspose))),this._rebuildLocal=!1,t=!0),!(!t&&!this._rebuildWorld||(this._parentTransform?h.mat4.multiply(this._worldTransform,this._parentTransform,this._localTransform):h.mat4.copy(this._worldTransform,this._localTransform),this._worldInverse&&h.mat4.invert(this._worldInverse,this._worldTransform),this._worldTranspose&&h.mat4.transpose(this._worldTranspose,this._worldTransform),this._worldInverseTranspose&&(this._worldTranspose?h.mat4.invert(this._worldInverseTranspose,this._worldTranspose):(h.mat4.invert(this._worldInverseTranspose,this._worldTransform),h.mat4.transpose(this._worldInverseTranspose,this._worldInverseTranspose))),this._onWorldTransformModified&&this._onWorldTransformModified(this._worldTransform),this.OnWorldTransformModified&&this.OnWorldTransformModified(this._worldTransform),r||this.UpdateValues({skipTransforms:!0}),this._rebuildWorld=!1,0))}},{key:"SetParentTransform",value:function(e){return!e&&this._parentTransform?(this._parentTransform=null,this._rebuildWorld=!0):this._parentTransform?h.mat4.equals(e,this._parentTransform)||(h.mat4.copy(this._parentTransform,e),this._rebuildWorld=!0):(this._parentTransform=h.mat4.clone(e),this._rebuildWorld=!0),this}},{key:"GetWorldTransform",value:function(e){return this.RebuildTransforms(),h.mat4.copy(e,this._worldTransform)}},{key:"GetWorldInverseTransform",value:function(e){return this.RebuildTransforms(),this._worldInverse?h.mat4.copy(e,this._worldInverse):h.mat4.invert(e,this._worldTransform)}},{key:"GetWorldTransposeTransform",value:function(e){return this.RebuildTransforms(),this._worldTranspose?h.mat4.copy(e,this._worldTranspose):h.mat4.transpose(e,this._worldTransform)}},{key:"GetWorldInverseTransposeTransform",value:function(e){return this.RebuildTransforms(),this._worldInverseTranspose?h.mat4.copy(e,this._worldInverseTranspose):this._worldInverse?h.mat4.transpose(e,this._worldInverse):(h.mat4.invert(e,this._worldTransform),h.mat4.transpose(e,e))}},{key:"DecomposeWorld",value:function(e,t,r){return this.RebuildTransforms(),h.mat4.getRotation(e,this._worldTransform),h.mat4.getTranslation(t,this._worldTransform),h.mat4.getScaling(r,this._worldTransform),this}},{key:"GetWorldRotation",value:function(e){return this.RebuildTransforms(),h.mat4.getRotation(e,this._worldTransform)}},{key:"GetWorldDirection",value:function(e){return this.RebuildTransforms(),h.vec3.set(e,this._worldTransform[8],this._worldTransform[9],this._worldTransform[10]),h.vec3.normalize(e,e)}},{key:"GetWorldEuler",value:function(e){return this.GetWorldRotation(M),h.vec3.euler.fromQuat(e,M)}},{key:"GetWorldEulerInDegrees",value:function(e){return this.GetWorldEuler(e),h.vec3.degrees(e,e)}},{key:"GetWorldAxisAngle",value:function(e){return this.RebuildTransforms(),h.mat4.getRotation(M,this._worldTransform),h.quat.getAxisAngle(e,M)}},{key:"GetWorldTranslation",value:function(e){return this.RebuildTransforms(),h.mat4.getTranslation(e,this._worldTransform)}},{key:"GetWorldScaling",value:function(e){return this.RebuildTransforms(),h.mat4.getScaling(e,this._worldTransform)}},{key:"GetWorldMaxScale",value:function(){return this.GetWorldScaling(P),Math.max(P[0],P[1],P[2])}},{key:"GetWorldToLocal",value:function(e,t){return this.RebuildTransforms(),this._worldInverse?h.vec3.transformMat4(e,t,this._worldInverse):(h.mat4.invert(C,this._worldTransform),h.vec3.transformMat4(e,t,C))}},{key:"Identity",value:function(){return this.scaling.set([1,1,1]),this.rotation.set([0,0,0,1]),this.translation.set([0,0,0]),this._rebuildLocal=!0,this}},{key:"GetTransform",value:function(e){return this.RebuildTransforms(),h.mat4.copy(e,this._localTransform)}},{key:"GetTransposeTransform",value:function(e){return this.RebuildTransforms(),this._localTranspose?h.mat4.copy(e,this._localTranspose):h.mat4.transpose(e,this._localTransform)}},{key:"GetInverseTransform",value:function(e){return this.RebuildTransforms(),this._localInverse?h.mat4.copy(e,this._localInverse):h.mat4.invert(e,this._localTransform)}},{key:"GetInverseTransposeTransform",value:function(e){return this.RebuildTransforms(),this._localInverseTranspose?h.mat4.copy(e,this._localInverseTranspose):this._localInverse?h.mat4.transpose(e,this._localInverse):(h.mat4.invert(e,this._localTransform),h.mat4.transpose(e,e))}},{key:"SetTransform",value:function(e){return h.mat4.getRotation(this.rotation,e),h.mat4.getScaling(this.scaling,e),h.mat4.getTranslation(this.translation,e),this._rebuildLocal=!0,this}},{key:"Compose",value:function(e,t,r){return h.quat.copy(this.rotation,e),h.vec3.copy(this.translation,t),h.vec3.copy(this.scaling,r),this._rebuildLocal=!0,this}},{key:"Decompose",value:function(e,t,r){return this.RebuildTransforms(),h.quat.copy(e,this.rotation),h.vec3.copy(t,this.translation),h.vec3.copy(r,this.scaling),this}},{key:"GetLocalToWorld",value:function(e,t){return this.RebuildTransforms(),h.vec3.transformMat4(e,t,this._worldTransform)}},{key:"GetDirection",value:function(e){return this.RebuildTransforms(),h.vec3.set(e,this._localTransform[8],this._localTransform[9],this._localTransform[10]),h.vec3.normalize(e,e)}},{key:"GetRotation",value:function(e){return this.RebuildTransforms(),h.quat.copy(e,this.rotation)}},{key:"GetEuler",value:function(e){return h.vec3.euler.fromQuat(e,this.GetRotation(M))}},{key:"GetEulerInDegrees",value:function(e){return h.vec3.euler.fromQuat(P,this.GetRotation(M)),h.vec3.degrees(P,P)}},{key:"GetRotationMatrix",value:function(e){return h.mat4.fromRotation(e,this.rotation)}},{key:"SetRotation",value:function(e){return h.quat.copy(this.rotation,e),this._rebuildLocal=!0,this}},{key:"SetRotationFromValues",value:function(e,t,r,n){return h.quat.set(this.rotation,e,t,r,n),this._rebuildLocal=!0,this}},{key:"SetRotationFromAxes",value:function(e,t,r){return h.quat.setAxes(this.rotation,e,t,r),this._rebuildLocal=!0,this}},{key:"SetRotationFromAxisAngle",value:function(e,t){return h.quat.setAxisAngle(this.rotation,e,t),this._rebuildLocal=!0,this}},{key:"SetRotationFromEuler",value:function(e){return h.vec3.euler.getQuat(this.rotation,e),this._rebuildLocal=!0,this}},{key:"SetRotationFromEulerDegrees",value:function(e){return h.vec3.radians(P,e),this.SetRotationFromEuler(P)}},{key:"SetRotationFromEulerValues",value:function(e,t,r){return h.vec3.set(P,e,t,r),this.SetRotationFromEuler(P)}},{key:"SetRotationFromEulerDegreeValues",value:function(e,t,r){return h.vec3.set(P,e,t,r),this.SetRotationFromEulerDegrees(P)}},{key:"SetRotationFromMat4",value:function(e){return this.SetRotation(h.mat4.getRotation(M,e))}},{key:"RotateX",value:function(e){return h.quat.rotateX(this.rotation,this.rotation,e),this._rebuildLocal=!0,this}},{key:"RotateY",value:function(e){return h.quat.rotateY(this.rotation,this.rotation,e),this._rebuildLocal=!0,this}},{key:"RotateZ",value:function(e){return h.quat.rotateZ(this.rotation,this.rotation,e),this._rebuildLocal=!0,this}},{key:"RotateOnAxisAngle",value:function(e,t){return h.quat.setAxisAngle(M,e,t),h.quat.multiply(this.rotation,this.rotation,M),this._rebuildLocal=!0,this}},{key:"GetAxisAngle",value:function(e){return h.quat.getAxisAngle(e,this.rotation)}},{key:"LookAt",value:function(e,t){return this.RebuildTransforms(),h.mat4.copy(C,this._localTransform),t?h.mat4.lookAtGL(C,this.translation,e,h.vec3.Y_AXIS):h.mat4.lookAtGL(C,e,this.translation,h.vec3.Y_AXIS),h.mat4.getRotation(this.rotation,C),this._rebuildLocal=!0,this}},{key:"LookAtWorld",value:function(e,t){return this.GetWorldToLocal(P,e),this.LookAt(P,t)}},{key:"GetTranslation",value:function(e){return this.RebuildTransforms(),h.vec3.copy(e,this.translation)}},{key:"SetTranslation",value:function(e){return h.vec3.copy(this.translation,e),this._rebuildLocal=!0,this}},{key:"SetTranslationFromValues",value:function(e,t,r){return h.vec3.set(this.translation,e,t,r),this._rebuildLocal=!0,this}},{key:"SetTranslationFromMat4",value:function(e){return h.mat4.getTranslation(this.translation,e),this._rebuildLocal=!0,this}},{key:"TranslateOnAxis",value:function(e,t){return h.vec3.transformQuat(P,e,this.rotation),h.vec3.scaleAndAdd(this.translation,this.translation,P,t),this._rebuildLocal=!0,this}},{key:"TranslateX",value:function(e){return this.TranslateOnAxis(h.vec3.X_AXIS,e)}},{key:"TranslateY",value:function(e){return this.TranslateOnAxis(h.vec3.Y_AXIS,e)}},{key:"TranslateZ",value:function(e){return this.TranslateOnAxis(h.vec3.Z_AXIS,e)}},{key:"GetScale",value:function(e){return this.RebuildTransforms(),h.vec3.copy(e,this.scaling)}},{key:"GetMaxScale",value:function(){return Math.max(this.scaling[0],this.scaling[1],this.scaling[2])}},{key:"SetScale",value:function(e){return h.vec3.copy(this.scaling,e),this._rebuildLocal=!0,this}},{key:"SetScaleFromValues",value:function(e,t,r){return h.vec3.set(P,e,t,r),this.SetScale(P)}},{key:"SetScaleX",value:function(e){return this.SetScaleFromValues(e,this.scaling[1],this.scaling[2])}},{key:"SetScaleY",value:function(e){return this.SetScaleFromValues(this.scaling[0],e,this.scaling[2])}},{key:"SetScaleZ",value:function(e){return this.SetScaleFromValues(this.scaling[0],this.scaling[1],e)}},{key:"SetScaleUniform",value:function(e){return this.SetScaleFromValues(e,e,e)}},{key:"SetScaleFromMat4",value:function(e){return h.mat4.getScaling(this.scaling,e),this._rebuildLocal=!0,this}},{key:"Scale",value:function(e){return h.vec3.multiply(this.scaling,this.scaling,e),this._rebuildLocal=!0,this}},{key:"ScaleValues",value:function(e,t,r){return h.vec3.set(P,e,t,r),this.Scale(P)}},{key:"ScaleMat4",value:function(e){return h.mat4.getScaling(P,e),this.Scale(P)}},{key:"ScaleUniform",value:function(e){return this.ScaleValues(e,e,e)}},{key:"ScaleX",value:function(e){return this.ScaleValues(e,1,1)}},{key:"ScaleY",value:function(e){return this.ScaleValues(1,e,1)}},{key:"ScaleZ",value:function(e){return this.ScaleValues(1,1,e)}}])&&_(t.prototype,r),n&&_(t,n),o}(b.meta.Model),y.global={vec3_0:P,vec3_1:D,vec3_2:A,quat_0:M,mat4_0:C},s=R((l=m).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=R(l.prototype,"rotation",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.quat.create()}}),p=R(l.prototype,"translation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.vec3.create()}}),d=R(l.prototype,"scaling",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.vec3.fromValues(1,1,1)}}),c=l))||c)},"./core/batch/Tw2BatchAccumulator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BatchAccumulator",(function(){return a}));var n=r("./global/index.js");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(this,e),this.batches=[],this._sortMethod=null,this._sortMethod=t}var t,r,a;return t=e,(r=[{key:"Commit",value:function(e){-1===this.batches.indexOf(e)&&this.batches.push(e)}},{key:"CommitFromArray",value:function(e){for(var t=0;t<e.length;t++)this.Commit(e[t])}},{key:"Clear",value:function(){return this.batches.splice(0)}},{key:"Render",value:function(t){this._sortMethod&&this.batches.sort(this._sortMethod);for(var r=0;r<this.batches.length;++r)this.batches[r]instanceof e?this.batches[r].Render(t):(this.batches[r].renderMode!==n.device.RM_ANY&&n.device.SetStandardStates(this.batches[r].renderMode),n.device.perObjectData=this.batches[r].perObjectData,this.batches[r].Commit(t))}},{key:"length",get:function(){return this.batches.length}}])&&o(t.prototype,r),a&&o(t,a),e}()},"./core/batch/Tw2BatchAccumulator2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BatchAccumulator2",(function(){return a}));var n=r("./global/index.js");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(this,e),this.batches=[],this._reroute=!1,this._reroutedBatches=[],this._sortMethod=null,this._sortMethod=t}var t,r,a;return t=e,(r=[{key:"Commit",value:function(e){if(!this._reroute)throw new ReferenceError("Tw2BatchAccumulator2.Commit cannot be called directly");-1===this._reroutedBatches.indexOf(e)&&this._reroutedBatches.push(e)}},{key:"GetObjectBatches",value:function(e,t,r){var n=!1;if(this._reroutedBatches.splice(0),e&&e.GetBatches){this._rerouted=!0,e.GetBatches(t,this),this._rerouted=!1;for(var i=0;i<this._reroutedBatches.length;i++){var o=this._reroutedBatches[i];if(r=r||o.techniqueOverride){if(!o.HasTechnique(r)){this._reroutedBatches.splice(i,0),i--;continue}this._reroutedBatches[i].techniqueOverride=r}o.root=e,this.batches.push(o),n=!0}}return n}},{key:"Clear",value:function(){return this._reroutedBatches.splice(0),this.batches.splice(0)}},{key:"Render",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._sortMethod&&this.batches.sort(this._sortMethod);for(var r=0;r<this.batches.length;++r){var i=this.batches[r];i.renderMode!==n.device.RM_ANY&&n.device.SetStandardStates(i.renderMode),n.device.perObjectData=i.perObjectData,i.Commit(e)&&i.root&&-1===t.indexOf(i.root)&&t.push(i.root)}return t}},{key:"length",get:function(){return this.batches.length}}])&&o(t.prototype,r),a&&o(t,a),e}()},"./core/batch/Tw2ForwardingRenderBatch.js":function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t),r.d(t,"Tw2ForwardingRenderBatch",(function(){return s}));var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,r,n,c=u(l);function l(){var e;i(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=c.call.apply(c,[this].concat(r))).geometryProvider=null,e.effect=null,e}return t=l,(r=[{key:"Commit",value:function(e){return!!this.geometryProvider&&this.geometryProvider.Render(this,this.techniqueOverride||e)}},{key:"HasTechnique",value:function(e){return this.effect&&this.effect.HasTechnique(e)}}])&&o(t.prototype,r),n&&o(t,n),l}(r("./core/batch/Tw2RenderBatch.js").Tw2RenderBatch)},"./core/batch/Tw2GeometryBatch.js":function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t),r.d(t,"Tw2GeometryBatch",(function(){return s}));var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,r,n,c=u(l);function l(){var e;i(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=c.call.apply(c,[this].concat(r))).geometryRes=null,e.meshIx=0,e.start=0,e.count=1,e.effect=null,e}return t=l,(r=[{key:"Commit",value:function(e){return!(!this.geometryRes||!this.effect)&&this.geometryRes.RenderAreas(this.meshIx,this.start,this.count,this.effect,this.techniqueOverride||e)}},{key:"HasTechnique",value:function(e){return this.effect&&this.effect.HasTechnique(e)}}])&&o(t.prototype,r),n&&o(t,n),l}(r("./core/batch/Tw2RenderBatch.js").Tw2RenderBatch)},"./core/batch/Tw2GeometryLineBatch.js":function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t),r.d(t,"Tw2GeometryLineBatch",(function(){return s}));var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,r,n,c=u(l);function l(){return i(this,l),c.apply(this,arguments)}return t=l,(r=[{key:"Commit",value:function(e){return!(!this.geometryRes||!this.effect)&&this.geometryRes.RenderLines(this.meshIx,this.start,this.count,this.effect,this.techniqueOverride||e)}}])&&o(t.prototype,r),n&&o(t,n),l}(r("./core/batch/Tw2GeometryBatch.js").Tw2GeometryBatch)},"./core/batch/Tw2InstancedMeshBatch.js":function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t),r.d(t,"Tw2InstancedMeshBatch",(function(){return s}));var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,r,n,c=u(l);function l(){var e;i(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=c.call.apply(c,[this].concat(r))).instanceMesh=null,e}return t=l,(r=[{key:"Commit",value:function(e){return!(!this.instanceMesh||!this.effect)&&this.instanceMesh.RenderAreas(this.meshIx,this.start,this.count,this.effect,this.techniqueOverride||e)}}])&&o(t.prototype,r),n&&o(t,n),l}(r("./core/batch/Tw2GeometryBatch.js").Tw2GeometryBatch)},"./core/batch/Tw2RenderBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RenderBatch",(function(){return o}));var n=r("./global/constant/index.js");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderMode=n.RM_ANY,this.perObjectData=null,this.techniqueOverride=null}var t,r,o;return t=e,(r=[{key:"Commit",value:function(e){return!1}},{key:"HasTechnique",value:function(e){return!1}}])&&i(t.prototype,r),o&&i(t,o),e}()},"./core/batch/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/batch/Tw2BatchAccumulator.js");r.d(t,"Tw2BatchAccumulator",(function(){return n.Tw2BatchAccumulator}));var i=r("./core/batch/Tw2BatchAccumulator2.js");r.d(t,"Tw2BatchAccumulator2",(function(){return i.Tw2BatchAccumulator2}));var o=r("./core/batch/Tw2ForwardingRenderBatch.js");r.d(t,"Tw2ForwardingRenderBatch",(function(){return o.Tw2ForwardingRenderBatch}));var a=r("./core/batch/Tw2GeometryBatch.js");r.d(t,"Tw2GeometryBatch",(function(){return a.Tw2GeometryBatch}));var u=r("./core/batch/Tw2GeometryLineBatch.js");r.d(t,"Tw2GeometryLineBatch",(function(){return u.Tw2GeometryLineBatch}));var c=r("./core/batch/Tw2RenderBatch.js");r.d(t,"Tw2RenderBatch",(function(){return c.Tw2RenderBatch}));var l=r("./core/batch/Tw2InstancedMeshBatch.js");r.d(t,"Tw2InstancedMeshBatch",(function(){return l.Tw2InstancedMeshBatch}))},"./core/data/Tw2PerObjectData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PerObjectData",(function(){return o}));var n=r("./core/data/Tw2RawData.js");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vs=null,this.ps=null,this.ffe=null}var t,r,o;return t=e,o=[{key:"from",value:function(t,r){var i=new e;return t&&(t.ps&&(i.ps=n.Tw2RawData.from(t.ps,r)),t.vs&&(i.vs=n.Tw2RawData.from(t.vs,r)),t.ffe&&(i.ffe=n.Tw2RawData.from(t.ffe,r))),i}}],(r=null)&&i(t.prototype,r),o&&i(t,o),e}()},"./core/data/Tw2RawData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RawData",(function(){return f})),r.d(t,"ErrRawDataElementNotFound",(function(){return p}));var n=r("./core/Tw2Error.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(){l(this,e),this.data=null,this.elements={},this.elementsSorted=[],this._nextOffset=0}var t,r,i;return t=e,i=[{key:"from",value:function(t,r){var n=new e;if(t){for(var i=0;i<t.length;i++)n.Declare(t[i][0],t[i][1]);r&&r.skipUpdate||n.Create()}return n}}],(r=[{key:"Has",value:function(e){return e in this.elements}},{key:"Set",value:function(e,t){var r=this.elements[e];if(!r)throw new p({name:e});for(var n=0;n<r.size;n++)this.data[n+r.offset]=t[n]}},{key:"SetIndex",value:function(e,t,r){var i=this.elements[e];if(!i)throw new p({name:e});if(t<0||t>=i.size)throw new n.ErrIndexBounds;this.data[t+i.offset]=r}},{key:"Get",value:function(e){if(!this.elements[e])throw new p({name:e});return this.elements[e].array}},{key:"FindElementFromIndex",value:function(e){if(e>=0&&e<this._nextOffset)for(var t in this.elements)if(this.elements.hasOwnProperty(t)){var r=this.elements[t],n=r.offset,i=r.size;if(e<n||e>n+i-1)continue;return this.elements[t]}return null}},{key:"Declare",value:function(e,t){var r="number"!=typeof t,n=r?t.length:t,i=r?t:null;this.elements[e]={name:e,offset:this._nextOffset,array:null,size:n,value:i},this._nextOffset+=n,this.elementsSorted.push(this.elements[e]),this.elementsSorted.sort((function(e,t){return e.offset-t.offset}))}},{key:"Create",value:function(){for(var e in this.data=new Float32Array(this._nextOffset),this.elements)if(this.elements.hasOwnProperty(e)){var t=this.elements[e];if(t.array=this.data.subarray(t.offset,t.offset+t.size),t.value){for(var r=0;r<t.size;r++)t.array[r]=t.value[r];Reflect.deleteProperty(t,"value")}}}}])&&s(t.prototype,r),i&&s(t,i),e}(),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,e);var t=a(r);function r(e){return l(this,r),t.call(this,e,"Raw data element not found (%name%)")}return r}(n.Tw2Error)},"./core/data/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/data/Tw2PerObjectData.js");r.d(t,"Tw2PerObjectData",(function(){return n.Tw2PerObjectData}));var i=r("./core/data/Tw2RawData.js");r.d(t,"Tw2RawData",(function(){return i.Tw2RawData})),r.d(t,"ErrRawDataElementNotFound",(function(){return i.ErrRawDataElementNotFound}))},"./core/engine/Tw2Device.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Device",(function(){return _})),r.d(t,"ErrWebglContext",(function(){return z}));var n=r("./global/math/index.js"),i=r("./global/utils/index.js"),o=r("./core/Tw2Error.js"),a=r("./core/Tw2EventEmitter.js"),u=r("./core/mesh/Tw2Effect.js"),c=r("./core/vertex/Tw2VertexDeclaration.js"),l=r("./global/constant/index.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,x,_=function(e){m(r,e);var t=h(r);function r(e){var i;return p(this,r),(i=t.call(this)).name="Device",i.gl=null,i.canvas2d=null,i.autoClearCanvas2dPerFrame=!0,i.autoClearCanvas2dOnResize=!0,i.dt=0,i.fps=0,i.frameCounter=0,i.startTime=null,i.currentTime=null,i.previousTime=null,i.eyePosition=n.vec3.create(),i.targetResolution=n.vec4.create(),i.world=n.mat4.create(),i.view=n.mat4.create(),i.viewInverse=n.mat4.create(),i.viewTranspose=n.mat4.create(),i.projection=n.mat4.create(),i.projectionInverse=n.mat4.create(),i.projectionTranspose=n.mat4.create(),i.viewProjection=n.mat4.create(),i.viewProjectionTranspose=n.mat4.create(),i.viewProjectionInverse=n.mat4.create(),i._viewProjectionDirty=!0,i.viewportWidth=0,i.viewportHeight=0,i.viewportAspect=0,i.viewportPixelRatio="devicePixelRatio"in window?window.devicePixelRatio:1,i.effectDir="/effect.gles2/",i.mipLevelSkipCount=0,i.shaderModel="hi",i.enableAnisotropicFiltering=!0,i.enableAntialiasing=!0,i.enableWebgl2=!0,i.enableWebxr=!0,i.alphaBlendBackBuffer=!1,i.antialiasing=!0,i.msaaSamples=0,i.wrapModes=[],i.perFrameVSData=null,i.perFramePSData=null,i.perFrameCustomVSData=null,i.perFrameCustomPSData=null,i.pickDepth=16,i._extensions={},i._alphaBlendState=null,i._alphaTestState=null,i._depthOffsetState=null,i._shadowStateBuffer=null,i._shadowHandles=null,i._quadBuffer=null,i._quadDecl=null,i._cameraQuadBuffer=null,i._currentRenderMode=l.RM_ANY,i._fallbackCube=null,i._fallbackTexture=null,i._blitEffect=null,i._Date=Date,i._fpsFrameCount=0,i._fpsPreviousTime=0,i._glParams={alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,powerPreference:"default",failIfMajorPerformanceCaveat:!1,descynchronized:!1},i.tw2=e,i.startTime=i.now,i.currentTime=i.startTime,i}return y(r,[{key:"glVersion",get:function(){if(!this.gl)throw new z({message:"No webgl context"});return this.gl instanceof WebGLRenderingContext?1:2}},{key:"canvas",get:function(){return this.gl?this.gl.canvas:null}}]),y(r,[{key:"SetShadowHandles",value:function(e){this._shadowHandles=e}},{key:"Register",value:function(e){if(e){if(this.gl)throw new Error("Setting device options after gl creation is not supported");"glParams"in e&&Object(i.assignIfExists)(this._glParams,e.glParams,["alpha","depth","stencil","antialias","premultipliedAlpha","preserveDrawingBuffer","powerPreference","failIfMajorPerformanceCaveat","descynchronized"]),"events"in e&&this.AddEvents(e.events),"performanceClock"in e&&(e.performance&&"performance"in window?this._Date=performance:this._Date=Date),"textureQuality"in e&&(this.mipLevelSkipCount=e.textureQuality),"shaderQuality"in e&&(this.shaderModel=e.shaderQuality),"anisotropicFilter"in e&&(this.enableAnisotropicFiltering=e.anisotropicFilter),"antialiasing"in e&&(this.enableAntialiasing=e.antialiasing),"webgl2"in e&&(this.enableWebgl2=e.webgl2),"webxr"in e&&(this.enableWebxr=e.webxr),Object(i.assignIfExists)(this,e,["autoClearCanvas2dPerFrame","autoClearCanvas2dOnResize"])}}},{key:"GetGLParams",value:function(){return this.gl?Object.assign({},this._glParams):null}},{key:"Create",value:function(){var e,t,n,o=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=a.canvas,s=a.canvas3d,p=a.canvas2d,d=a.glParams;this.gl=null,this.effectDir="/effect.gles2/",u||(u=s),d&&this.Register({glParams:d}),this.enableAntialiasing||(this._glParams.antialias=!1);var y=Object.assign({},this._glParams,{webgl2:this.enableWebgl2,xrCompatible:this.enableWebxr});try{this.gl=r.CreateContext(y,u),this.EmitEvent("context_created",this)}catch(e){throw this.EmitEvent("context_failed",this),e}var m=this.gl;if(this.tw2.Debug({name:"Device",message:"Webgl".concat(this.glVersion," context created")}),p)try{this.canvas2d=Object(i.isString)(p)?document.getElementById(p):p}catch(e){throw new Error("Invalid 2d canvas")}var b=function(){return!1},h=function(){return!0};if(1===this.glVersion){y.depth&&this.GetExtension("WEBGL_depth_texture"),this.GetExtension("OES_standard_derivatives"),this.GetExtension("OES_element_index_uint"),this.GetExtension("OES_texture_float"),this.GetExtension("EXT_shader_texture_lod");var v=this.GetExtension("ANGLE_instanced_arrays");m.drawElementsInstanced=v?v.drawElementsInstancedANGLE.bind(v):b,m.drawArraysInstanced=v?v.drawArraysInstancedANGLE.bind(v):b,m.vertexAttribDivisor=v?v.vertexAttribDivisorANGLE.bind(v):b,m.hasInstancedArrays=v?h:b}else m.hasInstancedArrays=h;var g=this.GetExtension("EXT_texture_filter_anisotropic");g&&(this.enableAnisotropicFiltering?g.maxAnisotropy=m.getParameter(g.MAX_TEXTURE_MAX_ANISOTROPY_EXT):g.maxAnisotropy=0);var w=this.GetExtension("CCP_shader_binary");if(w){var x=m.getParameter(this.gl.RENDERER),_=x.match(/Mali-(\w+).*/);_&&(this.effectDir="/effect.gles2.mali"+_[1]+"/")}this.alphaBlendBackBuffer=y.alpha,this.msaaSamples=this.gl.getParameter(this.gl.SAMPLES),this.antialiasing=this.msaaSamples>1,this.Resize(!0);var z=[1,1,0,1,1,1,-1,1,0,1,0,1,1,-1,0,1,1,0,-1,-1,0,1,0,0];this._quadBuffer=m.createBuffer(),m.bindBuffer(m.ARRAY_BUFFER,this._quadBuffer),m.bufferData(m.ARRAY_BUFFER,new Float32Array(z),m.STATIC_DRAW),this._cameraQuadBuffer=m.createBuffer(),this._quadDecl=c.Tw2VertexDeclaration.from([{usage:"POSITION",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:0,elements:2}]),this._alphaBlendState={dirty:!1,states:(e={},f(e,l.RS_SRCBLEND,l.BLEND_SRCALPHA),f(e,l.RS_DESTBLEND,l.BLEND_INVSRCALPHA),f(e,l.RS_BLENDOP,l.BLENDOP_ADD),f(e,l.RS_SEPARATEALPHABLENDENABLE,0),f(e,l.RS_BLENDOPALPHA,l.BLENDOP_ADD),f(e,l.RS_SRCBLENDALPHA,l.BLEND_SRCALPHA),f(e,l.RS_DESTBLENDALPHA,l.BLEND_INVSRCALPHA),e)},this._alphaTestState={dirty:!1,states:(t={},f(t,l.RS_ALPHATESTENABLE,0),f(t,l.RS_ALPHAREF,-1),f(t,l.RS_ALPHAFUNC,l.CMP_GREATER),f(t,l.RS_CLIPPING,0),f(t,l.RS_CLIPPLANEENABLE,0),t)},this._depthOffsetState={dirty:!1,states:(n={},f(n,l.RS_SLOPESCALEDEPTHBIAS,0),f(n,l.RS_DEPTHBIAS,0),n)},this._shadowStateBuffer=new Float32Array(24),this.canvas.addEventListener("webglcontextlost",(function(){o._contextLost=!0,o.EmitEvent("context_lost",o)})),this.canvas.addEventListener("webglcontextrestored",(function(){o._contextLost=!1,o.EmitEvent("context_restored",o)}))}},{key:"SetPixelRatio",value:function(e){this.viewportPixelRatio!==e&&(this.viewportPixelRatio=e,this.Resize())}},{key:"FromEffectPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fx";return(e=e.substr(0,e.lastIndexOf(".")).replace(this.effectDir,"/effect/")+"."+t).toLowerCase()}},{key:"ToEffectPath",value:function(e){return(e=e?e.substr(0,e.lastIndexOf(".")).replace("/effect/",this.effectDir)+".sm_"+this.shaderModel:"").toLowerCase()}},{key:"Resize",value:function(e,t){var r=Math.floor(this.canvas.clientWidth*this.viewportPixelRatio),n=Math.floor(this.canvas.clientHeight*this.viewportPixelRatio);return!(!e&&r===this.viewportWidth&&n===this.viewportHeight)&&(this.viewportWidth=this.canvas.width=r,this.viewportHeight=this.canvas.height=n,this.viewportAspect=this.viewportWidth/this.viewportHeight,this.tw2.variables.SetValue("ViewportSize",[this.viewportWidth,this.viewportHeight,this.viewportWidth,this.viewportHeight]),this.EmitEvent("resized",this,{width:this.viewportWidth,height:this.viewportHeight,aspect:this.viewportAspect}),this.canvas2d&&(this.canvas2d.width=r,this.canvas2d.height=n,!t&&this.autoClearCanvas2dOnResize&&this.ClearCanvas2d()),!0)}},{key:"ClearCanvas2d",value:function(e){var t=this.canvas2d.getContext("2d");t.clearRect(0,0,this.viewportWidth,this.viewportHeight),e||this.EmitEvent("canvas2d_cleared",t)}},{key:"Tick",value:function(){var e=this.Resize(!1,!0),t=this.now,r=null===this.previousTime?t:this.previousTime;this.currentTime=.001*(t-this.startTime),this.dt=.001*(t-r),this.previousTime=t,this.tw2.variables.SetValue("Time",[this.currentTime,this.currentTime-Math.floor(this.currentTime),this.frameCounter,.001*r]),this._fpsFrameCount++,t>=this._fpsPreviousTime+1e3&&(this.fps=Math.floor(1e3*this._fpsFrameCount/(t-this._fpsPreviousTime)),this._fpsFrameCount=0,this._fpsPreviousTime=t),this.frameCounter++,this.canvas2d&&(this.autoClearCanvas2dPerFrame||e&&this.autoClearCanvas2dOnResize)&&this.ClearCanvas2d()}},{key:"SetWorld",value:function(e){n.mat4.copy(this.world,e)}},{key:"SetView",value:function(e,t){this._viewProjectionDirty=!0,n.mat4.copy(this.view,e),n.mat4.invert(this.viewInverse,this.view),n.mat4.transpose(this.viewTranspose,this.view),n.mat4.getTranslation(this.eyePosition,this.viewInverse),t&&this.UpdateViewProjection()}},{key:"SetProjection",value:function(e,t){this._viewProjectionDirty=!0,n.mat4.copy(this.projection,e),n.mat4.transpose(this.projectionTranspose,this.projection),n.mat4.invert(this.projectionInverse,this.projection),this.GetTargetResolution(this.targetResolution),t&&this.UpdateViewProjection()}},{key:"UpdateViewProjection",value:function(e){(this._viewProjectionDirty||e)&&(n.mat4.multiply(this.viewProjection,this.projection,this.view),n.mat4.transpose(this.viewProjectionTranspose,this.viewProjection),n.mat4.invert(this.viewProjectionInverse,this.viewProjection),this.tw2.variables.SetValue("ViewProjectionMat",this.viewProjection),this._viewProjectionDirty=!1)}},{key:"GetTargetResolution",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.vec4.create(),t=this.projection[0]?this.projection[5]/this.projection[0]:0,r=1;t>1.6&&(r=t/1.6);var i=2*Math.atan(r/this.projection[5]);return e[0]=this.viewportWidth,e[1]=this.viewportHeight,e[2]=i,e[3]=i*t,e}},{key:"GetEyePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.vec3.create();return n.vec3.copy(e,this.eyePosition)}},{key:"IsAlphaTestEnabled",value:function(){return this._alphaTestState.states[l.RS_ALPHATESTENABLE]}},{key:"IsFrameBufferComplete",value:function(e){return this.gl.checkFramebufferStatus(e)===this.gl.FRAMEBUFFER_COMPLETE}},{key:"GetExtension",value:function(e){if(!(e in this._extensions)){for(var t,r=0;r<l.VendorWebglPrefixes.length&&!(t=this.gl.getExtension(l.VendorWebglPrefixes[r]+e));r++)t=null;this._extensions[e]=t}return this._extensions[e]}},{key:"GetFallbackTexture",value:function(){return this._fallbackTexture||(this._fallbackTexture=this.CreateSolidTexture()),this._fallbackTexture}},{key:"GetFallbackCubeMap",value:function(){return this._fallbackCube||(this._fallbackCube=this.CreateSolidCube()),this._fallbackCube}},{key:"CreateSolidTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],t=this.gl,r=this.gl.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(e)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,null),r}},{key:"CreateSolidCube",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],t=this.gl,r=this.gl.createTexture();t.bindTexture(t.TEXTURE_CUBE_MAP,r);for(var n=0;n<6;++n)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(e));return t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_CUBE_MAP,null),r}},{key:"RenderFullScreenQuad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultTechnique;if(!e||!e.IsGood())return!1;var r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,this._quadBuffer);for(var n=0;n<e.GetPassCount(t);++n){if(e.ApplyPass(t,n),!this._quadDecl.SetDeclaration(this,e.GetPassInput(t,n),24))return!1;this.ApplyShadowState(),r.drawArrays(r.TRIANGLE_STRIP,0,4)}return!0}},{key:"RenderTexture",value:function(e){return null===this._blitEffect&&(this._blitEffect=u.Tw2Effect.from({effectFilePath:"cdn:/graphics/effect/managed/space/system/blit.fx",textures:{BlitSource:""}})),this._blitEffect.parameters.BlitSource.AttachTextureRes(e),this.RenderFullScreenQuad(this._blitEffect)}},{key:"RenderCameraSpaceQuad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultTechnique;if(!e||!e.IsGood())return!1;for(var r=new Float32Array([1,1,0,1,1,1,-1,1,0,1,0,1,1,-1,0,1,1,0,-1,-1,0,1,0,0]),i=this.projectionInverse,o=0;o<4;++o){var a=r.subarray(6*o,6*o+4);n.vec4.transformMat4(a,a,i),n.vec3.scale(a,a,1/a[3]),a[3]=1}var u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,this._cameraQuadBuffer),u.bufferData(u.ARRAY_BUFFER,r,u.STATIC_DRAW);for(var c=0;c<e.GetPassCount(t);++c){if(e.ApplyPass(t,c),!this._quadDecl.SetDeclaration(this,e.GetPassInput(t,c),24))return!1;this.ApplyShadowState(),u.drawArrays(u.TRIANGLE_STRIP,0,4)}return!0}},{key:"SetRenderState",value:function(e,t){var r=this.gl;switch(this._currentRenderMode=l.RM_ANY,e){case l.RS_ZENABLE:return void(t?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST));case l.RS_ZWRITEENABLE:return void r.depthMask(!!t);case l.RS_ALPHATESTENABLE:case l.RS_ALPHAREF:case l.RS_ALPHAFUNC:case l.RS_CLIPPING:case l.RS_CLIPPLANEENABLE:return void(this._alphaTestState[e]!==t&&(this._alphaTestState.states[e]=t,this._alphaTestState.dirty=!0));case l.RS_SRCBLEND:case l.RS_DESTBLEND:case l.RS_BLENDOP:case l.RS_SEPARATEALPHABLENDENABLE:case l.RS_BLENDOPALPHA:case l.RS_SRCBLENDALPHA:case l.RS_DESTBLENDALPHA:return void(this._alphaBlendState[e]!==t&&(this._alphaBlendState.states[e]=t,this._alphaBlendState.dirty=!0));case l.RS_CULLMODE:switch(t){case l.CULL_NONE:return void r.disable(r.CULL_FACE);case l.CULL_CW:return r.enable(r.CULL_FACE),void r.cullFace(r.FRONT);case l.CULL_CCW:return r.enable(r.CULL_FACE),void r.cullFace(r.BACK)}return;case l.RS_ZFUNC:return void r.depthFunc(512+t-1);case l.RS_ALPHABLENDENABLE:return void(t?r.enable(r.BLEND):r.disable(r.BLEND));case l.RS_COLORWRITEENABLE:return void r.colorMask(0!=(1&t),0!=(2&t),0!=(4&t),0!=(8&t));case l.RS_SCISSORTESTENABLE:return void(t?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST));case l.RS_SLOPESCALEDEPTHBIAS:case l.RS_DEPTHBIAS:return t=n.num.dwordToFloat(t),void(this._depthOffsetState[e]!==t&&(this._depthOffsetState.states[e]=t,this._depthOffsetState.dirty=!0))}}},{key:"ApplyShadowState",value:function(){var e,t,r,n=this.gl;if(this._alphaBlendState.dirty){var i=n.FUNC_ADD;this._alphaBlendState.states[l.RS_BLENDOP]===l.BLENDOP_SUBTRACT?i=n.FUNC_SUBTRACT:this._alphaBlendState.states[l.RS_BLENDOP]===l.BLENDOP_REVSUBTRACT&&(i=n.FUNC_REVERSE_SUBTRACT);var o=l.BlendTable[this._alphaBlendState.states[l.RS_SRCBLEND]],a=l.BlendTable[this._alphaBlendState.states[l.RS_DESTBLEND]];if(this._alphaBlendState.states[l.RS_SEPARATEALPHABLENDENABLE]){var u=n.FUNC_ADD;this._alphaBlendState.states[l.RS_BLENDOP]===l.BLENDOP_SUBTRACT?u=n.FUNC_SUBTRACT:this._alphaBlendState.states[l.RS_BLENDOP]===l.BLENDOP_REVSUBTRACT&&(u=n.FUNC_REVERSE_SUBTRACT);var c=l.BlendTable[this._alphaBlendState.states[l.RS_SRCBLENDALPHA]],s=l.BlendTable[this._alphaBlendState.states[l.RS_DESTBLENDALPHA]];n.blendEquationSeparate(i,u),n.blendFuncSeparate(o,a,c,s)}else n.blendEquation(i),n.blendFunc(o,a);this._alphaBlendState.dirty=!1}if(this._depthOffsetState.dirty&&(n.polygonOffset(this._depthOffsetState.states[l.RS_SLOPESCALEDEPTHBIAS],this._depthOffsetState.states[l.RS_DEPTHBIAS]),this._depthOffsetState.dirty=!1),this._shadowHandles&&this._alphaTestState.states[l.RS_ALPHATESTENABLE]){switch(this._alphaTestState.states[l.RS_ALPHAFUNC]){case l.CMP_NEVER:e=0,t=1,r=-256;break;case l.CMP_LESS:e=0,t=-1,r=this._alphaTestState.states[l.RS_ALPHAREF]-1;break;case l.CMP_EQUAL:e=1,t=0,r=this._alphaTestState.states[l.RS_ALPHAREF];break;case l.CMP_LEQUAL:e=0,t=-1,r=this._alphaTestState.states[l.RS_ALPHAREF];break;case l.CMP_GREATER:e=0,t=1,r=-this._alphaTestState.states[l.RS_ALPHAREF]-1;break;case l.CMP_GREATEREQUAL:e=0,t=1,r=-this._alphaTestState.states[l.RS_ALPHAREF];break;default:e=0,t=0,r=1}n.uniform4f(this._shadowHandles.shadowStateInt,t,r,e,0)}}},{key:"SetStandardStates",value:function(e){if(this._currentRenderMode!==e){switch(this.gl.frontFace(this.gl.CW),e){case l.RM_DEPTH:case l.RM_OPAQUE:case l.RM_PICKABLE:this.SetRenderState(l.RS_ALPHABLENDENABLE,!1),this.SetRenderState(l.RS_ALPHATESTENABLE,!1),this.SetRenderState(l.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(l.RS_ZENABLE,!0),this.SetRenderState(l.RS_ZWRITEENABLE,!0),this.SetRenderState(l.RS_ZFUNC,l.CMP_LEQUAL),this.SetRenderState(l.RS_CULLMODE,l.CULL_CW),this.SetRenderState(l.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(l.RS_DEPTHBIAS,0),this.SetRenderState(l.RS_COLORWRITEENABLE,15);break;case l.RM_DECAL:this.SetRenderState(l.RS_ALPHATESTENABLE,!1),this.SetRenderState(l.RS_ALPHABLENDENABLE,!0),this.SetRenderState(l.RS_SRCBLEND,l.BLEND_SRCALPHA),this.SetRenderState(l.RS_DESTBLEND,l.BLEND_INVSRCALPHA),this.SetRenderState(l.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(l.RS_ALPHAFUNC,l.CMP_GREATER),this.SetRenderState(l.RS_ALPHAREF,127),this.SetRenderState(l.RS_ZENABLE,!0),this.SetRenderState(l.RS_ZWRITEENABLE,!0),this.SetRenderState(l.RS_ZFUNC,l.CMP_LEQUAL),this.SetRenderState(l.RS_CULLMODE,l.CULL_CW),this.SetRenderState(l.RS_BLENDOP,l.BLENDOP_ADD),this.SetRenderState(l.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(l.RS_DEPTHBIAS,0),this.SetRenderState(l.RS_COLORWRITEENABLE,15);break;case l.RM_DISTORTION:case l.RM_TRANSPARENT:this.SetRenderState(l.RS_CULLMODE,l.CULL_CW),this.SetRenderState(l.RS_ALPHATESTENABLE,!1),this.SetRenderState(l.RS_ALPHABLENDENABLE,!0),this.SetRenderState(l.RS_SRCBLEND,l.BLEND_SRCALPHA),this.SetRenderState(l.RS_DESTBLEND,l.BLEND_INVSRCALPHA),this.SetRenderState(l.RS_BLENDOP,l.BLENDOP_ADD),this.SetRenderState(l.RS_ZENABLE,!0),this.SetRenderState(l.RS_ZWRITEENABLE,!1),this.SetRenderState(l.RS_ZFUNC,l.CMP_LEQUAL),this.SetRenderState(l.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(l.RS_DEPTHBIAS,0),this.SetRenderState(l.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(l.RS_COLORWRITEENABLE,15);break;case l.RM_ADDITIVE:this.SetRenderState(l.RS_CULLMODE,l.CULL_NONE),this.SetRenderState(l.RS_ALPHABLENDENABLE,!0),this.SetRenderState(l.RS_SRCBLEND,l.BLEND_ONE),this.SetRenderState(l.RS_DESTBLEND,l.BLEND_ONE),this.SetRenderState(l.RS_BLENDOP,l.BLENDOP_ADD),this.SetRenderState(l.RS_ZENABLE,!0),this.SetRenderState(l.RS_ZWRITEENABLE,!1),this.SetRenderState(l.RS_ZFUNC,l.CMP_LEQUAL),this.SetRenderState(l.RS_ALPHATESTENABLE,!1),this.SetRenderState(l.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(l.RS_DEPTHBIAS,0),this.SetRenderState(l.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(l.RS_COLORWRITEENABLE,15);break;case l.RM_FULLSCREEN:this.SetRenderState(l.RS_ALPHABLENDENABLE,!1),this.SetRenderState(l.RS_ALPHATESTENABLE,!1),this.SetRenderState(l.RS_CULLMODE,l.CULL_NONE),this.SetRenderState(l.RS_ZENABLE,!1),this.SetRenderState(l.RS_ZWRITEENABLE,!1),this.SetRenderState(l.RS_ZFUNC,l.CMP_ALWAYS),this.SetRenderState(l.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(l.RS_DEPTHBIAS,0),this.SetRenderState(l.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(l.RS_COLORWRITEENABLE,15);break;default:return}this._currentRenderMode=e}}},{key:"now",get:function(){return this._Date.now()}}],[{key:"CreateContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;Object(i.isString)(t)&&(t=document.getElementById(t)),t||(t=document.createElement("canvas"));for(var r=e.webgl2?["webgl2","webgl","experimental-webgl"]:["webgl","experimental-webgl"],n=null,o=0,a=r;o<a.length;o++){var u=a[o];if(n=t.getContext(u,e))break}if(!n)throw new z({version:e.webgl2?2:1});return n}}]),r}(a.Tw2EventEmitter);_.RequestAnimationFrame=_.prototype.RequestAnimationFrame=(w=Object(i.get)(window,l.VendorRequestAnimationFrame),function(e){return w(e)}),_.CancelAnimationFrame=_.prototype.CancelAnimationFrame=(x=Object(i.get)(window,l.VendorCancelAnimationFrame),function(e){return x(e)}),_.prototype.RM_ANY=l.RM_ANY,_.prototype.RM_OPAQUE=l.RM_OPAQUE,_.prototype.RM_DECAL=l.RM_DECAL,_.prototype.RM_TRANSPARENT=l.RM_TRANSPARENT,_.prototype.RM_ADDITIVE=l.RM_ADDITIVE,_.prototype.RM_DEPTH=l.RM_DEPTH,_.prototype.RM_DISTORTION=l.RM_DISTORTION,_.prototype.RM_FULLSCREEN=l.RM_FULLSCREEN,_.prototype.RM_PICKABLE=l.RM_PICKABLE;var z=function(e){m(r,e);var t=h(r);function r(e){return p(this,r),t.call(this,e,"Unable to create webgl context (%version%)")}return r}(o.Tw2Error)},"./core/engine/Tw2Library.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Library",(function(){return j}));var n=r("./core/Tw2EventEmitter.js"),i=r("./core/engine/Tw2ResMan.js"),o=r("./core/engine/Tw2Device.js"),a=r("./core/engine/Tw2Logger.js"),u=r("./core/reader/Tw2BlackPropertyReaders.js"),c=r("./core/Tw2Error.js"),l=r("./global/constant/index.js"),s=r("./global/math/index.js"),f=r("./global/utils/index.js"),p=r("./core/store/index.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){y(o,n,i,a,u,"next",e)}function u(e){y(o,n,i,a,u,"throw",e)}a(void 0)}))}}function b(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=0,j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(h,e);var t,r,n,d,y=w(h);function h(){var e,t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),++S>1)throw new c.ErrSingletonInstantiation;return(e=y.call(this)).math=s,e.util=f,e.const=l,e.variableTypes=new p.Tw2VariableTypeStore,e.variables=new p.Tw2VariableStore(e.variableTypes),e.paths=new p.Tw2ResourcePathStore,e.dynamicPaths=new p.Tw2ResourceDynamicPathStore,e.extensions=new p.Tw2ResourceExtensionStore,e.constructors=new p.Tw2ConstructorStore,e.logger=new a.Tw2Logger,e.audMan=null,e.resMan=new i.Tw2ResMan(_(e)),e.device=new o.Tw2Device(_(e)),e._debugMode=!1,e._customResourceHandler=null,e.device.AddEvents({resized:function(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e).EmitEvent.apply(t,["resized"].concat(n))},context_lost:function(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e).EmitEvent.apply(t,["context_lost"].concat(n))},context_restored:function(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e).EmitEvent.apply(t,["context_restored"].concat(n))},context_created:function(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e).EmitEvent.apply(t,["context_created"].concat(n))},canvas2d_cleared:function(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e).EmitEvent.apply(t,["canvas2d_cleared"].concat(n))}}),e.constructors.OnEvent("stored",(function(t){var r=t.key,n=t.value;return e.constructor.prototype[r]=n})),Object.defineProperty(_(e),"eveSof",{get:function(){if(!t){var r=e.GetClass("EveSOF");t=new r(_(e))}return t}}),e}return v(h,[{key:"dt",get:function(){return this.device.dt}},{key:"fps",get:function(){return this.device.fps}},{key:"now",get:function(){return this.device.now}},{key:"frame",get:function(){return this.device.frameCounter}},{key:"gl",get:function(){return this.device.gl}},{key:"canvas",get:function(){return this.device.canvas}},{key:"canvas2d",get:function(){return this.device.canvas2d}},{key:"width",get:function(){return this.device.viewportWidth}},{key:"height",get:function(){return this.device.viewportHeight}},{key:"aspect",get:function(){return this.device.viewportAspect}},{key:"systemMirror",get:function(){return this.resMan.systemMirror}}]),v(h,[{key:"Initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.render,n=t.glParams,i=t.canvas,o=t.canvas3d,a=t.canvas2d,u=b(t,["render","glParams","canvas","canvas3d","canvas2d"]);if(this.Register(u),this.device.Create({canvas:i,canvas3d:o,canvas2d:a,glParams:n}),r){this.OnEvent("tick",r);var c=function t(){e.device.RequestAnimationFrame(t),e.StartFrame(),e.EndFrame()};this.device.RequestAnimationFrame(c)}}},{key:"StartFrame",value:function(){this.device.Tick(),this.resMan.Tick(),this.audMan&&this.audMan.Tick(),this.EmitEvent("start_frame",this.device.dt),this.EmitEvent("tick",this.device.dt)}},{key:"EndFrame",value:function(){this.EmitEvent("end_frame",this.device.dt)}},{key:"RequestAnimationFrame",value:function(e){return this.device.RequestAnimationFrame(e)}},{key:"CancelAnimationFrame",value:function(e){return this.device.CancelAnimationFrame(e)}},{key:"Log",value:function(e){return this.logger.Log(e)}},{key:"Error",value:function(e){return this.logger.Error(e)}},{key:"Debug",value:function(e){return this.logger.Debug(e)}},{key:"Warning",value:function(e){return this.logger.Warning(e)}},{key:"Info",value:function(e){return this.logger.Info(e)}},{key:"Register",value:function(e){e&&(e.events&&this.AddEvents(e.events),void 0!==e.debug&&this.SetDebugMode(e.debug),e.resourceHandler&&this.SetCustomResourceHandler(e.resourceHandler),e.black&&this.RegisterBlackPathHandlers(e.black),e.variableTypes&&this.variableTypes.Register(e.variableTypes),e.constructors&&this.constructors.Register(e.constructors),e.variables&&this.variables.Register(e.variables),e.paths&&this.paths.Register(e.paths),e.dynamicPaths&&this.dynamicPaths.Register(e.dynamicPaths),e.extensions&&this.extensions.Register(e.extensions),e.logger&&this.logger.Register(e.logger),e.resMan&&this.resMan.Register(e.resMan),e.device&&this.device.Register(e.device),e.glParams&&this.device.Register({glParams:e.glParams}))}},{key:"GetURL",value:function(e){return this.paths.Resolve(e)}},{key:"RegisterBlackPathHandlers",value:function(e){u.path.registerExtensionHandlers(e)}},{key:"SetBlackPathExtensionHandler",value:function(e,t){return u.path.setExtensionHandler(e,t),this}},{key:"GetDebugMode",value:function(){return this._debugMode}},{key:"SetDebugMode",value:function(e){return this._debugMode=e,this.constructors.SetDebugMode(e),this.resMan.SetDebugMode(e),this.logger.SetDebugMode(e),this}},{key:"SetCustomResourceHandler",value:function(e){return this._customResourceHandler=e,this}},{key:"IsAlphaTestEnabled",value:function(){return this.device.IsAlphaTestEnabled()}},{key:"SetStandardStates",value:function(e){return this.device.SetStandardStates(e),this}},{key:"SetOpaqueRenderStates",value:function(){return this.SetStandardStates(l.RM_OPAQUE)}},{key:"SetTransparentRenderStates",value:function(){return this.SetStandardStates(l.RM_OPAQUE)}},{key:"SetAdditiveRenderStates",value:function(){return this.SetStandardStates(l.RM_ADDITIVE)}},{key:"SetDecalRenderStates",value:function(){return this.SetStandardStates(l.RM_DECAL)}},{key:"SetDistortionRenderStates",value:function(){return this.SetStandardStates(l.RM_DISTORTION)}},{key:"SetPickableRenderStates",value:function(){return this.SetStandardStates(l.RM_PICKABLE)}},{key:"SetFullscreenRenderStates",value:function(){return this.SetStandardStates(l.RM_FULLSCREEN)}},{key:"SetColorMask",value:function(e){return this.device.gl.colorMask(!!e[0],!!e[1],!!e[2],!!e[3]),this}},{key:"GetColorMask",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.device.gl.getParameter(this.device.gl.COLOR_WRITEMASK),r=0;r<t.length;r++)e[r]=t[r]?1:0;return t}},{key:"SetClearColor",value:function(e){return this.device.gl.clearColor(e[0],e[1],e[2],e[3]),this}},{key:"GetClearColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.device.gl.getParameter(this.device.gl.COLOR_CLEAR_VALUE);return s.vec4.copy(e,t)}},{key:"SetViewport",value:function(e){return this.device.gl.viewport(e[0],e[1],e[2],e[3]),this}},{key:"GetViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.device.gl.getParameter(this.device.gl.VIEWPORT);return s.vec4.copy(e,t)}},{key:"SetDepth",value:function(e,t,r){return e?this.device.gl.enable(this.device.gl.DEPTH_TEST):this.device.gl.disable(this.device.gl.DEPTH_TEST),void 0!==t&&this.device.gl.depthFunc(Object(f.isString)(t)?this.gl[t]:t),void 0!==r&&this.device.gl.clearDepth(r),this}},{key:"SetClearDepth",value:function(e){return this.device.gl.clearDepth(e),this}},{key:"GetClearDepth",value:function(){return this.device.gl.getParameter(this.device.gl.DEPTH_CLEAR_VALUE)}},{key:"ClearBufferBits",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;return e&&(n|=this.device.gl.COLOR_BUFFER_BIT),t&&(n|=this.device.gl.DEPTH_BUFFER_BIT),r&&(n|=this.device.gl.STENCIL_BUFFER_BIT),this.device.gl.clear(n),this}},{key:"ClearDepth",value:function(){return this.ClearBufferBits(!1,!0,!1)}},{key:"ClearStencil",value:function(){return this.ClearBufferBits(!1,!1,!0)}},{key:"ClearColor",value:function(){return this.ClearBufferBits(!0,!1,!1)}},{key:"SetProjectionMatrix",value:function(e){return this.device.SetProjection(e),this}},{key:"SetViewMatrix",value:function(e){return this.device.SetView(e),this}},{key:"GetDeviceExtension",value:function(e){return this.device.GetExtension(e)}},{key:"AddResource",value:function(e,t){return this.resMan.motherLode.Add(e,t)}},{key:"RemoveResource",value:function(e){return this.resMan.motherLode.Remove(e)}},{key:"GetResource",value:function(e,t,r){return this.resMan.GetResource(e,t,r)}},{key:"Watch",value:(d=m(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.resMan.Watch(t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"Unwatch",value:function(e){return this.resMan.UnWatch(e)}},{key:"Fetch",value:(n=m(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(f.isArray)(t)){e.next=4;break}if(t[0]||!t[1]){e.next=3;break}return e.abrupt("return",null);case 3:t=t[0];case 4:if(t){e.next=6;break}throw new ReferenceError("Invalid resPath: must be defined");case 6:if(!this._customResourceHandler){e.next=10;break}return e.next=9,this._customResourceHandler(t);case 9:n=e.sent;case 10:if(n){e.next=28;break}if(!f.isDNA(t)){e.next=17;break}return e.next=14,this.eveSof.FetchObject(t);case 14:n=e.sent,e.next=28;break;case 17:if(!f.isString(t)){e.next=28;break}if(i=f.getPathExtension(t),!this.extensions.IsLoadingObject(i)){e.next=25;break}return e.next=22,this.resMan.FetchObject(t);case 22:n=e.sent,e.next=28;break;case 25:return e.next=27,this.resMan.FetchResource(t);case 27:n=e.sent;case 28:if(n){e.next=30;break}throw new ReferenceError("Invalid argument");case 30:if(!r){e.next=38;break}if(!Object(f.isFunction)(r)){e.next=36;break}return e.next=34,this.Watch(n,r);case 34:e.next=38;break;case 36:return e.next=38,this.Watch(n);case 38:return e.abrupt("return",n);case 39:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"FetchPlain",value:(r=m(regeneratorRuntime.mark((function e(t,r){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E(r,Object.keys(t).length),e.abrupt("return",Promise.all(Object.keys(t).map((function(e){return i.Fetch(t[e],n).then((function(t){return{key:e,val:t}}))}))).then((function(e){var t={};return e.forEach((function(e){return t[e.key]=e.val})),t})));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"FetchAll",value:(t=m(regeneratorRuntime.mark((function e(t,r){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E(r,t.length),e.abrupt("return",Promise.all(t.map((function(e){return i.Fetch(e,n)}))));case 2:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})},{key:"CreateVariable",value:function(e,t,r){return this.variables.Create(e,t,r)}},{key:"HasVariable",value:function(e){return this.variables.Has(e)}},{key:"GetVariable",value:function(e){return this.variables.Get(e)}},{key:"GetVariableValue",value:function(e,t){return this.variables.GetValue(e,t)}},{key:"SetVariable",value:function(e,t){return this.variables.Set(e,t)}},{key:"SetVariableValue",value:function(e,t,r){return this.variables.SetValue(e,t,r)}},{key:"HasExtension",value:function(e){return this.extensions.Has(e)}},{key:"GetExtension",value:function(e){return this.extensions.Get(e)}},{key:"GetExtensionFromPath",value:function(e){return this.extensions.FromPath(e)}},{key:"SetExtension",value:function(e,t){return this.extensions.Set(e,t)}},{key:"HasClass",value:function(e){return this.constructors.Has(e)}},{key:"GetClass",value:function(e){return this.constructors.Get(e)}},{key:"SetClass",value:function(e,t){return this.constructors.Set(e,t)}},{key:"HasPath",value:function(e){return this.paths.Has(e)}},{key:"GetPath",value:function(e){return this.paths.Get(e)}},{key:"SetPath",value:function(e,t){return this.paths.Set(e,t)}},{key:"HasDynamicPath",value:function(e){return this.dynamicPaths.Has(e)}},{key:"GetDynamicPath",value:function(e){return this.dynamicPaths.Get(e)}},{key:"SetDynamicPath",value:function(e,t){return this.dynamicPaths.Set(e,t)}},{key:"HasType",value:function(e){return this.variableTypes.Has(e)}},{key:"GetType",value:function(e){return this.variableTypes.Get(e)}},{key:"GetTypeByValue",value:function(e){return this.variableTypes.GetByValue(e)}},{key:"SetType",value:function(e,t){return this.variableTypes.Set(e,t)}}]),h}(n.Tw2EventEmitter);function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Object(f.isFunction)(e))return!!e;var r=new Map;return function(n,i){r.set(i,n);var o={total:t,pending:0,objects:0,percent:0};r.forEach((function(e){o.total+=e.total,o.pending+=e.pending,o.objects+=e.objects})),o.percent=parseFloat(((o.total-o.pending)/o.total*100).toFixed(2)),e(n,i,o,r)}}},"./core/engine/Tw2Logger.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Logger",(function(){return p}));var n=r("./core/Tw2EventEmitter.js"),i=r("./global/utils/index.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,r,n,o=l(s);function s(){var e;a(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).name="",e.display=!0,e.history=100,e.throttle=20,e.visible={log:!1,info:!1,debug:!1,warn:!1,error:!0},e._logs=[],e._throttled=null,e._debugMode=!1,e}return t=s,(r=[{key:"SetDebugMode",value:function(e){this._debugMode=e}},{key:"Register",value:function(e){e&&("events"in e&&this.AddEvents(e.events),Object(i.assignIfExists)(this,e,["name","display","history","throttle"]),Object(i.assignIfExists)(this.visible,e.visible,["log","info","debug","warn","error"]))}},{key:"Debug",value:function(e){return this.Add("debug",e)}},{key:"Info",value:function(e){return this.Add("info",e)}},{key:"Warning",value:function(e){return this.Add("warn",e)}},{key:"Error",value:function(e){return this.Add("error",e)}},{key:"Log",value:function(e){return this.Add("log",e)}},{key:"Add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"log",t=arguments.length>1?arguments[1]:void 0;if(t?Object(i.isString)(t)?t={message:t}:Object(i.isError)(t)&&(t={message:t.message,err:t}):t={message:""},t._logged)return t;if(t.type=e.toLowerCase(),t.name=t.name||"Logger",t.message=t.message?t.message.charAt(0).toUpperCase()+t.message.substring(1):"",s.LogType[t.type.toUpperCase()]||(t.type="log"),this._debugMode||this.display&&this.visible[t.type]||(t.hide=!0),!this.throttle||this._debugMode)this._throttled=null;else if(!t.hide){this._throttled||(this._throttled={}),this._throttled[t.type]||(this._throttled[t.type]=[]);var r=this._throttled[t.type];r.includes(t.message)?t.hide=!0:(r.unshift(t.message),r.splice(this.throttle))}if(!t.hide||this._debugMode){var n="";t.path&&!t.message.includes(t.path)&&(n+="'".concat(t.path,"' ")),t.time&&(n+="in ".concat(t.time.toFixed(3)," secs ")),t.detail&&(n+="(".concat(t.detail,") "));var o="".concat(this.name," ").concat(t.name,":");t.err||t.data?(console.group(o,t.message,n),t.err&&console.error(t.err.stack||t.err.toString()),t.data&&console.debug(JSON.stringify(t.data,null,4)),console.groupEnd()):console[t.type](o,t.message,n)}var a=this._debugMode?1e3:this.history;return a?(this._logs.unshift(t),this._logs.splice(a)):this._logs.splice(0),t._logged=!0,this.EmitEvent("any",t),this.EmitEvent(t.type,t),t}}])&&u(t.prototype,r),n&&u(t,n),s}(n.Tw2EventEmitter);p.LogType={ERROR:"error",WARNING:"warn",WARN:"warn",INFO:"info",LOG:"log",DEBUG:"debug"}},"./core/engine/Tw2MotherLode.js":function(e,t,r){"use strict";function n(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t),r.d(t,"Tw2MotherLode",(function(){return o}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._loadedObjects={},this._errors={},this._watching=[]}var t,r,o,a,u;return t=e,(r=[{key:"Watch",value:(a=regeneratorRuntime.mark((function e(t,r){var n,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===(n=this.GetWatchedIndex(t))){e.next=5;break}return i=this._watching[n],r&&!i.onProgress.includes(r)&&i.onProgress.push(r),e.abrupt("return",this._watching[n]._promise);case 5:if(o=this.GetWatchedResourceDetail(t),r&&r(o,t),o.pending){e.next=9;break}return e.abrupt("return",t);case 9:return a={object:t,onProgress:[],start:Date.now(),total:o.total,pending:o.pending},r&&a.onProgress.push(r),this._watching.push(a),a._promise=new Promise((function(e,t){a.onCompleted=function(t){return e(a.object,t)},a.onError=function(e){return t(e)}})),e.abrupt("return",a._promise);case 14:case"end":return e.stop()}}),e,this)})),u=function(){var e=this,t=arguments;return new Promise((function(r,i){var o=a.apply(e,t);function u(e){n(o,r,i,u,c,"next",e)}function c(e){n(o,r,i,u,c,"throw",e)}u(void 0)}))},function(e,t){return u.apply(this,arguments)})},{key:"UnWatch",value:function(e){var t=this.GetWatchedIndex(e);if(-1!==t){var r=this._watching[t].onCompleted;return this._watching.splice(t,1),r(!1),!0}return!1}},{key:"PurgeWatched",value:function(){for(var e=0;e<this._watching.length;e++){var t=this._watching[e].onCompleted;this._watching.splice(e,1),t(!1),e--}}},{key:"GetWatchedIndex",value:function(e){for(var t=0;t<this._watching.length;t++)if(this._watching[t].object===e)return t;return-1}},{key:"GetWatchedResourceDetail",value:function(e){var t={total:0,pending:0,percent:100};if(!e.GetResources&&!e.getResources)return t;var r=e.GetResources?e.GetResources():e.getResources();if(t.total=r.length,t.total){for(var n=0;n<r.length;n++)r[n].HasCompleted()||t.pending++;t.percent=parseFloat(((t.total-t.pending)/t.total*100).toFixed(2))}return t}},{key:"UpdateWatched",value:function(e,t,r){for(var n=Date.now(),i=0;i<this._watching.length;i++){var o=this._watching[i],a=this.GetWatchedResourceDetail(o.object);if(o.total!==a.total||o.pending!==a.pending){o.total=a.total,o.pending=a.pending;for(var u=0;u<o.onProgress.length;u++)o.onProgress[u](a,o.object)}if(!a.pending){this._watching.splice(i,1),i--,o.onCompleted(!0);break}var c=Date.now();if(r&&(c-o.start)/1e3>=r){this._watching.splice(i,1),i--,o.onError(new Error("Maximum watch duration reached"));break}if(e&&(c-n)/1e3>=e)return;if(t&&i>t)return}}},{key:"AddError",value:function(e,t){return this._errors[e]=this._errors[e]||[],t.message.includes(e)||(t.message="".concat(t.message,' "').concat(e,'"')),this._errors[e].includes(t)||(t.path=e,this._errors[e].unshift(t)),t}},{key:"GetErrors",value:function(e){return e&&e in this._errors?Array.from(this._errors[e]):[]}},{key:"GetLastError",value:function(e){return e&&e in this._errors?this._errors[e][0]:void 0}},{key:"HasErrored",value:function(e){return e&&e in this._errors}},{key:"Find",value:function(e){return e in this._loadedObjects?this._loadedObjects[e]:null}},{key:"Add",value:function(e,t){this._loadedObjects[e]=t}},{key:"Has",value:function(e){return!!this._loadedObjects[e]}},{key:"Remove",value:function(e){this._loadedObjects[e]&&Reflect.deleteProperty(this._loadedObjects,e)}},{key:"Clear",value:function(e){for(var t in this._loadedObjects)this._loadedObjects.hasOwnProperty(t)&&(e&&e(this._loadedObjects[t]),this.Remove(t))}},{key:"UnloadAndClear",value:function(e,t){this.Clear((function(r){r.Unload(t),e&&e(r)}))}},{key:"PurgeInactive",value:function(e,t,r){for(var n in this._loadedObjects)if(this._loadedObjects.hasOwnProperty(n)){var i=this._loadedObjects[n];if(i.doNotPurge)continue;if(i.IsPurged()){this.Remove(n);continue}var o=void 0;i.HasErrored()?o="errored":i.IsUnloaded()?o="unloaded":i.HasLoaded()&&(e-i.activeFrame)%t>=r&&i.Unload({hide:!0,detail:"inactivity"})&&(o="inactivity"),o&&(i.OnPurged({detail:o}),this.Remove(n))}}}])&&i(t.prototype,r),o&&i(t,o),e}()},"./core/engine/Tw2ResMan.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ResMan",(function(){return x})),r.d(t,"ErrHTTPRequest",(function(){return _})),r.d(t,"ErrHTTPStatus",(function(){return z}));var n=r("./core/engine/Tw2MotherLode.js"),i=r("./core/resource/Tw2LoadingObject.js"),o=r("./core/Tw2EventEmitter.js"),a=r("./core/Tw2Error.js"),u=r("./global/utils/index.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,u,"next",e)}function u(e){f(o,n,i,a,u,"throw",e)}a(void 0)}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){b(f,e);var t,r,o,c,s=v(f);function f(e){var t;return d(this,f),(t=s.call(this)).motherLode=new n.Tw2MotherLode,t.systemMirror=!1,t.maxPrepareTime=.05,t.autoPurgeResources=!0,t.activeFrame=0,t.purgeTime=30,t.maxWatchedUpdateTime=.05,t.maxWatchedCount=0,t.maxWatchedTime=240,t._prepareBudget=0,t._prepareQueue=[],t._purgeTime=0,t._purgeFrame=0,t._purgeFrameLimit=1e3,t._pendingLoads=[],t._noLoadFrames=0,t.tw2=e,t}return m(f,[{key:"pendingLoads",get:function(){return this._pendingLoads.length}}]),m(f,[{key:"Register",value:function(e){e&&("events"in e&&this.AddEvents(e.events),Object(u.assignIfExists)(this,e,["systemMirror","maxPrepareTime","autoPurgeResources","purgeTime","maxWatchedTime","maxWatchedCount","maxWatchedUpdateTime"]))}},{key:"SetDebugMode",value:function(e){e&&(this.systemMirror=e)}},{key:"GetDebugMode",value:function(e){return this.systemMirror}},{key:"Watch",value:(c=p(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.motherLode.Watch(t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"UnWatch",value:function(e){return this.motherLode.UnWatch(e)}},{key:"PurgeWatched",value:function(){return this.motherLode.PurgeWatched()}},{key:"OnPathError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Tw2Error({path:e});e=f.NormalizePath(e);var r=this.motherLode.Find(e);return r?r.OnError(t):(this.OnPathEvent(e,"error",t),t)}},{key:"OnPathEvent",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.motherLode.Find(e),i=Object(u.isError)(r)?r:void 0;i&&(this.motherLode.AddError(e,i),r={err:i,message:i.message}),r.path=e,r.message=r.message||t,r.name="Resource manager",this.EmitEvent(t,e,n,i),this.tw2.logger.Add(f.LogType[t.toUpperCase()],r)}},{key:"IsLoading",value:function(){return this._noLoadFrames<2}},{key:"Clear",value:function(e){this.motherLode.Clear(e)}},{key:"UnloadAndClear",value:function(e,t){this.motherLode.UnloadAndClear(e,t)}},{key:"Tick",value:function(){0===this._prepareQueue.length&&0===this._pendingLoads.length?this._noLoadFrames<2&&this._noLoadFrames++:this._noLoadFrames=0,this._prepareBudget=this.maxPrepareTime;for(var e=this.tw2.now;this._prepareQueue.length;){var t=l(this._prepareQueue[0],3),r=t[0],n=t[1],i=t[2];this._prepareQueue.shift();try{if(r.Prepare(n,i),this._prepareBudget-=.001*(this.tw2.now-e),this._prepareBudget<0)break}catch(e){this._prepareBudget=0,r.OnError(e)}}return this.motherLode.UpdateWatched(this.maxWatchedUpdateTime,this.maxWatchedCount,this.maxWatchedTime),this._purgeTime+=this.tw2.dt,this._purgeTime>1&&(this.activeFrame+=1,this._purgeTime-=Math.floor(this._purgeTime),this._purgeFrame+=1,this._purgeFrame>=5&&this.autoPurgeResources&&this.motherLode.PurgeInactive(this._purgeFrame,this._purgeFrameLimit,this.purgeTime)),!0}},{key:"Queue",value:function(e,t,r){this._prepareQueue.push([e,t,r])}},{key:"GetResource",value:function(e,t,r){var n;if(0===(e=f.NormalizePath(e)).indexOf("dynamic:/"))throw new a.ErrFeatureNotImplemented({feature:"Dynamic resources"});if(n=this.motherLode.Find(e))return n.RegisterCallbacks(t,r),n;if(0===e.indexOf("manual:/"))throw new a.ErrFeatureNotImplemented({feature:"Manually created resource"});try{n=new(this.tw2.GetExtensionFromPath(e))}catch(t){return this.OnPathError(e,t),r&&r(t),null}return n.path=e,n.RegisterCallbacks(t,r),this.LoadResource(n)}},{key:"FetchResource",value:(o=p(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){r.GetResource(t,e,n)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"GetObject",value:function(e,t,r){e=f.NormalizePath(e);var n=this.motherLode.Find(e);n?n.AddObject(t,r):((n=new i.Tw2LoadingObject).path=e,n.AddObject(t,r),this.LoadResource(n))}},{key:"FetchObject",value:(r=p(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){r.GetObject(t,e,n)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"LoadResource",value:function(e,t){var r=this;if(this.motherLode.Add(e.path,e),e.HasErrored())return e;try{var n=this.tw2.GetURL(e.path);if(e.OnRequested(t),e.DoCustomLoad&&e.DoCustomLoad(n,Object(u.getPathExtension)(n)))return e;if(e.HasErrored())return e;this.Fetch(n,e.requestResponseType).then((function(t){e.OnLoaded(),r.Queue(e,t)})).catch((function(t){e.OnError(t)}))}catch(t){e.OnError(t)}return e}},{key:"AddPendingLoad",value:function(e){this._pendingLoads.push(e)}},{key:"RemovePendingLoad",value:function(e){var t=this._pendingLoads.indexOf(e);-1!==t&&this._pendingLoads.splice(t,1)}},{key:"Fetch",value:(t=p(regeneratorRuntime.mark((function e(t,r){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.AddPendingLoad(t),e.abrupt("return",fetch(t).then((function(e){if(!e.ok)throw e;if(Object(u.isFunction)(r))return r(e);switch(r){case"arraybuffer":return e.arrayBuffer();case"text":return e.text();case"json":return e.json();case"blob":return e.blob();default:throw new Error("Invalid fetch type: "+r)}})).then((function(e){return n.RemovePendingLoad(t),e})).catch((function(e){if(n.RemovePendingLoad(t),e.text)return e.text().then((function(t){var r,n=e.status,i=e.statusText;try{i=(r=JSON.parse(t)).message||r.msg||r.error||r.err,Object(u.isBoolean)(i)&&(i=void 0)}catch(e){i="Failed to fetch resource"}throw new z({status:n,statusText:i,json:r})}));throw e})));case 2:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"BuildUrl",value:function(e){return this.tw2.GetURL(e)}}],[{key:"NormalizePath",value:function(e){return e=(e=e.toLowerCase()).replace("\\","/")}}]),f}(o.Tw2EventEmitter);x.LogType={ERROR:"error",PURGED:"info",UNLOADED:"info",REQUESTED:"info",RELOADING:"info",LOADED:"info",PREPARED:"log",WARNING:"warn",DEBUG:"debug"};var _=function(e){b(r,e);var t=v(r);function r(e){return d(this,r),t.call(this,e,"Communication error while requesting resource")}return r}(a.Tw2Error),z=function(e){b(r,e);var t=v(r);function r(e){return d(this,r),t.call(this,e,"%statusText=Communication status error while loading resource% (%status%)")}return r}(a.Tw2Error)},"./core/geometry/Tw2BlendShapeData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlendShapeData",(function(){return w}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js"),h=r("./core/vertex/index.js");function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var w=(n=b.meta.type("Tw2BlendShapeData"),i=b.meta.string,o=b.meta.struct("Tw2VertexDeclaration"),a=b.meta.vector,u=b.meta.unknown,c=b.meta.unknown,n((f=g((s=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"name",f,this),v(this,"declaration",p,this),v(this,"buffers",d,this),v(this,"indexes",y,this),v(this,"weightProxy",m,this)}).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=g(s.prototype,"declaration",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h.Tw2VertexDeclaration}}),d=g(s.prototype,"buffers",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=g(s.prototype,"indexes",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g(s.prototype,"weightProxy",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=s))||l)},"./core/geometry/Tw2GeometryAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryAnimation",(function(){return m}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js");function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var m=(n=p.meta.type("Tw2GeometryAnimation"),i=p.meta.string,o=p.meta.float,a=p.meta.list("Tw2GeometryTrackGroup"),n((l=y((c=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"name",l,this),d(this,"duration",s,this),d(this,"trackGroups",f,this)}).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=y(c.prototype,"duration",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=y(c.prototype,"trackGroups",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=c))||u)},"./core/geometry/Tw2GeometryBone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryBone",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T=r("./global/utils/index.js"),O=r("./global/math/index.js");function R(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var A=(n=T.meta.type("Tw2GeometryBone"),i=T.meta.string,o=T.meta.uint,a=T.meta.vector3,u=T.meta.quaternion,c=T.meta.matrix4,l=T.meta.matrix4,s=T.meta.matrix4,f=T.meta.matrix4,p=T.meta.float32Array,d=T.meta.isPrivate,n((E=j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),R(this,"name",b,this),R(this,"parentIndex",h,this),R(this,"position",v,this),R(this,"orientation",g,this),R(this,"scaleShear",w,this),R(this,"localTransform",x,this),R(this,"worldTransform",_,this),R(this,"worldTransformInv",z,this),R(this,"boundingBox",S,this)}var t,r,n;return t=e,(r=[{key:"UpdateTransform",value:function(){O.mat4.fromMat3(this.localTransform,this.scaleShear),O.quat.normalize(this.orientation,this.orientation);var t=O.mat4.fromQuat(e.global.mat4_0,this.orientation);return O.mat4.multiply(this.localTransform,this.localTransform,t),this.localTransform[12]=this.position[0],this.localTransform[13]=this.position[1],this.localTransform[14]=this.position[2],this.localTransform}},{key:"GetBoundingBox",value:function(e,t){return t&&this.UpdateTransform(),this.boundingBox?O.box3.transformMat4(e,this.boundingBox,this.localTransform):O.box3.empty(e)}},{key:"GetWorldBoundingBoxInverse",value:function(e,t){return t&&this.UpdateTransform(),this.boundingBox?O.box3.transformMat4(e,this.boundingBox,this.worldTransformInv):O.box3.empty(e)}},{key:"GetWorldBoundingBox",value:function(e,t){return t&&this.UpdateTransform(),this.boundingBox?O.box3.transformMat4(e,this.boundingBox,this.worldTransform):O.box3.empty(e)}}])&&P(t.prototype,r),n&&P(t,n),e}(),j.global={mat4_0:O.mat4.create()},b=D((m=E).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=D(m.prototype,"parentIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=D(m.prototype,"position",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.create()}}),g=D(m.prototype,"orientation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.quat.create()}}),w=D(m.prototype,"scaleShear",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.mat3.create()}}),x=D(m.prototype,"localTransform",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.mat4.create()}}),_=D(m.prototype,"worldTransform",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.mat4.create()}}),z=D(m.prototype,"worldTransformInv",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.mat4.create()}}),S=D(m.prototype,"boundingBox",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y)},"./core/geometry/Tw2GeometryCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryCurve",(function(){return h}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js");function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var h=(n=y.meta.type("Tw2GeometryCurve"),i=y.meta.float,o=y.meta.float,a=y.meta.vector,u=y.meta.vector,n((s=b((l=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"dimension",s,this),m(this,"degree",f,this),m(this,"knots",p,this),m(this,"controls",d,this)}).prototype,"dimension",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=b(l.prototype,"degree",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=b(l.prototype,"knots",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b(l.prototype,"controls",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=l))||c)},"./core/geometry/Tw2GeometryMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryMesh",(function(){return re})),r.d(t,"ErrSystemMirrorDisabled",(function(){return ne})),r.d(t,"ErrVertexDeclarationNotFound",(function(){return ie}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U=r("./global/utils/index.js"),V=r("./global/math/index.js"),q=r("./core/vertex/index.js"),H=(r("./core/geometry/Tw2GeometryMeshArea.js"),r("./core/Tw2Error.js"));function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Z(e);if(t){var i=Z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Q(this,r)}}function Q(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function te(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var re=(n=U.meta.type("Tw2GeometryMesh"),i=U.meta.string,o=U.meta.struct("Tw2VertexDeclaration"),a=U.meta.list("Tw2GeometryMeshArea"),u=U.meta.vector,c=U.meta.uint,l=U.meta.struct("WebGLBuffer"),s=U.meta.isPrivate,f=U.meta.struct("WebGLBuffer"),p=U.meta.isPrivate,d=U.meta.vector,y=U.meta.uint,m=U.meta.vector3,b=U.meta.vector3,h=U.meta.vector3,v=U.meta.float,g=U.meta.list("String"),w=U.meta.list(),x=U.meta.list("Tw2BlendShapeData"),n((N=B=function(){function e(){$(this,e),J(this,"name",S,this),J(this,"declaration",j,this),J(this,"areas",E,this),J(this,"buffer",T,this),J(this,"bufferLength",O,this),J(this,"bufferData",R,this),J(this,"indexes",P,this),J(this,"indexData",D,this),J(this,"indexType",A,this),J(this,"minBounds",M,this),J(this,"maxBounds",C,this),J(this,"boundsSpherePosition",k,this),J(this,"boundsSphereRadius",I,this),J(this,"boneBindings",L,this),J(this,"boneBounds",G,this),J(this,"blendShapes",F,this),this._faces=0,this._vertices=0,this._areas=0,this._boundsDirty=!0}var t,r,n;return t=e,n=[{key:"GetFaceVertexIndices",value:function(e,t,r){if(t>=r.length/3)throw e[0]=e[1]=e[2]=0,new H.ErrIndexBounds;for(var n=0;n<3;n++)e[n]=r[3*t+n];return e}},{key:"GetVertexElement",value:function(e,t,r,n,i,o){if(t>o.length/r){for(var a=0;a<e.length;a++)e[a]=0;throw new H.ErrIndexBounds}for(var u=0;u<i;u++)e[u]=o[t*r+n/4+u];return e}},{key:"GetBoundsFromVertices",value:function(t,r,n,i,o,a,u){var c=e.global.vec3_0,l=e.global.vec3_1;V.box3.empty(t);for(var s=0;s<n;s++){this.GetFaceVertexIndices(c,s+r,u);for(var f=0;f<3;f++)this.GetVertexElement(l,c[f],i,o,3,a),V.box3.addPoint(t,t,l)}return t}}],(r=[{key:"ClearSystemMirror",value:function(){this.bufferData=null,this.indexData=null}},{key:"FindBoneBoundsByName",value:function(e){e=e.toLowerCase();for(var t=-1,r=0;r<this.boneBindings.length;r++)if(this.boneBindings[r].toLowerCase()===e){t=r;break}if(-1===t)throw new Error("Bone not found ".concat(e));return this.boneBounds[t]||(this.boneBounds[t]=V.box3.create()),this.boneBounds[t]}},{key:"Intersect",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e.IsMasked(this)){this.RebuildBounds();var i=e.IntersectBounds(this.minBounds,this.maxBounds,r);if(i){for(var o=[],a=0;a<this.areas.length;a++){var u=this.IntersectAreas(this.areas[a],e,t,r,n);if(u)for(var c=0;c<u.length;c++)o.push(u[c])}return o.sort(e._sortFunction),o}}}},{key:"IntersectAreas",value:function(t,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=this.declaration.FindUsage(0,0);if(!a)return[];var u=this.areas.indexOf(t);console.log("Intersecting geometryArea "+u),this.RebuildBounds();var c=r.IntersectBounds(t.minBounds,t.maxBounds,i);if(!c)return[];if(!r.DoFaceIntersection())return c.name=this.name,c.isGeometryArea=!0,c.areaIndex=u,n.push(c),[c];o.inverseWorldTransform||(o.inverseWorldTransform=V.mat4.invert(V.mat4.create(),i)),o.rayLocal||(o.rayLocal=V.ray3.transformMat4(V.ray3.create(),r.ray,o.inverseWorldTransform));var l=t.count/3,s=t.start/3/this.indexData.BYTES_PER_ELEMENT,f=e.global,p=f.pointLocal,d=f.tri3_0,y=f.vec3_0,m=f.vec3_1,b=f.vec3_2,h=f.lne3_0;console.log("Intersecting area faces...");for(var v=[],g=0;g<l;g++){var w=g+s,x=this.GetFaceVertexPositions(y,m,b,w);if(V.tri3.fromVertices(d,y,m,b),V.ray3.getIntersectTri3(p,o.rayLocal,d,r.DoBackfaceCulling())){V.vec3.transformMat4(y,p,i);var _=V.vec3.squaredDistance(r.ray,y);if(console.log("Intersected area face "+w+" at distance "+_+" at point "+Array.from(y)),_>r.nearSquared&&_<r.farSquared){r.DoFindClosestEdge()&&V.tri3.getClosestEdgeToPoint(h,d,y,x),r.DoFindClosestVertex()&&V.tri3.getClosestVertexToPoint(m,d,y,x);var z={name:t.name,distance:_,point:V.vec3.clone(y),item:this,areaIndex:u,faceIndex:w,edgeStartIndex:x.vertexIndices[x.edgeStart],edgeEndIndex:x.vertexIndices[x.edgeEnd],vertexIndex:x.vertexIndices[x.closest],isGeometryFace:!0};n.push(z),v.push(z)}}}return v.sort(r._sortFunction)}},{key:"GetUsageDeclaration",value:function(e,t){if(this.declaration){var r=this.declaration.FindUsage(e,t);if(r)return r}return null}},{key:"RebuildBounds",value:function(e){if(this._boundsDirty||e){var t=this.minBounds,r=this.maxBounds;V.box3.bounds.empty(t,r),e&&this.bufferData&&this.indexData&&this.RecalculateAreaBounds(this.bufferData,this.indexData);for(var n=0;n<this.areas.length;n++){var i=this.areas[n];V.box3.bounds.union(t,r,t,r,i.minBounds,i.maxBounds)}this.boundsSphereRadius=V.box3.bounds.toPositionRadius(t,r,this.boundsSpherePosition),this._boundsDirty=!1}}},{key:"RecalculateAreaBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.bufferData,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.indexData;if(!t||!r)return!1;var n=this.GetUsageDeclaration(0,0);if(!n)return!1;for(var i=e.global.box3_0,o=0;o<this.areas.length;o++){var a=this.areas[o];e.GetBoundsFromVertices(i,a.start/3/r.BYTES_PER_ELEMENT,a.count/3,this.declaration.stride/4,n.offset,t,r),V.box3.toBounds(i,a.minBounds,a.maxBounds),a.boundsSphereRadius=V.box3.toPositionRadius(i,a.boundsSpherePosition)}return!0}},{key:"GetBoundingBox",value:function(e,t){return this.RebuildBounds(t),V.box3.fromBounds(e,this.minBounds,this.maxBounds)}},{key:"GetBoundingSphere",value:function(e,t){return this.RebuildBounds(t),V.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius)}},{key:"GetFaceVertexElements",value:function(t,r,n,i,o,a){if(!this.bufferData||!this.indexData){for(var u=0;u<t.length;u++)t[u]=0;for(var c=0;c<r.length;c++)r[c]=0;for(var l=0;l<n.length;l++)n[l]=0;throw new ne}var s=this.GetUsageDeclaration(o,a);if(!s){for(var f=0;f<t.length;f++)t[f]=0;for(var p=0;p<r.length;p++)r[p]=0;for(var d=0;d<n.length;d++)n[d]=0;throw new ie({usage:o,usageIndex:a})}var y=e.GetFaceVertexIndices([],i,this.indexData),m=this.declaration.stride/4;return e.GetVertexElement(t,y[0],m,s.offset,s.elements,this.bufferData),e.GetVertexElement(r,y[1],m,s.offset,s.elements,this.bufferData),e.GetVertexElement(n,y[2],m,s.offset,s.elements,this.bufferData),{faceIndex:i,vertexIndices:[y[0],y[1],y[2]]}}},{key:"GetFaceVertexIndices",value:function(t){return e.GetFaceVertexIndices([],t,this.indexData)}},{key:"GetVertexElement",value:function(t,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.bufferData;if(!this.bufferData){for(var a=0;a<t.length;a++)t[a]=0;throw new ne}var u=this.GetUsageDeclaration(n,i);if(!u){for(var c=0;c<t.length;c++)t[c]=0;throw new ie({usage:n,usageIndex:i})}return e.GetVertexElement(t,r,this.declaration.stride/4,u.offset,u.elements,o)}},{key:"GetFaceVertexPositions",value:function(e,t,r,n){return this.GetFaceVertexElements(e,t,r,n,q.Tw2VertexElement.Type.POSITION,0)}},{key:"GetFaceTri3",value:function(e,t){return this.GetFaceVertexPositions(V.tri3.$v1(e),V.tri3.$v2(e),V.tri3.$v3(e),t)}},{key:"GetFaceNormal",value:function(t,r){var n=e.global.tri3_0;return this.GetFaceTri3(n,r),V.tri3.getNormal(t,n)}},{key:"GetFaceMidPoint",value:function(t,r){var n=e.global.tri3_0;return this.GetFaceTri3(n,r),V.tri3.getMidpoint(t,n)}},{key:"GetVertexPosition",value:function(e,t){return this.GetVertexElement(e,t,q.Tw2VertexElement.Type.POSITION,0)}},{key:"GetVertexNormal",value:function(e,t){return this.GetVertexElement(e,t,q.Tw2VertexElement.Type.NORMAL,0)}},{key:"GetVertexTangent",value:function(e,t){return this.GetVertexElement(e,t,q.Tw2VertexElement.Type.TANGENT,0)}},{key:"GetVertexBitangent",value:function(e,t){return this.GetVertexElement(e,t,q.Tw2VertexElement.Type.BITANGENT,0)}},{key:"GetVertexUV",value:function(e,t,r){return this.GetVertexElement(e,t,q.Tw2VertexElement.Type.TEXCOORD,r)}},{key:"GetVertexTexCoord0",value:function(e,t){return this.GetVertexUV(e,t,0)}},{key:"GetVertexTexCoord1",value:function(e,t){return this.GetVertexUV(e,t,1)}},{key:"GetVertexBlendWeight",value:function(e,t){return this.GetVertexElement(e,t,q.Tw2VertexElement.Type.BLENDWEIGHT,0)}},{key:"GetVertexBlendIndice",value:function(e,t){return this.GetVertexElement(e,t,q.Tw2VertexElement.Type.BLENDINDICE,0)}}])&&ee(t.prototype,r),n&&ee(t,n),e}(),B.global={tri3_0:V.tri3.create(),pointLocal:V.vec3.create(),vec3_0:V.vec3.create(),vec3_1:V.vec3.create(),vec3_2:V.vec3.create(),box3_0:V.box3.create(),lne3_0:V.lne3.create()},S=te((z=N).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=te(z.prototype,"declaration",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new q.Tw2VertexDeclaration}}),E=te(z.prototype,"areas",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=te(z.prototype,"buffer",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=te(z.prototype,"bufferLength",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=te(z.prototype,"bufferData",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=te(z.prototype,"indexes",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=te(z.prototype,"indexData",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=te(z.prototype,"indexType",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=te(z.prototype,"minBounds",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.vec3.fromValues(0,0,0)}}),C=te(z.prototype,"maxBounds",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.vec3.fromValues(0,0,0)}}),k=te(z.prototype,"boundsSpherePosition",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.vec3.create()}}),I=te(z.prototype,"boundsSphereRadius",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=te(z.prototype,"boneBindings",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=te(z.prototype,"boneBounds",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=te(z.prototype,"blendShapes",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=z))||_),ne=function(e){X(r,e);var t=Y(r);function r(e){return $(this,r),t.call(this,e,"System mirror is required but has been disabled")}return r}(H.Tw2Error),ie=function(e){X(r,e);var t=Y(r);function r(e){return $(this,r),t.call(this,e,"Vertex usage %usage% not found for usage index %usageIndex%")}return r}(H.Tw2Error)},"./core/geometry/Tw2GeometryMeshArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryMeshArea",(function(){return j}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w=r("./global/utils/index.js"),x=r("./global/math/index.js");function _(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=w.meta.type("Tw2GeometryMeshArea"),i=w.meta.string,o=w.meta.uint,a=w.meta.uint,u=w.meta.vector3,c=w.meta.vector3,l=w.meta.vector3,s=w.meta.float,n((d=S((p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,"name",d,this),_(this,"start",y,this),_(this,"count",m,this),_(this,"minBounds",b,this),_(this,"maxBounds",h,this),_(this,"boundsSpherePosition",v,this),_(this,"boundsSphereRadius",g,this)}var t,r,n;return t=e,(r=[{key:"GetBoundingBox",value:function(e){return x.box3.fromBounds(e,this.minBounds,this.maxBounds)}},{key:"GetBoundingSphere",value:function(e){return x.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius)}}])&&z(t.prototype,r),n&&z(t,n),e}()).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=S(p.prototype,"start",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=S(p.prototype,"count",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=S(p.prototype,"minBounds",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.fromValues(0,0,0)}}),h=S(p.prototype,"maxBounds",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.fromValues(0,0,0)}}),v=S(p.prototype,"boundsSpherePosition",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.create()}}),g=S(p.prototype,"boundsSphereRadius",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=p))||f)},"./core/geometry/Tw2GeometryMeshBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryMeshBinding",(function(){return d}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var d=(n=s.meta.type("Tw2GeometryMeshBinding"),i=s.meta.struct("Tw2GeometryMesh"),o=s.meta.list("Tw2GeometryBone"),n((c=p((u=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"mesh",c,this),f(this,"bones",l,this)}).prototype,"mesh",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=p(u.prototype,"bones",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=u))||a)},"./core/geometry/Tw2GeometryModel.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryModel",(function(){return b}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js");function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var b=(n=p.meta.type("Tw2GeometryModel"),i=p.meta.string,o=p.meta.list("Tw2GeometryMeshBinding"),a=p.meta.struct("Tw2GeometrySkeleton"),n((l=m((c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"name",l,this),d(this,"meshBindings",s,this),d(this,"skeleton",f,this)}var t,r,n;return t=e,(r=[{key:"FindBoneByName",value:function(e){if(!this.skeleton)return null;for(var t=0;t<this.skeleton.bones.length;++t)if(this.skeleton.bones[t].name===e)return this.skeleton.bones[t];return null}}])&&y(t.prototype,r),n&&y(t,n),e}()).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=m(c.prototype,"meshBindings",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=m(c.prototype,"skeleton",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=c))||u)},"./core/geometry/Tw2GeometrySkeleton.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometrySkeleton",(function(){return b}));var n,i,o,a,u,c,l=r("./global/utils/index.js");var s,f,p,d,y,m,b=(n=l.meta.type("Tw2GeometrySkeleton"),i=l.meta.list("Tw2GeometryBone"),n((c=function e(){var t,r,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="bones",i=this,(n=u)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})},s=(a=c).prototype,f="bones",p=[i],d={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},m={},Object.keys(d).forEach((function(e){m[e]=d[e]})),m.enumerable=!!m.enumerable,m.configurable=!!m.configurable,("value"in m||m.initializer)&&(m.writable=!0),m=p.slice().reverse().reduce((function(e,t){return t(s,f,e)||e}),m),y&&void 0!==m.initializer&&(m.value=m.initializer?m.initializer.call(y):void 0,m.initializer=void 0),void 0===m.initializer&&(Object.defineProperty(s,f,m),m=null),u=m,o=a))||o)},"./core/geometry/Tw2GeometryTrackGroup.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryTrackGroup",(function(){return m}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js");function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var m=(n=p.meta.type("Tw2GeometryTrackGroup"),i=p.meta.string,o=p.meta.struct("Tw2GeometryModel"),a=p.meta.list("Tw2GeometryTransformTrack"),n((l=y((c=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"name",l,this),d(this,"model",s,this),d(this,"transformTracks",f,this)}).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=y(c.prototype,"model",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y(c.prototype,"transformTracks",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=c))||u)},"./core/geometry/Tw2GeometryTransformTrack.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryTransformTrack",(function(){return h}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js");function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var h=(n=y.meta.type("Tw2GeometryTransformTrack"),i=y.meta.string,o=y.meta.struct("Tw2GeometryCurve"),a=y.meta.struct("Tw2GeometryCurve"),u=y.meta.unknown,n((s=b((l=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"name",s,this),m(this,"position",f,this),m(this,"orientation",p,this),m(this,"scaleShear",d,this)}).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=b(l.prototype,"position",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=b(l.prototype,"orientation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b(l.prototype,"scaleShear",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=l))||c)},"./core/geometry/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/geometry/Tw2BlendShapeData.js");r.d(t,"Tw2BlendShapeData",(function(){return n.Tw2BlendShapeData}));var i=r("./core/geometry/Tw2GeometryAnimation.js");r.d(t,"Tw2GeometryAnimation",(function(){return i.Tw2GeometryAnimation}));var o=r("./core/geometry/Tw2GeometryBone.js");r.d(t,"Tw2GeometryBone",(function(){return o.Tw2GeometryBone}));var a=r("./core/geometry/Tw2GeometryCurve.js");r.d(t,"Tw2GeometryCurve",(function(){return a.Tw2GeometryCurve}));var u=r("./core/geometry/Tw2GeometryMesh.js");r.d(t,"Tw2GeometryMesh",(function(){return u.Tw2GeometryMesh})),r.d(t,"ErrSystemMirrorDisabled",(function(){return u.ErrSystemMirrorDisabled})),r.d(t,"ErrVertexDeclarationNotFound",(function(){return u.ErrVertexDeclarationNotFound}));var c=r("./core/geometry/Tw2GeometryMeshArea.js");r.d(t,"Tw2GeometryMeshArea",(function(){return c.Tw2GeometryMeshArea}));var l=r("./core/geometry/Tw2GeometryMeshBinding.js");r.d(t,"Tw2GeometryMeshBinding",(function(){return l.Tw2GeometryMeshBinding}));var s=r("./core/geometry/Tw2GeometryModel.js");r.d(t,"Tw2GeometryModel",(function(){return s.Tw2GeometryModel}));var f=r("./core/geometry/Tw2GeometrySkeleton.js");r.d(t,"Tw2GeometrySkeleton",(function(){return f.Tw2GeometrySkeleton}));var p=r("./core/geometry/Tw2GeometryTrackGroup.js");r.d(t,"Tw2GeometryTrackGroup",(function(){return p.Tw2GeometryTrackGroup}));var d=r("./core/geometry/Tw2GeometryTransformTrack.js");r.d(t,"Tw2GeometryTransformTrack",(function(){return d.Tw2GeometryTransformTrack}))},"./core/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/batch/index.js");r.d(t,"Tw2BatchAccumulator",(function(){return n.Tw2BatchAccumulator})),r.d(t,"Tw2BatchAccumulator2",(function(){return n.Tw2BatchAccumulator2})),r.d(t,"Tw2ForwardingRenderBatch",(function(){return n.Tw2ForwardingRenderBatch})),r.d(t,"Tw2GeometryBatch",(function(){return n.Tw2GeometryBatch})),r.d(t,"Tw2GeometryLineBatch",(function(){return n.Tw2GeometryLineBatch})),r.d(t,"Tw2RenderBatch",(function(){return n.Tw2RenderBatch})),r.d(t,"Tw2InstancedMeshBatch",(function(){return n.Tw2InstancedMeshBatch}));var i=r("./core/data/index.js");r.d(t,"Tw2PerObjectData",(function(){return i.Tw2PerObjectData})),r.d(t,"Tw2RawData",(function(){return i.Tw2RawData})),r.d(t,"ErrRawDataElementNotFound",(function(){return i.ErrRawDataElementNotFound}));var o=r("./core/geometry/index.js");r.d(t,"Tw2BlendShapeData",(function(){return o.Tw2BlendShapeData})),r.d(t,"Tw2GeometryAnimation",(function(){return o.Tw2GeometryAnimation})),r.d(t,"Tw2GeometryBone",(function(){return o.Tw2GeometryBone})),r.d(t,"Tw2GeometryCurve",(function(){return o.Tw2GeometryCurve})),r.d(t,"Tw2GeometryMesh",(function(){return o.Tw2GeometryMesh})),r.d(t,"ErrSystemMirrorDisabled",(function(){return o.ErrSystemMirrorDisabled})),r.d(t,"ErrVertexDeclarationNotFound",(function(){return o.ErrVertexDeclarationNotFound})),r.d(t,"Tw2GeometryMeshArea",(function(){return o.Tw2GeometryMeshArea})),r.d(t,"Tw2GeometryMeshBinding",(function(){return o.Tw2GeometryMeshBinding})),r.d(t,"Tw2GeometryModel",(function(){return o.Tw2GeometryModel})),r.d(t,"Tw2GeometrySkeleton",(function(){return o.Tw2GeometrySkeleton})),r.d(t,"Tw2GeometryTrackGroup",(function(){return o.Tw2GeometryTrackGroup})),r.d(t,"Tw2GeometryTransformTrack",(function(){return o.Tw2GeometryTransformTrack}));var a=r("./core/mesh/index.js");r.d(t,"Tw2Effect",(function(){return a.Tw2Effect})),r.d(t,"Tw2InstancedMesh",(function(){return a.Tw2InstancedMesh})),r.d(t,"Tw2Mesh",(function(){return a.Tw2Mesh})),r.d(t,"Tw2MeshArea",(function(){return a.Tw2MeshArea})),r.d(t,"Tw2MeshLineArea",(function(){return a.Tw2MeshLineArea}));var u=r("./core/model/index.js");r.d(t,"Tw2Animation",(function(){return u.Tw2Animation})),r.d(t,"Tw2AnimationController",(function(){return u.Tw2AnimationController})),r.d(t,"Tw2Bone",(function(){return u.Tw2Bone})),r.d(t,"Tw2BoneBinding",(function(){return u.Tw2BoneBinding})),r.d(t,"Tw2MeshBinding",(function(){return u.Tw2MeshBinding})),r.d(t,"Tw2Model",(function(){return u.Tw2Model})),r.d(t,"Tw2Track",(function(){return u.Tw2Track})),r.d(t,"Tw2TrackGroup",(function(){return u.Tw2TrackGroup}));var c=r("./core/parameter/index.js");r.d(t,"Tw2Parameter",(function(){return c.Tw2Parameter})),r.d(t,"Tw2FloatParameter",(function(){return c.Tw2FloatParameter})),r.d(t,"Tw2Matrix4Parameter",(function(){return c.Tw2Matrix4Parameter})),r.d(t,"Tw2TransformParameter",(function(){return c.Tw2TransformParameter})),r.d(t,"Tw2VariableParameter",(function(){return c.Tw2VariableParameter})),r.d(t,"Tw2Vector2Parameter",(function(){return c.Tw2Vector2Parameter})),r.d(t,"Tw2Vector3Parameter",(function(){return c.Tw2Vector3Parameter})),r.d(t,"Tw2Vector4Parameter",(function(){return c.Tw2Vector4Parameter})),r.d(t,"Tw2TextureParameter",(function(){return c.Tw2TextureParameter}));var l=r("./core/post/index.js");r.d(t,"Tw2PostProcess",(function(){return l.Tw2PostProcess}));var s=r("./core/reader/index.js");r.d(t,"CAKEReader",(function(){return s.CAKEReader})),r.d(t,"GR2JsonReader",(function(){return s.GR2JsonReader})),r.d(t,"OBJReader",(function(){return s.OBJReader})),r.d(t,"WBGReader",(function(){return s.WBGReader})),r.d(t,"Gr2CurveDataD3I1K16uC16u",(function(){return s.Gr2CurveDataD3I1K16uC16u})),r.d(t,"Gr2CurveDataD3I1K8uC8u",(function(){return s.Gr2CurveDataD3I1K8uC8u})),r.d(t,"Gr2CurveDataD3Constant32f",(function(){return s.Gr2CurveDataD3Constant32f})),r.d(t,"Gr2CurveDataD3I1K32fC32f",(function(){return s.Gr2CurveDataD3I1K32fC32f})),r.d(t,"Gr2CurveDataD3K8uC8u",(function(){return s.Gr2CurveDataD3K8uC8u})),r.d(t,"Gr2CurveDataD3K16uC16u",(function(){return s.Gr2CurveDataD3K16uC16u})),r.d(t,"Gr2CurveDataD4Constant32f",(function(){return s.Gr2CurveDataD4Constant32f})),r.d(t,"Gr2CurveDataD4nK8uC7u",(function(){return s.Gr2CurveDataD4nK8uC7u})),r.d(t,"Gr2CurveDataD4nK16uC15u",(function(){return s.Gr2CurveDataD4nK16uC15u})),r.d(t,"Gr2CurveDataDaConstant32f",(function(){return s.Gr2CurveDataDaConstant32f})),r.d(t,"Gr2CurveDataDaIdentity",(function(){return s.Gr2CurveDataDaIdentity})),r.d(t,"Gr2CurveDataDaK8uC8u",(function(){return s.Gr2CurveDataDaK8uC8u})),r.d(t,"Gr2CurveDataDaK16uC16u",(function(){return s.Gr2CurveDataDaK16uC16u})),r.d(t,"Gr2CurveDataDaK32fC32f",(function(){return s.Gr2CurveDataDaK32fC32f})),r.d(t,"Gr2CurveDataDaKeyframes32f",(function(){return s.Gr2CurveDataDaKeyframes32f})),r.d(t,"Gr2CurveDataD9I1K16uC16u",(function(){return s.Gr2CurveDataD9I1K16uC16u})),r.d(t,"Gr2CurveDataD9I1K8uC8u",(function(){return s.Gr2CurveDataD9I1K8uC8u})),r.d(t,"Gr2CurveDataD9I3K16uC16u",(function(){return s.Gr2CurveDataD9I3K16uC16u})),r.d(t,"Gr2CurveDataD9I3K8uC8u",(function(){return s.Gr2CurveDataD9I3K8uC8u})),r.d(t,"Gr2CurveReader",(function(){return s.Gr2CurveReader})),r.d(t,"ErrGr2CurveDataFormatUnsupported",(function(){return s.ErrGr2CurveDataFormatUnsupported})),r.d(t,"Tw2BlackReader",(function(){return s.Tw2BlackReader})),r.d(t,"Tw2BinaryReader",(function(){return s.Tw2BinaryReader})),r.d(t,"ErrBinaryFormat",(function(){return s.ErrBinaryFormat})),r.d(t,"ErrBinaryObjectTypeNotFound",(function(){return s.ErrBinaryObjectTypeNotFound})),r.d(t,"Tw2ObjectReader",(function(){return s.Tw2ObjectReader}));var f=r("./core/resource/index.js");r.d(t,"Tw2EffectRes",(function(){return f.Tw2EffectRes})),r.d(t,"ErrShaderVersion",(function(){return f.ErrShaderVersion})),r.d(t,"ErrShaderHeaderSize",(function(){return f.ErrShaderHeaderSize})),r.d(t,"Tw2GeometryRes",(function(){return f.Tw2GeometryRes})),r.d(t,"ErrGeometryMeshMissingParticleElement",(function(){return f.ErrGeometryMeshMissingParticleElement})),r.d(t,"ErrGeometryMeshElementComponentsMissing",(function(){return f.ErrGeometryMeshElementComponentsMissing})),r.d(t,"ErrGeometryMeshAreaMissing",(function(){return f.ErrGeometryMeshAreaMissing})),r.d(t,"ErrGeometryMeshBoneNameInvalid",(function(){return f.ErrGeometryMeshBoneNameInvalid})),r.d(t,"ErrGeometryMeshEffectBinding",(function(){return f.ErrGeometryMeshEffectBinding})),r.d(t,"ErrGeometryFileType",(function(){return f.ErrGeometryFileType})),r.d(t,"Tw2LoadingObject",(function(){return f.Tw2LoadingObject})),r.d(t,"Tw2Resource",(function(){return f.Tw2Resource})),r.d(t,"ErrResourceFormatInvalid",(function(){return f.ErrResourceFormatInvalid})),r.d(t,"ErrResourceFormatUnsupported",(function(){return f.ErrResourceFormatUnsupported})),r.d(t,"ErrResourceFormatNotImplemented",(function(){return f.ErrResourceFormatNotImplemented})),r.d(t,"Tw2TextureRes",(function(){return f.Tw2TextureRes})),r.d(t,"Tw2TextureResHTMLAttachment",(function(){return f.Tw2TextureResHTMLAttachment})),r.d(t,"Tw2VideoRes",(function(){return f.Tw2VideoRes}));var p=r("./core/sampler/index.js");r.d(t,"Tw2SamplerState",(function(){return p.Tw2SamplerState})),r.d(t,"Tw2SamplerOverride",(function(){return p.Tw2SamplerOverride}));var d=r("./core/shader/index.js");r.d(t,"Tw2Shader",(function(){return d.Tw2Shader})),r.d(t,"ErrShaderCompile",(function(){return d.ErrShaderCompile})),r.d(t,"ErrShaderLink",(function(){return d.ErrShaderLink})),r.d(t,"Tw2ShaderAnnotation",(function(){return d.Tw2ShaderAnnotation})),r.d(t,"Tw2ShaderPass",(function(){return d.Tw2ShaderPass})),r.d(t,"Tw2ShaderPermutation",(function(){return d.Tw2ShaderPermutation})),r.d(t,"ErrShaderPermutationOptionInvalid",(function(){return d.ErrShaderPermutationOptionInvalid})),r.d(t,"Tw2ShaderProgram",(function(){return d.Tw2ShaderProgram})),r.d(t,"Tw2ShaderStage",(function(){return d.Tw2ShaderStage})),r.d(t,"Tw2ShaderStageConstant",(function(){return d.Tw2ShaderStageConstant})),r.d(t,"Tw2ShaderStageTexture",(function(){return d.Tw2ShaderStageTexture})),r.d(t,"Tw2ShaderState",(function(){return d.Tw2ShaderState})),r.d(t,"Tw2ShaderTechnique",(function(){return d.Tw2ShaderTechnique}));var y=r("./core/store/index.js");r.d(t,"Tw2GenericStore",(function(){return y.Tw2GenericStore})),r.d(t,"Tw2ConstructorStore",(function(){return y.Tw2ConstructorStore})),r.d(t,"Tw2VariableTypeStore",(function(){return y.Tw2VariableTypeStore})),r.d(t,"ErrStoreVariableTypeNotFoundByValue",(function(){return y.ErrStoreVariableTypeNotFoundByValue})),r.d(t,"Tw2VariableStore",(function(){return y.Tw2VariableStore})),r.d(t,"Tw2ResourcePathStore",(function(){return y.Tw2ResourcePathStore})),r.d(t,"ErrStorePathUndefined",(function(){return y.ErrStorePathUndefined})),r.d(t,"Tw2SchemaStore",(function(){return y.Tw2SchemaStore})),r.d(t,"Tw2ResourceDynamicPathStore",(function(){return y.Tw2ResourceDynamicPathStore})),r.d(t,"Tw2ResourceExtensionStore",(function(){return y.Tw2ResourceExtensionStore}));var m=r("./core/value/index.js");r.d(t,"Tw2Float",(function(){return m.Tw2Float}));var b=r("./core/vertex/index.js");r.d(t,"Tw2VertexDeclaration",(function(){return b.Tw2VertexDeclaration})),r.d(t,"Tw2VertexElement",(function(){return b.Tw2VertexElement}));var h=r("./core/Tw2RuntimeInstanceData.js");r.d(t,"Tw2RuntimeInstanceData",(function(){return h.Tw2RuntimeInstanceData}));var v=r("./core/Tw2Frustum.js");r.d(t,"Tw2Frustum",(function(){return v.Tw2Frustum}));var g=r("./core/Tw2DepthRenderTarget.js");r.d(t,"Tw2DepthRenderTarget",(function(){return g.Tw2DepthRenderTarget}));var w=r("./core/Tw2RenderTarget.js");r.d(t,"Tw2RenderTarget",(function(){return w.Tw2RenderTarget}));var x=r("./core/Tw2Error.js");r.d(t,"Tw2Error",(function(){return x.Tw2Error})),r.d(t,"ErrFeatureNotImplemented",(function(){return x.ErrFeatureNotImplemented})),r.d(t,"ErrIndexBounds",(function(){return x.ErrIndexBounds})),r.d(t,"ErrWrapped",(function(){return x.ErrWrapped})),r.d(t,"ErrSingletonInstantiation",(function(){return x.ErrSingletonInstantiation})),r.d(t,"ErrAbstractClass",(function(){return x.ErrAbstractClass})),r.d(t,"ErrAbstractMethod",(function(){return x.ErrAbstractMethod}));var _=r("./core/Tw2EventEmitter.js");r.d(t,"Tw2EventEmitter",(function(){return _.Tw2EventEmitter}));var z=r("./core/Tw2RayCaster.js");r.d(t,"Tw2RayCaster",(function(){return z.Tw2RayCaster}));var S=r("./core/Tw2Transform.js");r.d(t,"Tw2Transform",(function(){return S.Tw2Transform}));var j=r("./core/Tw2Picker.js");r.d(t,"Tw2Picker",(function(){return j.Tw2Picker}))},"./core/mesh/Tw2Effect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Effect",(function(){return Q}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R=r("./global/utils/index.js"),P=r("./global/index.js"),D=r("./core/parameter/Tw2TextureParameter.js"),A=r("./core/parameter/Tw2Vector4Parameter.js"),M=r("./core/reader/Tw2BlackPropertyReaders.js"),C=r("./core/resource/index.js"),k=r("../shaders/index.js");function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function G(e,t,r){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=V(e);if(t){var i=V(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return N(this,r)}}function N(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function X(e,t,r){return t&&W(e.prototype,t),r&&W(e,r),e}var K=function(){function e(){H(this,e)}return X(e,null,[{key:"blackStruct",value:function(e){var t=new A.Tw2Vector4Parameter;return Object.defineProperty(t,"isConstant",{value:!0,writable:!1}),t.name=e.ReadStringU16(),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),t.SetValue(e.ReadF32Array(4)),t}}]),e}(),Y=function(){function e(){H(this,e),this.name="",this.value=""}return X(e,null,[{key:"blackStruct",value:function(e){var t=new this;return t.name=e.ReadStringU16(),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),t.value=e.ReadStringU16(),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),t}}]),e}(),Q=(n=R.meta.type("Tw2Effect"),i=R.meta.stage(1),o=R.meta.string,a=R.meta.path,u=R.meta.struct("Tw2EffectRes"),c=R.meta.isPrivate,l=R.meta.isPrivate,s=R.meta.notImplemented,f=R.meta.notImplemented,p=R.meta.struct("Tw2Shader"),d=R.meta.isPrivate,y=R.meta.boolean,m=R.meta.string,n(b=i((O=T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(r,e);var t=B(r);function r(){var e;H(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return L(e=t.call.apply(t,[this].concat(i)),"name",v,U(e)),L(e,"effectFilePath",g,U(e)),L(e,"effectRes",w,U(e)),e.parameters={},L(e,"techniques",x,U(e)),L(e,"samplerOverrides",_,U(e)),L(e,"options",z,U(e)),L(e,"shader",S,U(e)),L(e,"autoParameter",j,U(e)),L(e,"defaultTechnique",E,U(e)),e._isAttached=!1,e}return X(r,[{key:"Initialize",value:function(){this.UpdateValues()}},{key:"SetValue",value:function(e,t){this.effectFilePath=e.toLowerCase(),this.autoParameter=!0,this.UpdateValues(t)}},{key:"GetValue",value:function(){return this._isAttached?null:this.effectFilePath}},{key:"HasTechnique",value:function(e){return this.IsGood()&&e in this.techniques}},{key:"AttachEffectRes",value:function(e){return this._SetEffectRes(e,!0)}},{key:"_SetEffectRes",value:function(e,t){return this.effectRes!==e&&(this._RemoveEffectRes(),this._isAttached=!!t,this.effectRes=e,e.RegisterNotification(this),!0)}},{key:"_RemoveEffectRes",value:function(){var e=this.effectRes;return!!e&&(this.effectRes=null,this.shader=null,this._isAttached=!1,this.UnBindParameters(),e.UnregisterNotification(this),this.EmitEvent(C.Tw2Resource.Event.RES_REMOVED,this,e),!0)}},{key:"OnValueChanged",value:function(e){var t=null;this.isAttached?t=this.effectRes:(this.effectFilePath=this.effectFilePath?this.effectFilePath.toLowerCase():"",this.effectFilePath&&("sm_json"!==Object(R.getPathExtension)(this.effectFilePath)&&(this.effectFilePath=r.getOverriddenShaderPath(this.effectFilePath)),"fx"===Object(R.getPathExtension)(this.effectFilePath)&&(this.effectFilePath=P.device.ToEffectPath(this.effectFilePath)),t=P.tw2.GetResource(this.effectFilePath))),this._SetEffectRes(t)&&this.BindParameters(e)}},{key:"FindParameter",value:function(e){return this.parameters[e]||null}},{key:"IsGood",value:function(){return this.KeepAlive(),null!==this.shader}},{key:"KeepAlive",value:function(){for(var e=this.GetResources(),t=0;t<e.length;t++)e[t].KeepAlive()}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effectRes&&!e.includes(this.effectRes)&&e.push(this.effectRes),this.PerChild((function(t){t.struct.GetResources&&t.struct.GetResources(e)})),e}},{key:"OnResPrepared",value:function(e){if(this.effectRes!==e)return!1;this.effectRes=e,this.shader=null;try{this.shader=e.GetShader(this.options),this.BindParameters({controller:e}),this.EmitEvent(C.Tw2Resource.Event.RES_PREPARED,this,e),e.UnregisterNotification(this)}catch(t){e.OnError(t)}return!0}},{key:"OnResEvent",value:function(e,t){return C.Tw2Resource.parentOnResEvent(this,"effectRes",e,t)}},{key:"SetTechniquePassStateOverride",value:function(e,t,r,n){this.techniques[e]||(this.techniques[e]=[]),this.techniques[e][t]||(this.techniques[e][t]={state:[]}),this.techniques[e][t].state||(this.techniques[e][t].state=[]);var i=this.techniques[e][t].state,o=i.find((function(e){return e.state===r}));o?o.value=n:i.push({state:r,value:n})}},{key:"GetTechniquePassStateOverrides",value:function(e,t){return e in this.techniques&&this.techniques[e][t]&&this.techniques[e][t].state?this.techniques[e][t].state:null}},{key:"UnBindParameters",value:function(e){for(var t in this.techniques)if(this.techniques.hasOwnProperty(t))for(var r=this.techniques[t],n=0;n<r.length;++n)if(r[n].stages){for(var i=0;i<r[n].stages.length;++i)for(var o=0;o<r[n].stages[i].reroutedParameters.length;++o)r[n].stages[i].reroutedParameters[o].Unbind();r[n].stages.splice(0)}for(var a in this.parameters)this.parameters.hasOwnProperty(a)&&(this.parameters[a].usedByCurrentEffect=!1);for(var u in this.samplerOverrides)this.samplerOverrides.hasOwnProperty(u)&&this.samplerOverrides[u]&&(this.samplerOverrides[u].usedByCurrentEffect=!1);e&&e.skipEvents||this.EmitEvent("unbound",this,e)}},{key:"BindParameters",value:function(e){if(!this.IsGood())return this.UnBindParameters(),!1;this.UnBindParameters({skipEvents:!0}),this.shader.HasConstant("objectId")&&(this.parameters.objectId||(this.parameters.objectId=new A.Tw2Vector4Parameter("objectId")),this.parameters.objectId.x=this._id);var t=[];for(var n in this.shader.techniques)if(this.shader.techniques.hasOwnProperty(n)){for(var i=this.shader.techniques[n],o=[],a=0;a<i.passes.length;++a){for(var u={state:this.GetTechniquePassStateOverrides(n,a),stages:[]},c=0;c<i.passes[a].stages.length;++c){var l=i.passes[a].stages[c],s={};s.constantBuffer=new Float32Array(l.constantSize),s.reroutedParameters=[],s.parameters=[],s.textures=[],s.constantBuffer.set(l.constantValues);for(var f=s.constantBuffer,p=0;p<l.constants.length;++p)if(!r.ConstantIgnore.includes(l.constants[p].name)){var d=l.constants[p],y=d.name,m=d.type,b=d.offset,h=d.size,v=d.isAutoregister,g=d.elements,w=void 0;if(y in this.parameters){w=this.parameters[y];try{w.Bind(f,b,h)?s.reroutedParameters.push(w):s.parameters.push({parameter:w,constantBuffer:f,offset:b,size:h})}catch(e){console.dir({effect:this,parameter:w})}}else if(P.tw2.HasVariable(y))s.parameters.push({parameter:P.tw2.GetVariable(y),constantBuffer:f,offset:b,size:h});else if(v&&m)(w=P.tw2.CreateVariable(y,void 0,m))&&(this.parameters[y]=w,s.parameters.push({parameter:w,constantBuffer:f,offset:b,size:h}));else if(this.autoParameter&&1===g){var x=s.constantBuffer.subarray(b,b+h);0===x.length?x=void 0:1===x.length&&(x=x[0]),(w=P.tw2.CreateVariable(y,x,m))&&(this.parameters[y]=w,w.Bind(f,b,h)?s.reroutedParameters.push(w):s.parameter.push({parameter:w,constantBuffer:f,offset:b,size:h}))}w&&(w.usedByCurrentEffect=!0)}for(var _=0;_<l.textures.length;++_){var z=l.textures[_],S=z.name,j=z.isAutoregister,E=null;if(S in this.parameters?E=this.parameters[S]:P.tw2.HasVariable(S)?E=P.tw2.GetVariable(S):j?E=this.parameters[S]=P.tw2.CreateVariable(S,void 0,D.Tw2TextureParameter):this.autoParameter&&(E=this.parameters[S]=new D.Tw2TextureParameter(S)),E){E.usedByCurrentEffect=!0;for(var T={parameter:E,slot:l.textures[_].registerIndex,sampler:null},O=0;O<l.samplers.length;++O){var R=l.samplers[O],M=R.registerIndex,C=R.name;if(-1===t.indexOf(C)&&(this.samplerOverrides[C]||(this.samplerOverrides[C]=null),t.push(C),t.sort()),M===T.slot){if(C in this.samplerOverrides&&this.samplerOverrides[C]){var k=this.samplerOverrides[C];T.sampler=k.GetSampler(l.samplers[O]),k.usedByCurrentEffect=!0}else T.sampler=l.samplers[O],this.samplerOverrides[C]=null;break}}0===c&&(T.slot+=12),s.textures.push(T)}}u.stages.push(s)}o.push(u)}this.techniques[n]=o}if(this.autoParameter){for(var I in this.parameters)if(this.parameters.hasOwnProperty(I)){var L=this.parameters[I];L&&L.usedByCurrentEffect||Reflect.deleteProperty(this.parameters,I)}for(var G in this.samplerOverrides)if(this.samplerOverrides.hasOwnProperty(G)){var F=this.samplerOverrides[G];F?F.usedByCurrentEffect||Reflect.deleteProperty(this.samplerOverrides,G):-1===t.indexOf(G)&&Reflect.deleteProperty(this.samplerOverrides,G)}}return e&&e.skipEvents||(this.EmitEvent("modified",this,e),this.EmitEvent("rebuilt",this,e)),P.device.effectObserver&&P.device.effectObserver.OnEffectChanged(this),!0}},{key:"ApplyPass",value:function(e,t){if(this.IsGood()&&e in this.techniques&&!(t>=this.techniques[e].length)){this.shader.ApplyPass(e,t,this.techniques[e][t].state);for(var r=this.techniques[e][t],n=this.shader.techniques[e].passes[t],i=P.device,o=i.gl,a=i.IsAlphaTestEnabled()&&n.shadowShaderProgram?n.shadowShaderProgram:n.shaderProgram,u=0;u<2;++u){for(var c=r.stages[u],l=0;l<c.parameters.length;++l){var s=c.parameters[l];s.parameter.Apply(s.constantBuffer,s.offset,s.size)}for(var f=0;f<c.textures.length;++f){var p=c.textures[f];p.parameter.Apply(p.slot,p.sampler,a.volumeSlices[p.sampler.registerIndex])}}var d=a.constantBufferHandles;d[0]&&o.uniform4fv(d[0],r.stages[0].constantBuffer),d[7]&&o.uniform4fv(d[7],r.stages[1].constantBuffer),i.perFrameVSData&&d[1]&&o.uniform4fv(d[1],i.perFrameVSData.data),i.perFramePSData&&d[2]&&o.uniform4fv(d[2],i.perFramePSData.data);var y=i.perObjectData;y&&(y.vs&&d[3]&&o.uniform4fv(d[3],y.vs.data),y.ps&&d[4]&&o.uniform4fv(d[4],y.ps.data),y.ffe&&d[5]&&o.uniform4fv(d[5],y.ffe.data)),i.perFrameCustomVSData&&d[8]&&o.uniform4fv(d[8],i.perFrameCustomVSData.data),i.perFrameCustomPSData&&d[9]&&o.uniform4fv(d[9],i.perFrameCustomPSData.data)}}},{key:"GetPassCount",value:function(e){return this.HasTechnique(e)?this.techniques[e].length:0}},{key:"GetPassInput",value:function(e,t){return!this.HasTechnique(e)||t>=this.techniques[e].length?null:P.device.IsAlphaTestEnabled()&&this.shader.techniques[e].passes[t].shadowShaderProgram?this.shader.techniques[e].passes[t].shadowShaderProgram.input:this.shader.techniques[e].passes[t].shaderProgram.input}},{key:"Render",value:function(e,t){for(var r=this.GetPassCount(t),n=0;n<r;++n)this.ApplyPass(t,n),e(this,n)}},{key:"GetTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.getParameterObject(this.parameters,e,!0,!1,!0)}},{key:"GetParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.getParameterObject(this.parameters,e,!1,!0,!0)}},{key:"GetOverrides",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.getParameterObject(this.parameters,e,!0,!0,!1)}},{key:"SetTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=r.setParameterObject(this.parameters,e,!0,!1,!0);return n&&!t&&this.UpdateValues(),n}},{key:"SetParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=r.setParameterObject(this.parameters,e);return n&&!t&&this.UpdateValues(),n}},{key:"SetOverrides",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=r.setParameterObject(this.parameters,r.getNormalizedOverrides(e),!0,!0,!1);return n&&!t&&this.UpdateValues(),n}},{key:"PopulateParameters",value:function(e){this.autoParameter=!0,this.BindParameters(e)}},{key:"PerChild",value:function(e,t){var n=G(V(r.prototype),"PerChild",this).call(this,e,t);if(void 0!==n)return n;var i=this.parameters;for(var o in i)if(i.hasOwnProperty(o)){var a=e({struct:i[o],parent:i,key:o,path:"/parameters/".concat(o)});if(void 0!==a)return a}}},{key:"isAttached",get:function(){return this._isAttached}},{key:"res",get:function(){return this.effectRes}}],[{key:"getOverriddenShaderPath",value:function(e){return this.UNPACKED_TEXTURES?Object(k.getOverriddenShaderPath)(e):e}},{key:"onListener",value:function(e,t,r,n){return"rebuilt"===t&&e.IsGood()?(r.call(n,e,e.effectRes),!0):C.Tw2Resource.parentOnListener(e,"effectRes",t,r,n)}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return!1;var n=t.parameters,i=t.textures,o=t.overrides,a=t.options,u=t.effectFilePath,c=void 0===u?"":u,l=Object(R.assignIfExists)(e,t,["name","display","autoParameter"]);return n&&e.SetParameters(n,!0)&&(l=!0),o&&e.SetOverrides(o,!0)&&(l=!0),i&&e.SetTextures(i,!0)&&(l=!0),a&&(e.options=Object.assign(a),e.effectRes&&(e.shader=e.effectRes.GetShader(a)),l=!0),c&&e.effectFilePath!==c&&(e.effectFilePath=c.toLowerCase(),l=!0),l&&!r.skipUpdate&&e.UpdateValues(r),l}},{key:"from",value:function(e,t){return Object(R.isString)(e)&&(e={effectFilePath:e,autoParameter:!0}),G(V(r),"from",this).call(this,e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(R.assignIfExists)(t,e,["name","display","effectFilePath","autoParameter"]),t.parameters=e.GetParameters(),t.textures=e.GetTextures(),t.overrides=e.GetOverrides(),t.options=Object.assign(e.options),t}},{key:"getParameterObject",value:function(e,t,r,n,i){for(var o in e)e.hasOwnProperty(o)&&(e[o]instanceof D.Tw2TextureParameter?(i||(t[o+"Sampler"]=e[o].GetOverrides()||null),n||(t[o]=e[o].GetValue())):r||(t[o]=e[o].GetValue([])));return t}},{key:"getNormalizedOverrides",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};for(var r in e)e.hasOwnProperty(r)&&(r.indexOf("Sampler")!==r.length-7?t[r+"Sampler"]=e[r]:t[r]=e[r]);return t}},{key:"setParameterObject",value:function(e,t,r,n,i){var o=!1;for(var a in t)if(t.hasOwnProperty(a)&&void 0!==t[a]){var u=t[a],c=!1;if((Object(R.isPlain)(u)||a.includes("Sampler")&&a.lastIndexOf("Sampler")===a.length-7)&&(a=a.replace("Sampler",""),c=!0),a in e)e[a]instanceof D.Tw2TextureParameter?c?i||(null===u?(e[a].RemoveOverrides(),o=!0):e[a].SetOverrides(u)&&(o=!0)):n||(null===u?(e[a].Destroy(),Reflect.delete(e,a),o=!0):!n&&e[a].SetValue(u)&&(o=!0)):r||(null===u?(e[a].Destroy(),Reflect.delete(e,a),o=!0):e[a].SetValue(u)&&(o=!0));else if(null!==u)if(c)i||(e[a]=new D.Tw2TextureParameter(a),e[a].SetOverrides(u),o=!0);else{var l=P.tw2.CreateVariable(a,u);l instanceof D.Tw2TextureParameter?!n&&l&&(e[a]=l,o=!0):r||(e[a]=l,o=!0)}}return o}}]),r}(R.meta.Model),T.UNPACKED_TEXTURES=!1,T.ConstantIgnore=["PerFrameVS","PerObjectVS","PerFramePS","PerObjectPS","PerObjectPSInt"],T.blackReaders={parameters:Object(M.fromList)({key:"name"}),options:Object(M.fromList)({key:"name",value:"value",struct:Y}),resources:Object(M.fromList)({key:"name",reroute:"parameters"}),constParameters:Object(M.fromList)({key:"name",reroute:"parameters",struct:K})},v=q((h=O).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=q(h.prototype,"effectFilePath",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=q(h.prototype,"effectRes",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=q(h.prototype,"techniques",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_=q(h.prototype,"samplerOverrides",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),z=q(h.prototype,"options",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),S=q(h.prototype,"shader",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=q(h.prototype,"autoParameter",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=q(h.prototype,"defaultTechnique",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Main"}}),b=h))||b)||b)},"./core/mesh/Tw2InstancedMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2InstancedMesh",(function(){return me}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q=r("./global/utils/index.js"),Z=r("./global/index.js"),J=r("./global/math/index.js"),$=r("./core/batch/index.js"),ee=r("./core/mesh/Tw2Mesh.js"),te=r("./global/constant/index.js"),re=r("./core/index.js");function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function oe(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ie(o,n,i,a,u,"next",e)}function u(e){ie(o,n,i,a,u,"throw",e)}a(void 0)}))}}function ae(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=de(e);if(t){var i=de(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fe(this,r)}}function fe(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?pe(e):t}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var me=(n=Q.meta.todo("Is this deprecated?"),i=Q.meta.type("Tw2InstancedMesh","Tr2InstancedMesh"),o=Q.meta.string,a=Q.meta.boolean,u=Q.meta.list("Tw2MeshArea"),c=Q.meta.struct(),l=Q.meta.list("Tw2MeshArea"),s=Q.meta.notImplemented,f=Q.meta.list("Tw2MeshArea"),p=Q.meta.notImplemented,d=Q.meta.list("Tw2MeshArea"),y=Q.meta.struct("Tw2GeometryResource"),m=Q.meta.isPrivate,b=Q.meta.path,h=Q.meta.struct(),v=Q.meta.path,g=Q.meta.uint,w=Q.meta.vector3,x=Q.meta.notImplemented,_=Q.meta.uint,z=Q.meta.vector3,S=Q.meta.list("Tw2MeshArea"),j=Q.meta.list("Tw2MeshArea"),E=Q.meta.list("Tw2MeshArea"),T=Q.meta.plain,n(O=i((Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(u,e);var t,r,n,i,o,a=se(u);function u(){var e;ue(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ae(e=a.call.apply(a,[this].concat(r)),"name",P,pe(e)),ae(e,"display",D,pe(e)),ae(e,"additiveAreas",A,pe(e)),ae(e,"boundsMethod",M,pe(e)),ae(e,"decalAreas",C,pe(e)),ae(e,"depthAreas",k,pe(e)),ae(e,"distortionAreas",I,pe(e)),ae(e,"geometryResource",L,pe(e)),ae(e,"geometryResPath",G,pe(e)),ae(e,"instanceGeometryResource",F,pe(e)),ae(e,"instanceGeometryResPath",B,pe(e)),ae(e,"instanceMeshIndex",N,pe(e)),ae(e,"maxBounds",U,pe(e)),ae(e,"maxInstanceSize",V,pe(e)),ae(e,"minBounds",q,pe(e)),ae(e,"opaqueAreas",H,pe(e)),ae(e,"pickableAreas",W,pe(e)),ae(e,"transparentAreas",X,pe(e)),ae(e,"visible",K,pe(e)),e}return t=u,r=[{key:"GetMeshIndex",value:function(){return this.instanceMeshIndex}},{key:"SetMeshIndex",value:function(e){this.instanceMeshIndex=e}},{key:"ClearSystemMirror",value:function(){this.IsGood()&&(this.geometryResource.ClearSystemMirror(),this.instanceGeometryResource&&"ClearSystemMirror"in this.instanceGeometryResource&&this.instanceGeometryResource.ClearSystemMirror())}},{key:"Initialize",value:function(){""!==this.geometryResPath&&(this.geometryResource=Z.tw2.GetResource(this.geometryResPath)),""!==this.instanceGeometryResPath&&(this.instanceGeometryResource=Z.tw2.GetResource(this.instanceGeometryResPath))}},{key:"FetchGeometryResPath",value:(o=oe(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee.Tw2Mesh.HandleFetch(this,"geometryResPath","geometryResource",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"FetchInstanceGeometryResPath",value:(i=oe(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee.Tw2Mesh.HandleFetch(this,"instanceGeometryResPath","instanceGeometryResource",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"Intersect",value:function(e,t,r,n){throw new re.ErrFeatureNotImplemented({feature:"Instance mesh intersection"})}},{key:"RebuildBounds",value:function(e){return!!this.IsGood()&&(this.geometryResource.RebuildBounds(e),"RebuildBounds"in this.instanceGeometryResource&&this.instanceGeometryResource.RebuildBounds(e),!0)}},{key:"GetBoundingBox",value:function(e,t){throw new re.ErrFeatureNotImplemented({feature:"Instance mesh bounds"})}},{key:"GetBoundingSphere",value:function(e,t){throw new re.ErrFeatureNotImplemented({feature:"Instance mesh bounds"})}},{key:"FindParameters",value:function(e,t){return ee.Tw2Mesh.FindParameters(this,e,["transparentAreas","pickableAreas","opaqueAreas","distortionAreas","depthAreas","additiveAreas"],t)}},{key:"FindMeshAreaByTypeAndIndex",value:function(e,t,r){return ee.Tw2Mesh.FindMeshAreaByTypeAndIndex(this,e,t,r)}},{key:"IsGood",value:function(){var e=this.instanceGeometryResource,t=this.geometryResource&&this.geometryResource.IsGood(),r=!!e&&(!e.IsGood||e.IsGood());return t&&r}},{key:"SetGeometryRes",value:function(e){this.geometryResPath=e,this.geometryResource=e?Z.tw2.GetResource(this.geometryResPath):null}},{key:"GetGeometryRes",value:function(){return this.geometryResource}},{key:"SetInstanceGeometryRes",value:function(e){this.instanceGeometryResPath=e,this.instanceGeometryResource=e?Z.tw2.GetResource(this.instanceGeometryResPath):null}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),this.instanceGeometryResource&&"GetResources"in this.instanceGeometryResource&&this.instanceGeometryResource.GetResources(e);var t=Q.perArrayChild;return t(this.additiveAreas,"GetResources",e),t(this.decalAreas,"GetResources",e),t(this.depthAreas,"GetResources",e),t(this.distortionAreas,"GetResources",e),t(this.opaqueAreas,"GetResources",e),t(this.pickableAreas,"GetResources",e),t(this.transparentAreas,"GetResources",e),e}},{key:"GetBatches",value:function(e,t,r){if(!this.IsGood()||!this.display)return!1;var n,i=this.constructor.GetAreaBatches;switch(e){case te.RM_ADDITIVE:this.visible.additiveAreas&&(n=this.additiveAreas);break;case te.RM_DECAL:this.visible.decalAreas&&(n=this.opaqueAreas);break;case te.RM_DISTORTION:this.visible.distortionAreas&&(n=this.distortionAreas);break;case te.RM_OPAQUE:this.visible.opaqueAreas&&(n=this.opaqueAreas);break;case te.RM_TRANSPARENT:this.visible.transparentAreas&&(n=this.transparentAreas);break;case te.RM_PICKABLE:this.visible.pickableAreas&&(n=this.pickableAreas);break;case te.RM_DEPTH:this.visible.depthAreas&&(n=this.depthAreas)}return!!n&&i(this,n,e,t,r)}},{key:"RenderAreas",value:function(e,t,r,n,i){if(this.IsGood()){var o=this.instanceGeometryResource.GetInstanceBuffer(this.instanceMeshIndex);o&&this.geometryResource.RenderAreasInstanced(e,t,r,n,i,o,this.instanceGeometryResource.GetInstanceDeclaration(this.instanceMeshIndex),this.instanceGeometryResource.GetInstanceStride(this.instanceMeshIndex),this.instanceGeometryResource.GetInstanceCount(this.instanceMeshIndex))}}},{key:"EmptyAreas",value:function(){this.additiveAreas.splice(0),this.decalAreas.splice(0),this.depthAreas.splice(0),this.distortionAreas.splice(0),this.opaqueAreas.splice(0),this.pickableAreas.splice(0),this.transparentAreas.splice(0)}},{key:"res",get:function(){return this.geometryResource}}],n=[{key:"from",value:function(e,t){var r=new u;if(r.meshIndex=Object(Q.get)(t,"index",0),e){Object(Q.assignIfExists)(r,e,["name","display","geometryResPath","instanceGeometryResPath","instanceMeshIndex"]);var n=["additiveAreas","decalAreas","depthAreas","distortionAreas","opaqueAreas","pickableAreas","transparentAreas"];Object(Q.assignIfExists)(r.visible,e.visible,n),ee.Tw2Mesh.createAreaIfExists(r,e,n)}return t&&t.skipUpdate||r.Initialize(),r}},{key:"GetAreaBatches",value:function(e,t,r,n,i){for(var o=n.length,a=0;a<t.length;++a){var u=t[a];if(u.effect&&u.display&&u.effect.IsGood()){var c=new $.Tw2InstancedMeshBatch;c.renderMode=r,c.perObjectData=i,c.instanceMesh=e,c.meshIx=u.meshIndex,c.start=u.index,c.count=u.count,c.effect=u.effect,n.Commit(c)}}return n.length!==o}}],r&&ce(t.prototype,r),n&&ce(t,n),u}(Q.meta.Model),P=ye((R=Y).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=ye(R.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),A=ye(R.prototype,"additiveAreas",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=ye(R.prototype,"boundsMethod",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=ye(R.prototype,"decalAreas",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=ye(R.prototype,"depthAreas",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=ye(R.prototype,"distortionAreas",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=ye(R.prototype,"geometryResource",[y,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=ye(R.prototype,"geometryResPath",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),F=ye(R.prototype,"instanceGeometryResource",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=ye(R.prototype,"instanceGeometryResPath",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=ye(R.prototype,"instanceMeshIndex",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=ye(R.prototype,"maxBounds",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec3.create()}}),V=ye(R.prototype,"maxInstanceSize",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=ye(R.prototype,"minBounds",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec3.create()}}),H=ye(R.prototype,"opaqueAreas",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=ye(R.prototype,"pickableAreas",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=ye(R.prototype,"transparentAreas",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=ye(R.prototype,"visible",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{additiveAreas:!0,decalAreas:!0,depthAreas:!0,distortionAreas:!0,opaqueAreas:!0,pickableAreas:!0,transparentAreas:!0}}}),O=R))||O)||O)},"./core/mesh/Tw2Mesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Mesh",(function(){return be}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$=r("./global/utils/index.js"),ee=r("./global/index.js"),te=r("./global/constant/index.js"),re=r("./global/math/box3.js"),ne=r("./global/math/sph3.js");function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){oe(o,n,i,a,u,"next",e)}function u(e){oe(o,n,i,a,u,"throw",e)}a(void 0)}))}}function ue(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ye(e);if(t){var i=ye(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pe(this,r)}}function pe(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var be=(n=$.meta.type("Tw2Mesh","Tr2Mesh"),i=$.meta.string,o=$.meta.list("Tw2MeshArea"),a=$.meta.list("Tw2MeshArea"),u=$.meta.notImplemented,c=$.meta.boolean,l=$.meta.notImplemented,s=$.meta.list("Tw2MeshArea"),f=$.meta.notImplemented,p=$.meta.list("Tw2MeshArea"),d=$.meta.boolean,y=$.meta.list("Tw2MeshArea"),m=$.meta.path,b=$.meta.uint,h=$.meta.list("Tw2MeshArea"),v=$.meta.notImplemented,g=$.meta.list("Tw2MeshArea"),w=$.meta.list("Tw2MeshArea"),x=$.meta.list("Tw2MeshArea"),_=$.meta.plain,z=$.meta.struct("Tw2GeometryRes"),S=$.meta.isPrivate,j=$.meta.float,E=$.meta.notImplemented,T=$.meta.boolean,O=$.meta.notImplemented,R=$.meta.float,P=$.meta.notImplemented,n((J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(i,e);var t,r,n=fe(i);function i(){var e;ce(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return ue(e=n.call.apply(n,[this].concat(r)),"name",M,de(e)),ue(e,"additiveAreas",C,de(e)),ue(e,"decalAreas",k,de(e)),ue(e,"deferGeometryLoad",I,de(e)),ue(e,"depthAreas",L,de(e)),ue(e,"depthNormalAreas",G,de(e)),ue(e,"display",F,de(e)),ue(e,"distortionAreas",B,de(e)),ue(e,"geometryResPath",N,de(e)),ue(e,"meshIndex",U,de(e)),ue(e,"opaqueAreas",V,de(e)),ue(e,"opaquePrepassAreas",q,de(e)),ue(e,"pickableAreas",H,de(e)),ue(e,"transparentAreas",W,de(e)),ue(e,"visible",X,de(e)),ue(e,"geometryResource",K,de(e)),ue(e,"maxVertexScale",Y,de(e)),ue(e,"rotatesVertices",Q,de(e)),ue(e,"maxVertexDisplacement",Z,de(e)),e}return function(e,t,r){t&&le(e.prototype,t),r&&le(e,r)}(i,[{key:"GetMeshIndex",value:function(){return this.meshIndex}},{key:"SetMeshIndex",value:function(e){this.meshIndex=e}},{key:"ClearSystemMirror",value:function(){this.IsGood()&&this.geometryResource.ClearSystemMirror()}},{key:"Initialize",value:function(){""!==this.geometryResPath&&(this.geometryResource=ee.tw2.GetResource(this.geometryResPath))}},{key:"FetchGeometryResPath",value:(r=ae(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.HandleFetch(this,"geometryResPath","geometryResource",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"Intersect",value:function(e,t,r,n){if(this.display&&this.IsGood()&&!e.IsMasked(this))return this.geometryResource.Intersect(e,t,r,n)}},{key:"RebuildBounds",value:function(e){return!!this.IsGood()&&(this.geometryResource.RebuildBounds(e),!0)}},{key:"GetBoundingBox",value:function(e,t){return this.RebuildBounds(t)?this.geometryResource.GetBoundingBox(e):(re.box3.empty(e),null)}},{key:"GetBoundingSphere",value:function(e,t){return this.RebuildBounds(t)?this.geometryResource.GetBoundingSphere(e):(ne.sph3.empty(e),null)}},{key:"SetGeometryRes",value:function(e){this.geometryResPath=e,this.geometryResource=e?ee.tw2.GetResource(this.geometryResPath):null}},{key:"GetGeometryRes",value:function(){return this.geometryResource}},{key:"FindParameters",value:function(e,t){return i.FindParameters(this,e,["transparentAreas","pickableAreas","opaqueAreas","distortionAreas","depthAreas","additiveAreas","opaquePrepassAreas","depthNormalAreas"],t)}},{key:"FindMeshAreaByTypeAndIndex",value:function(e,t,r){return i.FindMeshAreaByTypeAndIndex(this,e,t,r)}},{key:"IsGood",value:function(){return this.geometryResource&&this.geometryResource.IsGood()}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource);var t=$.perArrayChild;return t(this.additiveAreas,"GetResources",e),t(this.decalAreas,"GetResources",e),t(this.depthAreas,"GetResources",e),t(this.distortionAreas,"GetResources",e),t(this.opaqueAreas,"GetResources",e),t(this.pickableAreas,"GetResources",e),t(this.transparentAreas,"GetResources",e),e}},{key:"GetBatches",value:function(e,t,r){if(!this.IsGood()||!this.display)return!1;var n,i=this.constructor.GetAreaBatches;switch(e){case te.RM_ADDITIVE:this.visible.additiveAreas&&(n=this.additiveAreas);break;case te.RM_DECAL:this.visible.decalAreas&&(n=this.decalAreas);break;case te.RM_DISTORTION:this.visible.distortionAreas&&(n=this.distortionAreas);break;case te.RM_OPAQUE:this.visible.opaqueAreas&&(n=this.opaqueAreas);break;case te.RM_TRANSPARENT:this.visible.transparentAreas&&(n=this.transparentAreas);break;case te.RM_DEPTH:this.visible.depthAreas&&(n=this.depthAreas);break;case te.RM_PICKABLE:this.visible.pickableAreas&&(n=this.pickableAreas)}return!!n&&i(this,n,e,t,r)}},{key:"EmptyAreas",value:function(){this.additiveAreas.splice(0),this.decalAreas.splice(0),this.depthAreas.splice(0),this.depthNormalAreas.splice(0),this.distortionAreas.splice(0),this.opaqueAreas.splice(0),this.opaquePrepassAreas.splice(0),this.pickableAreas.splice(0),this.transparentAreas.splice(0)}},{key:"res",get:function(){return this.geometryResource}}],[{key:"HandleFetch",value:(t=ae(regeneratorRuntime.mark((function e(t,r,n,i){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=6;break}if(t[n]&&(t[n].RemoveNotification(this),t[n]=null),!t[r]){e.next=5;break}return this[r]="",e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:return t[r]=i,e.next=9,ee.tw2.Fetch(i);case 9:if(o=e.sent,t[r]!==i||t[n]===o){e.next=13;break}return t[n]=o,e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i){return t.apply(this,arguments)})},{key:"FindParameters",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];Object($.isString)(t)&&(t={parameterName:t});for(var i=t,o=i.parameterName,a=i.areaName,u=i.areaType,c=0;c<r.length;c++){var l=r[c];if(!u||u===l)for(var s=e[l]||[],f=0;f<s.length;f++)if(!a||s[f].name===a){var p=s[f].FindParameter(o,n);p&&!n.includes(p)&&n.push(p)}}return n}},{key:"FindMeshAreaByTypeAndIndex",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e[t];if(!Object($.isArray)(i))throw new ReferenceError("Invalid mesh area type: ".concat(t));if(i)for(var o=0;o<i.length;o++)if(i[o].index===r&&i[o].meshIndex===n)return i[o];return null}},{key:"GetAreaBatches",value:function(e,t,r,n,i){for(var o=n.length,a=0;a<t.length;++a){var u=t[a];if(u.effect&&u.display&&u.effect.IsGood()){var c=new u.constructor.batchType;c.renderMode=r,c.perObjectData=i,c.geometryRes=e.geometryResource,c.meshIx=e.meshIndex,c.start=u.index,c.count=u.count,c.effect=u.effect,n.Commit(c)}}return n.length!==o}},{key:"createAreaIfExists",value:function(e,t,r){r=Object($.toArray)(r);for(var n=0;n<r.length;n++){var i=r[n];if(i in t&&i in e)for(var o=0;o<t[i].length;o++){var a=t[i][o].__type||"Tw2MeshArea",u=ee.tw2.GetClass(a);e[i].push(u.from(t[i][o],{index:o}))}}}},{key:"from",value:function(e,t){var r=new i;if(e){Object($.assignIfExists)(r,e,["name","display","deferGeometryLoad","geometryResPath","meshIndex"]);var n=["additiveAreas","decalAreas","depthAreas","depthNormalAreas","distortionAreas","opaqueAreas","opaquePrepassAreas","pickableAreas","transparentAreas"];Object($.assignIfExists)(r.visible,e.visible,n),this.createAreaIfExists(r,e,n)}return t&&t.skipUpdate||r.Initialize(),r}}]),i}($.meta.Model),M=me((A=J).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=me(A.prototype,"additiveAreas",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=me(A.prototype,"decalAreas",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=me(A.prototype,"deferGeometryLoad",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=me(A.prototype,"depthAreas",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=me(A.prototype,"depthNormalAreas",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=me(A.prototype,"display",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),B=me(A.prototype,"distortionAreas",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=me(A.prototype,"geometryResPath",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),U=me(A.prototype,"meshIndex",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=me(A.prototype,"opaqueAreas",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=me(A.prototype,"opaquePrepassAreas",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=me(A.prototype,"pickableAreas",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=me(A.prototype,"transparentAreas",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=me(A.prototype,"visible",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{additiveAreas:!0,decalAreas:!0,depthAreas:!0,depthNormalAreas:!0,distortionAreas:!0,opaqueAreas:!0,opaquePrepassAreas:!0,pickableAreas:!0,transparentAreas:!0}}}),K=me(A.prototype,"geometryResource",[z,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=me(A.prototype,"maxVertexScale",[j,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Q=me(A.prototype,"rotatesVertices",[T,O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Z=me(A.prototype,"maxVertexDisplacement",[R,P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=A))||D)},"./core/mesh/Tw2MeshArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MeshArea",(function(){return V}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P=r("./core/batch/index.js"),D=r("./global/utils/index.js"),A=r("./core/mesh/Tw2Effect.js");function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var V=(n=D.meta.type("Tw2MeshArea","Tr2MeshArea"),i=D.meta.stage(1),o=D.meta.string,a=D.meta.boolean,u=D.meta.uint,c=D.meta.struct("Tw2Effect"),l=D.meta.uint,s=D.meta.notImplemented,f=D.meta.boolean,p=D.meta.notImplemented,d=D.meta.boolean,y=D.meta.uint,m=D.meta.string,b=D.meta.isPrivate,n(h=i((R=O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(o,e);var t,r,n,i=G(o);function o(){var e;k(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return C(e=i.call.apply(i,[this].concat(r)),"name",g,B(e)),C(e,"display",w,B(e)),C(e,"count",x,B(e)),C(e,"effect",_,B(e)),C(e,"index",z,B(e)),C(e,"reversed",S,B(e)),C(e,"useSHLighting",j,B(e)),C(e,"meshIndex",E,B(e)),C(e,"sofHullAreaName",T,B(e)),e}return t=o,n=[{key:"from",value:function(e,t){var r=new this;return t&&Object(D.assignIfExists)(r,t,"index"),e&&(Object(D.assignIfExists)(r,e,["name","display","count","index","reversed","useSHLighting"]),e.effect&&(r.effect=A.Tw2Effect.from(e.effect))),r}}],(r=[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect?this.effect.GetResources(e):e}},{key:"FindParameter",value:function(e){return this.effect?this.effect.FindParameter(e):null}}])&&I(t.prototype,r),n&&I(t,n),o}(D.meta.Model),O.batchType=P.Tw2GeometryBatch,g=U((v=R).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=U(v.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),x=U(v.prototype,"count",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=U(v.prototype,"effect",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=U(v.prototype,"index",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=U(v.prototype,"reversed",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=U(v.prototype,"useSHLighting",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=U(v.prototype,"meshIndex",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=U(v.prototype,"sofHullAreaName",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=v))||h)||h)},"./core/mesh/Tw2MeshLineArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MeshLineArea",(function(){return L}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j=r("./global/utils/index.js"),E=r("./core/batch/index.js"),T=r("./core/mesh/Tw2MeshArea.js");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var i=k(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return M(this,r)}}function M(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var L=(n=j.meta.type("Tw2MeshLineArea"),i=j.meta.stage(1),o=j.meta.string,a=j.meta.boolean,u=j.meta.uint,c=j.meta.struct("Tw2Effect"),l=j.meta.uint,s=j.meta.notImplemented,f=j.meta.boolean,p=j.meta.notImplemented,d=j.meta.boolean,n(y=i((S=z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(r,e);var t=A(r);function r(){var e;P(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return R(e=t.call.apply(t,[this].concat(i)),"name",b,C(e)),R(e,"display",h,C(e)),R(e,"count",v,C(e)),R(e,"effect",g,C(e)),R(e,"index",w,C(e)),R(e,"reversed",x,C(e)),R(e,"useSHLighting",_,C(e)),e}return r}(T.Tw2MeshArea),z.batchType=E.Tw2GeometryLineBatch,b=I((m=S).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=I(m.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=I(m.prototype,"count",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=I(m.prototype,"effect",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=I(m.prototype,"index",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=I(m.prototype,"reversed",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=I(m.prototype,"useSHLighting",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=m))||y)||y)},"./core/mesh/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/mesh/Tw2Effect.js");r.d(t,"Tw2Effect",(function(){return n.Tw2Effect}));var i=r("./core/mesh/Tw2InstancedMesh.js");r.d(t,"Tw2InstancedMesh",(function(){return i.Tw2InstancedMesh}));var o=r("./core/mesh/Tw2Mesh.js");r.d(t,"Tw2Mesh",(function(){return o.Tw2Mesh}));var a=r("./core/mesh/Tw2MeshArea.js");r.d(t,"Tw2MeshArea",(function(){return a.Tw2MeshArea}));var u=r("./core/mesh/Tw2MeshLineArea.js");r.d(t,"Tw2MeshLineArea",(function(){return u.Tw2MeshLineArea}))},"./core/model/Tw2Animation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Animation",(function(){return D}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x=r("./global/utils/index.js");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D=(n=x.meta.type("Tw2Animation"),i=x.meta.struct("Tw2GeometryAnimation"),o=x.meta.isPrivate,a=x.meta.float,u=x.meta.isPrivate,c=x.meta.float,l=x.meta.boolean,s=x.meta.list("Tw2TrackGroup"),f=x.meta.isPrivate,n((w=g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,r,n,i=E(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),z(t=i.call(this),"animationRes",y,O(t)),z(t,"time",m,O(t)),z(t,"timeScale",b,O(t)),z(t,"cycle",h,O(t)),z(t,"trackGroups",v,O(t)),t._callback=null,t._controller=null,t._state=o.State.FINISHED,t._controller=e,t}return t=o,(r=[{key:"AddCallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._callback=e}},{key:"UpdateCallback",value:function(){if(this._callback){var e=this._callback;e(this,this._controller)&&this._callback===e&&(this._callback=null)}}},{key:"Play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.IsPaused(),r=e.time,n=void 0===r?t?this.time:0:r,i=e.cycle,a=void 0===i?this.cycle:i,u=e.timeScale,c=void 0===u?this.timeScale:u,l=e.callback,s=e.events,f=e.percent;void 0!==f&&(n=this.duration*f),this.time=Math.max(Math.min(n,this.duration),0),this.timeScale=c,this.cycle=a,this._state=o.State.PLAYING,s&&this.add(s),void 0!==l&&this.AddCallback(l),t?(this.EmitEvent("unpause",{animation:this,controller:this._controller}),this._controller.EmitEvent("unpause",this._controller,this)):(this.EmitEvent("play",{animation:this,controller:this._controller}),this._controller.EmitEvent("play",this._controller,this))}},{key:"Pause",value:function(){this.IsPlaying()&&(this._state=o.State.PAUSED,this.EmitEvent("pause",{animation:this,controller:this._controller}),this._controller.EmitEvent("pause",this._controller,this))}},{key:"Stop",value:function(){this.IsFinished()||(this._state=o.State.FINISHED,this.time=this.duration,this.EmitEvent("end",{animation:this,controller:this._controller}),this._controller.EmitEvent("end",this._controller,this),this.UpdateCallback())}},{key:"IsGood",value:function(){return!!this.animationRes}},{key:"IsPlaying",value:function(){return this._state===o.State.PLAYING||this._state===o.State.CYCLING}},{key:"IsPaused",value:function(){return this._state===o.State.PAUSED}},{key:"IsFinished",value:function(){return this._state===o.State.FINISHED}},{key:"Update",value:function(e){if(this.IsFinished())return!1;if(this.IsPaused())return!0;if(this.time+=e*this.timeScale,this.time>=this.duration){if(!this.cycle)return this.Stop(),!1;this._state=o.State.CYCLING,this.time=this.time%this.duration,this.EmitEvent("cycle",{animation:this,controller:this._controller}),this._controller.EmitEvent("cycle",this._controller,this),this.UpdateCallback()}return this.EmitEvent("playing",{animation:this,controller:this._controller}),this._controller.EmitEvent("playing",this._controller,this),!0}},{key:"name",get:function(){return this.animationRes?this.animationRes.name:null}},{key:"duration",get:function(){return this.animationRes?this.animationRes.duration:0}},{key:"percent",get:function(){return this.animationRes?Math.min(this.time,this.duration)/this.duration:0}}])&&S(t.prototype,r),n&&S(t,n),o}(x.meta.Model),g.State={PAUSED:0,PLAYING:1,CYCLING:2,FINISHED:3},y=P((d=w).prototype,"animationRes",[i,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=P(d.prototype,"time",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=P(d.prototype,"timeScale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=P(d.prototype,"cycle",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=P(d.prototype,"trackGroups",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=d))||p)},"./core/model/Tw2AnimationController.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2AnimationController",(function(){return V}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z=r("./global/utils/index.js"),S=r("./global/math/index.js"),j=r("./core/resource/index.js"),E=r("./core/model/Tw2Animation.js"),T=r("./core/model/Tw2Bone.js"),O=r("./core/model/Tw2BoneBinding.js"),R=r("./core/model/Tw2Model.js"),P=r("./core/model/Tw2Track.js"),D=r("./core/model/Tw2TrackGroup.js"),A=r("./core/model/Tw2MeshBinding.js");function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t,r){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var V=(n=z.meta.type("Tw2AnimationController"),i=z.meta.todo("Handle rebuilding bounds in update function"),o=z.meta.list("Tw2GeometryRes"),a=z.meta.isPrivate,u=z.meta.list("Tw2Model"),c=z.meta.isPrivate,l=z.meta.list("Tw2Animation"),s=z.meta.isPrivate,f=z.meta.list("Tw2MeshBinding"),p=z.meta.isPrivate,d=z.meta.boolean,n(y=i((_=x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(o,e);var t,r,n,i=G(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),C(t=i.call(this),"geometryResources",b,B(t)),C(t,"models",h,B(t)),C(t,"animations",v,B(t)),C(t,"meshBindings",g,B(t)),C(t,"update",w,B(t)),t._isLoaded=!1,t._isPlaying=!1,t._boundsDirty=!1,t._pendingCommands=[],e&&t.SetGeometryResource(e),t}return t=o,n=[{key:"AddAnimationsFromRes",value:function(e,t){for(var r=0;r<t.animations.length;++r){for(var n=null,i=void 0,o=0;o<e.animations.length;++o)if(e.animations[o].animationRes===t.animations[r]){n=e.animations[r];break}n||((n=new E.Tw2Animation(e)).animationRes=t.animations[r],e.animations.push(n),i=!0);for(var a=0;a<n.animationRes.trackGroups.length;++a){for(var u=!1,c=0;c<n.trackGroups.length;++c)if(n.trackGroups[c].trackGroupRes===n.animationRes.trackGroups[a]){u=!0;break}if(!u){for(var l=null,s=0;s<e.models.length;++s)if(e.models[s].modelRes.name===n.animationRes.trackGroups[a].name){l=e.models[s];break}if(null!==l){var f=new D.Tw2TrackGroup;f.trackGroupRes=n.animationRes.trackGroups[a];for(var p=0;p<f.trackGroupRes.transformTracks.length;++p)for(var d=0;d<l.bones.length;++d)if(l.bones[d].boneRes.name===f.trackGroupRes.transformTracks[p].name){var y=new P.Tw2Track;y.trackRes=f.trackGroupRes.transformTracks[p],y.bone=l.bones[d],f.transformTracks.push(y);break}n.trackGroups.push(f)}}}i&&e.EmitEvent("added",{controller:e,animation:n})}}},{key:"AddModel",value:function(e,t){for(var r=0;r<e.models.length;++r)if(e.models[r].modelRes.name===t.name)return null;var n=new R.Tw2Model;n.modelRes=t;var i=t.skeleton;if(null!==i)for(var o=0;o<i.bones.length;++o){var a=new T.Tw2Bone;a.boneRes=i.bones[o],n.bones.push(a),n.bonesByName[a.boneRes.name]=a}return e.models.push(n),n}},{key:"FindMeshBindings",value:function(e,t){for(var r=0;r<e.meshBindings.length;++r)if(e.meshBindings[r].resource===t)return e.meshBindings[r];return null}},{key:"DoRebuildCachedData",value:function(e,t){if(t.meshes.length)for(var r=0;r<t.models.length;++r)this.AddModel(e,t.models[r]);for(var n=0;n<e.geometryResources.length;++n)this.AddAnimationsFromRes(e,e.geometryResources[n]);if(0===t.models.length&&e.geometryResources[0].models[0]){for(var i=0;i<t.meshes.length;++i)j.Tw2GeometryRes.BindMeshToModel(t.meshes[i],e.geometryResources[0].models[0],t);t.models.push(e.geometryResources[0].models[0])}for(var a=0;a<t.models.length;++a){for(var u=null,c=0;c<e.models.length;++c)if(e.models[c].modelRes.name===t.models[a].name){u=e.models[c];break}if(null!==u)for(var l=0;l<t.models[a].meshBindings.length;++l){var s=t.meshes.indexOf(t.models[a].meshBindings[l].mesh),f=o.FindMeshBindings(e,t);null===f&&((f=new A.Tw2MeshBinding).resource=t,e.meshBindings.push(f)),f.meshIndex[s]=new Float32Array(12*t.models[a].meshBindings[l].bones.length);for(var p=0;p<t.models[a].meshBindings[l].bones.length;++p)for(var d=0;d<u.bones.length;++d)if(u.bones[d].boneRes.name===t.models[a].meshBindings[l].bones[p].name){var y=new O.Tw2BoneBinding;y.array=f.meshIndex[s],y.offset=12*p,u.bones[d].bindingArrays.push(y);break}}}if(t.meshes.length&&t.models.length&&e.ResetBoneTransforms(),e._isLoaded=!0,e.EmitEvent("loaded",{controller:e}),e.animations.length){if(e._pendingCommands.length)for(var m=0;m<e._pendingCommands.length;++m)e._pendingCommands[m].args?(console.log("Executing command with args"),console.dir(e._pendingCommands[m].args),e._pendingCommands[m].func.apply(e,e._pendingCommands[m].args)):e._pendingCommands[m].func.apply(e);e._pendingCommands.splice(0)}}}],(r=[{key:"OnEvent",value:function(e,t,r,n){return"loaded"===e&&this.IsLoaded()&&(t.call(r,{controller:this}),n)?this:I(N(o.prototype),"OnEvent",this).call(this,e,t,r,n)}},{key:"IsGood",value:function(){for(var e=this.geometryResources.length>0,t=0;t<this.geometryResources.length;t++)this.geometryResources[t]&&this.geometryResources[t].IsGood()||(e=!1);if(!e||!this.animations.length)return!1;for(var r=0;r<this.animations.length;r++)if(!this.animations[r].IsGood())return!1;return!0}},{key:"IsPlaying",value:function(){return this._isPlaying}},{key:"IsLoaded",value:function(){return this._isLoaded}},{key:"GetAnimationsByName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.IsLoaded())return null;for(var t=0;t<this.animations.length;t++)e[this.animations[t].name]=this.animations[t];return e}},{key:"GetAnimation",value:function(e){for(var t=0;t<this.animations.length;t++)if(this.animations[t].name===e)return this.animations[t];return null}},{key:"PlayAnimation",value:function(e,t){if(0===this.animations.length)return this._pendingCommands.push({func:this.PlayAnimation,args:[e,t]}),void console.log("Pending command added...");var r=this.GetAnimation(e);r&&r.Play(t)}},{key:"GetPlayingAnimations",value:function(){for(var e=[],t=0;t<this.animations.length;t++)this.animations[t].IsPlaying()&&e.push(this.animations[t].name);return e}},{key:"StopAnimation",value:function(e){if(0!==this.animations.length){e=Object(z.toArray)(e);for(var t=0;t<this.animations.length;++t)e.includes(this.animations[t].name)&&this.animations[t].Stop()}else this._pendingCommands.push({func:this.StopAnimation,args:e})}},{key:"StopAllAnimations",value:function(){if(0!==this.animations.length)for(var e=0;e<this.animations.length;++e)this.animations[e].Stop();else this._pendingCommands.push({func:this.StopAllAnimations,args:null})}},{key:"StopAllAnimationsExcept",value:function(e){if(0!==this.animations.length){e=Object(z.toArray)(e);for(var t=0;t<this.animations.length;++t)e.includes(this.animations[t].name)||this.animations[t].Stop()}else this._pendingCommands.push({func:this.StopAllAnimationsExcept,args:e})}},{key:"HasGeometryResource",value:function(e){return-1!==this.geometryResources.indexOf(e)}},{key:"SetGeometryResource",value:function(e){this.models.splice(0);for(var t=0;t<this.animations.length;t++){var r=this.animations[t];this.animations.splice(t,1),t--,this.EmitEvent("removed",{animation:r,controller:this}),r.Destroy()}this.meshBindings.splice(0);for(var n=0;n<this.geometryResources.length;++n)this.geometryResources[n].UnregisterNotification(this);this._isLoaded=!1,this.geometryResources.splice(0),e&&(this.geometryResources.push(e),e.RegisterNotification(this))}},{key:"AddGeometryResource",value:function(e){this.geometryResources.includes(e)||(this.geometryResources.push(e),e.RegisterNotification(this))}},{key:"ResetBoneTransforms",value:function(){for(var e=0;e<this.models.length;++e)for(var t=0;t<this.models[e].bones.length;++t){var r=this.models[e].bones[t],n=r.boneRes;S.mat4.copy(r.localTransform,n.localTransform),-1!==n.parentIndex?S.mat4.multiply(r.worldTransform,r.localTransform,this.models[e].bones[r.boneRes.parentIndex].worldTransform):S.mat4.set(r.worldTransform,r.localTransform),S.mat4.identity(r.offsetTransform)}for(var i=S.mat4.identity(o.global.mat4_0),a=0;a<this.meshBindings.length;++a)for(var u=0;u<this.meshBindings[a].meshIndex.length;++u)for(var c=0;16*c<this.meshBindings[a].meshIndex[u].length;++c)for(var l=0;l<16;++l)this.meshBindings[a].meshIndex[u][16*c+l]=i[l]}},{key:"GetBoneMatrices",value:function(e,t){if(0===this.geometryResources.length)return new Float32Array;t||(t=this.geometryResources[0]);var r=o.FindMeshBindings(this,t);return r&&void 0!==r.meshIndex[e]?r.meshIndex[e]:new Float32Array}},{key:"FindBoneForMesh",value:function(e,t){var r=this.FindModelForMesh(t);if(r)for(var n=0;n<r.bones.length;n++)if(r.bones[n].boneRes.name===e)return r.bones[n];return null}},{key:"FindModelForMesh",value:function(e,t){if(0===this.geometryResources.length)return null;if(t||(t=this.geometryResources[0]),!t.IsGood())return null;for(var r=t.meshes[e],n=0;n<this.models.length;++n)for(;0<this.models[n].modelRes.meshBindings.length;++n)if(this.models[n].modelRes.meshBindings[0].mesh===r)return this.models[n];return null}},{key:"GetResources",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<this.geometryResources.length;t++)e.includes(this.geometryResources[t])||e.push(this.geometryResources[t]);return e}},{key:"OnResPrepared",value:function(e){if(e.UnregisterNotification(this),this.geometryResources.includes(e)){for(var t=0;t<this.geometryResources.length;++t)if(!this.geometryResources[t].IsGood())return;for(var r=0;r<this.geometryResources.length;++r)o.DoRebuildCachedData(this,this.geometryResources[r])}}},{key:"Update",value:function(e){var t=this._isPlaying;if(this._isPlaying=!1,this.models&&this.update){for(var r=0;r<this.geometryResources.length;++r)this.geometryResources[r].KeepAlive();for(var n=o.global,i=n.mat4_0,a=n.quat_0,u=n.vec3_0,c=n.mat3_0,l=0;l<this.animations.length;++l){var s=this.animations[l];if(s.Update(e)){this._isPlaying=!0;for(var f=s.animationRes,p=0;p<s.trackGroups.length;++p)for(var d=0;d<s.trackGroups[p].transformTracks.length;++d){var y=s.trackGroups[p].transformTracks[d];y.trackRes.position?S.curve.evaluate(y.trackRes.position,s.time,u,s.cycle,f.duration):u[0]=u[1]=u[2]=0,y.trackRes.orientation?(S.curve.evaluate(y.trackRes.orientation,s.time,a,s.cycle,f.duration),S.quat.normalize(a,a)):S.quat.identity(a),y.trackRes.scaleShear?S.curve.evaluate(y.trackRes.scaleShear,s.time,c,s.cycle,f.duration):S.mat3.identity(c),S.mat4.fromMat3(y.bone.localTransform,c),S.mat4.multiply(y.bone.localTransform,y.bone.localTransform,S.mat4.fromQuat(i,a)),y.bone.localTransform[12]=u[0],y.bone.localTransform[13]=u[1],y.bone.localTransform[14]=u[2]}}}for(var m=0;m<this.models.length;++m)for(var b=0;b<this.models[m].bones.length;++b){var h=this.models[m].bones[b];-1!==h.boneRes.parentIndex?S.mat4.multiply(h.worldTransform,this.models[m].bones[h.boneRes.parentIndex].worldTransform,h.localTransform):S.mat4.copy(h.worldTransform,h.localTransform),S.mat4.multiply(h.offsetTransform,h.worldTransform,h.boneRes.worldTransformInv);for(var v=0;v<h.bindingArrays.length;++v){var g=h.bindingArrays[v],w=h.offsetTransform;g.array[g.offset+0]=w[0],g.array[g.offset+1]=w[4],g.array[g.offset+2]=w[8],g.array[g.offset+3]=w[12],g.array[g.offset+4]=w[1],g.array[g.offset+5]=w[5],g.array[g.offset+6]=w[9],g.array[g.offset+7]=w[13],g.array[g.offset+8]=w[2],g.array[g.offset+9]=w[6],g.array[g.offset+10]=w[10],g.array[g.offset+11]=w[14]}}(this._isPlaying||this._isPlaying!==t)&&(this._boundsDirty=!0)}}},{key:"RenderDebugInfo",value:function(e){for(var t=0;t<this.models.length;++t)for(var r=0;r<this.models[t].bones.length;++r){var n=this.models[t].bones[r];if(n.boneRes.parentIndex>=0){var i=this.models[t].bones[n.boneRes.parentIndex];e.AddLine([n.worldTransform[12],n.worldTransform[13],n.worldTransform[14]],[i.worldTransform[12],i.worldTransform[13],i.worldTransform[14]])}}}}])&&k(t.prototype,r),n&&k(t,n),o}(z.meta.Model),x.global={vec3_0:S.vec3.create(),quat_0:S.quat.create(),mat3_0:S.mat3.create(),mat4_0:S.mat4.create(),box3_0:S.box3.create()},b=U((m=_).prototype,"geometryResources",[o,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=U(m.prototype,"models",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=U(m.prototype,"animations",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=U(m.prototype,"meshBindings",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=U(m.prototype,"update",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=m))||y)||y)},"./core/model/Tw2Bone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Bone",(function(){return w}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js"),h=r("./global/math/index.js");function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var w=(n=b.meta.type("Tw2Bone"),i=b.meta.struct("Tw2GeometryBone"),o=b.meta.list("Tw2BoneBinding"),a=b.meta.matrix4,u=b.meta.matrix4,c=b.meta.matrix4,n((f=g((s=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"boneRes",f,this),v(this,"bindingArrays",p,this),v(this,"localTransform",d,this),v(this,"worldTransform",y,this),v(this,"offsetTransform",m,this)}).prototype,"boneRes",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g(s.prototype,"bindingArrays",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=g(s.prototype,"localTransform",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.mat4.create()}}),y=g(s.prototype,"worldTransform",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.mat4.create()}}),m=g(s.prototype,"offsetTransform",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.mat4.create()}}),l=s))||l)},"./core/model/Tw2BoneBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BoneBinding",(function(){return d}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var d=(n=s.meta.type("Tw2BoneBinding"),i=s.meta.vector,o=s.meta.uint,n((c=p((u=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"array",c,this),f(this,"offset",l,this)}).prototype,"array",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=p(u.prototype,"offset",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a=u))||a)},"./core/model/Tw2MeshBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MeshBinding",(function(){return d}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var d=(n=s.meta.type("Tw2MeshBinding"),i=s.meta.list("Float32Array"),o=s.meta.struct("Tw2GeometryRes"),n((c=p((u=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"meshIndex",c,this),f(this,"resource",l,this)}).prototype,"meshIndex",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=p(u.prototype,"resource",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=u))||a)},"./core/model/Tw2Model.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Model",(function(){return b}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js");function y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function m(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var b=(n=d.meta.type("Tw2Model"),i=d.meta.struct("Tw2GeometryModel"),o=d.meta.list("Tw2Bone"),a=d.meta.plain,u=d.meta.isPrivate,n((s=m((l=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"modelRes",s,this),y(this,"bones",f,this),y(this,"bonesByName",p,this)}).prototype,"modelRes",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=m(l.prototype,"bones",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=m(l.prototype,"bonesByName",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=l))||c)},"./core/model/Tw2Track.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Track",(function(){return d}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var d=(n=s.meta.type("Tw2Track"),i=s.meta.struct("Tw2GeometryTransformTrack"),o=s.meta.struct("Tw2Bone"),n((c=p((u=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"trackRes",c,this),f(this,"bone",l,this)}).prototype,"trackRes",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=p(u.prototype,"bone",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=u))||a)},"./core/model/Tw2TrackGroup.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TrackGroup",(function(){return m}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js");function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var m=(n=p.meta.type("Tw2TrackGroup"),i=p.meta.struct("Tw2GeometryTrackGroup"),o=p.meta.struct("Tw2GeometryModel"),a=p.meta.list("Tw2Track"),n((l=y((c=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"trackGroupRes",l,this),d(this,"model",s,this),d(this,"transformTracks",f,this)}).prototype,"trackGroupRes",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=y(c.prototype,"model",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y(c.prototype,"transformTracks",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=c))||u)},"./core/model/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/model/Tw2Animation.js");r.d(t,"Tw2Animation",(function(){return n.Tw2Animation}));var i=r("./core/model/Tw2AnimationController.js");r.d(t,"Tw2AnimationController",(function(){return i.Tw2AnimationController}));var o=r("./core/model/Tw2Bone.js");r.d(t,"Tw2Bone",(function(){return o.Tw2Bone}));var a=r("./core/model/Tw2BoneBinding.js");r.d(t,"Tw2BoneBinding",(function(){return a.Tw2BoneBinding}));var u=r("./core/model/Tw2MeshBinding.js");r.d(t,"Tw2MeshBinding",(function(){return u.Tw2MeshBinding}));var c=r("./core/model/Tw2Model.js");r.d(t,"Tw2Model",(function(){return c.Tw2Model}));var l=r("./core/model/Tw2Track.js");r.d(t,"Tw2Track",(function(){return l.Tw2Track}));var s=r("./core/model/Tw2TrackGroup.js");r.d(t,"Tw2TrackGroup",(function(){return s.Tw2TrackGroup}))},"./core/parameter/Tw2FloatParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2FloatParameter",(function(){return j}));var n,i,o,a,u,c,l,s,f,p=r("./core/parameter/Tw2Parameter.js"),d=r("./global/utils/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=d.meta.type("Tw2FloatParameter","Tr2FloatParameter"),i=d.meta.string,o=d.meta.float,n((f=s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return b(this,r),m(e=t.call(this),"name",c,_(e)),m(e,"value",l,_(e)),n&&(e.name=n),void 0!==i&&(e.value=Object(d.isArrayLike)(i)?i[0]:i),e}return v(r,[{key:"x",get:function(){return this.value},set:function(e){this.SetValue(e)}}]),v(r,[{key:"SetValue",value:function(e,t){return!this.EqualsValue(e)&&(this.value=e,this.UpdateValues(t),!0)}},{key:"GetValue",value:function(){return this.value}},{key:"Apply",value:function(e,t,r){e[t]=this.value}},{key:"OnValueChanged",value:function(){this._constantBuffer&&this.Apply(this._constantBuffer,this._offset)}},{key:"Bind",value:function(e,t,r){return!this._constantBuffer&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t),!0)}},{key:"Unbind",value:function(){this._constantBuffer=null}},{key:"EqualsValue",value:function(e){return this.value===e}}],[{key:"isValue",value:function(e){return Object(d.isNumber)(e)}}]),r}(p.Tw2Parameter),s.constantBufferSize=1,c=S((u=f).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=S(u.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),a=u))||a)},"./core/parameter/Tw2Matrix4Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Matrix4Parameter",(function(){return j}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./global/math/index.js"),y=r("./core/parameter/Tw2VectorParameter.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=p.meta.type("Tw2Matrix4Parameter","Tw2MatrixParameter"),i=p.meta.string,o=p.meta.matrix4,n((f=s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,e);var t,r,n,i=w(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;if(h(this,o),b(e=i.call(this),"name",c,_(e)),b(e,"value",l,_(e)),t&&(e.name=t),r)for(var n=0;n<r.length;n++)e.value[n]=r[n];return e}return t=o,n=[{key:"isValue",value:function(e){return Object(p.isArrayLike)(e)&&16===e.length||12===e.length}}],(r=[{key:"Compose",value:function(e,t,r){"value"in e&&(e=e.value),"value"in t&&(t=t.value),"value"in r&&(r=r.value),d.mat4.fromRotationTranslationScale(this.value,e,t,r),this.UpdateValues()}},{key:"Decompose",value:function(e,t,r){d.mat4.getRotation("value"in e?e.value:e,this.value),d.mat4.getTranslation("value"in t?t.value:t,this.value),d.mat4.getScaling("value"in r?r.value:r,this.value),"UpdateValues"in e&&e.UpdateValues(),"UpdateValues"in t&&t.UpdateValues(),"UpdateValues"in r&&r.UpdateValues()}},{key:"x",get:function(){return this.GetIndexValue(12)},set:function(e){this.SetIndexValue(12,e)}},{key:"y",get:function(){return this.GetIndexValue(13)},set:function(e){this.SetIndexValue(13,e)}},{key:"z",get:function(){return this.GetIndexValue(14)},set:function(e){this.SetIndexValue(14,e)}}])&&v(t.prototype,r),n&&v(t,n),o}(y.Tw2VectorParameter),s.constantBufferSize=16,c=S((u=f).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=S(u.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.mat4.create()}}),a=u))||a)},"./core/parameter/Tw2Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Parameter",(function(){return j}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=y.meta.string,i=y.meta.struct,o=y.meta.abstract,a=y.meta.abstract,u=y.meta.abstract,c=y.meta.abstract,d=p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,e);var t,r,n,i=w(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return b(e=i.call.apply(i,[this].concat(r)),"name",s,_(e)),b(e,"annotation",f,_(e)),e}return t=o,(r=[{key:"GetValue",value:function(){}},{key:"Bind",value:function(e,t,r){}},{key:"Unbind",value:function(){}},{key:"Apply",value:function(e,t,r){}},{key:"size",get:function(){return this.constructor.constantBufferSize}}])&&v(t.prototype,r),n&&v(t,n),o}(y.meta.Model),p.constantBufferSize=0,s=S((l=d).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=S(l.prototype,"annotation",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S(l.prototype,"GetValue",[o],Object.getOwnPropertyDescriptor(l.prototype,"GetValue"),l.prototype),S(l.prototype,"Bind",[a],Object.getOwnPropertyDescriptor(l.prototype,"Bind"),l.prototype),S(l.prototype,"Unbind",[u],Object.getOwnPropertyDescriptor(l.prototype,"Unbind"),l.prototype),S(l.prototype,"Apply",[c],Object.getOwnPropertyDescriptor(l.prototype,"Apply"),l.prototype),l)},"./core/parameter/Tw2TextureParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TextureParameter",(function(){return M}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h=r("./global/utils/index.js"),v=r("./global/index.js"),g=r("./core/sampler/Tw2SamplerOverride.js"),w=r("./core/parameter/Tw2Parameter.js"),x=r("./core/resource/Tw2TextureRes.js"),_=r("./core/resource/index.js");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var i=D(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var M=(n=h.meta.type("Tw2TextureParameter","TriTextureParameter"),i=h.meta.string,o=h.meta.path,a=h.meta.struct("Tw2TextureRes"),u=h.meta.todo("Make private"),c=h.meta.struct("Tw2SamplerOverrides"),l=h.meta.isPrivate,n((b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(r,e);var t=O(r);function r(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),S(i=t.call(this),"name",p,P(i)),S(i,"resourcePath",d,P(i)),S(i,"textureRes",y,P(i)),S(i,"overrides",m,P(i)),i._isAttached=!1,e&&(i.name=e),n&&i.SetValue(n),i}return E(r,[{key:"res",get:function(){return this.textureRes}},{key:"useAllOverrides",get:function(){return!!this.overrides&&this.overrides.enable},set:function(e){e&&(this.overrides=this.overrides||new g.Tw2SamplerOverride,this.overrides.SetValues({enable:!0})),!e&&this.overrides&&this.overrides.SetValues({enable:!1})}},{key:"isAttached",get:function(){return this.textureRes&&this._isAttached}}]),E(r,[{key:"Initialize",value:function(){this.UpdateValues()}},{key:"SetValue",value:function(e,t){return void 0!==e&&(e=e?e.toLowerCase():"",!this.EqualsValue(e)&&(this.resourcePath=e,this.UpdateValues(t),!0))}},{key:"GetValue",value:function(){return this.isAttached&&0!==this.resourcePath.indexOf("rgba:")?null:this.resourcePath}},{key:"IsGood",value:function(){return!!this.textureRes&&this.textureRes.IsGood()}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.textureRes&&!e.includes(this.textureRes)&&e.push(this.textureRes),e}},{key:"AttachTextureRes",value:function(e){return this._SetTextureRes(e,!0)}},{key:"_SetTextureRes",value:function(e,t){return this.textureRes!==e&&(this._RemoveTextureRes(),this.textureRes=e,e&&(t?(this._isAttached=!0,this.resourcePath=""):this._isAttached=!1,e.RegisterNotification(this)),!0)}},{key:"_RemoveTextureRes",value:function(){var e=this.textureRes;return!!e&&(this.textureRes=null,this._isAttached=!1,e.UnregisterNotification(this),this.EmitEvent(_.Tw2Resource.Event.RES_REMOVED,this,e),!0)}},{key:"OnValueChanged",value:function(){if(this.resourcePath=this.resourcePath?this.resourcePath.toLowerCase():"",0===this.resourcePath.indexOf("rgba:/")){if(!this.textureRes||this.textureRes.path!==this.resourcePath){var e=this.resourcePath.replace("rgba:/","").split(","),t=v.device.CreateSolidTexture([parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),void 0!==e[3]?parseFloat(e[3]):255]),r=new x.Tw2TextureRes;this._SetTextureRes(r),r.Attach(t,this.resourcePath)}}else if(!this.isAttached){var n=this.resourcePath?v.tw2.GetResource(this.resourcePath):null;this._SetTextureRes(n)}}},{key:"Apply",value:function(e,t,r){this.textureRes&&(this.overrides&&(t=this.overrides.GetSampler(t)),v.device.gl.activeTexture(v.device.gl.TEXTURE0+e),this.textureRes.Bind(t,r),this._samplers||(this._samplers={}),this._samplers[e]||(this._samplers[e]=t))}},{key:"SetOverrides",value:function(e,t){if(null===e)return!!this.overrides&&(this.RemoveOverrides(),!0);this.overrides=this.overrides||new g.Tw2SamplerOverride,this.overrides.name||(this.overrides.name=this.name+"Sampler"),this.overrides.SetValues(e,t)&&(t&&t.skipEvents||this.EmitEvent("overrides_modified",this,t))}},{key:"RemoveOverrides",value:function(e){return!!this.overrides&&(this.overrides=null,this.EmitEvent("overrides_removed",this,e),!0)}},{key:"GetOverrides",value:function(){return this.overrides?this.overrides.GetValues():null}},{key:"EqualsValue",value:function(e){return e.toLowerCase()===this.GetValue()}},{key:"OnResEvent",value:function(e,t){return _.Tw2Resource.parentOnResEvent(this,"textureRes",e,t)}}],[{key:"onListener",value:function(e,t,r,n){return _.Tw2Resource.parentOnListener(e,"textureRes",t,r,n)}},{key:"isValue",value:function(e){return Object(h.isString)(e)}}]),r}(w.Tw2Parameter),p=A((f=b).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=A(f.prototype,"resourcePath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=A(f.prototype,"textureRes",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=A(f.prototype,"overrides",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=f))||s)},"./core/parameter/Tw2TransformParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TransformParameter",(function(){return M}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w=r("./global/utils/index.js"),x=r("./global/math/index.js"),_=r("./core/parameter/Tw2Parameter.js");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var i=D(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var M=(n=w.meta.type("Tw2TransformParameter","Tr2TransformParameter"),i=w.meta.vector3,o=w.meta.vector3,a=w.meta.quaternion,u=w.meta.vector3,c=w.meta.matrix4,l=w.meta.matrix4,n((g=v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(o,e);var t,r,n,i=O(o);function o(){var e;j(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(e=i.call.apply(i,[this].concat(r)),"scaling",p,P(e)),S(e,"rotationCenter",d,P(e)),S(e,"rotation",y,P(e)),S(e,"translation",m,P(e)),S(e,"transform",b,P(e)),S(e,"worldTransform",h,P(e)),e}return t=o,(r=[{key:"Initialize",value:function(){this.UpdateValues()}},{key:"SetValue",value:function(e,t){x.mat4.getRotation(this.rotation,e),x.mat4.getTranslation(this.translation,e),x.mat4.getScaling(this.scaling,e),this.UpdateValues(t)}},{key:"GetValue",value:function(e){return x.mat4.copy(e,this.worldTransform)}},{key:"OnValueChanged",value:function(){x.mat4.fromRotationTranslationScaleOrigin(this.transform,this.rotation,this.translation,this.scaling,this.rotationCenter),x.mat4.transpose(this.worldTransform,this.transform)}},{key:"Bind",value:function(e,t,r){return!this._constantBuffer&&r>=this.size&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t,r),!0)}},{key:"Apply",value:function(e,t,r){r>=this.constructor.constantBufferSize?e.set(this.worldTransform,t):e.set(this.worldTransform.subarray(0,r),t)}}])&&E(t.prototype,r),n&&E(t,n),o}(_.Tw2Parameter),v.constantBufferSize=16,p=A((f=g).prototype,"scaling",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.fromValues(1,1,1)}}),d=A(f.prototype,"rotationCenter",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.create()}}),y=A(f.prototype,"rotation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.quat.create()}}),m=A(f.prototype,"translation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.create()}}),b=A(f.prototype,"transform",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.mat4.create()}}),h=A(f.prototype,"worldTransform",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.mat4.create()}}),s=f))||s)},"./core/parameter/Tw2VariableParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VariableParameter",(function(){return z}));var n,i,o,a,u,c,l,s,f=r("./global/utils/index.js"),p=r("./global/index.js"),d=r("./core/parameter/Tw2Parameter.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=f.meta.type("Tw2VariableParameter","TriVariableParameter"),i=f.meta.string,o=f.meta.string,n((s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,e);var t,r,n,i=v(o);function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),m(r=i.call(this),"name",c,w(r)),m(r,"variableName",l,w(r)),e&&(r.name=e),t&&(r.variableName=t),r}return t=o,(r=[{key:"SetValue",value:function(e,t){return p.tw2.SetVariableValue(this.variableName,e,t)}},{key:"GetValue",value:function(){return p.tw2.GetVariableValue(this.variableName)}},{key:"Apply",value:function(e,t,r){this.variable&&this.variable.Apply(e,t,r)}},{key:"variable",get:function(){return p.tw2.GetVariable(this.variableName)}},{key:"size",get:function(){return this.variable?this.variable.size:0}}])&&b(t.prototype,r),n&&b(t,n),o}(d.Tw2Parameter),c=_((u=s).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=_(u.prototype,"variableName",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=u))||a)},"./core/parameter/Tw2Vector2Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector2Parameter",(function(){return S}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./global/math/index.js"),y=r("./core/parameter/Tw2VectorParameter.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=p.meta.type("Tw2Vector2Parameter"),i=p.meta.string,o=p.meta.vector2,n((f=s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,r,n,i=g(o);function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),b(r=i.call(this),"name",c,x(r)),b(r,"value",l,x(r)),e&&(r.name=e),t&&d.vec2.copy(r.value,t),r}return t=o,(r=[{key:"x",get:function(){return this.GetIndexValue(0)},set:function(e){this.SetIndexValue(0,e)}},{key:"y",get:function(){return this.GetIndexValue(1)},set:function(e){this.SetIndexValue(1,e)}}])&&h(t.prototype,r),n&&h(t,n),o}(y.Tw2VectorParameter),s.constantBufferSize=2,c=z((u=f).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=z(u.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.vec2.fromValues(1,1)}}),a=u))||a)},"./core/parameter/Tw2Vector3Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector3Parameter",(function(){return S}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./global/math/index.js"),y=r("./core/parameter/Tw2VectorParameter.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=p.meta.type("Tw2Vector3Parameter"),i=p.meta.string,o=p.meta.vector3,n((f=s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,r,n,i=g(o);function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),b(r=i.call(this),"name",c,x(r)),b(r,"value",l,x(r)),e&&(r.name=e),t&&d.vec3.copy(r.value,t),r}return t=o,(r=[{key:"x",get:function(){return this.GetIndexValue(0)},set:function(e){this.SetIndexValue(0,e)}},{key:"y",get:function(){return this.GetIndexValue(1)},set:function(e){this.SetIndexValue(1,e)}},{key:"z",get:function(){return this.GetIndexValue(2)},set:function(e){this.SetIndexValue(2,e)}}])&&h(t.prototype,r),n&&h(t,n),o}(y.Tw2VectorParameter),s.constantBufferSize=3,c=z((u=f).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=z(u.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.vec3.fromValues(1,1,1)}}),a=u))||a)},"./core/parameter/Tw2Vector4Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector4Parameter",(function(){return S}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./global/math/index.js"),y=r("./core/parameter/Tw2VectorParameter.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=p.meta.type("Tw2Vector4Parameter","TriVector4Parameter"),i=p.meta.string,o=p.meta.vector4,n((f=s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,r,n,i=g(o);function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),b(r=i.call(this),"name",c,x(r)),b(r,"value",l,x(r)),e&&(r.name=e),t&&d.vec4.copy(r.value,t),r}return t=o,(r=[{key:"GetRGBA",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return d.vec4.toRGBA(e,this.GetValue(e))}},{key:"SetRGBA",value:function(e){return this.SetValue(d.vec4.fromRGBA([],e))}},{key:"GetHex",value:function(e){var t=this.GetValue([0,0,0,1]);return e?d.vec4.toHexA(t):d.vec4.toHex(t)}},{key:"SetHex",value:function(e){return this.SetValue(d.vec4.fromHex([],e))}},{key:"x",get:function(){return this.GetIndexValue(0)},set:function(e){this.SetIndexValue(0,e)}},{key:"y",get:function(){return this.GetIndexValue(1)},set:function(e){this.SetIndexValue(1,e)}},{key:"z",get:function(){return this.GetIndexValue(2)},set:function(e){this.SetIndexValue(2,e)}},{key:"w",get:function(){return this.GetIndexValue(3)},set:function(e){this.SetIndexValue(3,e)}}])&&h(t.prototype,r),n&&h(t,n),o}(y.Tw2VectorParameter),s.constantBufferSize=4,c=z((u=f).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=z(u.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.vec4.fromValues(1,1,1,1)}}),a=u))||a)},"./core/parameter/Tw2VectorParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorParameter",(function(){return m}));var n,i,o,a=r("./core/Tw2Error.js"),u=r("./global/utils/index.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=u.meta.type("Tw2VectorParameter")((o=i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,e);var t,r,n,i=p(o);function o(){return l(this,o),i.apply(this,arguments)}return t=o,n=[{key:"isValue",value:function(e){return Object(u.isArrayLike)(e)&&e.length===this.constantBufferSize}}],(r=[{key:"SetValue",value:function(e,t){return!this.EqualsValue(e)&&(this.value.set(e),this.UpdateValues(t),!0)}},{key:"SetIndexValue",value:function(e,t,r){if(void 0===this.value[e])throw new a.ErrIndexBounds;this.value[e]!==t&&(this.value[e]=t,this.UpdateValues(r))}},{key:"GetValue",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this._constantBuffer?this._constantBuffer.subarray(this._offset,this._offset+this.size):this.value,r=0;r<t.length;r++)e[r]=t[r];return e}},{key:"GetIndexValue",value:function(e){if(void 0!==this.value[e])return this.value[e];throw new a.ErrIndexBounds}},{key:"OnValueChanged",value:function(){this._constantBuffer&&this.Apply(this._constantBuffer,this._offset)}},{key:"Bind",value:function(e,t,r){return!this._constantBuffer&&r>=this.size&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t,r),!0)}},{key:"Unbind",value:function(){this._constantBuffer=null}},{key:"Apply",value:function(e,t,r){e.set(this.value,t)}},{key:"EqualsValue",value:function(e){for(var t=0;t<this.size;t++)if(this.value[t]!==e[t])return!1;return!0}},{key:"size",get:function(){return this.constructor.constantBufferSize}}])&&s(t.prototype,r),n&&s(t,n),o}(u.meta.Model),i.constantBufferSize=0,n=o))||n},"./core/parameter/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/parameter/Tw2Parameter.js");r.d(t,"Tw2Parameter",(function(){return n.Tw2Parameter}));var i=r("./core/parameter/Tw2FloatParameter.js");r.d(t,"Tw2FloatParameter",(function(){return i.Tw2FloatParameter}));var o=r("./core/parameter/Tw2Matrix4Parameter.js");r.d(t,"Tw2Matrix4Parameter",(function(){return o.Tw2Matrix4Parameter}));var a=r("./core/parameter/Tw2TransformParameter.js");r.d(t,"Tw2TransformParameter",(function(){return a.Tw2TransformParameter}));var u=r("./core/parameter/Tw2VariableParameter.js");r.d(t,"Tw2VariableParameter",(function(){return u.Tw2VariableParameter}));var c=r("./core/parameter/Tw2Vector2Parameter.js");r.d(t,"Tw2Vector2Parameter",(function(){return c.Tw2Vector2Parameter}));var l=r("./core/parameter/Tw2Vector3Parameter.js");r.d(t,"Tw2Vector3Parameter",(function(){return l.Tw2Vector3Parameter}));var s=r("./core/parameter/Tw2Vector4Parameter.js");r.d(t,"Tw2Vector4Parameter",(function(){return s.Tw2Vector4Parameter}));var f=r("./core/parameter/Tw2TextureParameter.js");r.d(t,"Tw2TextureParameter",(function(){return f.Tw2TextureParameter}))},"./core/post/Tw2PostProcess.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PostProcess",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h=r("./global/utils/index.js"),v=r("./global/tw2.js"),g=r("./core/parameter/index.js"),w=r("./core/resource/Tw2TextureRes.js"),x=r("./core/Tw2RenderTarget.js");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var A=(n=h.meta.type("Tw2PostProcess","Tr2PostProcess"),i=h.meta.list("Tw2Effect"),o=h.meta.boolean,a=h.meta.string,u=h.meta.float,c=h.meta.boolean,n((b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,e);var t,r,n,i=T(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return S(this,o),z(e=i.call(this),"stages",f,R(e)),z(e,"display",p,R(e)),z(e,"name",d,R(e)),z(e,"quality",y,R(e)),z(e,"autoRebuild",m,R(e)),e._dirty=!0,e._effectiveWidth=0,e._effectiveHeight=0,e._blitOriginal=null,e._quadRT0=null,e._quadRT1=null,e._visibleStages=[],e.name=t,e}return t=o,(r=[{key:"IsGood",value:function(){for(var e=!0,t=0;t<this.stages.length;t++)this.stages[t].IsGood()||(e=!1);return this._blitOriginal&&!this._blitOriginal.IsGood()&&(e=!1),this._quadRT0&&!this._quadRT0.IsGood()&&(e=!1),this._quadRT1&&!this._quadRT1.IsGood()&&(e=!1),e}},{key:"GetResources",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<this.stages.length;t++)this.stages[t].GetResources(e);return e}},{key:"KeepAlive",value:function(){for(var e=0;e<this.stages.length;e++)this.stages[e].KeepAlive();this._blitOriginal&&this._blitOriginal.KeepAlive(),this._quadRT0&&this._quadRT0.KeepAlive(),this._quadRT1&&this._quadRT1.KeepAlive()}},{key:"OnValueChanged",value:function(){this._dirty=!0}},{key:"PopulateParameters",value:function(){for(var e=0;e<this.stages.length;e++)this.stages[e].PopulateParameters()}},{key:"PurgeUnusedParameters",value:function(){for(var e=0;e<this.stages.length;e++)this.stages[e].PurgeUnusedParameters()}},{key:"Update",value:function(e,t){var r=v.tw2.height*this.quality,n=v.tw2.width*this.quality;if(this._effectiveWidth===n&&this._effectiveHeight===r||(this._effectiveHeight=r,this._effectiveWidth=n,this.UpdateValues()),!this._dirty&&this.autoRebuild)for(var i=0;i<this.stages.length;i++){var o=-1!==this._visibleStages.indexOf(this.stages[i]);if(o&&"display"in this.stages[i]&&!this.stages[i].display){this._dirty=!0;break}if(!o){this._dirty=!0;break}}}},{key:"Rebuild",value:function(e){if(this.IsGood()){var t=v.tw2.gl,r=v.tw2.width,n=v.tw2.height;this.PopulateParameters(),this._quadRT0||(this._quadRT0=new x.Tw2RenderTarget("RT0")),this._quadRT0.Create(this._effectiveWidth,this._effectiveHeight,!1),this._quadRT1||(this._quadRT1=new x.Tw2RenderTarget("RT1")),this._quadRT1.Create(this._effectiveWidth,this._effectiveHeight,!1),t.bindTexture(t.TEXTURE_2D,this._blitOriginal.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,n,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindTexture(t.TEXTURE_2D,null);for(var i=0;i<this.stages.length;i++){var o=this.stages[i],a=o.shader,u=o.parameters,c=void 0;a.HasTexture("BlitOriginal")&&(u.BlitOriginal||(u.BlitOriginal=new g.Tw2TextureParameter("BlitOriginal"),c=!0),u.BlitOriginal.AttachTextureRes(this._blitOriginal)),a.HasTexture("BlitCurrent")&&!u.BlitCurrent&&(u.BlitCurrent=new g.Tw2TextureParameter("BlitCurrent"),c=!0),a.HasConstant("g_texelSize")&&!u.g_texelSize&&(u.g_texelSize=new g.Tw2Vector4Parameter("g_texelSize",[1,1,1,1]),c=!0),a.HasConstant("g_camera")&&!u.g_camera&&(u.g_camera=new g.Tw2Vector4Parameter("g_camera",[1,1,1,1])),c&&this.stages[i].BindParameters()}this._dirty=!1,e&&e.skipEvents||this.EmitEvent("rebuilt",this,e)}else this._dirty=!0}},{key:"Render",value:function(){var e,t=v.tw2.width,r=v.tw2.height,n=v.tw2.gl,i=v.tw2.device;if(!this.display||t<0||r<0||!this.IsGood())return!1;this._blitOriginal&&this._blitOriginal.texture||(this._blitOriginal||(this._blitOriginal=new w.Tw2TextureRes),this._blitOriginal.Attach(n.createTexture()),this._dirty=!0),this._dirty&&this.Rebuild(),this._visibleStages.splice(0);for(var o=0;o<this.stages.length;o++)"display"in this.stages[o]&&!this.stages[o].display||this._visibleStages.push(this.stages[o]);if(!this._visibleStages.length)return!1;n.bindTexture(n.TEXTURE_2D,this._blitOriginal.texture),n.copyTexImage2D(n.TEXTURE_2D,0,i.alphaBlendBackBuffer?n.RGBA:n.RGB,0,0,t,r,0),n.bindTexture(n.TEXTURE_2D,null),i.SetStandardStates(i.RM_OPAQUE);for(var a=0,u=0;u<this._visibleStages.length;u++){var c=this._visibleStages[u].parameters,l=c.BlitCurrent,s=c.g_texelSize,f=c.g_camera,p=null;if(l){var d=a%2;d?l.AttachTextureRes(this._quadRT1.texture):l.AttachTextureRes(0===a?this._blitOriginal:this._quadRT0.texture),u!==this._visibleStages.length-1&&(p=d?this._quadRT0:this._quadRT1),a++}if(s){var y=p?1/p.width:1/t;s.value[0]=y,s.value[1]=y,s.value[2]=p?p.width:t,s.value[3]=p?p.height:r,s.UpdateValues({controller:this})}if(f){if(!e){e=[0,0,0,0];var m=i.projection;e[0]=m[14]/(m[10]-1),e[1]=m[14]/(m[10]+1),e[2]=2*Math.atan(1/m[5])*180/Math.PI,e[3]=0}f.SetValue(e)}p?p.Set():(n.bindFramebuffer(n.FRAMEBUFFER,null),n.viewport(0,0,t,r)),v.tw2.device.RenderFullScreenQuad(this._visibleStages[u])}return!0}}])&&j(t.prototype,r),n&&j(t,n),o}(h.meta.Model),f=D((s=b).prototype,"stages",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=D(s.prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=D(s.prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=D(s.prototype,"quality",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=D(s.prototype,"autoRebuild",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=s))||l)},"./core/post/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/post/Tw2PostProcess.js");r.d(t,"Tw2PostProcess",(function(){return n.Tw2PostProcess}))},"./core/reader/Tw2BinaryReader.js":function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t),r.d(t,"Tw2BinaryReader",(function(){return i}));var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this.cursor=0,this.data=t}var t,r,i;return t=e,(r=[{key:"ReadUInt8",value:function(){return this.data[this.cursor++]}},{key:"ReadInt8",value:function(){var e=this.data[this.cursor++];return e>127&&(e=e-255-1),e}},{key:"ReadUInt16",value:function(){return this.data[this.cursor++]+(this.data[this.cursor++]<<8)}},{key:"ReadInt16",value:function(){var e=this.data[this.cursor++]+(this.data[this.cursor++]<<8);return e>32767&&(e=e-65535-1),e}},{key:"ReadUInt32",value:function(){return this.data[this.cursor++]+(this.data[this.cursor++]<<8)+(this.data[this.cursor++]<<16)+(this.data[this.cursor++]<<24>>>0)}},{key:"ReadInt32",value:function(){var e=this.data[this.cursor++]+(this.data[this.cursor++]<<8)+(this.data[this.cursor++]<<16)+(this.data[this.cursor++]<<24>>>0);return e>2147483647&&(e=e-4294967295-1),e}},{key:"ReadFloat16",value:function(){var e=this.data[this.cursor++],t=this.data[this.cursor++],r=(t>>2&31)-15,n=(3&t)<<8|e;return 0===n&&-15===r?0:(1-2*(t>>7))*(1+n*Math.pow(2,-10))*Math.pow(2,r)}},{key:"ReadFloat32",value:function(){var e=this.data[this.cursor++],t=this.data[this.cursor++],r=this.data[this.cursor++],n=this.data[this.cursor++],i=(n<<1&255|r>>7)-127,o=(127&r)<<16|t<<8|e;return 0===o&&-127===i?0:(1-2*(n>>7))*(1+o*Math.pow(2,-23))*Math.pow(2,i)}},{key:"ReadString",value:function(){for(var e=this.data[this.cursor++],t="",r=0;r<e;++r)t+=String.fromCharCode(this.data[this.cursor++]);return t}}])&&n(t.prototype,r),i&&n(t,i),e}()},"./core/reader/Tw2BlackBinaryReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlackBinaryReader",(function(){return f})),r.d(t,"ErrBinaryReaderReadError",(function(){return p}));var n=r("./core/Tw2Error.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t,r){l(this,e),this.data=null,this.context=null,this.cursor=0,this.data=t,this.context=r,this.cursor=0}var t,r,n;return t=e,n=[{key:"expect",value:function(e,t,r){if(e!==t)throw new p({readError:"".concat(r,": expected ").concat(t,", got ").concat(e)})}}],(r=[{key:"AtEnd",value:function(){return 0===this.length}},{key:"ReadBinaryReader",value:function(t){return new e(this.ReadDataView(t),this.context)}},{key:"ReadCString",value:function(){for(var t=this.data,r=this.cursor;0!==this.ReadU8(););var n=t.byteOffset+r,i=this.cursor-r-1,o=new Uint8Array(t.buffer,n,i);return e.stringDecoder.decode(o)}},{key:"ReadCWString",value:function(){for(var t=this.data,r=this.cursor;0!==this.ReadU16(););var n=t.byteOffset+r,i=this.cursor-r-2,o=new Uint8Array(t.buffer,n,i);return e.wstringDecoder.decode(o)}},{key:"ReadDataView",value:function(e){if(e<0)throw new p({readError:'Argument should be positive: got "'.concat(e,'"')});if(this.length<e)throw new p({readError:"Argument is too big: remaining ".concat(this.length,', got "').concat(e,'"')});var t=this.data,r=new DataView(t.buffer,t.byteOffset+this.cursor,e);return this.cursor+=e,r}},{key:"ReadF32",value:function(){var e=this.data.getFloat32(this.cursor,!0);return this.cursor+=4,e}},{key:"ReadF32Array",value:function(e){if(e<0)throw new p({readError:'Argument should be positive but got "'.concat(e,'"')});for(var t=new Float32Array(e),r=0;r<e;r++)t[r]=this.ReadF32();return t}},{key:"ReadF64",value:function(){var e=this.data.getFloat64(this.cursor,!0);return this.cursor+=8,e}},{key:"ReadF64Array",value:function(e){if(e<0)throw new p({readError:'Argument should be positive but got "'.concat(e,'"')});for(var t=new Float64Array(e),r=0;r<e;r++)t[r]=this.ReadF64();return t}},{key:"ReadStringU16",value:function(){var e=this.ReadU16();if(e>this.stringTable.length)throw new p({readError:'Reading string "'.concat(e,'" but only ').concat(this.stringTable.length," exist")});return this.stringTable[e]}},{key:"ReadU8",value:function(){var e=this.data.getUint8(this.cursor);return this.cursor+=1,e}},{key:"ReadU16",value:function(){var e=this.data.getUint16(this.cursor,!0);return this.cursor+=2,e}},{key:"ReadU16Array",value:function(e){if(e<0)throw new p({readError:'Argument should be positive but got "'.concat(e,'"')});for(var t=new Uint16Array(e),r=0;r<e;r++)t[r]=this.ReadU16();return t}},{key:"ReadU32",value:function(){var e=this.data.getUint32(this.cursor,!0);return this.cursor+=4,e}},{key:"ReadU32Array",value:function(e){if(e<0)throw new p({readError:"Argument should be positive: got ".concat(e)});for(var t=new Uint32Array(e),r=0;r<e;r++)t[r]=this.ReadU32();return t}},{key:"ExpectEnd",value:function(e){if(0!==this.length)throw new p({readError:"".concat(e,": expected 0 bytes remaining, got ").concat(this.length)})}},{key:"ExpectU8",value:function(t,r){e.expect(this.ReadU8(),t,r)}},{key:"ExpectU16",value:function(t,r){e.expect(this.ReadU16(),t,r)}},{key:"ExpectU32",value:function(t,r){e.expect(this.ReadU32(),t,r)}},{key:"length",get:function(){return this.data.byteLength-this.cursor}},{key:"stringTable",get:function(){return this.context._stringTable}},{key:"references",get:function(){return this.context._ids}}])&&s(t.prototype,r),n&&s(t,n),e}();f.stringDecoder=new TextDecoder("utf-8"),f.wstringDecoder=new TextDecoder("utf-16le");var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,e);var t=a(r);function r(e){return l(this,r),t.call(this,e,"Error reading binary (%readError=undefined%)")}return r}(n.Tw2Error)},"./core/reader/Tw2BlackPropertyReaders.js":function(e,t,r){"use strict";r.r(t),r.d(t,"object",(function(){return p})),r.d(t,"rawObject",(function(){return d})),r.d(t,"array",(function(){return y})),r.d(t,"boolean",(function(){return m})),r.d(t,"string",(function(){return b})),r.d(t,"path",(function(){return v})),r.d(t,"enums",(function(){return g})),r.d(t,"float",(function(){return w})),r.d(t,"ushort",(function(){return x})),r.d(t,"uint",(function(){return _})),r.d(t,"byte",(function(){return z})),r.d(t,"vector2",(function(){return S})),r.d(t,"vector3",(function(){return j})),r.d(t,"color",(function(){return E})),r.d(t,"vector4",(function(){return T})),r.d(t,"matrix",(function(){return O})),r.d(t,"indexBuffer",(function(){return R})),r.d(t,"struct",(function(){return P})),r.d(t,"structList",(function(){return D})),r.d(t,"fromList",(function(){return A})),r.d(t,"notImplemented",(function(){return M}));var n,i=r("./global/index.js"),o=r("./global/math/index.js"),a=r("./core/Tw2Error.js"),u=r("./core/reader/Tw2BlackBinaryReader.js"),c=r("./global/utils/index.js"),l=r("./global/constant/type.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t;n||(s(t={},l.PT_BOOLEAN,m),s(t,l.PT_PATH,v),s(t,l.PT_STRING,b),s(t,l.PT_EXPRESSION,b),s(t,l.PT_BYTE,z),s(t,l.PT_UINT,_),s(t,l.PT_USHORT,x),s(t,l.PT_FLOAT,w),s(t,l.PT_VECTOR2,S),s(t,l.PT_VECTOR3,j),s(t,l.PT_VECTOR4,T),s(t,l.PT_QUATERNION,T),s(t,l.PT_MATRIX4,O),s(t,l.PT_COLOR,E),s(t,l.PT_STRUCT,p),s(t,l.PT_STRUCT_RAW,d),s(t,l.PT_STRUCT_LIST,y),s(t,l.PT_ARRAY,y),s(t,l.PT_PLAIN,d),s(t,l.PT_ENUM,g),s(t,l.PT_FLOAT64_ARRAY,R),s(t,l.PT_FLOAT32_ARRAY,R),s(t,l.PT_UINT32_ARRAY,R),s(t,l.PT_UINT16_ARRAY,R),s(t,l.PT_INT8_ARRAY,R),s(t,l.PT_INT16_ARRAY,R),s(t,l.PT_INT32_ARRAY,R),s(t,l.PT_UINT8_CLAMPED_ARRAY,R),s(t,l.PT_UINT8_ARRAY,R),s(t,l.PT_VECTOR,R),s(t,l.PT_MATRIX3,R),n=t);return n[Number(e)]||M}function p(e,t){var r=e.context,n=void 0!==t,o=i.tw2.GetDebugMode();if(!n){if(0===(t=e.ReadU32()))return null;if(e.references.has(t))return e.references.get(t)}var a=e.ReadBinaryReader(e.ReadU32()),l=a.ReadStringU16(),s=r.ConstructType(l),p=s.constructor.blackReaders||{};for(n||e.references.set(t,s);!a.AtEnd();){var d=a.ReadStringU16(),y=void 0;if(p[d]?(y=p[d]).blackStruct&&(y=y.blackStruct):Object(c.hasMetadata)("black",s,d)?y=Object(c.getMetadata)("black",s,d):Object(c.hasMetadata)("type",s,d)&&(y=f(Object(c.getMetadata)("type",s,d))),!y)throw o&&console.dir(s),new u.ErrBinaryReaderReadError({readError:'Unknown property "'.concat(d,'" for "').concat(l,'"')});if(!Object(c.isFunction)(y))throw o&&console.dir(s),new u.ErrBinaryReaderReadError({readError:'Invalid reader for property "'.concat(d,'" for "').concat(l,'"')});try{if(y.custom)y(a,s,d);else{!(d in s)&&o&&console.log("'".concat(l,"' missing property: '").concat(d,"'"));var m=y(a);s[d]=m,s.constructor.onAfterBlackPropertyReader&&s.constructor.onAfterBlackPropertyReader(d,m,s)}}catch(e){throw o&&console.dir(s),new u.ErrBinaryReaderReadError({message:"".concat(d," (").concat(s.constructor.name,") > ")+e.message})}}return a.ExpectEnd("object did not read to end"),"Initialize"in s&&s.Initialize(),s}function d(e){return p(e,null)}function y(e){for(var t=[],r=e.ReadU32(),n=0;n<r;n++)t[n]=p(e);return t}function m(e){return 0!==e.ReadU8()}function b(e){return e.ReadStringU16()}var h=new Map;function v(e){var t=e.ReadStringU16(),r=h.get("*");if(r){var n=r(t);n&&(t=n)}var i=Object(c.getPathExtension)(t),o=h.get(i);if(o){var a=o(t);if(a)return a}return t}function g(e){for(var t=e.ReadStringU16().split(","),r={},n=0;n<t.length;n++){var i=t[n].split("=");r[i[0]]=Number(i[1])}return r}function w(e){return e.ReadF32()}function x(e){return e.ReadU16()}function _(e){var t=e.ReadU32();return t in _.transforms?_.transforms[t]:t}function z(e){return e.ReadU8()}function S(e){return o.vec2.fromValues(e.ReadF32(),e.ReadF32())}function j(e){return o.vec3.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32())}function E(e){return o.vec4.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32())}function T(e){return o.vec4.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32())}function O(e){return o.mat4.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32())}function R(e){var t=e.ReadU32();if(4===e.ReadU16())return e.ReadU32Array(t);throw"unsupported for now"}function P(e){return function(t){return e.blackStruct(t)}}function D(e){return function(t){for(var r=t.ReadU32(),n=t.ReadU16(),i=[],o=0;o<r;o++){var a=t.ReadBinaryReader(n);i[o]=e.blackStruct(a),a.ExpectEnd("struct read to end")}return i}}function A(e){Object(c.isString)(e)&&(e={key:e});var t=e,r=t.key,n=t.struct,i=t.reroute,o=t.value,a=function(e,t,a){var u=t[i||a];if(!Object(c.isPlain)(u))throw new Error("Target is not a plain object");for(var l=n?D(n)(e):y(e),s=0;s<l.length;s++){var f=l[s],p=l[s][r];if(void 0===p)throw new Error("Array element property is undefined: ".concat(r));if(p in u&&console.warn("Property '".concat(p,"' already defined")),void 0===o)u[p]=f;else{if(!(o in f))throw new Error("Property is undefined: ".concat(o));u[p]=f[o]}}};return a.custom=!0,a}function M(e,t,r){throw new a.ErrFeatureNotImplemented({feature:"Black reader for property '".concat(r,"'")})}v.registerExtensionHandlers=function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&v.setExtensionHandler(t,e[t])},v.setExtensionHandler=function(e,t){if(null===t)h.delete(e);else{if(!Object(c.isFunction)(t))throw new ReferenceError("Invalid handler, must be a function or null");h.set(e,t)}},_.transforms={4294967295:-1,2147483648:-1},M.custom=!0},"./core/reader/Tw2BlackReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlackReader",(function(){return c}));var n=r("./global/index.js"),i=r("./core/reader/Tw2BlackBinaryReader.js"),o=r("./core/reader/Tw2ObjectReader.js"),a=r("./core/reader/Tw2BlackPropertyReaders.js");function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this._ids=null,this._comments=null,this._reader=null,this._start=0,this._stringTable=null,t&&(this.data=t instanceof ArrayBuffer?new DataView(t):t,this.Initialize())}return function(e,t,r){t&&u(e.prototype,t),r&&u(e,r)}(e,[{key:"Initialize",value:function(){if(!(this.data&&this.data instanceof DataView))throw new o.ErrBinaryFormat({formatError:"expected DataView"});var e=new i.Tw2BlackBinaryReader(this.data,this);if(2980901150!==e.ReadU32())throw new o.ErrBinaryFormat({formatError:"wrong FOURCC"});if(1!==e.ReadU32())throw new o.ErrBinaryFormat({formatError:"wrong version"});var t=e.ReadBinaryReader(e.ReadU32()),r=t.ReadU16();this._stringTable=[];for(var n=0;n<r;n++)this._stringTable[n]=t.ReadCString();t.ExpectEnd();var a=e.ReadBinaryReader(e.ReadU32()),u=a.ReadU16();this._comments=[];for(var c=0;c<u;c++)this._comments[c]=a.ReadCWString();a.ExpectEnd(),this._ids=new Map,this._reader=e,this._start=e.cursor}},{key:"Construct",value:function(){return this._reader.cursor=this._start,Object(a.object)(this._reader)}},{key:"ConstructType",value:function(t){if(n.tw2.HasClass(t))return new(n.tw2.GetClass(t));if(e.DEBUG_ENABLED)return{_type:t};throw new o.ErrBinaryObjectTypeNotFound({type:t})}}]),e}();c.DEBUG_ENABLED=!0},"./core/reader/Tw2ObjectReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ErrBinaryFormat",(function(){return y})),r.d(t,"ErrBinaryObjectTypeNotFound",(function(){return m})),r.d(t,"Tw2ObjectReader",(function(){return b}));var n=r("./global/index.js"),i=r("./core/reader/Tw2BinaryReader.js"),o=r("./core/Tw2Error.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){l(r,e);var t=f(r);function r(e){return c(this,r),t.call(this,e,"Invalid binary format (%formatError=undefined%)")}return r}(o.Tw2Error),m=function(e){l(r,e);var t=f(r);function r(e){return c(this,r),t.call(this,e,"Binary object type not found (%type%)")}return r}(o.Tw2Error),b=function(){function e(t){c(this,e),this.xmlNode=null,this._inputStack=null,this._initializeObjects=null,this._ids={},this._reader=null,this._stringTable=null,this._start=null,t&&(this.xmlNode=t,t&&this.Initialize())}return function(e,t,r){t&&u(e.prototype,t),r&&u(e,r)}(e,[{key:"Initialize",value:function(){if(!e.IsValidXML(this.xmlNode))throw new y({formatError:"Invalid binary, expected binred"});this._reader=new i.Tw2BinaryReader(new Uint8Array(this.xmlNode)),this._reader.cursor+=6,this._stringTable=[];for(var t=this._reader.ReadUInt32(),r=0;r<t;++r){var n=this._reader.ReadUInt16();this._stringTable.push(String.fromCharCode.apply(null,this._reader.data.subarray(this._reader.cursor,this._reader.cursor+n))),this._reader.cursor+=n}this._start=this._reader.cursor}},{key:"Construct",value:function(){return this._reader.cursor=this._start,e.ReadElement(this)}}],[{key:"IsValidXML",value:function(e){return e&&"binred"===String.fromCharCode.apply(null,new Uint8Array(e).subarray(0,6))}},{key:"ConstructObject",value:function(t){if("json"===t.type)return t;var r;if(n.tw2.HasClass(t.type))r=n.tw2.GetClass(t.type);else{if(!e.DEBUG_ENABLED)throw new m({type:t.type});r=Object}var i=new r;for(var o in t)if(t.hasOwnProperty(o)&&"type"!==o)if(t[o].constructor===Object){if(this.DEBUG_ENABLED&&(i[o]=i[o]||{}),i[o])for(var a in t[o])t[o].hasOwnProperty(a)&&(i[o][a]=t[o][a])}else i[o]=t[o];return"Initialize"in i&&i.Initialize(),i}},{key:"ReadUint",value:function(e,t){switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadUInt8();case this.ElementSize.MEDIUM:return e._reader.ReadUInt16();default:return e._reader.ReadUInt32()}}},{key:"ReadElementData",value:function(e,t){var r,n,i,a,u;switch(15&t){case this.ElementRawType.NULL:return null;case this.ElementRawType.BOOL:switch(48&t){case this.ElementSize.SMALL:return 0!==e._reader.ReadUInt8();case this.ElementSize.MEDIUM:return!1;default:return!0}case this.ElementRawType.INT:switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadInt8();case this.ElementSize.MEDIUM:return e._reader.ReadInt16();default:return e._reader.ReadInt32()}case this.ElementRawType.UINT:return this.ReadUint(e,t);case this.ElementRawType.FLOAT:switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadFloat16();case this.ElementSize.MEDIUM:return e._reader.ReadFloat32();default:throw new o.ErrFeatureNotImplemented({feature:"Element raw type Float64"})}case this.ElementRawType.STRING:return r=this.ReadUint(e,t),e._stringTable[r];case this.ElementRawType.ARRAY:for(a=this.ReadUint(e,t),i=[],n=0;n<a;++n)i.push(this.ReadElement(e));return i;case this.ElementRawType.MAPPING:for(a=this.ReadUint(e,t),i={},n=0;n<a;++n)i[e._stringTable[this.ReadUint(e,t)]]=this.ReadElement(e);return i;case this.ElementRawType.OBJECT:for(a=this.ReadUint(e,t),i={},n=0;n<a;++n)i[e._stringTable[this.ReadUint(e,t)]]=this.ReadElement(e);return this.ConstructObject(i);case this.ElementRawType.TYPED_ARRAY:for(a=this.ReadUint(e,t),u=e._reader.ReadUInt8(),i=[],n=0;n<a;++n)i.push(this.ReadElementData(e,u));return u in this.TypedArrays&&(i=new this.TypedArrays[u](i)),i;case this.ElementRawType.TYPED_MAPPING:for(a=this.ReadUint(e,t),u=e._reader.ReadUInt8(),i={},n=0;n<a;++n)i[e._stringTable[this.ReadUint(e,t)]]=this.ReadElementData(e,u);return i}}},{key:"ReadElement",value:function(e){var t,r=e._reader.ReadUInt8();if(r===this.REFERENCE_BIT)return e._ids[e._reader.ReadUInt16()];0!=(r&this.ID_BIT)&&(t=e._reader.ReadUInt16());var n=this.ReadElementData(e,63&r);return 0!=(r&this.ID_BIT)&&(e._ids[t]=n),n}}]),e}();b.DEBUG_ENABLED=!1,b.ID_BIT=64,b.REFERENCE_BIT=128,b.ElementRawType={NULL:0,BOOL:1,INT:2,UINT:3,FLOAT:4,STRING:5,ARRAY:6,MAPPING:7,OBJECT:8,TYPED_ARRAY:9,TYPED_MAPPING:10},b.ElementSize={SMALL:0,MEDIUM:16,LARGE:32},b.TypedArrays={2:Int8Array,3:Uint8Array,18:Int16Array,19:Uint16Array,34:Int32Array,35:Uint32Array,4:Float32Array,20:Float32Array,36:Float64Array};var h=b.ElementRawType,v=b.ElementSize;b.ElementTypes={NULL:h.NULL|v.SMALL,BOOL:h.BOOL|v.SMALL,FALSE:h.BOOL|v.MEDIUM,TRUE:h.BOOL|v.LARGE,INT8:h.INT|v.SMALL,UINT8:h.UINT|v.SMALL,INT16:h.INT|v.MEDIUM,UINT16:h.UINT|v.MEDIUM,INT32:h.INT|v.LARGE,UINT32:h.UINT|v.LARGE,FLOAT16:h.FLOAT|v.SMALL,FLOAT32:h.FLOAT|v.MEDIUM,FLOAT64:h.FLOAT|v.LARGE,SHORT_STRING:h.STRING|v.SMALL,MEDIUM_STRING:h.STRING|v.MEDIUM,LARGE_STRING:h.STRING|v.LARGE,SHORT_ARRAY:h.ARRAY|v.SMALL,MEDIUM_ARRAY:h.ARRAY|v.MEDIUM,LARGE_ARRAY:h.ARRAY|v.LARGE,SHORT_MAPPING:h.MAPPING|v.SMALL,MEDIUM_MAPPING:h.MAPPING|v.MEDIUM,LARGE_MAPPING:h.MAPPING|v.LARGE,SHORT_OBJECT:h.OBJECT|v.SMALL,MEDIUM_OBJECT:h.OBJECT|v.MEDIUM,LARGE_OBJECT:h.OBJECT|v.LARGE,SHORT_TYPED_ARRAY:h.TYPED_ARRAY|v.SMALL,MEDIUM_TYPED_ARRAY:h.TYPED_ARRAY|v.MEDIUM,LARGE_TYPED_ARRAY:h.TYPED_ARRAY|v.LARGE,SHORT_TYPED_MAPPING:h.TYPED_MAPPING|v.SMALL,MEDIUM_TYPED_MAPPING:h.TYPED_MAPPING|v.MEDIUM,LARGE_TYPED_MAPPING:h.TYPED_MAPPING|v.LARGE}},"./core/reader/geometry/CAKEReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CAKEReader",(function(){return f}));var n,i,o,a=r("./core/vertex/index.js"),u=r("./global/constant/index.js"),c=r("./global/utils/index.js"),l=r("./core/Tw2Error.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=c.meta.type("Tw2CakeReader")((o=i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="",this.areas=[],this.declaration=null,this.indexData=null,this.bufferData=null,this.boneBindings=[],this.blendShapes=[],this.models=[],this.animations=[],e.validate(t);var r=t.split(/\r?\n/),n=[],i=[],o=0;function s(){var t=r[o];if(!t)return{name:"EMPTY",value:void 0};var n=t.split(":"),i=n[0].toUpperCase();i.toUpperCase()in e.ShortName&&(i=e.ShortName[i.toUpperCase()]);var a=n[1]||"";switch(i){case"NOTE":case"NAME":return{name:i,value:a}}if(!a)throw new l.Tw2Error({message:"Unexpected value on line ".concat(o+1,": ").concat(n[0]),data:n[0]});if(a.includes(",")||a.includes("[")){a=(a=a.replace("[","").replace("]","")).split(",");for(var u=0;u<a.length;u++)a[u]=Number(a[u])}return{name:i,value:a}}for(;o<r.length;){var f=s(),p=f.name,d=f.value;switch(p){case"EMPTY":case"NOTE":o++;break;case"NAME":this.name=d||"",o++;break;case"AREA":var y={name:d,start:n.length*e.IndexArray.BYTES_PER_ELEMENT,count:0};for(this.areas.push(y),o++;o<r.length;){var m=s();if("FACE"!==m.name)break;if(!Object(c.isVector3)(m.value))throw new ReferenceError("Unexpected face value on line ".concat(o+1,": ").concat(m.value));y.count+=3,n.push(m.value[0]),n.push(m.value[1]),n.push(m.value[2]),o++}break;case"POSITION":case"NORMAL":case"TANGENT":case"BITANGENT":case"TEXCOORD0":case"TEXCOORD1":for(var b=void 0,h=0;h<i.length;h++)i[h].name===p&&(b=i[h]);if(b||(b=e.getDeclarationObjectByName(p),i.push(b)),!Object(c.isVector)(d)||d.length!==b.elements)throw new ReferenceError('Invalid value for declaration "'.concat(p,'" on line ').concat(o+1,": ").concat(d));b.vertices.push(d),o++;break;default:throw new ReferenceError("Unexpected value type on line ".concat(o+1,": ").concat(p))}}var v=0,g=i.length?i[0].vertices.length:0;this.declaration=new a.Tw2VertexDeclaration;for(var w=0;w<i.length;w++){var x=i[w],_=x.vertices,z=x.usageIndex,S=x.usage,j=x.elements,E=x.name;if(_.length!==g)throw new ReferenceError("Unexpected vertex count: ".concat(E));this.declaration.elements.push(a.Tw2VertexElement.from({usage:S,usageIndex:z,elements:j,type:u.GL_FLOAT,offset:4*v})),v+=j}this.declaration.RebuildHash(),this.declaration.stride=4*v;var T=g*v;if(T){this.bufferData=new Float32Array(T);for(var O=0,R=0;R<g;R++)for(var P=0;P<i.length;P++)for(var D=0;D<i[P].elements;D++)this.bufferData[O++]=i[P].vertices[R][D]}this.indexData=new e.IndexArray(n)}var t,r,n;return t=e,n=[{key:"construct",value:function(t){this.validate(t);for(var r=t.split("MESH"),n=[],i=0;i<r.length;i++)n.push(new e(r[i]));return n}},{key:"validate",value:function(e){if(!Object(c.isString)(e))throw new ReferenceError("Invalid format, expected string")}},{key:"getDeclarationObjectByName",value:function(e){return e in this.ShortName&&(e=this.ShortName[e]),{name:e,vertices:[],usageIndex:this.UsageIndex[e],usage:this.Usage[e],elements:this.Elements[e]}}}],(r=null)&&s(t.prototype,r),n&&s(t,n),e}(),i.IndexArray=Uint32Array,i.ShortName={"#":"NOTE",A:"AREA",M:"NAME",P:"POSITION",N:"NORMAL",T:"TANGENT",BT:"BITANGENT",T0:"TEXCOORD0",T1:"TEXCOORD1",F:"FACE"},i.Elements={POSITION:3,NORMAL:3,TANGENT:4,BITANGENT:4,TEXCOORD0:2,TEXCOORD1:2},i.UsageIndex={POSITION:0,NORMAL:0,TANGENT:0,BITANGENT:0,TEXCOORD0:0,TEXCOORD1:1},i.Usage={POSITION:a.Tw2VertexElement.Type.POSITION,NORMAL:a.Tw2VertexElement.Type.NORMAL,TANGENT:a.Tw2VertexElement.Type.TANGENT,BITANGENT:a.Tw2VertexElement.Type.BINORMAL,TEXCOORD0:a.Tw2VertexElement.Type.TEXCOORD,TEXCOORD1:a.Tw2VertexElement.Type.TEXCOORD},i.requestResponseType="text",i.extension="cake",i.byMesh=!0,n=o))||n},"./core/reader/geometry/GR2JsonReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"GR2JsonReader",(function(){return p}));var n=r("./core/vertex/index.js"),i=r("./core/Tw2Error.js"),o=r("./core/reader/granny/index.js"),a=r("./global/math/index.js"),u=r("./global/constant/gl.js"),c=r("./global/tw2.js"),l=r("./core/geometry/index.js");function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f={POSITION:{elements:3,usage:n.Tw2VertexElement.Type.POSITION,usageIndex:0},COLOR:{elements:4,usage:n.Tw2VertexElement.Type.COLOR,usageIndex:0},NORMAL:{elements:3,usage:n.Tw2VertexElement.Type.NORMAL,usageIndex:0},TANGENT:{elements:4,usage:n.Tw2VertexElement.Type.TANGENT,usageIndex:0},BITANGENT:{elements:4,usage:n.Tw2VertexElement.Type.BITANGENT,usageIndex:0},BINORMAL:{elements:4,usage:n.Tw2VertexElement.Type.BINORMAL,usageIndex:0},TEXCOORD0:{elements:2,usage:n.Tw2VertexElement.Type.TEXCOORD,usageIndex:0},TEXCOORD1:{elements:2,usage:n.Tw2VertexElement.Type.TEXCOORD,usageIndex:1},BLENDWEIGHT:{elements:4,usage:n.Tw2VertexElement.Type.BLENDINDICES,usageIndex:0},BLENDINDICE:{elements:4,usage:n.Tw2VertexElement.Type.BLENDWEIGHT,usageIndex:0}},p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,p;return t=e,p=[{key:"Prepare",value:function(e,t){for(var r=e.models,s=void 0===r?[]:r,p=e.meshes,d=void 0===p?[]:p,y=e.animations,m=void 0===y?[]:y,b=c.device.gl,h=0;h<d.length;h++){var v=d[h],g=new l.Tw2GeometryMesh;g.name=v.name,v.minBounds&&a.vec3.copy(g.minBounds,v.minBounds),v.maxBounds&&a.vec3.copy(g.maxBounds,v.maxBounds);var w=0,x=0,_=[];if(v.vertex)for(var z in v.vertex)if(v.vertex.hasOwnProperty(z)&&v.vertex[z].length){var S=f[z.toUpperCase()];if(!S)throw new Error("Unsupported vertex type: ".concat(z));var j=v.vertex[z].length/S.elements;if(w){if(w!==j)throw new Error("Invalid vertex count: ".concat(z))}else w=j;_.push({usage:S.usage,usageIndex:S.usageIndex,offset:4*x,type:u.GL_FLOAT,elements:S.elements,data:v.vertex[z]}),x+=S.elements}for(var E=new n.Tw2VertexDeclaration,T=0;T<_.length;T++)E.elements.push(n.Tw2VertexElement.from(_[T]));E.RebuildHash(),E.stride=4*x,g.declaration=E;var O=new Float32Array(x*w);if(O.length)for(var R=0,P=0;P<w;P++)for(var D=0;D<_.length;D++)for(var A=_[D],M=A.elements,C=A.data,k=0;k<M;k++)O[R++]=C[P*M+k];g.bufferLength=O.length,g.buffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,g.buffer),b.bufferData(b.ARRAY_BUFFER,O,b.STATIC_DRAW);for(var I=0,L=0;L<v.indices.length;L++){var G=v.indices[L].faces;I+=(void 0===G?[]:G).length}var F=new Uint32Array(I),B=!1;if(F.length)for(var N=0,U=0,V=0;V<v.indices.length;V++){var q=v.indices[V],H=q.faces,W=void 0===H?[]:H,X=new l.Tw2GeometryMeshArea;X.name=q.name,X.start=U*F.constructor.BYTES_PER_ELEMENT,X.count=W.length,q.minBounds&&a.vec3.copy(X.minBounds,q.minBounds),q.maxBounds&&a.vec3.copy(X.maxBounds,q.maxBounds);for(var K=0;K<W.length;K++)F[N++]=W[K];g.areas.push(X),a.box3.bounds.isEmpty(X.minBounds,X.maxBounds)&&(B=!0),U+=W.length}g.indexes=b.createBuffer(),g.indexType=2===F.BYTES_PER_ELEMENT?b.UNSIGNED_SHORT:b.UNSIGNED_INT,b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g.indexes),b.bufferData(b.ELEMENT_ARRAY_BUFFER,F,b.STATIC_DRAW);for(var Y=v.boneBindings,Q=void 0===Y?[]:Y,Z=0;Z<Q.length;Z++){var J=Q[Z],$=J.name,ee=J.minBounds,te=J.maxBounds;g.boneBindings.push($),ee&&te?g.boneBounds.push(a.box3.fromBounds(a.box3.create(),ee,te)):g.boneBounds.push(a.box3.create())}if(v.blendShapes&&v.blendShapes.length)throw new i.ErrFeatureNotImplemented({feature:"Geometry blend shapes"});g._areas=g.areas.length,g._faces=F.length/3,g._vertices=O.length/x,(t.systemMirror||g.blendShapes.length)&&(g.bufferData=O,g.indexData=F),B&&g.RecalculateAreaBounds(O,F),g.RebuildBounds(),t.meshes.push(g)}for(var re=0;re<s.length;re++){var ne=s[re],ie=new l.Tw2GeometryModel;if(ie.name=ne.name,ne.skeleton){var oe=new l.Tw2GeometrySkeleton;ie.skeleton=oe,oe.name=ne.skeleton.name;for(var ae=ne.skeleton.bones,ue=void 0===ae?[]:ae,ce=0;ce<ue.length;ce++){var le=ue[ce],se=new l.Tw2GeometryBone;oe.bones.push(se),se.name=le.name||le.bone,se.parentIndex=255!==le.parentIndex?le.parentIndex:-1,le.position&&a.vec3.copy(se.position,le.position),le.orientation&&a.quat.copy(se.orientation,le.orientation),le.scaleShear&&a.mat3.copy(se.scaleShear,le.scaleShear)}for(var fe=0;fe<oe.bones.length;fe++){var pe=oe.bones[fe];pe.UpdateTransform(),-1!==pe.parentIndex?a.mat4.multiply(pe.worldTransform,oe.bones[pe.parentIndex].worldTransform,pe.localTransform):a.mat4.copy(pe.worldTransform,pe.localTransform),a.mat4.invert(pe.worldTransformInv,pe.worldTransform)}t.models.push(ie)}for(var de=ne.meshBindings,ye=void 0===de?[]:de,me=0;me<ye.length;me++)t.constructor.BindMeshToModel(t.meshes[ye[me]],ie,t)}for(var be=new o.Gr2CurveReader,he=0;he<m.length;he++){var ve=m[he],ge=new l.Tw2GeometryAnimation;ge.name=ve.name,ge.duration=ve.duration;for(var we=ve.trackGroups,xe=void 0===we?[]:we,_e=0;_e<xe.length;_e++){var ze=new l.Tw2GeometryTrackGroup;ze.name=xe[_e].name;for(var Se=0;Se<t.models.length;Se++)if(t.models[Se].name===ze.name){ze.model=t.models[Se];break}for(var je=xe[_e].transformTracks,Ee=void 0===je?[]:je,Te=0;Te<Ee.length;Te++){var Oe=new l.Tw2GeometryTransformTrack;if(Oe.name=Ee[Te].name,Oe.orientation=be.CreateTw2GeometryCurveFromJSON(Ee[Te].orientation,4),Oe.position=be.CreateTw2GeometryCurveFromJSON(Ee[Te].position,3),Oe.scaleShear=be.CreateTw2GeometryCurveFromJSON(Ee[Te].scaleShear,9),"ROOT"===Oe.name.toUpperCase()&&a.mat3.identity(Oe.scaleShear.controls),Oe.orientation)for(var Re=0,Pe=0,De=0,Ae=0,Me=Oe.orientation.controls,Ce=0;Ce<Me.length;Ce+=4){var ke=Me[Ce],Ie=Me[Ce+1],Le=Me[Ce+2],Ge=Me[Ce+3];Re*ke+Pe*Ie+De*Le+Ae*Ge<0&&(Me[Ce]=-ke,Me[Ce+1]=-Ie,Me[Ce+2]=-Le,Me[Ce+3]=-Ge),Re=ke,Pe=Ie,De=Le,Ae=Ge}ze.transformTracks.push(Oe)}ge.trackGroups.push(ze)}t.animations.push(ge)}t.RebuildBounds(),t.OnPrepared()}}],(r=null)&&s(t.prototype,r),p&&s(t,p),e}();p.requestResponseType="json",p.extension="gr2_json"},"./core/reader/geometry/OBJReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"OBJReader",(function(){return s}));var n=r("../node_modules/webgl-obj-loader/dist/webgl-obj-loader.min.js"),i=r("./core/reader/geometry/CAKEReader.js"),o=r("./global/utils/index.js"),a=r("./core/vertex/index.js"),u=r("./global/constant/gl.js"),c=r("./global/tw2.js");function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="",this.areas=[],this.declaration=null,this.indexData=null,this.bufferData=null,this.boneBindings=[],this.blendShapes=[],this.models=[],this.animations=[];var r=new n.Mesh(t);function o(e,t,r){for(var n=[],i=0,o=0;o<e.length;o+=t){for(var a=[],u=0;u<t;u++)a[u]=e[i],i+=1;r&&a.push(0),n.push(a)}return n}this.declaration=new a.Tw2VertexDeclaration;var l=[],s=i.CAKEReader.getDeclarationObjectByName("POSITION");s.vertices=o(r.vertices,3),l.push(s);var f=i.CAKEReader.getDeclarationObjectByName("NORMAL");f.vertices=o(r.vertexNormals,3),l.push(f);var p=i.CAKEReader.getDeclarationObjectByName("TEXCOORD0");p.vertices=o(r.textures,2),l.push(p);try{r.calculateTangentsAndBitangents();var d=i.CAKEReader.getDeclarationObjectByName("TANGENT");d.vertices=o(r.tangents,3,!0),l.push(d);var y=i.CAKEReader.getDeclarationObjectByName("BITANGENT");y.vertices=o(r.bitangents,3,!0),l.push(y)}catch(e){c.tw2.Debug({name:"Tw2WavefrontReader",message:"Could not generate tangents and bitangents..."})}for(var m=[],b=0;b<r.materialNames.length;b++){this.areas.push({name:r.materialNames[b],start:m.length*Uint32Array.BYTES_PER_ELEMENT,count:r.indicesPerMaterial[b].length});for(var h=0;h<r.indicesPerMaterial[b].length;h++)m.push(r.indicesPerMaterial[b][h])}for(var v=0,g=l.length?l[0].vertices.length:0,w=0;w<l.length;w++){var x=l[w],_=x.vertices,z=x.usageIndex,S=x.usage,j=x.elements,E=x.name;if(_.length!==g)throw new ReferenceError("Unexpected vertex count: ".concat(E));this.declaration.elements.push(a.Tw2VertexElement.from({usage:S,usageIndex:z,elements:j,type:u.GL_FLOAT,offset:4*v})),v+=j}this.declaration.RebuildHash(),this.declaration.stride=4*v;var T=g*v;if(T){this.bufferData=new Float32Array(T);for(var O=0,R=0;R<g;R++)for(var P=0;P<l.length;P++)for(var D=0;D<l[P].elements;D++)this.bufferData[O++]=l[P].vertices[R][D]}this.indexData=new i.CAKEReader.IndexArray(m)}var t,r,s;return t=e,s=[{key:"construct",value:function(e){return this.validate(e),[new this(e)]}},{key:"validate",value:function(e){if(!Object(o.isString)(e))throw new ReferenceError("Invalid format, expected string")}}],(r=null)&&l(t.prototype,r),s&&l(t,s),e}();s.requestResponseType="text",s.extension="obj",s.byMesh=!0},"./core/reader/geometry/WbgReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WBGReader",(function(){return s}));var n=r("./global/tw2.js"),i=r("./core/reader/Tw2BinaryReader.js"),o=r("./core/geometry/index.js"),a=r("./global/math/index.js"),u=r("./core/vertex/index.js"),c=r("./core/resource/index.js");function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,s;return t=e,s=[{key:"Prepare",value:function(t,r){return(new e).Prepare(t,r)}},{key:"ReadVertexBuffer",value:function(e,t,r){for(var i=e.ReadUInt8(),o=0,a=0;a<i;++a){var l=new u.Tw2VertexElement;l.usage=e.ReadUInt8(),l.usageIndex=e.ReadUInt8(),l.fileType=e.ReadUInt8(),l.type=n.device.gl.FLOAT,l.elements=1+(l.fileType>>5),l.offset=4*o,t.elements[a]=l,o+=l.elements}t.RebuildHash(),t.stride=4*o;var s=e.ReadUInt32();if(0===s)return null;for(var f=new Float32Array(o*s),p=0,d=0;d<s;++d)for(var y=0;y<i;++y){var m=t.elements[y];switch(15&m.fileType){case 0:if(0!=(16&m.fileType))for(var b=0;b<m.elements;++b)f[p++]=e.ReadInt8()/127;else for(var h=0;h<m.elements;++h)f[p++]=e.ReadInt8();break;case 1:if(0!=(16&m.fileType))for(var v=0;v<m.elements;++v)f[p++]=e.ReadInt8()/32767;else for(var g=0;g<m.elements;++g)f[p++]=e.ReadInt16();break;case 2:for(var w=0;w<m.elements;++w)f[p++]=e.ReadInt32();break;case 3:for(var x=0;x<m.elements;++x)f[p++]=e.ReadFloat16();break;case 4:for(var _=0;_<m.elements;++_)f[p++]=e.ReadFloat32();break;case 8:if(0!=(16&m.fileType))for(var z=0;z<m.elements;++z)f[p++]=e.ReadUInt8()/255;else for(var S=0;S<m.elements;++S)f[p++]=e.ReadUInt8();break;case 9:if(0!=(16&m.fileType))for(var j=0;j<t.elements[y].elements;++j)f[p++]=e.ReadUInt8()/65535;else for(var E=0;E<m.elements;++E)f[p++]=e.ReadUInt16();break;case 10:for(var T=0;T<m.elements;++T)f[p++]=e.ReadUInt32();break;default:throw new c.ErrGeometryFileType({path:r,key:"fileType",value:15&m.fileType})}}return f}},{key:"ReadIndexBuffer",value:function(e){var t=e.ReadUInt8(),r=e.ReadUInt32();if(0===t){for(var n=new Uint16Array(r),i=0;i<r;++i)n[i]=e.ReadUInt16();return n}for(var o=new Uint32Array(r),a=0;a<r;++a)o[a]=e.ReadUInt32();return o}},{key:"ReadCurve",value:function(e){if(0===e.ReadUInt8())return null;var t=new o.Tw2GeometryCurve;t.dimension=e.ReadUInt8(),t.degree=e.ReadUInt8();var r=e.ReadUInt32();t.knots=new Float32Array(r);for(var n=0;n<r;++n)t.knots[n]=e.ReadFloat32();var i=e.ReadUInt32();t.controls=new Float32Array(i);for(var a=0;a<i;++a)t.controls[a]=e.ReadFloat32();return t}}],(r=[{key:"Prepare",value:function(e,t){var r=n.device.gl,u=t.path,c=new i.Tw2BinaryReader(new Uint8Array(e)),l=this.constructor,s=l.ReadVertexBuffer,f=l.ReadIndexBuffer,p=l.ReadCurve;c.ReadUInt8();for(var d=c.ReadUInt8(),y=0;y<d;++y){var m=new o.Tw2GeometryMesh;m.name=c.ReadString(),m.buffer=null,m.indexes=null;var b=s(c,m.declaration,u);b&&(m.bufferLength=b.length,m.buffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,m.buffer),r.bufferData(r.ARRAY_BUFFER,b,r.STATIC_DRAW));var h=this.constructor.ReadIndexBuffer(c);h&&(m.indexes=r.createBuffer(),m.indexType=2===h.BYTES_PER_ELEMENT?r.UNSIGNED_SHORT:r.UNSIGNED_INT,r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,m.indexes),r.bufferData(r.ELEMENT_ARRAY_BUFFER,h,r.STATIC_DRAW));for(var v=c.ReadUInt8(),g=!1,w=0;w<v;++w){var x=new o.Tw2GeometryMeshArea;m.areas.push(x),x.name=c.ReadString(),x.start=c.ReadUInt32()*h.BYTES_PER_ELEMENT,x.count=3*c.ReadUInt32(),a.vec3.set(x.minBounds,c.ReadFloat32(),c.ReadFloat32(),c.ReadFloat32()),a.vec3.set(x.maxBounds,c.ReadFloat32(),c.ReadFloat32(),c.ReadFloat32()),x.boundsSphereRadius=a.box3.bounds.toPositionRadius(x.minBounds,x.maxBounds,x.boundsSpherePosition),a.box3.bounds.isEmpty(x.minBounds,x.maxBounds)&&(g=!0)}g&&h&&b&&m.RecalculateAreaBounds(b,h);var _=c.ReadUInt8();m.boneBindings=[];for(var z=0;z<_;++z)m.boneBindings[z]=c.ReadString();var S=c.ReadUInt16();if((S||t.systemMirror)&&(m.bufferData=b,m.indexData=h),S){m.blendShapes=[];for(var j=0;j<S;++j)m.blendShapes[j]=new o.Tw2BlendShapeData,m.blendShapes[j].name=c.ReadString(),m.blendShapes[j].buffer=s(c,m.blendShapes[j].declaration,u),m.blendShapes[j].indexes=f(c)}m._areas=v,m._faces=h.length/3,m._vertices=b.length/(m.declaration.stride/4),t.meshes[y]=m}t.RebuildBounds();for(var E=c.ReadUInt8(),T=0;T<E;++T){var O=new o.Tw2GeometryModel;O.name=c.ReadString(),O.skeleton=new o.Tw2GeometrySkeleton;for(var R=c.ReadUInt8(),P=0;P<R;++P){var D=new o.Tw2GeometryBone;D.name=c.ReadString();var A=c.ReadUInt8();if(D.parentIndex=c.ReadUInt8(),255===D.parentIndex&&(D.parentIndex=-1),0!=(1&A)?a.vec3.set(D.position,c.ReadFloat32(),c.ReadFloat32(),c.ReadFloat32()):a.vec3.set(D.position,0,0,0),0!=(2&A)?a.quat.set(D.orientation,c.ReadFloat32(),c.ReadFloat32(),c.ReadFloat32(),c.ReadFloat32()):a.quat.identity(D.orientation),0!=(4&A))for(var M=0;M<9;++M)D.scaleShear[M]=c.ReadFloat32();else a.mat3.identity(D.scaleShear);O.skeleton.bones.push(D)}for(var C=0;C<O.skeleton.bones.length;++C)O.skeleton.bones[C].UpdateTransform(),-1!==O.skeleton.bones[C].parentIndex?a.mat4.multiply(O.skeleton.bones[C].worldTransform,O.skeleton.bones[O.skeleton.bones[C].parentIndex].worldTransform,O.skeleton.bones[C].localTransform):a.mat4.copy(O.skeleton.bones[C].worldTransform,O.skeleton.bones[C].localTransform),a.mat4.invert(O.skeleton.bones[C].worldTransformInv,O.skeleton.bones[C].worldTransform);for(var k=c.ReadUInt8(),I=0;I<k;++I){var L=c.ReadUInt8();L<t.meshes.length&&t.constructor.BindMeshToModel(t.meshes[L],O,t)}t.models.push(O)}for(var G=c.ReadUInt8(),F=0;F<G;++F){var B=new o.Tw2GeometryAnimation;B.name=c.ReadString(),B.duration=c.ReadFloat32();for(var N=c.ReadUInt8(),U=0;U<N;++U){var V=new o.Tw2GeometryTrackGroup;V.name=c.ReadString();for(var q=0;q<t.models.length;++q)if(t.models[q].name===V.name){V.model=t.models[q];break}for(var H=c.ReadUInt8(),W=0;W<H;++W){var X=new o.Tw2GeometryTransformTrack;if(X.name=c.ReadString(),X.orientation=p(c),X.position=p(c),X.scaleShear=p(c),X.orientation)for(var K=0,Y=0,Q=0,Z=0,J=0;J<X.orientation.controls.length;J+=4){var $=X.orientation.controls[J],ee=X.orientation.controls[J+1],te=X.orientation.controls[J+2],re=X.orientation.controls[J+3];K*$+Y*ee+Q*te+Z*re<0&&(X.orientation.controls[J]=-$,X.orientation.controls[J+1]=-ee,X.orientation.controls[J+2]=-te,X.orientation.controls[J+3]=-re),K=$,Y=ee,Q=te,Z=re}V.transformTracks.push(X)}B.trackGroups.push(V)}t.animations.push(B)}t.RebuildBounds(),t.OnPrepared()}}])&&l(t.prototype,r),s&&l(t,s),e}();s.requestResponseType="arraybuffer",s.extension="wbg"},"./core/reader/geometry/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/reader/geometry/CAKEReader.js");r.d(t,"CAKEReader",(function(){return n.CAKEReader}));var i=r("./core/reader/geometry/GR2JsonReader.js");r.d(t,"GR2JsonReader",(function(){return i.GR2JsonReader}));var o=r("./core/reader/geometry/OBJReader.js");r.d(t,"OBJReader",(function(){return o.OBJReader}));var a=r("./core/reader/geometry/WbgReader.js");r.d(t,"WBGReader",(function(){return a.WBGReader}))},"./core/reader/granny/Gr2CurveReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveReader",(function(){return p})),r.d(t,"ErrGr2CurveDataFormatUnsupported",(function(){return d}));var n=r("./core/reader/granny/curves/index.js"),i=r("./core/Tw2Error.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function e(){s(this,e),this.formats=new Map,this.formats.set(0,n.Gr2CurveDataDaKeyframes32f),this.formats.set(1,n.Gr2CurveDataDaK32fC32f),this.formats.set(2,n.Gr2CurveDataDaIdentity),this.formats.set(3,n.Gr2CurveDataDaConstant32f),this.formats.set(4,n.Gr2CurveDataD3Constant32f),this.formats.set(5,n.Gr2CurveDataD4Constant32f),this.formats.set(6,n.Gr2CurveDataDaK16uC16u),this.formats.set(7,n.Gr2CurveDataDaK8uC8u),this.formats.set(8,n.Gr2CurveDataD4nK16uC15u),this.formats.set(9,n.Gr2CurveDataD4nK8uC7u),this.formats.set(10,n.Gr2CurveDataD3K16uC16u),this.formats.set(11,n.Gr2CurveDataD3K8uC8u),this.formats.set(12,n.Gr2CurveDataD9I1K16uC16u),this.formats.set(13,n.Gr2CurveDataD9I3K16uC16u),this.formats.set(14,n.Gr2CurveDataD9I1K8uC8u),this.formats.set(15,n.Gr2CurveDataD9I3K8uC8u),this.formats.set(16,n.Gr2CurveDataD3I1K32fC32f),this.formats.set(17,n.Gr2CurveDataD3I1K16uC16u),this.formats.set(18,n.Gr2CurveDataD3I1K8uC8u)}var t,r,i;return t=e,(r=[{key:"Register",value:function(e,t){this.formats.set(e,t)}},{key:"Get",value:function(e){var t=this.formats.get(e);if(t)return t;throw new d({format:e})}},{key:"CreateCurveFromJSON",value:function(e){return this.Get(e.format).from(e)}},{key:"CreateTw2GeometryCurveFromJSON",value:function(e,t,r){return this.CreateCurveFromJSON(e).CreateTw2GeometryCurve(t,r)}}])&&f(t.prototype,r),i&&f(t,i),e}(),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(r,e);var t=u(r);function r(e){return s(this,r),t.call(this,e,"Unsupported granny curve data format (%format%)")}return r}(i.Tw2Error)},"./core/reader/granny/curves/Gr2Curve2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2Curve2",(function(){return R})),r.d(t,"ErrGr2CurveDataNotSerialized",(function(){return P})),r.d(t,"ErrGr2CurveDataFormatInvalid",(function(){return D})),r.d(t,"ErrGr2CurveDataDimensionInvalid",(function(){return A})),r.d(t,"ErrGr2CurveDataControlSizeInvalid",(function(){return M})),r.d(t,"ErrGr2CurveDataVec3NotSupported",(function(){return C})),r.d(t,"ErrGr2CurveDataRotationNotSupported",(function(){return k})),r.d(t,"ErrGr2CurveDataQuatNotSupported",(function(){return I})),r.d(t,"ErrGr2CurveDataMat3NotSupported",(function(){return L}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js"),b=r("./core/geometry/index.js"),h=r("./core/Tw2Error.js");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R=(n=m.meta.type("Gr2Curve2"),i=m.meta.uint,o=m.meta.uint,a=m.meta.uint,u=m.meta.abstract,c=m.meta.abstract,n((y=d=function(e){_(o,e);var t,r,n,i=S(o);function o(){var e;w(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(e=i.call.apply(i,[this].concat(r)),"dimension",f,E(e)),g(e,"degree",p,E(e)),e}return t=o,n=[{key:"GetKnotsFromControl",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Float32Array(t),i=0;i<t;i++)n[i]=e[i]/r;return n}},{key:"GetKnotsFromControlWithOneOverKnotScaleTrunc",value:function(e,t,r){return this.GetKnotsFromControl(e,t,this.ConvertOneOverKnotScaleTrunc(r))}},{key:"ConvertOneOverKnotScaleTrunc",value:function(e){return new Float32Array(new Uint32Array([e<<16]).buffer)[0]}}],(r=[{key:"GetDuration",value:function(){return this.GetKnots()[this.GetKnotCount()-1]}},{key:"GetKnotCount",value:function(){}},{key:"GetKnots",value:function(){}},{key:"GetVec3Buffer",value:function(){throw new C}},{key:"GetQuatBuffer",value:function(){throw new I}},{key:"GetMat3Buffer",value:function(){throw new L}},{key:"CreateTw2GeometryCurve",value:function(e,t){var r;switch(e){case 3:r=this.GetVec3Buffer();break;case 4:r=this.GetQuatBuffer();break;case 9:r=this.GetMat3Buffer();break;default:throw new A({dimension:e})}var n=new b.Tw2GeometryCurve;if(n.format=this.format,n.dimension=e,n.degree=this.degree,n.knots=Array.from(this.GetKnots()),n.controls=Array.from(r),t){for(var i=!1,o=Array.from(n.controls).reverse(),a=Array.from(n.knots).reverse(),u=o.length/e-e,c=0;c<u;c++){for(var l=[],s=[],f=0;f<e;f++)l[f]=o[c*e+f],s[f]=o[(c+1)*e+f];Object(m.isVectorEqual)(l,s)&&(i=!0,o.splice(0,e),a.splice(0,1),c--)}i&&(n.knots=a.reverse(),n.controls=o.reverse())}return n}},{key:"format",get:function(){return this.constructor.format},set:function(e){if(this.constructor.format!==e)throw new ReferenceError('Invalid format id "'.concat(e,'" for curve, expected "').concat(this.constructor.format,'"'))}}])&&x(t.prototype,r),n&&x(t,n),o}(m.meta.Model),d.Type={POSITION:1,ROTATION:2,SCALE_SHEAR:3},f=O((s=y).prototype,"dimension",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),p=O(s.prototype,"degree",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O(s.prototype,"format",[a],Object.getOwnPropertyDescriptor(s.prototype,"format"),s.prototype),O(s.prototype,"GetKnotCount",[u],Object.getOwnPropertyDescriptor(s.prototype,"GetKnotCount"),s.prototype),O(s.prototype,"GetKnots",[c],Object.getOwnPropertyDescriptor(s.prototype,"GetKnots"),s.prototype),l=s))||l),P=function(e){_(r,e);var t=S(r);function r(e){return w(this,r),t.call(this,e,"Granny curve data not serialized")}return r}(h.Tw2Error),D=function(e){_(r,e);var t=S(r);function r(e){return w(this,r),t.call(this,e,"Invalid granny curve data format")}return r}(h.Tw2Error),A=function(e){_(r,e);var t=S(r);function r(e){return w(this,r),t.call(this,e,"Invalid dimension for granny curve (%dimension%)")}return r}(h.Tw2Error),M=function(e){_(r,e);var t=S(r);function r(e){return w(this,r),t.call(this,e,"Granny control size is invalid (%size%)")}return r}(h.Tw2Error),C=function(e){_(r,e);var t=S(r);function r(e){return w(this,r),t.call(this,e,"Granny curve doesn't provide vec3 data")}return r}(h.Tw2Error),k=function(e){_(r,e);var t=S(r);function r(e){return w(this,r),t.call(this,e,"Granny curve doesn't provide rotation data")}return r}(h.Tw2Error),I=function(e){_(r,e);var t=S(r);function r(e){return w(this,r),t.call(this,e,"Granny curve doesn't provide quat data")}return r}(h.Tw2Error),L=function(e){_(r,e);var t=S(r);function r(e){return w(this,r),t.call(this,e,"Granny curve doesn't provide mat3 data")}return r}(h.Tw2Error)},"./core/reader/granny/curves/Gr2CurveDataD3Constant32f.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD3Constant32f",(function(){return T}));var n,i,o,a,u,c,l,s=r("./core/reader/granny/curves/Gr2Curve2.js"),f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x,_,z,S,j,E,T=(n=f.meta.type("Gr2CurveDataD3Constant32f"),i=f.meta.float32Array,n((l=c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,r,n,i=h(o);function o(){var e;y(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(e=i.call.apply(i,[this].concat(r)),"controls",u,g(e)),e}return t=o,(r=[{key:"GetKnotCount",value:function(){return 1}},{key:"GetKnots",value:function(){return new Float32Array([0])}},{key:"GetVec3Buffer",value:function(){return this.controls}}])&&m(t.prototype,r),n&&m(t,n),o}(s.Gr2Curve2),c.format=4,x=(a=l).prototype,_="controls",z=[i],S={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Float32Array([0,0,0])}},E={},Object.keys(S).forEach((function(e){E[e]=S[e]})),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=z.slice().reverse().reduce((function(e,t){return t(x,_,e)||e}),E),j&&void 0!==E.initializer&&(E.value=E.initializer?E.initializer.call(j):void 0,E.initializer=void 0),void 0===E.initializer&&(Object.defineProperty(x,_,E),E=null),u=E,o=a))||o)},"./core/reader/granny/curves/Gr2CurveDataD3I1K16uC16u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD3I1K16uC16u",(function(){return P}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./core/reader/granny/curves/Gr2Curve2.js"),h=r("./core/reader/granny/curves/Gr2CurveDataD3I1K32fC32f.js"),v=r("./global/utils/index.js"),g=r("./global/math/index.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P=(n=v.meta.type("Gr2CurveDataD3I1K16uC16u"),i=v.meta.vector3,o=v.meta.vector3,a=v.meta.uint16Array,u=v.meta.uint,n((m=y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,r,n,i=j(o);function o(){var e;_(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(e=i.call.apply(i,[this].concat(r)),"controlOffsets",s,T(e)),x(e,"controlScales",f,T(e)),x(e,"knotsControls",p,T(e)),x(e,"oneOverKnotScaleTrunc",d,T(e)),e._knots=null,e._buffer=null,e}return t=o,(r=[{key:"GetKnotCount",value:function(){return this.knotsControls.length/2}},{key:"GetKnots",value:function(){return this._knots||this.RebuildKnots(),this._knots}},{key:"GetVec3Buffer",value:function(){return this._buffer||this.RebuildVec3Buffer(),this._buffer}},{key:"Rebuild",value:function(){this.RebuildKnots(),this.RebuildVec3Buffer()}},{key:"RebuildKnots",value:function(){this._knots=b.Gr2Curve2.GetKnotsFromControlWithOneOverKnotScaleTrunc(this.knotsControls,this.GetKnotCount(),this.oneOverKnotScaleTrunc)}},{key:"RebuildVec3Buffer",value:function(){this._buffer=Object(h.rebuildBuffer)(this.knotsControls,this.GetKnotCount(),this.controlScales,this.controlOffsets)}}])&&z(t.prototype,r),n&&z(t,n),o}(b.Gr2Curve2),y.format=17,s=R((l=m).prototype,"controlOffsets",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec3.create()}}),f=R(l.prototype,"controlScales",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec3.create()}}),p=R(l.prototype,"knotsControls",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint16Array(0)}}),d=R(l.prototype,"oneOverKnotScaleTrunc",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=l))||c)},"./core/reader/granny/curves/Gr2CurveDataD3I1K32fC32f.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD3I1K32fC32f",(function(){return T})),r.d(t,"rebuildBuffer",(function(){return O}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./core/reader/granny/curves/Gr2Curve2.js"),m=r("./global/math/index.js"),b=r("./global/utils/index.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return z(this,r)}}function z(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T=(n=b.meta.type("Gr2CurveDataD3I1K32fC32f"),i=b.meta.vector3,o=b.meta.vector3,a=b.meta.float32Array,n((d=p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(o,e);var t,r,n,i=_(o);function o(){var e;g(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(e=i.call.apply(i,[this].concat(r)),"controlOffsets",l,S(e)),v(e,"controlScales",s,S(e)),v(e,"knotsControls",f,S(e)),e._knots=null,e._buffer=null,e}return t=o,(r=[{key:"GetKnotCount",value:function(){return this.knotsControls/2}},{key:"GetKnots",value:function(){return this._knots||this.RebuildKnots(),this._knots}},{key:"GetVec3Buffer",value:function(){return this._buffer||this.RebuildVec3Buffer(),this._buffer}},{key:"RebuildKnots",value:function(){this._knots=y.Gr2Curve2.GetKnotsFromControl(this.controls,this.GetKnotCount())}},{key:"RebuildVec3Buffer",value:function(){this._buffer=O(this.knotsControls,this.GetKnotCount(),this.controlScales,this.controlOffsets)}}])&&w(t.prototype,r),n&&w(t,n),o}(y.Gr2Curve2),p.format=16,l=E((c=d).prototype,"controlOffsets",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.vec3.create()}}),s=E(c.prototype,"controlScales",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.vec3.create()}}),f=E(c.prototype,"knotsControls",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Float32Array(0)}}),u=c))||u);function O(e,t,r,n){for(var i=new Float32Array(3*t),o=0;o<t;o++)for(var a=0;a<3;a++)i[3*o+a]=e[t+o]*r[a]+n[a];return i}},"./core/reader/granny/curves/Gr2CurveDataD3I1K8uC8u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD3I1K8uC8u",(function(){return E}));var n,i,o,a,u,c,l,s=r("./core/reader/granny/curves/Gr2CurveDataD3I1K16uC16u.js"),f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,x,_,z,S,j,E=(n=f.meta.type("Gr2CurveDataD3I1K8uC8u"),i=f.meta.uint8Array,n((l=c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,e);var t=b(r);function r(){var e;y(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(e=t.call.apply(t,[this].concat(i)),"knotsControls",u,v(e)),e}return r}(s.Gr2CurveDataD3I1K16uC16u),c.format=18,w=(a=l).prototype,x="knotsControls",_=[i],z={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint8Array(0)}},j={},Object.keys(z).forEach((function(e){j[e]=z[e]})),j.enumerable=!!j.enumerable,j.configurable=!!j.configurable,("value"in j||j.initializer)&&(j.writable=!0),j=_.slice().reverse().reduce((function(e,t){return t(w,x,e)||e}),j),S&&void 0!==j.initializer&&(j.value=j.initializer?j.initializer.call(S):void 0,j.initializer=void 0),void 0===j.initializer&&(Object.defineProperty(w,x,j),j=null),u=j,o=a))||o)},"./core/reader/granny/curves/Gr2CurveDataD3K16uC16u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD3K16uC16u",(function(){return R}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./core/reader/granny/curves/Gr2Curve2.js"),h=r("./global/utils/index.js"),v=r("./global/math/index.js");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R=(n=h.meta.type("Gr2CurveDataD3K16uC16u"),i=h.meta.vector3,o=h.meta.vector3,a=h.meta.uint16Array,u=h.meta.uint,n((m=y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(o,e);var t,r,n,i=S(o);function o(){var e;x(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return w(e=i.call.apply(i,[this].concat(r)),"controlOffsets",s,E(e)),w(e,"controlScales",f,E(e)),w(e,"knotsControls",p,E(e)),w(e,"oneOverKnotScaleTrunc",d,E(e)),e._knots=null,e._buffer=null,e}return t=o,(r=[{key:"GetKnotCount",value:function(){return this.knotsControls.length/4}},{key:"GetKnots",value:function(){return this._knots||this.RebuildKnots(),this._knots}},{key:"GetVec3Buffer",value:function(){return this._buffer||this.RebuildVec3Buffer(),this._buffer}},{key:"Rebuild",value:function(){this.RebuildKnots(),this.RebuildVec3Buffer()}},{key:"RebuildKnots",value:function(){this._knots=b.Gr2Curve2.GetKnotsFromControlWithOneOverKnotScaleTrunc(this.knotsControls,this.GetKnotCount(),this.oneOverKnotScaleTrunc)}},{key:"RebuildVec3Buffer",value:function(){this._buffer=function(e,t,r,n){for(var i=new Float32Array(3*t),o=0;o<t;o++)for(var a=0;a<3;a++)i[3*o+a]=e[t+3*o+a]*r[a]+n[a];return i}(this.knotsControls,this.GetKnotCount(),this.controlScales,this.controlOffsets)}}])&&_(t.prototype,r),n&&_(t,n),o}(b.Gr2Curve2),y.format=10,s=O((l=m).prototype,"controlOffsets",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec3.create()}}),f=O(l.prototype,"controlScales",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec3.create()}}),p=O(l.prototype,"knotsControls",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint16Array(0)}}),d=O(l.prototype,"oneOverKnotScaleTrunc",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=l))||c)},"./core/reader/granny/curves/Gr2CurveDataD3K8uC8u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD3K8uC8u",(function(){return E}));var n,i,o,a,u,c,l,s=r("./core/reader/granny/curves/Gr2CurveDataD3K16uC16u.js"),f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,x,_,z,S,j,E=(n=f.meta.type("Gr2CurveDataD3K8uC8u"),i=f.meta.uint8Array,n((l=c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,e);var t=b(r);function r(){var e;y(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(e=t.call.apply(t,[this].concat(i)),"knotsControls",u,v(e)),e}return r}(s.Gr2CurveDataD3K16uC16u),c.format=11,w=(a=l).prototype,x="knotsControls",_=[i],z={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint8Array(0)}},j={},Object.keys(z).forEach((function(e){j[e]=z[e]})),j.enumerable=!!j.enumerable,j.configurable=!!j.configurable,("value"in j||j.initializer)&&(j.writable=!0),j=_.slice().reverse().reduce((function(e,t){return t(w,x,e)||e}),j),S&&void 0!==j.initializer&&(j.value=j.initializer?j.initializer.call(S):void 0,j.initializer=void 0),void 0===j.initializer&&(Object.defineProperty(w,x,j),j=null),u=j,o=a))||o)},"./core/reader/granny/curves/Gr2CurveDataD4Constant32f.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD4Constant32f",(function(){return T}));var n,i,o,a,u,c,l,s=r("./core/reader/granny/curves/Gr2Curve2.js"),f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x,_,z,S,j,E,T=(n=f.meta.type("Gr2CurveDataD4Constant32f"),i=f.meta.float32Array,n((l=c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,r,n,i=h(o);function o(){var e;y(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(e=i.call.apply(i,[this].concat(r)),"controls",u,g(e)),e}return t=o,(r=[{key:"GetKnotCount",value:function(){return 1}},{key:"GetKnots",value:function(){return new Float32Array([0])}},{key:"GetQuatBuffer",value:function(){return this.controls}}])&&m(t.prototype,r),n&&m(t,n),o}(s.Gr2Curve2),c.format=5,x=(a=l).prototype,_="controls",z=[i],S={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Float32Array([0,0,0,1])}},E={},Object.keys(S).forEach((function(e){E[e]=S[e]})),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=z.slice().reverse().reduce((function(e,t){return t(x,_,e)||e}),E),j&&void 0!==E.initializer&&(E.value=E.initializer?E.initializer.call(j):void 0,E.initializer=void 0),void 0===E.initializer&&(Object.defineProperty(x,_,E),E=null),u=E,o=a))||o)},"./core/reader/granny/curves/Gr2CurveDataD4nK16uC15u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD4nK16uC15u",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./core/reader/granny/curves/Gr2Curve2.js"),m=r("./global/utils/index.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=m.meta.type("Gr2CurveDataD4nK16uC15u"),i=m.meta.uint,o=m.meta.float,a=m.meta.uint16Array,n((d=p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(o,e);var t,r,n,i=x(o);function o(){var e;v(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(e=i.call.apply(i,[this].concat(r)),"scaleOffsetTableEntries",l,z(e)),h(e,"oneOverKnotScale",s,z(e)),h(e,"knotsControls",f,z(e)),e._knots=null,e._quatBuffer=null,e}return t=o,n=[{key:"GetQuatFromControl",value:function(e,t,r,n,i,o){var a=(32768&r)>>14|n>>15,u=a+1&3,c=u+1&3,l=c+1&3,s=(32767&t)*i[u]+o[u],f=(32767&r)*i[c]+o[c],p=(32767&n)*i[l]+o[l],d=Math.sqrt(1-(s*s+f*f+p*p));return 0!=(32768&t)&&(d=-d),e[u]=s,e[c]=f,e[l]=p,e[a]=d,e}}],(r=[{key:"GetKnotCount",value:function(){return this.knotsControls.length/4}},{key:"GetKnots",value:function(){return this._knots||this.RebuildKnots(),this._knots}},{key:"GetQuatBuffer",value:function(){return this._quatBuffer||this.RebuildQuatBuffer(),this._quatBuffer}},{key:"RebuildKnots",value:function(){this._knots=y.Gr2Curve2.GetKnotsFromControl(this.knotsControls,this.GetKnotCount(),this.oneOverKnotScale)}},{key:"RebuildQuatBuffer",value:function(){this._quatBuffer=function(e,t,r,n,i){for(var o=new Float32Array([1.4142135,.70710677,.35355338,.35355338,.35355338,.17677669,.17677669,.17677669,-1.4142135,-.70710677,-.35355338,-.35355338,-.35355338,-.17677669,-.17677669,-.17677669]),a=new Float32Array([-.70710677,-.35355338,-.53033006,-.17677669,.17677669,-.17677669,-.088388346,0,.70710677,.35355338,.53033006,.17677669,-.17677669,.17677669,.088388346,-0]),u=new Float32Array([o[n>>0&15]*r,o[n>>4&15]*r,o[n>>8&15]*r,o[n>>12&15]*r]),c=new Float32Array([a[n>>0&15],a[n>>4&15],a[n>>8&15],a[n>>12&15]]),l=new Float32Array([0,0,0,1]),s=new Float32Array(4*t),f=0;f<t;f++)i(l,e[t+3*f],e[t+3*f+1],e[t+3*f+2],u,c),s[4*f]=l[0],s[4*f+1]=l[1],s[4*f+2]=l[2],s[4*f+3]=l[3];return s}(this.knotsControls,this.GetKnotCount(),this.constructor.SCALE_TABLE_MULTIPLIER,this.scaleOffsetTableEntries,this.constructor.GetQuatFromControl)}}])&&g(t.prototype,r),n&&g(t,n),o}(y.Gr2Curve2),p.SCALE_TABLE_MULTIPLIER=30518509e-12,p.format=8,l=j((c=d).prototype,"scaleOffsetTableEntries",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=j(c.prototype,"oneOverKnotScale",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=j(c.prototype,"knotsControls",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint8Array(0)}}),u=c))||u)},"./core/reader/granny/curves/Gr2CurveDataD4nK8uC7u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD4nK8uC7u",(function(){return T}));var n,i,o,a,u,c,l,s=r("./core/reader/granny/curves/Gr2CurveDataD4nK16uC15u.js"),f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x,_,z,S,j,E,T=(n=f.meta.type("Gr2CurveDataD4nK8uC7u"),i=f.meta.uint8Array,n((l=c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,r,n,i=h(o);function o(){var e;y(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(e=i.call.apply(i,[this].concat(r)),"knotsControls",u,g(e)),e}return t=o,n=[{key:"GetQuatFromControl",value:function(e,t,r,n,i,o){var a=(128&r)>>6|(128&n)>>7,u=a+1&3,c=u+1&3,l=c+1&3,s=(127&t)*i[u]+o[u],f=(127&r)*i[c]+o[c],p=(127&n)*i[l]+o[l],d=Math.sqrt(1-(s*s+f*f+p*p));return 0!=(128&t)&&(d=-d),e[u]=s,e[c]=f,e[l]=p,e[a]=d,e}}],(r=null)&&m(t.prototype,r),n&&m(t,n),o}(s.Gr2CurveDataD4nK16uC15u),c.SCALE_TABLE_MULTIPLIER=.0078740157,c.format=9,x=(a=l).prototype,_="knotsControls",z=[i],S={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint8Array(0)}},E={},Object.keys(S).forEach((function(e){E[e]=S[e]})),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=z.slice().reverse().reduce((function(e,t){return t(x,_,e)||e}),E),j&&void 0!==E.initializer&&(E.value=E.initializer?E.initializer.call(j):void 0,E.initializer=void 0),void 0===E.initializer&&(Object.defineProperty(x,_,E),E=null),u=E,o=a))||o)},"./core/reader/granny/curves/Gr2CurveDataD9I1K16uC16u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD9I1K16uC16u",(function(){return O}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./core/reader/granny/curves/Gr2Curve2.js"),h=r("./global/utils/index.js");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var O=(n=h.meta.type("Gr2CurveDataD9I1K16uC16u"),i=h.meta.uint,o=h.meta.float,a=h.meta.float,u=h.meta.uint16Array,n((m=y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(o,e);var t,r,n,i=z(o);function o(){var e;w(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(e=i.call.apply(i,[this].concat(r)),"oneOverKnotScaleTrunc",s,j(e)),g(e,"controlScale",f,j(e)),g(e,"controlOffset",p,j(e)),g(e,"knotsControls",d,j(e)),e._knots=null,e._mat3Buffer=null,e}return t=o,(r=[{key:"GetKnotCount",value:function(){return this.knotsControls/2}},{key:"GetKnots",value:function(){return this._knots||this.RebuildKnots(),this._knots}},{key:"GetQuatBuffer",value:function(){throw new b.ErrGr2CurveDataRotationNotSupported}},{key:"GetMat3Buffer",value:function(){return this._mat3Buffer||this.RebuildMat3Buffer(),this._mat3Buffer}},{key:"RebuildKnots",value:function(){this._knots=b.Gr2Curve2.GetKnotsFromControlWithOneOverKnotScaleTrunc(this.knotsControls,this.GetKnotCount(),this.oneOverKnotScaleTrunc)}},{key:"RebuildMat3Buffer",value:function(){var e=this.GetKnotCount(),t=this.knotsControls,r=(this.controlScale,this.controlOffset);this._mat3Buffer=new Float32Array(9*e);for(var n=this._mat3Buffer,i=0;i<e;i++){var o=t[e+i]*o+r;n[9*i]=o,n[9*i+1]=0,n[9*i+2]=0,n[9*i+3]=0,n[9*i+4]=o,n[9*i+5]=0,n[9*i+6]=0,n[9*i+7]=0,n[9*i+8]=o}}}])&&x(t.prototype,r),n&&x(t,n),o}(b.Gr2Curve2),y.format=12,s=T((l=m).prototype,"oneOverKnotScaleTrunc",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=T(l.prototype,"controlScale",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=T(l.prototype,"controlOffset",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=T(l.prototype,"knotsControls",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint16Array(0)}}),c=l))||c)},"./core/reader/granny/curves/Gr2CurveDataD9I1K8uC8u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD9I1K8uC8u",(function(){return E}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js"),f=r("./core/reader/granny/curves/Gr2CurveDataD9I1K16uC16u.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,x,_,z,S,j,E=(n=s.meta.type("Gr2CurveDataD9I1K8uC8u"),i=s.meta.uint8Array,n((l=c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,e);var t=b(r);function r(){var e;y(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(e=t.call.apply(t,[this].concat(i)),"knotsControls",u,v(e)),e}return r}(f.Gr2CurveDataD9I1K16uC16u),c.format=14,w=(a=l).prototype,x="knotsControls",_=[i],z={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint8Array(0)}},j={},Object.keys(z).forEach((function(e){j[e]=z[e]})),j.enumerable=!!j.enumerable,j.configurable=!!j.configurable,("value"in j||j.initializer)&&(j.writable=!0),j=_.slice().reverse().reduce((function(e,t){return t(w,x,e)||e}),j),S&&void 0!==j.initializer&&(j.value=j.initializer?j.initializer.call(S):void 0,j.initializer=void 0),void 0===j.initializer&&(Object.defineProperty(w,x,j),j=null),u=j,o=a))||o)},"./core/reader/granny/curves/Gr2CurveDataD9I3K16uC16u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD9I3K16uC16u",(function(){return R}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./core/reader/granny/curves/Gr2Curve2.js"),h=r("./global/utils/index.js"),v=r("./global/math/index.js");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R=(n=h.meta.type("Gr2CurveDataD9I3K16uC16u"),i=h.meta.uint,o=h.meta.vector3,a=h.meta.float,u=h.meta.uint16Array,n((m=y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(o,e);var t,r,n,i=S(o);function o(){var e;x(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return w(e=i.call.apply(i,[this].concat(r)),"oneOverKnotScaleTrunc",s,E(e)),w(e,"controlScale",f,E(e)),w(e,"controlOffset",p,E(e)),w(e,"knotsControls",d,E(e)),e._knots=null,e._mat3Buffer=null,e}return t=o,(r=[{key:"GetKnotCount",value:function(){return this.knotsControls/4}},{key:"GetKnots",value:function(){return this._knots||this.RebuildKnots(),this._knots}},{key:"GetQuatBuffer",value:function(){throw new b.ErrGr2CurveDataRotationNotSupported}},{key:"GetMat3Buffer",value:function(){return this._mat3Buffer||this.RebuildMat3Buffer(),this._mat3Buffer}},{key:"RebuildKnots",value:function(){this._knots=b.Gr2Curve2.GetKnotsFromControlWithOneOverKnotScaleTrunc(this.knotsControls,this.GetKnotCount(),this.oneOverKnotScaleTrunc)}},{key:"RebuildMat3Buffer",value:function(){var e=this.GetKnotCount(),t=this.knotsControls,r=this.controlOffset,n=this.controlScale;this._mat3Buffer=new Float32Array(9*e);for(var i=this._mat3Buffer,o=0;o<e;o++)i[9*o]=t[e+3*o]*n[0]+r[0],i[9*o+1]=0,i[9*o+2]=0,i[9*o+3]=0,i[9*o+4]=t[e+3*o+1]*n[1]+r[1],i[9*o+5]=0,i[9*o+6]=0,i[9*o+7]=0,i[9*o+8]=t[e+3*o+2]*n[2]+r[2]}}])&&_(t.prototype,r),n&&_(t,n),o}(b.Gr2Curve2),y.format=13,s=O((l=m).prototype,"oneOverKnotScaleTrunc",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=O(l.prototype,"controlScale",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec3.create()}}),p=O(l.prototype,"controlOffset",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec3.create()}}),d=O(l.prototype,"knotsControls",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint16Array(0)}}),c=l))||c)},"./core/reader/granny/curves/Gr2CurveDataD9I3K8uC8u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataD9I3K8uC8u",(function(){return E}));var n,i,o,a,u,c,l,s=r("./core/reader/granny/curves/Gr2CurveDataD9I3K16uC16u.js"),f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,x,_,z,S,j,E=(n=f.meta.type("Gr2CurveDataD9I3K8uC8u"),i=f.meta.uint8Array,n((l=c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,e);var t=b(r);function r(){var e;y(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(e=t.call.apply(t,[this].concat(i)),"knotsControls",u,v(e)),e}return r}(s.Gr2CurveDataD9I3K16uC16u),c.format=15,w=(a=l).prototype,x="knotsControls",_=[i],z={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint8Array(0)}},j={},Object.keys(z).forEach((function(e){j[e]=z[e]})),j.enumerable=!!j.enumerable,j.configurable=!!j.configurable,("value"in j||j.initializer)&&(j.writable=!0),j=_.slice().reverse().reduce((function(e,t){return t(w,x,e)||e}),j),S&&void 0!==j.initializer&&(j.value=j.initializer?j.initializer.call(S):void 0,j.initializer=void 0),void 0===j.initializer&&(Object.defineProperty(w,x,j),j=null),u=j,o=a))||o)},"./core/reader/granny/curves/Gr2CurveDataDaConstant32f.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataDaConstant32f",(function(){return T}));var n,i,o,a,u,c,l,s=r("./core/reader/granny/curves/Gr2Curve2.js"),f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x,_,z,S,j,E,T=(n=f.meta.type("Gr2CurveDataDaConstant32f"),i=f.meta.float32Array,n((l=c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,r,n,i=h(o);function o(){var e;y(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(e=i.call.apply(i,[this].concat(r)),"controls",u,g(e)),e}return t=o,(r=[{key:"GetKnotCount",value:function(){return 1}},{key:"GetKnots",value:function(){return new Float32Array([0])}},{key:"GetMat3Buffer",value:function(){return this.controls}}])&&m(t.prototype,r),n&&m(t,n),o}(s.Gr2Curve2),c.format=3,x=(a=l).prototype,_="controls",z=[i],S={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Float32Array([1,0,0,0,1,0,0,0,1])}},E={},Object.keys(S).forEach((function(e){E[e]=S[e]})),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=z.slice().reverse().reduce((function(e,t){return t(x,_,e)||e}),E),j&&void 0!==E.initializer&&(E.value=E.initializer?E.initializer.call(j):void 0,E.initializer=void 0),void 0===E.initializer&&(Object.defineProperty(x,_,E),E=null),u=E,o=a))||o)},"./core/reader/granny/curves/Gr2CurveDataDaIdentity.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataDaIdentity",(function(){return T}));var n,i,o,a,u,c,l,s=r("./core/reader/granny/curves/Gr2Curve2.js"),f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x,_,z,S,j,E,T=(n=f.meta.type("Gr2CurveDataDaIdentity"),i=f.meta.uint,n((l=c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,r,n,i=h(o);function o(){var e;y(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(e=i.call.apply(i,[this].concat(r)),"dimension",u,g(e)),e}return t=o,(r=[{key:"GetKnotCount",value:function(){return 1}},{key:"GetKnots",value:function(){return new Float32Array([0])}},{key:"GetVec3Buffer",value:function(){return new Float32Array([0,0,0])}},{key:"GetQuatBuffer",value:function(){return new Float32Array([0,0,0,1])}},{key:"GetMat3Buffer",value:function(){return new Float32Array([1,0,0,0,1,0,0,0,1])}}])&&m(t.prototype,r),n&&m(t,n),o}(s.Gr2Curve2),c.format=2,x=(a=l).prototype,_="dimension",z=[i],S={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}},E={},Object.keys(S).forEach((function(e){E[e]=S[e]})),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=z.slice().reverse().reduce((function(e,t){return t(x,_,e)||e}),E),j&&void 0!==E.initializer&&(E.value=E.initializer?E.initializer.call(j):void 0,E.initializer=void 0),void 0===E.initializer&&(Object.defineProperty(x,_,E),E=null),u=E,o=a))||o)},"./core/reader/granny/curves/Gr2CurveDataDaK16uC16u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataDaK16uC16u",(function(){return T}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./core/reader/granny/curves/Gr2Curve2.js"),m=r("./global/utils/index.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,r){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return z(this,r)}}function z(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T=(n=m.meta.type("Gr2CurveDataDaK16uC16u"),i=m.meta.uint,o=m.meta.float32Array,a=m.meta.uint16Array,n((d=p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(o,e);var t,r,n,i=_(o);function o(){var e;v(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(e=i.call.apply(i,[this].concat(r)),"oneOverKnotScaleTrunc",l,S(e)),h(e,"controlScaleOffsets",s,S(e)),h(e,"knotsControls",f,S(e)),e._knots=null,e._mat3Buffer=null,e._quatBuffer=null,e}return t=o,(r=[{key:"GetType",value:function(){var e=this.GetControlSize();switch(e){case 4:return y.Gr2Curve2.Type.ROTATION;case 9:return y.Gr2Curve2.Type.SCALE_SHEAR;default:throw new y.ErrGr2CurveDataControlSizeInvalid({size:e})}}},{key:"GetControlSize",value:function(){return this.controlScaleOffsets.length/2}},{key:"GetKnotCount",value:function(){return this.knotsControls.length/(this.GetControlSize()+1)}},{key:"GetKnots",value:function(){return this._knots||this.RebuildKnots(),this._knots}},{key:"RebuildKnots",value:function(){this._knots=y.Gr2Curve2.GetKnotsFromControlWithOneOverKnotScaleTrunc(this.knotsControls,this.GetKnotCount(),this.oneOverKnotScaleTrunc)}},{key:"GetMat3Buffer",value:function(){if(this.GetType()===y.Gr2Curve2.Type.SCALE_SHEAR)return this._mat3Buffer||this.RebuildMat3Buffer(),this._mat3Buffer;w(j(o.prototype),"GetMat3Buffer",this).call(this)}},{key:"GetQuatBuffer",value:function(){if(this.GetType()===y.Gr2Curve2.Type.ROTATION)return this._quatBuffer||this.RebuildQuatBuffer(),this._quatBuffer;w(j(o.prototype),"GetQuatBuffer",this).call(this)}},{key:"RebuildMat3Buffer",value:function(){this.GetType()!==y.Gr2Curve2.Type.SCALE_SHEAR?this._mat3Buffer=null:this._mat3Buffer=O(this.knotsControls,this.GetKnotCount(),9,this.controlScaleOffsets)}},{key:"RebuildQuatBuffer",value:function(){this.GetType()!==y.Gr2Curve2.Type.ROTATION?this._quatBuffer=null:this._quatBuffer=O(this.knotsControls,this.GetKnotCount(),4,this.controlScaleOffsets)}}])&&g(t.prototype,r),n&&g(t,n),o}(y.Gr2Curve2),p.format=6,l=E((c=d).prototype,"oneOverKnotScaleTrunc",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=E(c.prototype,"controlScaleOffsets",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Float32Array(0)}}),f=E(c.prototype,"knotsControls",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint16Array(0)}}),u=c))||u);function O(e,t,r,n){for(var i=new Float32Array(t*r),o=0;o<t;o++)for(var a=0;a<9;a++)i[o*r+a]=e[t+o*r+a]*n[a]+n[r+a];return i}},"./core/reader/granny/curves/Gr2CurveDataDaK32fC32f.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataDaK32fC32f",(function(){return j}));var n,i,o,a,u,c,l,s,f,p=r("./core/reader/granny/curves/Gr2Curve2.js"),d=r("./global/utils/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=d.meta.type("Gr2CurveDataDaK32fC32f"),i=d.meta.float32Array,o=d.meta.float32Array,n((f=s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,e);var t,r,n,i=w(o);function o(){var e;b(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(e=i.call.apply(i,[this].concat(r)),"knots",c,_(e)),m(e,"controls",l,_(e)),e}return t=o,(r=[{key:"GetCurveType",value:function(){var e=this.controls.length;if(3*this.knots.length===e)return p.Gr2Curve2.Type.POSITION;if(4*this.knots.length===e)return p.Gr2Curve2.Type.ROTATION;if(9*this.knots.length===e)return p.Gr2Curve2.Type.SCALE_SHEAR;throw new p.ErrGr2CurveDataControlSizeInvalid({size:e})}},{key:"GetKnotCount",value:function(){return this.knots.length}},{key:"GetKnots",value:function(){return this.knots}},{key:"GetVec3Buffer",value:function(){if(this.GetCurveType()===p.Gr2Curve2.Type.POSITION)return this.controls;v(z(o.prototype),"GetVec3Buffer",this).call(this)}},{key:"GetQuatBuffer",value:function(){if(this.GetCurveType()===p.Gr2Curve2.Type.ROTATION)return this.controls;v(z(o.prototype),"GetQuatBuffer",this).call(this)}},{key:"GetMat3Buffer",value:function(){if(this.GetCurveType()===p.Gr2Curve2.Type.SCALE_SHEAR)return this.controls;v(z(o.prototype),"GetMat3Buffer",this).call(this)}}])&&h(t.prototype,r),n&&h(t,n),o}(p.Gr2Curve2),s.format=1,c=S((u=f).prototype,"knots",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Float32Array(0)}}),l=S(u.prototype,"controls",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Float32Array(0)}}),a=u))||a)},"./core/reader/granny/curves/Gr2CurveDataDaK8uC8u.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataDaK8uC8u",(function(){return E}));var n,i,o,a,u,c,l,s=r("./core/reader/granny/curves/Gr2CurveDataDaK16uC16u.js"),f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,x,_,z,S,j,E=(n=f.meta.type("Gr2CurveDataDaK8uC8u"),i=f.meta.uint8Array,n((l=c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,e);var t=b(r);function r(){var e;y(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(e=t.call.apply(t,[this].concat(i)),"knotsControls",u,v(e)),e}return r}(s.Gr2CurveDataDaK16uC16u),c.format=18,w=(a=l).prototype,x="knotsControls",_=[i],z={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Uint8Array(0)}},j={},Object.keys(z).forEach((function(e){j[e]=z[e]})),j.enumerable=!!j.enumerable,j.configurable=!!j.configurable,("value"in j||j.initializer)&&(j.writable=!0),j=_.slice().reverse().reduce((function(e,t){return t(w,x,e)||e}),j),S&&void 0!==j.initializer&&(j.value=j.initializer?j.initializer.call(S):void 0,j.initializer=void 0),void 0===j.initializer&&(Object.defineProperty(w,x,j),j=null),u=j,o=a))||o)},"./core/reader/granny/curves/Gr2CurveDataDaKeyframes32f.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Gr2CurveDataDaKeyframes32f",(function(){return j}));var n,i,o,a,u,c,l,s,f,p=r("./core/reader/granny/curves/Gr2Curve2.js"),d=r("./global/utils/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=d.meta.type("Gr2CurveDataDaKeyframes32f"),i=d.meta.uint,o=d.meta.float32Array,n((f=s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,e);var t,r,n,i=w(o);function o(){var e;b(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(e=i.call.apply(i,[this].concat(r)),"dimension",c,_(e)),m(e,"controls",l,_(e)),e}return t=o,n=[{key:"GetBufferFromControls",value:function(e,t,r){for(var n=new Float32Array(t*r),i=0;i<t;i++)for(var o=0;o<r;o++)n[i*r+o]=e[i*r+o]}}],(r=[{key:"GetType",value:function(){switch(this.dimension){case 3:return p.Gr2Curve2.Type.POSITION;case 4:return p.Gr2Curve2.Type.ROTATION;case 9:return p.Gr2Curve2.Type.SCALE_SHEAR;default:throw new ReferenceError("Invalid dimension (".concat(this.dimension,")"))}}},{key:"GetKnotCount",value:function(){return this.controls.length/this.dimension}},{key:"GetKnots",value:function(){return this._knots||this.RebuildKnots(),this._knots}},{key:"GetVec3Buffer",value:function(){if(this.GetType()===p.Gr2Curve2.Type.POSITION)return this._vec3Buffer||this.RebuildVec3Buffer(),this._vec3Buffer;v(z(o.prototype),"GetVec3Buffer",this).call(this)}},{key:"GetQuatBuffer",value:function(){if(this.GetType()===p.Gr2Curve2.Type.ROTATION)return this._quatBuffer||this.RebuildQuatBuffer(),this._quatBuffer;v(z(o.prototype),"GetQuatBuffer",this).call(this)}},{key:"GetMat3Buffer",value:function(){if(this.GetType()===p.Gr2Curve2.Type.SCALE_SHEAR)return this._mat3Buffer||this.RebuildMat3Buffer(),this._mat3Buffer;v(z(o.prototype),"GetMat3Buffer",this).call(this)}},{key:"RebuildKnots",value:function(){var e=this.GetKnotCount();this._knots=new Float32Array(e);for(var t=0;t<e;t++)this._knots[t]=t}},{key:"RebuildVec3Buffer",value:function(){this.GetType()===p.Gr2Curve2.Type.POSITION?this._vec3Buffer=this.constructor.GetBufferFromControls(this.controls,this.GetKnotCount(),3):this._vec3Buffer=null}},{key:"RebuildQuatBuffer",value:function(){this.GetType()===p.Gr2Curve2.Type.ROTATION?this._quatBuffer=this.constructor.GetBufferFromControls(this.controls,this.GetKnotCount(),4):this._quatBuffer=null}},{key:"RebuildMat3Buffer",value:function(){this.GetType()===p.Gr2Curve2.Type.ROTATION?this._mat3Buffer=this.constructor.GetBufferFromControls(this.controls,this.GetKnotCount(),9):this._mat3Buffer=null}}])&&h(t.prototype,r),n&&h(t,n),o}(p.Gr2Curve2),s.format=0,c=S((u=f).prototype,"dimension",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=S(u.prototype,"controls",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Float32Array(0)}}),a=u))||a)},"./core/reader/granny/curves/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/reader/granny/curves/Gr2CurveDataD3I1K16uC16u.js");r.d(t,"Gr2CurveDataD3I1K16uC16u",(function(){return n.Gr2CurveDataD3I1K16uC16u}));var i=r("./core/reader/granny/curves/Gr2CurveDataD3I1K8uC8u.js");r.d(t,"Gr2CurveDataD3I1K8uC8u",(function(){return i.Gr2CurveDataD3I1K8uC8u}));var o=r("./core/reader/granny/curves/Gr2CurveDataD3Constant32f.js");r.d(t,"Gr2CurveDataD3Constant32f",(function(){return o.Gr2CurveDataD3Constant32f}));var a=r("./core/reader/granny/curves/Gr2CurveDataD3I1K32fC32f.js");r.d(t,"Gr2CurveDataD3I1K32fC32f",(function(){return a.Gr2CurveDataD3I1K32fC32f}));var u=r("./core/reader/granny/curves/Gr2CurveDataD3K8uC8u.js");r.d(t,"Gr2CurveDataD3K8uC8u",(function(){return u.Gr2CurveDataD3K8uC8u}));var c=r("./core/reader/granny/curves/Gr2CurveDataD3K16uC16u.js");r.d(t,"Gr2CurveDataD3K16uC16u",(function(){return c.Gr2CurveDataD3K16uC16u}));var l=r("./core/reader/granny/curves/Gr2CurveDataD4Constant32f.js");r.d(t,"Gr2CurveDataD4Constant32f",(function(){return l.Gr2CurveDataD4Constant32f}));var s=r("./core/reader/granny/curves/Gr2CurveDataD4nK8uC7u.js");r.d(t,"Gr2CurveDataD4nK8uC7u",(function(){return s.Gr2CurveDataD4nK8uC7u}));var f=r("./core/reader/granny/curves/Gr2CurveDataD4nK16uC15u.js");r.d(t,"Gr2CurveDataD4nK16uC15u",(function(){return f.Gr2CurveDataD4nK16uC15u}));var p=r("./core/reader/granny/curves/Gr2CurveDataDaConstant32f.js");r.d(t,"Gr2CurveDataDaConstant32f",(function(){return p.Gr2CurveDataDaConstant32f}));var d=r("./core/reader/granny/curves/Gr2CurveDataDaIdentity.js");r.d(t,"Gr2CurveDataDaIdentity",(function(){return d.Gr2CurveDataDaIdentity}));var y=r("./core/reader/granny/curves/Gr2CurveDataDaK8uC8u.js");r.d(t,"Gr2CurveDataDaK8uC8u",(function(){return y.Gr2CurveDataDaK8uC8u}));var m=r("./core/reader/granny/curves/Gr2CurveDataDaK16uC16u.js");r.d(t,"Gr2CurveDataDaK16uC16u",(function(){return m.Gr2CurveDataDaK16uC16u}));var b=r("./core/reader/granny/curves/Gr2CurveDataDaK32fC32f.js");r.d(t,"Gr2CurveDataDaK32fC32f",(function(){return b.Gr2CurveDataDaK32fC32f}));var h=r("./core/reader/granny/curves/Gr2CurveDataDaKeyframes32f.js");r.d(t,"Gr2CurveDataDaKeyframes32f",(function(){return h.Gr2CurveDataDaKeyframes32f}));var v=r("./core/reader/granny/curves/Gr2CurveDataD9I1K16uC16u.js");r.d(t,"Gr2CurveDataD9I1K16uC16u",(function(){return v.Gr2CurveDataD9I1K16uC16u}));var g=r("./core/reader/granny/curves/Gr2CurveDataD9I1K8uC8u.js");r.d(t,"Gr2CurveDataD9I1K8uC8u",(function(){return g.Gr2CurveDataD9I1K8uC8u}));var w=r("./core/reader/granny/curves/Gr2CurveDataD9I3K16uC16u.js");r.d(t,"Gr2CurveDataD9I3K16uC16u",(function(){return w.Gr2CurveDataD9I3K16uC16u}));var x=r("./core/reader/granny/curves/Gr2CurveDataD9I3K8uC8u.js");r.d(t,"Gr2CurveDataD9I3K8uC8u",(function(){return x.Gr2CurveDataD9I3K8uC8u}))},"./core/reader/granny/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/reader/granny/curves/index.js");r.d(t,"Gr2CurveDataD3I1K16uC16u",(function(){return n.Gr2CurveDataD3I1K16uC16u})),r.d(t,"Gr2CurveDataD3I1K8uC8u",(function(){return n.Gr2CurveDataD3I1K8uC8u})),r.d(t,"Gr2CurveDataD3Constant32f",(function(){return n.Gr2CurveDataD3Constant32f})),r.d(t,"Gr2CurveDataD3I1K32fC32f",(function(){return n.Gr2CurveDataD3I1K32fC32f})),r.d(t,"Gr2CurveDataD3K8uC8u",(function(){return n.Gr2CurveDataD3K8uC8u})),r.d(t,"Gr2CurveDataD3K16uC16u",(function(){return n.Gr2CurveDataD3K16uC16u})),r.d(t,"Gr2CurveDataD4Constant32f",(function(){return n.Gr2CurveDataD4Constant32f})),r.d(t,"Gr2CurveDataD4nK8uC7u",(function(){return n.Gr2CurveDataD4nK8uC7u})),r.d(t,"Gr2CurveDataD4nK16uC15u",(function(){return n.Gr2CurveDataD4nK16uC15u})),r.d(t,"Gr2CurveDataDaConstant32f",(function(){return n.Gr2CurveDataDaConstant32f})),r.d(t,"Gr2CurveDataDaIdentity",(function(){return n.Gr2CurveDataDaIdentity})),r.d(t,"Gr2CurveDataDaK8uC8u",(function(){return n.Gr2CurveDataDaK8uC8u})),r.d(t,"Gr2CurveDataDaK16uC16u",(function(){return n.Gr2CurveDataDaK16uC16u})),r.d(t,"Gr2CurveDataDaK32fC32f",(function(){return n.Gr2CurveDataDaK32fC32f})),r.d(t,"Gr2CurveDataDaKeyframes32f",(function(){return n.Gr2CurveDataDaKeyframes32f})),r.d(t,"Gr2CurveDataD9I1K16uC16u",(function(){return n.Gr2CurveDataD9I1K16uC16u})),r.d(t,"Gr2CurveDataD9I1K8uC8u",(function(){return n.Gr2CurveDataD9I1K8uC8u})),r.d(t,"Gr2CurveDataD9I3K16uC16u",(function(){return n.Gr2CurveDataD9I3K16uC16u})),r.d(t,"Gr2CurveDataD9I3K8uC8u",(function(){return n.Gr2CurveDataD9I3K8uC8u}));var i=r("./core/reader/granny/Gr2CurveReader.js");r.d(t,"Gr2CurveReader",(function(){return i.Gr2CurveReader})),r.d(t,"ErrGr2CurveDataFormatUnsupported",(function(){return i.ErrGr2CurveDataFormatUnsupported}))},"./core/reader/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/reader/geometry/index.js");r.d(t,"CAKEReader",(function(){return n.CAKEReader})),r.d(t,"GR2JsonReader",(function(){return n.GR2JsonReader})),r.d(t,"OBJReader",(function(){return n.OBJReader})),r.d(t,"WBGReader",(function(){return n.WBGReader}));var i=r("./core/reader/granny/index.js");r.d(t,"Gr2CurveDataD3I1K16uC16u",(function(){return i.Gr2CurveDataD3I1K16uC16u})),r.d(t,"Gr2CurveDataD3I1K8uC8u",(function(){return i.Gr2CurveDataD3I1K8uC8u})),r.d(t,"Gr2CurveDataD3Constant32f",(function(){return i.Gr2CurveDataD3Constant32f})),r.d(t,"Gr2CurveDataD3I1K32fC32f",(function(){return i.Gr2CurveDataD3I1K32fC32f})),r.d(t,"Gr2CurveDataD3K8uC8u",(function(){return i.Gr2CurveDataD3K8uC8u})),r.d(t,"Gr2CurveDataD3K16uC16u",(function(){return i.Gr2CurveDataD3K16uC16u})),r.d(t,"Gr2CurveDataD4Constant32f",(function(){return i.Gr2CurveDataD4Constant32f})),r.d(t,"Gr2CurveDataD4nK8uC7u",(function(){return i.Gr2CurveDataD4nK8uC7u})),r.d(t,"Gr2CurveDataD4nK16uC15u",(function(){return i.Gr2CurveDataD4nK16uC15u})),r.d(t,"Gr2CurveDataDaConstant32f",(function(){return i.Gr2CurveDataDaConstant32f})),r.d(t,"Gr2CurveDataDaIdentity",(function(){return i.Gr2CurveDataDaIdentity})),r.d(t,"Gr2CurveDataDaK8uC8u",(function(){return i.Gr2CurveDataDaK8uC8u})),r.d(t,"Gr2CurveDataDaK16uC16u",(function(){return i.Gr2CurveDataDaK16uC16u})),r.d(t,"Gr2CurveDataDaK32fC32f",(function(){return i.Gr2CurveDataDaK32fC32f})),r.d(t,"Gr2CurveDataDaKeyframes32f",(function(){return i.Gr2CurveDataDaKeyframes32f})),r.d(t,"Gr2CurveDataD9I1K16uC16u",(function(){return i.Gr2CurveDataD9I1K16uC16u})),r.d(t,"Gr2CurveDataD9I1K8uC8u",(function(){return i.Gr2CurveDataD9I1K8uC8u})),r.d(t,"Gr2CurveDataD9I3K16uC16u",(function(){return i.Gr2CurveDataD9I3K16uC16u})),r.d(t,"Gr2CurveDataD9I3K8uC8u",(function(){return i.Gr2CurveDataD9I3K8uC8u})),r.d(t,"Gr2CurveReader",(function(){return i.Gr2CurveReader})),r.d(t,"ErrGr2CurveDataFormatUnsupported",(function(){return i.ErrGr2CurveDataFormatUnsupported}));var o=r("./core/reader/Tw2BlackReader.js");r.d(t,"Tw2BlackReader",(function(){return o.Tw2BlackReader}));var a=r("./core/reader/Tw2BinaryReader.js");r.d(t,"Tw2BinaryReader",(function(){return a.Tw2BinaryReader}));var u=r("./core/reader/Tw2ObjectReader.js");r.d(t,"ErrBinaryFormat",(function(){return u.ErrBinaryFormat})),r.d(t,"ErrBinaryObjectTypeNotFound",(function(){return u.ErrBinaryObjectTypeNotFound})),r.d(t,"Tw2ObjectReader",(function(){return u.Tw2ObjectReader}))},"./core/resource/Tw2EffectRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EffectRes",(function(){return v})),r.d(t,"ErrShaderVersion",(function(){return g})),r.d(t,"ErrShaderHeaderSize",(function(){return w}));var n,i=r("./global/utils/index.js"),o=r("./core/reader/index.js"),a=r("./core/resource/Tw2Resource.js"),u=r("./core/shader/index.js"),c=r("./core/Tw2Error.js"),l=r("./global/index.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=i.meta.type("Tw2EffectRes")(n=function(e){d(s,e);var t,r,n,c=m(s);function s(){var e;f(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=c.call.apply(c,[this].concat(r))).passes=[],e.annotations={},e.permutations=[],e.offsets=[],e.reader=null,e.version=0,e.stringTable="",e.shaders=[],e.ReadString=null,e.validShadowShader=!1,e._extension=null,e._requestResponseType=null,e}return t=s,n=[{key:"fromJSON",value:function(e,t){if(!e.name)throw new ReferenceError("Invalid shader name");var r="manual:/"+e.name+".sm_json";if(l.tw2.resMan.motherLode.Has(r))throw new ReferenceError("Shader already exists");var n=new s;return n.path=r.toLowerCase(),n._extension="sm_json",n.doNotPurge=1,n.Prepare(e),l.tw2.AddResource(n.path,n),n.GetShaderJSON(t),n}}],(r=[{key:"PrepareCCP",value:function(e){var t=this.reader=new o.Tw2BinaryReader(new Uint8Array(e)),r=t.ReadUInt32();if(r<2||r>8)this.OnError(new g({path:this.path,version:r}));else{var n,i,a;if(this.ReadString=function(){for(var e=t.ReadUInt32(),r=e;a.charCodeAt(r);)++r;return a.substr(e,r-e)},r<5){if(0===(n=t.ReadUInt32()))return void this.OnError(new w({path:this.path}));t.ReadUInt32();var c=t.ReadUInt32();t.cursor=8+3*n*4,i=t.ReadUInt32(),this.stringTableOffset=t.cursor,a=String.fromCharCode.apply(null,t.data.subarray(t.cursor,t.cursor+i)),t.cursor=c}else{i=t.ReadUInt32(),this.stringTableOffset=t.cursor,a=String.fromCharCode.apply(null,t.data.subarray(t.cursor,t.cursor+i)),t.cursor+=i;for(var l=t.ReadUInt8(),s=0;s<l;++s){var f=u.Tw2ShaderPermutation.fromCCPBinary(t,this);this.permutations.push(f)}if(0===(n=t.ReadUInt32()))return void this.OnError(new w({path:this.path}));for(var p=0;p<n;++p)this.offsets.push({index:t.ReadUInt32(),offset:t.ReadUInt32(),size:t.ReadUInt32()});t.ReadUInt32(),t.cursor=t.ReadUInt32()}this.reader=t,this.version=r,this.stringTable=a}}},{key:"GetShaderCCP",value:function(e){for(var t=0,r=1,n=0;n<this.permutations.length;++n){var i=this.permutations[n],o=i.defaultOption;if(e.hasOwnProperty(i.name))try{o=i.GetOption(e[i.name])}catch(e){return this.OnError(e),null}t+=o*r,r*=i.optionCount}if(this.shaders[t])return this.shaders[t];this.version>4&&(this.reader.cursor=this.offsets[t].offset);var a=null;try{a=u.Tw2Shader.fromCCPBinary(this.reader,this)}catch(e){return this.OnError(e),null}return this.shaders[t]=a}},{key:"PrepareJSON",value:function(e){this.reader=e}},{key:"GetShaderJSON",value:function(e){return this.shaders[0]||(this.shaders[0]=u.Tw2Shader.fromJSON(this.reader,this),this.reader=null),this.shaders[0]}},{key:"Prepare",value:function(e){switch(this.permutations.splice(0),this.offsets.splice(0),this.passes.splice(0),Object(i.emptyObject)(this.annotations),this.reader=null,this.version=0,this.stringTable="",this.shaders.splice(0),this._extension){case"fx":case"sm_hi":case"sm_lo":case"sm_depth":this.PrepareCCP(e);break;case"sm_json":this.PrepareJSON(e);break;default:throw new a.ErrResourceFormatUnsupported({format:this._extension})}this.OnPrepared()}},{key:"GetShader",value:function(e){if(!this.IsGood())return null;switch(this._extension){case"fx":case"sm_hi":case"sm_lo":case"sm_depth":return this.GetShaderCCP(e);case"sm_json":return this.GetShaderJSON(e);default:throw new a.ErrResourceFormatUnsupported({format:this._extension})}}},{key:"DoCustomLoad",value:function(e,t){switch(this._extension=null,t){case"fx":case"sm_hi":case"sm_lo":case"sm_depth":return this._requestResponseType="arraybuffer",void(this._extension=t);case"sm_json":return this._requestResponseType="json",void(this._extension=t);default:throw new a.ErrResourceFormatUnsupported({format:this._extension})}}}])&&p(t.prototype,r),n&&p(t,n),s}(a.Tw2Resource))||n,g=function(e){d(r,e);var t=m(r);function r(e){return f(this,r),t.call(this,e,"Invalid version of effect file (%version%)")}return r}(c.Tw2Error),w=function(e){d(r,e);var t=m(r);function r(e){return f(this,r),t.call(this,e,"Effect file contains no compiled effects")}return r}(c.Tw2Error)},"./core/resource/Tw2GeometryRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryRes",(function(){return z})),r.d(t,"ErrGeometryMeshMissingParticleElement",(function(){return S})),r.d(t,"ErrGeometryMeshElementComponentsMissing",(function(){return j})),r.d(t,"ErrGeometryMeshAreaMissing",(function(){return E})),r.d(t,"ErrGeometryMeshBoneNameInvalid",(function(){return T})),r.d(t,"ErrGeometryMeshEffectBinding",(function(){return O})),r.d(t,"ErrGeometryFileType",(function(){return R}));var n,i,o=r("./global/utils/index.js"),a=r("./global/index.js"),u=r("./global/math/index.js"),c=r("./core/reader/index.js"),l=r("./core/vertex/index.js"),s=r("./core/resource/Tw2Resource.js"),f=r("./core/Tw2Error.js"),p=r("./core/geometry/index.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=(x(n={},c.OBJReader.extension.toLowerCase(),c.OBJReader),x(n,c.CAKEReader.extension.toLowerCase(),c.CAKEReader),x(n,c.GR2JsonReader.extension.toLowerCase(),c.GR2JsonReader),x(n,c.WBGReader.extension.toLowerCase(),c.WBGReader),n),z=o.meta.type("Tw2GeometryRes","TriGeometryRes")(i=function(e){b(o,e);var t,r,n,i=v(o);function o(){var e;y(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r))).meshes=[],e.minBounds=u.vec3.fromValues(0,0,0),e.maxBounds=u.vec3.fromValues(0,0,0),e.boundsSpherePosition=u.vec3.create(),e.boundsSphereRadius=0,e.models=[],e.animations=[],e._systemMirror=a.resMan.systemMirror,e._requestResponseType=null,e._extension=null,e._boundsDirty=!0,e}return t=o,n=[{key:"BindMeshToModel",value:function(e,t,r){var n=new p.Tw2GeometryMeshBinding;n.mesh=e;for(var i=0;i<n.mesh.boneBindings.length;++i){var o=n.mesh.boneBindings[i],a=t.FindBoneByName(o);if(!a)throw new T({path:r.path,mesh:n.mesh.name,bone:o,model:t.name});n.bones.push(a),a.boundingBox=e.FindBoneBoundsByName(o)}t.meshBindings.push(n)}},{key:"ReadVertexBuffer",value:function(e,t,r){for(var n=e.ReadUInt8(),i=0,o=0;o<n;++o){var u=new l.Tw2VertexElement;u.usage=e.ReadUInt8(),u.usageIndex=e.ReadUInt8(),u.fileType=e.ReadUInt8(),u.type=a.device.gl.FLOAT,u.elements=1+(u.fileType>>5),u.offset=4*i,t.elements[o]=u,i+=u.elements}t.RebuildHash(),t.stride=4*i;var c=e.ReadUInt32();if(0===c)return null;for(var s=new Float32Array(i*c),f=0,p=0;p<c;++p)for(var d=0;d<n;++d){var y=t.elements[d];switch(15&y.fileType){case 0:if(0!=(16&y.fileType))for(var m=0;m<y.elements;++m)s[f++]=e.ReadInt8()/127;else for(var b=0;b<y.elements;++b)s[f++]=e.ReadInt8();break;case 1:if(0!=(16&y.fileType))for(var h=0;h<y.elements;++h)s[f++]=e.ReadInt8()/32767;else for(var v=0;v<y.elements;++v)s[f++]=e.ReadInt16();break;case 2:for(var g=0;g<y.elements;++g)s[f++]=e.ReadInt32();break;case 3:for(var w=0;w<y.elements;++w)s[f++]=e.ReadFloat16();break;case 4:for(var x=0;x<y.elements;++x)s[f++]=e.ReadFloat32();break;case 8:if(0!=(16&y.fileType))for(var _=0;_<y.elements;++_)s[f++]=e.ReadUInt8()/255;else for(var z=0;z<y.elements;++z)s[f++]=e.ReadUInt8();break;case 9:if(0!=(16&y.fileType))for(var S=0;S<t.elements[d].elements;++S)s[f++]=e.ReadUInt8()/65535;else for(var j=0;j<y.elements;++j)s[f++]=e.ReadUInt16();break;case 10:for(var E=0;E<y.elements;++E)s[f++]=e.ReadUInt32();break;default:throw new R({path:r,key:"fileType",value:15&y.fileType})}}return s}},{key:"ReadIndexBuffer",value:function(e){var t=e.ReadUInt8(),r=e.ReadUInt32();if(0===t){for(var n=new Uint16Array(r),i=0;i<r;++i)n[i]=e.ReadUInt16();return n}for(var o=new Uint32Array(r),a=0;a<r;++a)o[a]=e.ReadUInt32();return o}},{key:"ReadCurve",value:function(e){if(0===e.ReadUInt8())return null;var t=new p.Tw2GeometryCurve;t.dimension=e.ReadUInt8(),t.degree=e.ReadUInt8();var r=e.ReadUInt32();t.knots=new Float32Array(r);for(var n=0;n<r;++n)t.knots[n]=e.ReadFloat32();var i=e.ReadUInt32();t.controls=new Float32Array(i);for(var o=0;o<i;++o)t.controls[o]=e.ReadFloat32();return t}}],(r=[{key:"ClearSystemMirror",value:function(){for(var e=0;e<this.meshes.length;e++)this.meshes[e].ClearSystemMirror()}},{key:"Intersect",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};console.log("Intersecting geometry resource: "+this.path),this.RebuildBounds();var o=e.IntersectBounds(this.minBounds,this.maxBounds,r);if(!o)return[];var a=[];if(this.meshes.length)for(var u=function(o){n.meshes[o].Intersect(e,t,r,i).forEach((function(e){e.geometryResource=n,e.meshIndex=o,a.push(e)}))},c=0;c<this.meshes.length;c++)u(c);return a.sort(e._sortFunction)}},{key:"RebuildBounds",value:function(e){if(!this._boundsDirty&&!e)for(var t=0;t<this.meshes.length;t++)if(this.meshes[t]._boundsDirty){this._boundsDirty=!0;break}if(this._boundsDirty||e){var r=this.minBounds,n=this.maxBounds;u.box3.bounds.empty(r,n);for(var i=0;i<this.meshes.length;i++){var o=this.meshes[i];o.RebuildBounds(e),u.box3.bounds.union(r,n,r,n,o.minBounds,o.maxBounds)}this.boundsSphereRadius=u.box3.bounds.toPositionRadius(r,n,this.boundsSpherePosition),this._boundsDirty=!1}}},{key:"GetBoundingBox",value:function(e,t){return this.RebuildBounds(t),u.box3.fromBounds(e,this.minBounds,this.maxBounds)}},{key:"GetBoundingSphere",value:function(e,t){return this.RebuildBounds(t),u.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius)}},{key:"GetInstanceBuffer",value:function(e){return e<this.meshes.length?this.meshes[e].buffer:void 0}},{key:"GetInstanceDeclaration",value:function(e){return this.meshes[e].declaration}},{key:"GetInstanceStride",value:function(e){return this.meshes[e].declaration.stride}},{key:"GetInstanceCount",value:function(e){return 4*this.meshes[e].bufferLength/this.meshes[e].declaration.stride}},{key:"DoCustomLoad",value:function(e,t){this._extension=null,this._requestResponseType=null;var r=_[t.toLowerCase()];if(!r)throw new s.ErrResourceFormatUnsupported({format:t});this._extension=t,this._requestResponseType=r.requestResponseType}},{key:"Prepare",value:function(e){this.meshes.splice(0),this.models.splice(0),this.animations.splice(0),u.vec3.set(this.minBounds,0,0,0),u.vec3.set(this.maxBounds,0,0,0),u.vec3.set(this.boundsSpherePosition,0,0,0),this.boundsSphereRadius=0;var t=_[this._extension];if(!t)throw new s.ErrResourceFormatUnsupported({format:this._extension});t.byMesh?this.PrepareFromMeshes(t.construct(e)):t.Prepare(e,this)}},{key:"PrepareFromMeshes",value:function(e){for(var t=a.device.gl,r=0;r<e.length;r++){var n=e[r],i=n.bufferData,o=n.indexData,u=n.declaration,c=n.areas,l=n.name,s=void 0===l?"".concat(this.path,"_model_").concat(r):l,f=new p.Tw2GeometryMesh;this.meshes[r]=f,f.name=s,f.declaration=u,f.bufferLength=i.length,f.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,f.buffer),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),f.indexes=t.createBuffer(),f.indexType=2===o.BYTES_PER_ELEMENT?t.UNSIGNED_SHORT:t.UNSIGNED_INT,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,f.indexes),t.bufferData(t.ELEMENT_ARRAY_BUFFER,o,t.STATIC_DRAW);for(var d=0;d<c.length;++d){var y=c[d],m=y.name,b=y.start,h=y.count,v=new p.Tw2GeometryMeshArea;v.name=m,v.start=b,v.count=h,f.areas.push(v)}f.RecalculateAreaBounds(i,o),f._areas=c.length,f._faces=o.length/3,f._vertices=i.length/(f.declaration.stride/4),this.systemMirror&&(f.bufferData=i,f.indexData=o),this.models[r]=new p.Tw2GeometryModel}this.RebuildBounds(),this.OnPrepared()}},{key:"RenderAreasInstanced",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.defaultTechnique,o=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0;this.KeepAlive();var s=n.GetPassCount(i);if(!s||!this.IsGood()||e>=this.meshes.length)return!1;var f=a.device,p=f.gl,d=this.meshes[e];p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,d.indexes);for(var y=0;y<s;++y){n.ApplyPass(i,y);var m=n.GetPassInput(i,y);if(0!==m.elements.length){p.bindBuffer(p.ARRAY_BUFFER,d.buffer),d.declaration.SetPartialDeclaration(f,m,d.declaration.stride),p.bindBuffer(p.ARRAY_BUFFER,o);var b=u.SetPartialDeclaration(f,m,c,0,1);f.ApplyShadowState();for(var h=0;h<r;++h)if(h+t<d.areas.length){for(var v=d.areas[h+t],g=v.start,w=v.count;h+1<r;){if(!(v=d.areas[h+1+t]))return this.OnError(new E({path:this.path,areaIndex:h+1+t})),!1;if(v.start!==g+2*w)break;w+=v.count,++h}p.drawElementsInstanced(p.TRIANGLES,w,d.indexType,g,l)}u.ResetInstanceDivisors(f,b)}}return!0}},{key:"RenderAreas",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.defaultTechnique;this.KeepAlive();var o=n.GetPassCount(i);if(!o||!this.IsGood()||e>=this.meshes.length)return!1;var u=a.device,c=u.gl,l=this.meshes[e]||this.meshes[0];c.bindBuffer(c.ARRAY_BUFFER,l.buffer),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,l.indexes);for(var s=0;s<o;++s){n.ApplyPass(i,s);var f=n.GetPassInput(i,s);if(!l.declaration.SetDeclaration(u,f,l.declaration.stride))return this.OnError(new O({path:this.path,pass:s,passInput:f,meshStride:l.declaration.stride})),!1;u.ApplyShadowState();for(var p=0;p<r;++p)if(p+t<l.areas.length){for(var d=l.areas[p+t],y=d.start,m=d.count;p+1<r;){if(!(d=l.areas[p+1+t]))return this.OnError(new E({path:this.path,areaIndex:p+1+t})),!1;if(d.start!==y+2*m)break;m+=d.count,++p}c.drawElements(c.TRIANGLES,m,l.indexType,y)}}return!0}},{key:"RenderLines",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.defaultTechnique;this.KeepAlive();var o=n.GetPassCount(i);if(!o||!this.IsGood()||e>=this.meshes.length)return!1;var u=a.device,c=u.gl,l=this.meshes[e];c.bindBuffer(c.ARRAY_BUFFER,l.buffer),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,l.indexes);for(var s=0;s<o;++s){n.ApplyPass(i,s);var f=n.GetPassInput(i,s);if(!l.declaration.SetDeclaration(u,f,l.declaration.stride))return this.OnError(new O({path:this.path,pass:s,passInput:f,meshStride:l.declaration.stride})),!1;u.ApplyShadowState();for(var p=0;p<r;++p)if(p+t<l.areas.length){for(var d=l.areas[p+t],y=d.start,m=d.count;p+1<r;){if(!(d=l.areas[p+1+t]))return this.OnError(new E({path:this.path,areaIndex:p+1+t})),!1;if(d.start!==y+2*m)break;m+=d.count,++p}c.drawElements(c.LINES,m,l.indexType,y)}}return!0}},{key:"RenderDebugInfo",value:function(e){if(!this.IsGood())return!1;for(var t=0;t<this.models.length;++t)if(this.models[t].skeleton)for(var r=0;r<this.models[t].skeleton.bones.length;++r){var n=this.models[t].skeleton.bones[r];if(n.parentIndex>=0){var i=this.models[t].skeleton.bones[n.parentIndex];e.AddLine([n.worldTransform[12],n.worldTransform[13],n.worldTransform[14]],[i.worldTransform[12],i.worldTransform[13],i.worldTransform[14]],[0,.7,0,1],[0,.7,0,1])}}}},{key:"Unload",value:function(e){for(var t=0;t<this.meshes.length;++t){var r=a.device.gl;this.meshes[t].buffer&&(r.deleteBuffer(this.meshes[t].buffer),this.meshes[t].buffer=null),this.meshes[t].indexes&&(r.deleteBuffer(this.meshes[t].indexes),this.meshes[t].indexes=null)}return this.OnUnloaded(e),!0}},{key:"systemMirror",get:function(){return this._systemMirror},set:function(e){this._systemMirror=!!e,e||this.ClearSystemMirror()}}])&&m(t.prototype,r),n&&m(t,n),o}(s.Tw2Resource))||i,S=function(e){b(r,e);var t=v(r);function r(e){return y(this,r),t.call(this,e,"Input geometry mesh lacks element required by particle system")}return r}(f.Tw2Error),j=function(e){b(r,e);var t=v(r);function r(e){return y(this,r),t.call(this,e,"Input geometry mesh elements do not have the required number of components")}return r}(f.Tw2Error),E=function(e){b(r,e);var t=v(r);function r(e){return y(this,r),t.call(this,e,"Geometry mesh missing expected area at index %areaIndex%")}return r}(f.Tw2Error),T=function(e){b(r,e);var t=v(r);function r(e){return y(this,r),t.call(this,e,"Geometry mesh '%mesh%' has invalid bone name '%bone%' for model '%model%'")}return r}(f.Tw2Error),O=function(e){b(r,e);var t=v(r);function r(e){return y(this,r),t.call(this,e,"Error binding geometry mesh to effect")}return r}(f.Tw2Error),R=function(e){b(r,e);var t=v(r);function r(e){return y(this,r),t.call(this,e,"Invalid geometry file type (%fileType%)")}return r}(f.Tw2Error)},"./core/resource/Tw2LoadingObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2LoadingObject",(function(){return m}));var n=r("./global/index.js"),i=r("./core/resource/Tw2Resource.js"),o=r("./core/reader/Tw2ObjectReader.js"),a=r("./core/reader/Tw2BlackReader.js");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(m,e);var t,r,u,d=p(m);function m(){var e;c(this,m);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=d.call.apply(d,[this].concat(r))).path="",e._view=null,e._inPrepare=null,e._objects=[],e._constructor=null,e._requestResponseType="arraybuffer",e}return t=m,(r=[{key:"AddObject",value:function(e,t){var r=this.GetLastError();r?t&&t(r):this._objects.push({onResolved:e,onRejected:t})}},{key:"Prepare",value:function(e){var t=this.path.lastIndexOf(".");if(-1===t)return null;var r,n=this.path.substr(t+1);if(null===this._inPrepare){switch(this._view=e,n){case"red":try{this._constructor=new o.Tw2ObjectReader(e)}catch(t){try{this._constructor=new a.Tw2BlackReader(e)}catch(e){throw t}}break;case"black":this._constructor=new a.Tw2BlackReader(e);break;default:throw new i.ErrResourceFormatUnsupported({format:n})}this._inPrepare=0,r=this._constructor.Construct()}for(;this._inPrepare<this._objects.length;){var u=this._objects[this._inPrepare];try{r?(u.onResolved(r),r=null):u.onResolved(this._constructor.Construct())}catch(e){u.onRejected&&(u.onRejected(e),u.onRejected=null),this.OnWarning({err:e,message:"Error preparing child object"})}this._inPrepare++}this.OnPrepared()}},{key:"OnError",value:function(e){s(y(m.prototype),"OnError",this).call(this,e);for(var t=0;t<this._objects.length;t++)this._objects[t].onRejected&&this._objects[t].onRejected(e);return n.tw2.RemoveResource(this.path),this._objects.splice(0),e}},{key:"OnPrepared",value:function(e){n.tw2.RemoveResource(this.path),this._objects.splice(0),s(y(m.prototype),"OnPrepared",this).call(this,e)}}])&&l(t.prototype,r),u&&l(t,u),m}(i.Tw2Resource);m.isLoadingObject=!0},"./core/resource/Tw2Notifications.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Notifications",(function(){return o}));var n=r("./global/utils/index.js");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"RegisterNotification",value:function(e){this.HasNotification(e)||this.constructor.onNotification&&this.constructor.onNotification(this,e)||(this._notifications=this._notifications||new Set,this._notifications.add(e))}},{key:"UpdateNotifications",value:function(e,t){var r=this;this._notifications&&(this._notifications.forEach((function(i){var o=!1;Object(n.isFunction)(i)?o=i(r,t,e):e&&e in i&&(o=i[e](r,t)),o&&r.UnregisterNotification(i)})),0===this._notifications.size&&this.ClearNotifications())}},{key:"HasNotification",value:function(e){return!!this._notifications&&this._notifications.has(e)}},{key:"UnregisterNotification",value:function(e){this._notifications&&this._notifications.delete(e)}},{key:"ClearNotifications",value:function(){this._notifications&&(this._notifications.clear(),Reflect.deleteProperty(this,"_notifications"))}}])&&i(t.prototype,r),o&&i(t,o),e}();o.onNotification=null},"./core/resource/Tw2Resource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Resource",(function(){return v})),r.d(t,"ErrResourceFormatInvalid",(function(){return g})),r.d(t,"ErrResourceFormatUnsupported",(function(){return w})),r.d(t,"ErrResourceFormatNotImplemented",(function(){return x}));var n,i,o,a=r("./global/index.js"),u=r("./global/utils/index.js"),c=r("./core/Tw2Error.js"),l=r("./core/resource/Tw2Notifications.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=u.meta.type("Tw2Resource")((o=i=function(e){d(o,e);var t,r,n,i=m(o);function o(){var e;f(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r))).path="",e.activeFrame=0,e.doNotPurge=0,e._state=o.State.NO_INIT,e._errors=[],e._requested=null,e._requestResponseType=null,e}return t=o,n=[{key:"onNotification",value:function(e,t){var r,n;switch(e._state){case o.State.ERROR:r=o.Callback.ERROR,n=e.GetLastError();break;case o.State.REQUESTED:r=o.Callback.REQUESTED;break;case o.State.LOADED:r=o.Callback.LOADED;break;case o.State.PREPARED:r=o.Callback.PREPARED;break;case o.State.UNLOADED:r=o.Callback.UNLOADED;break;case o.State.PURGED:r=o.Callback.PURGED,n=e.GetLastError()}return Object(u.isFunction)(t)?!!t(e,n,r):r&&r in t?!!t[r](e,n):"OnResEvent"in t&&!!t.OnResEvent(e,n)}},{key:"parentOnResEvent",value:function(e,t,r,n){if(e[t]===r){var i=this.Event,o=this.State,a=!1;switch(r._state){case o.ERROR:e.EmitEvent(i.RES_ERROR,e,r,n),a=!0;break;case o.PURGED:e.EmitEvent(i.RES_PURGED,e,r);break;case o.UNLOADED:e.EmitEvent(i.RES_UNLOADED,e,r);break;case o.REQUESTED:e.EmitEvent(i.RES_REQUESTED,e,r);break;case o.LOADED:e.EmitEvent(i.RES_LOADED,e,r);break;case o.PREPARED:e.EmitEvent(i.RES_PREPARED,e,r),a=!0}a&&(e.EmitEvent(i.RES_COMPLETED,e,r,n),r.UnregisterNotification(e))}else r.UnregisterNotification(e)}},{key:"parentOnListener",value:function(e,t,r,n,i){var a=e[t];if(!a)return!1;var u,c=o.Event;switch(r){case c.RES_COMPLETED:return a.HasCompleted()&&n.call(i,e,a,a.GetLastError()),!1;case c.RES_ERROR:return!!a.HasErrored()&&(n.call(i,e,a,a.GetLastError()),!0);case c.RES_UNLOADED:a.IsUnloaded()&&(u=!0);break;case c.RES_PURGED:a.IsPurged()&&(u=!0);break;case c.RES_REQUESTED:a.HasRequested()&&(u=!0);break;case c.RES_LOADED:a.HasLoaded()&&(u=!0);break;case c.RES_PREPARED:a.HasPrepared()&&(u=!0)}return!!u&&(n.call(i,e,a),!0)}}],(r=[{key:"Lock",value:function(){this.doNotPurge++,this.activeFrame=a.resMan.activeFrame,(this.IsPurged()||this.IsUnloaded())&&this.Reload({hide:!0,detail:"locked"})}},{key:"Unlock",value:function(){this.doNotPurge=Math.max(this.doNotPurge-1,0)}},{key:"HasErrored",value:function(){return this._state===o.State.ERROR}},{key:"HasCompleted",value:function(){return this.HasErrored()||this.IsPurged()||this.HasPrepared()}},{key:"HasRequested",value:function(){return this._state===o.State.REQUESTED||this.HasLoaded()}},{key:"HasLoaded",value:function(){return this._state===o.State.LOADED||this._state===o.State.PREPARED}},{key:"HasPrepared",value:function(){return this._state===o.State.PREPARED}},{key:"IsGood",value:function(){return this.KeepAlive(),this.HasLoaded()}},{key:"IsUnloaded",value:function(){return this._state===o.State.UNLOADED}},{key:"IsPurged",value:function(){return this._state===o.State.PURGED}},{key:"Unload",value:function(e){return!1}},{key:"Reload",value:function(e){this.HasLoaded()&&this.Unload({hide:!0,detail:"reloading"}),(this.IsPurged()||this.IsUnloaded())&&a.resMan.LoadResource(this,e)}},{key:"KeepAlive",value:function(){this.activeFrame=a.resMan.activeFrame,(this.IsPurged()||this.IsUnloaded())&&this.Reload({hide:!0,detail:"inuse"})}},{key:"GetErrors",value:function(){return Array.from(this._errors)}},{key:"GetLastError",value:function(){return this._errors[0]}},{key:"OnWarning",value:function(e){a.resMan.OnPathEvent(this.path,"warning",e),this.UpdateNotifications(o.Callback.WARNING)}},{key:"OnDebug",value:function(e){a.resMan.OnPathEvent(this.path,"debug",e),this.UpdateNotifications(o.Callback.DEBUG)}},{key:"OnError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c.Tw2Error,t=this.HasLoaded();return this._errors.includes(e)||this._errors.unshift(e),this._SetState(o.State.ERROR),t&&this.Unload({hide:!0,detail:"errored"}),a.resMan.OnPathEvent(this.path,"error",e),this.UpdateNotifications(o.Callback.ERROR,e),e}},{key:"OnRequested",value:function(e){var t=this._state===o.State.NO_INIT?"REQUESTED":"RELOADING";this._SetState(o.State.REQUESTED)&&(this._requested=Date.now(),a.resMan.OnPathEvent(this.path,t.toLowerCase(),e),this.UpdateNotifications(o.Callback[t]))}},{key:"OnLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._SetState(o.State.LOADED)&&(null===this._requested&&(this._requested=Date.now()),e.time=.001*(Date.now()-this._requested),a.resMan.OnPathEvent(this.path,"loaded",e),this.UpdateNotifications(o.Callback.LOADED))}},{key:"OnPrepared",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._SetState(o.State.PREPARED)&&(null===this._requested&&(this._requested=Date.now()),e.time=.001*(Date.now()-this._requested),a.resMan.OnPathEvent(this.path,"prepared",e),this.UpdateNotifications(o.Callback.PREPARED))}},{key:"OnUnloaded",value:function(e){this._SetState(o.State.UNLOADED)&&(a.resMan.OnPathEvent(this.path,"unloaded",e),this.UpdateNotifications(o.Callback.UNLOADED))}},{key:"OnPurged",value:function(e){this._SetState(o.State.PURGED),a.resMan.OnPathEvent(this.path,"purged",e),this.UpdateNotifications(o.Callback.PURGED,this.GetLastError())}},{key:"_SetState",value:function(e){return this._state!==o.State.ERROR&&(this._state=e,!0)}},{key:"RegisterCallbacks",value:function(e,t){this.KeepAlive(),(e||t)&&this.RegisterNotification((function(r,n){return!!r.HasCompleted()&&(n?t&&t(n):e&&e(r),!0)}))}},{key:"isResource",get:function(){return!0}},{key:"requestResponseType",get:function(){return this._requestResponseType}}])&&p(t.prototype,r),n&&p(t,n),o}(l.Tw2Notifications),i.State={ERROR:-3,PURGED:-2,UNLOADED:-1,NO_INIT:0,REQUESTED:1,LOADED:2,PREPARED:3},i.Callback={ERROR:"OnResError",PURGED:"OnResPurged",UNLOADED:"OnResUnloaded",REQUESTED:"OnResRequested",LOADED:"OnResLoaded",PREPARED:"OnResPrepared",WARNING:"OnResWarning",DEBUG:"OnResDebug"},i.Event={RES_UNLOADED:"unloaded",RES_PURGED:"purged",RES_ERROR:"error",RES_REQUESTED:"requested",RES_LOADED:"loaded",RES_PREPARED:"prepared",RES_REMOVED:"removed",RES_COMPLETED:"completed"},n=o))||n;v.prototype.DoCustomLoad=null;var g=function(e){d(r,e);var t=m(r);function r(e){return f(this,r),t.call(this,e,"Resource format invalid: %format% (%reason=unknown%)")}return r}(c.Tw2Error),w=function(e){d(r,e);var t=m(r);function r(e){return f(this,r),t.call(this,e,"Resource format not supported: %format% (%reason=unknown%)")}return r}(c.Tw2Error),x=function(e){d(r,e);var t=m(r);function r(e){return f(this,r),t.call(this,e,"Resource format not implemented: %format% (%reason=unknown%)")}return r}(c.Tw2Error)},"./core/resource/Tw2TextureRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TextureRes",(function(){return v}));var n,i=r("./global/utils/index.js"),o=r("./global/math/index.js"),a=r("./global/index.js"),u=r("./core/engine/Tw2ResMan.js"),c=r("./core/resource/Tw2Resource.js"),l=r("./global/constant/index.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=i.meta.type("Tw2TextureRes")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(s,e);var t,r,n,i=m(s);function s(){var e;f(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r))).texture=null,e.attachment=null,e._currentSampler=0,e._isAttached=!1,e._extension="",e._width=0,e._height=0,e._type=null,e._format=null,e._internalFormat=null,e._target=null,e._hasMipMaps=!1,e._isCube=!1,e._isPowerOfTwo=!1,e._useNoMipFilter=!1,e}return t=s,n=[{key:"IsPowerOfTwo",value:function(){for(var e=0;e<arguments.length;e++)if(0!=((e<0||arguments.length<=e?void 0:arguments[e])&(e<0||arguments.length<=e?void 0:arguments[e])-1))return!1;return!0}},{key:"AddMipLevelSkipCount",value:function(e){var t=a.device;if(t.mipLevelSkipCount>0){var r=e.lastIndexOf(".");r>=0&&(e=e.substr(0,r-2)+"."+t.mipLevelSkipCount.toString()+e.substr(r))}return e}},{key:"Int32ToFourCC",value:function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}},{key:"CreateImageFrom2DTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.device.gl.RGBA,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.device.gl.UNSIGNED_BYTE,o=a.device.gl,u=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,u),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0);var c=new Uint8Array(t*r*4);o.readPixels(0,0,t,r,n,i,c),o.deleteFramebuffer(u);var l=document.createElement("canvas");l.width=t,l.height=r;var s=l.getContext("2d"),f=s.createImageData(t,r);f.data.set(c),s.putImageData(f,0,0);var p=new Image;return p.src=l.toDataURL(),p}},{key:"GetDDSInfo",value:function(e){if(!e.byteLength)throw new c.ErrResourceFormatInvalid({format:"DDS",reason:"file is empty"});var t=new Int32Array(e,0,l.DDS_HEADER_LENGTH_INT);if(t[l.DDS_HEADER_OFFSET_MAGIC]!==l.DDS_MAGIC)throw new c.ErrResourceFormatInvalid({format:"DDS",reason:"missing magic number"});var r=a.device.gl,n=t[l.DDS_HEADER_OFFSET_PF_FOURCC],i=new Int32Array(e.buffer,e.byteOffset,l.DDS_HEADER_LENGTH_INT+4),u=t[l.DDS_HEADER_OFFSET_PF_FLAGS&&l.DDPF_FOURCC]===l.DDPF_FOURCC,f=u&&n===l.FOURCC_DXT10?i[l.DDS_HEADER_OFFSET_DXGI_FORMAT]:0,p=(t[l.DDS_HEADER_OFFSET_CAPS2]&l.DDSCAPS2_CUBEMAP)===l.DDSCAPS2_CUBEMAP,d=a.device.GetExtension("compressed_texture_s3tc"),y=a.device.GetExtension("EXT_texture_compression_rgtc"),m=t[l.DDS_HEADER_OFFSET_WIDTH],b=t[l.DDS_HEADER_OFFSET_HEIGHT],h=t[l.DDS_HEADER_OFFSET_RGB_BPP],v=t[l.DDS_HEADER_OFFSET_FLAGS]&l.DDSD_MIPMAPCOUNT,g={fourCC:n,width:m,height:b,isFourCC:u,isCube:p,name:s.Int32ToFourCC(n),isPowerOfTwo:s.IsPowerOfTwo(m,b),isLuminance:(t[l.DDS_HEADER_OFFSET_PF_FLAGS]&l.DDPF_LUMINANCE)===l.DDPF_LUMINANCE,hasAlpha:(t[l.DDS_HEADER_OFFSET_PF_FLAGS]&l.DDPF_ALPHAPIXELS)===l.DDPF_ALPHAPIXELS,isRGB:(t[l.DDS_HEADER_OFFSET_PF_FLAGS]&l.DDPF_RGB)===l.DDPF_RGB,isVolume:t[l.DDS_HEADER_OFFSET_CAPS2]&l.DDSCAPS2_VOLUME==l.DDSCAPS2_VOLUME,dataOffset:t[l.DDS_HEADER_OFFSET_SIZE]+4,mipmaps:v?Math.max(1,t[l.DDS_HEADER_OFFSET_MIPMAP_COUNT]):1,format:null,type:null,internalFormat:null,target:p?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,faces:p?6:1,isCompressed:!1,clientSupport:!1};switch(g.fourCC){case l.FOURCC_DXT1:g.blockBytes=8,g.internalFormat=d?d.COMPRESSED_RGBA_S3TC_DXT1_EXT:null,g.clientSupport=!!g.internalFormat,g.isCompressed=!0;break;case l.FOURCC_DXT3:g.blockBytes=16,g.internalFormat=d?d.COMPRESSED_RGBA_S3TC_DXT3_EXT:null,g.clientSupport=!!g.internalFormat,g.isCompressed=!0;break;case l.FOURCC_DXT5:g.blockBytes=16,g.internalFormat=d?d.COMPRESSED_RGBA_S3TC_DXT5_EXT:null,g.clientSupport=!!g.internalFormat,g.isCompressed=!0;break;case l.FOURCC_ATI1:g.blockBytes=8,g.internalFormat=y?y.COMPRESSED_RED_RGTC1_EXT:null,g.clientSupport=!!g.internalFormat,g.isCompressed=!0,g.format=r.UNSIGNED_BYTE,g.format=r.RED;break;case l.FOURCC_ATI2:g.blockBytes=16,g.internalFormat=y?y.COMPRESSED_RED_GREEN_RGTC2_EXT:null,g.clientSupport=!!g.internalFormat,g.isCompressed=!0,g.format=r.UNSIGNED_BYTE,g.internalFormat=r.RG;break;case l.FOURCC_D3DFMT_R16G16B16A16F:g.type=r.HALF_FLOAT,g.format=r.RGBA,g.clientSupport=!0;break;case l.FOURCC_D3DFMT_R32G32B32A32F:g.type=r.FLOAT,g.format=r.RGBA,g.clientSupport=!0;break;case l.FOURCC_DXT10:switch(g.dataOffset+=20,g.dxgiFormat=f,g.clientSupport=!0,f){case l.DXGI_FORMAT_R16G16B16A16_FLOAT:g.type=r.HALF_FLOAT,g.format=r.RGBA;break;case l.DXGI_FORMAT_R32G32B32A32_FLOAT:g.type=r.FLOAT,g.format=r.RGBA;break;case l.DXGI_FORMAT_B8G8R8X8_UNORM:g.isFourCC=!1,g.isRGB=!0,h=32;break;default:throw new c.ErrResourceFormatUnsupported({format:"DDS",reason:"DX10 ".concat(f),info:g})}break;default:if(g.isRGB){g.bpp=h,g.type=r.UNSIGNED_BYTE,g.clientSupport=!0,g.isUncompressedRGBA=!0,g.rOffset=o.num.getLongWordOrder(t[l.DDS_HEADER_OFFSET_R_MASK]),g.gOffset=o.num.getLongWordOrder(t[l.DDS_HEADER_OFFSET_G_MASK]),g.bOffset=o.num.getLongWordOrder(t[l.DDS_HEADER_OFFSET_B_MASK]),24===h?(g.name="RGB",g.format=r.RGB,g.internalFormat=1===a.device.glVersion?r.RGB:r.RGB8):(g.name="RGBA",g.format=r.RGBA,g.internalFormat=1===a.device.glVersion?r.RGBA:r.RGBA8,g.aOffset=o.num.getLongWordOrder(t[l.DDS_HEADER_OFFSET_A_MASK]));break}if(g.isLuminance){g.hasAlpha?(g.name="Luminance Alpha",g.type=r.UNSIGNED_BYTE,g.format=r.LUMINANCE_ALPHA,g.internalFormat=r.LUMINANCE_ALPHA):(g.name="Luminance",g.type=r.UNSIGNED_BYTE,g.format=r.LUMINANCE,g.internalFormat=r.LUMINANCE),g.clientSupport=!0;break}var w=s.Int32ToFourCC(g.fourCC);if("DX10"===w){var x=new Uint32Array(e),_=l.DDS_MAGIC_SIZE+l.DDS_HEADER_SIZE,z=new Uint32Array(x.buffer,_,l.DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);g.dxgiFormat=z[l.DDS_DX10_FIELDS.DXGI_FORMAT],g.resourceDimension=z[l.DDS_DX10_FIELDS.RESOURCE_DIMENSION],g.miscFlag=z[l.DDS_DX10_FIELDS.MISC_FLAG],g.arraySize=z[l.DDS_DX10_FIELDS.ARRAY_SIZE],g.dxgiFormatName=l.DXGI_FORMAT[g.dxgiFormat]}throw console.dir(g),new c.ErrResourceFormatUnsupported({format:"DDS",reason:"FOURCC ".concat(w),info:g})}return g.isFourCC&&g.isCompressed,g}},{key:"GetLuminanceArrayBuffer",value:function(e,t,r,n,i){for(var o=new Uint8Array(n),a=new Uint8Array(i,r),u=0,c=0;c<t;c++)for(var l=0;l<e;l++){var s=l+c*e;o[u]=a[s],u++}return o}},{key:"GetRGBArrayBuffer",value:function(e,t,r,n,i,o,a,u){for(var c=new Uint8Array(n),l=new Uint8Array(i,r,n),s=0,f=0;f<t;f++)for(var p=0;p<e;p++){var d=3*(p+f*e);c[s]=l[d+o],c[s+1]=l[d+a],c[s+2]=l[d+u],s+=3}return c}},{key:"GetRGBAArrayBuffer",value:function(e,t,r,n,i,o,a,u,c){for(var l=new Uint8Array(n),s=new Uint8Array(i,r,n),f=0,p=0;p<t;p++)for(var d=0;d<e;d++){var y=4*(d+p*e);l[f]=s[y+o],l[f+1]=s[y+a],l[f+2]=s[y+u],l[f+3]=s[y+c],f+=4}return l}}],(r=[{key:"DeleteGL",value:function(){this.texture&&(a.device.gl.deleteTexture(this.texture),this.texture=null)}},{key:"Prepare",value:function(e){var t=a.device.gl,r="ccpGLFormat"in e?e.ccpGLFormat:t.RGBA;switch(this.DeleteGL(),this._extension){case"cube":this._target=t.TEXTURE_CUBE_MAP,this._format=r,this._type=t.UNSIGNED_BYTE,this._isPowerOfTwo=s.IsPowerOfTwo(e.height),this._width=this._height=e.height,this.texture=t.createTexture(),t.bindTexture(this._target,this.texture);var n=document.createElement("canvas");n.width=n.height=e.height;for(var i=n.getContext("2d"),o=0;o<6;++o)i.drawImage(e,o*n.width,0,n.width,n.height,0,0,n.width,n.height),t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,this._format,this._format,this._type,n);(this._isPowerOfTwo||a.device.glVersion>1)&&t.generateMipmap(this._target),t.bindTexture(this._target,null),this._hasMipMaps=!0;break;case"png":this._target=t.TEXTURE_2D,this._format=r,this._type=t.UNSIGNED_BYTE,this._isPowerOfTwo=s.IsPowerOfTwo(e.width,e.height),this.texture=t.createTexture(),t.bindTexture(this._target,this.texture),t.texImage2D(this._target,0,this._format,this._format,this._type,e),(this._isPowerOfTwo||a.device.glVersion>1)&&(t.generateMipmap(this._target),this._hasMipMaps=!0),t.bindTexture(this._target,null),this._width=e.width,this._height=e.height;break;case"dds":var u=s.GetDDSInfo(e);u.filePath=this.path;var f=u.name,p=u.fourCC,d=u.isRGB,y=u.isLuminance,m=u.isCube,b=u.blockBytes,h=u.dataOffset,v=u.faces,g=u.isCompressed,w=u.clientSupport,x=u.width,_=u.height,z=u.mipmaps;if(!w)throw new c.ErrResourceFormatUnsupported({format:"DDS",reason:f,data:u});if(!g&&!d&&!y)throw new c.ErrResourceFormatNotImplemented({format:"DDS",reason:f,data:u});(d||y||p===l.FOURCC_ATI1||p===l.FOURCC_ATI2)&&a.tw2.Debug({name:"Tw2TextureRes",message:"Partial or incomplete support for ".concat(f,": ").concat(this.path),data:u}),1!==a.device.glVersion||u.isPowerOfTwo||(z=1,a.tw2.Debug({name:"Tw2TextureRes",message:"Texture not power of 2: ".concat(this.path),data:u})),this._type=u.type,this._format=u.format,this._internalFormat=u.internalFormat,this._target=u.target,this._mipCount=z,this._hasMipMaps=this._mipCount>1,this._isCube=m,this._isPowerOfTwo=u.isPowerOfTwo,this._width=x,this._height=_,this._useNoMipFilter=!0,this.texture=t.createTexture(),t.bindTexture(this._target,this.texture);for(var S=t.getParameter(t.UNPACK_ALIGNMENT),j=0;j<v;j++)for(var E=x,T=_,O=h,R=m?t.TEXTURE_CUBE_MAP_POSITIVE_X+j:this._target,P=void 0,D=void 0,A=0;A<this._mipCount;A++){if(g)P=Math.max(4,E)/4*Math.max(4,T)/4*b,D=new Uint8Array(e,O,P),t.compressedTexImage2D(R,A,this._internalFormat,E,T,0,D),O+=P;else if(y){S=1;var M=E;P=Math.floor((E+S-1)/S)*S*(_-1)+M,t.pixelStorei(t.UNPACK_ALIGNMENT,S),D=s.GetLuminanceArrayBuffer(E,T,e.byteOffset+O,P,e.buffer),t.texImage2D(R,A,this._internalFormat,E,T,0,this._format,this._type,D),O+=P}else{var C=u.rOffset,k=u.bOffset,I=u.gOffset,L=u.aOffset,G=u.bpp;S=1,t.pixelStorei(t.UNPACK_ALIGNMENT,S),r===t.RGB?(P=E*T*3,D=s.GetRGBArrayBuffer(E,T,e.byteOffset+O,P,e.buffer,C,I,k)):(P=E*T*4,D=s.GetRGBAArrayBuffer(E,T,e.byteOffset+O,P,e.buffer,C,I,k,L)),t.texImage2D(R,A,this._internalFormat,E,T,0,this._format,this._type,D),O+=E*T*(G/8)}E=Math.max(E>>1,1),T=Math.max(T>>1,1)}t.bindTexture(this._target,null);break;default:throw new c.ErrResourceFormatUnsupported({format:this._extension})}this._isAttached=!1,this.OnPrepared()}},{key:"Bind",value:function(e,t){var r=a.device,n=a.device.gl;if(this.KeepAlive(),this.attachment&&this.attachment.UpdateTextureRes(this),null===this._target)this._target=e.samplerType,this._isCube=e.samplerType===n.TEXTURE_CUBE_MAP;else if(e.samplerType!==this._target)return;if(this.texture)e.isVolume&&n.uniform1f(t,this._height/this._width),n.bindTexture(this._target,this.texture),null!==e.hash&&e.hash===this._currentSampler||(e.Apply(r,this._hasMipMaps,this._useNoMipFilter),this._currentSampler=e.hash);else{var i=this._target===n.TEXTURE_2D?r.GetFallbackTexture():r.GetFallbackCubeMap();n.bindTexture(this._target,i)}}},{key:"_ClearMeta",value:function(){this._extension=null,this._isAttached=!1,this._isCube=null,this._target=null,this._type=null,this._internalFormat=null,this._mipCount=null,this._hasMipMaps=null,this._useNoMipFilter=null}},{key:"DoCustomLoad",value:function(e,t){var r=this;switch(t){case"cube":this._extension=t,this._isCube=!0,e=e.substr(0,e.length-5)+".png";break;case"qube":this._extension="cube",e=e.replace(".qube",".cube"),this._isCube=!0;break;case"png":this._extension=t,this._isCube=!1;break;case"dds":return this._extension=t,a.resMan.Fetch(s.AddMipLevelSkipCount(e),"arraybuffer").then((function(e){r.OnLoaded(),a.resMan.Queue(r,e)})).catch((function(e){r.OnError(e)})),!0;default:throw new c.ErrResourceFormatUnsupported({format:t})}a.resMan.AddPendingLoad(e);var n=new Image;return n.crossOrigin="anonymous",n.onerror=function(){a.resMan.RemovePendingLoad(e),r.OnError(new u.ErrHTTPRequest({path:e}))},n.onload=function(){a.resMan.RemovePendingLoad(e),a.resMan.Queue(r,n),r.OnLoaded()},n.src=s.AddMipLevelSkipCount(e),!0}},{key:"Unload",value:function(e){return this.DeleteGL(),this._ClearMeta(),this.OnUnloaded(e),!0}},{key:"Attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.texture!==e&&(this.DeleteGL(),this._ClearMeta(),this.path=t,this.texture=e,this._isAttached=!0,this.OnLoaded({hide:!0,path:"attachment"}),this.OnPrepared({hide:!0,path:"attachment"}))}},{key:"Reload",value:function(e){if(!this._isAttached)return d(h(s.prototype),"Reload",this).call(this,e)}}])&&p(t.prototype,r),n&&p(t,n),s}(c.Tw2Resource))||n},"./core/resource/Tw2TextureResHTMLAttachment.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TextureResHTMLAttachment",(function(){return D}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js"),b=r("./global/meta/index.js"),h=r("./global/tw2.js"),v=r("./core/resource/Tw2Resource.js"),g=r("./core/resource/Tw2TextureRes.js"),w=r("./global/constant/d3d.js");function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D=(n=m.meta.type("Tw2TextureResHTMLAttachment"),i=m.meta.string,o=m.meta.boolean,a=m.meta.uint,u=m.meta.boolean,n((y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,r,n,i=E(o);function o(){var e;z(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _(e=i.call.apply(i,[this].concat(r)),"id",s,O(e)),_(e,"update",f,O(e)),_(e,"target",p,O(e)),_(e,"enableMipMaps",d,O(e)),e._element=null,e._dirty=!0,e._lastActiveFrame=0,e}return t=o,n=[{key:"CreateRes",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new g.Tw2TextureRes;return r.attachment=o.from({id:e,update:t}),r}}],(r=[{key:"Initialize",value:function(){this.id&&this.OnValueChanged()}},{key:"SetValue",value:function(e,t){if(e&&"string"!=typeof e){if(this._element!==e)return this._id=null,this._element=e,this.UpdateValues(t),!0}else if(this.id!==e)return this.id=e,e||(this._element=null),this.UpdateValues(t),!0;return!1}},{key:"OnValueChanged",value:function(){this.id&&(this._element=document.getElementById(this.id)),this._dirty=!0}},{key:"UpdateTextureRes",value:function(e){if(this._lastActiveFrame!==e.activeFrame&&(this._lastActiveFrame=e.activeFrame,this._element&&this._element.width&&this._element.height&&(!e.texture||this.update||this.dirty))){var t=h.device.gl,r=h.device.glVersion;if(!e.texture||this._dirty){switch(e.path=null,e._isAttached=!0,e._internalFormat=t.RGBA,e._format=t.RGBA,e._type=t.UNSIGNED_BYTE,e._isCube=!1,e._hasMipMaps=!1,e._width=this._element.width,e._height=this._element.height,e._isPowerOfTwo=g.Tw2TextureRes.IsPowerOfTwo(e._width,e._height),this.target){case w.TEX_2D:case w.TEX_VOLUME:e._target=t.TEXTURE_2D;break;case w.TEX_CUBE_MAP:throw e._target=t.TEXTURE_CUBE_MAP,e._isCube=!0,new v.ErrResourceFormatNotImplemented({format:"HTML->CubeMap"});default:throw new ReferenceError("Invalid texture format ".concat(this.target))}e.texture||(e.texture=t.createTexture()),this._dirty=!1}switch(t.bindTexture(e._target,e.texture),this.target){case w.TEX_2D:case w.TEX_VOLUME:1===r?t.texImage2D(e._target,0,e._internalFormat,e._format,e._type,this._element):t.texImage2D(e._target,0,e._internalFormat,this._element.width,this._element.height,0,e._format,e._type,this._element);break;case w.TEX_CUBE_MAP:}(this.enableMipMaps&&1!==r||e._isPowerOfTwo)&&(e._hasMipMaps=!0,t.generateMipmap(e._target)),t.texParameteri(e._target,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(e._target,t.TEXTURE_MIN_FILTER,e._hasMipMaps?t.LINEAR_MIPMAP_NEAREST:t.LINEAR),t.bindTexture(e._target,null),this._lastActiveFrame=e.activeFrame}}}])&&S(t.prototype,r),n&&S(t,n),o}(b.Model),s=P((l=y).prototype,"id",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=P(l.prototype,"update",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=P(l.prototype,"target",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.TEX_2D}}),d=P(l.prototype,"enableMipMaps",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=l))||c)},"./core/resource/Tw2VideoRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VideoRes",(function(){return b}));var n,i=r("./global/utils/index.js"),o=r("./global/index.js"),a=r("./core/resource/Tw2Resource.js"),u=r("./core/engine/Tw2ResMan.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=i.meta.type("Tw2VideoRes")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,r,n,i=d(c);function c(){var e;l(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r))).texture=null,e.video=null,e.width=0,e.height=0,e.cycle=!0,e.playOnLoad=!0,e._currentSampler=0,e._currentTime=-1,e._playable=!1,e._isPlaying=!1,e._onPlaying=null,e._onPause=null,e._onEnded=null,e}return t=c,(r=[{key:"IsGood",value:function(){return this.KeepAlive(),f(m(c.prototype),"IsGood",this).call(this)&&this.video&&this._playable}},{key:"KeepAlive",value:function(){this.activeFrame=o.resMan.activeFrame}},{key:"Play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cycle=e,this._onEnded=t,this.video&&this._playable?(this.video.loop=this.cycle,this.video.play()):this.playOnLoad=!0}},{key:"Pause",value:function(){this.video?this.video.pause():this.playOnLoad=!1}},{key:"Prepare",value:function(e){var t=o.device.gl;switch(this.DeleteGL(),this._extension){case"mp4":case"webm":case"ogg":this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.video),t.bindTexture(t.TEXTURE_2D,null),this.width=this.video.width,this.height=this.video.height,this.video.loop=this.cycle,this.playOnLoad&&this.video.play();break;default:throw new a.ErrResourceFormatUnsupported({format:this._extension})}this.OnPrepared()}},{key:"DoCustomLoad",value:function(e,t){var r=this;switch(t){case"mp4":case"webm":case"ogg":this._extension=t;break;default:throw new a.ErrResourceFormatUnsupported({format:t})}return o.resMan.AddPendingLoad(e),this.video=document.createElement("video"),this.video.crossOrigin="anonymous",this.video.muted=!0,this.video.onerror=function(){o.resMan.RemovePendingLoad(e),r.video=null,r.OnError(new u.ErrHTTPRequest({path:e}))},this.video.oncanplay=function(){r._playable=!0,r.video.oncanplay=null,o.resMan.RemovePendingLoad(e),o.resMan.Queue(r,void 0,t),r.OnLoaded()},this.video.onended=function(){r._isPlaying=!1,r._onEnded&&r._onEnded(r)},this.video.onpause=function(){r._isPlaying=!1,r._onPause&&r._onPause(r)},this.video.onplaying=function(){r._isPlaying=!0,r._onPlaying&&r._onPlaying(r)},this.video.src=e,!0}},{key:"DeleteGL",value:function(){this.texture&&(o.device.gl.deleteTexture(this.texture),this.texture=null)}},{key:"Unload",value:function(e){return this.DeleteGL(),this._extension=null,this._isPlaying=!1,this._playable=!1,this.playOnLoad=!0,this.video=null,this.OnUnloaded(e),!0}},{key:"Attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.DeleteGL(),this.path=t,this.texture=e,this._isAttached=!0,this.OnLoaded({hide:!0,path:"attachment"}),this.OnPrepared({hide:!0,path:"attachment"})}},{key:"Bind",value:function(e){var t=o.device,r=t.gl;this.KeepAlive();var n=e.samplerType;n===r.TEXTURE_2D&&(this.texture?(this._currentTime=this.video.currentTime,r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this.video),r.bindTexture(r.TEXTURE_2D,null),r.bindTexture(n,this.texture),e.hash!==this._currentSampler&&(e.Apply(t,!1),this._currentSampler=e.hash)):r.bindTexture(r.TEXTURE_2D,t.GetFallbackTexture()))}}])&&s(t.prototype,r),n&&s(t,n),c}(a.Tw2Resource))||n},"./core/resource/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/resource/Tw2EffectRes.js");r.d(t,"Tw2EffectRes",(function(){return n.Tw2EffectRes})),r.d(t,"ErrShaderVersion",(function(){return n.ErrShaderVersion})),r.d(t,"ErrShaderHeaderSize",(function(){return n.ErrShaderHeaderSize}));var i=r("./core/resource/Tw2GeometryRes.js");r.d(t,"Tw2GeometryRes",(function(){return i.Tw2GeometryRes})),r.d(t,"ErrGeometryMeshMissingParticleElement",(function(){return i.ErrGeometryMeshMissingParticleElement})),r.d(t,"ErrGeometryMeshElementComponentsMissing",(function(){return i.ErrGeometryMeshElementComponentsMissing})),r.d(t,"ErrGeometryMeshAreaMissing",(function(){return i.ErrGeometryMeshAreaMissing})),r.d(t,"ErrGeometryMeshBoneNameInvalid",(function(){return i.ErrGeometryMeshBoneNameInvalid})),r.d(t,"ErrGeometryMeshEffectBinding",(function(){return i.ErrGeometryMeshEffectBinding})),r.d(t,"ErrGeometryFileType",(function(){return i.ErrGeometryFileType}));var o=r("./core/resource/Tw2LoadingObject.js");r.d(t,"Tw2LoadingObject",(function(){return o.Tw2LoadingObject}));var a=r("./core/resource/Tw2Resource.js");r.d(t,"Tw2Resource",(function(){return a.Tw2Resource})),r.d(t,"ErrResourceFormatInvalid",(function(){return a.ErrResourceFormatInvalid})),r.d(t,"ErrResourceFormatUnsupported",(function(){return a.ErrResourceFormatUnsupported})),r.d(t,"ErrResourceFormatNotImplemented",(function(){return a.ErrResourceFormatNotImplemented}));var u=r("./core/resource/Tw2TextureRes.js");r.d(t,"Tw2TextureRes",(function(){return u.Tw2TextureRes}));var c=r("./core/resource/Tw2TextureResHTMLAttachment.js");r.d(t,"Tw2TextureResHTMLAttachment",(function(){return c.Tw2TextureResHTMLAttachment}));var l=r("./core/resource/Tw2VideoRes.js");r.d(t,"Tw2VideoRes",(function(){return l.Tw2VideoRes}))},"./core/sampler/Tw2SamplerOverride.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SamplerOverride",(function(){return V}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D=r("./global/utils/index.js"),A=r("./core/sampler/Tw2SamplerState.js");function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var V=(n=D.meta.type("Tw2SamplerOverride"),i=D.meta.string,o=D.meta.boolean,a=D.meta.uint,u=D.meta.uint,c=D.meta.uint,l=D.meta.uint,s=D.meta.uint,f=D.meta.uint,p=D.meta.notImplemented,d=D.meta.uint,y=D.meta.notImplemented,m=D.meta.uint,b=D.meta.uint,n((P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(o,e);var t,r,n,i=G(o);function o(){var e;k(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return C(e=i.call.apply(i,[this].concat(r)),"name",g,B(e)),C(e,"enable",w,B(e)),C(e,"addressUMode",x,B(e)),C(e,"addressVMode",_,B(e)),C(e,"addressWMode",z,B(e)),C(e,"filterMode",S,B(e)),C(e,"mipFilterMode",j,B(e)),C(e,"magFilterMode",E,B(e)),C(e,"lodBias",T,B(e)),C(e,"maxMipLevel",O,B(e)),C(e,"maxAnisotropy",R,B(e)),e._sampler=null,e._isDirty=!0,e}return t=o,(r=[{key:"OnValueChanged",value:function(){this._isDirty=!0}},{key:"GetSampler",value:function(e){if(!this.enable)return e;if(this._sampler&&!this._isDirty)return this._sampler;var t=this._sampler=this._sampler||new A.Tw2SamplerState;t.name=e.name,t.samplerType=e.samplerType,t.isVolume=e.isVolume,t.registerIndex=e.registerIndex;var r={filterMode:-1!==this.filterMode?this.filterMode:e.filterMode,mipFilterMode:-1!==this.mipFilterMode?this.mipFilterMode:e.mipFilterMode,magFilterMode:-1!==this.magFilterMode?this.magFilterMode:e.magFilterMode,addressUMode:-1!==this.addressUMode?this.addressUMode:e.addressUMode,addressVMode:-1!==this.addressVMode?this.addressVMode:e.addressVMode,addressWMode:-1!==this.addressWMode?this.addressWMode:e.addressWMode,maxAnisotropy:-1!==this.maxAnisotropy?this.maxAnisotropy:e.maxAnisotropy};return t.ResolveModes(r),this._isDirty=!1,t}}])&&I(t.prototype,r),n&&I(t,n),o}(D.meta.Model),g=U((v=P).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=U(v.prototype,"enable",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),x=U(v.prototype,"addressUMode",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),_=U(v.prototype,"addressVMode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),z=U(v.prototype,"addressWMode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),S=U(v.prototype,"filterMode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),j=U(v.prototype,"mipFilterMode",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),E=U(v.prototype,"magFilterMode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),T=U(v.prototype,"lodBias",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),O=U(v.prototype,"maxMipLevel",[y,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),R=U(v.prototype,"maxAnisotropy",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),h=v))||h)},"./core/sampler/Tw2SamplerState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SamplerState",(function(){return te}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F=r("./global/utils/index.js"),B=r("./global/constant/index.js");function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Y(e);if(t){var i=Y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return X(this,r)}}function X(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J=[0,B.GL_REPEAT,B.GL_MIRRORED_REPEAT,B.GL_CLAMP_TO_EDGE,B.GL_CLAMP_TO_EDGE,B.GL_CLAMP_TO_EDGE],$=(Z(n={},B.GL_NEAREST,0),Z(n,B.GL_LINEAR,0),Z(n,B.GL_NEAREST_MIPMAP_NEAREST,1),Z(n,B.GL_LINEAR_MIPMAP_NEAREST,1),Z(n,B.GL_NEAREST_MIPMAP_LINEAR,2),Z(n,B.GL_LINEAR_MIPMAP_LINEAR,2),n),ee=(Z(i={},B.GL_NEAREST,1),Z(i,B.GL_LINEAR,2),i),te=(o=F.meta.type("Tw2SamplerState"),a=F.meta.string,u=F.meta.uint,c=F.meta.uint,l=F.meta.uint,s=F.meta.uint,f=F.meta.uint,p=F.meta.uint,d=F.meta.uint,y=F.meta.uint,m=F.meta.uint,b=F.meta.uint,h=F.meta.boolean,v=F.meta.uint,g=F.meta.isPrivate,w=F.meta.uint,o((G=L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(o,e);var t,r,n,i=W(o);function o(){var e;V(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return U(e=i.call.apply(i,[this].concat(r)),"name",z,K(e)),U(e,"registerIndex",S,K(e)),U(e,"minFilter",j,K(e)),U(e,"maxFilter",E,K(e)),U(e,"magFilter",T,K(e)),U(e,"minFilterNoMips",O,K(e)),U(e,"addressU",R,K(e)),U(e,"addressV",P,K(e)),U(e,"addressW",D,K(e)),U(e,"anisotropy",A,K(e)),U(e,"samplerType",M,K(e)),U(e,"isVolume",C,K(e)),U(e,"hash",k,K(e)),U(e,"maxAnisotropy",I,K(e)),e._comparison=null,e._comparisonFunc=null,e._mipLODBias=null,e._minLOD=null,e._maxLOD=null,e}return t=o,n=[{key:"fromJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new o;return Object(F.assignIfExists)(t,e,["name","registerIndex","samplerType","isVolume"]),t.ResolveModes(e),t}},{key:"fromCCPBinary",value:function(e,t,r){var n=new o;n.registerIndex=e.ReadUInt8(),n.name=t.version>=4?t.ReadString():"",n._comparison=e.ReadUInt8();var i=e.ReadUInt8(),a=e.ReadUInt8(),u=e.ReadUInt8(),c=e.ReadUInt8(),l=e.ReadUInt8(),s=e.ReadUInt8();n._mipLODBias=e.ReadFloat32();var f=e.ReadUInt8();n._comparisonFunc=e.ReadUInt8(),e.ReadFloat32(),e.ReadFloat32(),e.ReadFloat32(),e.ReadFloat32(),n._minLOD=e.ReadFloat32(),n._maxLOD=e.ReadFloat32(),t.version<4&&e.ReadUInt8();for(var p=0;p<r.length;++p)if(r[p].registerIndex===n.registerIndex){n.samplerType=r[p].glType,n.isVolume=r[p].isVolume;break}return n.ResolveModes({mipFilterMode:u,filterMode:i,magFilterMode:a,addressUMode:c,addressVMode:l,addressWMode:s,maxAnisotropy:f}),n}}],(r=[{key:"UpdateFilterModes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.filterMode,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mipFilterMode,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.magFilterMode;if(e!==this.filterMode||t!==this.mipFilterMode||r!==this.magFilterMode){switch(e){case B.FilterMode.NEAREST:switch(t){case B.MipFilterMode.NONE:this.minFilter=B.GL_NEAREST;break;case B.MipFilterMode.NEAREST:this.minFilter=B.GL_NEAREST_MIPMAP_NEAREST;break;case B.MipFilterMode.LINEAR:default:this.minFilter=B.GL_NEAREST_MIPMAP_LINEAR}this.minFilterNoMips=B.GL_NEAREST,this.magFilter=B.GL_NEAREST;break;case B.FilterMode.LINEAR:default:switch(t){case B.MipFilterMode.NONE:this.minFilter=B.GL_LINEAR;break;case B.MipFilterMode.NEAREST:this.minFilter=B.GL_LINEAR_MIPMAP_NEAREST;break;case B.MipFilterMode.LINEAR:default:this.minFilter=B.GL_LINEAR_MIPMAP_LINEAR}this.minFilterNoMips=B.GL_LINEAR,this.magFilter=B.GL_LINEAR}3!==t&&3!==r&&3!==e||(this.anisotropy=Math.max(this.maxAnisotropy,1)),this.hash=null}}},{key:"OnValueUpdated",value:function(){this.hash=null}},{key:"ComputeHash",value:function(){this.hash=2166136261,this.hash*=16777619,this.hash^=this.minFilter,this.hash*=16777619,this.hash^=this.minFilterNoMips,this.hash*=16777619,this.hash^=this.maxFilter,this.hash*=16777619,this.hash^=this.addressU,this.hash*=16777619,this.hash^=this.addressV,this.hash*=16777619,this.hash^=this.addressW,this.hash*=16777619,this.hash^=this.anisotropy}},{key:"Apply",value:function(e,t,r){var n=this.samplerType,i=e.gl,o=e.GetExtension("EXT_texture_filter_anisotropic"),a=r?this.minFilterNoMips:this.minFilter;if(i.texParameteri(n,i.TEXTURE_WRAP_S,t?this.addressU:i.CLAMP_TO_EDGE),i.texParameteri(n,i.TEXTURE_WRAP_T,t?this.addressV:i.CLAMP_TO_EDGE),n!==i.TEXTURE_3D&&n!==i.TEXTURE_2D_ARRAY||i.texParameteri(n,i.TEXTURE_WRAP_R,t?this.addressW:i.CLAMP_TO_EDGE),i.texParameteri(n,i.TEXTURE_MIN_FILTER,t?a:this.minFilterNoMips),i.texParameteri(n,i.TEXTURE_MAG_FILTER,this.magFilter),o&&e.enableAnisotropicFiltering){var u=Math.min(this.maxAnisotropy,o.maxAnisotropy);i.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.anisotropy,u))}null===this.hash&&this.ComputeHash()}},{key:"ResolveModes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.addressUMode,r=e.addressVMode,n=e.addressWMode,i=e.maxAnisotropy,o=e.filterMode,a=e.mipFilterMode,u=e.magFilterMode,c=e.type;return void 0!==i&&i!==this.maxAnisotropy&&(this.maxAnisotropy=i,this.hash=null),void 0!==c&&this.samplerType!==B.TexTypeToGLTexture[c]&&(this.samplerType=B.TexTypeToGLTexture[c],this.hash=null),void 0!==t&&(this.addressUMode=t),void 0!==r&&(this.addressVMode=r),void 0!==n&&(this.addressWMode=n),this.UpdateFilterModes(o,a,u),null===this.hash&&(this.ComputeHash(),!0)}},{key:"addressUMode",get:function(){return J.indexOf(this.addressU)},set:function(e){this.addressUMode!==e&&void 0!==e&&(this.addressU=J[e],this.hash=null)}},{key:"addressVMode",get:function(){return J.indexOf(this.addressV)},set:function(e){this.addressVMode!==e&&void 0!==e&&(this.addressV=J[e],this.hash=null)}},{key:"addressWMode",get:function(){return J.indexOf(this.addressW)},set:function(e){this.addressUMode!==e&&void 0!==e&&(this.addressW=J[e],this.hash=null)}},{key:"filterMode",get:function(){return this.minFilterNoMips in ee?ee[this.minFilterNoMips]:2},set:function(e){void 0!==e&&e!==this.filterMode&&this.UpdateFilterModes(e,this.mipFilterMode,this.magFilterMode)}},{key:"magFilterMode",set:function(e){void 0!==e&&e!==this.magFilterMode&&this.UpdateFilterModes(this.filterMode,this.mipFilterMode,e)},get:function(){return this.magFilter in ee?ee[this.magFilter]:2}},{key:"mipFilterMode",get:function(){return this.minFilter in $?$[this.minFilter]:2},set:function(e){void 0!==e&&e!==this.mipFilterMode&&this.UpdateFilterModes(this.filterMode,e,this.magFilterMode)}}])&&q(t.prototype,r),n&&q(t,n),o}(F.meta.Model),L.WrapModes=J,L.FilterToModeTable=ee,L.MipFilterToModeTable=$,z=Q((_=G).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=Q(_.prototype,"registerIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),j=Q(_.prototype,"minFilter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_LINEAR}}),E=Q(_.prototype,"maxFilter",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_LINEAR}}),T=Q(_.prototype,"magFilter",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_LINEAR}}),O=Q(_.prototype,"minFilterNoMips",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_LINEAR}}),R=Q(_.prototype,"addressU",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_REPEAT}}),P=Q(_.prototype,"addressV",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_REPEAT}}),D=Q(_.prototype,"addressW",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_REPEAT}}),A=Q(_.prototype,"anisotropy",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),M=Q(_.prototype,"samplerType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_TEXTURE_2D}}),C=Q(_.prototype,"isVolume",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=Q(_.prototype,"hash",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=Q(_.prototype,"maxAnisotropy",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),x=_))||x)},"./core/sampler/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/sampler/Tw2SamplerState.js");r.d(t,"Tw2SamplerState",(function(){return n.Tw2SamplerState}));var i=r("./core/sampler/Tw2SamplerOverride.js");r.d(t,"Tw2SamplerOverride",(function(){return i.Tw2SamplerOverride}))},"./core/shader/Tw2Shader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Shader",(function(){return R})),r.d(t,"ErrShaderCompile",(function(){return P})),r.d(t,"ErrShaderLink",(function(){return D}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./global/index.js"),y=r("./core/Tw2Error.js"),m=r("./core/shader/Tw2ShaderAnnotation.js"),b=r("./core/shader/Tw2ShaderTechnique.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R=(n=p.meta.type("Tw2Shader"),i=p.meta.plain,o=p.meta.plain,n((f=s=function(){function e(){E(this,e),j(this,"techniques",c,this),j(this,"annotations",l,this)}var t,r,n;return t=e,n=[{key:"fromJSON",value:function(t,r){var n=t.techniques,i=void 0===n?{}:n,o=t.annotations,a=void 0===o?{}:o,u=new e;for(var c in i)i.hasOwnProperty(c)&&(u.techniques[c]=b.Tw2ShaderTechnique.fromJSON(i[c],r,c));for(var l in a)a.hasOwnProperty(l)&&!r.annotations[l]&&(r.annotations[l]=m.Tw2ShaderAnnotation.fromJSON(a[l],r,l));return u.annotations=r.annotations,u}},{key:"fromCCPBinary",value:function(t,r){for(var n=new e,i=r.version>6?t.ReadUInt8():1,o=0;o<i;o++){var a=r.version>6?r.ReadString():"Main";if(n.techniques[a])throw new Error("Invalid technique, already defined: "+a);n.techniques[a]=b.Tw2ShaderTechnique.fromCCPBinary(t,r,a)}for(var u=t.ReadUInt16(),c=0;c<u;++c){var l=m.Tw2ShaderAnnotation.fromCCPBinary(t,r);n.annotations[l.name]=l}return n}}],(r=[{key:"FindPerObjectDataUsage",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Main";if(!e.DEBUG_ENABLED)throw new Error("Debug mode must be enabled to find per object data");var n={vs:{frame:{},object:{},parameter:{},inputDefinitions:[]},ps:{frame:{},object:{},parameter:{},inputDefinitions:[]},ffe:{object:{}},inputDefinitions:{}},i=d.device.perFramePSData,o=d.device.perFrameVSData,a=this.techniques[r].passes[0],u=z(a.stages,2),c=u[0],l=u[1],s=c.shaderCode+l.shaderCode;if(a.shaderProgram.input.elementsSorted.forEach((function(e){n.inputDefinitions[e._attr]=e.string})),c.inputDefinition.elementsSorted.forEach((function(e){n.vs.inputDefinitions.push(e.string)})),l.inputDefinition.elementsSorted.forEach((function(e){n.ps.inputDefinitions.push(e.string)})),!s)throw new Error("Debug mode must be enabled when the shader was created");var f=s.split(/\r\n|\r|\n/),p={cb0:{name:"ConstantVertex",source:c,target:n.vs.parameter,isStage:!0,short:"cb0"},cb1:{name:"PerFrameVS",source:o,target:n.vs.frame,short:"cb1"},cb2:{name:"PerFramePS",source:i,target:n.ps.frame,short:"cb2"},cb3:{name:"PerObjectVS",source:t.vs||t._perFrameVS,target:n.vs.object,short:"cb3"},cb4:{name:"PerObjectPS",source:t.ps||t._perFramePS,target:n.ps.object,short:"cb4"},cb5:{name:"PerObjectFFE",source:t.ffe,target:n.ffe.object,short:"cb5"},cb7:{name:"ConstantFragment",source:l,target:n.ps.parameter,isStage:!0,short:"cb7"}},y={ConstantVertex:"cb0",PerFrameVS:"cb1",PerObjectVS:"cb3",PerFramePS:"cb2",PerObjectPS:"cb4",PerObjectFFE:"cb5",ConstantFragment:"cb7"},m=["x","y","z","w"];function b(e,t){var r=e.target,n=e.source.FindElementFromIndex(t);if(n){var i=n.name,o=n.offset,a=n.array,u=t-o;return r[i="".concat(e.short,"[").concat(o/4,"]_").concat(i)]=r[i]||[],void(r[i][u]=a[u])}throw new Error("Error finding element in ".concat(e.name," at index: ").concat(t))}function h(e,t){for(var r=e.target,n=e.source,i=n.constants,o=n.constantValues,a=0;a<i.length;a++){var u=i[a],c=u.offset,l=u.name,s=u.type,f=u.size;if(!(t<c||t>c+f-1)){var d=t-c;return void(3===s?b(p[y[l]],d):(r[l]=r[l]||[],r[l][d]=o[c+d]))}}throw new Error("Error finding element in ".concat(e.name," at index: ").concat(t))}return f.forEach((function(e){if(e){var t=e.match(/cb[0123457]\[\d+\](|\.?[xyzw]?[xyzw]?[xyzw]?[xyzw])+/g);if(t&&!e.includes("uniform vec4 cb"))for(var r=0;r<t.length;r++)for(var n=z(t[r].split("."),2),i=n[0],o=n[1],a=i.match(/(cb[0-7])/g)[0],u=4*parseInt(i.replace(a,"").replace("[","").replace("]","")),c=o&&o.length?o.split("").map((function(e){return m.indexOf(e)})):[0,1,2,3],l=p[a],s=0;s<c.length;s++)l.isStage?h(l,u+c[s]):b(l,u+c[s])}})),n}},{key:"ApplyPass",value:function(e,t,r){this.techniques[e].passes[t].Apply(r)}},{key:"GetParameterNames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t&&t.technique)return this.techniques[t.technique]?this.techniques[t.technique].GetParameterNames(e,t):e;for(var r in this.techniques)this.techniques.hasOwnProperty(r)&&this.techniques[r].GetParameterNames(e,t);return e}},{key:"HasConstant",value:function(e){for(var t in this.techniques)if(this.techniques.hasOwnProperty(t)&&this.techniques[t].HasConstant(e))return!0;return!1}},{key:"HasTexture",value:function(e){for(var t in this.techniques)if(this.techniques.hasOwnProperty(t)&&this.techniques[t].HasTexture(e))return!0;return!1}},{key:"HasSampler",value:function(e){for(var t in this.techniques)if(this.techniques.hasOwnProperty(t)&&this.techniques[t].HasSampler(e))return!0;return!1}}])&&T(t.prototype,r),n&&T(t,n),e}(),s.DEBUG_ENABLED=!1,c=O((u=f).prototype,"techniques",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=O(u.prototype,"annotations",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=u))||a),P=function(e){v(r,e);var t=w(r);function r(e){return E(this,r),t.call(this,e,"Error compiling %shaderType% shader (%infoLog%)")}return r}(y.Tw2Error),D=function(e){v(r,e);var t=w(r);function r(e){return E(this,r),t.call(this,e,"Error linking shaders")}return r}(y.Tw2Error)},"./core/shader/Tw2ShaderAnnotation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderAnnotation",(function(){return _}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./global/utils/index.js");function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=v.meta.type("Tw2ShaderAnnotation"),i=v.meta.string,o=v.meta.string,a=v.meta.array,u=v.meta.boolean,c=v.meta.string,l=v.meta.string,n((p=x((f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"name",p,this),g(this,"description",d,this),g(this,"components",y,this),g(this,"display",m,this),g(this,"group",b,this),g(this,"widget",h,this)}var t,r,n;return t=e,n=[{key:"fromJSON",value:function(t,r,n){var i=new e;Object(v.assignIfExists)(i,t,["name","description","display","group","widget"]);var o=[];if(t.components)for(var a=0;a<t.components.length;a++)o[a]=t.components[a];return o.length&&(i.components=o),i.name=i.name||n,i}},{key:"fromCCPBinary",value:function(t,r){var n=new e;n.name=r.ReadString();for(var i=t.ReadUInt8(),o=[],a=0;a<i;++a){var u=r.ReadString(),c=void 0;switch(t.ReadUInt8()){case 0:c=0!==t.ReadUInt32();break;case 1:c=t.ReadInt32();break;case 2:c=t.ReadFloat32();break;default:c=r.ReadString()}switch(u.toUpperCase()){case"UIWIDGET":n.widget=c.toUpperCase(),"LINEARCOLOR"===n.widget&&(o[0]="Linear red",o[1]="Linear green",o[2]="Linear blue",o[3]="Linear alhpa");break;case"SASUIVISIBLE":n.display=c;break;case"SASUIDESCRIPTION":n.description=c;break;case"GROUP":n.group=c;break;case"COMPONENT1":o[0]=c;break;case"COMPONENT2":o[1]=c;break;case"COMPONENT3":o[2]=c;break;case"COMPONENT4":o[3]=c;break;default:n[u=u.charAt(0).toLowerCase()+u.substring(1)]=c}}return!n.widget&&n.name.toUpperCase().includes("MAP")&&(n.widget="TEXTURE",n.group="Textures"),o.length&&(n.components=o),n}}],(r=null)&&w(t.prototype,r),n&&w(t,n),e}()).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=x(f.prototype,"description",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=x(f.prototype,"components",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=x(f.prototype,"display",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=x(f.prototype,"group",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"None"}}),h=x(f.prototype,"widget",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=f))||s)},"./core/shader/Tw2ShaderPass.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderPass",(function(){return _}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js"),m=r("./global/index.js"),b=r("./core/shader/Tw2ShaderStage.js"),h=r("./core/shader/Tw2ShaderState.js"),v=r("./core/shader/Tw2ShaderProgram.js");function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=y.meta.type("Tw2ShaderPass"),i=y.meta.struct("Tw2ShaderProgram"),o=y.meta.struct("Tw2ShaderProgram"),a=y.meta.list("Tw2ShaderStage"),u=y.meta.list("Tw2ShaderState"),n((s=x((l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"shaderProgram",s,this),g(this,"shadowShaderProgram",f,this),g(this,"stages",p,this),g(this,"states",d,this)}var t,r,n;return t=e,n=[{key:"fromJSON",value:function(t,r){r.validShadowShader=!1;var n=new e;return n.stages[0]=b.Tw2ShaderStage.fromJSON(t.vertex||t.vs,r,b.Tw2ShaderStage.Type.VERTEX),n.stages[1]=b.Tw2ShaderStage.fromJSON(t.fragment||t.ps,r,b.Tw2ShaderStage.Type.FRAGMENT),n.SetStates(t.states),this.createPrograms(n,r)}},{key:"fromCCPBinary",value:function(t,r){var n=new e,i=t.ReadUInt8();r.validShadowShader=!0;for(var o=0;o<i;o++)n.stages.push(b.Tw2ShaderStage.fromCCPBinary(t,r)),r.version>=3&&t.ReadUInt8(),r.version>7&&t.ReadUInt8();for(var a=t.ReadUInt8(),u=0;u<a;u++)n.states.push(h.Tw2ShaderState.fromCCPBinary(t));return n.states.sort((function(e,t){return e.state-t.state})),this.createPrograms(n,r)}},{key:"createPrograms",value:function(e,t){return e.shaderProgram=v.Tw2ShaderProgram.create(e.stages[0].shader,e.stages[1].shader,e,t),t.validShadowShader?(e.shadowShaderProgram=v.Tw2ShaderProgram.create(e.stages[0].shadowShader,e.stages[1].shadowShader,e,t,!0),null===e.shadowShaderProgram&&(e.shadowShaderProgram=e.shaderProgram)):e.shadowShaderProgram=e.shaderProgram,e}}],(r=[{key:"Apply",value:function(e){for(var t=m.device.gl,r=0;r<this.states.length;r++)m.device.SetRenderState(this.states[r].state,this.states[r].value);if(e)if(Object(y.isArray)(e))for(var n=0;n<e.length;n++)m.device.SetRenderState(e[n].state,e[n].value);else for(var i in e)e.hasOwnProperty(i)&&m.device.SetRenderState(i,e[i]);m.device.IsAlphaTestEnabled()?(t.useProgram(this.shadowShaderProgram.program),m.device.SetShadowHandles(this.shadowShaderProgram)):(t.useProgram(this.shaderProgram.program),m.device.SetShadowHandles(null))}},{key:"SetState",value:function(e,t){if(e=Number(e),isNaN(e))throw new Error("Invalid render state: "+e);var r=this.states.find((function(t){return t.state===e}));r?r.value=t:(this.states.push(h.Tw2ShaderState.fromJSON({state:e,value:t})),this.states.sort((function(e,t){return e.state-t.state})))}},{key:"SetStates",value:function(e){if(e)if(Object(y.isArray)(e))for(var t=0;t<e.length;t++)this.SetState(e[t].state,e[t].value);else for(var r in e)e.hasOwnProperty(r)&&this.SetState(r,e[r])}},{key:"GetParameterNames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t&&t.stage)return this.stages[t.stage]?this.stages[t.stage].GetParameterNames(e,t):e;for(var r=0;r<this.stages.length;r++)this.stages[r].GetParameterNames(e);return e}},{key:"HasConstant",value:function(e){for(var t=0;t<this.stages.length;t++)if(this.stages[t].HasConstant(e))return!0;return!1}},{key:"HasTexture",value:function(e){for(var t=0;t<this.stages.length;t++)if(this.stages[t].HasTexture(e))return!0;return!1}},{key:"HasSampler",value:function(e){for(var t=0;t<this.stages.length;t++)if(this.stages[t].HasSampler(e))return!0;return!1}},{key:"vertex",get:function(){return this.stages[0]}},{key:"vs",get:function(){return this.stages[0]}},{key:"fragment",get:function(){return this.stages[1]}},{key:"ps",get:function(){return this.stages[1]}}])&&w(t.prototype,r),n&&w(t,n),e}()).prototype,"shaderProgram",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=x(l.prototype,"shadowShaderProgram",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=x(l.prototype,"stages",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=x(l.prototype,"states",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=l))||c)},"./core/shader/Tw2ShaderPermutation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderPermutation",(function(){return D})),r.d(t,"ErrShaderPermutationOptionInvalid",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w=r("./global/utils/index.js"),x=r("./core/Tw2Error.js");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D=(n=w.meta.type("Tw2ShaderPermutation"),i=w.meta.string,o=w.meta.uint,a=w.meta.string,u=w.meta.uint,c=w.meta.plain,l=w.meta.uint,n((g=v=function(){function e(){O(this,e),T(this,"name",p,this),T(this,"defaultOption",d,this),T(this,"description",y,this),T(this,"type",m,this),T(this,"options",b,this),T(this,"optionCount",h,this)}var t,r,n;return t=e,n=[{key:"fromCCPBinary",value:function(t,r){var n=new e;n.name=r.ReadString(),n.defaultOption=t.ReadUInt8(),n.description=r.ReadString(),n.type=t.ReadUInt8(),n.optionCount=t.ReadUInt8();for(var i=0;i<n.optionCount;i++)n.options[r.ReadString()]=i;return n}}],(r=[{key:"HasOption",value:function(e){return e.toUpperCase()in this.options}},{key:"GetOption",value:function(e){if(e=e.toUpperCase(),this.HasOption(e))return this.options[e];throw new A({name:this.name,option:e})}},{key:"string",get:function(){return Object(w.getKeyFromValue)(e.Type,this.type,"INVALID")}}])&&R(t.prototype,r),n&&R(t,n),e}(),v.Type={INVALID:-1,UNKNOWN_0:0,UNKNOWN_1:1,UNKNOWN_2:2,UNKNOWN_3:3,UNKNOWN_4:4},p=P((f=g).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=P(f.prototype,"defaultOption",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=P(f.prototype,"description",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=P(f.prototype,"type",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.Type.INVALID}}),b=P(f.prototype,"options",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=P(f.prototype,"optionCount",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=f))||s),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(r,e);var t=S(r);function r(e){return O(this,r),t.call(this,e,"Invalid shader permutation option for %name% (%option%)")}return r}(x.Tw2Error)},"./core/shader/Tw2ShaderProgram.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderProgram",(function(){return T}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w=r("./global/utils/index.js"),x=r("./global/index.js"),_=r("./core/vertex/index.js"),z=r("./core/shader/Tw2Shader.js");function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T=(n=w.meta.type("Tw2ShaderProgram"),i=w.meta.list(WebGLUniformLocation),o=w.meta.struct("Tw2VertexDeclaration"),a=w.meta.list(WebGLUniformLocation),u=w.meta.struct(WebGLUniformLocation),c=w.meta.struct(WebGLUniformLocation),l=w.meta.struct(WebGLUniformLocation),s=w.meta.array,n((d=E((p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,"constantBufferHandles",d,this),S(this,"input",y,this),S(this,"samplerHandles",m,this),S(this,"shadowStateFloat",b,this),S(this,"shadowStateInt",h,this),S(this,"shadowStateYFlip",v,this),S(this,"volumeSlices",g,this)}var t,r,n;return t=e,n=[{key:"create",value:function(t,r,n,i,o){var a=x.device.gl,u=new e;if(u.program=a.createProgram(),a.attachShader(u.program,t),a.attachShader(u.program,r),a.linkProgram(u.program),!a.getProgramParameter(u.program,a.LINK_STATUS)){if(!o)throw new z.ErrShaderLink({path:i.path,infoLog:a.getProgramInfoLog(u.program)});return null}a.useProgram(u.program);for(var c=0;c<16;++c)u.constantBufferHandles[c]=a.getUniformLocation(u.program,"cb"+c);for(var l=0;l<16;++l)u.samplerHandles[l]=a.getUniformLocation(u.program,"s"+l),a.uniform1i(u.samplerHandles[l],l);for(var s=0;s<16;++s)u.samplerHandles[s+12]=a.getUniformLocation(u.program,"vs"+s),a.uniform1i(u.samplerHandles[s+12],s+12);for(var f=n.stages[0].inputDefinition.elements,p=0;p<f.length;++p){var d="attr"+p,y=a.getAttribLocation(u.program,d);if(y>=0){var m=_.Tw2VertexElement.from({usage:f[p].usage,usageIndex:f[p].usageIndex,location:y,attr:d});u.input.elements.push(m),f[p]._attr=d,f[p]._registerIndex=p,f[p].location=y}}u.input.RebuildHash(),u.shadowStateInt=a.getUniformLocation(u.program,"ssi"),u.shadowStateFloat=a.getUniformLocation(u.program,"ssf"),u.shadowStateYFlip=a.getUniformLocation(u.program,"ssyf"),a.uniform3f(u.shadowStateYFlip,0,0,1);for(var b=n.stages[1].samplers,h=0;h<b.length;++h)b[h]._attr="s".concat(b[h].registerIndex),b[h].isVolume&&(u.volumeSlices[b[h].registerIndex]=a.getUniformLocation(u.program,"s"+b[h].registerIndex+"sl"));return u}}],(r=null)&&j(t.prototype,r),n&&j(t,n),e}()).prototype,"constantBufferHandles",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=E(p.prototype,"input",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _.Tw2VertexDeclaration}}),m=E(p.prototype,"samplerHandles",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=E(p.prototype,"shadowStateFloat",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=E(p.prototype,"shadowStateInt",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=E(p.prototype,"shadowStateYFlip",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=E(p.prototype,"volumeSlices",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=p))||f)},"./core/shader/Tw2ShaderStage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderStage",(function(){return W}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M=r("./global/utils/index.js"),C=r("./core/vertex/index.js"),k=r("./core/sampler/index.js"),I=r("./core/shader/Tw2Shader.js"),L=r("./core/shader/Tw2ShaderStageConstant.js"),G=r("./core/shader/Tw2ShaderStageTexture.js"),F=r("./global/tw2.js"),B=r("./core/shader/shaderOverrides.json"),N=r("./core/shader/Tw2ShaderAnnotation.js");function U(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function V(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var W=(n=M.meta.type("Tw2ShaderStage"),i=M.meta.uint,o=M.meta.vector,a=M.meta.list("Tw2ShaderStageConstant"),u=M.meta.struct("Tw2VertexDeclaration"),c=M.meta.list("Tw2SamplerState"),l=M.meta.struct(WebGLShader),s=M.meta.isPrivate,f=M.meta.string,p=M.meta.struct("WebGLShader"),d=M.meta.isPrivate,y=M.meta.string,m=M.meta.uint,b=M.meta.isPrivate,h=M.meta.list("Tw2ShaderTexture"),n((A=D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),V(this,"constantSize",w,this),V(this,"constantValues",x,this),V(this,"constants",_,this),V(this,"inputDefinition",z,this),V(this,"samplers",S,this),V(this,"shader",j,this),V(this,"shaderCode",E,this),V(this,"shadowShader",T,this),V(this,"shadowShaderCode",O,this),V(this,"type",R,this),V(this,"textures",P,this)}var t,r,n;return t=e,n=[{key:"fromJSON",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Type.INVALID,i=new e;i.type=n;for(var o=t.constants,a=void 0===o?[]:o,u=t.textures,c=void 0===u?[]:u,l=t.inputDefinitions,s=void 0===l?[]:l,f=t.shader,p=t.shadowShader,d=0;d<s.length;d++)i.inputDefinition.elements.push(C.Tw2VertexElement.from(s[d]));i.inputDefinition.RebuildHash();var y=!1;function m(e){if(L.Tw2ShaderStageConstant.IgnoreOffset.includes(e.name)){if(i.constantSize>e.offset)throw new ReferenceError("Constant offset out of bounds: ".concat(e.name));return e.offset}var t;if(-1!==e.offset)y=!0,t=e.offset;else{if(y)throw new ReferenceError("Cannot auto offset when an offset has been manually defined");if(!e.size||1===e.size)throw new ReferenceError("Invalid constant size");t=i.constantSize}return i.constantSize+=e.size,t}for(var b=0;b<a.length;b++){a[b].name||(a[b].name="Constant"+b);var h=L.Tw2ShaderStageConstant.fromJSON(a[b],r);if(h.offset=m(h),i.constants.push(h),a[b].ui){var v=N.Tw2ShaderAnnotation.fromJSON(a[b].ui,r);v.name||(v.name=h.name),v.group||(v.group="Constant"),r.annotations[v.name]=v}}i.constantValues=new Float32Array(i.constantSize);for(var g=0;g<i.constants.length;g++){var w=i.constants[g],x=w.name,_=w.defaults,z=w.offset,S=w.size;if(!L.Tw2ShaderStageConstant.IgnoreOffset.includes(x)){for(var j=0;j<_.length;j++)i.constantValues[z+j]=_[j];I.Tw2Shader.DEBUG_ENABLED?i.constants[g].defaults=i.constantValues.subarray(z,z+S):i.constants[g].defaults=null}}var E=!1;function T(e,t){if(void 0!==e.registerIndex)return E=!0,e.registerIndex;if(E)throw new ReferenceError("Cannot automatically resolve a register index when one has already been defined");return t}for(var O=0;O<c.length;O++){var R=c[O],P=R.sampler,D=void 0===P?{}:P,A=R.ui,F=U(R,["sampler","ui"]);F.registerIndex=T(F,O),F.name=Object(M.get)(c[O],"name","Texture"+O);var B=G.Tw2ShaderStageTexture.fromJSON(F,r);if(i.textures.push(B),D.name=Object(M.get)(D,"name",B.name+"Sampler"),D.registerIndex=B.registerIndex,D.isVolume=B.isVolume,D.samplerType=B.glType,i.samplers.push(k.Tw2SamplerState.fromJSON(D,r)),A){var V=N.Tw2ShaderAnnotation.fromJSON(A,r);V.name||(V.name=c[O].name),V.group||(V.group="Textures"),r.annotations[V.name]=V}}return i.constants.sort((function(e,t){return e.offset-t.offset})),i.textures.sort((function(e,t){return e.registerIndex-t.registerIndex})),i.samplers.sort((function(e,t){return e.registerIndex-t.registerIndex})),I.Tw2Shader.DEBUG_ENABLED&&(console.group("".concat(r.path," (").concat(0===i.type?"vertex":"fragment",")")),console.dir({path:r.path,shader:f,shadowShader:p,type:0===i.type?"vertex":"fragment"}),console.groupEnd(),i.shaderCode=f,i.shadowShaderCode=p),i.shader=this.compileShader(i.type,"",f,r.path),r.validShadowShader&&p&&(i.shadowShader=this.compileShader(i.type,"",p,r.path,!0)),i}},{key:"MakeShaderCodeReadable",value:function(e,t,r,n){var i=e.indexOf("main()");if(-1===i)return e;for(var o,a,u=e.substr(i,i+10).indexOf("{")+i+1,c="\n",l=0===n?"cb0":"cb7",s=0;s<t.length;s++){var f=t[s],p=f.dimension,d=f.offset,y=f.name;if(4===p){y="u"+y;var m="".concat(l,"[").concat(d/4,"]");o=m,a=y,e=e.replace(new RegExp(o.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"g"),a),c+="vec4 ".concat(y,"=").concat(m,";\n")}}return e.slice(0,u)+c+e.slice(u)}},{key:"fromCCPBinary",value:function(t,r){var n=new e;n.type=t.ReadUInt8();for(var i,o,a,u,c=t.ReadUInt8(),l=0;l<c;l++){var s=t.ReadUInt8(),f=t.ReadUInt8(),p=t.ReadUInt8(),d=t.ReadUInt8(),y=C.Tw2VertexElement.from({usage:s,usageIndex:p,type:0,registerIndex:f,usedMask:d});n.inputDefinition.elements.push(y)}if(n.inputDefinition.RebuildHash(),r.version<5)i=t.ReadUInt32(),o=t.data.subarray(t.cursor,t.cursor+i),t.cursor+=i,a=t.ReadUInt32(),u=t.data.subarray(t.cursor,t.cursor+a),t.cursor+=a;else{i=t.ReadUInt32();var m=t.ReadUInt32();o=this.inspectShaderCode(r.stringTable.substr(m,i),r.path,n.type),a=t.ReadUInt32(),m=t.ReadUInt32(),u=this.inspectShaderCode(r.stringTable.substr(m,a),r.path,n.type)}r.version>=3&&(t.ReadUInt32(),t.ReadUInt32(),t.ReadUInt32()),n.constantSize=0;for(var b=t.ReadUInt32(),h=0;h<b;++h){var v=L.Tw2ShaderStageConstant.fromCCPBinary(t,r);if(n.constants.push(v),!L.Tw2ShaderStageConstant.IgnoreOffset.includes(v.name)){var g=v.offset+v.size;g>n.constantSize&&(n.constantSize=g)}}var w=t.ReadUInt32()/4;if(n.constantValues=new Float32Array(w),r.version<5)for(var x=0;x<w;++x)n.constantValues[x]=t.ReadFloat32();else{var _=t.ReadUInt32(),z=t.cursor;t.cursor=r.stringTableOffset+_;for(var S=0;S<w;++S)n.constantValues[S]=t.ReadFloat32();t.cursor=z}n.constantSize=Math.max(n.constantSize,w);for(var j=0;j<n.constants.length;j++)if(I.Tw2Shader.DEBUG_ENABLED){var E=n.constants[j],T=E.name,O=E.size,R=E.offset;L.Tw2ShaderStageConstant.IgnoreOffset.includes(T)||(n.constants[j].defaults=n.constantValues.subarray(R,R+O))}else n.constants[j].defaults=null;for(var P=t.ReadUInt8(),D=0;D<P;++D)n.textures.push(G.Tw2ShaderStageTexture.fromCCPBinary(t,r));for(var A=t.ReadUInt8(),M=0;M<A;++M)n.samplers.push(k.Tw2SamplerState.fromCCPBinary(t,r,n.textures));return n.constants.sort((function(e,t){return e.offset-t.offset})),n.textures.sort((function(e,t){return e.registerIndex-t.registerIndex})),n.samplers.sort((function(e,t){return e.registerIndex-t.registerIndex})),I.Tw2Shader.DEBUG_ENABLED&&(console.group("".concat(r.path," (").concat(0===n.type?"vertex":"fragment",")")),console.dir({path:r.path,shaderCode:o,shadowShaderCode:u,type:0===n.type?"vertex":"fragment"}),console.groupEnd(),n.shaderCode=o,n.shadowShaderCode=u),n.shader=this.compileShader(n.type,"",o,r.path),r.validShadowShader?(n.shadowShader=0===a?this.compileShader(n.type,"//shadow\n#define PS\n",o,r.path,!0):this.compileShader(n.type,"//shadow\n",u,r.path,!0),null===n.shadowShader&&(r.validShadowShader=!1)):n.shadowShader=null,n}},{key:"compileShader",value:function(e,t,r,n,i){var o=F.device.gl,a=o.createShader(0===e?o.VERTEX_SHADER:o.FRAGMENT_SHADER),u=F.device.GetExtension("CCP_shader_binary"),c=n.split("/");if(c="//".concat(c[c.length-1],"\n"),u)u.shaderBinary(a,r);else{var l=c+t+(Object(M.isString)(r)?r:String.fromCharCode.apply(null,r));l=l.substr(0,l.length-1),o.shaderSource(a,l),o.compileShader(a)}if(!o.getShaderParameter(a,o.COMPILE_STATUS)){if(!i)throw new I.ErrShaderCompile({path:n,shaderType:0===e?"vertex":"fragment",infoLog:o.getShaderInfoLog(a)});return null}return a}},{key:"inspectShaderCode",value:function(e,t,r){var n,i,o,a=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")).toLowerCase(),u=B[a],c=B[a+(0===r?".vertex":".fragment")],l=Object.assign({},u,c);if(!Object.keys(l).length)return e;for(var s in l)l.hasOwnProperty(s)&&(n=e,i=s,o=l[s],e=n.replace(new RegExp(i.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"g"),o));return e}}],(r=[{key:"GetParameterNames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.constants=e.constants||[],e.textures=e.textures||[],e.samplers=e.samplers||[];for(var t=0;t<this.constants.length;t++)Object(M.addToArray)(e.constants,this.constants[t].name);for(var r=0;r<this.textures.length;r++)Object(M.addToArray)(e.textures,this.textures[r].name);for(var n=0;n<this.samplers.length;n++)Object(M.addToArray)(e.samplers,this.samplers[n].name);return e}},{key:"HasConstant",value:function(e){for(var t=0;t<this.constants.length;t++)if(this.constants[t].name===e)return!0;return!1}},{key:"HasTexture",value:function(e){for(var t=0;t<this.textures.length;t++)if(this.textures[t].name===e)return!0;return!1}},{key:"HasSampler",value:function(e){for(var t=0;t<this.samplers.length;t++)if(this.samplers[t].name===e)return!0;return!1}},{key:"string",get:function(){return Object(M.getKeyFromValue)(e.Type,this.type,"INVALID")}}])&&q(t.prototype,r),n&&q(t,n),e}(),D.Type={INVALID:-1,VERTEX:0,FRAGMENT:1},w=H((g=A).prototype,"constantSize",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=H(g.prototype,"constantValues",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=H(g.prototype,"constants",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=H(g.prototype,"inputDefinition",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new C.Tw2VertexDeclaration}}),S=H(g.prototype,"samplers",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=H(g.prototype,"shader",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=H(g.prototype,"shaderCode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=H(g.prototype,"shadowShader",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=H(g.prototype,"shadowShaderCode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=H(g.prototype,"type",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.Type.INVALID}}),P=H(g.prototype,"textures",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=g))||v)},"./core/shader/Tw2ShaderStageConstant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderStageConstant",(function(){return D}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T=r("./global/utils/index.js");function O(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D=(n=T.meta.type("Tw2ShaderStageConstant"),i=T.meta.string,o=T.meta.uint,a=T.meta.uint,u=T.meta.uint,c=T.meta.boolean,l=T.meta.todo("Why is this here?"),s=T.meta.uint,f=T.meta.uint,p=T.meta.uint,d=T.meta.vector,n((E=j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O(this,"name",b,this),O(this,"dimension",h,this),O(this,"elements",v,this),O(this,"isAutoregister",g,this),O(this,"isSRGB",w,this),O(this,"offset",x,this),O(this,"size",_,this),O(this,"type",z,this),O(this,"defaults",S,this)}var t,r,n;return t=e,n=[{key:"fromJSON",value:function(t,r){var n=t.name,i=t.dimension,o=void 0===i?0:i,a=t.elements,u=void 0===a?1:a,c=t.isAutoregister,l=void 0===c?0:c,s=t.isSRGB,f=void 0===s?0:s,p=t.offset,d=void 0===p?-1:p,y=t.size,m=void 0===y?0:y,b=t.type,h=void 0===b?e.Type.PARAMETER:b,v=t.value,g=void 0===v?[]:v;if(g=Object(T.toArray)(g),m||(m=g.length),!o&&m&&(o=m/u)%1>0)throw new ReferenceError("Invalid size or elements");if(!n||!m)throw new ReferenceError("Invalid shader constant definition: invalid inputs");var w=new e;if(w.name=n,w.dimension=o,w.isAutoregister=l,w.elements=u,w.type=h,w.isSRGB=f,w.size=m,e.IgnoreOffset.includes(w.name))w.defaults=null;else for(var x=0;x<w.size;x++)w.defaults[x]=void 0!==g[x]?g[x]:0;return w.offset=d,w}},{key:"fromCCPBinary",value:function(t,r){var n=new e;return n.name=r.ReadString(),n.offset=t.ReadUInt32()/4,n.size=t.ReadUInt32()/4,n.type=t.ReadUInt8(),n.dimension=t.ReadUInt8(),n.elements=t.ReadUInt32(),n.isSRGB=t.ReadUInt8(),n.isAutoregister=t.ReadUInt8(),n}}],(r=[{key:"string",get:function(){return Object(T.getKeyFromValue)(e.Type,this.type,"UNKNOWN")}}])&&R(t.prototype,r),n&&R(t,n),e}(),j.IgnoreOffset=["PerFrameVS","PerObjectVS","PerFramePS","PerObjectPS","PerObjectPSInt"],j.Type={PARAMETER:0,UNKNOWN_1:1,UNKNOWN_2:2,PER:3},b=P((m=E).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=P(m.prototype,"dimension",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=P(m.prototype,"elements",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=P(m.prototype,"isAutoregister",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=P(m.prototype,"isSRGB",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=P(m.prototype,"offset",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),_=P(m.prototype,"size",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=P(m.prototype,"type",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=P(m.prototype,"defaults",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=m))||y)},"./core/shader/Tw2ShaderStageTexture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderStageTexture",(function(){return x}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js"),h=r("./global/constant/d3d.js");function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var x=(n=b.meta.type("Tw2ShaderStageTexture"),i=b.meta.string,o=b.meta.uint,a=b.meta.uint,u=b.meta.uint,c=b.meta.uint,n((f=w((s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"name",f,this),v(this,"isAutoregister",p,this),v(this,"isSRGB",d,this),v(this,"registerIndex",y,this),v(this,"type",m,this)}var t,r,n;return t=e,n=[{key:"fromJSON",value:function(t,r){var n=new e;if(Object(b.assignIfExists)(n,t,["name","registerIndex","type","isSRGB","isAutoregister"]),-1===n.registerIndex||0===n.glType)throw new ReferenceError("Invalid shader texture definition");return n}},{key:"fromCCPBinary",value:function(t,r){var n=new e;return n.registerIndex=t.ReadUInt8(),n.name=r.ReadString(),n.type=t.ReadUInt8(),n.isSRGB=t.ReadUInt8(),n.isAutoregister=t.ReadUInt8(),n}}],(r=[{key:"glType",get:function(){return this.type in h.TexTypeToGLTexture?h.TexTypeToGLTexture[this.type]:0}},{key:"isVolume",get:function(){return this.type===h.TEX_VOLUME}},{key:"string",get:function(){return this.type in h.TexTypeToString?h.TexTypeToString[this.type]:"UNKNOWN"}}])&&g(t.prototype,r),n&&g(t,n),e}()).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=w(s.prototype,"isAutoregister",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=w(s.prototype,"isSRGB",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=w(s.prototype,"registerIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),m=w(s.prototype,"type",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),l=s))||l)},"./core/shader/Tw2ShaderState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderState",(function(){return y}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var y=(n=s.meta.type("Tw2ShaderState"),i=s.meta.float,o=s.meta.float,n((c=d((u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"state",c,this),f(this,"value",l,this)}var t,r,n;return t=e,n=[{key:"fromJSON",value:function(t){var r=new e;return void 0!==t.state&&(r.state=t.state),void 0!==t.value&&(r.value=t.value),r}},{key:"fromCCPBinary",value:function(t){var r=new e;return r.state=t.ReadUInt32(),r.value=t.ReadUInt32(),r}}],(r=null)&&p(t.prototype,r),n&&p(t,n),e}()).prototype,"state",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),l=d(u.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),a=u))||a)},"./core/shader/Tw2ShaderTechnique.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderTechnique",(function(){return m}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js"),f=r("./core/shader/Tw2ShaderPass.js");function p(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var m=(n=s.meta.type("Tw2ShaderTechnique"),i=s.meta.string,o=s.meta.list("Tw2ShaderPass"),n((c=y((u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"name",c,this),p(this,"passes",l,this)}var t,r,n;return t=e,n=[{key:"fromJSON",value:function(t,r,n){var i=t.name,o=void 0===i?n:i,a=t.passes,u=new e;u.name=o,a||(a=[t]);for(var c=0;c<a.length;c++)u.passes.push(f.Tw2ShaderPass.fromJSON(a[c],r));return u}},{key:"fromCCPBinary",value:function(t,r,n){var i=new e;i.name=n;for(var o=t.ReadUInt8(),a=0;a<o;a++)i.passes.push(f.Tw2ShaderPass.fromCCPBinary(t,r));return i}}],(r=[{key:"GetParameterNames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t&&t.pass)return this.passes[t.pass]?this.passes[t.pass].GetParameterNames(e,t):e;for(var r=0;r<this.passes.length;r++)this.passes[r].GetParameterNames(e,t);return e}},{key:"HasConstant",value:function(e){for(var t=0;t<this.passes.length;t++)if(this.passes[t].HasConstant(e))return!0;return!1}},{key:"HasTexture",value:function(e){for(var t=0;t<this.passes.length;t++)if(this.passes[t].HasTexture(e))return!0;return!1}},{key:"HasSampler",value:function(e){for(var t=0;t<this.passes.length;t++)if(this.passes[t].HasSampler(e))return!0;return!1}}])&&d(t.prototype,r),n&&d(t,n),e}()).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=y(u.prototype,"passes",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=u))||a)},"./core/shader/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/shader/Tw2Shader.js");r.d(t,"Tw2Shader",(function(){return n.Tw2Shader})),r.d(t,"ErrShaderCompile",(function(){return n.ErrShaderCompile})),r.d(t,"ErrShaderLink",(function(){return n.ErrShaderLink}));var i=r("./core/shader/Tw2ShaderAnnotation.js");r.d(t,"Tw2ShaderAnnotation",(function(){return i.Tw2ShaderAnnotation}));var o=r("./core/shader/Tw2ShaderPass.js");r.d(t,"Tw2ShaderPass",(function(){return o.Tw2ShaderPass}));var a=r("./core/shader/Tw2ShaderPermutation.js");r.d(t,"Tw2ShaderPermutation",(function(){return a.Tw2ShaderPermutation})),r.d(t,"ErrShaderPermutationOptionInvalid",(function(){return a.ErrShaderPermutationOptionInvalid}));var u=r("./core/shader/Tw2ShaderProgram.js");r.d(t,"Tw2ShaderProgram",(function(){return u.Tw2ShaderProgram}));var c=r("./core/shader/Tw2ShaderStage.js");r.d(t,"Tw2ShaderStage",(function(){return c.Tw2ShaderStage}));var l=r("./core/shader/Tw2ShaderStageConstant.js");r.d(t,"Tw2ShaderStageConstant",(function(){return l.Tw2ShaderStageConstant}));var s=r("./core/shader/Tw2ShaderStageTexture.js");r.d(t,"Tw2ShaderStageTexture",(function(){return s.Tw2ShaderStageTexture}));var f=r("./core/shader/Tw2ShaderState.js");r.d(t,"Tw2ShaderState",(function(){return f.Tw2ShaderState}));var p=r("./core/shader/Tw2ShaderTechnique.js");r.d(t,"Tw2ShaderTechnique",(function(){return p.Tw2ShaderTechnique}))},"./core/shader/shaderOverrides.json":function(e){e.exports=JSON.parse('{"blinkinglightspool":{"r0.xy=r0.xx*c[0+a0.x].xy;":"if(a0.x==0){r0.xy=r0.xx*c[0].xy;}else if(a0.x==1){r0.xy=r0.xx*c[1].xy;}else if(a0.x==2){r0.xy=r0.xx*c[2].xy;}else if(a0.x==3){r0.xy=r0.xx*c[3].xy;}else if(a0.x==4){r0.xy=r0.xx*c[4].xy;}","texcoord=r3.zzww*c[0+a0.x].zwzz;":"if(a0.x==0){texcoord=r3.zzww*c[0].zwzz;}else if(a0.x==1){texcoord=r3.zzww*c[1].zwzz;}else if(a0.x==2){texcoord=r3.zzww*c[2].zwzz;}else if(a0.x==3){texcoord=r3.zzww*c[3].zwzz;}else if(a0.x==4){texcoord=r3.zzww*c[4].zwzz;}","v0=color":"v0=color;v0.w=0.5"},"boostervolumetric":{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<12;++i){"},"fxarmorimpactv5":{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<255;++i){"},"flarequad":{"r1.xyz=r0.zzw*c[0+a0.x].xyx;":"if(a0.x==0){r1.xyz=r0.zzw*c[0].xyx;}else if(a0.x==1){r1.xyz=r0.zzw*c[1].xyx;}else if(a0.x==2){r1.xyz=r0.zzw*c[2].xyx;}else if (a0.x==3){r1.xyz=r0.zzw*c[3].xyx;}else if(a0.x==4){r1.xyz=r0.zzw*c[4].xyx;}else if(a0.x==5){r1.xyz=r0.zzw*c[5].xyx;}","texcoord.xyw=r0.zzw*c[0+a0.x].zwz;":"if(a0.x==0){texcoord.xyw=r0.zzw*c[0].zwz;}else if(a0.x==1){texcoord.xyw=r0.zzw*c[1].zwz;}else if(a0.x==2){texcoord.xyw=r0.zzw*c[2].zwz;}else if(a0.x==3){texcoord.xyw=r0.zzw*c[3].zwz;}else if(a0.x==4){texcoord.xyw=r0.zzw*c[4].zwz;}else if(a0.x==5){texcoord.xyw=r0.zzw*c[5].zwz;}","r0.x=saturate(sqrt(abs(r0.x)));":"r0.x=clamp(sqrt(abs(r0.x)),0.0,1.0);"},"flarequadsoft":{"r1.xyz=r0.zzw*c[0+a0.x].xyx;":"if(a0.x==0){r1.xyz=r0.zzw*c[0].xyx;}else if(a0.x==1){r1.xyz=r0.zzw*c[1].xyx;}else if(a0.x==2){r1.xyz=r0.zzw*c[2].xyx;}else if (a0.x==3){r1.xyz=r0.zzw*c[3].xyx;}else if(a0.x==4){r1.xyz=r0.zzw*c[4].xyx;}else if(a0.x==5){r1.xyz=r0.zzw*c[5].xyx;}","texcoord.xyw=r0.zzw*c[0+a0.x].zwz;":"if(a0.x==0){texcoord.xyw=r0.zzw*c[0].zwz;}else if(a0.x==1){texcoord.xyw=r0.zzw*c[1].zwz;}else if(a0.x==2){texcoord.xyw=r0.zzw*c[2].zwz;}else if(a0.x==3){texcoord.xyw=r0.zzw*c[3].zwz;}else if(a0.x==4){texcoord.xyw=r0.zzw*c[4].zwz;}else if(a0.x==5){texcoord.xyw=r0.zzw*c[5].zwz;}","r0.x=saturate(sqrt(abs(r0.x)));":"r0.x=clamp(sqrt(abs(r0.x)),0.0,1.0);"},"motionfx":{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<8;++i){"},"ubershaderquad":{"r0.xyz=c[0+a0.x].xyx*r0.zzw+r0.wwz;":"if(a0.x==0){r0.xyz=c[0].xyx*r0.zzw+r0.wwz;texcoord.xy=c[0].zw;}else if(a0.x==1){r0.xyz=c[1].xyx*r0.zzw+r0.wwz;texcoord.xy=c[1].zw;}else if(a0.x==2){r0.xyz=c[2].xyx*r0.zzw+r0.wwz;}else if(a0.x==3){r0.xyz=c[3].xyx*r0.zzw+r0.wwz;}","texcoord.xy=c[0+a0.x].zw;":"if(a0.x==0){texcoord.xy=c[0].zw;}else if(a0.x==1){texcoord.xy=c[1].zw;}else if(a0.x==2){texcoord.xy=c[2].zw;}else if(a0.x==3){texcoord.xy=c[3].zw;}"},"avatarcombined.vertex":{"uniform vec4 cb0[204];":"uniform vec4 cb0[204];\\nuniform vec4 cb3[26];\\n"},"avatarcombined.fragment":{"for(int i=0;i<i15.x;++i){":"for(int i=0;i<0;++i){"},"fxshieldimpactv5.fragment":{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<255;++i){"},"distortion.fragment":{"r0.z=r0.z*c1.z;":"r0.z=r0.z/c1.z;","r0.z=1.0/r0.z;":"r0.z=1.0*r0.z;"},"atmosphere":{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<2;++i){"}}')},"./core/store/Tw2ConstructorStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ConstructorStore",(function(){return m}));var n=r("./core/store/Tw2GenericStore.js"),i=r("./global/utils/index.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,r,o,c=f(p);function p(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),e=c.call(this),n.STORE.get(d(e)).DEBUG_ENABLED=!1,e}return t=p,o=[{key:"isValue",value:function(e){return Object(i.isFunction)(e)}},{key:"onBefore",value:function(e,t,r){"DEBUG_ENABLED"in e&&(e.DEBUG_ENABLED=n.STORE.get(r).DEBUG_ENABLED)}}],(r=[{key:"SetDebugMode",value:function(e){var t=n.STORE.get(this);t.DEBUG_ENABLED=e;var r,i=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw o}}}}(t.map);try{for(i.s();!(r=i.n()).done;){var o=a(r.value,2),c=(o[0],o[1]);"DEBUG_ENABLED"in c&&(c.DEBUG_ENABLED=e)}}catch(e){i.e(e)}finally{i.f()}}},{key:"GetDebugMode",value:function(){return n.STORE.get(this).DEBUG_ENABLED}}])&&l(t.prototype,r),o&&l(t,o),p}(n.Tw2GenericStore);m.isConstructorStore=!0,m.storeName="Constructor"},"./core/store/Tw2GenericStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"STORE",(function(){return h})),r.d(t,"Tw2GenericStore",(function(){return v})),r.d(t,"ErrStoreKeyReserved",(function(){return w})),r.d(t,"ErrStoreValueInvalid",(function(){return x})),r.d(t,"ErrStoreKeyUnregistered",(function(){return _}));var n=r("./global/utils/index.js"),i=r("./core/Tw2Error.js"),o=r("./core/Tw2EventEmitter.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=new WeakMap,v=function(e){f(a,e);var t,r,i,o=d(a);function a(){var e;return l(this,a),e=o.call(this),h.set(m(e),{map:new Map}),e}return t=a,i=[{key:"isValue",value:function(e){return!0}}],(r=[{key:"Set",value:function(e,t){var r=this.constructor,n=r.storeName;if(r.isValue&&!r.isValue(t))throw new x({storeName:n,key:e});if(r.restrictedKeys&&r.restrictedKeys.includes(e))throw new w({storeName:n,key:e});if(r.onBefore){var i=r.onBefore(t,e,this);i&&(t=i)}return h.get(this).map.set(e,t),this.EmitEvent("stored",{key:e,value:t}),t}},{key:"Get",value:function(e){var t=this.constructor,r=t.isConstructorStore,n=t.storeName,i=u(g(this,e,r),2),o=i[0],a=i[1];if(!a){var c=h.get(this);throw c.missing||(c.missing=[]),c.missing.includes(e)||(c.missing.push(e),this.EmitEvent("missing",{key:e})),new _({storeName:n,key:e})}return o!==e&&this.EmitEvent("substitute",{original:e,substitute:o}),a}},{key:"Has",value:function(e){return!!g(this,e,this.constructor.isConstructorStore)[1]}},{key:"Register",value:function(e){e=Object(n.toArray)(e);for(var t=0;t<e.length;t++)for(var r in e[t])e[t].hasOwnProperty(r)&&this.Set(r,e[t][r])}},{key:"GetMissing",value:function(){var e=h.get(this).missing;return e?Array.from(e):[]}}])&&s(t.prototype,r),i&&s(t,i),a}(o.Tw2EventEmitter);function g(e,t,r){var i=h.get(e).map;if(i.has(t))return[t,i.get(t)];if(r&&Object(n.isTr2OrTri)(t)){var o=Object(n.toTw2)(t);if(i.has(o))return[o,i.get(o)]}return[t]}v.onBefore=null,v.isConstructorStore=!1,v.restrictedKeys=null,v.storeName="Generic";var w=function(e){f(r,e);var t=d(r);function r(e){return l(this,r),t.call(this,e,"'%storeName%' store key restricted (%key%)")}return r}(i.Tw2Error),x=function(e){f(r,e);var t=d(r);function r(e){return l(this,r),t.call(this,e,"'%storeName%' store value invalid (%key%)")}return r}(i.Tw2Error),_=function(e){f(r,e);var t=d(r);function r(e){return l(this,r),t.call(this,e,"'%storeName%' store key is unregistered (%key%)")}return r}(i.Tw2Error)},"./core/store/Tw2ResourceDynamicPathStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ResourceDynamicPathStore",(function(){return d}));var n=r("./core/store/Tw2GenericStore.js"),i=r("./global/utils/index.js"),o=r("./core/store/Tw2ResourcePathStore.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(f,e);var t,r,n,a=s(f);function f(){return u(this,f),a.apply(this,arguments)}return t=f,n=[{key:"isValue",value:function(e){return Object(i.isArray)(e)}},{key:"onBefore",value:function(e){e=Array.from(e);for(var t=0;t<e.length;t++)e[t]=o.Tw2ResourcePathStore.normalizePath(e[t]);return e}}],(r=null)&&c(t.prototype,r),n&&c(t,n),f}(n.Tw2GenericStore);d.storeName="Dynamic resource path"},"./core/store/Tw2ResourceExtensionStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ResourceExtensionStore",(function(){return d}));var n=r("./core/store/Tw2GenericStore.js"),i=r("./global/utils/index.js"),o=r("./core/store/Tw2ResourcePathStore.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(f,e);var t,r,n,a=s(f);function f(){return u(this,f),a.apply(this,arguments)}return t=f,n=[{key:"isValue",value:function(e){return Object(i.isFunction)(e)}}],(r=[{key:"IsLoadingObject",value:function(e){return this.Get(e).isLoadingObject}},{key:"FromPath",value:function(e){if(!(e=o.Tw2ResourcePathStore.normalizePath(e)))throw new TypeError("Expected string");return this.Get(Object(i.getPathExtension)(e))}}])&&c(t.prototype,r),n&&c(t,n),f}(n.Tw2GenericStore);d.isConstructorStore=!0,d.storeName="Resource extension"},"./core/store/Tw2ResourcePathStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ResourcePathStore",(function(){return y})),r.d(t,"ErrStorePathUndefined",(function(){return m}));var n=r("./core/store/Tw2GenericStore.js"),i=r("./global/utils/index.js"),o=r("./core/Tw2Error.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){l(a,e);var t,r,n,o=f(a);function a(){return u(this,a),o.apply(this,arguments)}return t=a,n=[{key:"isValue",value:function(e){return Object(i.isString)(e)}},{key:"onBefore",value:function(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),this.normalizePath(e)}},{key:"normalizePath",value:function(e){return e=(e=e.toLowerCase()).replace("\\","/")}}],(r=[{key:"Resolve",value:function(e){var t=(e=a.normalizePath(e)).indexOf(":/");if(-1===t)throw new m({path:e});var r=e.substr(0,t);return"http"===r||"https"===r?e:this.Get(r)+e.substr(t+2)}}])&&c(t.prototype,r),n&&c(t,n),a}(n.Tw2GenericStore);y.storeName="Resource path",y.restrictedKeys=["rgba","manual","dynamic"];var m=function(e){l(r,e);var t=f(r);function r(e){return u(this,r),t.call(this,e,"Undefined resource prefix")}return r}(o.Tw2Error)},"./core/store/Tw2SchemaStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SchemaStore",(function(){return d}));var n=r("./core/store/Tw2GenericStore.js"),i=r("./global/utils/type.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(f,e);var t,r,n,o=s(f);function f(){return a(this,f),o.apply(this,arguments)}return t=f,n=[{key:"isValue",value:function(e){return Object(i.isPlain)(e)}}],(r=[{key:"Set",value:function(e,t){if(Object(i.isArray)(e))for(var r=0;r<e.length;r++)this.Set(e[r],t);else c(p(f.prototype),"Set",this).call(this,e,t)}}])&&u(t.prototype,r),n&&u(t,n),f}(n.Tw2GenericStore);d.storeName="Schema"},"./core/store/Tw2VariableStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VariableStore",(function(){return d}));var n=r("./core/store/Tw2GenericStore.js"),i=r("./global/utils/index.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(d,e);var t,r,o,s=l(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),t=s.call(this),n.STORE.get(f(t)).typeStore=e,t}return t=d,o=[{key:"isValue",value:function(e){return e&&Object(i.isFunction)(e.GetValue)&&Object(i.isFunction)(e.SetValue)}}],(r=[{key:"Set",value:function(e,t){return Object(i.isPlain)(t)||(t=this.Create(e,t)),u(p(d.prototype),"Set",this).call(this,e,t)}},{key:"Create",value:function(e,t,r){if(Object(i.isPlain)(t)&&(r=t.Type||t.type,t=t.value),Object(i.isFunction)(r))return new r(e,t);var o=n.STORE.get(this).typeStore;return Object(i.isString)(r)&&(r=o.Get(r)),r||(r=o.GetByValue(t)),new r(e,t)}},{key:"SetValue",value:function(e,t,r){return this.Get(e).SetValue(t,r)}},{key:"GetValue",value:function(e,t){return this.Get(e).GetValue(t)}}])&&a(t.prototype,r),o&&a(t,o),d}(n.Tw2GenericStore);d.storeName="Variable"},"./core/store/Tw2VariableTypeStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VariableTypeStore",(function(){return h})),r.d(t,"ErrStoreVariableTypeNotFoundByValue",(function(){return v}));var n=r("./core/store/Tw2GenericStore.js"),i=r("./global/utils/index.js"),o=r("./core/Tw2Error.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){p(l,e);var t,r,o,a=y(l);function l(){return s(this,l),a.apply(this,arguments)}return t=l,o=[{key:"isValue",value:function(e){return Object(i.isFunction)(e)}}],(r=[{key:"GetByValue",value:function(e){var t,r=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(n.STORE.get(this).map);try{for(r.s();!(t=r.n()).done;){var i=u(t.value,2),o=(i[0],i[1]);if("isValue"in o&&o.isValue(e))return o}}catch(e){r.e(e)}finally{r.f()}throw new v({value:e})}}])&&f(t.prototype,r),o&&f(t,o),l}(n.Tw2GenericStore);h.isConstructorStore=!0,h.storeName="Variable Type";var v=function(e){p(r,e);var t=y(r);function r(e){return s(this,r),t.call(this,e,"Could not identify variable type from value (%value%)")}return r}(o.Tw2Error)},"./core/store/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/store/Tw2GenericStore.js");r.d(t,"Tw2GenericStore",(function(){return n.Tw2GenericStore}));var i=r("./core/store/Tw2ConstructorStore.js");r.d(t,"Tw2ConstructorStore",(function(){return i.Tw2ConstructorStore}));var o=r("./core/store/Tw2VariableTypeStore.js");r.d(t,"Tw2VariableTypeStore",(function(){return o.Tw2VariableTypeStore})),r.d(t,"ErrStoreVariableTypeNotFoundByValue",(function(){return o.ErrStoreVariableTypeNotFoundByValue}));var a=r("./core/store/Tw2VariableStore.js");r.d(t,"Tw2VariableStore",(function(){return a.Tw2VariableStore}));var u=r("./core/store/Tw2ResourcePathStore.js");r.d(t,"Tw2ResourcePathStore",(function(){return u.Tw2ResourcePathStore})),r.d(t,"ErrStorePathUndefined",(function(){return u.ErrStorePathUndefined}));var c=r("./core/store/Tw2SchemaStore.js");r.d(t,"Tw2SchemaStore",(function(){return c.Tw2SchemaStore}));var l=r("./core/store/Tw2ResourceDynamicPathStore.js");r.d(t,"Tw2ResourceDynamicPathStore",(function(){return l.Tw2ResourceDynamicPathStore}));var s=r("./core/store/Tw2ResourceExtensionStore.js");r.d(t,"Tw2ResourceExtensionStore",(function(){return s.Tw2ResourceExtensionStore}))},"./core/value/Tw2Float.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Float",(function(){return S}));var n,i,o,a,u,c,l=r("./global/utils/index.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v,g,w,x,_,z,S=(n=l.meta.type("Tw2Float","TriFloat"),i=l.meta.float,n((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(r,e);var t=y(r);function r(){var e;p(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return f(e=t.call.apply(t,[this].concat(i)),"value",u,b(e)),e}return r}(l.meta.Model),v=(a=c).prototype,g="value",w=[i],x={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}},z={},Object.keys(x).forEach((function(e){z[e]=x[e]})),z.enumerable=!!z.enumerable,z.configurable=!!z.configurable,("value"in z||z.initializer)&&(z.writable=!0),z=w.slice().reverse().reduce((function(e,t){return t(v,g,e)||e}),z),_&&void 0!==z.initializer&&(z.value=z.initializer?z.initializer.call(_):void 0,z.initializer=void 0),void 0===z.initializer&&(Object.defineProperty(v,g,z),z=null),u=z,o=a))||o)},"./core/value/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/value/Tw2Float.js");r.d(t,"Tw2Float",(function(){return n.Tw2Float}))},"./core/vertex/Tw2VertexDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VertexDeclaration",(function(){return b}));var n,i,o,a,u,c,l,s,f=r("./global/utils/index.js"),p=r("./core/vertex/Tw2VertexElement.js");function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var b=(n=f.meta.type("Tw2VertexDeclaration"),i=f.meta.list("Tw2VertexElement"),o=f.meta.list("Tw2VertexElement"),a=f.meta.isPrivate,n((l=m((c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"elements",l,this),d(this,"elementsSorted",s,this)}var t,r,n;return t=e,n=[{key:"CompareDeclarationElements",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.usage<t.usage?-1:e.usage>t.usage?1:e.usageIndex+r<t.usageIndex?-1:e.usageIndex+r>t.usageIndex?1:0}},{key:"from",value:function(t,r){var n=new e;if(t){for(var i=0,o=0;o<t.length;o++)t[o].offset=i,n.elements.push(p.Tw2VertexElement.from(t[o])),i+=4*t[o].elements;r&&r.skipUpdate||n.RebuildHash()}return n}}],(r=[{key:"UpdateValues",value:function(){this.RebuildHash()}},{key:"Clear",value:function(){this.elements.splice(0,this.elements.length),this.RebuildHash()}},{key:"SetStride",value:function(e){return this.stride=e,this}},{key:"RebuildHash",value:function(){this.elementsSorted.splice(0,this.elementsSorted.length);for(var t=0;t<this.elements.length;++t)this.elementsSorted.push(this.elements[t]);this.elementsSorted.sort(e.CompareDeclarationElements)}},{key:"HasUsage",value:function(e,t){return null!==this.FindUsage(e,t)}},{key:"FindUsage",value:function(e,t){for(var r=0;r<this.elementsSorted.length;++r){var n=this.elementsSorted[r];if(n.usage===e){if(n.usageIndex===t)return n;if(n.usageIndex>t)return null}if(n.usage>e)return null}return null}},{key:"SetDeclaration",value:function(t,r,n){for(var i=t.gl,o=0,a=0;a<r.elementsSorted.length;++a){var u=r.elementsSorted[a];if(!(u.location<0))for(;;){if(o>=this.elementsSorted.length){i.disableVertexAttribArray(u.location),i.vertexAttrib4f(u.location,0,0,0,0);break}var c=this.elementsSorted[o],l=e.CompareDeclarationElements(c,u);if(l>0){i.disableVertexAttribArray(u.location),i.vertexAttrib4f(u.location,0,0,0,0);break}if(0===l){c.customSetter?c.customSetter(u):(i.enableVertexAttribArray(u.location),i.vertexAttribPointer(u.location,c.elements,c.type,!1,n,c.offset));break}o++}}return!0}},{key:"SetPartialDeclaration",value:function(t,r,n,i,o){for(var a=t.gl,u=[],c=0,l=0;l<r.elementsSorted.length;++l){var s=r.elementsSorted[l];if(!(s.location<0))for(;;){var f=this.elementsSorted[c],p=e.CompareDeclarationElements(f,s,i);if(0===p){f.customSetter?f.customSetter(s):(a.enableVertexAttribArray(s.location),a.vertexAttribPointer(s.location,f.elements,f.type,!1,n,f.offset),a.vertexAttribDivisor(s.location,o),o&&u.push(s.location));break}if(p>0){o||(a.disableVertexAttribArray(s.location),a.vertexAttrib4f(s.location,0,0,0,0));break}if(++c>=this.elementsSorted.length)return o||(a.disableVertexAttribArray(s.location),a.vertexAttrib4f(s.location,0,0,0,0)),u}}return u}},{key:"ResetInstanceDivisors",value:function(e,t){if(t)for(var r=0;r<t.length;++r)e.gl.vertexAttribDivisor(t[r],0)}}])&&y(t.prototype,r),n&&y(t,n),e}()).prototype,"elements",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=m(c.prototype,"elementsSorted",[o,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=c))||u)},"./core/vertex/Tw2VertexElement.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VertexElement",(function(){return j}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w=r("./global/utils/index.js"),x=r("./global/constant/index.js");function _(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=w.meta.type("Tw2VertexElement"),i=w.meta.uint,o=w.meta.uint,a=w.meta.uint,u=w.meta.uint,c=w.meta.uint,l=w.meta.uint,n((g=v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.customSetter=null,_(this,"elements",p,this),_(this,"location",d,this),_(this,"offset",y,this),_(this,"type",m,this),_(this,"usage",b,this),_(this,"usageIndex",h,this),this._registerIndex=null,this._usedMask=null,this._attr=null}var t,r,n;return t=e,n=[{key:"from",value:function(t){var r=new e;if(t){var n=t.usage,i=t.usageIndex;if(r.usage=Object(w.isString)(n)?this.Type[n.toUpperCase()]:n,r.usageIndex=i,Object(w.isNoU)(r.usage))throw new Error("Invalid vertex usage: ".concat(n));var o=t.elements,a=void 0===o?null:o,u=t.offset,c=void 0===u?0:u,l=t.location,s=void 0===l?null:l,f=t.customSetter,p=void 0===f?null:f;r.offset=c,r.elements=a,r.location=s,r.customSetter=p;var d=t.type,y=void 0===d?x.GL_FLOAT:d;if(Object(w.isString)(y)&&("GL_"!==y.substring(0,3)&&(y="GL_"+y),void 0===(y=x[y])))throw new ReferenceError("Invalid gl type: ".concat(y));r.type=y;var m=t.registerIndex,b=void 0===m?null:m,h=t.usedMask,v=void 0===h?null:h,g=t.attr,_=void 0===g?null:g;r._registerIndex=b,r._usedMask=v,r._attr=_}return r}}],(r=[{key:"string",get:function(){return Object(w.getKeyFromValue)(this.constructor.Type,this.usage,"UNKNOWN")}}])&&z(t.prototype,r),n&&z(t,n),e}(),v.Type={POSITION:0,COLOR:1,NORMAL:2,TANGENT:3,BINORMAL:4,TEXCOORD:5,BLENDWEIGHT:6,BLENDINDICES:7,BITANGENT:4,BLENDWEIGHTS:6,BLENDINDICE:7},p=S((f=g).prototype,"elements",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=S(f.prototype,"location",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S(f.prototype,"offset",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=S(f.prototype,"type",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=S(f.prototype,"usage",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),h=S(f.prototype,"usageIndex",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=f))||s)},"./core/vertex/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/vertex/Tw2VertexDeclaration.js");r.d(t,"Tw2VertexDeclaration",(function(){return n.Tw2VertexDeclaration}));var i=r("./core/vertex/Tw2VertexElement.js");r.d(t,"Tw2VertexElement",(function(){return i.Tw2VertexElement}))},"./curve/Tw2CurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSet",(function(){return I}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j=r("./global/utils/index.js");function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var i=C(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}function A(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var I=(n=j.meta.type("Tw2CurveSet","TriCurveSet"),i=j.meta.string,o=j.meta.list("Tw2ValueBinding"),a=j.meta.list("Tw2Curve"),u=j.meta.boolean,c=j.meta.notImplemented,l=j.meta.list("TriCurveSetRange"),s=j.meta.float,f=j.meta.notImplemented,p=j.meta.boolean,d=j.meta.float,n((S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(o,e);var t,r,n,i=D(o);function o(){var e;O(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return T(e=i.call.apply(i,[this].concat(r)),"name",b,M(e)),T(e,"bindings",h,M(e)),T(e,"curves",v,M(e)),T(e,"playOnLoad",g,M(e)),T(e,"ranges",w,M(e)),T(e,"scale",x,M(e)),T(e,"useSimTimeRebase",_,M(e)),T(e,"scaledTime",z,M(e)),e._isPlaying=!1,e}return t=o,(r=[{key:"Initialize",value:function(){this.playOnLoad&&this.Play()}},{key:"Play",value:function(){this._isPlaying=!0,this.scaledTime=0}},{key:"PlayFrom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._isPlaying=!0,this.scaledTime=e*this.scale}},{key:"Stop",value:function(){this._isPlaying=!1}},{key:"Update",value:function(e){if(this._isPlaying){this.scaledTime+=e*this.scale;for(var t=0;t<this.curves.length;++t)this.curves[t].UpdateValue(this.scaledTime);for(var r=0;r<this.bindings.length;++r)this.bindings[r].CopyValue()}}},{key:"GetRangeByName",value:function(e){for(var t=0;t<this.ranges.length;t++)if(this.ranges[t].name===e)return this.ranges[t];return null}},{key:"GetMaxCurveDuration",value:function(){for(var e=0,t=0;t<this.curves.length;++t)"GetLength"in this.curves[t]&&(e=Math.max(e,this.curves[t].GetLength()));return e}}])&&R(t.prototype,r),n&&R(t,n),o}(j.meta.Model),b=k((m=S).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=k(m.prototype,"bindings",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=k(m.prototype,"curves",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=k(m.prototype,"playOnLoad",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=k(m.prototype,"ranges",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=k(m.prototype,"scale",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=k(m.prototype,"useSimTimeRebase",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=k(m.prototype,"scaledTime",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=m))||y)},"./curve/Tw2ValueBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ValueBinding",(function(){return I})),r.d(t,"ErrBindingValueUndefined",(function(){return L})),r.d(t,"ErrBindingType",(function(){return G})),r.d(t,"ErrBindingReference",(function(){return F}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_=r("./global/utils/index.js"),z=r("./global/math/index.js"),S=r("./core/index.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var i=C(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}function A(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var I=(n=_.meta.type("Tw2ValueBinding","TriValueBinding"),i=_.meta.string,o=_.meta.string,a=_.meta.struct(),u=_.meta.vector4,c=_.meta.float,l=_.meta.string,s=_.meta.struct(),n((x=w=function(e){R(o,e);var t,r,n,i=D(o);function o(){var e;T(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(e=i.call.apply(i,[this].concat(r)),"name",d,M(e)),E(e,"destinationAttribute",y,M(e)),E(e,"destinationObject",m,M(e)),E(e,"offset",b,M(e)),E(e,"scale",h,M(e)),E(e,"sourceAttribute",v,M(e)),E(e,"sourceObject",g,M(e)),e._copyFunc=null,e._destinationElement=null,e._destinationIsArray=null,e._destinationIsRGBA=null,e._sourceElement=null,e._sourceIsArray=null,e._sourceIsRGBA=null,e}return t=o,n=[{key:"GetAttribute",value:function(e,t,r,n){if(e instanceof S.Tw2Vector4Parameter&&"value"===t)switch(r){case 0:return"v0";case 1:return"v1";case 2:return"v2";case 3:return"v4";default:return t}switch(r){case 0:return t+n?".r":".x";case 1:return t+n?".g":".y";case 2:return t+n?".b":".z";case 3:return t+n?".a":".w";default:if(Object(_.isArrayLike)(r)){for(var i=".",o=0;o<r.length;o++){var a=Object(_.getKeyFromValue)(this.CharacterSwizzle,r[o]);if(void 0===a)throw new Error("Unknown swizzle source: "+r[o]);i+=a}return t+i}return t}}},{key:"GetTargets",value:function(e,t,r,n){return void 0!==r&&void 0===n&&(n=t.toUpperCase().includes("COLOR")),{object:e,attribute:t=this.GetAttribute(e,t,r,n)}}},{key:"FromAttribute",value:function(e){var t=o.Vector4Swizzle,r=o.CharacterSwizzle,n=e.split(".")[1];if(!n||!n.length)return{attr:e,element:null,swizzle:null};if((n=n.toLowerCase())in t)return{attr:"value",element:t[n],swizzle:n};if(n in r)return{attr:e.substring(0,e.length-2),element:r[n],swizzle:n};if(1===n.length)throw new Error("Invalid swizzle: "+n);for(var i=[],a=0;a<n.length;a++)if(i[a]=r[n[a].toLowerCase()],void 0===i[a])throw new Error("Invalid swizzle: "+n);return{attr:e.substring(0,e.length-n.length-1),element:i,swizzle:n}}},{key:"CopySwizzledArrays",value:function(e){for(var t=e.sourceObject[e.sourceAttribute],r=e.destinationObject[e.destinationAttribute],n=e._sourceElement,i=e._destinationElement,o=Math.min(n.length,i.length),a=0;a<o;a++){if(void 0===r[i[a]]||void 0===t[n[a]])throw new Error("Invalid swizzle(s)");r[i[a]]=t[n[a]]*e.scale+e.offset[0]}}},{key:"CopyValueToValue",value:function(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[0]}},{key:"CopyArray",value:function(e){for(var t=Math.min(e.destinationObject[e.destinationAttribute].length,e.sourceObject[e.sourceAttribute].length),r=0;r<t;++r)e.destinationObject[e.destinationAttribute][r]=e.sourceObject[e.sourceAttribute][r]*e.scale+e.offset[r]}},{key:"CopyElementToElement",value:function(e){e.destinationObject[e.destinationAttribute][e._destinationElement]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[0]}},{key:"ReplicateValue",value:function(e){for(var t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[t]}},{key:"ReplicateElement",value:function(e){for(var t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[t]}},{key:"ExtractPos",value:function(e){for(var t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute][t+12]*e.scale+e.offset[t]}},{key:"CopyElementToValue",value:function(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[0]}},{key:"CopyValueToElement",value:function(e){e.destinationObject[e.destinationAttribute][e._destinationElement]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[0]}},{key:"CopyFloatToBoolean",value:function(e){e.destinationObject[e.destinationAttribute]=0!==e.sourceObject[e.sourceAttribute]}},{key:"CopyBooleanToFloat",value:function(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute]?1:0}}],(r=[{key:"Initialize",value:function(){this.UpdateValues()}},{key:"OnValueChanged",value:function(){if(null===this._copyFunc&&this.sourceObject&&""!==this.sourceAttribute&&this.destinationObject&&""!==this.destinationAttribute){var e=!1,t=!1,r=o.FromAttribute(this.sourceAttribute);r.swizzle&&(e=!0,this._sourceElement=r.element,this._sourceIsRGBA=["r","g","b","a"].includes(r.swizzle),this.sourceAttribute=r.attr);var n=o.FromAttribute(this.destinationAttribute);n.swizzle&&(t=!0,this._destinationElement=n.element,this._sourceIsRGBA=["r","g","b","a"].includes(n.swizzle),this.destinationAttribute=n.attr);var i=this.sourceObject[this.sourceAttribute],a=this.destinationObject[this.destinationAttribute];if(void 0!==i)if(void 0!==a){var u=this._sourceIsArray=Object(_.isArrayLike)(i),c=this._destinationIsArray=Object(_.isArrayLike)(a),l=o,s=Object(_.isArrayLike)(this._sourceElement),f=Object(_.isArrayLike)(this._destinationElement);if(s||f){if(!u||!c)throw new Error("Invalid swizzle(s), expected two arrays");if(s&&!f){this._destinationElement=[];for(var p=0;p<this._destinationElement.length;p++)this._destinationElement[p]=p}else if(!s&&f){this._sourceElement=[];for(var d=0;d<this._sourceElement.length;d++)this._sourceElement[d]=d}this._copyFunc=o.CopySwizzledArrays}else{var y;if(u===c&&j(i)===j(a)?u?e?y=t?l.CopyElementToElement:l.ReplicateElement:i.length<=a.length?y=l.CopyArray:16===i.length&&(y=l.ExtractPos):y=l.CopyValueToValue:u&&e&&Object(_.isNumber)(a)?y=l.CopyElementToValue:c&&Object(_.isNumber)(i)?y=t?l.CopyValueToElement:l.ReplicateValue:Object(_.isNumber)(i)&&Object(_.isBoolean)(a)?y=l.CopyFloatToBoolean:Object(_.isBoolean)(i)&&Object(_.isNumber)(a)&&(y=l.CopyBooleanToFloat),!y)throw new G({name:this.name});this._copyFunc=y}}else console.dir(new L({name:this.name,objectType:"destination",property:this.destinationAttribute,object:this.destinationObject}));else console.dir(new L({name:this.name,objectType:"source",property:this.sourceAttribute,object:this.sourceObject}))}}},{key:"CopyValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this._copyFunc&&(this._copyFunc(this),"UpdateValues"in this.destinationObject?this.destinationObject.UpdateValues({controller:e}):"OnValueChanged"in this.destinationObject&&this.destinationObject.OnValueChanged({controller:e}))}},{key:"GetDestinationTarget",value:function(){return this._copyFunc?this.constructor.GetAttribute(this.destinationObject,this.destinationAttribute,this._destinationElement,this._destinationIsRGBA):this.destinationAttribute}},{key:"GetSourceTarget",value:function(){return this._copyFunc?this.constructor.GetAttribute(this.sourceObject,this.sourceAttribute,this._sourceElement,this._sourceIsRGBA):this.sourceAttribute}},{key:"SetSource",value:function(e,t,r,n){var i=this.constructor.GetTargets(e,t,r,n),o=i.object,a=i.attribute;this.sourceObject=o,this.sourceAttribute=a,this._copyFunc=null}},{key:"SetDestination",value:function(e,t,r,n){var i=this.constructor.GetTargets(e,t,r,n),o=i.object,a=i.attribute;this.destinationObject=o,this.destinationAttribute=a,this._copyFunc=null}}])&&O(t.prototype,r),n&&O(t,n),o}(_.meta.Model),w.CharacterSwizzle={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3},w.Vector4Swizzle={v1:0,v2:1,v3:2,v4:3},d=k((p=x).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=k(p.prototype,"destinationAttribute",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=k(p.prototype,"destinationObject",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=k(p.prototype,"offset",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.vec4.create()}}),h=k(p.prototype,"scale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=k(p.prototype,"sourceAttribute",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=k(p.prototype,"sourceObject",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=p))||f),L=function(e){R(r,e);var t=D(r);function r(e){return T(this,r),t.call(this,e,"Error binding '%name=unknown%', %objectType%'s property is undefined (%property%)")}return r}(S.Tw2Error),G=function(e){R(r,e);var t=D(r);function r(e){return T(this,r),t.call(this,e,"Error binding '%name=unknown%', cannot identify binding type")}return r}(S.Tw2Error),F=function(e){R(r,e);var t=D(r);function r(e){return T(this,r),t.call(this,e,"Error binding '%name=unknown%', could not find '%object%' object reference")}return r}(S.Tw2Error)},"./curve/curve/Tw2Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveKey",(function(){return R})),r.d(t,"Tw2Curve",(function(){return P}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js"),h=r("./global/math/index.js");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R=(n=b.meta.string,i=b.meta.float,c=function(e){_(r,e);var t=S(r);function r(){var e;x(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return w(e=t.call.apply(t,[this].concat(i)),"name",a,E(e)),w(e,"time",u,E(e)),e}return r}(b.meta.Model),a=O((o=c).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=O(o.prototype,"time",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o),P=(l=b.meta.string,s=b.meta.abstract,f=b.meta.abstract,m=y=function(e){_(o,e);var t,r,n,i=S(o);function o(){var e;x(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return w(e=i.call.apply(i,[this].concat(r)),"name",d,E(e)),e}return t=o,n=[{key:"Compare",value:function(e,t){return e.time<t.time?-1:e.time>t.time?1:0}},{key:"Sort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.keys;t&&t.length&&(t.sort(o.Compare),e.length=t[t.length-1].time)}},{key:"Sort2",value:function(e){if(e.keys&&e.keys.length){e.keys.sort(o.Compare);var t=e.keys[e.keys.length-1];if(t.time>e.length){var r=e.length,n=e.endValue,i=e.endTangent;e.length=t.time,e.endValue=t.value,e.endTangent=t.leftTangent,r>0&&(t.time=r,t.value=n,t.leftTangent=i)}}}},{key:"Sort3",value:function(e){e.sort((function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}));for(var t=0,r=0;r<e.length;r++)e[r].index=r,r===e.length-1&&(t=e[r].time);return t}}],(r=[{key:"Initialize",value:function(){this.Sort()}},{key:"Sort",value:function(){}},{key:"GetLength",value:function(){}},{key:"UpdateValue",value:function(e){}}])&&g(t.prototype,r),n&&g(t,n),o}(b.meta.Model),y.inputDimension=null,y.outputDimension=null,y.valueProperty=null,y.curveType=null,y.Key=null,y.Interpolation=null,y.Extrapolation=null,y.Type={CURVE:1,CURVE2:2,CURVE3:3,CURVE_MAYA:4,CURVE_NO_KEYS:5,SEQUENCER:100,SEQUENCER2:101,EXPRESSION:200,ADAPTER:300},y.global={vec3_0:h.vec3.create(),vec4_0:h.vec4.create(),quat_0:h.quat.create(),quat_1:h.quat.create()},d=O((p=m).prototype,"name",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O(p.prototype,"GetLength",[s],Object.getOwnPropertyDescriptor(p.prototype,"GetLength"),p.prototype),O(p.prototype,"UpdateValue",[f],Object.getOwnPropertyDescriptor(p.prototype,"UpdateValue"),p.prototype),p)},"./curve/curve/Tw2EventCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EventKey",(function(){return B})),r.d(t,"Tw2EventCurve",(function(){return N}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E=r("./curve/curve/Tw2Curve.js"),T=r("./global/utils/index.js");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=L(e);if(t){var i=L(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k(this,r)}}function k(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var F={NONE:0,CYCLE:3},B=(n=T.meta.type("Tw2EventKey","TriEventKey"),i=T.meta.float,o=T.meta.ushort,n((s=function(e){A(r,e);var t=C(r);function r(){var e;D(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return P(e=t.call.apply(t,[this].concat(i)),"time",c,I(e)),P(e,"value",l,I(e)),e}return r}(E.Tw2CurveKey),c=G((u=s).prototype,"time",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=G(u.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a=u))||a),N=(f=T.meta.type("Tw2EventCurve","TriEventCurve"),p=T.meta.string,d=T.meta.uint,y=T.meta.enums(F),m=T.meta.list("Tw2EventKey"),b=T.meta.ushort,h=T.meta.isPrivate,f((j=S=function(e){A(o,e);var t,r,n,i=C(o);function o(){var e;D(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return P(e=i.call.apply(i,[this].concat(r)),"name",w,I(e)),P(e,"extrapolation",x,I(e)),P(e,"keys",_,I(e)),P(e,"value",z,I(e)),e._time=0,e._currentKey=0,e._length=0,e}return t=o,(r=[{key:"Sort",value:function(){this.keys.length&&(this.keys.sort(E.Tw2Curve.Compare),this._length=this.keys[this.keys.length-1].time)}},{key:"GetLength",value:function(){return this._length}},{key:"UpdateValue",value:function(e){if(this._length<=0)return this.value;var t=this._time;if(this._time=e,this._time<t&&(this._currentKey=0),this.extrapolation===o.Extrapolation.CYCLE){var r=this._time%this._length;r<t&&(this._currentKey=0),this._time=r}for(;this._currentKey<this.keys.length&&this._time>=this.keys[this._currentKey].time;)this.value=this.keys[this._currentKey].value,++this._currentKey}}])&&R(t.prototype,r),n&&R(t,n),o}(E.Tw2Curve),S.dimension=1,S.outputDimension=1,S.valueProperty="value",S.curveType=E.Tw2Curve.Type.CURVE,S.Key=B,S.Extrapolation=F,w=G((g=j).prototype,"name",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=G(g.prototype,"extrapolation",[d,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=G(g.prototype,"keys",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=G(g.prototype,"value",[b,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=g))||v)},"./curve/curve/Tw2PerlinCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PerlinCurve",(function(){return G}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j=r("./global/utils/index.js"),E=r("./global/math/index.js"),T=r("./curve/curve/Tw2Curve.js");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var G=(n=j.meta.type("Tw2PerlinCurve","TriPerlinCurve"),i=j.meta.string,o=j.meta.float,a=j.meta.float,u=j.meta.uint,c=j.meta.float,l=j.meta.float,s=j.meta.float,f=j.meta.float,p=j.meta.isPrivate,n((S=z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(o,e);var t,r,n,i=M(o);function o(){var e;P(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return R(e=i.call.apply(i,[this].concat(r)),"name",m,k(e)),R(e,"alpha",b,k(e)),R(e,"beta",h,k(e)),R(e,"N",v,k(e)),R(e,"offset",g,k(e)),R(e,"scale",w,k(e)),R(e,"speed",x,k(e)),R(e,"value",_,k(e)),e}return t=o,(r=[{key:"Sort",value:function(){}},{key:"GetLength",value:function(){return 0}},{key:"UpdateValue",value:function(e){this.value=this.GetValueAt(e)}},{key:"GetValueAt",value:function(e){return e-=this.offset,(E.noise.perlin1D(e*this.speed,this.alpha,this.beta,this.N)+1)/2*this.scale+this.offset}}])&&D(t.prototype,r),n&&D(t,n),o}(T.Tw2Curve),z.outputDimension=1,z.valueProperty="value",z.curveType=T.Tw2Curve.Type.CURVE_NO_KEYS,m=L((y=S).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=L(y.prototype,"alpha",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=L(y.prototype,"beta",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=L(y.prototype,"N",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=L(y.prototype,"offset",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=L(y.prototype,"scale",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=L(y.prototype,"speed",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=L(y.prototype,"value",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=y))||d)},"./curve/curve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/curve/Tw2EventCurve.js");r.d(t,"Tw2EventKey",(function(){return n.Tw2EventKey})),r.d(t,"Tw2EventCurve",(function(){return n.Tw2EventCurve}));var i=r("./curve/curve/Tw2PerlinCurve.js");r.d(t,"Tw2PerlinCurve",(function(){return i.Tw2PerlinCurve}));var o=r("./curve/curve/Tw2Curve.js");r.d(t,"Tw2CurveKey",(function(){return o.Tw2CurveKey})),r.d(t,"Tw2Curve",(function(){return o.Tw2Curve}));var a=r("./curve/curve/legacy/index.js");r.d(t,"Tw2ColorKey",(function(){return a.Tw2ColorKey})),r.d(t,"Tw2ColorCurve",(function(){return a.Tw2ColorCurve})),r.d(t,"Tw2ColorKey2",(function(){return a.Tw2ColorKey2})),r.d(t,"Tw2ColorCurve2",(function(){return a.Tw2ColorCurve2})),r.d(t,"Tw2QuaternionKey2",(function(){return a.Tw2QuaternionKey2})),r.d(t,"Tw2QuaternionCurve",(function(){return a.Tw2QuaternionCurve})),r.d(t,"Tw2RandomConstantCurve",(function(){return a.Tw2RandomConstantCurve})),r.d(t,"Tw2Torque",(function(){return a.Tw2Torque})),r.d(t,"Tw2RigidOrientation",(function(){return a.Tw2RigidOrientation})),r.d(t,"Tw2QuaternionKey",(function(){return a.Tw2QuaternionKey})),r.d(t,"Tw2RotationCurve",(function(){return a.Tw2RotationCurve})),r.d(t,"Tw2ScalarKey",(function(){return a.Tw2ScalarKey})),r.d(t,"Tw2ScalarCurve",(function(){return a.Tw2ScalarCurve})),r.d(t,"Tw2ScalarKey2",(function(){return a.Tw2ScalarKey2})),r.d(t,"Tw2ScalarCurve2",(function(){return a.Tw2ScalarCurve2})),r.d(t,"Tw2SineCurve",(function(){return a.Tw2SineCurve})),r.d(t,"Tw2Vector2Key",(function(){return a.Tw2Vector2Key})),r.d(t,"Tw2Vector2Curve",(function(){return a.Tw2Vector2Curve})),r.d(t,"Tw2Vector3Key",(function(){return a.Tw2Vector3Key})),r.d(t,"Tw2Vector3Curve",(function(){return a.Tw2Vector3Curve})),r.d(t,"Tw2VectorKey",(function(){return a.Tw2VectorKey})),r.d(t,"Tw2VectorCurve",(function(){return a.Tw2VectorCurve}))},"./curve/curve/legacy/Tw2ColorCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorKey",(function(){return K})),r.d(t,"Tw2ColorCurve",(function(){return Y}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A=r("./global/utils/index.js"),M=r("./global/math/index.js"),C=r("./curve/curve/Tw2Curve.js");function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=q(e);if(t){var i=q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var W={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},X={NONE:0,CONSTANT:1,LINEAR:2},K=(n=A.meta.type("Tw2ColorKey"),i=A.meta.vector4,o=A.meta.vector4,a=A.meta.vector4,u=A.meta.enums(X),n((y=function(e){F(r,e);var t=N(r);function r(){var e;G(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return L(e=t.call.apply(t,[this].concat(i)),"value",s,V(e)),L(e,"left",f,V(e)),L(e,"right",p,V(e)),L(e,"interpolation",d,V(e)),e}return r}(C.Tw2CurveKey),s=H((l=y).prototype,"value",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec4.create()}}),f=H(l.prototype,"left",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec4.create()}}),p=H(l.prototype,"right",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec4.create()}}),d=H(l.prototype,"interpolation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=l))||c),Y=(m=A.meta.type("Tw2ColorCurve"),b=A.meta.float,h=A.meta.vector4,v=A.meta.isPrivate,g=A.meta.enums(W),w=A.meta.list("Tw2ColorKey"),x=A.meta.float,_=A.meta.isPrivate,m((D=P=function(e){F(o,e);var t,r,n,i=N(o);function o(){var e;G(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return L(e=i.call.apply(i,[this].concat(r)),"start",j,V(e)),L(e,"value",E,V(e)),L(e,"extrapolation",T,V(e)),L(e,"keys",O,V(e)),L(e,"length",R,V(e)),e._currentKey=1,e}return t=o,(r=[{key:"Sort",value:function(){C.Tw2Curve.Sort(this)}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}},{key:"GetValueAt",value:function(e,t){if(0===this.length)return M.vec4.copy(t,this.value);var r=this.keys[0],n=this.keys[this.keys.length-1];if(e>=n.time)switch(this.extrapolation){case W.NONE:return M.vec4.copy(t,this.value);case W.CONSTANT:return M.vec4.copy(t,n.value);case W.GRADIENT:return M.vec4.scaleAndAdd(t,n.value,n.right,e-n.time);default:e%=n.time}else if(e<0||e<r.time)switch(this.extrapolation){case W.NONE:return M.vec4.copy(t,this.value);case W.GRADIENT:return M.vec4.scaleAndAdd(t,r.value,r.left,e*this.length-n.time);default:return M.vec4.copy(t,r.value)}for(var i=this.keys[this._currentKey],o=this.keys[this._currentKey-1];e>=i.time||e<o.time;)e<o.time&&(this._currentKey=0),this._currentKey++,i=this.keys[this._currentKey],o=this.keys[this._currentKey-1];var a=(e-o.time)/(i.time-o.time);switch(o.interpolation){case X.CONSTANT:return M.vec4.copy(t,o.value);default:return t[0]=o.value[0]*(1-a)+i.value[0]*a,t[1]=o.value[1]*(1-a)+i.value[1]*a,t[2]=o.value[2]*(1-a)+i.value[2]*a,t[3]=o.value[3]*(1-a)+i.value[3]*a,t}}}])&&I(t.prototype,r),n&&I(t,n),o}(C.Tw2Curve),P.inputDimension=4,P.outputDimension=4,P.valueProperty="value",P.curveType=C.Tw2Curve.Type.CURVE,P.Key=K,P.Extrapolation=W,P.Interpolation=X,j=H((S=D).prototype,"start",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=H(S.prototype,"value",[h,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec4.create()}}),T=H(S.prototype,"extrapolation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=H(S.prototype,"keys",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=H(S.prototype,"length",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=S))||z)},"./curve/curve/legacy/Tw2ColorCurve2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorKey2",(function(){return ue})),r.d(t,"Tw2ColorCurve2",(function(){return ce}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W=r("./global/utils/index.js"),X=r("./global/math/index.js"),K=r("./curve/curve/Tw2Curve.js");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ie(e);if(t){var i=ie(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return re(this,r)}}function re(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ae={CONSTANT:0,LINEAR:1},ue=(n=W.meta.type("Tw2ColorKey2"),i=W.meta.vector4,o=W.meta.vector4,a=W.meta.vector4,u=W.meta.enums(ae),n((y=function(e){$(r,e);var t=te(r);function r(){var e;J(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Z(e=t.call.apply(t,[this].concat(i)),"value",s,ne(e)),Z(e,"leftTangent",f,ne(e)),Z(e,"rightTangent",p,ne(e)),Z(e,"interpolation",d,ne(e)),e}return r}(K.Tw2CurveKey),s=oe((l=y).prototype,"value",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),f=oe(l.prototype,"leftTangent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),p=oe(l.prototype,"rightTangent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),d=oe(l.prototype,"interpolation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=l))||c),ce=(m=W.meta.type("Tw2ColorCurve2"),b=W.meta.boolean,h=W.meta.boolean,v=W.meta.float,g=W.meta.float,w=W.meta.vector4,x=W.meta.vector4,_=W.meta.isPrivate,z=W.meta.vector4,S=W.meta.vector4,j=W.meta.vector4,E=W.meta.enums(ae),T=W.meta.list("Tw2ColorKey2"),O=W.meta.float,R=W.meta.isPrivate,m((H=q=function(e){$(o,e);var t,r,n,i=te(o);function o(){var e;J(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Z(e=i.call.apply(i,[this].concat(r)),"cycle",A,ne(e)),Z(e,"reversed",M,ne(e)),Z(e,"timeOffset",C,ne(e)),Z(e,"timeScale",k,ne(e)),Z(e,"startValue",I,ne(e)),Z(e,"currentValue",L,ne(e)),Z(e,"endValue",G,ne(e)),Z(e,"startTangent",F,ne(e)),Z(e,"endTangent",B,ne(e)),Z(e,"interpolation",N,ne(e)),Z(e,"keys",U,ne(e)),Z(e,"length",V,ne(e)),e}return t=o,(r=[{key:"Sort",value:function(){K.Tw2Curve.Sort2(this)}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.currentValue)}},{key:"GetValueAt",value:function(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return X.vec4.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?X.vec4.copy(t,this.startValue):X.vec4.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);var r=this.keys[0],n=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=n.time)return this.Interpolate(e,n,null,t);for(var i=0;i+1<this.keys.length&&(r=this.keys[i],n=this.keys[i+1],!(r.time<=e&&n.time>e));++i);return this.Interpolate(e,r,n,t)}},{key:"Interpolate",value:function(e,t,r,n){X.vec4.copy(n,this.startValue);var i=this.startValue,o=this.endValue,a=this.interpolation,u=this.length;switch(null!==t&&(a=t.interpolation,e-=t.time),a){case ae.LINEAR:return t&&r?(i=t.value,o=r.value,u=r.time-t.time):r?(o=r.value,u=r.time):t&&(i=t.value,u=this.length-t.time),n[0]=i[0]+(o[0]-i[0])*(e/u),n[1]=i[1]+(o[1]-i[1])*(e/u),n[2]=i[2]+(o[2]-i[2])*(e/u),n[3]=i[3]+(o[3]-i[3])*(e/u),n;default:return n}}}])&&Q(t.prototype,r),n&&Q(t,n),o}(K.Tw2Curve),q.inputDimension=4,q.outputDimension=4,q.valueProperty="currentValue",q.curveType=K.Tw2Curve.Type.CURVE2,q.Key=ue,q.Interpolation=ae,A=oe((D=H).prototype,"cycle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=oe(D.prototype,"reversed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=oe(D.prototype,"timeOffset",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=oe(D.prototype,"timeScale",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),I=oe(D.prototype,"startValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.fromValues(0,0,0,1)}}),L=oe(D.prototype,"currentValue",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.fromValues(0,0,0,1)}}),G=oe(D.prototype,"endValue",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.fromValues(0,0,0,1)}}),F=oe(D.prototype,"startTangent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),B=oe(D.prototype,"endTangent",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),N=oe(D.prototype,"interpolation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=oe(D.prototype,"keys",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=oe(D.prototype,"length",[O,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=D))||P)},"./curve/curve/legacy/Tw2QuaternionCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionKey2",(function(){return ue})),r.d(t,"Tw2QuaternionCurve",(function(){return ce}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W=r("./global/utils/index.js"),X=r("./global/math/index.js"),K=r("./curve/curve/Tw2Curve.js");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ie(e);if(t){var i=ie(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return re(this,r)}}function re(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ae={CONSTANT:0,SPHERICAL_LINEAR:4},ue=(n=W.meta.type("Tw2QuaternionKey2"),i=W.meta.quaternion,o=W.meta.vector4,a=W.meta.vector4,u=W.meta.enums(ae),n((y=function(e){$(r,e);var t=te(r);function r(){var e;J(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Z(e=t.call.apply(t,[this].concat(i)),"value",s,ne(e)),Z(e,"leftTangent",f,ne(e)),Z(e,"rightTangent",p,ne(e)),Z(e,"interpolation",d,ne(e)),e}return r}(K.Tw2CurveKey),s=oe((l=y).prototype,"value",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.quat.create()}}),f=oe(l.prototype,"leftTangent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),p=oe(l.prototype,"rightTangent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),d=oe(l.prototype,"interpolation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.SPHERICAL_LINEAR}}),c=l))||c),ce=(m=W.meta.type("Tw2QuaternionCurve"),b=W.meta.boolean,h=W.meta.boolean,v=W.meta.float,g=W.meta.float,w=W.meta.quaternion,x=W.meta.quaternion,_=W.meta.isPrivate,z=W.meta.quaternion,S=W.meta.vector4,j=W.meta.vector4,E=W.meta.enums(ae),T=W.meta.list("Tw2QuaternionKey"),O=W.meta.float,R=W.meta.isPrivate,m((H=q=function(e){$(o,e);var t,r,n,i=te(o);function o(){var e;J(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Z(e=i.call.apply(i,[this].concat(r)),"cycle",A,ne(e)),Z(e,"reversed",M,ne(e)),Z(e,"timeOffset",C,ne(e)),Z(e,"timeScale",k,ne(e)),Z(e,"startValue",I,ne(e)),Z(e,"currentValue",L,ne(e)),Z(e,"endValue",G,ne(e)),Z(e,"startTangent",F,ne(e)),Z(e,"endTangent",B,ne(e)),Z(e,"interpolation",N,ne(e)),Z(e,"keys",U,ne(e)),Z(e,"length",V,ne(e)),e}return t=o,(r=[{key:"Sort",value:function(){K.Tw2Curve.Sort2(this)}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.currentValue)}},{key:"GetValueAt",value:function(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return t[0]=this.startValue[0],t[1]=this.startValue[1],t[2]=this.startValue[2],t[3]=this.startValue[3],t;if(e>this.length){if(!this.cycle)return this.reversed?(t[0]=this.startValue[0],t[1]=this.startValue[1],t[2]=this.startValue[2],t[3]=this.startValue[3],t):(t[0]=this.endValue[0],t[1]=this.endValue[1],t[2]=this.endValue[2],t[3]=this.endValue[3],t);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);var r=this.keys[0],n=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=n.time)return this.Interpolate(e,n,null,t);for(var i=0;i+1<this.keys.length&&(r=this.keys[i],n=this.keys[i+1],!(r.time<=e&&n.time>e));++i);return this.Interpolate(e,r,n,t)}},{key:"Interpolate",value:function(e,t,r,n){n[0]=this.startValue[0],n[1]=this.startValue[1],n[2]=this.startValue[2],n[3]=this.startValue[3];var i=this.startValue,o=this.endValue,a=this.interpolation,u=this.length;switch(null!==t&&(a=t.interpolation,e-=t.time),a){case ae.SPHERICAL_LINEAR:return t&&r?(i=t.value,o=r.value,u=r.time-t.time):r?(o=r.value,u=r.time):t&&(i=t.value,u=this.length-t.time),X.quat.slerp(n,i,o,e/u),n;default:return console.log("Linear interpolation not supported..."),n}}}])&&Q(t.prototype,r),n&&Q(t,n),o}(K.Tw2Curve),q.inputDimension=4,q.outputDimension=4,q.valueProperty="currentValue",q.curveType=K.Tw2Curve.Type.CURVE2,q.Key=ue,q.Interpolation=ae,A=oe((D=H).prototype,"cycle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=oe(D.prototype,"reversed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=oe(D.prototype,"timeOffset",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=oe(D.prototype,"timeScale",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),I=oe(D.prototype,"startValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.quat.create()}}),L=oe(D.prototype,"currentValue",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.quat.create()}}),G=oe(D.prototype,"endValue",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.quat.create()}}),F=oe(D.prototype,"startTangent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),B=oe(D.prototype,"endTangent",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),N=oe(D.prototype,"interpolation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.SPHERICAL_LINEAR}}),U=oe(D.prototype,"keys",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=oe(D.prototype,"length",[O,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=D))||P)},"./curve/curve/legacy/Tw2RandomConstantCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomConstantCurve",(function(){return R}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h=r("./global/utils/index.js"),v=r("./curve/curve/Tw2Curve.js");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R=(n=h.meta.type("Tw2RandomConstantCurve"),i=h.meta.float,o=h.meta.isPrivate,a=h.meta.float,u=h.meta.float,c=h.meta.boolean,n((b=m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(o,e);var t,r,n,i=S(o);function o(){var e;x(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return w(e=i.call.apply(i,[this].concat(r)),"value",f,E(e)),w(e,"min",p,E(e)),w(e,"max",d,E(e)),w(e,"hold",y,E(e)),e}return t=o,(r=[{key:"Sort",value:function(){}},{key:"GetLength",value:function(){return 0}},{key:"UpdateValue",value:function(){this.value=this.GetValueAt()}},{key:"GetValueAt",value:function(){return this.hold?this.value:this.min+(this.max-this.min)*Math.random()}}])&&_(t.prototype,r),n&&_(t,n),o}(v.Tw2Curve),m.outputDimension=1,m.valueProperty="value",m.curveType=v.Tw2Curve.Type.CURVE_NO_KEYS,f=O((s=b).prototype,"value",[i,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=O(s.prototype,"min",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=O(s.prototype,"max",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=O(s.prototype,"hold",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=s))||l)},"./curve/curve/legacy/Tw2RigidOrientation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Torque",(function(){return K})),r.d(t,"Tw2RigidOrientation",(function(){return Y}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C=r("./global/utils/index.js"),k=r("./global/math/index.js"),I=r("./curve/curve/Tw2Curve.js");function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=W(e);if(t){var i=W(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return q(this,r)}}function q(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?H(e):t}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var K=(n=C.meta.type("Tw2Torque"),i=C.meta.quaternion,o=C.meta.vector4,a=C.meta.vector4,n((p=function(e){N(r,e);var t=V(r);function r(){var e;B(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return F(e=t.call.apply(t,[this].concat(i)),"rot0",l,H(e)),F(e,"omega0",s,H(e)),F(e,"torque",f,H(e)),e}return r}(I.Tw2CurveKey),l=X((c=p).prototype,"rot0",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.quat.create()}}),s=X(c.prototype,"omega0",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.vec3.create()}}),f=X(c.prototype,"torque",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.vec3.create()}}),u=c))||u),Y=(d=C.meta.type("Tw2RigidOrientation"),y=C.meta.string,m=C.meta.float,b=C.meta.float,h=C.meta.quaternion,v=C.meta.isPrivate,g=C.meta.float,w=C.meta.list("Tw2Torque"),x=C.meta.float,_=C.meta.isPrivate,d((M=A=function(e){N(o,e);var t,r,n,i=V(o);function o(){var e;B(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return F(e=i.call.apply(i,[this].concat(r)),"name",j,H(e)),F(e,"I",E,H(e)),F(e,"drag",T,H(e)),F(e,"value",O,H(e)),F(e,"start",R,H(e)),F(e,"states",P,H(e)),F(e,"length",D,H(e)),e}return t=o,(r=[{key:"Sort",value:function(){I.Tw2Curve.Sort(this,this.states)}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}},{key:"GetValueAt",value:function(e,t){if(0===this.states.length||e<0||e<this.states[0].time)return k.quat.copy(t,this.value);var r=0;if(e>=this.states[this.states.length-1].time)r=this.states.length-1;else for(;r+1<this.states.length&&!(e>=this.states[r].time&&e<this.states[r+1].time);++r);var n=I.Tw2Curve.global.vec3_0,i=I.Tw2Curve.global.quat_0,o=this.states[r];return k.vec3.exponentialDecay(n,o.omega0,o.torque,this.I,this.drag,e-o.time),k.quat.exp(i,n),k.quat.multiply(t,this.states[r].rot0,i),t}}])&&G(t.prototype,r),n&&G(t,n),o}(I.Tw2Curve),A.inputDimension=4,A.outputDimension=4,A.valueProperty="value",A.curveType=I.Tw2Curve.Type.CURVE,A.Key=K,j=X((S=M).prototype,"name",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=X(S.prototype,"I",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),T=X(S.prototype,"drag",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=X(S.prototype,"value",[h,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.quat.create()}}),R=X(S.prototype,"start",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=X(S.prototype,"states",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=X(S.prototype,"length",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=S))||z)},"./curve/curve/legacy/Tw2RotationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionKey",(function(){return Y})),r.d(t,"Tw2RotationCurve",(function(){return Q}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M=r("./global/utils/index.js"),C=r("./global/math/index.js"),k=r("./curve/curve/Tw2Curve.js");function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=H(e);if(t){var i=H(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return V(this,r)}}function V(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?q(e):t}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var X={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},K={NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3,SLERP:5,SQUAD:6},Y=(n=M.meta.type("Tw2QuaternionKey"),i=M.meta.quaternion,o=M.meta.isPrivate,a=M.meta.vector4,u=M.meta.vector4,c=M.meta.enums(K),n((m=function(e){B(r,e);var t=U(r);function r(){var e;F(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return G(e=t.call.apply(t,[this].concat(i)),"value",f,q(e)),G(e,"left",p,q(e)),G(e,"right",d,q(e)),G(e,"interpolation",y,q(e)),e}return r}(k.Tw2CurveKey),f=W((s=m).prototype,"value",[i,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.quat.create()}}),p=W(s.prototype,"left",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),d=W(s.prototype,"right",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),y=W(s.prototype,"interpolation",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),l=s))||l),Q=(b=M.meta.type("Tw2RotationCurve"),h=M.meta.float,v=M.meta.quaternion,g=M.meta.isPrivate,w=M.meta.enums(X),x=M.meta.list("Tw2QuaternionKey"),_=M.meta.float,z=M.meta.isPrivate,b((A=D=function(e){B(o,e);var t,r,n,i=U(o);function o(){var e;F(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return G(e=i.call.apply(i,[this].concat(r)),"start",E,q(e)),G(e,"value",T,q(e)),G(e,"extrapolation",O,q(e)),G(e,"keys",R,q(e)),G(e,"length",P,q(e)),e._currentKey=1,e}return t=o,(r=[{key:"Sort",value:function(){k.Tw2Curve.Sort(this)}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}},{key:"GetValueAt",value:function(e,t){if(0===this.length)return C.quat.copy(t,this.value);var r=k.Tw2Curve.global,n=this.keys[0],i=this.keys[this.keys.length-1];if(e>=i.time)switch(this.extrapolation){case X.NONE:return C.quat.copy(t,this.value);case X.CONSTANT:return C.quat.copy(t,i.value);default:e%=i.time}else if(e<0||e<n.time)switch(this.extrapolation){case X.NONE:return C.quat.copy(t,this.value);default:return C.quat.copy(t,n.value)}for(var a=this.keys[this._currentKey],u=this.keys[this._currentKey-1];e>=a.time||e<u.time;)e<u.time&&(this._currentKey=0),this._currentKey++,a=this.keys[this._currentKey],u=this.keys[this._currentKey-1];var c=(e-u.time)/(a.time-u.time);switch(u.interpolation){case K.CONSTANT:return C.quat.copy(t,u.value);case o.Interpolation.LINEAR:return t[0]=u.value[0]*(1-c)+a.value[0]*c,t[1]=u.value[1]*(1-c)+a.value[1]*c,t[2]=u.value[2]*(1-c)+a.value[2]*c,t[3]=u.value[3]*(1-c)+a.value[3]*c,t;case K.HERMITE:for(var l=C.quat.identity(r.quat_0),s=[u.value,u.right,a.left,a.value],f=3;f>0;f--){var p=C.num.biCumulative(c,f);p>1&&C.quat.multiply(t,l,s[f]),t[0]=-s[f-1][0],t[1]=-s[f-1][1],t[2]=-s[f-1][2],t[3]=s[f-1][3],C.quat.multiply(t,t,s[f]),C.quat.pow(t,t,p),C.quat.multiply(l,l,t)}return C.quat.multiply(t,l,u.value);case o.Interpolation.SLERP:return C.quat.slerp(t,u.value,a.value,c);default:return C.quat.sqlerp(t,u.value,u.right,a.left,a.value,c)}}}])&&L(t.prototype,r),n&&L(t,n),o}(k.Tw2Curve),D.outputDimension=4,D.inputDimension=4,D.valueProperty="value",D.curveType=k.Tw2Curve.Type.CURVE,D.Child=Y,D.Extrapolation=X,D.Interpolation=K,E=W((j=A).prototype,"start",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=W(j.prototype,"value",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.quat.create()}}),O=W(j.prototype,"extrapolation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=W(j.prototype,"keys",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=W(j.prototype,"length",[_,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=j))||S)},"./curve/curve/legacy/Tw2ScalarCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarKey",(function(){return Z})),r.d(t,"Tw2ScalarCurve",(function(){return J}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I=r("./global/utils/index.js"),L=r("./curve/curve/Tw2Curve.js");function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=X(e);if(t){var i=X(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return H(this,r)}}function H(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Y={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},Q={NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3,CATMULROM:4},Z=(n=I.meta.type("Tw2ScalarKey"),i=I.meta.float,o=I.meta.float,a=I.meta.float,u=I.meta.enums(Q),n((y=function(e){U(r,e);var t=q(r);function r(){var e;N(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return B(e=t.call.apply(t,[this].concat(i)),"value",s,W(e)),B(e,"left",f,W(e)),B(e,"right",p,W(e)),B(e,"interpolation",d,W(e)),e}return r}(L.Tw2CurveKey),s=K((l=y).prototype,"value",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=K(l.prototype,"left",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=K(l.prototype,"right",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=K(l.prototype,"interpolation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=l))||c),J=(m=I.meta.type("Tw2ScalarCurve"),b=I.meta.float,h=I.meta.float,v=I.meta.float,g=I.meta.float,w=I.meta.isPrivate,x=I.meta.enums(Y),_=I.meta.list("Tw2ScalarKey"),z=I.meta.float,S=I.meta.isPrivate,m((k=C=function(e){U(o,e);var t,r,n,i=q(o);function o(){var e;N(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return B(e=i.call.apply(i,[this].concat(r)),"start",T,W(e)),B(e,"timeScale",O,W(e)),B(e,"timeOffset",R,W(e)),B(e,"value",P,W(e)),B(e,"extrapolation",D,W(e)),B(e,"keys",A,W(e)),B(e,"length",M,W(e)),e._currentKey=1,e}return t=o,(r=[{key:"Sort",value:function(){L.Tw2Curve.Sort(this)}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.value=this.GetValueAt(e)}},{key:"GetValueAt",value:function(e){if(e=e/this.timeScale-this.timeOffset,0===this.length)return this.value;var t=this.keys[0],r=this.keys[this.keys.length-1];if(e>=r.time)switch(this.extrapolation){case Y.NONE:return this.value;case Y.CONSTANT:return r.value;case Y.GRADIENT:return r.value+(e-r.time)*r.right;default:e%=r.time}else if(e<0||e<t.time)switch(this.extrapolation){case Y.NONE:return this.value;case Y.GRADIENT:return t.value+(e*this.length-r.time)*t.left;default:return t.value}for(var n=this.keys[this._currentKey],i=this.keys[this._currentKey-1];e>=n.time||e<i.time;)e<i.time&&(this._currentKey=0),this._currentKey++,n=this.keys[this._currentKey],i=this.keys[this._currentKey-1];var o=(e-i.time)/(n.time-i.time);switch(i.interpolation){case Q.CONSTANT:return i.value;case Q.LINEAR:return i.value*(1-o)+n.value*o;case Q.HERMITE:var a=-2*o*o*o+3*o*o,u=o*o*o-2*o*o+o,c=o*o*o-o*o;return(2*o*o*o-3*o*o+1)*i.value+a*n.value+u*i.right+c*n.left;default:var l=1+(Math.sqrt(i.value/n.value)-1)*Math.exp(-e/i.right);return l*l*n.value}}}])&&F(t.prototype,r),n&&F(t,n),o}(L.Tw2Curve),C.inputDimension=1,C.outputDimension=1,C.valueProperty="value",C.curveType=L.Tw2Curve.Type.CURVE,C.Key=Z,C.Extrapolation=Y,C.Interpolation=Q,T=K((E=k).prototype,"start",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=K(E.prototype,"timeScale",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=K(E.prototype,"timeOffset",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=K(E.prototype,"value",[g,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=K(E.prototype,"extrapolation",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=K(E.prototype,"keys",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=K(E.prototype,"length",[z,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=E))||j)},"./curve/curve/legacy/Tw2ScalarCurve2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarKey2",(function(){return ae})),r.d(t,"Tw2ScalarCurve2",(function(){return ue}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W=r("./global/utils/index.js"),X=r("./curve/curve/Tw2Curve.js");function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ne(e);if(t){var i=ne(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return te(this,r)}}function te(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?re(e):t}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var oe={CONSTANT:0,LINEAR:1,HERMITE:2},ae=(n=W.meta.type("Tw2ScalarKey2"),i=W.meta.float,o=W.meta.float,a=W.meta.float,u=W.meta.enums(oe),n((y=function(e){J(r,e);var t=ee(r);function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Q(e=t.call.apply(t,[this].concat(i)),"value",s,re(e)),Q(e,"leftTangent",f,re(e)),Q(e,"rightTangent",p,re(e)),Q(e,"interpolation",d,re(e)),e}return r}(X.Tw2CurveKey),s=ie((l=y).prototype,"value",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=ie(l.prototype,"leftTangent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=ie(l.prototype,"rightTangent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=ie(l.prototype,"interpolation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=l))||c),ue=(m=W.meta.type("Tw2ScalarCurve2"),b=W.meta.boolean,h=W.meta.boolean,v=W.meta.float,g=W.meta.float,w=W.meta.float,x=W.meta.float,_=W.meta.isPrivate,z=W.meta.float,S=W.meta.float,j=W.meta.float,E=W.meta.enums(oe),T=W.meta.list("Tw2ScalarKey2"),O=W.meta.float,R=W.meta.isPrivate,m((H=q=function(e){J(o,e);var t,r,n,i=ee(o);function o(){var e;Z(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Q(e=i.call.apply(i,[this].concat(r)),"cycle",A,re(e)),Q(e,"reversed",M,re(e)),Q(e,"timeOffset",C,re(e)),Q(e,"timeScale",k,re(e)),Q(e,"startValue",I,re(e)),Q(e,"currentValue",L,re(e)),Q(e,"endValue",G,re(e)),Q(e,"startTangent",F,re(e)),Q(e,"endTangent",B,re(e)),Q(e,"interpolation",N,re(e)),Q(e,"keys",U,re(e)),Q(e,"length",V,re(e)),e}return t=o,(r=[{key:"Sort",value:function(){X.Tw2Curve.Sort2(this)}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.currentValue=this.GetValueAt(e)}},{key:"GetValueAt",value:function(e){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return this.startValue;if(e>this.length){if(!this.cycle)return this.reversed?this.startValue:this.endValue;e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null);var t=this.keys[0],r=this.keys[this.keys.length-1];if(e<=t.time)return this.Interpolate(e,null,t);if(e>=r.time)return this.Interpolate(e,r,null);for(var n=0;n+1<this.keys.length&&(t=this.keys[n],r=this.keys[n+1],!(t.time<=e&&r.time>e));++n);return this.Interpolate(e,t,r)}},{key:"Interpolate",value:function(e,t,r){var n=this.startValue,i=this.endValue,o=this.interpolation,a=this.length;switch(null!==t&&(o=t.interpolation,e-=t.time),o){case oe.LINEAR:return t&&r?(n=t.value,i=r.value,a=r.time-t.time):r?(i=r.value,a=r.time):t&&(n=t.value,a=this.length-t.time),n+e/a*(i-n);case oe.HERMITE:var u=this.startTangent,c=this.endTangent;t&&r?(n=t.value,u=t.rightTangent,i=r.value,c=r.leftTangent,a=r.time-t.time):r?(i=r.value,c=r.leftTangent,a=r.time):t&&(n=t.value,u=t.rightTangent,a=this.length-t.time);var l=e/a,s=l*l,f=s*l,p=-2*f+3*s,d=f-s;return n*(1-p)+i*p+u*(l+d-s)+c*d;default:return this.startValue}}}])&&Y(t.prototype,r),n&&Y(t,n),o}(X.Tw2Curve),q.inputDimension=1,q.outputDimension=1,q.valueProperty="currentValue",q.curveType=X.Tw2Curve.Type.CURVE2,q.Key=ae,q.Interpolation=oe,A=ie((D=H).prototype,"cycle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=ie(D.prototype,"reversed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=ie(D.prototype,"timeOffset",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=ie(D.prototype,"timeScale",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),I=ie(D.prototype,"startValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=ie(D.prototype,"currentValue",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=ie(D.prototype,"endValue",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=ie(D.prototype,"startTangent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=ie(D.prototype,"endTangent",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=ie(D.prototype,"interpolation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=ie(D.prototype,"keys",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=ie(D.prototype,"length",[O,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=D))||P)},"./curve/curve/legacy/Tw2SineCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SineCurve",(function(){return R}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h=r("./global/utils/index.js"),v=r("./curve/curve/Tw2Curve.js");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R=(n=h.meta.type("Tw2SineCurve"),i=h.meta.float,o=h.meta.isPrivate,a=h.meta.float,u=h.meta.float,c=h.meta.float,n((b=m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(o,e);var t,r,n,i=S(o);function o(){var e;x(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return w(e=i.call.apply(i,[this].concat(r)),"value",f,E(e)),w(e,"offset",p,E(e)),w(e,"scale",d,E(e)),w(e,"speed",y,E(e)),e}return t=o,(r=[{key:"Sort",value:function(){}},{key:"GetLength",value:function(){return 0}},{key:"UpdateValue",value:function(e){this.value=this.GetValueAt(e)}},{key:"GetValueAt",value:function(e){return Math.sin(e*Math.PI*2*this.speed)*this.scale+this.offset}}])&&_(t.prototype,r),n&&_(t,n),o}(v.Tw2Curve),m.outputDimension=1,m.valueProperty="value",m.curveType=v.Tw2Curve.Type.CURVE_NO_KEYS,f=O((s=b).prototype,"value",[i,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=O(s.prototype,"offset",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=O(s.prototype,"scale",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=O(s.prototype,"speed",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=s))||l)},"./curve/curve/legacy/Tw2Vector2Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector2Key",(function(){return ue})),r.d(t,"Tw2Vector2Curve",(function(){return ce}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W=r("./global/utils/index.js"),X=r("./global/math/index.js"),K=r("./curve/curve/Tw2Curve.js");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ie(e);if(t){var i=ie(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return re(this,r)}}function re(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ae={CONSTANT:0,LINEAR:1,HERMITE:2},ue=(n=W.meta.type("Tw2Vector2Key"),i=W.meta.vector2,o=W.meta.vector2,a=W.meta.vector2,u=W.meta.enums(ae),n((y=function(e){$(r,e);var t=te(r);function r(){var e;J(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Z(e=t.call.apply(t,[this].concat(i)),"value",s,ne(e)),Z(e,"leftTangent",f,ne(e)),Z(e,"rightTangent",p,ne(e)),Z(e,"interpolation",d,ne(e)),e}return r}(K.Tw2CurveKey),s=oe((l=y).prototype,"value",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec2.create()}}),f=oe(l.prototype,"leftTangent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec2.create()}}),p=oe(l.prototype,"rightTangent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec2.create()}}),d=oe(l.prototype,"interpolation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=l))||c),ce=(m=W.meta.type("Tw2Vector2Curve"),b=W.meta.boolean,h=W.meta.boolean,v=W.meta.float,g=W.meta.float,w=W.meta.vector2,x=W.meta.vector2,_=W.meta.isPrivate,z=W.meta.vector2,S=W.meta.vector2,j=W.meta.vector2,E=W.meta.enums(ae),T=W.meta.list("Tw2Vector2Key"),O=W.meta.float,R=W.meta.isPrivate,m((H=q=function(e){$(o,e);var t,r,n,i=te(o);function o(){var e;J(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Z(e=i.call.apply(i,[this].concat(r)),"cycle",A,ne(e)),Z(e,"reversed",M,ne(e)),Z(e,"timeOffset",C,ne(e)),Z(e,"timeScale",k,ne(e)),Z(e,"startValue",I,ne(e)),Z(e,"currentValue",L,ne(e)),Z(e,"endValue",G,ne(e)),Z(e,"startTangent",F,ne(e)),Z(e,"endTangent",B,ne(e)),Z(e,"interpolation",N,ne(e)),Z(e,"keys",U,ne(e)),Z(e,"length",V,ne(e)),e}return t=o,(r=[{key:"Sort",value:function(){K.Tw2Curve.Sort2(this)}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.currentValue)}},{key:"GetValueAt",value:function(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return X.vec2.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?X.vec2.copy(t,this.startValue):X.vec2.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);var r=this.keys[0],n=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=n.time)return this.Interpolate(e,n,null,t);for(var i=0;i+1<this.keys.length&&(r=this.keys[i],n=this.keys[i+1],!(r.time<=e&&n.time>e));++i);return this.Interpolate(e,r,n,t)}},{key:"Interpolate",value:function(e,t,r,n){X.vec2.copy(n,this.startValue);var i=this.startValue,o=this.endValue,a=this.interpolation,u=this.length;switch(null!==t&&(a=t.interpolation,e-=t.time),a){case ae.LINEAR:return t&&r?(i=t.value,o=r.value,u=r.time-t.time):r?(o=r.value,u=r.time):t&&(i=t.value,u=this.length-t.time),n[0]=i[0]+(o[0]-i[0])*(e/u),n[1]=i[1]+(o[1]-i[1])*(e/u),n;case ae.HERMITE:var c=this.startTangent,l=this.endTangent;t&&r?(i=t.value,c=t.rightTangent,o=r.value,l=r.leftTangent,u=r.time-t.time):r?(o=r.value,l=r.leftTangent,u=r.time):t&&(i=t.value,c=t.rightTangent,u=this.length-t.time);var s=e/u,f=s*s,p=f*s,d=-2*p+3*f,y=1-d,m=p-f,b=s+m-f;return n[0]=i[0]*y+o[0]*d+c[0]*b+l[0]*m,n[1]=i[1]*y+o[1]*d+c[1]*b+l[1]*m,n;default:return n}}}])&&Q(t.prototype,r),n&&Q(t,n),o}(K.Tw2Curve),q.inputDimension=2,q.outputDimension=2,q.valueProperty="value",q.curveType=K.Tw2Curve.Type.CURVE2,q.Key=ue,q.Interpolation=ae,A=oe((D=H).prototype,"cycle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=oe(D.prototype,"reversed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=oe(D.prototype,"timeOffset",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=oe(D.prototype,"timeScale",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),I=oe(D.prototype,"startValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec2.create()}}),L=oe(D.prototype,"currentValue",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec2.create()}}),G=oe(D.prototype,"endValue",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec2.create()}}),F=oe(D.prototype,"startTangent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec2.create()}}),B=oe(D.prototype,"endTangent",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec2.create()}}),N=oe(D.prototype,"interpolation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=oe(D.prototype,"keys",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=oe(D.prototype,"length",[O,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=D))||P)},"./curve/curve/legacy/Tw2Vector3Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector3Key",(function(){return ue})),r.d(t,"Tw2Vector3Curve",(function(){return ce}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W=r("./global/utils/index.js"),X=r("./global/math/index.js"),K=r("./curve/curve/Tw2Curve.js");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ie(e);if(t){var i=ie(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return re(this,r)}}function re(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ae={CONSTANT:0,LINEAR:1,HERMITE:2},ue=(n=W.meta.type("Tw2Vector3Key"),i=W.meta.vector3,o=W.meta.vector3,a=W.meta.vector3,u=W.meta.enums(ae),n((y=function(e){$(r,e);var t=te(r);function r(){var e;J(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Z(e=t.call.apply(t,[this].concat(i)),"value",s,ne(e)),Z(e,"leftTangent",f,ne(e)),Z(e,"rightTangent",p,ne(e)),Z(e,"interpolation",d,ne(e)),e}return r}(K.Tw2CurveKey),s=oe((l=y).prototype,"value",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec3.create()}}),f=oe(l.prototype,"leftTangent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec3.create()}}),p=oe(l.prototype,"rightTangent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec3.create()}}),d=oe(l.prototype,"interpolation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=l))||c),ce=(m=W.meta.type("Tw2Vector3Curve"),b=W.meta.boolean,h=W.meta.boolean,v=W.meta.float,g=W.meta.float,w=W.meta.vector3,x=W.meta.vector3,_=W.meta.isPrivate,z=W.meta.vector3,S=W.meta.vector3,j=W.meta.vector3,E=W.meta.enums(ae),T=W.meta.list("Tw2Vector3Key"),O=W.meta.float,R=W.meta.isPrivate,m((H=q=function(e){$(o,e);var t,r,n,i=te(o);function o(){var e;J(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Z(e=i.call.apply(i,[this].concat(r)),"cycle",A,ne(e)),Z(e,"reversed",M,ne(e)),Z(e,"timeOffset",C,ne(e)),Z(e,"timeScale",k,ne(e)),Z(e,"startValue",I,ne(e)),Z(e,"currentValue",L,ne(e)),Z(e,"endValue",G,ne(e)),Z(e,"startTangent",F,ne(e)),Z(e,"endTangent",B,ne(e)),Z(e,"interpolation",N,ne(e)),Z(e,"keys",U,ne(e)),Z(e,"length",V,ne(e)),e}return t=o,(r=[{key:"Sort",value:function(){K.Tw2Curve.Sort2(this)}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.currentValue)}},{key:"GetValueAt",value:function(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return X.vec3.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?X.vec3.copy(t,this.startValue):X.vec3.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);var r=this.keys[0],n=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=n.time)return this.Interpolate(e,n,null,t);for(var i=0;i+1<this.keys.length&&(r=this.keys[i],n=this.keys[i+1],!(r.time<=e&&n.time>e));++i);return this.Interpolate(e,r,n,t)}},{key:"Interpolate",value:function(e,t,r,n){X.vec3.copy(n,this.startValue);var i=this.startValue,o=this.endValue,a=this.interpolation,u=this.length;switch(null!==t&&(a=t.interpolation,e-=t.time),a){case ae.LINEAR:return t&&r?(i=t.value,o=r.value,u=r.time-t.time):r?(o=r.value,u=r.time):t&&(i=t.value,u=this.length-t.time),n[0]=i[0]+(o[0]-i[0])*(e/u),n[1]=i[1]+(o[1]-i[1])*(e/u),n[2]=i[2]+(o[2]-i[2])*(e/u),n;case ae.HERMITE:var c=this.startTangent,l=this.endTangent;t&&r?(i=t.value,c=t.rightTangent,o=r.value,l=r.leftTangent,u=r.time-t.time):r?(o=r.value,l=r.leftTangent,u=r.time):t&&(i=t.value,c=t.rightTangent,u=this.length-t.time);var s=e/u,f=s*s,p=f*s,d=-2*p+3*f,y=1-d,m=p-f,b=s+m-f;return n[0]=i[0]*y+o[0]*d+c[0]*b+l[0]*m,n[1]=i[1]*y+o[1]*d+c[1]*b+l[1]*m,n[2]=i[2]*y+o[2]*d+c[2]*b+l[2]*m,n;default:return n}}}])&&Q(t.prototype,r),n&&Q(t,n),o}(K.Tw2Curve),q.inputDimension=3,q.outputDimension=3,q.valueProperty="currentValue",q.curveType=K.Tw2Curve.Type.CURVE2,q.Key=ue,q.Interpolation=ae,A=oe((D=H).prototype,"cycle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=oe(D.prototype,"reversed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=oe(D.prototype,"timeOffset",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=oe(D.prototype,"timeScale",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),I=oe(D.prototype,"startValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec3.create()}}),L=oe(D.prototype,"currentValue",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec3.create()}}),G=oe(D.prototype,"endValue",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec3.create()}}),F=oe(D.prototype,"startTangent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec3.create()}}),B=oe(D.prototype,"endTangent",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec3.create()}}),N=oe(D.prototype,"interpolation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=oe(D.prototype,"keys",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=oe(D.prototype,"length",[O,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=D))||P)},"./curve/curve/legacy/Tw2VectorCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorKey",(function(){return K})),r.d(t,"Tw2VectorCurve",(function(){return Y}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A=r("./global/utils/index.js"),M=r("./global/math/index.js"),C=r("./curve/curve/Tw2Curve.js");function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=q(e);if(t){var i=q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var W={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},X={NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3},K=(n=A.meta.type("Tw2VectorKey"),i=A.meta.vector3,o=A.meta.vector3,a=A.meta.vector3,u=A.meta.enums(X),n((y=function(e){F(r,e);var t=N(r);function r(){var e;G(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return L(e=t.call.apply(t,[this].concat(i)),"value",s,V(e)),L(e,"left",f,V(e)),L(e,"right",p,V(e)),L(e,"interpolation",d,V(e)),e}return r}(C.Tw2CurveKey),s=H((l=y).prototype,"value",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec3.create()}}),f=H(l.prototype,"left",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec3.create()}}),p=H(l.prototype,"right",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec3.create()}}),d=H(l.prototype,"interpolation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=l))||c),Y=(m=A.meta.type("Tw2VectorCurve"),b=A.meta.float,h=A.meta.vector3,v=A.meta.isPrivate,g=A.meta.enums(W),w=A.meta.list(),x=A.meta.float,_=A.meta.isPrivate,m((D=P=function(e){F(o,e);var t,r,n,i=N(o);function o(){var e;G(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return L(e=i.call.apply(i,[this].concat(r)),"start",j,V(e)),L(e,"value",E,V(e)),L(e,"extrapolation",T,V(e)),L(e,"keys",O,V(e)),L(e,"length",R,V(e)),e._currentKey=1,e}return t=o,(r=[{key:"Sort",value:function(){C.Tw2Curve.Sort(this)}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}},{key:"GetValueAt",value:function(e,t){if(0===this.length)return M.vec3.copy(t,this.value);var r=this.keys[0],n=this.keys[this.keys.length-1];if(e>=n.time)switch(this.extrapolation){case W.NONE:return M.vec3.copy(t,this.value);case W.CONSTANT:return M.vec3.copy(t,n.value);case W.GRADIENT:return M.vec3.scaleAndAdd(t,n.value,n.right,e-n.time);default:e%=n.time}else if(e<0||e<r.time)switch(this.extrapolation){case W.NONE:return M.vec3.copy(t,this.value);case W.GRADIENT:return M.vec3.scaleAndAdd(t,r.value,r.left,e*this.length-n.time);default:return M.vec3.copy(t,r.value)}for(var i=this.keys[this._currentKey],o=this.keys[this._currentKey-1];e>=i.time||e<o.time;)e<o.time&&(this._currentKey=0),this._currentKey++,i=this.keys[this._currentKey],o=this.keys[this._currentKey-1];var a=(e-o.time)/(i.time-o.time);switch(o.interpolation){case X.CONSTANT:return M.vec3.copy(t,o.value);case X.LINEAR:return t[0]=o.value[0]*(1-a)+i.value[0]*a,t[1]=o.value[1]*(1-a)+i.value[1]*a,t[2]=o.value[2]*(1-a)+i.value[2]*a,t;case X.HERMITE:var u=2*a*a*a-3*a*a+1,c=-2*a*a*a+3*a*a,l=a*a*a-2*a*a+a,s=a*a*a-a*a;return t[0]=u*o.value[0]+c*i.value[0]+l*o.right[0]+s*i.left[0],t[1]=u*o.value[1]+c*i.value[1]+l*o.right[1]+s*i.left[1],t[2]=u*o.value[2]+c*i.value[2]+l*o.right[2]+s*i.left[2],t;default:return t}}}])&&I(t.prototype,r),n&&I(t,n),o}(C.Tw2Curve),P.inputDimension=3,P.outputDimension=3,P.valueProperty="value",P.curveType=C.Tw2Curve.Type.CURVE,P.Key=K,P.Extrapolation=W,P.Interpolation=X,j=H((S=D).prototype,"start",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=H(S.prototype,"value",[h,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec3.create()}}),T=H(S.prototype,"extrapolation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=H(S.prototype,"keys",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=H(S.prototype,"length",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=S))||z)},"./curve/curve/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/curve/legacy/Tw2ColorCurve.js");r.d(t,"Tw2ColorKey",(function(){return n.Tw2ColorKey})),r.d(t,"Tw2ColorCurve",(function(){return n.Tw2ColorCurve}));var i=r("./curve/curve/legacy/Tw2ColorCurve2.js");r.d(t,"Tw2ColorKey2",(function(){return i.Tw2ColorKey2})),r.d(t,"Tw2ColorCurve2",(function(){return i.Tw2ColorCurve2}));var o=r("./curve/curve/legacy/Tw2QuaternionCurve.js");r.d(t,"Tw2QuaternionKey2",(function(){return o.Tw2QuaternionKey2})),r.d(t,"Tw2QuaternionCurve",(function(){return o.Tw2QuaternionCurve}));var a=r("./curve/curve/legacy/Tw2RandomConstantCurve.js");r.d(t,"Tw2RandomConstantCurve",(function(){return a.Tw2RandomConstantCurve}));var u=r("./curve/curve/legacy/Tw2RigidOrientation.js");r.d(t,"Tw2Torque",(function(){return u.Tw2Torque})),r.d(t,"Tw2RigidOrientation",(function(){return u.Tw2RigidOrientation}));var c=r("./curve/curve/legacy/Tw2RotationCurve.js");r.d(t,"Tw2QuaternionKey",(function(){return c.Tw2QuaternionKey})),r.d(t,"Tw2RotationCurve",(function(){return c.Tw2RotationCurve}));var l=r("./curve/curve/legacy/Tw2ScalarCurve.js");r.d(t,"Tw2ScalarKey",(function(){return l.Tw2ScalarKey})),r.d(t,"Tw2ScalarCurve",(function(){return l.Tw2ScalarCurve}));var s=r("./curve/curve/legacy/Tw2ScalarCurve2.js");r.d(t,"Tw2ScalarKey2",(function(){return s.Tw2ScalarKey2})),r.d(t,"Tw2ScalarCurve2",(function(){return s.Tw2ScalarCurve2}));var f=r("./curve/curve/legacy/Tw2SineCurve.js");r.d(t,"Tw2SineCurve",(function(){return f.Tw2SineCurve}));var p=r("./curve/curve/legacy/Tw2Vector2Curve.js");r.d(t,"Tw2Vector2Key",(function(){return p.Tw2Vector2Key})),r.d(t,"Tw2Vector2Curve",(function(){return p.Tw2Vector2Curve}));var d=r("./curve/curve/legacy/Tw2Vector3Curve.js");r.d(t,"Tw2Vector3Key",(function(){return d.Tw2Vector3Key})),r.d(t,"Tw2Vector3Curve",(function(){return d.Tw2Vector3Curve}));var y=r("./curve/curve/legacy/Tw2VectorCurve.js");r.d(t,"Tw2VectorKey",(function(){return y.Tw2VectorKey})),r.d(t,"Tw2VectorCurve",(function(){return y.Tw2VectorCurve}))},"./curve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/Tw2CurveSet.js");r.d(t,"Tw2CurveSet",(function(){return n.Tw2CurveSet}));var i=r("./curve/Tw2ValueBinding.js");r.d(t,"Tw2ValueBinding",(function(){return i.Tw2ValueBinding})),r.d(t,"ErrBindingValueUndefined",(function(){return i.ErrBindingValueUndefined})),r.d(t,"ErrBindingType",(function(){return i.ErrBindingType})),r.d(t,"ErrBindingReference",(function(){return i.ErrBindingReference}));var o=r("./curve/curve/index.js");r.d(t,"Tw2EventKey",(function(){return o.Tw2EventKey})),r.d(t,"Tw2EventCurve",(function(){return o.Tw2EventCurve})),r.d(t,"Tw2PerlinCurve",(function(){return o.Tw2PerlinCurve})),r.d(t,"Tw2CurveKey",(function(){return o.Tw2CurveKey})),r.d(t,"Tw2Curve",(function(){return o.Tw2Curve})),r.d(t,"Tw2ColorKey",(function(){return o.Tw2ColorKey})),r.d(t,"Tw2ColorCurve",(function(){return o.Tw2ColorCurve})),r.d(t,"Tw2ColorKey2",(function(){return o.Tw2ColorKey2})),r.d(t,"Tw2ColorCurve2",(function(){return o.Tw2ColorCurve2})),r.d(t,"Tw2QuaternionKey2",(function(){return o.Tw2QuaternionKey2})),r.d(t,"Tw2QuaternionCurve",(function(){return o.Tw2QuaternionCurve})),r.d(t,"Tw2RandomConstantCurve",(function(){return o.Tw2RandomConstantCurve})),r.d(t,"Tw2Torque",(function(){return o.Tw2Torque})),r.d(t,"Tw2RigidOrientation",(function(){return o.Tw2RigidOrientation})),r.d(t,"Tw2QuaternionKey",(function(){return o.Tw2QuaternionKey})),r.d(t,"Tw2RotationCurve",(function(){return o.Tw2RotationCurve})),r.d(t,"Tw2ScalarKey",(function(){return o.Tw2ScalarKey})),r.d(t,"Tw2ScalarCurve",(function(){return o.Tw2ScalarCurve})),r.d(t,"Tw2ScalarKey2",(function(){return o.Tw2ScalarKey2})),r.d(t,"Tw2ScalarCurve2",(function(){return o.Tw2ScalarCurve2})),r.d(t,"Tw2SineCurve",(function(){return o.Tw2SineCurve})),r.d(t,"Tw2Vector2Key",(function(){return o.Tw2Vector2Key})),r.d(t,"Tw2Vector2Curve",(function(){return o.Tw2Vector2Curve})),r.d(t,"Tw2Vector3Key",(function(){return o.Tw2Vector3Key})),r.d(t,"Tw2Vector3Curve",(function(){return o.Tw2Vector3Curve})),r.d(t,"Tw2VectorKey",(function(){return o.Tw2VectorKey})),r.d(t,"Tw2VectorCurve",(function(){return o.Tw2VectorCurve}));var a=r("./curve/legacy/index.js");r.d(t,"Tw2WbgTrack",(function(){return a.Tw2WbgTrack})),r.d(t,"Tw2WbgTransformTrack",(function(){return a.Tw2WbgTransformTrack})),r.d(t,"Tw2TransformTrack",(function(){return a.Tw2TransformTrack})),r.d(t,"Tw2MayaEulerRotationCurve",(function(){return a.Tw2MayaEulerRotationCurve})),r.d(t,"Tw2MayaScalarCurve",(function(){return a.Tw2MayaScalarCurve})),r.d(t,"Tw2MayaVector3Curve",(function(){return a.Tw2MayaVector3Curve})),r.d(t,"Tw2MayaAnimationEngine",(function(){return a.Tw2MayaAnimationEngine}));var u=r("./curve/sequencer/index.js");r.d(t,"TriColorSequencer",(function(){return u.TriColorSequencer})),r.d(t,"Tw2CurveColor",(function(){return u.Tw2CurveColor})),r.d(t,"Tw2CurveEulerRotation",(function(){return u.Tw2CurveEulerRotation})),r.d(t,"Tw2CurveVector3",(function(){return u.Tw2CurveVector3})),r.d(t,"Tw2CurveSequencer",(function(){return u.Tw2CurveSequencer})),r.d(t,"Tw2ColorSequencer",(function(){return u.Tw2ColorSequencer})),r.d(t,"Tw2EulerRotation",(function(){return u.Tw2EulerRotation})),r.d(t,"Tw2QuaternionSequencer",(function(){return u.Tw2QuaternionSequencer})),r.d(t,"Tw2RGBAScalarSequencer",(function(){return u.Tw2RGBAScalarSequencer})),r.d(t,"Tw2ScalarSequencer",(function(){return u.Tw2ScalarSequencer})),r.d(t,"Tw2VectorSequencer",(function(){return u.Tw2VectorSequencer})),r.d(t,"Tw2XYZScalarSequencer",(function(){return u.Tw2XYZScalarSequencer})),r.d(t,"Tw2YPRSequencer",(function(){return u.Tw2YPRSequencer}))},"./curve/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/legacy/tracks/index.js");r.d(t,"Tw2WbgTrack",(function(){return n.Tw2WbgTrack})),r.d(t,"Tw2WbgTransformTrack",(function(){return n.Tw2WbgTransformTrack})),r.d(t,"Tw2TransformTrack",(function(){return n.Tw2TransformTrack}));var i=r("./curve/legacy/maya/index.js");r.d(t,"Tw2MayaEulerRotationCurve",(function(){return i.Tw2MayaEulerRotationCurve})),r.d(t,"Tw2MayaScalarCurve",(function(){return i.Tw2MayaScalarCurve})),r.d(t,"Tw2MayaVector3Curve",(function(){return i.Tw2MayaVector3Curve})),r.d(t,"Tw2MayaAnimationEngine",(function(){return i.Tw2MayaAnimationEngine}))},"./curve/legacy/maya/Tw2MayaAnimationEngine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaAnimationEngine",(function(){return _}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js"),h=r("./global/math/index.js"),v=r("./core/index.js");function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=b.meta.type("Tw2MayaAnimationEngine"),i=b.meta.list(),o=b.meta.list(),a=b.meta.list(),u=b.meta.readOnly,n((m=y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"curves",s,this),g(this,"hermiteSegments",f,this),g(this,"bezierSegments",p,this),g(this,"_id",d,this),this._currentCurveIndex=0,this._evalCache=null}var t,r,n;return t=e,(r=[{key:"Evaluate",value:function(t,r){if(this.curves.length<=t)return 0;if(this._currentCurveIndex=t,!this._evalCache){this._evalCache=new Array(this.curves.length);for(var n=0;n<this._evalCache.length;++n)this._evalCache[n]=-1}var i=this.curves[t],o=i[e.AnimCurveFields.SEGMENT_OFFSET],a=null;return r<(a=i[e.AnimCurveFields.IS_WEIGHTED]?this.bezierSegments:this.hermiteSegments)[o][e.AnimSegment.TIME]?i[e.AnimCurveFields.PRE_INFINITY]===e.INFINITY?a[o][e.AnimSegment.VALUE]:this._EvaluateInfinities(i,a,o,r,!0):r>i[e.AnimCurveFields.END_TIME]?i[e.AnimCurveFields.POST_INFINITY]===e.INFINITY?i[e.AnimCurveFields.END_VALUE]:this._EvaluateInfinities(i,a,o,r,!1):this._EvaluateImpl(i,a,o,r)}},{key:"_EvaluateImpl",value:function(t,r,n,i){var o,a=!1,u=null,c=null;if(this._evalCache[this._currentCurveIndex]>=0)if(c=n+this._evalCache[this._currentCurveIndex],this._evalCache[this._currentCurveIndex]<t[e.AnimCurveFields.NUM_SEGMENTS-1]&&i>r[c][e.AnimSegment.TIME]){if(i===r[u=n+this._evalCache[this._currentCurveIndex]+1][e.AnimSegment.TIME])return this._evalCache[this._currentCurveIndex]++,r[u][e.AnimSegment.VALUE];i<r[u][e.AnimSegment.TIME]?(o=this._evalCache[this._currentCurveIndex]+1,a=!0):u=null}else if(this._evalCache[this._currentCurveIndex]>0&&i<r[c][e.AnimSegment.TIME]){var l=n+this._evalCache[this._currentCurveIndex]-1;if(i>r[l][e.AnimSegment.TIME])o=this._evalCache[this._currentCurveIndex],a=!0;else if(i===r[l][e.AnimSegment.TIME])return this._evalCache[this._currentCurveIndex]--,r[l][e.AnimSegment.VALUE]}if(!a){var s=this._Find(t,i,r,n);if(o=s[1],s[0]||0===o)return o===t[e.AnimCurveFields.NUM_SEGMENTS]?(o--,this._evalCache[this._currentCurveIndex]=o,t[e.AnimCurveFields.END_VALUE]):(this._evalCache[this._currentCurveIndex]=o,r[n+o][e.AnimSegment.VALUE]);if(o===t[e.AnimCurveFields.NUM_SEGMENTS]+1)return this._evalCache[this._currentCurveIndex]=0,t[e.AnimCurveFields.END_VALUE]}if(this._evalCache[this._currentCurveIndex]!==o-1&&(this._evalCache[this._currentCurveIndex]=o-1,c=n+this._evalCache[this._currentCurveIndex],null===u&&(u=n+o)),t[e.AnimCurveFields.IS_WEIGHTED]){var f=r[c];if(f[e.BezierSegment.IS_STEP])return f[e.BezierSegment.VALUE];if(f[e.BezierSegment.IS_STEP_NEXT])return null===u?t[e.AnimCurveFields.END_VALUE]:r[u][e.BezierSegment.VALUE];var p=t[e.AnimCurveFields.END_TIME];return this._evalCache[this._currentCurveIndex]+1<t[e.AnimCurveFields.NUM_SEGMENTS]&&(p=r[u][e.BezierSegment.TIME]),this._EvaluateBezier(f,i,p)}var d=r[c];return d[e.HermiteSegment.IS_STEP]?d[e.HermiteSegment.VALUE]:d[e.HermiteSegment.IS_STEP_NEXT]?null===u?t[e.AnimCurveFields.END_VALUE]:r[u][e.HermiteSegment.VALUE]:this._EvaluateHermite(d,i)}},{key:"_EvaluateInfinities",value:function(e,t,r,n,i){throw new v.ErrFeatureNotImplemented({feature:"Maya animation engine evaluate infinities"})}},{key:"_EvaluateHermite",value:function(t,r){var n=r-t[e.HermiteSegment.TIME],i=t[e.HermiteSegment.COEFF];return n*(n*(n*i[0]+i[1])+i[2])+i[3]}},{key:"_EvaluateBezier",value:function(t,r,n){var i,o;if(o=(r-t[e.BezierSegment.TIME])/(n-t[e.BezierSegment.TIME]),t[e.BezierSegment.IS_LINEAR])i=o;else{var a=h.vec4.create();a[3]=t[e.BezierSegment.COEFF][3],a[2]=t[e.BezierSegment.COEFF][2],a[1]=t[e.BezierSegment.COEFF][1],a[0]=t[e.BezierSegment.COEFF][0]-o;var u=[];i=1===h.curve.polyZeroes(a,3,0,1,1,1,u)?u[0]:0}var c=t[e.BezierSegment.POLYY];return i*(i*(i*c[3]+c[2])+c[1])+c[0]}},{key:"_Find",value:function(t,r,n,i){var o,a,u,c,l=0,s=0;if((o=t[e.AnimCurveFields.NUM_SEGMENTS]+1)>0){u=0,c=o-1;do{if(r<(s=(a=u+c>>1)<o-1?n[i+a][e.AnimSegment.TIME]:t[e.AnimCurveFields.END_TIME]))c=a-1;else{if(!(r>s))return[!0,l=a];u=a+1}}while(u<=c);l=u}return[!1,l]}},{key:"GetNumberOfCurves",value:function(){return this.curves.length}},{key:"GetLength",value:function(t){if(t<0||t>=this.curves.length)return 0;var r,n=this.curves[t];return r=n[e.AnimCurveFields.IS_WEIGHTED]?this.bezierSegments[n[e.AnimCurveFields.SEGMENT_OFFSET]]:this.hermiteSegments[n[e.AnimCurveFields.SEGMENT_OFFSET]],n[e.AnimCurveFields.END_TIME]-r[e.AnimSegment.TIME]}}])&&w(t.prototype,r),n&&w(t,n),e}(),y.AnimCurveFields={NUM_SEGMENTS:0,SEGMENT_OFFSET:1,END_TIME:2,END_VALUE:3,IN_TANGENT:4,OUT_TANGENT:5,PRE_INFINITY:6,POST_INFINITY:7,IS_WEIGHTED:8},y.AnimSegment={TIME:0,VALUE:1},y.HermiteSegment={TIME:0,VALUE:1,COEFF:2,IS_STEP:3,IS_STEP_NEXT:4},y.BezierSegment={TIME:0,VALUE:1,COEFF:2,POLYY:3,IS_STEP:4,IS_STEP_NEXT:5,IS_LINEAR:6},y.INFINITY=0,s=x((l=m).prototype,"curves",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=x(l.prototype,"hermiteSegments",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=x(l.prototype,"bezierSegments",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=x(l.prototype,"_id",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(b.generateID)()}}),c=l))||c)},"./curve/legacy/maya/Tw2MayaEulerRotationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaEulerRotationCurve",(function(){return B}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T=r("./global/utils/index.js"),O=r("./global/math/index.js"),R=r("./curve/index.js");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var i=G(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return I(this,r)}}function I(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var B=(n=T.meta.type("Tw2MayaEulerRotationCurve"),i=T.meta.float,o=T.meta.float,a=T.meta.float,u=T.meta.struct("Tw2MayaAnimationEngine"),c=T.meta.vector3,l=T.meta.isPrivate,s=T.meta.boolean,f=T.meta.quaternion,p=T.meta.isPrivate,d=T.meta.float,y=T.meta.isPrivate,n((E=j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(o,e);var t,r,n,i=k(o);function o(){var e;A(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return D(e=i.call.apply(i,[this].concat(r)),"xIndex",h,L(e)),D(e,"yIndex",v,L(e)),D(e,"zIndex",g,L(e)),D(e,"animationEngine",w,L(e)),D(e,"eulerValue",x,L(e)),D(e,"updateQuaternion",_,L(e)),D(e,"quatValue",z,L(e)),D(e,"length",S,L(e)),e}return t=o,(r=[{key:"Sort",value:function(){this.ComputeLength()}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){if(this.animationEngine&&(this.xIndex&&(this.eulerValue[0]=this.animationEngine.Evaluate(this.xIndex,e)),this.yIndex&&(this.yIndex===this.xIndex?this.eulerValue[1]=this.eulerValue[0]:this.eulerValue[1]=this.animationEngine.Evaluate(this.yIndex,e)),this.zIndex&&(this.zIndex===this.xIndex?this.eulerValue[2]=this.eulerValue[0]:this.eulerValue[2]=this.animationEngine.Evaluate(this.zIndex,e)),this.updateQuaternion)){var t=Math.sin(this.eulerValue[0]/2),r=Math.cos(this.eulerValue[0]/2),n=Math.sin(this.eulerValue[1]/2),i=Math.cos(this.eulerValue[1]/2),o=Math.sin(this.eulerValue[2]/2),a=Math.cos(this.eulerValue[2]/2);this.quatValue[0]=t*i*o+r*n*a,this.quatValue[1]=t*i*a-r*n*o,this.quatValue[2]=r*i*o-t*n*a,this.quatValue[3]=r*i*a+t*n*o}}},{key:"ComputeLength",value:function(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&(this.length=0,this.xIndex>=0&&(this.length=this.animationEngine.GetLength(this.xIndex)),this.yIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.yIndex))),this.zIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.zIndex))))}}])&&M(t.prototype,r),n&&M(t,n),o}(R.Tw2Curve),j.outputDimension=3,j.valueProperty="eulerValue",j.curveType=R.Tw2Curve.Type.CURVE_MAYA,h=F((b=E).prototype,"xIndex",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=F(b.prototype,"yIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),g=F(b.prototype,"zIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),w=F(b.prototype,"animationEngine",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=F(b.prototype,"eulerValue",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.create()}}),_=F(b.prototype,"updateQuaternion",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=F(b.prototype,"quatValue",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.quat.create()}}),S=F(b.prototype,"length",[d,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=b))||m)},"./curve/legacy/maya/Tw2MayaScalarCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaScalarCurve",(function(){return P}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./global/utils/index.js"),g=r("./curve/index.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P=(n=v.meta.type("Tw2MayaScalarCurve"),i=v.meta.float,o=v.meta.struct("Tw2MayaAnimationEngine"),a=v.meta.float,u=v.meta.isPrivate,c=v.meta.float,l=v.meta.isPrivate,n((h=b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,r,n,i=j(o);function o(){var e;_(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(e=i.call.apply(i,[this].concat(r)),"index",p,T(e)),x(e,"animationEngine",d,T(e)),x(e,"value",y,T(e)),x(e,"length",m,T(e)),e}return t=o,(r=[{key:"Sort",value:function(){this.ComputeLength()}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.animationEngine&&(this.value=this.animationEngine.Evaluate(this.index,e))}},{key:"ComputeLength",value:function(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&this.index>=0&&(this.length=this.animationEngine.GetLength(this.index))}}])&&z(t.prototype,r),n&&z(t,n),o}(g.Tw2Curve),b.outputDimension=1,b.valueProperty="value",b.curveType=g.Tw2Curve.Type.CURVE_MAYA,p=R((f=h).prototype,"index",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),d=R(f.prototype,"animationEngine",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=R(f.prototype,"value",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=R(f.prototype,"length",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=f))||s)},"./curve/legacy/maya/Tw2MayaVector3Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaVector3Curve",(function(){return k}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_=r("./global/utils/index.js"),z=r("./global/math/index.js"),S=r("./curve/index.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=M(e);if(t){var i=M(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return D(this,r)}}function D(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?A(e):t}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var k=(n=_.meta.type("Tw2MayaVector3Curve"),i=_.meta.float,o=_.meta.float,a=_.meta.float,u=_.meta.struct("Tw2MayaAnimationEngine"),c=_.meta.vector3,l=_.meta.isPrivate,s=_.meta.float,f=_.meta.isPrivate,n((x=w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(o,e);var t,r,n,i=P(o);function o(){var e;T(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(e=i.call.apply(i,[this].concat(r)),"xIndex",y,A(e)),E(e,"yIndex",m,A(e)),E(e,"zIndex",b,A(e)),E(e,"animationEngine",h,A(e)),E(e,"value",v,A(e)),E(e,"length",g,A(e)),e}return t=o,(r=[{key:"Sort",value:function(){this.ComputeLength()}},{key:"GetLength",value:function(){return this.length}},{key:"UpdateValue",value:function(e){this.animationEngine&&(this.xIndex&&(this.value[0]=this.animationEngine.Evaluate(this.xIndex,e)),this.yIndex&&(this.yIndex===this.xIndex?this.value[1]=this.value[0]:this.value[1]=this.animationEngine.Evaluate(this.yIndex,e)),this.zIndex&&(this.zIndex===this.xIndex?this.value[2]=this.value[0]:this.value[2]=this.animationEngine.Evaluate(this.zIndex,e)))}},{key:"ComputeLength",value:function(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&(this.length=0,this.xIndex>=0&&(this.length=this.animationEngine.GetLength(this.xIndex)),this.yIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.yIndex))),this.zIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.zIndex))))}}])&&O(t.prototype,r),n&&O(t,n),o}(S.Tw2Curve),w.outputDimension=3,w.valueProperty="value",w.curveType=S.Tw2Curve.Type.CURVE_MAYA,y=C((d=x).prototype,"xIndex",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),m=C(d.prototype,"yIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),b=C(d.prototype,"zIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),h=C(d.prototype,"animationEngine",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C(d.prototype,"value",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.vec3.create()}}),g=C(d.prototype,"length",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=d))||p)},"./curve/legacy/maya/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/legacy/maya/Tw2MayaEulerRotationCurve.js");r.d(t,"Tw2MayaEulerRotationCurve",(function(){return n.Tw2MayaEulerRotationCurve}));var i=r("./curve/legacy/maya/Tw2MayaScalarCurve.js");r.d(t,"Tw2MayaScalarCurve",(function(){return i.Tw2MayaScalarCurve}));var o=r("./curve/legacy/maya/Tw2MayaVector3Curve.js");r.d(t,"Tw2MayaVector3Curve",(function(){return o.Tw2MayaVector3Curve}));var a=r("./curve/legacy/maya/Tw2MayaAnimationEngine.js");r.d(t,"Tw2MayaAnimationEngine",(function(){return a.Tw2MayaAnimationEngine}))},"./curve/legacy/tracks/Tw2TransformTrack.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TransformTrack",(function(){return B}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C=r("./global/utils/index.js"),k=r("./global/index.js"),I=r("./global/math/index.js");function L(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var B=(n=C.meta.type("Tw2TransformTrack"),i=C.meta.string,o=C.meta.path,a=C.meta.struct(),u=C.meta.string,c=C.meta.boolean,l=C.meta.float,s=C.meta.vector3,f=C.meta.quaternion,p=C.meta.vector3,d=C.meta.matrix4,y=C.meta.struct(),m=C.meta.struct(),b=C.meta.struct(),h=C.meta.readOnly,n((w=F((g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L(this,"name",w,this),L(this,"resPath",x,this),L(this,"res",_,this),L(this,"group",z,this),L(this,"cycle",S,this),L(this,"duration",j,this),L(this,"translation",E,this),L(this,"rotation",T,this),L(this,"scale",O,this),L(this,"scaleShear",R,this),L(this,"positionCurve",P,this),L(this,"orientationCurve",D,this),L(this,"scaleCurve",A,this),L(this,"_id",M,this)}var t,r,n;return t=e,(r=[{key:"Initialize",value:function(){""!==this.resPath&&(this.res=k.tw2.GetResource(this.resPath))}},{key:"GetLength",value:function(){return this.duration}},{key:"UpdateValue",value:function(e){this.res&&this.res.IsGood()&&(this.positionCurve||this.FindTracks(),this.positionCurve&&(this.cycle&&(e%=this.duration),e>this.duration||e<0||(I.curve.evaluate(this.positionCurve,e,this.translation,this.cycle,this.duration),I.curve.evaluate(this.orientationCurve,e,this.rotation,this.cycle,this.duration),I.quat.normalize(this.rotation,this.rotation),I.curve.evaluate(this.scaleCurve,e,this.scaleShear,this.cycle,this.duration),I.mat4.getScaling(this.scale,this.scaleCurve))))}},{key:"FindTracks",value:function(){for(var e=null,t=0;t<this.res.animations.length;++t)for(var r=0;r<this.res.animations[t].trackGroups.length;++r)if(this.res.animations[t].trackGroups[r].name===this.group){this.duration=this.res.animations[t].duration,e=this.res.animations[t].trackGroups[r];break}if(e)for(var n=0;n<e.transformTracks.length;++n)if(this.name===e.transformTracks[n].name){this.positionCurve=e.transformTracks[n].position,this.orientationCurve=e.transformTracks[n].orientation,this.scaleCurve=e.transformTracks[n].scaleShear;break}}}])&&G(t.prototype,r),n&&G(t,n),e}()).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=F(g.prototype,"resPath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=F(g.prototype,"res",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=F(g.prototype,"group",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=F(g.prototype,"cycle",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=F(g.prototype,"duration",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=F(g.prototype,"translation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.vec3.create()}}),T=F(g.prototype,"rotation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.quat.create()}}),O=F(g.prototype,"scale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.vec3.fromValues(0,0,0)}}),R=F(g.prototype,"scaleShear",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.mat4.create()}}),P=F(g.prototype,"positionCurve",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=F(g.prototype,"orientationCurve",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=F(g.prototype,"scaleCurve",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=F(g.prototype,"_id",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(C.generateID)()}}),v=g))||v)},"./curve/legacy/tracks/Tw2WbgTrack.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2WbgTrack",(function(){return a})),r.d(t,"Tw2WbgTransformTrack",(function(){return u}));var n=r("./global/utils/index.js"),i=r("./global/index.js"),o=r("./global/math/index.js");function a(){this.name="",this.geometryResPath="",this.geometryRes=null,this.group="",this.duration=0,this.cycle=!1,this._id=Object(n.generateID)(),this.Initialize=function(){var e=this;this.geometryResPath&&(this.geometryRes=i.tw2.GetResource(this.geometryResPath,(function(t){return function(e){if(e.name&&e.group&&e.geometryRes)for(var t=0;t<e.geometryRes.animations.length;++t)for(var r=e.geometryRes.animations[t],n=0;n<r.trackGroups.length;++n)r.trackGroups[n].name===e.group&&e._ApplyTracks(r.trackGroups[n],r.duration)}(e)})))},this.UpdateValue=function(e){this._TracksReady()&&(this.cycle&&(e%=this.duration),e<=this.duration&&e>=0&&this._UpdateValue(e))}}function u(){this._id=Object(n.generateID)(),this.translation=o.vec3.create(),this.rotation=o.quat.create(),this.rotation[3]=1,this.scale=o.vec3.create();var e=null,t=null,r=null,i=o.mat4.create();this._TracksReady=function(){return e||t||r},this._ApplyTracks=function(n,i){for(var o=0;o<n.transformTracks.length;++o){var a=n.transformTracks[o];a.name===this.name&&(this.duration=i,e=a.position,t=a.orientation,r=a.scaleShear)}this.UpdateValue(0)},this._UpdateValue=function(n){e&&o.curve.evaluate(e,n,this.translation,this.cycle,this.duration),t&&(o.curve.evaluate(t,n,this.rotation,this.cycle,this.duration),o.quat.normalize(this.rotation,this.rotation)),r&&o.curve.evaluate(r,n,i,this.cycle,this.duration),this.scale[0]=i[0],this.scale[1]=i[5],this.scale[2]=i[10]}}Object(n.defineMetadata)("type","Tw2WbgTrack",a),u.prototype=new a,Object(n.defineMetadata)("type","Tw2WbgTransformTrack",u)},"./curve/legacy/tracks/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/legacy/tracks/Tw2WbgTrack.js");r.d(t,"Tw2WbgTrack",(function(){return n.Tw2WbgTrack})),r.d(t,"Tw2WbgTransformTrack",(function(){return n.Tw2WbgTransformTrack}));var i=r("./curve/legacy/tracks/Tw2TransformTrack.js");r.d(t,"Tw2TransformTrack",(function(){return i.Tw2TransformTrack}))},"./curve/sequencer/TriColorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriColorSequencer",(function(){return P}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h=r("./global/utils/index.js"),v=r("./global/math/index.js"),g=r("./curve/sequencer/Tw2CurveSequencer.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P=(n=h.meta.type("TriColorSequencer"),i=h.meta.todo("Make backwards compatible with old Tw2ColorSequencer"),o=h.meta.stage(2),a=h.meta.string,u=h.meta.list("Tr2CurveScalar"),c=h.meta.vector4,l=h.meta.isPrivate,n(s=i(s=o((b=m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,r,n,i=j(o);function o(){var e;_(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(e=i.call.apply(i,[this].concat(r)),"name",p,T(e)),x(e,"functions",d,T(e)),x(e,"value",y,T(e)),e}return t=o,(r=[{key:"Sort",value:function(){g.Tw2CurveSequencer.Sort(this)}},{key:"GetLength",value:function(){return g.Tw2CurveSequencer.GetLengthFromKeys(this)}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}},{key:"GetValueAt",value:function(e,t){var r=g.Tw2CurveSequencer.global.vec4_0;v.vec4.set(r,0,0,0,0);for(var n=0;n<this.functions.length;n++)this.functions[n].GetValueAt(e,t),v.vec4.add(t,t,r);return t}}])&&z(t.prototype,r),n&&z(t,n),o}(g.Tw2CurveSequencer),m.inputDimension=4,m.outputDimension=4,m.valueProperty="value",m.curveType=g.Tw2CurveSequencer.Type.SEQUENCER,m.childArray="functions",p=R((f=b).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=R(f.prototype,"functions",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=R(f.prototype,"value",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec4.create()}}),s=f))||s)||s)||s)},"./curve/sequencer/Tw2CurveColor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveColor",(function(){return G}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j=r("./global/utils/index.js"),E=r("./global/math/index.js"),T=r("./curve/sequencer/Tw2CurveSequencer.js");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var G=(n=j.meta.type("Tw2CurveColor","Tr2CurveColor"),i=j.meta.stage(2),o=j.meta.string,a=j.meta.raw("Tr2CurveScalar"),u=j.meta.raw("Tr2CurveScalar"),c=j.meta.raw("Tr2CurveScalar"),l=j.meta.raw("Tr2CurveScalar"),s=j.meta.color,f=j.meta.isPrivate,p=j.meta.notImplemented,d=j.meta.boolean,n(y=i((S=z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(o,e);var t,r,n,i=M(o);function o(){var e;P(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return R(e=i.call.apply(i,[this].concat(r)),"name",b,k(e)),R(e,"r",h,k(e)),R(e,"g",v,k(e)),R(e,"b",g,k(e)),R(e,"a",w,k(e)),R(e,"currentValue",x,k(e)),R(e,"srgbOutput",_,k(e)),e}return t=o,(r=[{key:"Sort",value:function(){T.Tw2CurveSequencer.Sort2(this)}},{key:"GetLength",value:function(){return T.Tw2CurveSequencer.GetLengthFromProperties(this)}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.currentValue)}},{key:"GetValueAt",value:function(e,t){return t[0]=this.r?this.r.GetValueAt(e):0,t[1]=this.g?this.g.GetValueAt(e):0,t[2]=this.b?this.b.GetValueAt(e):0,t[3]=this.a?this.a.GetValueAt(e):0,t}}])&&D(t.prototype,r),n&&D(t,n),o}(T.Tw2CurveSequencer),z.inputDimension=1,z.outputDimension=4,z.valueProperty="currentValue",z.curveType=T.Tw2CurveSequencer.Type.SEQUENCER,z.childProperties=["r","g","b","a"],b=L((m=S).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=L(m.prototype,"r",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=L(m.prototype,"g",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=L(m.prototype,"b",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=L(m.prototype,"a",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=L(m.prototype,"currentValue",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.vec4.create()}}),_=L(m.prototype,"srgbOutput",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=m))||y)||y)},"./curve/sequencer/Tw2CurveEulerRotation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveEulerRotation",(function(){return M}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w=r("./curve/sequencer/Tw2CurveSequencer.js"),x=r("./global/utils/index.js"),_=r("./global/math/index.js");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var i=D(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var M=(n=x.meta.type("Tw2CurveEulerRotation","Tr2CurveEulerRotation"),i=x.meta.stage(2),o=x.meta.string,a=x.meta.raw("Tr2CurveScalar"),u=x.meta.raw("Tr2CurveScalar"),c=x.meta.raw("Tr2CurveScalar"),l=x.meta.quaternion,s=x.meta.isPrivate,n(f=i((g=v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(o,e);var t,r,n,i=O(o);function o(){var e;j(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(e=i.call.apply(i,[this].concat(r)),"name",d,P(e)),S(e,"pitch",y,P(e)),S(e,"roll",m,P(e)),S(e,"yaw",b,P(e)),S(e,"currentValue",h,P(e)),e}return t=o,(r=[{key:"Sort",value:function(){w.Tw2CurveSequencer.Sort2(this)}},{key:"GetLength",value:function(){return w.Tw2CurveSequencer.GetLengthFromProperties(this)}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.currentValue)}},{key:"GetValueAt",value:function(e,t){var r=this.yaw?this.yaw.GetValueAt(e):0,n=this.pitch?this.pitch.GetValueAt(e):0,i=this.roll?this.roll.GetValueAt(e):0,o=Math.sin(r/2),a=Math.cos(r/2),u=Math.sin(n/2),c=Math.cos(n/2),l=Math.sin(i/2),s=Math.cos(i/2);return t[0]=o*c*l+a*u*s,t[1]=o*c*s-a*u*l,t[2]=a*c*l-o*u*s,t[3]=a*c*s+o*u*l,t}}])&&E(t.prototype,r),n&&E(t,n),o}(w.Tw2CurveSequencer),v.inputDimension=1,v.outputDimension=4,v.valueProperty="currentValue",v.curveType=w.Tw2CurveSequencer.Type.SEQUENCER2,v.childProperties=["yaw","pitch","roll"],d=A((p=g).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=A(p.prototype,"pitch",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=A(p.prototype,"roll",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=A(p.prototype,"yaw",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=A(p.prototype,"currentValue",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.quat.create()}}),f=p))||f)||f)},"./curve/sequencer/Tw2CurveSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSequencer",(function(){return m}));var n,i,o,a=r("./global/utils/index.js"),u=r("./curve/curve/Tw2Curve.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=a.meta.type("Tw2CurveSequencer")((o=i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,e);var t,r,n,i=p(o);function o(){return l(this,o),i.apply(this,arguments)}return t=o,n=[{key:"Sort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.constructor.childArray,r=e[t];if(r&&r.length)for(var n=0;n<r.length;n++)r[n]&&"Sort"in r[n]&&r[n].Sort()}},{key:"Sort2",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.constructor.childProperties;if(t)for(var r=0;r<t.length;r++){var n=e[t[r]];n&&"Sort"in n&&n.Sort()}}},{key:"GetLengthFromKeys",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.constructor.childArray,r=e[t],n=0,i=0;i<r.length;++i)"GetLength"in r[i]&&(n=Math.max(n,r[i].GetLength()));return n}},{key:"GetLengthFromProperties",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.constructor.childProperties,r=0,n=0;n<t.length;n++){var i=e[t[n]];i&&"GetLength"in i&&(r=Math.max(r,i.GetLength()))}return r}}],(r=null)&&s(t.prototype,r),n&&s(t,n),o}(u.Tw2Curve),i.inputDimension=null,i.outputDimension=null,i.childProperties=null,i.childArray=null,i.Operator=null,n=o))||n},"./curve/sequencer/Tw2CurveVector3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveVector3",(function(){return M}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w=r("./curve/sequencer/Tw2CurveSequencer.js"),x=r("./global/utils/index.js"),_=r("./global/math/index.js");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var i=D(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var M=(n=x.meta.type("Tw2CurveVector3","Tr2CurveVector3"),i=x.meta.stage(2),o=x.meta.string,a=x.meta.raw("Tr2CurveScalar"),u=x.meta.raw("Tr2CurveScalar"),c=x.meta.raw("Tr2CurveScalar"),l=x.meta.vector3,s=x.meta.isPrivate,n(f=i((g=v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(o,e);var t,r,n,i=O(o);function o(){var e;j(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(e=i.call.apply(i,[this].concat(r)),"name",d,P(e)),S(e,"x",y,P(e)),S(e,"y",m,P(e)),S(e,"z",b,P(e)),S(e,"currentValue",h,P(e)),e}return t=o,(r=[{key:"Sort",value:function(){w.Tw2CurveSequencer.Sort2(this)}},{key:"GetLength",value:function(){return w.Tw2CurveSequencer.GetLengthFromProperties(this)}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.currentValue)}},{key:"GetValueAt",value:function(e,t){return t[0]=this.x?this.x.GetValueAt(e):0,t[1]=this.y?this.y.GetValueAt(e):0,t[2]=this.z?this.z.GetValueAt(e):0,t}}])&&E(t.prototype,r),n&&E(t,n),o}(w.Tw2CurveSequencer),v.inputDimension=1,v.outputDimension=3,v.valueProperty="currentValue",v.curveType=w.Tw2CurveSequencer.Type.SEQUENCER2,v.childProperties=["x","y","z"],d=A((p=g).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=A(p.prototype,"x",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=A(p.prototype,"y",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=A(p.prototype,"z",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=A(p.prototype,"currentValue",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.vec3.create()}}),f=p))||f)||f)},"./curve/sequencer/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/sequencer/TriColorSequencer.js");r.d(t,"TriColorSequencer",(function(){return n.TriColorSequencer}));var i=r("./curve/sequencer/Tw2CurveColor.js");r.d(t,"Tw2CurveColor",(function(){return i.Tw2CurveColor}));var o=r("./curve/sequencer/Tw2CurveEulerRotation.js");r.d(t,"Tw2CurveEulerRotation",(function(){return o.Tw2CurveEulerRotation}));var a=r("./curve/sequencer/Tw2CurveVector3.js");r.d(t,"Tw2CurveVector3",(function(){return a.Tw2CurveVector3}));var u=r("./curve/sequencer/Tw2CurveSequencer.js");r.d(t,"Tw2CurveSequencer",(function(){return u.Tw2CurveSequencer}));var c=r("./curve/sequencer/legacy/index.js");r.d(t,"Tw2ColorSequencer",(function(){return c.Tw2ColorSequencer})),r.d(t,"Tw2EulerRotation",(function(){return c.Tw2EulerRotation})),r.d(t,"Tw2QuaternionSequencer",(function(){return c.Tw2QuaternionSequencer})),r.d(t,"Tw2RGBAScalarSequencer",(function(){return c.Tw2RGBAScalarSequencer})),r.d(t,"Tw2ScalarSequencer",(function(){return c.Tw2ScalarSequencer})),r.d(t,"Tw2VectorSequencer",(function(){return c.Tw2VectorSequencer})),r.d(t,"Tw2XYZScalarSequencer",(function(){return c.Tw2XYZScalarSequencer})),r.d(t,"Tw2YPRSequencer",(function(){return c.Tw2YPRSequencer}))},"./curve/sequencer/legacy/Tw2ColorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorSequencer",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./global/utils/index.js"),g=r("./global/math/index.js"),w=r("./curve/sequencer/Tw2CurveSequencer.js");function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D={MULTIPLY:0,ADD:1},A=(n=v.meta.type("Tw2ColorSequencer"),i=v.meta.string,o=v.meta.float,a=v.meta.vector4,u=v.meta.enums(D),c=v.meta.list("Tw2Curve"),n((h=b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,r,n,i=E(o);function o(){var e;z(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _(e=i.call.apply(i,[this].concat(r)),"name",f,O(e)),_(e,"start",p,O(e)),_(e,"value",d,O(e)),_(e,"operator",y,O(e)),_(e,"functions",m,O(e)),e}return t=o,(r=[{key:"Sort",value:function(){w.Tw2CurveSequencer.Sort(this)}},{key:"GetLength",value:function(){return w.Tw2CurveSequencer.GetLengthFromKeys(this)}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}},{key:"GetValueAt",value:function(e,t){var r=w.Tw2CurveSequencer.global.vec4_0;switch(this.operator){case o.Operator.MULTIPLY:g.vec4.set(t,1,1,1,1);for(var n=0;n<this.functions.length;++n)this.functions[n].GetValueAt(e,r),g.vec4.multiply(t,t,r);break;default:g.vec4.set(t,0,0,0,0);for(var i=0;i<this.functions.length;++i)this.functions[i].GetValueAt(e,r),g.vec4.add(t,t,r)}return t}}])&&S(t.prototype,r),n&&S(t,n),o}(w.Tw2CurveSequencer),b.inputDimension=4,b.outputDimension=4,b.valueProperty="value",b.curveType=w.Tw2CurveSequencer.Type.SEQUENCER,b.childArray="functions",b.Operator=D,f=P((s=h).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=P(s.prototype,"start",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=P(s.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec4.create()}}),y=P(s.prototype,"operator",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=P(s.prototype,"functions",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=s))||l)},"./curve/sequencer/legacy/Tw2EulerRotation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EulerRotation",(function(){return P}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h=r("./global/utils/index.js"),v=r("./global/math/index.js"),g=r("./curve/sequencer/Tw2CurveSequencer.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P=(n=h.meta.type("Tw2EulerRotation"),i=h.meta.struct("Tw2Curve"),o=h.meta.struct("Tw2Curve"),a=h.meta.struct("Tw2Curve"),u=h.meta.quaternion,c=h.meta.isPrivate,n((b=m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,r,n,i=j(o);function o(){var e;_(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(e=i.call.apply(i,[this].concat(r)),"yawCurve",f,T(e)),x(e,"pitchCurve",p,T(e)),x(e,"rollCurve",d,T(e)),x(e,"currentValue",y,T(e)),e}return t=o,(r=[{key:"Sort",value:function(){g.Tw2CurveSequencer.Sort2(this)}},{key:"GetLength",value:function(){return g.Tw2CurveSequencer.GetLengthFromProperties(this)}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.currentValue)}},{key:"GetValueAt",value:function(e,t){var r=this.yawCurve?this.yawCurve.GetValueAt(e):0,n=this.pitchCurve?this.pitchCurve.GetValueAt(e):0,i=this.rollCurve?this.rollCurve.GetValueAt(e):0,o=Math.sin(r/2),a=Math.cos(r/2),u=Math.sin(n/2),c=Math.cos(n/2),l=Math.sin(i/2),s=Math.cos(i/2);return t[0]=o*c*l+a*u*s,t[1]=o*c*s-a*u*l,t[2]=a*c*l-o*u*s,t[3]=a*c*s+o*u*l,t}}])&&z(t.prototype,r),n&&z(t,n),o}(g.Tw2CurveSequencer),m.inputDimension=1,m.outputDimension=4,m.valueProperty="currentValue",m.curveType=g.Tw2CurveSequencer.Type.SEQUENCER2,m.childProperties=["yawCurve","pitchCurve","rollCurve"],f=R((s=b).prototype,"yawCurve",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=R(s.prototype,"pitchCurve",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=R(s.prototype,"rollCurve",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=R(s.prototype,"currentValue",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.quat.create()}}),l=s))||l)},"./curve/sequencer/legacy/Tw2QuaternionSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionSequencer",(function(){return O}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js"),b=r("./global/math/index.js"),h=r("./curve/sequencer/Tw2CurveSequencer.js");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var O=(n=m.meta.type("Tw2QuaternionSequencer"),i=m.meta.float,o=m.meta.quaternion,a=m.meta.isPrivate,u=m.meta.list("Tw2Curve"),n((y=d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(o,e);var t,r,n,i=z(o);function o(){var e;w(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(e=i.call.apply(i,[this].concat(r)),"start",s,j(e)),g(e,"value",f,j(e)),g(e,"functions",p,j(e)),e}return t=o,(r=[{key:"Sort",value:function(){h.Tw2CurveSequencer.Sort(this)}},{key:"GetLength",value:function(){return h.Tw2CurveSequencer.GetLengthFromKeys(this)}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}},{key:"GetValueAt",value:function(e,t){b.quat.identity(t);for(var r=h.Tw2CurveSequencer.global.quat_0,n=0;n<this.functions.length;++n)this.functions[n].GetValueAt(e,r),b.quat.multiply(t,t,r);return t}}])&&x(t.prototype,r),n&&x(t,n),o}(h.Tw2CurveSequencer),d.inputDimension=4,d.outputDimension=4,d.valueProperty="value",d.curveType=h.Tw2CurveSequencer.Type.SEQUENCER,d.childArray="functions",s=T((l=y).prototype,"start",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=T(l.prototype,"value",[o,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.quat.create()}}),p=T(l.prototype,"functions",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=l))||c)},"./curve/sequencer/legacy/Tw2RGBAScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RGBAScalarSequencer",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g=r("./global/utils/index.js"),w=r("./global/math/index.js"),x=r("./curve/sequencer/Tw2CurveSequencer.js");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var A=(n=g.meta.type("Tw2RGBAScalarSequencer"),i=g.meta.vector4,o=g.meta.isPrivate,a=g.meta.struct("Tw2Curve"),u=g.meta.struct("Tw2Curve"),c=g.meta.struct("Tw2Curve"),l=g.meta.struct("Tw2Curve"),n((v=h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,e);var t,r,n,i=T(o);function o(){var e;S(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return z(e=i.call.apply(i,[this].concat(r)),"value",p,R(e)),z(e,"RedCurve",d,R(e)),z(e,"GreenCurve",y,R(e)),z(e,"BlueCurve",m,R(e)),z(e,"AlphaCurve",b,R(e)),e}return t=o,(r=[{key:"Sort",value:function(){x.Tw2CurveSequencer.Sort2(this)}},{key:"GetLength",value:function(){return x.Tw2CurveSequencer.GetLengthFromProperties(this)}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}},{key:"GetValueAt",value:function(e,t){return t[0]=this.RedCurve?this.RedCurve.GetValueAt(e):0,t[1]=this.GreenCurve?this.GreenCurve.GetValueAt(e):0,t[2]=this.BlueCurve?this.BlueCurve.GetValueAt(e):0,t[3]=this.AlphaCurve?this.AlphaCurve.GetValueAt(e):0,t}}])&&j(t.prototype,r),n&&j(t,n),o}(x.Tw2CurveSequencer),h.inputDimension=1,h.outputDimension=4,h.valueProperty="value",h.curveType=x.Tw2CurveSequencer.Type.SEQUENCER2,h.childProperties=["RedCurve","GreenCurve","BlueCurve","AlphaCurve"],p=D((f=v).prototype,"value",[i,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.vec4.create()}}),d=D(f.prototype,"RedCurve",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=D(f.prototype,"GreenCurve",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=D(f.prototype,"BlueCurve",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=D(f.prototype,"AlphaCurve",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=f))||s)},"./curve/sequencer/legacy/Tw2ScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarSequencer",(function(){return G}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j=r("./global/utils/index.js"),E=r("./curve/sequencer/Tw2CurveSequencer.js");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var i=k(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return M(this,r)}}function M(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var L={MULTIPLY:0,ADD:1},G=(n=j.meta.type("Tw2ScalarSequencer"),i=j.meta.float,o=j.meta.isPrivate,a=j.meta.enums(L),u=j.meta.list("Tw2Curve"),c=j.meta.float,l=j.meta.float,s=j.meta.float,f=j.meta.float,p=j.meta.boolean,n((S=z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(o,e);var t,r,n,i=A(o);function o(){var e;R(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return O(e=i.call.apply(i,[this].concat(r)),"value",m,C(e)),O(e,"operator",b,C(e)),O(e,"functions",h,C(e)),O(e,"inMinClamp",v,C(e)),O(e,"inMaxClamp",g,C(e)),O(e,"outMinClamp",w,C(e)),O(e,"outMaxClamp",x,C(e)),O(e,"clamping",_,C(e)),e}return t=o,(r=[{key:"Sort",value:function(){E.Tw2CurveSequencer.Sort(this)}},{key:"GetLength",value:function(){return E.Tw2CurveSequencer.GetLengthFromKeys(this)}},{key:"UpdateValue",value:function(e){this.value=this.GetValueAt(e)}},{key:"GetValueAt",value:function(e){var t;switch(this.operator){case o.Operator.MULTIPLY:t=1;for(var r=0;r<this.functions.length;++r){var n=this.functions[r].GetValueAt(e);this.clamping&&(n=Math.min(Math.max(n,this.inMinClamp),this.inMaxClamp)),t*=n}break;default:t=0;for(var i=0;i<this.functions.length;++i){var a=this.functions[i].GetValueAt(e);this.clamping&&(a=Math.min(Math.max(a,this.inMinClamp),this.inMaxClamp)),t+=a}}return this.clamping&&(t=Math.min(Math.max(t,this.outMinClamp),this.outMaxClamp)),t}}])&&P(t.prototype,r),n&&P(t,n),o}(E.Tw2CurveSequencer),z.inputDimension=1,z.outputDimension=1,z.valueProperty="value",z.curveType=E.Tw2CurveSequencer.Type.SEQUENCER,z.childArray="functions",z.Operator=L,m=I((y=S).prototype,"value",[i,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=I(y.prototype,"operator",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=I(y.prototype,"functions",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=I(y.prototype,"inMinClamp",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=I(y.prototype,"inMaxClamp",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=I(y.prototype,"outMinClamp",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=I(y.prototype,"outMaxClamp",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=I(y.prototype,"clamping",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=y))||d)},"./curve/sequencer/legacy/Tw2VectorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorSequencer",(function(){return D}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h=r("./global/utils/index.js"),v=r("./global/math/index.js"),g=r("./curve/sequencer/Tw2CurveSequencer.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P={MULTIPLY:0,ADD:1},D=(n=h.meta.type("Tw2VectorSequencer"),i=h.meta.float,o=h.meta.vector3,a=h.meta.isPrivate,u=h.meta.enums(P),c=h.meta.list("Tw2Curve"),n((b=m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,r,n,i=j(o);function o(){var e;_(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(e=i.call.apply(i,[this].concat(r)),"start",f,T(e)),x(e,"value",p,T(e)),x(e,"operator",d,T(e)),x(e,"functions",y,T(e)),e}return t=o,(r=[{key:"Sort",value:function(){g.Tw2CurveSequencer.Sort(this)}},{key:"GetLength",value:function(){return g.Tw2CurveSequencer.GetLengthFromKeys(this)}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}},{key:"GetValueAt",value:function(e,t){var r=g.Tw2CurveSequencer.global.vec3_0;switch(this.operator){case o.Operator.MULTIPLY:v.vec3.set(t,1,1,1);for(var n=0;n<this.functions.length;++n)this.functions[n].GetValueAt(e,r),v.vec3.multiply(t,t,r);return t;default:v.vec3.set(t,0,0,0);for(var i=0;i<this.functions.length;++i)this.functions[i].GetValueAt(e,r),v.vec3.add(t,t,r);return t}}}])&&z(t.prototype,r),n&&z(t,n),o}(g.Tw2CurveSequencer),m.inputDimension=3,m.outputDimension=3,m.valueProperty="value",m.curveType=g.Tw2CurveSequencer.Type.SEQUENCER,m.childArray="functions",m.Operator=P,f=R((s=b).prototype,"start",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=R(s.prototype,"value",[o,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec3.create()}}),d=R(s.prototype,"operator",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=R(s.prototype,"functions",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=s))||l)},"./curve/sequencer/legacy/Tw2XYZScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2XYZScalarSequencer",(function(){return P}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h=r("./global/utils/index.js"),v=r("./global/math/index.js"),g=r("./curve/sequencer/Tw2CurveSequencer.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P=(n=h.meta.type("Tw2XYZScalarSequencer"),i=h.meta.vector3,o=h.meta.isPrivate,a=h.meta.struct("Tw2Curve"),u=h.meta.struct("Tw2Curve"),c=h.meta.struct("Tw2Curve"),n((b=m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,r,n,i=j(o);function o(){var e;_(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(e=i.call.apply(i,[this].concat(r)),"value",f,T(e)),x(e,"XCurve",p,T(e)),x(e,"YCurve",d,T(e)),x(e,"ZCurve",y,T(e)),e}return t=o,(r=[{key:"Sort",value:function(){g.Tw2CurveSequencer.Sort2(this)}},{key:"GetLength",value:function(){return g.Tw2CurveSequencer.GetLengthFromProperties(this)}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}},{key:"GetValueAt",value:function(e,t){return t[0]=this.XCurve?this.XCurve.GetValueAt(e):0,t[1]=this.YCurve?this.YCurve.GetValueAt(e):0,t[2]=this.ZCurve?this.ZCurve.GetValueAt(e):0,t}}])&&z(t.prototype,r),n&&z(t,n),o}(g.Tw2CurveSequencer),m.inputDimension=1,m.outputDimension=3,m.valueProperty="value",m.curveType=g.Tw2CurveSequencer.Type.SEQUENCER2,m.childProperties=["XCurve","YCurve","ZCurve"],f=R((s=b).prototype,"value",[i,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec3.create()}}),p=R(s.prototype,"XCurve",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=R(s.prototype,"YCurve",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=R(s.prototype,"ZCurve",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=s))||l)},"./curve/sequencer/legacy/Tw2YPRSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2YPRSequencer",(function(){return M}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w=r("./global/utils/index.js"),x=r("./global/math/index.js"),_=r("./curve/sequencer/Tw2CurveSequencer.js");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var i=D(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var M=(n=w.meta.type("Tw2YPRSequencer"),i=w.meta.quaternion,o=w.meta.isPrivate,a=w.meta.vector3,u=w.meta.isPrivate,c=w.meta.struct("Tw2Curve"),l=w.meta.struct("Tw2Curve"),s=w.meta.struct("Tw2Curve"),n((g=v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(o,e);var t,r,n,i=O(o);function o(){var e;j(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(e=i.call.apply(i,[this].concat(r)),"value",d,P(e)),S(e,"YawPitchRoll",y,P(e)),S(e,"YawCurve",m,P(e)),S(e,"PitchCurve",b,P(e)),S(e,"RollCurve",h,P(e)),e}return t=o,(r=[{key:"Sort",value:function(){_.Tw2CurveSequencer.Sort2(this)}},{key:"GetLength",value:function(){return _.Tw2CurveSequencer.GetLengthFromProperties(this)}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}},{key:"GetValueAt",value:function(e,t){this.YawCurve&&(this.YawPitchRoll[0]=this.YawCurve.GetValueAt(e)),this.PitchCurve&&(this.YawPitchRoll[1]=this.PitchCurve.GetValueAt(e)),this.RollCurve&&(this.YawPitchRoll[2]=this.RollCurve.GetValueAt(e));var r=Math.sin(this.YawPitchRoll[0]/180*Math.PI/2),n=Math.cos(this.YawPitchRoll[0]/180*Math.PI/2),i=Math.sin(this.YawPitchRoll[1]/180*Math.PI/2),o=Math.cos(this.YawPitchRoll[1]/180*Math.PI/2),a=Math.sin(this.YawPitchRoll[2]/180*Math.PI/2),u=Math.cos(this.YawPitchRoll[2]/180*Math.PI/2);return t[0]=r*o*a+n*i*u,t[1]=r*o*u-n*i*a,t[2]=n*o*a-r*i*u,t[3]=n*o*u+r*i*a,t}}])&&E(t.prototype,r),n&&E(t,n),o}(_.Tw2CurveSequencer),v.inputDimension=1,v.outputDimension=4,v.valueProperty="value",v.curveType=_.Tw2CurveSequencer.Type.SEQUENCER2,v.childProperties=["YawCurve","PitchCurve","RollCurve"],d=A((p=g).prototype,"value",[i,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.quat.create()}}),y=A(p.prototype,"YawPitchRoll",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.create()}}),m=A(p.prototype,"YawCurve",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=A(p.prototype,"PitchCurve",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=A(p.prototype,"RollCurve",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=p))||f)},"./curve/sequencer/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/sequencer/legacy/Tw2ColorSequencer.js");r.d(t,"Tw2ColorSequencer",(function(){return n.Tw2ColorSequencer}));var i=r("./curve/sequencer/legacy/Tw2EulerRotation.js");r.d(t,"Tw2EulerRotation",(function(){return i.Tw2EulerRotation}));var o=r("./curve/sequencer/legacy/Tw2QuaternionSequencer.js");r.d(t,"Tw2QuaternionSequencer",(function(){return o.Tw2QuaternionSequencer}));var a=r("./curve/sequencer/legacy/Tw2RGBAScalarSequencer.js");r.d(t,"Tw2RGBAScalarSequencer",(function(){return a.Tw2RGBAScalarSequencer}));var u=r("./curve/sequencer/legacy/Tw2ScalarSequencer.js");r.d(t,"Tw2ScalarSequencer",(function(){return u.Tw2ScalarSequencer}));var c=r("./curve/sequencer/legacy/Tw2VectorSequencer.js");r.d(t,"Tw2VectorSequencer",(function(){return c.Tw2VectorSequencer}));var l=r("./curve/sequencer/legacy/Tw2XYZScalarSequencer.js");r.d(t,"Tw2XYZScalarSequencer",(function(){return l.Tw2XYZScalarSequencer}));var s=r("./curve/sequencer/legacy/Tw2YPRSequencer.js");r.d(t,"Tw2YPRSequencer",(function(){return s.Tw2YPRSequencer}))},"./eve/EveMissile.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMissileWarhead",(function(){return Me})),r.d(t,"EveMissile",(function(){return Ce}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe,ae,ue,ce,le,se,fe,pe,de,ye,me,be,he=r("./global/utils/index.js"),ve=r("./global/math/index.js"),ge=r("./core/index.js"),we=r("./eve/object/EveObject.js");function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t,r){return t&&Se(e.prototype,t),r&&Se(e,r),e}function Ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=De(e);if(t){var i=De(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Re(this,r)}}function Re(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?Pe(e):t}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Me=(n=he.meta.type("EveMissileWarhead"),i=he.meta.stage(2),o=he.meta.string,a=he.meta.boolean,u=he.meta.notImplemented,c=he.meta.float,l=he.meta.float,s=he.meta.notImplemented,f=he.meta.float,p=he.meta.float,d=he.meta.float,y=he.meta.struct("Tw2Mesh"),m=he.meta.list("Tw2ParticleEmitter"),b=he.meta.notImplemented,h=he.meta.float,v=he.meta.notImplemented,g=he.meta.float,w=he.meta.struct("EveSpriteSet"),x=he.meta.float,_=he.meta.notImplemented,z=he.meta.float,S=he.meta.notImplemented,j=he.meta.float,n(E=i((q=V=function(e){Ee(r,e);var t=Oe(r);function r(){var e;ze(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return _e(e=t.call.apply(t,[this].concat(i)),"name",O,Pe(e)),_e(e,"display",R,Pe(e)),_e(e,"acceleration",P,Pe(e)),_e(e,"durationEjectPhase",D,Pe(e)),_e(e,"impactDuration",A,Pe(e)),_e(e,"impactSize",M,Pe(e)),_e(e,"maxExplosionDistance",C,Pe(e)),_e(e,"mesh",k,Pe(e)),_e(e,"particleEmitters",I,Pe(e)),_e(e,"pathOffsetNoiseScale",L,Pe(e)),_e(e,"pathOffsetNoiseSpeed",G,Pe(e)),_e(e,"spriteSet",F,Pe(e)),_e(e,"startEjectVelocity",B,Pe(e)),_e(e,"warheadLength",N,Pe(e)),_e(e,"warheadRadius",U,Pe(e)),e._perObjectData=ge.Tw2PerObjectData.from(r.perObjectData),e._state=r.State.READY,e._time=0,e._transform=ve.mat4.create(),e._velocity=ve.vec3.create(),e}return je(r,[{key:"Initialize",value:function(){this.spriteSet&&this.spriteSet.UseQuads(!0)}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.mesh&&this.mesh.GetResources(e),this.spriteSet&&this.spriteSet.GetResources(e),e}},{key:"Launch",value:function(e){ve.mat4.copy(this._transform,e),this._velocity[0]=e[8]*this.startEjectVelocity,this._velocity[1]=e[9]*this.startEjectVelocity,this._velocity[2]=e[10]*this.startEjectVelocity,this._time=0,this._state=r.State.IN_FLIGHT}},{key:"UpdateViewDependentData",value:function(){this.display&&this._state!==r.State.DEAD&&(ve.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._transform),ve.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._transform))}},{key:"Update",value:function(e,t,n){if(this._state===r.State.IN_FLIGHT){var i=we.EveObject.global,o=ve.mat4.getTranslation(i.vec3_0,this._transform),a=i.vec3_1,u=i.vec3_2,c=i.vec3_3;this._time+=e,this._time>this.durationEjectPhase?(ve.vec3.subtract(o,this._velocity,t),ve.vec3.lerp(o,o,t,1-Math.exp(.9999*-e)),ve.mat4.setTranslation(this._transform,o),ve.vec3.subtract(a,n,o),ve.vec3.length(a)<this.maxExplosionDistance&&(console.log(o,a),this._state=r.State.DEAD)):(ve.vec3.scale(a,this._velocity,e),this._transform[12]+=a[0],this._transform[13]+=a[1],this._transform[14]+=a[2]);var l=ve.vec3.normalize(a,this._velocity);Math.abs(l[0])<.99?ve.vec3.cross(u,l,[1,0,0]):ve.vec3.cross(u,l,[0,1,0]),ve.vec3.normalize(u,u),ve.vec3.cross(c,u,l),this._transform[0]=u[0],this._transform[1]=u[1],this._transform[2]=u[2],this._transform[4]=c[0],this._transform[5]=c[1],this._transform[6]=c[2],this._transform[8]=l[0],this._transform[9]=l[1],this._transform[10]=l[2]}this.spriteSet&&this.spriteSet.Update(e)}},{key:"GetBatches",value:function(e,t){if(!this.display||!this.mesh||this._state===r.State.DEAD)return!1;var n=t.length;return this.mesh&&this.mesh.GetBatches(e,t,this._perObjectData),this.spriteSet&&this.spriteSet.GetBatches(e,t,this._perObjectData,this._transform),t.length!==n}}]),r}(he.meta.Model),V.perObjectData={vs:[["WorldMat",16],["WorldMatLast",16],["Shipdata",[0,1,0,-10]],["Clipdata1",4],["JointMat",696]],ps:[["Shipdata",[0,1,0,1]],["Clipdata1",4],["Clipdata2",4]]},V.State={READY:0,IN_FLIGHT:1,DEAD:2},O=Ae((T=q).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=Ae(T.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=Ae(T.prototype,"acceleration",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=Ae(T.prototype,"durationEjectPhase",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=Ae(T.prototype,"impactDuration",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.6}}),M=Ae(T.prototype,"impactSize",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=Ae(T.prototype,"maxExplosionDistance",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),k=Ae(T.prototype,"mesh",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=Ae(T.prototype,"particleEmitters",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=Ae(T.prototype,"pathOffsetNoiseScale",[b,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=Ae(T.prototype,"pathOffsetNoiseSpeed",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=Ae(T.prototype,"spriteSet",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=Ae(T.prototype,"startEjectVelocity",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=Ae(T.prototype,"warheadLength",[_,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=Ae(T.prototype,"warheadRadius",[S,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=T))||E)||E),Ce=(H=he.meta.type("EveMissile"),W=he.meta.stage(2),X=he.meta.string,K=he.meta.boolean,Y=he.meta.vector3,Q=he.meta.isPrivate,Z=he.meta.notImplemented,J=he.meta.float,$=he.meta.isPrivate,ee=he.meta.notImplemented,te=he.meta.struct("Tr2TranslationAdapter"),re=he.meta.list("EveMissileWarhead"),ne=he.meta.list("Tw2CurveSet"),ie=he.meta.todo("Is this deprecated?"),oe=he.meta.float,H(ae=W((be=function(e){Ee(r,e);var t=Oe(r);function r(){var e;ze(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return _e(e=t.call.apply(t,[this].concat(i)),"name",ce,Pe(e)),_e(e,"display",le,Pe(e)),_e(e,"boundingSphereCenter",se,Pe(e)),_e(e,"boundingSphereRadius",fe,Pe(e)),_e(e,"modelTranslationCurve",pe,Pe(e)),_e(e,"warheads",de,Pe(e)),_e(e,"curveSets",ye,Pe(e)),_e(e,"speed",me,Pe(e)),e._position=ve.vec3.create(),e._target=ve.vec3.create(),e._warheadExplosionCallback=null,e._missileFinishedCallback=null,e}return je(r,[{key:"OnWarheadExplosion",value:function(e){this._warheadExplosionCallback=e}},{key:"OnMissileFinished",value:function(e){this._missileFinishedCallback=e}},{key:"Launch",value:function(e,t,r){if(ve.vec3.copy(this._position,e),ve.vec3.copy(this._target,r),this.warheads.length>t.length)this.warheads.splice(t.length);else for(;this.warheads.length<t.length;)this.warheads.push(this.constructor.CloneWarhead(this.warheads[0]));for(var n=0;n<this.warheads.length;++n)this.warheads[0].Launch(t[n])}},{key:"GetResources",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<this.warheads.length;++t)this.warheads[t].GetResources(e);return e}},{key:"UpdateViewDependentData",value:function(){for(var e=0;e<this.warheads.length;++e)this.warheads[e].UpdateViewDependentData()}},{key:"Update",value:function(e){var t=ve.vec3.subtract(we.EveObject.global.vec3_0,this._target,this._position),r=ve.vec3.length(t);r>.1&&(ve.vec3.normalize(t,t),ve.vec3.scale(t,t,Math.min(e*this.speed,r)),ve.vec3.add(this._position,this._position,t));for(var n=0;n<this.curveSets.length;++n)this.curveSets[n].Update(e);for(var i=!1,o=0;o<this.warheads.length;++o){var a=this.warheads[o]._state;this.warheads[o].Update(e,this._position,this._target),a!==Me.State.DEAD&&this.warheads[o]._state===Me.State.DEAD&&(this._warheadExplosionCallback&&this._warheadExplosionCallback(this.warheads[o]),i=!0)}if(i&&this._missileFinishedCallback){for(var u=0;u<this.warheads.length;++u)if(this.warheads[u]._state!==Me.State.DEAD)return;this._missileFinishedCallback(this)}}},{key:"GetBatches",value:function(e,t){if(!this.display)return!1;for(var r=t.length,n=0;n<this.warheads.length;++n)this.warheads[n].GetBatches(e,t);return t.length!==r}}],[{key:"CloneWarhead",value:function(e){var t=new Me;return t.mesh=e.mesh,t.spriteSet=e.spriteSet,t}}]),r}(he.meta.Model),ce=Ae((ue=be).prototype,"name",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),le=Ae(ue.prototype,"display",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),se=Ae(ue.prototype,"boundingSphereCenter",[Y,Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ve.vec3.create()}}),fe=Ae(ue.prototype,"boundingSphereRadius",[Z,J,$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe=Ae(ue.prototype,"modelTranslationCurve",[ee,te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=Ae(ue.prototype,"warheads",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=Ae(ue.prototype,"curveSets",[ne,ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),me=Ae(ue.prototype,"speed",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ae=ue))||ae)||ae)},"./eve/EveSpaceScene.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceScene",(function(){return Rt}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe,ae,ue,ce,le,se,fe,pe,de,ye,me,be,he,ve,ge,we,xe,_e,ze,Se,je,Ee,Te,Oe,Re,Pe,De,Ae,Me,Ce,ke,Ie,Le,Ge,Fe,Be,Ne,Ue,Ve,qe,He,We,Xe,Ke,Ye,Qe,Ze,Je,$e,et,tt,rt,nt,it,ot,at,ut,ct,lt,st,ft,pt,dt=r("./global/utils/index.js"),yt=r("./global/index.js"),mt=r("./global/math/index.js"),bt=r("./core/index.js"),ht=r("./global/constant/index.js");function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function wt(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){gt(o,n,i,a,u,"next",e)}function u(e){gt(o,n,i,a,u,"throw",e)}a(void 0)}))}}function xt(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zt(e,t){return(zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Tt(e);if(t){var i=Tt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return jt(this,r)}}function jt(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?Et(e):t}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ot(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Rt=(n=dt.meta.type("EveSpaceScene"),i=dt.meta.struct("Tw2Effect"),o=dt.meta.list("EveObject"),a=dt.meta.boolean,u=dt.meta.isPrivate,c=dt.meta.notImplemented,l=dt.meta.boolean,s=dt.meta.path,f=dt.meta.path,p=dt.meta.path,d=dt.meta.quaternion,y=dt.meta.notImplemented,m=dt.meta.list("Tr2ExternalParameter"),b=dt.meta.color,h=dt.meta.float,v=dt.meta.float,g=dt.meta.list("EveObject"),w=dt.meta.notImplemented,x=dt.meta.path,_=dt.meta.notImplemented,z=dt.meta.struct(),S=dt.meta.color,j=dt.meta.vector3,E=dt.meta.boolean,T=dt.meta.vector3,O=dt.meta.list("EveLensflare"),R=dt.meta.list("EvePlanet"),P=dt.meta.color,D=dt.meta.notImplemented,A=dt.meta.struct("Tr2PostProcess"),M=dt.meta.notImplemented,C=dt.meta.struct("Tw2Effect"),k=dt.meta.color,I=dt.meta.noLongerSupported,L=dt.meta.float,G=dt.meta.noLongerSupported,F=dt.meta.float,B=dt.meta.noLongerSupported,N=dt.meta.float,U=dt.meta.noLongerSupported,V=dt.meta.uint,q=dt.meta.noLongerSupported,H=dt.meta.uint,W=dt.meta.noLongerSupported,X=dt.meta.notImplemented,K=dt.meta.path,Y=dt.meta.isPrivate,Q=dt.meta.notImplemented,Z=dt.meta.path,J=dt.meta.isPrivate,$=dt.meta.notImplemented,ee=dt.meta.float,te=dt.meta.notImplemented,re=dt.meta.boolean,ne=dt.meta.notImplemented,ie=dt.meta.struct("Tr2ShLightingManager"),oe=dt.meta.notImplemented,ae=dt.meta.float,ue=dt.meta.todo("Identify ps/vs frame data"),ce=dt.meta.notImplemented,le=dt.meta.float,se=dt.meta.todo("Identify ps/vs frame data"),fe=dt.meta.notImplemented,pe=dt.meta.struct("EveStarField"),de=dt.meta.notImplemented,ye=dt.meta.color,me=dt.meta.notImplemented,be=dt.meta.boolean,he=dt.meta.boolean,ve=dt.meta.list("EveCurveLineSet"),ge=dt.meta.plain,n((pt=ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)}(s,e);var t,r,n,i,o,a,u,c,l=St(s);function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),xt(e=l.call(this),"backgroundEffect",_e,Et(e)),xt(e,"backgroundObjects",ze,Et(e)),xt(e,"backgroundRenderingEnabled",Se,Et(e)),xt(e,"enableShadows",je,Et(e)),xt(e,"envMap1ResPath",Ee,Et(e)),xt(e,"envMap2ResPath",Te,Et(e)),xt(e,"envMapResPath",Oe,Et(e)),xt(e,"envMapRotation",Re,Et(e)),xt(e,"externalParameters",Pe,Et(e)),xt(e,"fogColor",De,Et(e)),xt(e,"contrast",Ae,Et(e)),xt(e,"nebulaIntensity",Me,Et(e)),xt(e,"objects",Ce,Et(e)),xt(e,"postProcessPath",ke,Et(e)),xt(e,"postprocess",Ie,Et(e)),xt(e,"sunDiffuseColor",Le,Et(e)),xt(e,"sunDirection",Ge,Et(e)),xt(e,"display",Fe,Et(e)),xt(e,"envMapScaling",Be,Et(e)),xt(e,"lensflares",Ne,Et(e)),xt(e,"planets",Ue,Et(e)),xt(e,"clearColor",Ve,Et(e)),xt(e,"postProcess",qe,Et(e)),xt(e,"shadowEffect",He,Et(e)),xt(e,"ambientColor",We,Et(e)),xt(e,"fogEnd",Xe,Et(e)),xt(e,"fogMax",Ke,Et(e)),xt(e,"fogStart",Ye,Et(e)),xt(e,"fogBlur",Qe,Et(e)),xt(e,"fogType",Ze,Et(e)),xt(e,"lowQualityNebulaMixResPath",Je,Et(e)),xt(e,"lowQualityNebulaResPath",$e,Et(e)),xt(e,"reflectionIntensity",et,Et(e)),xt(e,"selfShadowOnly",tt,Et(e)),xt(e,"shLightingManager",rt,Et(e)),xt(e,"shadowFadeThreshold",nt,Et(e)),xt(e,"shadowThreshold",it,Et(e)),xt(e,"starfield",ot,Et(e)),xt(e,"sunDiffuseColorWithDynamicLights",at,Et(e)),xt(e,"useSunDiffuseColorWithDynamicLights",ut,Et(e)),xt(e,"useNebulaAsReflection",ct,Et(e)),xt(e,"lineSets",lt,Et(e)),xt(e,"visible",st,Et(e)),e._shadowView=mt.mat4.create(),e._shadowProjection=mt.mat4.create(),e._shadowViewProjection=mt.mat4.create(),e._shadowCameraRange=mt.vec4.fromValues(1,0,0,0),e._shadowMapSettings=mt.vec4.fromValues(1,1,0,0),e._shadowMapRes=null,e._localTransform=mt.mat4.create(),e._accumulator=new bt.Tw2BatchAccumulator,e._emptyTexture=null,e._frustum=new bt.Tw2Frustum,e._lodEnabled=!1,e._perFrameVS=bt.Tw2RawData.from(s.perFrameData.vs),e._perFramePS=bt.Tw2RawData.from(s.perFrameData.ps),e._envMapRes=null,e._envMap1Res=null,e._envMap2Res=null,e._picking=null,Object.defineProperty(e.visible,"environment",{get:function(){return e.backgroundRenderingEnabled},set:function(t){return e.backgroundRenderingEnabled=t?1:0},enumerable:!0}),Object.defineProperty(e.visible,"shadow",{get:function(){return e.enableShadows},set:function(t){return e.enableShadows=t?1:0},enumerable:!0}),e}return t=s,r=[{key:"PreparePicking",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._accumulator;if(this._picking){if(this._picking.lastFrame===yt.tw2.frame)return}else this._picking={rt:new bt.Tw2RenderTarget,buffer:new Uint8Array(4),clearColor:mt.vec4.fromValues(0,0,0,0),lastFrame:-1,objects:null};var t=this._picking;t.objects.splice(0),t.rt.Update(yt.tw2.width,yt.tw2.height,!0),e.Clear();for(var r=0;r<this.objects.length;r++)this.objects[r].GetBatches(ht.RM_OPAQUE,e)&&t.objects.push(this.objects[r]);t.rt.Set(),yt.tw2.ClearBufferBits(!0,!0,!0),yt.tw2.SetClearColor(t.clearColor),e.Render("ExtendedPicking"),t.lastFrame=yt.tw2.frame}},{key:"OnValueChanged",value:function(){this._distortionEffect&&(this._distortionEffect.parameters.MAX_DISTORTION_OFFSET.x=this.distortionOffset)}},{key:"Initialize",value:function(){if(Promise.all([this.SetEnvMapReflection(this.envMapResPath),this.SetEnvMapDiffuse(this.envMap1ResPath),this.SetEnvMapBlur(this.envMap2ResPath),this.SetPostProcess(this.postProcessPath)]).then(),this.objects.length){for(var e=0;e<this.objects.length;e++)this.backgroundObjects.push(this.objects[e]);this.objects.splice(0)}}},{key:"SetTransform",value:function(e){mt.mat4.copy(this._localTransform,e)}},{key:"GetTransform",value:function(e){mt.mat4.copy(e,this._localTransform)}},{key:"SetEnvironmentTransform",value:function(e){mt.mat4.getRotation(this.envMapRotation,e),mt.mat4.getScaling(this.envMapScaling,e)}},{key:"GetEnvironmentTransform",value:function(e){var t=mt.vec3.set(s.global.vec3_ZERO,0,0,0);mt.mat4.fromRotationTranslationScale(e,this.envMapRotation,t,this.envMapScaling)}},{key:"SetPostProcess",value:(c=wt(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",r=n.length>1?n[1]:void 0,e.abrupt("return",s.HandleResource(this,t,"postProcessPath","postProcess",r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"SetEnvMapReflection",value:(u=wt(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",r=n.length>1?n[1]:void 0,e.abrupt("return",s.HandleResource(this,t,"envMapResPath","_envMapRes",r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"SetEnvMapDiffuse",value:(a=wt(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",r=n.length>1?n[1]:void 0,e.abrupt("return",s.HandleResource(this,t,"envMap1ResPath","_envMap1Res",r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"SetEnvMapBlur",value:(o=wt(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",r=n.length>1?n[1]:void 0,e.abrupt("return",s.HandleResource(this,t,"envMap2ResPath","_envMap2Res",r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"EnableLod",value:function(e){this._lodEnabled=e,e||this.PerChildObject("ResetLod")}},{key:"KeepAlive",value:function(){var e=this.GetResources();this.GetChildResources(e);for(var t=0;t<e.length;t++)e[t].KeepAlive()}},{key:"GetResources",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<this.lensflares.length;t++)this.lensflares[t].GetResources(e);return this.backgroundEffect&&this.backgroundEffect.GetResources(e),this.postProcess&&this.postProcess.GetResources(e),this.starfield&&this.starfield.GetResources(e),this._envMapRes&&!e.includes(this._envMapRes)&&e.push(this._envMapRes),this._envMap1Res&&!e.includes(this._envMap1Res)&&e.push(this._envMap1Res),this._envMap2Res&&!e.includes(this._envMap2Res)&&e.push(this._envMap2Res),e}},{key:"GetChildResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.PerChildObject("GetResources",e),e}},{key:"PerChildObject",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=0;i<this.planets.length;i++){var o;e in this.planets[i]&&(o=this.planets[i])[e].apply(o,r)}for(var a=0;a<this.backgroundObjects.length;a++){var u;e in this.backgroundObjects[a]&&(u=this.backgroundObjects[a])[e].apply(u,r)}for(var c=0;c<this.objects.length;c++){var l;e in this.objects[c]&&(l=this.objects[c])[e].apply(l,r)}for(var s=0;s<this.lineSets.length;s++){var f;e in this.lineSets[s]&&(f=this.lineSets[s])[e].apply(f,r)}}},{key:"GetEmptyTexture",value:function(){return this._emptyTexture||(this._emptyTexture=yt.tw2.GetResource("cdn:/texture/global/black.png")),this._emptyTexture}},{key:"Update",value:function(e){this.starField&&this.starField.Update(e),this.PerChildObject("Update",e)}},{key:"GetRenderBatches",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._accumulator,n=0;n<t.length;++n)"GetBatches"in t[n]&&t[n].GetBatches(e,r)}},{key:"RenderBackgroundEffect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.backgroundRenderingEnabled;this.backgroundEffect&&(e?(yt.device.SetStandardStates(yt.device.RM_FULLSCREEN),yt.device.RenderCameraSpaceQuad(this.backgroundEffect)):this.backgroundEffect.KeepAlive())}},{key:"RenderPlanets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._accumulator;if(this.planets.length){var r=s.global,n=mt.mat4.copy(r.mat4_0,yt.device.projection),i=mt.mat4.copy(r.mat4_1,yt.device.projection),o=1e4,a=1e11;i[10]=a/(o-a),i[14]=a*o/(o-a),yt.device.SetProjection(i,!0),this.UpdateViewProjectionFrameData(),yt.device.gl.depthRange(.9,1);for(var u=0;u<this.planets.length;++u)this.planets[u].UpdateViewDependentData&&(this.planets[u].UpdateViewDependentData(this._localTransform,e),this.planets[u].GetBatches(yt.device.RM_OPAQUE,t),this.planets[u].GetBatches(yt.device.RM_DECAL,t),this.planets[u].GetBatches(yt.device.RM_TRANSPARENT,t),this.planets[u].GetBatches(yt.device.RM_ADDITIVE,t));this._accumulator.Render(),yt.device.SetProjection(n,!0),this.UpdateViewProjectionFrameData(),yt.device.gl.depthRange(0,.9)}}},{key:"Render",value:function(e){var t=yt.device,r=this.visible;if(this._lodEnabled&&(this._frustum.Initialize(t.view,t.projection,t.viewportWidth,t.viewInverse,t.viewProjection),this.PerChildObject("UpdateLod",this._frustum)),this._accumulator.Clear(),this.ApplyPerFrameData(),this.RenderBackgroundEffect(this.backgroundRenderingEnabled),r.planets&&(this.RenderPlanets(e),this._accumulator.Clear()),r.backgroundObjects)for(var n=0;n<this.backgroundObjects.length;n++)this.backgroundObjects[n].UpdateViewDependentData&&this.backgroundObjects[n].UpdateViewDependentData(this._localTransform,e),this.backgroundObjects[n].GetBatches(t.RM_OPAQUE,this._accumulator),this.backgroundObjects[n].GetBatches(t.RM_DECAL,this._accumulator),this.backgroundObjects[n].GetBatches(t.RM_TRANSPARENT,this._accumulator),this.backgroundObjects[n].GetBatches(t.RM_ADDITIVE,this._accumulator),r.distortionPreview&&this.backgroundObjects[n].GetBatches(t.RM_DISTORTION,this._accumulator);if(r.objects)for(var i=0;i<this.objects.length;++i)this.objects[i].UpdateViewDependentData&&this.objects[i].UpdateViewDependentData(this._localTransform,e),this.objects[i].GetBatches(t.RM_OPAQUE,this._accumulator),this.objects[i].GetBatches(t.RM_DECAL,this._accumulator),this.objects[i].GetBatches(t.RM_TRANSPARENT,this._accumulator),this.objects[i].GetBatches(t.RM_ADDITIVE,this._accumulator),r.distortionPreview&&this.objects[i].GetBatches(t.RM_DISTORTION,this._accumulator);if(r.lineSets)for(var o=0;o<this.lineSets.length;o++)this.lineSets[o].UpdateViewDependentData(this._localTransform,e),this.lineSets[o].GetBatches(t.RM_TRANSPARENT,this._accumulator),this.lineSets[o].GetBatches(t.RM_ADDITIVE,this._accumulator);if(r.planets)for(var a=0;a<this.planets.length;++a)this.planets[a].GetZOnlyBatches(t.RM_OPAQUE,this._accumulator);if(r.lensflares)for(var u=0;u<this.lensflares.length;++u)this.lensflares[u].PrepareRender(this.sunDirection),this.lensflares[u].GetBatches(t.RM_ADDITIVE,this._accumulator);if(this._accumulator.Render(),this.starfield,this.shadowEffect,this.postProcess,r.lensflares)for(var c=0;c<this.lensflares.length;++c)this.lensflares[c].UpdateOccluders()}},{key:"UpdateViewProjectionFrameData",value:function(){yt.device.UpdateViewProjection();var e=yt.device,t=s.global.vec3_0,r=this._perFrameVS,n=this._perFramePS;e.perFrameVSData=r,e.perFramePSData=n,mt.vec3.transformMat4(t,this.sunDirection,this._localTransform),mt.vec3.negate(t,t),mt.vec3.normalize(t,t),r.Set("SunData.DirWorld",[t[0],t[1],t[2],0]),r.Set("TargetResolution",e.targetResolution),r.Set("ViewInverseTransposeMat",e.viewInverse),r.Set("ViewProjectionMat",e.viewProjectionTranspose),r.Set("ViewMat",e.viewTranspose),r.Set("ProjectionMat",e.projectionTranspose),n.Set("SunData.DirWorld",[t[0],t[1],t[2],0]),n.Set("TargetResolution",e.targetResolution),n.Set("FovXY",[e.targetResolution[3],e.targetResolution[2]]),n.Set("ViewInverseTransposeMat",e.viewInverse),n.Set("ViewMat",e.viewTranspose),n.SetIndex("ProjectionToView",0,-e.projection[14]),n.SetIndex("ProjectionToView",1,-e.projection[10]-1)}},{key:"ApplyPerFrameData",value:function(){this.UpdateViewProjectionFrameData();var e=yt.device,t=s.global,r=this._localTransform,n=t.mat4_2,i=this.visible;mt.mat4.fromQuat(n,this.envMapRotation),mt.mat4.scale(n,n,this.envMapScaling),mt.mat4.multiply(n,n,r),n[12]=0,n[13]=0,n[14]=0,mt.mat4.transpose(n,n);var o=this._perFrameVS,a=this._perFramePS;if(e.perFrameVSData=o,e.perFramePSData=a,this.visible.fog){var u=this.fogEnd-this.fogStart;Math.abs(u)<1e-5&&(u=1e-5);var c=1/u;o.Set("FogFactors",[this.fogEnd*c,c,this.fogMax,1]),a.Set("SceneData.FogColor",this.fogColor),a.Set("MiscSettings",[e.currentTime,this.fogType,this.fogBlur,this.contrast])}else o.Set("FogFactors",[0,0,0,0]),a.Set("SceneData.FogColor",[0,0,0,0]),a.Set("MiscSettings",[e.currentTime,0,0,this.contrast]);o.Set("ViewportAdjustment",[1,1,1,1]),o.Set("MiscSettings",[e.currentTime,0,e.viewportWidth,e.viewportHeight]),o.Set("SunData.DiffuseColor",this.sunDiffuseColor),o.Set("EnvMapRotationMat",n),this.enableShadows&&(mt.mat4.multiply(this._shadowViewProjection,this._shadowProjection,this._shadowView),o.Set("ShadowViewMat",mt.mat4.transpose(t.mat4_0,this._shadowView)),o.Set("ShadowViewProjectionMat",mt.mat4.transpose(t.mat4_1,this._shadowViewProjection))),a.Set("ShadowMapSettings",this._shadowMapSettings),a.Set("ShadowCameraRange",this._shadowCameraRange),a.Set("EnvMapRotationMat",n),a.Set("SunData.DiffuseColor",this.sunDiffuseColor),a.Set("SceneData.AmbientColor",this.ambientColor),a.SetIndex("SceneData.NebulaIntensity",0,this.nebulaIntensity),a.SetIndex("ViewportSize",0,e.viewportWidth),a.SetIndex("ViewportSize",1,e.viewportHeight);var l=this.GetEmptyTexture(),f=this._envMap1Res&&i.environmentDiffuse?this._envMap1Res:this.GetEmptyTexture(),p=this._envMap2Res&&i.environmentBlur?this._envMap2Res:this.GetEmptyTexture();i.environmentReflection&&(l=this.useNebulaAsReflection&&this.backgroundEffect&&this.backgroundEffect.parameters.NebulaMap&&this.backgroundEffect.parameters.NebulaMap.res||this._envMapRes),yt.tw2.GetVariable("EveSpaceSceneEnvMap").AttachTextureRes(l),yt.tw2.GetVariable("EnvMap1").AttachTextureRes(f),yt.tw2.GetVariable("EnvMap2").AttachTextureRes(p)}}],n=[{key:"HandleResource",value:(i=wt(regeneratorRuntime.mark((function e(t,r,n,i,o){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r?r.toLowerCase():null){e.next=5;break}return t[n]="",t[n]=null,e.abrupt("return",!0);case 5:return t[n]=r,e.next=8,yt.tw2.Fetch(r,o);case 8:if(a=e.sent,t[n]!==r){e.next=12;break}return t[i]=a,e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)}))),function(e,t,r,n,o){return i.apply(this,arguments)})}],r&&_t(t.prototype,r),n&&_t(t,n),s}(dt.meta.Model),ft.perFrameData={ps:[["ViewInverseTransposeMat",16],["ViewMat",16],["EnvMapRotationMat",16],["SunData.DirWorld",4],["SunData.DiffuseColor",4],["SceneData.AmbientColor",3],["SceneData.NebulaIntensity",1],["SceneData.FogColor",4],["ViewportOffset",2],["ViewportSize",2],["TargetResolution",4],["ShadowMapSettings",4],["ShadowCameraRange",4],["ProjectionToView",2],["FovXY",2],["MiscSettings",4],["Unknown0",4]],vs:[["ViewInverseTransposeMat",16],["ViewProjectionMat",16],["ViewMat",16],["ProjectionMat",16],["ShadowViewMat",16],["ShadowViewProjectionMat",16],["EnvMapRotationMat",16],["SunData.DirWorld",4],["SunData.DiffuseColor",4],["FogFactors",4],["TargetResolution",4],["ViewportAdjustment",4],["MiscSettings",4]]},ft.global={vec3_ZERO:mt.vec3.create(),vec3_0:mt.vec3.create(),vec4_0:mt.vec4.create(),mat4_0:mt.mat4.create(),mat4_1:mt.mat4.create(),mat4_2:mt.mat4.create()},_e=Ot((xe=pt).prototype,"backgroundEffect",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=Ot(xe.prototype,"backgroundObjects",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Se=Ot(xe.prototype,"backgroundRenderingEnabled",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),je=Ot(xe.prototype,"enableShadows",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ee=Ot(xe.prototype,"envMap1ResPath",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Te=Ot(xe.prototype,"envMap2ResPath",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Oe=Ot(xe.prototype,"envMapResPath",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Re=Ot(xe.prototype,"envMapRotation",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.quat.create()}}),Pe=Ot(xe.prototype,"externalParameters",[y,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),De=Ot(xe.prototype,"fogColor",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.vec4.fromValues(.25,.25,.25,1)}}),Ae=Ot(xe.prototype,"contrast",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Me=Ot(xe.prototype,"nebulaIntensity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ce=Ot(xe.prototype,"objects",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ke=Ot(xe.prototype,"postProcessPath",[w,x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ie=Ot(xe.prototype,"postprocess",[_,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=Ot(xe.prototype,"sunDiffuseColor",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.vec4.fromValues(1,1,1,1)}}),Ge=Ot(xe.prototype,"sunDirection",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.vec3.fromValues(1,-1,1)}}),Fe=Ot(xe.prototype,"display",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Be=Ot(xe.prototype,"envMapScaling",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.vec3.fromValues(1,1,1)}}),Ne=Ot(xe.prototype,"lensflares",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ue=Ot(xe.prototype,"planets",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ve=Ot(xe.prototype,"clearColor",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.vec4.fromValues(0,0,0,1)}}),qe=Ot(xe.prototype,"postProcess",[D,A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=Ot(xe.prototype,"shadowEffect",[M,C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=Ot(xe.prototype,"ambientColor",[k,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.vec4.fromValues(.25,.25,.25,1)}}),Xe=Ot(xe.prototype,"fogEnd",[L,G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ke=Ot(xe.prototype,"fogMax",[F,B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ye=Ot(xe.prototype,"fogStart",[N,U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qe=Ot(xe.prototype,"fogBlur",[V,q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ze=Ot(xe.prototype,"fogType",[H,W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Je=Ot(xe.prototype,"lowQualityNebulaMixResPath",[X,K,Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),$e=Ot(xe.prototype,"lowQualityNebulaResPath",[Q,Z,J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),et=Ot(xe.prototype,"reflectionIntensity",[$,ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),tt=Ot(xe.prototype,"selfShadowOnly",[te,re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rt=Ot(xe.prototype,"shLightingManager",[ne,ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=Ot(xe.prototype,"shadowFadeThreshold",[oe,ae,ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),it=Ot(xe.prototype,"shadowThreshold",[ce,le,se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ot=Ot(xe.prototype,"starfield",[fe,pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=Ot(xe.prototype,"sunDiffuseColorWithDynamicLights",[de,ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.vec4.fromValues(1,1,1,1)}}),ut=Ot(xe.prototype,"useSunDiffuseColorWithDynamicLights",[me,be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ct=Ot(xe.prototype,"useNebulaAsReflection",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),lt=Ot(xe.prototype,"lineSets",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),st=Ot(xe.prototype,"visible",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundObjects:!0,clearColor:!0,debug:!1,environmentReflection:!0,environmentDiffuse:!0,environmentBlur:!0,fog:!0,lensflares:!0,lineSets:!0,objects:!0,planets:!0,post:!0}}}),we=xe))||we)},"./eve/child/EveChild.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChild",(function(){return p}));var n=r("./global/utils/index.js"),i=r("./global/math/index.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,r,n,i=l(o);function o(){var e;a(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r)))._lod=3,e}return t=o,(r=[{key:"UpdateLod",value:function(e,t){this._lod=t}},{key:"ResetLod",value:function(){this._lod=3}},{key:"Update",value:function(e,t,r){}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e}},{key:"GetBatches",value:function(e,t,r){return!1}},{key:"isEffectChild",get:function(){return!0}}])&&u(t.prototype,r),n&&u(t,n),o}(n.meta.Model);p.global={mat4_0:i.mat4.create(),vec3_0:i.vec3.create(),mat4_1:i.mat4.create()},p.perObjectData={ffe:[["world",16],["worldInverseTranspose",16]]},p.__isEffectChild=!0},"./eve/child/EveChildBillboard.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildBillboard",(function(){return N}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E=r("./global/utils/index.js"),T=r("./global/index.js"),O=r("./global/math/index.js"),R=r("./core/index.js"),P=r("./eve/child/EveChild.js");function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=F(e);if(t){var i=F(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return L(this,r)}}function L(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?G(e):t}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var N=(n=E.meta.type("EveChildBillboard"),i=E.meta.todo("Deprecated?"),o=E.meta.boolean,a=E.meta.matrix4,u=E.meta.uint,c=E.meta.struct(["Tw2Mesh","Tw2InstancedMesh"]),l=E.meta.quaternion,s=E.meta.vector3,f=E.meta.vector3,p=E.meta.boolean,d=E.meta.boolean,n(y=i((j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(o,e);var t,r,n,i=I(o);function o(){var e;M(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return A(e=i.call.apply(i,[this].concat(r)),"display",b,G(e)),A(e,"localTransform",h,G(e)),A(e,"lowestLodVisible",v,G(e)),A(e,"mesh",g,G(e)),A(e,"rotation",w,G(e)),A(e,"translation",x,G(e)),A(e,"scaling",_,G(e)),A(e,"staticTransform",z,G(e)),A(e,"useSRT",S,G(e)),e._perObjectData=R.Tw2PerObjectData.from(P.EveChild.perObjectData),e._worldTransform=O.mat4.create(),e._worldTransformLast=O.mat4.create(),e}return t=o,(r=[{key:"GetResources",value:function(e){return this.mesh&&this.mesh.GetResources(e),e}},{key:"Update",value:function(e,t){this.useSRT&&(O.quat.normalize(this.rotation,this.rotation),O.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),O.mat4.copy(this._worldTransformLast,this._worldTransform),O.mat4.multiply(this._worldTransform,t,this.localTransform);var r=P.EveChild.global.mat4_0,n=P.EveChild.global.vec3_0;O.mat4.lookAt(r,T.device.eyePosition,this._worldTransform.subarray(12),[0,1,0]),O.mat4.transpose(r,r),O.mat4.getScaling(n,t),O.vec3.multiply(n,n,this.scaling),this._worldTransform[0]=r[0]*n[0],this._worldTransform[1]=r[1]*n[0],this._worldTransform[2]=r[2]*n[0],this._worldTransform[4]=r[4]*n[1],this._worldTransform[5]=r[5]*n[1],this._worldTransform[6]=r[6]*n[1],this._worldTransform[8]=r[8]*n[2],this._worldTransform[9]=r[9]*n[2],this._worldTransform[10]=r[10]*n[2]}},{key:"GetBatches",value:function(e,t){return!(!(this.display&&this.mesh&&this.mesh.IsGood())||this._lod<this.lowestLodVisible)&&(O.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),O.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform),this.mesh.GetBatches(e,t,this._perObjectData))}}])&&C(t.prototype,r),n&&C(t,n),o}(P.EveChild),b=B((m=j).prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=B(m.prototype,"localTransform",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.mat4.create()}}),v=B(m.prototype,"lowestLodVisible",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),g=B(m.prototype,"mesh",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=B(m.prototype,"rotation",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.quat.create()}}),x=B(m.prototype,"translation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.create()}}),_=B(m.prototype,"scaling",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.fromValues(1,1,1)}}),z=B(m.prototype,"staticTransform",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=B(m.prototype,"useSRT",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=m))||y)||y)},"./eve/child/EveChildContainer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildContainer",(function(){return ye}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te=r("./eve/child/EveChild.js"),re=r("./global/utils/index.js"),ne=r("./global/math/index.js");function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=pe(e);if(t){var i=pe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return se(this,r)}}function se(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?fe(e):t}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ye=(n=re.meta.type("EveChildContainer",!0),i=re.meta.stage(2),o=re.meta.string,a=re.meta.notImplemented,u=re.meta.boolean,c=re.meta.uint,l=re.meta.notImplemented,s=re.meta.list("Tr2Controller"),f=re.meta.list("Tw2CurveSet"),p=re.meta.boolean,d=re.meta.notImplemented,y=re.meta.struct(),m=re.meta.notImplemented,b=re.meta.boolean,h=re.meta.notImplemented,v=re.meta.struct("EveChildInheritProperties"),g=re.meta.notImplemented,w=re.meta.list("Tr2PointLight"),x=re.meta.matrix4,_=re.meta.list("EveChild"),z=re.meta.notImplemented,S=re.meta.list("TriObserverLocal"),j=re.meta.quaternion,E=re.meta.vector3,T=re.meta.notImplemented,O=re.meta.boolean,R=re.meta.notImplemented,P=re.meta.list("EveChildModifier"),D=re.meta.vector3,A=re.meta.boolean,n(M=i((ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(o,e);var t,r,n,i=le(o);function o(){var e;ae(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return oe(e=i.call.apply(i,[this].concat(r)),"name",k,fe(e)),oe(e,"alwaysOn",I,fe(e)),oe(e,"boneIndex",L,fe(e)),oe(e,"controllers",G,fe(e)),oe(e,"curveSets",F,fe(e)),oe(e,"display",B,fe(e)),oe(e,"displayFilter",N,fe(e)),oe(e,"hideOnLowQuality",U,fe(e)),oe(e,"inheritProperties",V,fe(e)),oe(e,"lights",q,fe(e)),oe(e,"localTransform",H,fe(e)),oe(e,"objects",W,fe(e)),oe(e,"observers",X,fe(e)),oe(e,"rotation",K,fe(e)),oe(e,"scaling",Y,fe(e)),oe(e,"staticTransform",Q,fe(e)),oe(e,"transformModifiers",Z,fe(e)),oe(e,"translation",J,fe(e)),oe(e,"useSRT",$,fe(e)),e._worldTransform=ne.mat4.create(),e}return t=o,(r=[{key:"ResetLod",value:function(){this._lod=3;for(var e=0;e<this.objects.length;e++)this.objects[e].ResetLod()}},{key:"UpdateLod",value:function(e,t){this._lod=t;for(var r=0;r<this.objects.length;r++)this.objects[r].UpdateLod(e,this._lod)}},{key:"GetResources",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<this.objects.length;t++)this.objects[t].GetResources(e);return e}},{key:"Update",value:function(e,t,r){if(this.useSRT&&ne.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling),this.transformModifiers.length)for(var n=0;n<this.transformModifiers.length;n++)"Modify"in this.transformModifiers[n]&&this.transformModifiers[n].Modify(this,r);if(this.boneIndex>-1){var i=te.EveChild.global.mat4_0,o=r.Get("JointMat");ne.mat4.fromJointMatIndex(i,o,this.boneIndex),ne.mat4.multiply(i,i,this.localTransform),ne.mat4.multiply(this._worldTransform,t,i)}else ne.mat4.multiply(this._worldTransform,t,this.localTransform);for(var a=0;a<this.curveSets.length;a++)this.curveSets[a].Update(e);for(var u=0;u<this.objects.length;u++)this.objects[u].Update(e,this._worldTransform,r)}},{key:"GetBatches",value:function(e,t,r){if(!this.display)return!1;for(var n=t.length,i=0;i<this.objects.length;i++)this.objects[i].GetBatches(e,t,r);return t.length!==n}}])&&ue(t.prototype,r),n&&ue(t,n),o}(te.EveChild),k=de((C=ee).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=de(C.prototype,"alwaysOn",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=de(C.prototype,"boneIndex",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),G=de(C.prototype,"controllers",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=de(C.prototype,"curveSets",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=de(C.prototype,"display",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=de(C.prototype,"displayFilter",[d,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=de(C.prototype,"hideOnLowQuality",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=de(C.prototype,"inheritProperties",[h,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=de(C.prototype,"lights",[g,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=de(C.prototype,"localTransform",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ne.mat4.create()}}),W=de(C.prototype,"objects",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=de(C.prototype,"observers",[z,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=de(C.prototype,"rotation",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ne.quat.create()}}),Y=de(C.prototype,"scaling",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ne.vec3.fromValues(1,1,1)}}),Q=de(C.prototype,"staticTransform",[T,O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Z=de(C.prototype,"transformModifiers",[R,P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=de(C.prototype,"translation",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ne.vec3.create()}}),$=de(C.prototype,"useSRT",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),M=C))||M)||M)},"./eve/child/EveChildMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildMesh",(function(){return ne}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V=r("./global/utils/index.js"),q=r("./global/math/index.js"),H=r("./core/index.js"),W=r("./eve/child/EveChild.js");function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=te(e);if(t){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $(this,r)}}function $(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ne=(n=V.meta.type("EveChildMesh",!0),i=V.meta.string,o=V.meta.boolean,a=V.meta.matrix4,u=V.meta.notImplemented,c=V.meta.uint,l=V.meta.struct(["Tw2Mesh","Tw2InstancedMesh"]),s=V.meta.notImplemented,f=V.meta.float,p=V.meta.quaternion,d=V.meta.vector3,y=V.meta.notImplemented,m=V.meta.float,b=V.meta.notImplemented,h=V.meta.boolean,v=V.meta.notImplemented,g=V.meta.list("EveChildModifier"),w=V.meta.vector3,x=V.meta.boolean,_=V.meta.boolean,z=V.meta.uint,S=V.meta.notImplemented,n((U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(o,e);var t,r,n,i=J(o);function o(){var e;Y(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return K(e=i.call.apply(i,[this].concat(r)),"name",T,ee(e)),K(e,"display",O,ee(e)),K(e,"localTransform",R,ee(e)),K(e,"lowestLodVisible",P,ee(e)),K(e,"mesh",D,ee(e)),K(e,"minScreenSize",A,ee(e)),K(e,"rotation",M,ee(e)),K(e,"scaling",C,ee(e)),K(e,"sortValueOffset",k,ee(e)),K(e,"staticTransform",I,ee(e)),K(e,"transformModifiers",L,ee(e)),K(e,"translation",G,ee(e)),K(e,"useSRT",F,ee(e)),K(e,"useSpaceObjectData",B,ee(e)),K(e,"reflectionMode",N,ee(e)),e._worldTransform=q.mat4.create(),e._worldTransformLast=q.mat4.create(),e._perObjectData=null,e}return t=o,(r=[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.mesh&&this.mesh.GetResources(e),e}},{key:"Update",value:function(e,t,r){if(this.useSRT&&(q.quat.normalize(this.rotation,this.rotation),q.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),this.transformModifiers.length)for(var n=0;n<this.transformModifiers.length;n++)"Modify"in this.transformModifiers[n]&&this.transformModifiers[n].Modify(this,r);q.mat4.copy(this._worldTransformLast,this._worldTransform),q.mat4.multiply(this._worldTransform,t,this.localTransform)}},{key:"GetBatches",value:function(e,t,r){return!(!this.display||!this.mesh||this._lod<this.lowestLodVisible)&&(this.useSpaceObjectData?(this._perObjectData||(this._perObjectData=new H.Tw2PerObjectData,this._perObjectData.vs=new H.Tw2RawData,this._perObjectData.vs.data=new Float32Array(r.vs.data.length),this._perObjectData.vs.data[33]=1,this._perObjectData.vs.data[35]=1,this._perObjectData.ps=new H.Tw2RawData,this._perObjectData.ps.data=new Float32Array(r.ps.data.length),this._perObjectData.ps.data[1]=1,this._perObjectData.ps.data[3]=1),this._perObjectData.vs.data.set(r.vs.data),this._perObjectData.ps.data.set(r.ps.data),q.mat4.transpose(this._perObjectData.vs.data,this._worldTransform),q.mat4.transpose(this._perObjectData.vs.data.subarray(16),this._worldTransformLast)):(this._perObjectData||(this._perObjectData=H.Tw2PerObjectData.from(W.EveChild.perObjectData)),q.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),q.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform)),this.mesh.GetBatches(e,t,this._perObjectData))}}])&&Q(t.prototype,r),n&&Q(t,n),o}(W.EveChild),T=re((E=U).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=re(E.prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),R=re(E.prototype,"localTransform",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.mat4.create()}}),P=re(E.prototype,"lowestLodVisible",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),D=re(E.prototype,"mesh",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=re(E.prototype,"minScreenSize",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=re(E.prototype,"rotation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.quat.create()}}),C=re(E.prototype,"scaling",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.vec3.fromValues(1,1,1)}}),k=re(E.prototype,"sortValueOffset",[y,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=re(E.prototype,"staticTransform",[b,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=re(E.prototype,"transformModifiers",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=re(E.prototype,"translation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.vec3.create()}}),F=re(E.prototype,"useSRT",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),B=re(E.prototype,"useSpaceObjectData",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=re(E.prototype,"reflectionMode",[z,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),j=E))||j)},"./eve/child/EveChildParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildParticleSystem",(function(){return ee}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B=r("./global/utils/index.js"),N=r("./global/math/index.js"),U=r("./core/index.js"),V=r("./eve/child/EveChild.js");function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=J(e);if(t){var i=J(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Q(this,r)}}function Q(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ee=(n=B.meta.type("EveChildParticleSystem",!0),i=B.meta.stage(1),o=B.meta.string,a=B.meta.boolean,u=B.meta.matrix4,c=B.meta.notImplemented,l=B.meta.float,s=B.meta.struct("Tw2InstancedMesh"),f=B.meta.notImplemented,p=B.meta.float,d=B.meta.list("Tw2ParticleEmitter"),y=B.meta.list(["Tw2ParticleSystem","Tr2GpuParticleSystem"]),m=B.meta.quaternion,b=B.meta.vector3,h=B.meta.vector3,v=B.meta.list(),g=B.meta.notImplemented,w=B.meta.boolean,x=B.meta.boolean,_=B.meta.todo("Deprecated?"),n(z=i((F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(o,e);var t,r,n,i=Y(o);function o(){var e;W(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return H(e=i.call.apply(i,[this].concat(r)),"name",j,Z(e)),H(e,"display",E,Z(e)),H(e,"localTransform",T,Z(e)),H(e,"lodSphereRadius",O,Z(e)),H(e,"mesh",R,Z(e)),H(e,"minScreenSize",P,Z(e)),H(e,"particleEmitters",D,Z(e)),H(e,"particleSystems",A,Z(e)),H(e,"rotation",M,Z(e)),H(e,"scaling",C,Z(e)),H(e,"translation",k,Z(e)),H(e,"transformModifiers",I,Z(e)),H(e,"useDynamicLod",L,Z(e)),H(e,"useSRT",G,Z(e)),e._worldTransform=N.mat4.create(),e._worldTransformLast=N.mat4.create(),e._perObjectData=U.Tw2PerObjectData.from(V.EveChild.perObjectData),e}return t=o,(r=[{key:"UpdateLod",value:function(e,t){this._lod=e.IsSphereVisible(this.translation,this.lodSphereRadius)?3:0}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.mesh&&this.mesh.GetResources(e);for(var t=0;t<this.particleEmitters.length;t++)this.particleEmitters[t].GetResources(e);for(var r=0;r<this.particleSystems.length;r++)this.particleSystems[r].GetResources(e);return e}},{key:"Update",value:function(e,t){this.useSRT&&(N.quat.normalize(this.rotation,this.rotation),N.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),N.mat4.copy(this._worldTransformLast,this._worldTransform),N.mat4.multiply(this._worldTransform,t,this.localTransform);for(var r=0;r<this.particleEmitters.length;++r)this.particleEmitters[r].Update(e);for(var n=0;n<this.particleSystems.length;++n)this.particleSystems[n].Update(e)}},{key:"GetBatches",value:function(e,t){return!(!this.display||!this.mesh)&&(N.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),N.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform),this.mesh.GetBatches(e,t,this._perObjectData))}}])&&X(t.prototype,r),n&&X(t,n),o}(V.EveChild),j=$((S=F).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=$(S.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),T=$(S.prototype,"localTransform",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.mat4.create()}}),O=$(S.prototype,"lodSphereRadius",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=$(S.prototype,"mesh",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=$(S.prototype,"minScreenSize",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=$(S.prototype,"particleEmitters",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=$(S.prototype,"particleSystems",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=$(S.prototype,"rotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.quat.create()}}),C=$(S.prototype,"scaling",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec3.fromValues(1,1,1)}}),k=$(S.prototype,"translation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec3.create()}}),I=$(S.prototype,"transformModifiers",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=$(S.prototype,"useDynamicLod",[g,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=$(S.prototype,"useSRT",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),z=S))||z)||z)},"./eve/child/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/child/EveChild.js");r.d(t,"EveChild",(function(){return n.EveChild}));var i=r("./eve/child/EveChildBillboard.js");r.d(t,"EveChildBillboard",(function(){return i.EveChildBillboard}));var o=r("./eve/child/EveChildContainer.js");r.d(t,"EveChildContainer",(function(){return o.EveChildContainer}));var a=r("./eve/child/EveChildMesh.js");r.d(t,"EveChildMesh",(function(){return a.EveChildMesh}));var u=r("./eve/child/EveChildParticleSystem.js");r.d(t,"EveChildParticleSystem",(function(){return u.EveChildParticleSystem}))},"./eve/effect/EveLensflare.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLensflare",(function(){return ye}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$=r("./global/utils/index.js"),ee=r("./global/index.js"),te=r("./global/constant/index.js"),re=r("./global/math/index.js"),ne=r("./core/index.js"),ie=r("./eve/effect/EveOccluder.js");function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=pe(e);if(t){var i=pe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return se(this,r)}}function se(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?fe(e):t}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ye=(n=$.meta.type("EveLensflare"),i=$.meta.string,o=$.meta.notImplemented,a=$.meta.list("EveOccluder"),u=$.meta.list("Tw2ValueBinding"),c=$.meta.list("Tw2Curve"),l=$.meta.list("Tw2Curve"),s=$.meta.struct("Tw2Mesh"),f=$.meta.list("EveOccluder"),p=$.meta.vector3,d=$.meta.list("Tw2Curve"),y=$.meta.list("Tw2Curve"),m=$.meta.list("Tw2Curve"),b=$.meta.list("Tw2Curve"),h=$.meta.boolean,v=$.meta.boolean,g=$.meta.boolean,w=$.meta.boolean,x=$.meta.float,_=$.meta.list("EveLensflare"),z=$.meta.todo("Deprecated?"),S=$.meta.float,j=$.meta.float,E=$.meta.list("Tw2CurveSet"),T=$.meta.todo("Deprecated?"),n((J=Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(o,e);var t,r,n,i=le(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),ae(e=i.call(this),"name",P,fe(e)),ae(e,"backgroundOccluders",D,fe(e)),ae(e,"bindings",A,fe(e)),ae(e,"distanceToCenterCurves",M,fe(e)),ae(e,"distanceToEdgeCurves",C,fe(e)),ae(e,"mesh",k,fe(e)),ae(e,"occluders",I,fe(e)),ae(e,"position",L,fe(e)),ae(e,"radialAngleCurves",G,fe(e)),ae(e,"xDistanceToCenter",F,fe(e)),ae(e,"yDistanceToCenter",B,fe(e)),ae(e,"zDistanceToCenter",N,fe(e)),ae(e,"display",U,fe(e)),ae(e,"update",V,fe(e)),ae(e,"useSceneSunDirection",q,fe(e)),ae(e,"doOcclusionQueries",H,fe(e)),ae(e,"cameraFactor",W,fe(e)),ae(e,"flares",X,fe(e)),ae(e,"occlusionIntensity",K,fe(e)),ae(e,"backgroundOcclusionIntensity",Y,fe(e)),ae(e,"curveSets",Q,fe(e)),e._direction=re.vec3.create(),e._transform=re.mat4.create(),e._backBuffer=null,o.init(),e}return t=o,n=[{key:"init",value:function(){if(!o.global){var e=o.global={};e.vec3_0=re.vec3.create(),e.vec3_1=re.vec3.create(),e.vec3_2=re.vec3.create(),e.vec3_3=re.vec3.create(),e.vec4_0=re.vec4.create(),e.vec4_1=re.vec4.create(),e.mat4_0=re.mat4.create(),e.backBuffer=new ne.Tw2TextureRes,e.backBuffer.width=0,e.backBuffer.height=0,e.backBuffer.hasMipMaps=!1,e.occludedLevelIndex=0,e.occluderLevels=[new ne.Tw2RenderTarget,new ne.Tw2RenderTarget,new ne.Tw2RenderTarget,new ne.Tw2RenderTarget]}}}],(r=[{key:"UpdateOccluders",value:function(){if(this.doOcclusionQueries){var e=ee.device,t=e.gl,r=o.global;if(!r.occluderLevels[0].texture||r.occluderLevels[0].width<2*this.occluders.length)for(var n=0;n<r.occluderLevels.length;++n)r.occluderLevels[n].Create(2*this.occluders.length,1,!1);for(var i=0;i<this.flares.length;++i)"_backBuffer"in this.flares[i]&&(this.flares[i]._backBuffer.textureRes=r.occluderLevels.texture);this.occlusionIntensity=1,this.backgroundOcclusionIntensity=1,r.occluderLevels[r.occludedLevelIndex].Set(),e.SetStandardStates(e.RM_OPAQUE),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),r.occluderLevels[r.occludedLevelIndex].Unset();var a=1;e.antialiasing&&(a=e.msaaSamples,t.sampleCoverage(1/a,!1));for(var u=0;u<this.occluders.length;++u)e.SetRenderState(te.RS_COLORWRITEENABLE,8),t.colorMask(!1,!1,!1,!0),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e.antialiasing&&(t.enable(t.SAMPLE_COVERAGE),t.sampleCoverage(.25,!1)),this.occluders[u].UpdateValue(this._transform,u),e.antialiasing&&t.disable(t.SAMPLE_COVERAGE),r.backBuffer.texture||r.backBuffer.Attach(t.createTexture()),t.bindTexture(t.TEXTURE_2D,r.backBuffer.texture),r.backBuffer.width===e.viewportWidth&&r.backBuffer.height===e.viewportHeight||(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.viewportWidth,e.viewportHeight,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),r.backBuffer.width=e.viewportWidth,r.backBuffer.height=e.viewportHeight),t.copyTexImage2D(t.TEXTURE_2D,0,e.alphaBlendBackBuffer?t.RGBA:t.RGB,0,0,r.backBuffer.width,r.backBuffer.height,0),t.bindTexture(t.TEXTURE_2D,null),r.occluderLevels[r.occludedLevelIndex].Set(),ie.EveOccluder.CollectSamples(r.backBuffer,u,r.occluderLevels[0].width/2,a),r.occluderLevels[r.occludedLevelIndex].Unset();e.antialiasing&&t.sampleCoverage(1,!1),r.occluderLevels[(r.occludedLevelIndex+1)%r.occluderLevels.length].Set();var c=new Uint8Array(4*r.occluderLevels[0].width);t.readPixels(0,0,2,1,t.RGBA,t.UNSIGNED_BYTE,c),r.occluderLevels[(r.occludedLevelIndex+1)%r.occluderLevels.length].Unset(),this.occlusionIntensity=1;for(var l=0;l<2*r.occluderLevels[0].width;l+=4)this.occlusionIntensity*=c[l+1]?c[l]/c[l+1]:1;this.backgroundOcclusionIntensity=this.occlusionIntensity,ee.tw2.SetVariableValue("LensflareFxOccScale",[this.occlusionIntensity,this.occlusionIntensity,0,0]),r.occludedLevelIndex=(r.occludedLevelIndex+1)%r.occluderLevels.length}}},{key:"GetBatches",value:function(e,t,r){if(!this.display)return!1;var n=re.vec4.set(o.global.vec4_0,0,0,1,0);if(re.vec4.transformMat4(n,n,ee.device.viewInverse),!(re.vec3.dot(n,this._direction)<0)){for(var i=t.length,a=0;a<this.flares.length;++a)this.flares[a].GetBatches(e,t,r);return this.mesh&&this.mesh.GetBatches(e,t,r),t.length!==i}}},{key:"PrepareRender",value:function(e){if(this.display){var t=o.global,r=t.vec4_0,n=t.vec3_0,i=re.mat4.identity(t.mat4_0),a=t.vec3_2,u=t.vec3_3,c=t.vec3_1,l=t.vec4_1;this.useSceneSunDirection&&e&&re.vec3.copy(this.position,e),re.vec3.transformMat4(n,[0,0,0],ee.device.viewInverse),0===re.vec3.length(this.position)?re.vec3.negate(c,n):(re.vec3.negate(c,this.position),re.vec3.normalize(this._direction,c)),re.vec4.transformMat4(r,[0,0,1,0],ee.device.viewInverse),re.vec3.scaleAndAdd(a,n,r,-this.cameraFactor),re.vec3.negate(u,this._direction),re.mat4.arcFromForward(this._transform,u),re.mat4.setTranslation(this._transform,a),re.mat4.scale(i,i,[this.occlusionIntensity,this.occlusionIntensity,1]);var s=this._direction;ee.tw2.SetVariableValue("LensflareFxDirectionScale",[s[0],s[1],s[2],1]),re.vec4.set(l,s[0],s[1],s[2],0),re.vec4.transformMat4(l,l,ee.device.view),re.vec4.transformMat4(l,l,ee.device.projection),l[0]/=l[3],l[1]/=l[3];for(var f=1-Math.min(1-Math.abs(l[0]),1-Math.abs(l[1])),p=Math.sqrt(l[0]*l[0]+l[1]*l[1]),d=Math.atan2(l[1],l[0])+Math.PI,y=0;y<this.distanceToEdgeCurves.length;++y)this.distanceToEdgeCurves[y].UpdateValue(f);for(var m=0;m<this.distanceToCenterCurves.length;++m)this.distanceToCenterCurves[m].UpdateValue(p);for(var b=0;b<this.radialAngleCurves.length;++b)this.radialAngleCurves[b].UpdateValue(d);for(var h=0;h<this.xDistanceToCenter.length;++h)this.xDistanceToCenter[h].UpdateValue(l[0]+10);for(var v=0;v<this.yDistanceToCenter.length;++v)this.yDistanceToCenter[v].UpdateValue(l[1]+10);for(var g=0;g<this.bindings.length;++g)this.bindings[g].CopyValue();for(var w=0;w<this.flares.length;++w)this.flares[w].UpdateViewDependentData(this._transform)}}}])&&ue(t.prototype,r),n&&ue(t,n),o}($.meta.Model),Z.global=null,P=de((R=J).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=de(R.prototype,"backgroundOccluders",[o,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=de(R.prototype,"bindings",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=de(R.prototype,"distanceToCenterCurves",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=de(R.prototype,"distanceToEdgeCurves",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=de(R.prototype,"mesh",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=de(R.prototype,"occluders",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=de(R.prototype,"position",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return re.vec3.create()}}),G=de(R.prototype,"radialAngleCurves",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=de(R.prototype,"xDistanceToCenter",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=de(R.prototype,"yDistanceToCenter",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=de(R.prototype,"zDistanceToCenter",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=de(R.prototype,"display",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),V=de(R.prototype,"update",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q=de(R.prototype,"useSceneSunDirection",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),H=de(R.prototype,"doOcclusionQueries",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),W=de(R.prototype,"cameraFactor",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),X=de(R.prototype,"flares",[_,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=de(R.prototype,"occlusionIntensity",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Y=de(R.prototype,"backgroundOcclusionIntensity",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Q=de(R.prototype,"curveSets",[E,T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=R))||O)},"./eve/effect/EveMeshOverlayEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMeshOverlayEffect",(function(){return U}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O=r("./global/utils/index.js"),R=r("./core/index.js"),P=r("./curve/index.js"),D=r("./global/constant/index.js");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=B(e);if(t){var i=B(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return G(this,r)}}function G(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var U=(n=O.meta.type("EveMeshOverlayEffect"),i=O.meta.string,o=O.meta.list("Tw2Effect"),a=O.meta.struct("Tw2CurveSet"),u=O.meta.list("Tw2Effect"),c=O.meta.boolean,l=O.meta.notImplemented,s=O.meta.list("Tw2Effect"),f=O.meta.list("Tw2Effect"),p=O.meta.list("Tw2Effect"),d=O.meta.boolean,y=O.meta.plain,n((T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(o,e);var t,r,n,i=L(o);function o(){var e;C(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return M(e=i.call.apply(i,[this].concat(r)),"name",h,F(e)),M(e,"additiveEffects",v,F(e)),M(e,"curveSet",g,F(e)),M(e,"decalEffects",w,F(e)),M(e,"display",x,F(e)),M(e,"distortionEffects",_,F(e)),M(e,"opaqueEffects",z,F(e)),M(e,"transparentEffects",S,F(e)),M(e,"update",j,F(e)),M(e,"visible",E,F(e)),e}return t=o,n=[{key:"createAreaEffects",value:function(e,t,r){r=Object(O.toArray)(r);for(var n=0;n<r.length;n++){var i=r[n];if(i in t&&i in e)for(var o=0;o<t[i].length;o++)e[i].push(R.Tw2Effect.from(t[i][o]))}}},{key:"from",value:function(e,t){var r=new o;if(e){Object(O.assignIfExists)(r,e,["name","display","update"]),e.curveSet&&(r.curveSet=P.Tw2CurveSet.from(e.curveSet));var n=["additiveEffects","distortionEffects","opaqueEffects","transparentEffects","decalEffects"];e.visible&&Object(O.assignIfExists)(r.visible,e.visible,n),this.createAreaEffects(r,e,n)}return!t||t.skipUpdate,r}}],(r=[{key:"Update",value:function(e){this.update&&this.curveSet&&this.curveSet.Update(e)}},{key:"GetBatches",value:function(e,t,r,n){if(!this.display||!n||!n.IsGood())return!1;for(var i=this.GetEffects(e),o=0;o<i.length;o++){var a=new R.Tw2GeometryBatch;a.renderMode=e,a.perObjectData=r,a.geometryRes=n.geometryResource,a.meshIx=n.meshIndex,a.start=0,a.count=n.geometryResource.meshes[n.meshIndex].areas.length,a.effect=i[o],t.Commit(a)}return i.length>0}},{key:"GetEffects",value:function(e){if(this.display)switch(e){case D.RM_OPAQUE:if(this.visible.opaqueEffects)return this.opaqueEffects;break;case D.RM_TRANSPARENT:if(this.visible.transparentEffects)return this.transparentEffects;break;case D.RM_ADDITIVE:if(this.visible.additiveEffects)return this.additiveEffects;break;case D.RM_DECAL:if(this.visible.decalEffects)return this.decalEffects;break;case D.RM_DISTORTION:if(this.visible.distortionEffects)return this.distortionEffects}return[]}}])&&k(t.prototype,r),n&&k(t,n),o}(O.meta.Model),h=N((b=T).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=N(b.prototype,"additiveEffects",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=N(b.prototype,"curveSet",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=N(b.prototype,"decalEffects",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=N(b.prototype,"display",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=N(b.prototype,"distortionEffects",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=N(b.prototype,"opaqueEffects",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=N(b.prototype,"transparentEffects",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=N(b.prototype,"update",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=N(b.prototype,"visible",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opaqueEffects:!0,decalEffects:!0,transparentEffects:!0,additiveEffects:!0,distortionEffects:!0}}}),m=b))||m)},"./eve/effect/EveOccluder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveOccluder",(function(){return j}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./global/index.js"),y=r("./global/math/index.js"),m=r("./core/index.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=p.meta.type("EveOccluder"),i=p.meta.string,o=p.meta.list("EveTransform"),n((f=s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,e);var t,r,n,i=w(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),h(e=i.call(this),"name",c,_(e)),h(e,"sprites",l,_(e)),o.init(),e}return t=o,n=[{key:"CollectSamples",value:function(e,t,r,n){var i=d.device,o=this.global,a=o.effect,u=o.vertexBuffer,c=o.decl;if(!a.effectRes||!a.effectRes.IsGood())return!1;a.parameters.BackBuffer.AttachTextureRes(e),a.parameters.OccluderIndex.SetValue([t,r,n]),i.SetStandardStates(i.RM_ADDITIVE),i.gl.bindBuffer(i.gl.ARRAY_BUFFER,u);for(var l=0;l<a.GetPassCount("Main");++l){if(a.ApplyPass("Main",l),c.SetDeclaration(i,a.GetPassInput("Main",l),16))return!1;i.ApplyShadowState(),i.gl.drawArrays(i.gl.TRIANGLES,0,1530)}return!0}},{key:"init",value:function(){if(!o.global){var e=d.device,t=o.global={};t.mat4_0=y.mat4.create(),t.vec4_0=y.vec4.create(),t.accumulator=new m.Tw2BatchAccumulator,t.effect=m.Tw2Effect.from({name:"Occluder sampler",effectFilePath:"cdn:/graphics/effect/managed/space/specialfx/lensflares/collectsamples.fx",parameters:{OccluderPosition:[1,1,1,1],OccluderIndex:[1,1,1],BackBuffer:""}}),t.vertexBuffer=null,t.decl=m.Tw2VertexDeclaration.from([{usage:"POSITION",usageIndex:0,elements:2},{usage:"TEXCOORD",usageIndex:0,elements:2}]),t.decl.RebuildHash();for(var r=new Float32Array(6120),n=0,i=0;i<16;++i)for(var a=0;a<16;++a){var u=(i+Math.random())/16*2-1,c=(a+Math.random())/16*2-1;r[n++]=1,r[n++]=1,r[n++]=u,r[n++]=c,r[n++]=-1,r[n++]=1,r[n++]=u,r[n++]=c,r[n++]=1,r[n++]=-1,r[n++]=u,r[n++]=c,r[n++]=-1,r[n++]=1,r[n++]=u,r[n++]=c,r[n++]=1,r[n++]=-1,r[n++]=u,r[n++]=c,r[n++]=-1,r[n++]=-1,r[n++]=u,r[n++]=c}t.vertexBuffer=e.gl.createBuffer(),e.gl.bindBuffer(e.gl.ARRAY_BUFFER,t.vertexBuffer),e.gl.bufferData(e.gl.ARRAY_BUFFER,r,e.gl.STATIC_DRAW),e.gl.bindBuffer(e.gl.ARRAY_BUFFER,null)}}}],(r=[{key:"UpdateValue",value:function(e,t){if(d.device.alphaBlendBackBuffer){var r=d.device,n=o.global,i=n.mat4_0,a=n.vec4_0;n.accumulator.Clear();for(var u=0;u<this.sprites.length;++u)this.sprites[u].UpdateViewDependentData(e),this.sprites[u].GetBatches(r.RM_DECAL,n.accumulator);d.tw2.SetVariableValue("OccluderValue",[(1<<2*t)/255,(2<<2*t)/255,0,0]),n.accumulator.Render(),y.mat4.multiply(i,r.viewProjection,this.sprites[0]._worldTransform),y.vec4.transformMat4(a,[0,0,0,1],i);var c=.5*(a[0]/a[3]+1),l=.5*(a[1]/a[3]+1);y.vec4.set(a,.5,.5,0,1),y.vec4.transformMat4(a,a,i);var s=.5*(a[0]/a[3]+1),f=.5*(a[1]/a[3]+1);a[0]=c,a[1]=l,a[2]=s-c,a[3]=f-l,n.effect.parameters.OccluderPosition.SetValue(a)}}}])&&v(t.prototype,r),n&&v(t,n),o}(p.meta.Model),s.global=null,c=S((u=f).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=S(u.prototype,"sprites",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=u))||a)},"./eve/effect/EveStretch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStretch",(function(){return te}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V=r("./global/utils/index.js"),q=r("./global/math/index.js"),H=r("./core/index.js");function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=$(e);if(t){var i=$(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Z(this,r)}}function Z(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var te=(n=V.meta.type("EveStretch"),i=V.meta.string,o=V.meta.list("Tw2CurveSet"),a=V.meta.boolean,u=V.meta.struct(),c=V.meta.struct(),l=V.meta.struct("Tw2Float"),s=V.meta.notImplemented,f=V.meta.struct("Tw2CurveSet"),p=V.meta.notImplemented,d=V.meta.struct(),y=V.meta.notImplemented,m=V.meta.struct("Tw2Curve"),b=V.meta.struct(),h=V.meta.notImplemented,v=V.meta.list("Tr2PointLight"),g=V.meta.struct(),w=V.meta.struct(),x=V.meta.boolean,_=V.meta.notImplemented,z=V.meta.boolean,n((U=N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(o,e);var t,r,n,i=Q(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),X(e=i.call(this),"name",E,J(e)),X(e,"curveSets",T,J(e)),X(e,"display",O,J(e)),X(e,"dest",R,J(e)),X(e,"destObject",P,J(e)),X(e,"length",D,J(e)),X(e,"moveCompletion",A,J(e)),X(e,"moveObject",M,J(e)),X(e,"progressCurve",C,J(e)),X(e,"source",k,J(e)),X(e,"sourceLights",I,J(e)),X(e,"sourceObject",L,J(e)),X(e,"stretchObject",G,J(e)),X(e,"update",F,J(e)),X(e,"useCurveLod",B,J(e)),e._destinationPosition=q.vec3.create(),e._displayDestObject=!0,e._displaySourceObject=!0,e._isNegZForward=!1,e._useTransformsForStretch=!1,e._sourcePosition=q.vec3.create(),e._sourceTransform=null,e._time=0,e._useParentMatrix=!1,o.init(),e}return t=o,n=[{key:"init",value:function(){o.global||(o.global={vec3_0:q.vec3.create(),vec3_1:q.vec3.create(),vec3_2:q.vec3.create(),mat4_0:q.mat4.create(),mat4_1:q.mat4.create()})}}],(r=[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.source&&this.source.GetResources&&this.source.GetResources(e),this.dest&&this.dest.GetResources&&this.dest.GetResources(e),this.sourceObject&&this.sourceObject.GetResources&&this.sourceObject.GetResources(e),this.destObject&&this.destObject.GetResources&&this.destObject.GetResources(e),this.stretchObject&&this.stretchObject.GetResources&&this.stretchObject.GetResources(e),e}},{key:"SetSourcePosition",value:function(e){this._useTransformsForStretch=!1,q.vec3.copy(this._sourcePosition,e)}},{key:"SetSourcePositionFromTransform",value:function(e){this._useTransformsForStretch=!1,this._sourcePosition[0]=e[12],this._sourcePosition[1]=e[13],this._sourcePosition[2]=e[14]}},{key:"SetDestinationPosition",value:function(e){q.vec3.copy(this._destinationPosition,e)}},{key:"SetSourceTransform",value:function(e){this._useTransformsForStretch=!0,this._sourceTransform=e}},{key:"SetIsNegZForward",value:function(e){this._isNegZForward=e}},{key:"UpdateViewDependentData",value:function(e){if(this.display){var t=o.global,r=q.vec3.subtract(t.vec3_0,this._destinationPosition,this._sourcePosition),n=q.mat4.identity(t.mat4_0),i=q.vec3.set(t.vec3_1,0,0,0),a=q.vec3.set(t.vec3_2,0,0,0),u=q.mat4.identity(t.mat4_1),c=q.vec3.length(r);q.vec3.normalize(r,r),this._useTransformsForStretch?(q.mat4.rotateX(n,n,-Math.PI/2),q.mat4.multiply(n,this._sourceTransform,n)):(Math.abs(r[1])>.9?a[2]=1:a[1]=1,q.vec3.cross(i,a,r),q.vec3.normalize(i,i),q.vec3.cross(a,r,i),n[0]=i[0],n[1]=i[1],n[2]=i[2],n[4]=-r[0],n[5]=-r[1],n[6]=-r[2],n[8]=a[0],n[9]=a[1],n[10]=a[2],q.mat4.multiply(n,e,n)),this.destObject&&this._displayDestObject&&(q.mat4.setTranslation(n,this._destinationPosition),this.destObject.UpdateViewDependentData(n)),this.sourceObject&&this._displaySourceObject&&(this._useTransformsForStretch?(q.mat4.identity(n),q.mat4.rotateX(n,n,-Math.PI/2),q.mat4.multiply(n,this._sourceTransform,n)):q.mat4.setTranslation(n,this._sourcePosition),this.sourceObject.UpdateViewDependentData(n)),this.stretchObject&&(this._useTransformsForStretch?(q.mat4.identity(n),q.mat4.scale(n,n,[1,1,c]),q.mat4.multiply(n,this._sourceTransform,n)):(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[4]=a[0],n[5]=a[1],n[6]=a[2],n[8]=-r[0],n[9]=-r[1],n[10]=-r[2],this._isNegZForward&&(c=-c),q.mat4.scale(u,u,[1,1,c]),q.mat4.multiply(n,n,u)),this.stretchObject.UpdateViewDependentData(n))}}},{key:"Update",value:function(e){for(var t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e);this._time+=e,this.source?this.source.GetValueAt(this._time,this._sourcePosition):this._useTransformsForStretch&&(this._sourcePosition[0]=this._sourceTransform[12],this._sourcePosition[1]=this._sourceTransform[13],this._sourcePosition[2]=this._sourceTransform[14]),this.dest&&this.source.GetValueAt(this._time,this._destinationPosition);var r=q.vec3.subtract(o.global.vec3_0,this._destinationPosition,this._sourcePosition);this.length.value=q.vec3.length(r),q.vec3.normalize(r,r),this.sourceObject&&this._displaySourceObject&&this.sourceObject.Update(e),this.destObject&&this._displayDestObject&&this.destObject.Update(e),this.stretchObject&&this.stretchObject.Update(e)}},{key:"GetBatches",value:function(e,t,r){if(!this.display)return!1;var n=t.length;return this.sourceObject&&this._displaySourceObject&&this.sourceObject.GetBatches(e,t,r),this.destObject&&this._displayDestObject&&this.destObject.GetBatches(e,t,r),this.stretchObject&&this.stretchObject.GetBatches(e,t,r),t.length!==n}}])&&K(t.prototype,r),n&&K(t,n),o}(V.meta.Model),N.global=null,E=ee((j=U).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=ee(j.prototype,"curveSets",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=ee(j.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),R=ee(j.prototype,"dest",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=ee(j.prototype,"destObject",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=ee(j.prototype,"length",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new H.Tw2Float}}),A=ee(j.prototype,"moveCompletion",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=ee(j.prototype,"moveObject",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=ee(j.prototype,"progressCurve",[y,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=ee(j.prototype,"source",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=ee(j.prototype,"sourceLights",[h,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=ee(j.prototype,"sourceObject",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=ee(j.prototype,"stretchObject",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=ee(j.prototype,"update",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),B=ee(j.prototype,"useCurveLod",[_,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=j))||S)},"./eve/effect/EveTurretFiringFX.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTurretFiringFX",(function(){return Pe}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe,ae,ue,ce,le,se,fe,pe,de,ye,me,be,he=r("./global/utils/index.js"),ve=r("./global/math/index.js");function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ee(e);if(t){var i=Ee(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Se(this,r)}}function Se(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?je(e):t}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Re=function e(){Oe(this,e),this.constantDelay=0,this.currentStartDelay=0,this.elapsedTime=0,this.muzzlePositionBone=null,this.muzzleTransform=ve.mat4.create(),this.readyToStart=!1,this.started=!1},Pe=(n=he.meta.type("EveTurretFiringFX"),i=he.meta.stage(2),o=he.meta.string,a=he.meta.string,u=he.meta.boolean,c=he.meta.notImplemented,l=he.meta.struct("TriObserverLocal"),s=he.meta.float,f=he.meta.float,p=he.meta.float,d=he.meta.float,y=he.meta.float,m=he.meta.todo("Deprecated?"),b=he.meta.float,h=he.meta.todo("Deprecated?"),v=he.meta.float,g=he.meta.todo("Deprecated?"),w=he.meta.float,x=he.meta.todo("Deprecated?"),_=he.meta.notImplemented,z=he.meta.float,S=he.meta.notImplemented,j=he.meta.float,E=he.meta.boolean,T=he.meta.notImplemented,O=he.meta.float,R=he.meta.float,P=he.meta.notImplemented,D=he.meta.float,A=he.meta.float,M=he.meta.notImplemented,C=he.meta.boolean,k=he.meta.notImplemented,I=he.meta.struct("TriObserverLocal"),L=he.meta.notImplemented,G=he.meta.struct("Tw2CurveSet"),F=he.meta.notImplemented,B=he.meta.struct("Tw2CurveSet"),N=he.meta.list(["EveStretch","EveStretch2"]),U=he.meta.boolean,n(V=i((be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(o,e);var t,r,n,i=ze(o);function o(){var e;Oe(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return we(e=i.call.apply(i,[this].concat(r)),"name",H,je(e)),we(e,"boneName",W,je(e)),we(e,"display",X,je(e)),we(e,"destinationObserver",K,je(e)),we(e,"firingDelay1",Y,je(e)),we(e,"firingDelay2",Q,je(e)),we(e,"firingDelay3",Z,je(e)),we(e,"firingDelay4",J,je(e)),we(e,"firingDelay5",$,je(e)),we(e,"firingDelay6",ee,je(e)),we(e,"firingDelay7",te,je(e)),we(e,"firingDelay8",re,je(e)),we(e,"firingDurationOverride",ne,je(e)),we(e,"firingPeakTime",ie,je(e)),we(e,"isLoopFiring",oe,je(e)),we(e,"maxRadius",ae,je(e)),we(e,"maxScale",ue,je(e)),we(e,"minRadius",ce,je(e)),we(e,"minScale",le,je(e)),we(e,"scaleEffectTarget",se,je(e)),we(e,"sourceObserver",fe,je(e)),we(e,"startCurveSet",pe,je(e)),we(e,"stopCurveSet",de,je(e)),we(e,"stretch",ye,je(e)),we(e,"useMuzzleTransform",me,je(e)),e._endPosition=ve.vec3.create(),e._firingDuration=0,e._isFiring=!1,e._perMuzzleData=[],e}return t=o,(r=[{key:"Initialize",value:function(){this._firingDuration=this.GetCurveDuration();for(var e=0;e<this.stretch.length;++e)this._perMuzzleData[e]=new Re;var t=this._perMuzzleData;t.length>0&&(t[0].constantDelay=this.firingDelay1),t.length>1&&(t[1].constantDelay=this.firingDelay2),t.length>2&&(t[2].constantDelay=this.firingDelay3),t.length>3&&(t[3].constantDelay=this.firingDelay4),t.length>4&&(t[4].constantDelay=this.firingDelay5),t.length>5&&(t[5].constantDelay=this.firingDelay6),t.length>6&&(t[6].constantDelay=this.firingDelay7),t.length>7&&(t[7].constantDelay=this.firingDelay8)}},{key:"GetCurveDuration",value:function(){for(var e=0,t=0;t<this.stretch.length;++t)for(var r=this.stretch[t],n=0;n<r.curveSets.length;++n)e=Math.max(e,r.curveSets[n].GetMaxCurveDuration());return e}},{key:"GetPerMuzzleEffectCount",value:function(){return this.stretch.length}},{key:"SetEndPosition",value:function(e){this._endPosition[0]=e[0],this._endPosition[1]=e[1],this._endPosition[2]=e[2]}},{key:"SetMuzzleBoneID",value:function(e,t){this._perMuzzleData[e].muzzlePositionBone=t}},{key:"GetMuzzleTransform",value:function(e){return this._perMuzzleData[e].muzzleTransform}},{key:"PrepareFiring",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=0;r<this.stretch.length;++r)t<0||t===r?(this._perMuzzleData[r].currentStartDelay=e+this._perMuzzleData[r].constantDelay,this._perMuzzleData[r].started=!1,this._perMuzzleData[r].readyToStart=!1,this._perMuzzleData[r].elapsedTime=0):(this._perMuzzleData[r].currentStartDelay=Number.MAX_VALUE,this._perMuzzleData[r].started=!1,this._perMuzzleData[r].readyToStart=!1,this._perMuzzleData[r].elapsedTime=0);this._isFiring=!0}},{key:"StartMuzzleEffect",value:function(e){for(var t=this.stretch[e],r=0;r<t.curveSets.length;++r){var n=t.curveSets[r];switch(n.name){case"play_start":case"play_loop":n.PlayFrom(-this._perMuzzleData[e].currentStartDelay);break;case"play_stop":n.Stop()}}this._perMuzzleData[e].started=!0,this._perMuzzleData[e].readyToStart=!1}},{key:"StopFiring",value:function(){for(var e=0;e<this.stretch.length;++e){for(var t=this.stretch[e],r=0;r<t.curveSets.length;++r){var n=t.curveSets[r];switch(n.name){case"play_start":case"play_loop":n.Stop();break;case"play_stop":n.Play()}}this._perMuzzleData[e].started=!1,this._perMuzzleData[e].readyToStart=!1,this._perMuzzleData[e].currentStartDelay=0,this._perMuzzleData[e].elapsedTime=0}this._isFiring=!1}},{key:"UpdateViewDependentData",value:function(e){for(var t=0;t<this.stretch.length;++t)this.stretch[t].UpdateViewDependentData(e)}},{key:"Update",value:function(e){for(var t=0;t<this.stretch.length;++t)this._perMuzzleData[t].started&&(this._perMuzzleData[t].elapsedTime+=e),(this._perMuzzleData[t].elapsedTime<this._firingDuration||this.isLoopFiring)&&this._isFiring&&(this._perMuzzleData[t].started?(this.useMuzzleTransform?this.stretch[t].SetSourceTransform(this._perMuzzleData[t].muzzleTransform):this.stretch[t].SetSourcePositionFromTransform(this._perMuzzleData[t].muzzleTransform),this.stretch[t].SetDestinationPosition(this._endPosition),this.stretch[t].SetIsNegZForward(!0)):(this._perMuzzleData[t].readyToStart?(this.StartMuzzleEffect(t),this._perMuzzleData[t].currentStartDelay=0,this._perMuzzleData[t].elapsedTime=0):this._perMuzzleData[t].currentStartDelay-=e,this._perMuzzleData[t].currentStartDelay<=0&&(this._perMuzzleData[t].readyToStart=!0))),this.stretch[t].Update(e)}},{key:"GetBatches",value:function(e,t,r){if(!this.display||!this._isFiring)return!1;for(var n=t.length,i=0;i<this.stretch.length;++i)this._perMuzzleData[i].started&&(this._firingDuration>=this._perMuzzleData[i].elapsedTime||this.isLoopFiring)&&this.stretch[i].GetBatches(e,t,r);return t.length!==n}}])&&xe(t.prototype,r),n&&xe(t,n),o}(he.meta.Model),H=Te((q=be).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),W=Te(q.prototype,"boneName",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),X=Te(q.prototype,"display",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),K=Te(q.prototype,"destinationObserver",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=Te(q.prototype,"firingDelay1",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Q=Te(q.prototype,"firingDelay2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=Te(q.prototype,"firingDelay3",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=Te(q.prototype,"firingDelay4",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$=Te(q.prototype,"firingDelay5",[y,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ee=Te(q.prototype,"firingDelay6",[b,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),te=Te(q.prototype,"firingDelay7",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),re=Te(q.prototype,"firingDelay8",[w,x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ne=Te(q.prototype,"firingDurationOverride",[_,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ie=Te(q.prototype,"firingPeakTime",[S,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oe=Te(q.prototype,"isLoopFiring",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ae=Te(q.prototype,"maxRadius",[T,O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ue=Te(q.prototype,"maxScale",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ce=Te(q.prototype,"minRadius",[P,D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),le=Te(q.prototype,"minScale",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),se=Te(q.prototype,"scaleEffectTarget",[M,C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fe=Te(q.prototype,"sourceObserver",[k,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=Te(q.prototype,"startCurveSet",[L,G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=Te(q.prototype,"stopCurveSet",[F,B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=Te(q.prototype,"stretch",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),me=Te(q.prototype,"useMuzzleTransform",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=q))||V)||V)},"./eve/effect/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/effect/EveLensflare.js");r.d(t,"EveLensflare",(function(){return n.EveLensflare}));var i=r("./eve/effect/EveMeshOverlayEffect.js");r.d(t,"EveMeshOverlayEffect",(function(){return i.EveMeshOverlayEffect}));var o=r("./eve/effect/EveOccluder.js");r.d(t,"EveOccluder",(function(){return o.EveOccluder}));var a=r("./eve/effect/EveStretch.js");r.d(t,"EveStretch",(function(){return a.EveStretch}));var u=r("./eve/effect/EveTurretFiringFX.js");r.d(t,"EveTurretFiringFX",(function(){return u.EveTurretFiringFX}))},"./eve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/child/index.js");r.d(t,"EveChild",(function(){return n.EveChild})),r.d(t,"EveChildBillboard",(function(){return n.EveChildBillboard})),r.d(t,"EveChildContainer",(function(){return n.EveChildContainer})),r.d(t,"EveChildMesh",(function(){return n.EveChildMesh})),r.d(t,"EveChildParticleSystem",(function(){return n.EveChildParticleSystem}));var i=r("./eve/effect/index.js");r.d(t,"EveLensflare",(function(){return i.EveLensflare})),r.d(t,"EveMeshOverlayEffect",(function(){return i.EveMeshOverlayEffect})),r.d(t,"EveOccluder",(function(){return i.EveOccluder})),r.d(t,"EveStretch",(function(){return i.EveStretch})),r.d(t,"EveTurretFiringFX",(function(){return i.EveTurretFiringFX}));var o=r("./eve/item/index.js");r.d(t,"EveBoosterBatch",(function(){return o.EveBoosterBatch})),r.d(t,"EveBoosterSetItem",(function(){return o.EveBoosterSetItem})),r.d(t,"EveBoosterSet",(function(){return o.EveBoosterSet})),r.d(t,"EveCurveLineSetItem",(function(){return o.EveCurveLineSetItem})),r.d(t,"EveCurveLineSet",(function(){return o.EveCurveLineSet})),r.d(t,"EveCustomMask",(function(){return o.EveCustomMask})),r.d(t,"EveLocator2",(function(){return o.EveLocator2})),r.d(t,"EveLocator",(function(){return o.EveLocator})),r.d(t,"EveObjectSetItem",(function(){return o.EveObjectSetItem})),r.d(t,"EveObjectSet",(function(){return o.EveObjectSet})),r.d(t,"EvePlaneSetItem",(function(){return o.EvePlaneSetItem})),r.d(t,"EvePlaneSet",(function(){return o.EvePlaneSet})),r.d(t,"EveSpaceObjectDecal",(function(){return o.EveSpaceObjectDecal})),r.d(t,"EveSpotlightSetItem",(function(){return o.EveSpotlightSetItem})),r.d(t,"EveSpotlightSet",(function(){return o.EveSpotlightSet})),r.d(t,"EveSpriteSetItem",(function(){return o.EveSpriteSetItem})),r.d(t,"EveSpriteSet",(function(){return o.EveSpriteSet})),r.d(t,"EveTurretSetItem",(function(){return o.EveTurretSetItem})),r.d(t,"EveTurretSet",(function(){return o.EveTurretSet}));var a=r("./eve/object/index.js");r.d(t,"EveTransform",(function(){return a.EveTransform})),r.d(t,"EveEffectRoot",(function(){return a.EveEffectRoot})),r.d(t,"EvePlanet",(function(){return a.EvePlanet})),r.d(t,"EveShip2",(function(){return a.EveShip2})),r.d(t,"EveShip",(function(){return a.EveShip})),r.d(t,"EveSpaceObject",(function(){return a.EveSpaceObject})),r.d(t,"EveStation",(function(){return a.EveStation}));var u=r("./eve/EveMissile.js");r.d(t,"EveMissileWarhead",(function(){return u.EveMissileWarhead})),r.d(t,"EveMissile",(function(){return u.EveMissile}));var c=r("./eve/EveSpaceScene.js");r.d(t,"EveSpaceScene",(function(){return c.EveSpaceScene}))},"./eve/item/EveBoosterSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBoosterBatch",(function(){return Ce})),r.d(t,"EveBoosterSetItem",(function(){return ke})),r.d(t,"EveBoosterSet",(function(){return Ie}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe,ae,ue,ce,le,se,fe,pe,de,ye=r("./global/utils/index.js"),me=r("./global/index.js"),be=r("./global/math/index.js"),he=r("./core/index.js"),ve=r("./eve/item/EveObjectSet.js"),ge=r("./core/mesh/index.js"),we=r("./eve/item/EveSpriteSet.js");function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t,r){return(_e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Me(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function ze(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Se(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Te(e,t,r){return t&&Ee(e.prototype,t),r&&Ee(e,r),e}function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Me(e);if(t){var i=Me(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return De(this,r)}}function De(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?Ae(e):t}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ce=function(e){Oe(r,e);var t=Pe(r);function r(){var e;je(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).boosters=null,e}return Te(r,[{key:"Commit",value:function(e){var t=this.perObjectData.ps.Get("Shipdata"),r=t[2];t[2]=0;var n=this.boosters.Render(e);return t[2]=r,n}},{key:"HasTechnique",value:function(e){return this.boosters&&this.boosters.effect&&this.boosters.effect.HasTechnique(e)}}]),r}(he.Tw2RenderBatch),ke=(n=ye.meta.type("EveBoosterSetItem"),i=ye.meta.string,o=ye.meta.uint,a=ye.meta.uint,u=ye.meta.string,c=ye.meta.float,l=ye.meta.matrix4,s=ye.meta.boolean,f=ye.meta.plain,p=ye.meta.float,n((S=function(e){Oe(r,e);var t=Pe(r);function r(){var e;je(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return ze(e=t.call.apply(t,[this].concat(i)),"name",m,Ae(e)),ze(e,"atlas0",b,Ae(e)),ze(e,"atlas1",h,Ae(e)),ze(e,"locatorName",v,Ae(e)),ze(e,"seed",g,Ae(e)),ze(e,"transform",w,Ae(e)),ze(e,"updateFromLocator",x,Ae(e)),ze(e,"visible",_,Ae(e)),ze(e,"wavePhase",z,Ae(e)),e}return Te(r,[{key:"GetTransform",value:function(e){return be.mat4.copy(e,this.transform)}},{key:"GetPosition",value:function(e){return be.mat4.getTranslation(e,this.transform)}},{key:"GetDirection",value:function(e){be.vec3.set(e,this.transform[8],this.transform[9],this.transform[10]),be.vec3.normalize(e,e);var t=this.GetScale();return t<3&&be.vec3.scale(e,e,t/3),e}},{key:"GetScale",value:function(){var e=this.transform;return Math.max(be.vec3.length([e[0],e[1],e[2]]),be.vec3.length([e[4],e[5],e[6]]))}}]),r}(ve.EveObjectSetItem),m=Se((y=S).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=Se(y.prototype,"atlas0",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=Se(y.prototype,"atlas1",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=Se(y.prototype,"locatorName",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=Se(y.prototype,"seed",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7*Math.random()}}),w=Se(y.prototype,"transform",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return be.mat4.create()}}),x=Se(y.prototype,"updateFromLocator",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=Se(y.prototype,"visible",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{glow:!0,symHalo:!0,halo:!0,trail:!0,customValues:!0}}}),z=Se(y.prototype,"wavePhase",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Math.random()}}),d=y))||d),Ie=(j=ye.meta.type("EveBoosterSet",!0),E=ye.meta.notImplemented,T=ye.meta.boolean,O=ye.meta.struct("Tw2Effect"),R=ye.meta.color,P=ye.meta.struct("EveSpriteSet"),D=ye.meta.float,A=ye.meta.color,M=ye.meta.float,C=ye.meta.float,k=ye.meta.notImplemented,I=ye.meta.float,L=ye.meta.float,G=ye.meta.color,F=ye.meta.vector4,B=ye.meta.color,N=ye.meta.color,U=ye.meta.float,V=ye.meta.float,q=ye.meta.float,H=ye.meta.plain,j((de=pe=function(e){Oe(r,e);var t=Pe(r);function r(){var e;je(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return ze(e=t.call.apply(t,[this].concat(i)),"alwaysOn",K,Ae(e)),ze(e,"effect",Y,Ae(e)),ze(e,"glowColor",Q,Ae(e)),ze(e,"glows",Z,Ae(e)),ze(e,"glowScale",J,Ae(e)),ze(e,"haloColor",$,Ae(e)),ze(e,"haloScaleX",ee,Ae(e)),ze(e,"haloScaleY",te,Ae(e)),ze(e,"maxVel",re,Ae(e)),ze(e,"symHaloScale",ne,Ae(e)),ze(e,"trailColor",ie,Ae(e)),ze(e,"trailSize",oe,Ae(e)),ze(e,"warpGlowColor",ae,Ae(e)),ze(e,"warpHaloColor",ue,Ae(e)),ze(e,"glowDistance",ce,Ae(e)),ze(e,"haloDistance",le,Ae(e)),ze(e,"symHaloDistance",se,Ae(e)),ze(e,"visible",fe,Ae(e)),e._parentTransform=be.mat4.create(),e._positions=null,e._decl=he.Tw2VertexDeclaration.from(r.vertexDeclarations),e._perObjectData=he.Tw2PerObjectData.from(r.perObjectData),e._locatorDirty=!0,e}return Te(r,[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}},{key:"AreItemBoundsDirty",value:function(){for(var e=0;e<this.items.length;e++)if(this.items[e]._boundsDirty)return!0;return!!this.glows&&this.glows._dirty}},{key:"OnRebuildBounds",value:function(){}},{key:"RebuildItems",value:function(e){var t=this.glows,n=r.global,i=n.vec3_0;t&&t.ClearItems({skipUpdate:!0}),this._visibleItems=[];for(var o=0;o<this.items.length;o++){var a=this.items[o];if(a.display){if(this._visibleItems.push(a),t){var u=a.customValues&&a.customValues.display?a.customValues:this,c=a.GetPosition(n.vec3_1),l=a.GetDirection(n.vec3_2),s=a.GetScale();this.visible.glows&&a.visible.glow&&t.CreateItem({name:a.name+"_glow",position:be.vec3.subtract(i,c,be.vec3.scale(i,l,u.glowDistance)),blinkRate:a.seed,blinkPhase:a.seed,minScale:u.glowScale*s,maxScale:u.glowScale*s,color:u.glowColor,warpColor:u.warpGlowColor},e),this.visible.symHalos&&a.visible.symHalo&&t.CreateItem({name:a.name+"_symHalo",position:be.vec3.subtract(i,c,be.vec3.scale(i,l,u.symHaloDistance)),blinkRate:a.seed,blinkPhase:a.seed+1,minScale:u.symHaloScale*s,maxScale:u.symHaloScale*s,color:u.haloColor,warpColor:u.warpHaloColor},e),this.visible.halos&&a.visible.halo&&t.CreateItem({name:a.name+"_halo",position:be.vec3.subtract(i,c,be.vec3.scale(i,l,u.haloDistance)),blinkRate:a.seed,blinkPhase:a.seed+1,minScale:u.haloScaleX*s,maxScale:u.haloScaleY*s,color:u.haloColor,warpColor:u.warpHaloColor},e)}a._dirty=!1}}this._dirty=!0}},{key:"FindItemByLocatorName",value:function(e){for(var t=0;t<this.items.length;t++)if(this.items[t].locatorName&&this.items[t].locatorName===e)return this.items[t];return null}},{key:"UpdateItemsFromLocators",value:function(e){for(var t=Array.from(this.items),r=0;r<e.length;r++){var n=e[r],i=n.name,o=n.transform,a=n.atlasIndex0,u=n.atlasIndex1,c=this.FindItemByLocatorName(i);c?(t.splice(t.indexOf(c),1),c.updateFromLocator&&(be.mat4.copy(c.transform,o),c.atlas0=a,c.atlas1=u,c.UpdateValues())):this.CreateItem({name:i,locatorName:i,updateFromLocator:!0,atlas0:a,atlas1:u,transform:o})}for(var l=0;l<t.length;l++)null!==t[l].locatorName&&(this.RemoveItem(t[l]),l--);this._locatorDirty=!1,this._dirty&&this.Rebuild()}},{key:"RebuildItemsFromLocators",value:function(){this._locatorDirty=!0}},{key:"SetWorldSpriteScale",value:function(e){this.glows&&this.glows.SetWorldSpriteScale(e)}},{key:"UpdateViewDependentData",value:function(e){be.mat4.copy(this._parentTransform,e)}},{key:"Update",value:function(e){_e(Me(r.prototype),"Update",this).call(this,e),this.glows&&this.glows.Update(e)}},{key:"Unload",value:function(e){this._positions&&(me.device.gl.deleteBuffer(this._positions),this._positions=null),this.glows&&this.glows.Unload(e),_e(Me(r.prototype),"Unload",this).call(this,e)}},{key:"Rebuild",value:function(e){this.RebuildItems(e);var t=this._visibleItems.length;if(this._dirty=!1,t){for(var n=me.device,i=r._box,o=new Float32Array(t*i.length*6*28),a=[0,3,1,3,2,1],u=0,c=0;c<t;++c)for(var l=this._visibleItems[c],s=0;s<i.length;++s)for(var f=0;f<a.length;++f)o[u++]=i[s][a[f]][0],o[u++]=i[s][a[f]][1],o[u++]=i[s][a[f]][2],o[u++]=0,o[u++]=0,o.set(l.transform,u),u+=16,o[u++]=0,o[u++]=1,o[u++]=1,o[u++]=1,o[u++]=l.wavePhase,o[u++]=l.atlas0,o[u++]=l.atlas1;this._positions=n.gl.createBuffer(),n.gl.bindBuffer(n.gl.ARRAY_BUFFER,this._positions),n.gl.bufferData(n.gl.ARRAY_BUFFER,o,n.gl.STATIC_DRAW),n.gl.bindBuffer(n.gl.ARRAY_BUFFER,null),this._positions.count=12*t*3,this.glows&&this.glows.Rebuild(e),_e(Me(r.prototype),"Rebuild",this).call(this,e)}else _e(Me(r.prototype),"Rebuild",this).call(this,e)}},{key:"GetBatches",value:function(e,t,r){if(!this.display||e!==me.device.RM_ADDITIVE||!this._positions||!this._visibleItems.length)return!1;var n=t.length;if(this.effect){var i=new Ce;be.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._parentTransform),this._perObjectData.vs.Set("Shipdata",r.vs.Get("Shipdata")),this._perObjectData.ps=r.ps,i.perObjectData=this._perObjectData,i.boosters=this,i.renderMode=me.device.RM_ADDITIVE,i.effect=this.effect,t.Commit(i)}return this.glows&&this.glows.GetBoosterGlowBatches(e,t,r,this._parentTransform,r.vs.Get("Shipdata")[0],0),t.length!==n}},{key:"Render",value:function(e){if(!this.effect||!this.effect.IsGood()||!this._positions)return!1;var t=me.device,r=t.gl;r.bindBuffer(r.ARRAY_BUFFER,this._positions);for(var n=0;n<this.effect.GetPassCount(e);++n){if(this.effect.ApplyPass(e,n),!this._decl.SetDeclaration(t,this.effect.GetPassInput(e,n),112))return!1;t.ApplyShadowState(),r.drawArrays(r.TRIANGLES,0,this._positions.count)}return!0}}],[{key:"from",value:function(e,t){var n=new r;if(e&&(Object(ye.assignIfExists)(n,e,["alwaysOn","glowColor","glowScale","haloColor","haloScaleX","haloScaleY","maxVel","symHaloScale","trailColor","trailSize","warpGlowColor","name","display","glowDistance","haloDistance","symHaloDistance","warpHaloColor"]),void 0!==e.warpHalpColor&&(n.warpHaloColor=e.warpHalpColor),e.visible&&Object(ye.assignIfExists)(n.visible,e.visible,["glows","symHalos","halos","trails"]),e.effect&&(n.effect=ge.Tw2Effect.from(e.effect)),e.glows&&(n.glows=we.EveSpriteSet.from(e.glows)),e.items))for(var i=0;i<e.items.length;i++)n.CreateItem(e.items[i]);return t&&t.skipUpdate||n.Initialize(),n}}]),r}(ve.EveObjectSet),pe.Item=ke,pe.perObjectData={vs:[["WorldMat",16],["Shipdata",4]]},pe.vertexDeclarations=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:2},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:4},{usage:"TEXCOORD",usageIndex:4,elements:4},{usage:"TEXCOORD",usageIndex:5,elements:4},{usage:"TEXCOORD",usageIndex:6,elements:1},{usage:"TEXCOORD",usageIndex:7,elements:2}],pe._box=[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]],[[-1,-1,-1],[-1,1,-1],[1,1,-1],[1,-1,-1]],[[-1,-1,0],[-1,1,0],[-1,1,-1],[-1,-1,-1]],[[1,-1,0],[1,-1,-1],[1,1,-1],[1,1,0]],[[-1,-1,0],[-1,-1,-1],[1,-1,-1],[1,-1,0]],[[-1,1,0],[1,1,0],[1,1,-1],[-1,1,-1]]],K=Se((X=de).prototype,"alwaysOn",[E,T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Y=Se(X.prototype,"effect",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=Se(X.prototype,"glowColor",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return be.vec4.create()}}),Z=Se(X.prototype,"glows",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=Se(X.prototype,"glowScale",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),$=Se(X.prototype,"haloColor",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return be.vec4.create()}}),ee=Se(X.prototype,"haloScaleX",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),te=Se(X.prototype,"haloScaleY",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),re=Se(X.prototype,"maxVel",[k,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),ne=Se(X.prototype,"symHaloScale",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ie=Se(X.prototype,"trailColor",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return be.vec4.create()}}),oe=Se(X.prototype,"trailSize",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return be.vec4.create()}}),ae=Se(X.prototype,"warpGlowColor",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return be.vec4.create()}}),ue=Se(X.prototype,"warpHaloColor",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return be.vec4.create()}}),ce=Se(X.prototype,"glowDistance",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2.5}}),le=Se(X.prototype,"haloDistance",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3.01}}),se=Se(X.prototype,"symHaloDistance",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),fe=Se(X.prototype,"visible",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{glows:!0,symHalos:!0,halos:!0,trails:!0}}}),W=X))||W)},"./eve/item/EveCurveLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveCurveLineSetItem",(function(){return Me})),r.d(t,"EveCurveLineSet",(function(){return Ce}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe,ae,ue,ce,le,se,fe,pe,de=r("./global/index.js"),ye=r("./global/utils/index.js"),me=r("./global/math/index.js"),be=r("./core/index.js"),he=r("./eve/item/EveObjectSet.js"),ve=r("./global/constant/d3d.js");function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t,r){return(we="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pe(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function xe(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Se(e,t,r){return t&&ze(e.prototype,t),r&&ze(e,r),e}function je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var i=Pe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Oe(this,r)}}function Oe(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?Re(e):t}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Ae={INVALID:0,STRAIGHT:1,SPHERED:2,CURVED:3},Me=(n=ye.meta.type("EveCurveLineSetItem"),i=ye.meta.float,o=ye.meta.float,a=ye.meta.color,u=ye.meta.color,c=ye.meta.vector3,l=ye.meta.color,s=ye.meta.float,f=ye.meta.uint,p=ye.meta.color,d=ye.meta.vector3,y=ye.meta.vector3,m=ye.meta.float,b=ye.meta.uint,n((M=A=function(e){je(r,e);var t=Te(r);function r(){var e;_e(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return xe(e=t.call.apply(t,[this].concat(i)),"animationSpeed",g,Re(e)),xe(e,"animationScale",w,Re(e)),xe(e,"color1",x,Re(e)),xe(e,"color2",_,Re(e)),xe(e,"intermediatePosition",z,Re(e)),xe(e,"multiColor",S,Re(e)),xe(e,"multiColorBorder",j,Re(e)),xe(e,"numOfSegments",E,Re(e)),xe(e,"overlayColor",T,Re(e)),xe(e,"position1",O,Re(e)),xe(e,"position2",R,Re(e)),xe(e,"width",P,Re(e)),xe(e,"type",D,Re(e)),e}return Se(r,[{key:"ChangePositionFromOriginDirection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.DEFAULT_RAY_LENGTH;me.vec3.copy(this.position1,e),me.vec3.scaleAndAdd(this.position2,e,t,n),this.UpdateValues()}},{key:"ChangePositionFromRay3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.DEFAULT_RAY_LENGTH;return this.ChangePositionFromOriginDirection(me.ray3.$v1(e),me.ray3.$v2(e),t)}},{key:"ChangeColor",value:function(e,t){me.vec3.copy(this.color1,e),me.vec3.copy(this.color2,t),this.UpdateValues()}},{key:"ChangeWidth",value:function(e){this.width=e,this.UpdateValues()}},{key:"ChangeCartesian",value:function(e,t,r){me.vec3.copy(this.position1,e),me.vec3.copy(this.position2,t),me.vec3.copy(this.intermediatePosition,r),this.UpdateValues()}},{key:"ChangePositionCartesian",value:function(e,t){me.vec3.copy(this.position1,e),me.vec3.copy(this.position2,t),this.UpdateValues()}},{key:"ChangeIntermediateCartesian",value:function(e){me.vec3.copy(this.intermediatePosition,e),this.UpdateValues()}},{key:"ChangeSpherical",value:function(e,t,r,n){me.vec3.fromSpherical(this.position1,e,n),me.vec3.fromSpherical(this.position2,t,n),me.vec3.fromSpherical(this.intermediatePosition,r,n),this.UpdateValues()}},{key:"ChangePositionSpherical",value:function(e,t,r){me.vec3.fromSpherical(this.position1,e,r),me.vec3.fromSpherical(this.position2,t,r),this.UpdateValues()}},{key:"ChangeIntermediateSpherical",value:function(e,t){me.vec3.fromSpherical(this.intermediatePosition,e,t),this.UpdateValues()}},{key:"ChangeMultiColor",value:function(e,t){me.vec4.copy(this.multiColor,e),this.multiColorBorder=t,this.UpdateValues()}},{key:"ChangeAnimation",value:function(e,t,r){me.vec4.copy(this.overlayColor,e),this.animationSpeed=t,this.animationScale=r,this.UpdateValues()}},{key:"ChangeSegmentation",value:function(e){this.type!==r.Type.STRAIGHT&&(this.numOfSegments=e,this.UpdateValues())}}]),r}(he.EveObjectSetItem),A.Type=Ae,A.DEFAULT_RAY_LENGTH=1e3,A.DEFAULT_CURVED_SEGMENTS=20,A.DEFAULT_SPHERED_SEGMENTS=20,g=De((v=M).prototype,"animationSpeed",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=De(v.prototype,"animationScale",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=De(v.prototype,"color1",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.vec4.fromValues(1,1,1,1)}}),_=De(v.prototype,"color2",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.vec4.fromValues(1,1,1,1)}}),z=De(v.prototype,"intermediatePosition",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.vec3.create()}}),S=De(v.prototype,"multiColor",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.vec4.fromValues(0,0,0,1)}}),j=De(v.prototype,"multiColorBorder",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),E=De(v.prototype,"numOfSegments",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),T=De(v.prototype,"overlayColor",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.vec4.fromValues(0,0,0,1)}}),O=De(v.prototype,"position1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.vec3.create()}}),R=De(v.prototype,"position2",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.vec3.create()}}),P=De(v.prototype,"width",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=De(v.prototype,"type",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ae.INVALID}}),h=v))||h),Ce=(C=ye.meta.type("EveCurveLineSet"),k=ye.meta.boolean,I=ye.meta.struct("Tw2Effect"),L=ye.meta.struct("Tw2Effect"),G=ye.meta.notImplemented,F=ye.meta.float,B=ye.meta.float,N=ye.meta.notImplemented,U=ye.meta.float,V=ye.meta.boolean,q=ye.meta.quaternion,H=ye.meta.vector3,W=ye.meta.vector3,X=ye.meta.matrix4,K=ye.meta.boolean,Y=ye.meta.boolean,C((pe=fe=function(e){je(r,e);var t=Te(r);function r(){var e;return _e(this,r),xe(e=t.call(this),"additive",J,Re(e)),xe(e,"lineEffect",$,Re(e)),xe(e,"pickEffect",ee,Re(e)),xe(e,"scrollSpeed",te,Re(e)),xe(e,"lineWidthFactor",re,Re(e)),xe(e,"depthOffset",ne,Re(e)),xe(e,"pickable",ie,Re(e)),xe(e,"rotation",oe,Re(e)),xe(e,"scaling",ae,Re(e)),xe(e,"translation",ue,Re(e)),xe(e,"transform",ce,Re(e)),xe(e,"lookAtCamera",le,Re(e)),xe(e,"enableDepth",se,Re(e)),e._worldTransform=me.mat4.create(),e._vertexSize=26,e._vbSize=0,e._vb=null,e._perObjectData=be.Tw2PerObjectData.from(r.perObjectData),e._decl=be.Tw2VertexDeclaration.from(r.vertexDeclarations).SetStride(104),r.init(),e}return Se(r,[{key:"Initialize",value:function(){this.UpdateValues(),this.Rebuild()}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.lineEffect&&this.lineEffect.GetResources(e),e}},{key:"ChangeAllItemColors",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=0;r<this.items.length;r++)this.items[r].ChangeColor(e,t)}},{key:"ChangeAllItemWidths",value:function(e){for(var t=0;t<this.items.length;t++)this.items[t].ChangeWidth(e)}},{key:"AddBoxLinesFromBox3",value:function(e,t,r,n){var i=e[0],o=e[1],a=e[2],u=e[3],c=e[4],l=e[5],s=[i,o,a],f=[i,o,l],p=[u,o,l],d=[u,o,a],y=[i,c,a],m=[i,c,l],b=[u,c,l],h=[u,c,a];return[this.AddStraightLine(s,f,t,r,n),this.AddStraightLine(f,p,t,r,n),this.AddStraightLine(p,d,t,r,n),this.AddStraightLine(d,s,t,r,n),this.AddStraightLine(y,m,t,r,n),this.AddStraightLine(m,b,t,r,n),this.AddStraightLine(b,h,t,r,n),this.AddStraightLine(h,y,t,r,n),this.AddStraightLine(s,y,t,r,n),this.AddStraightLine(f,m,t,r,n),this.AddStraightLine(p,b,t,r,n),this.AddStraightLine(d,h,t,r,n)]}},{key:"AddBoxLinesFromBounds",value:function(e,t,r,n,i){var o=this.constructor.global.box3_0;return this.AddBoxLinesFromBox3(me.box3.fromBounds(o,e,t),r,n,i)}},{key:"AddBoxLinesFromSph3",value:function(e,t,r,n){var i=this.constructor.global.box3_0;return this.AddBoxLinesFromBox3(me.box3.fromSph3(i,e),t,r,n)}},{key:"AddBoxLinesFromPositionRadius",value:function(e,t,r,n,i){var o=this.constructor.global.box3_0;return this.AddBoxLinesFromBox3(me.box3.fromPositionRadius(o,e,t),r,n,i)}},{key:"AddBoxLinesFromItem",value:function(e,t,r,n){if(e.GetBoundingBox){var i=this.constructor.global.box3_0;if(e.GetBoundingBox(i,!0))return this.AddBoxLinesFromBox3(i,t,r,n)}else if(e.GetBoundingSphere){var o=this.constructor.global.sph3_0;if(e.GetBoundingSphere(o,!0))return this.AddBoxLinesFromSph3(o,t,r,n)}throw new Error("Item doesn't provide bounds data or bounds dirty")}},{key:"AddStraightLineFromOriginDirection",value:function(e,t,r,n,i,o){var a=this.AddStraightLine([0,0,0],[0,0,0],n,i,o);return a.ChangePositionFromOriginDirection(e,t,r),a}},{key:"AddStraightLineFromRay3",value:function(e,t,r,n,i){var o=this.AddStraightLine([0,0,0],[0,0,0],r,n,i);return o.ChangePositionFromRay3(e,t),o}},{key:"AddStraightLine",value:function(e,t,r,n,i){return this.CreateItem({type:Me.Type.STRAIGHT,position1:e,position2:t,color1:n,color2:i,width:r})}},{key:"AddCurvedLineCrt",value:function(e,t,r,n,i,o){return this.CreateItem({type:Me.Type.CURVED,position1:e,position2:t,intermediatePosition:r,color1:i,color2:o,width:n,numOfSegments:Me.DEFAULT_CURVED_SEGMENTS})}},{key:"AddCurvedLineSph",value:function(e,t,n,i,o,a,u){var c=r.global;return this.CreateItem({type:Me.Type.CURVED,position1:me.vec3.fromSpherical(c.vec3_0,e,n),position2:me.vec3.fromSpherical(c.vec3_1,t,n),intermediatePosition:me.vec3.fromSpherical(c.vec3_2,i,n),color1:a,color2:u,width:o,numOfSegments:Me.DEFAULT_CURVED_SEGMENTS})}},{key:"AddSpheredLineCrt",value:function(e,t,r,n,i,o){return this.CreateItem({type:Me.Type.SPHERED,position1:e,position2:t,intermediatePosition:r,color1:i,color2:o,width:n,numOfSegments:Me.DEFAULT_SPHERED_SEGMENTS})}},{key:"AddSpheredLineSph",value:function(e,t,n,i,o,a,u){var c=r.global;return this.CreateItem({type:Me.Type.SPHERED,position1:me.vec3.fromSpherical(c.vec3_0,e,n),position2:me.vec3.fromSpherical(c.vec3_1,t,n),intermediatePosition:me.vec3.fromSpherical(c.vec3_2,i,n),color1:a,color2:u,width:o,numOfSegments:Me.DEFAULT_SPHERED_SEGMENTS})}},{key:"OnValueChanged",value:function(){me.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.translation,this.scaling),this._dirty=!0}},{key:"UpdateViewDependentData",value:function(e){if(e?me.mat4.multiply(this._worldTransform,e,this.transform):me.mat4.copy(this._worldTransform,this.transform),this.lookAtCamera){var t=he.EveObjectSet.global,r=t.mat4_0,n=t.vec3_0,i=me.vec3.set(n,1,1,1),o=de.device.viewInverse,a=me.mat4.lookAt(r,o.subarray(12),this._worldTransform.subarray(12),[0,1,0]);me.mat4.transpose(a,a),e&&(me.mat4.getScaling(i,e),me.vec3.multiply(i,this.scaling,n)),this._worldTransform[0]=a[0]*i[0],this._worldTransform[1]=a[1]*i[0],this._worldTransform[2]=a[2]*i[0],this._worldTransform[4]=a[4]*i[1],this._worldTransform[5]=a[5]*i[1],this._worldTransform[6]=a[6]*i[1],this._worldTransform[8]=a[8]*i[2],this._worldTransform[9]=a[9]*i[2],this._worldTransform[10]=a[10]*i[2]}}},{key:"Unload",value:function(e){this._vb&&(de.device.gl.deleteBuffer(this._vb),this._vb=null),we(Pe(r.prototype),"Unload",this).call(this,e)}},{key:"Rebuild",value:function(e){this.RebuildItems(e),this._vbSize=this.lineCount,this._dirty=!1;var t=this._visibleItems.length;if(t){for(var n,i=r.global,o=new Float32Array(6*this._vbSize*this._vertexSize),a=i.vec3_0,u=i.vec3_1,c=i.vec3_2,l=i.vec3_3,s=i.vec3_4,f=i.vec3_5,p=i.vec3_6,d=i.mat4_0,y=i.vec3_7,m=i.vec3_8,b=i.vec3_9,h=i.vec3_10,v=i.vec4_0,g=i.vec4_1,w=0,x=0;x<t;++x){var _=this._visibleItems[x];switch(_.type){case Me.Type.INVALID:break;case Me.Type.STRAIGHT:r.WriteLineVerticesToBuffer(this,_.position1,_.color1,0,_.position2,_.color2,1,x,o,w),w+=6*this._vertexSize;break;case Me.Type.SPHERED:me.vec3.subtract(a,_.position1,_.intermediatePosition),me.vec3.subtract(u,_.position2,_.intermediatePosition),me.vec3.normalize(c,a),me.vec3.normalize(l,u),me.vec3.cross(s,a,u);var z=Math.acos(me.vec3.dot(c,l))/_.numOfSegments;me.mat4.identity(d),me.mat4.rotate(d,d,z,s),me.vec3.copy(y,a),me.vec4.copy(v,_.color1);for(var S=0;S<this.lines[x].numOfSegments;++S){var j=(S+1)/_.numOfSegments;me.vec3.transformMat4(m,y,d),g[0]=_.color1[0]*(1-j)+_.color2[0]*j,g[1]=_.color1[1]*(1-j)+_.color2[1]*j,g[2]=_.color1[2]*(1-j)+_.color2[2]*j,g[3]=_.color1[3]*(1-j)+_.color2[3]*j,me.vec3.add(b,y,_.intermediatePosition),me.vec3.add(h,m,_.intermediatePosition),r.WriteLineVerticesToBuffer(this,b,v,S/_.numOfSegments,h,g,j,x,o,w),w+=6*this._vertexSize,n=y,y=m,m=n,n=v,v=g,g=n}break;case Me.Type.CURVED:me.vec3.subtract(f,_.intermediatePosition,_.position1),me.vec3.subtract(p,_.position2,_.intermediatePosition),me.vec3.copy(b,_.position1),me.vec3.copy(v,_.color1);for(var E=0;E<_.numOfSegments;++E){var T=(E+1)/_.numOfSegments;me.vec3.hermite(h,_.position1,f,_.position2,p,T),g[0]=_.color1[0]*(1-T)+_.color2[0]*T,g[1]=_.color1[1]*(1-T)+_.color2[1]*T,g[2]=_.color1[2]*(1-T)+_.color2[2]*T,g[3]=_.color1[3]*(1-T)+_.color2[3]*T,r.WriteLineVerticesToBuffer(this,b,v,E/_.numOfSegments,h,g,T,x,o,w),w+=6*this._vertexSize,n=b,b=h,h=n,n=v,v=g,g=n}}}this._vb=de.device.gl.createBuffer(),de.device.gl.bindBuffer(de.device.gl.ARRAY_BUFFER,this._vb),de.device.gl.bufferData(de.device.gl.ARRAY_BUFFER,o,de.device.gl.STATIC_DRAW),de.device.gl.bindBuffer(de.device.gl.ARRAY_BUFFER,null),we(Pe(r.prototype),"Rebuild",this).call(this,e)}else we(Pe(r.prototype),"Rebuild",this).call(this,e)}},{key:"GetBatches",value:function(e,t,n){if(!this.display||!this._vb)return!1;var i;switch(e){case de.device.RM_TRANSPARENT:if(this.additive||!this.lineEffect)return!1;i=this.lineEffect;break;case de.device.RM_ADDITIVE:if(!this.additive||!this.lineEffect)return!1;i=this.lineEffect;break;case de.device.RM_PICKABLE:if(!this.pickable||!this.pickEffect)return!1;i=this.pickEffect;break;default:return!1}if(!i||!i.IsGood())return!1;var o=new be.Tw2ForwardingRenderBatch,a=me.mat4.transpose(r.global.mat4_0,this._worldTransform);return this._perObjectData.vs.Set("WorldMat",a),this._perObjectData.ps.Set("WorldMat",a),o.perObjectData=this._perObjectData,o.geometryProvider=this,o.renderMode=e,o.effect=i,t.Commit(o),!0}},{key:"Render",value:function(e,t){if(!e.effect||!e.effect.IsGood()||!this._vb)return!1;t||(t=e.effect.defaultTechnique);var r=de.device,n=r.gl;n.bindBuffer(n.ARRAY_BUFFER,this._vb);for(var i=e.effect.GetPassCount(t),o=0;o<i;++o){e.renderMode!==ve.RM_PICKABLE&&e.effect.SetTechniquePassStateOverride(t,o,ve.RS_ZENABLE,this.enableDepth),e.effect.ApplyPass(t,o);var a=e.effect.GetPassInput(t,o);if(!this._decl.SetDeclaration(r,a,this._decl.stride))return!1;r.ApplyShadowState(),n.drawArrays(n.TRIANGLES,0,6*this._vbSize)}return!0}},{key:"lines",get:function(){return this.items},set:function(e){this.items=e}},{key:"lineCount",get:function(){for(var e=0,t=0;t<this.items.length;t++)this.items[t].type!==Me.Type.INVALID&&(e+=this.items[t].numOfSegments);return e}}],[{key:"createCircle",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.from(e),r=e.center,n=void 0===r?[0,0,0]:r,i=e.radius,o=void 0===i?1:i,a=e.dots,u=void 0===a?100:a,c=e.width,l=void 0===c?1:c,s=e.color,f=void 0===s?[1,1,1,1]:s,p=e.startColor,d=void 0===p?f:p,y=e.endColor,m=void 0===y?f:y,b=e.direction,h=void 0===b?0:b,v=e.directionThickness,g=void 0===v?l:v,w=e.xHeight,x=void 0===w?0:w,_=e.xWidth,z=void 0===_?0:_,S=[],j=[],E=2*Math.PI/u,T=0;T<=2*Math.PI-E;T+=E)S.push([Math.sin(T)*o+n[0],Math.cos(T)*o+n[1],n[2]]),j.push([Math.sin(T)*(o+x)+n[0],Math.cos(T)*(o+x)+n[1],n[2]]);for(var O=0;O<S.length;O++)if(x)t.AddStraightLine(S[O],j[O],l,d,m);else if(z){var R=Array.from(S[O]),P=Array.from(S[O]);R[2]-=z/2,P[2]+=z/2,t.AddStraightLine(R,P,l,d,m)}else t.AddStraightLine(S[O],S[O+1]||S[0],l,d,m);return h&&t.AddStraightLine(S[0],[S[0][0],S[0][1]+h,S[0][2]],g,d,m),t}},{key:"createBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.from(e),r=e.width,n=void 0===r?1:r,i=e.color,o=void 0===i?[1,1,1,1]:i,a=e.minBounds,u=void 0===a?[-1,-1,-1]:a,c=e.maxBounds,l=void 0===c?[1,1,1]:c,s=e.startColor,f=void 0===s?o:s,p=e.endColor,d=void 0===p?o:p,y=e.box,m=e.sphere,b=e.center,h=e.radius,v=e.object;if(v)if(v.GetBoundingBox)y=v.GetBoundingBox([]);else if(v.GetBoundingSphere)m=v.GetBoundingSphere([]);else if(v.minBounds)u=v.minBounds,l=v.maxBounds;else{if(!v.boundingSphereCenter)throw new ReferenceError("Could not find box bounds from object");b=v.boundingSphereCenter,h=v.boundingSphereRadius}y?me.box3.toBounds(y,u,l):m?me.sph3.toBounds(m,u,l):b&&me.box3.fromPositionRadius(b,h);var g=u[0],w=u[1],x=u[2],_=l[0],z=l[1],S=l[2],j=[g,w,x],E=[g,w,S],T=[_,w,S],O=[_,w,x],R=[g,z,x],P=[g,z,S],D=[_,z,S],A=[_,z,x];return t.AddStraightLine(j,E,n,f,d),t.AddStraightLine(E,T,n,f,d),t.AddStraightLine(T,O,n,f,d),t.AddStraightLine(O,j,n,f,d),t.AddStraightLine(R,P,n,f,d),t.AddStraightLine(P,D,n,f,d),t.AddStraightLine(D,A,n,f,d),t.AddStraightLine(A,R,n,f,d),t.AddStraightLine(j,R,n,f,d),t.AddStraightLine(E,P,n,f,d),t.AddStraightLine(T,D,n,f,d),t.AddStraightLine(O,A,n,f,d),t}},{key:"fromTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,0,0,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,1,0,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0,1,1],a=new this;me.mat4.getRotation(a.rotation,e),me.mat4.getTranslation(a.translation,e),me.mat4.getScaling(a.scaling,e),this.init();var u=this.global,c=u.vec3_0,l=u.vec3_1,s=u.vec3_2,f=u.vec3_3;me.vec3.set(c,0,0,0),me.vec3.set(l,r,0,0),me.vec3.set(s,0,r,0),me.vec3.set(f,0,0,r);var p=a.AddStraightLine(c,l,t,n,n);return p.name="x axis",(p=a.AddStraightLine(c,s,t,i,i)).name="y axis",(p=a.AddStraightLine(c,f,t,o,o)).name="z axis",a}},{key:"FillColorVertices",value:function(e,t,r){return t[r++]=e.multiColor[0],t[r++]=e.multiColor[1],t[r++]=e.multiColor[2],t[r++]=e.multiColor[3],t[r++]=e.overlayColor[0],t[r++]=e.overlayColor[1],t[r++]=e.overlayColor[2],t[r++]=e.overlayColor[3],r}},{key:"WriteLineVerticesToBuffer",value:function(e,t,n,i,o,a,u,c,l,s){var f=e.items[c];l[s++]=t[0],l[s++]=t[1],l[s++]=t[2],l[s++]=o[0]-t[0],l[s++]=o[1]-t[1],l[s++]=o[2]-t[2],l[s++]=-e.lineWidthFactor*f.width,l[s++]=0,l[s++]=i,l[s++]=f.multiColorBorder,l[s++]=u-i,l[s++]=f.animationSpeed,l[s++]=f.animationScale,l[s++]=c,l[s++]=n[0],l[s++]=n[1],l[s++]=n[2],l[s++]=n[3],s=r.FillColorVertices(f,l,s),l[s++]=t[0],l[s++]=t[1],l[s++]=t[2],l[s++]=o[0]-t[0],l[s++]=o[1]-t[1],l[s++]=o[2]-t[2],l[s++]=e.lineWidthFactor*f.width,l[s++]=0,l[s++]=i,l[s++]=f.multiColorBorder,l[s++]=u-i,l[s++]=f.animationSpeed,l[s++]=f.animationScale,l[s++]=c,l[s++]=n[0],l[s++]=n[1],l[s++]=n[2],l[s++]=n[3],s=r.FillColorVertices(f,l,s),l[s++]=o[0],l[s++]=o[1],l[s++]=o[2],l[s++]=t[0]-o[0],l[s++]=t[1]-o[1],l[s++]=t[2]-o[2],l[s++]=-e.lineWidthFactor*f.width,l[s++]=1,l[s++]=u,l[s++]=f.multiColorBorder,l[s++]=u-i,l[s++]=f.animationSpeed,l[s++]=f.animationScale,l[s++]=c,l[s++]=a[0],l[s++]=a[1],l[s++]=a[2],l[s++]=a[3],s=r.FillColorVertices(f,l,s),l[s++]=t[0],l[s++]=t[1],l[s++]=t[2],l[s++]=o[0]-t[0],l[s++]=o[1]-t[1],l[s++]=o[2]-t[2],l[s++]=e.lineWidthFactor*f.width,l[s++]=0,l[s++]=i,l[s++]=f.multiColorBorder,l[s++]=u-i,l[s++]=f.animationSpeed,l[s++]=f.animationScale,l[s++]=c,l[s++]=n[0],l[s++]=n[1],l[s++]=n[2],l[s++]=n[3],s=r.FillColorVertices(f,l,s),l[s++]=o[0],l[s++]=o[1],l[s++]=o[2],l[s++]=t[0]-o[0],l[s++]=t[1]-o[1],l[s++]=t[2]-o[2],l[s++]=e.lineWidthFactor*f.width,l[s++]=1,l[s++]=u,l[s++]=f.multiColorBorder,l[s++]=u-i,l[s++]=f.animationSpeed,l[s++]=f.animationScale,l[s++]=c,l[s++]=a[0],l[s++]=a[1],l[s++]=a[2],l[s++]=a[3],s=r.FillColorVertices(f,l,s),l[s++]=o[0],l[s++]=o[1],l[s++]=o[2],l[s++]=t[0]-o[0],l[s++]=t[1]-o[1],l[s++]=t[2]-o[2],l[s++]=-e.lineWidthFactor*f.width,l[s++]=1,l[s++]=u,l[s++]=f.multiColorBorder,l[s++]=u-i,l[s++]=f.animationSpeed,l[s++]=f.animationScale,l[s++]=c,l[s++]=a[0],l[s++]=a[1],l[s++]=a[2],l[s++]=a[3],r.FillColorVertices(f,l,s)}},{key:"init",value:function(){r.global||(r.global={vec3_0:me.vec3.create(),vec3_1:me.vec3.create(),vec3_2:me.vec3.create(),vec3_3:me.vec3.create(),vec3_4:me.vec3.create(),vec3_5:me.vec3.create(),vec3_6:me.vec3.create(),vec3_7:me.vec3.create(),vec3_8:me.vec3.create(),vec3_9:me.vec3.create(),vec3_10:me.vec3.create(),vec4_0:me.vec4.create(),vec4_1:me.vec4.create(),mat4_0:me.mat4.create(),box3_0:me.box3.create(),sph3_0:me.sph3.create()})}}]),r}(he.EveObjectSet),fe.Item=Me,fe.global=null,fe.perObjectData={vs:[["WorldMat",16]],ps:[["WorldMat",16]]},fe.vertexDeclarations=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:3},{usage:"COLOR",usageIndex:0,elements:4},{usage:"COLOR",usageIndex:1,elements:4},{usage:"COLOR",usageIndex:2,elements:4}],J=De((Z=pe).prototype,"additive",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$=De(Z.prototype,"lineEffect",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return be.Tw2Effect.from({effectFilePath:"cdn:/Graphics/Effect/Managed/Space/SpecialFX/Lines3D.fx",textures:{TexMap:"cdn:/texture/global/white.png",OverlayTexMap:"cdn:/texture/global/white.png"}})}}),ee=De(Z.prototype,"pickEffect",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=De(Z.prototype,"scrollSpeed",[G,F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),re=De(Z.prototype,"lineWidthFactor",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ne=De(Z.prototype,"depthOffset",[N,U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ie=De(Z.prototype,"pickable",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oe=De(Z.prototype,"rotation",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.quat.create()}}),ae=De(Z.prototype,"scaling",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.vec3.fromValues(1,1,1)}}),ue=De(Z.prototype,"translation",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.vec3.create()}}),ce=De(Z.prototype,"transform",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.mat4.create()}}),le=De(Z.prototype,"lookAtCamera",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),se=De(Z.prototype,"enableDepth",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q=Z))||Q)},"./eve/item/EveCustomMask.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveCustomMask",(function(){return H}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T=r("./global/math/index.js"),O=r("./global/utils/index.js"),R=r("./core/index.js");r("./eve/item/EveCurveLineSet.js");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function k(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t,r){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=V(e);if(t){var i=V(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return N(this,r)}}function N(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var H=(n=O.meta.type("EveCustomMask"),i=O.meta.stage(1),o=O.meta.string,a=O.meta.boolean,u=O.meta.boolean,c=O.meta.uint,l=O.meta.quaternion,s=O.meta.vector3,f=O.meta.vector4,p=O.meta.plain,d=O.meta.todo("Move to direct class properties"),y=O.meta.isPrivate,m=O.meta.vector3,n(b=i((E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(o,e);var t,r,n,i=B(o);function o(){var e;I(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return k(e=i.call.apply(i,[this].concat(r)),"name",v,U(e)),k(e,"display",g,U(e)),k(e,"isMirrored",w,U(e)),k(e,"materialIndex",x,U(e)),k(e,"rotation",_,U(e)),k(e,"scaling",z,U(e)),k(e,"targetMaterials",S,U(e)),k(e,"parameters",j,U(e)),e._worldInverseTranspose=T.mat4.create(),e}return t=o,n=[{key:"get",value:function(e,t,r){t=G(V(o),"get",this).call(this,e,t,r);var n=e.parameters,i=n.PatternMaskMap,a=n.PatternMaskMap.overrides;return t.resourcePath=i.GetValue(),t.addressUMode=a?a.addressUMode:1,t.addressVMode=a?a.addressVMode:1,t.parameters=e.GetParameters(),t}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.skipUpdate,i=C(r,["skipUpdate"]),a=G(V(o),"set",this).call(this,e,t,A(A({},i),{},{skipUpdate:!0}));if(t){var u=t.parameters,c=t.addressUMode,l=t.addressVMode,s=t.resourcePath;e.parameters.PatternMaskMap.SetValue(s)&&(a=!0),e.parameters.PatternMaskMap.SetOverrides({addressUMode:c,addressVMode:l})&&(a=!0),u&&e.SetParameters(u,!0)&&(a=!0)}return a&&!n&&e.UpdateValues(r),a}},{key:"ApplyMaterials",value:function(e,t,r){var n=0===r?"PMtl1":"PMtl2",i=0===r?"PatternMask1Map":"PatternMask2Map",o=e.parameters,a=t.parameters;function u(e,t){e&&t&&(t.SetValue(e.GetValue()),e.OnEvent("modified",(function(){return t.SetValue(e.GetValue())})),e instanceof R.Tw2TextureParameter&&(t.overrides=e.overrides,e.OnEvent("overrides_modified",(function(){t.overrides=e.overrides}))))}u(a.DiffuseColor,o[n+"DiffuseColor"]),u(a.DustDiffuseColor,o[n+"DustDiffuseColor"]),u(a.FresnelColor,o[n+"FresnelColor"]),u(a.Gloss,o[n+"Gloss"]),u(a.PatternMaskMap,o[i])}}],(r=[{key:"UpdatePerObjectData",value:function(e,t,r,n){this.SetParentTransform(e).RebuildTransforms();var i=this.display&&n?this.targetMaterials:T.vec4.ZERO,o=0,a=0,u=0;if(this.parameters&&this.parameters.PatternMaskMap&&this.parameters.PatternMaskMap.overrides){var c=this.parameters.PatternMaskMap.overrides;4===c.addressUMode&&(o=1),4===c.addressVMode&&(a=1),4===c.addressWMode&&(u=1)}t.ps.Set("CustomMaskTarget"+r,i),t.ps.Set("CustomMaskMaterialID"+r,[this.materialIndex,o,a,u]),t.vs.SetIndex("CustomMaskData"+r,1,this.isMirrored?1:0),t.vs.Set("CustomMaskMatrix"+r,this._worldInverseTranspose)}},{key:"GetParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R.Tw2Effect.getParameterObject(this.parameters,e,!1,!0,!0)}},{key:"SetParameters",value:function(e,t){var r=R.Tw2Effect.setParameterObject(this.parameters,e,!1,!0,!0);return r&&!t&&this.UpdateValues(),r}},{key:"BindEffectPatternParameters",value:function(e,t){this.constructor.ApplyMaterials(e,this,t)}},{key:"position",get:function(){return this.translation},set:function(e){this.SetTranslation(e)}}])&&L(t.prototype,r),n&&L(t,n),o}(R.Tw2Transform),v=q((h=E).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=q(h.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=q(h.prototype,"isMirrored",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=q(h.prototype,"materialIndex",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=q(h.prototype,"rotation",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.quat.create()}}),z=q(h.prototype,"scaling",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.vec3.fromValues(1,1,1)}}),S=q(h.prototype,"targetMaterials",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.vec4.fromValues(1,1,1,1)}}),j=q(h.prototype,"parameters",[p,d,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{PatternMaskMap:new R.Tw2TextureParameter("PatternMaskMap","cdn:/texture/global/black.png"),DiffuseColor:new R.Tw2Vector4Parameter("DiffuseColor",[0,0,0,1]),DustDiffuseColor:new R.Tw2Vector4Parameter("DustDiffuseColor",[0,0,0,1]),FresnelColor:new R.Tw2Vector4Parameter("FresnelColor",[0,0,0,1]),Gloss:new R.Tw2Vector4Parameter("Gloss",[0,0,0,0])}}}),q(h.prototype,"position",[m],Object.getOwnPropertyDescriptor(h.prototype,"position"),h.prototype),b=h))||b)||b)},"./eve/item/EveLocator2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLocator2",(function(){return I})),r.d(t,"EveLocator",(function(){return L}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z=r("./global/utils/index.js"),S=r("./global/math/index.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var i=C(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}function A(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var I=(n=z.meta.type("EveLocator2"),i=z.meta.stage(1),o=z.meta.string,a=z.meta.matrix4,u=z.meta.uint,c=z.meta.todo("Move to EveLocator only?"),l=z.meta.uint,s=z.meta.todo("Move to EveLocator only?"),f=z.meta.struct("Tw2Bone"),p=z.meta.isPrivate,n(d=i((x=w=function(e){R(o,e);var t,r,n,i=D(o);function o(){var e;T(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(e=i.call.apply(i,[this].concat(r)),"name",m,M(e)),E(e,"transform",b,M(e)),E(e,"atlasIndex0",h,M(e)),E(e,"atlasIndex1",v,M(e)),E(e,"bone",g,M(e)),e}return t=o,(r=[{key:"GetTransform",value:function(e){return S.mat4.copy(e,this.transform)}},{key:"GetBoundingBox",value:function(e){return S.box3.fromPositionRadius(e,this.GetTranslation(S.vec3.create()),2*this.GetScale())}},{key:"GetBoundingSphere",value:function(e){return S.sph3.fromPositionRadius(e,this.GetTranslation(S.vec3.create()),2*this.GetScale())}},{key:"Intersect",value:function(e,t,r){if(!e.GetOption("locators","skip")){var n=e.IntersectSph3(this.GetBoundingSphere(S.vec3.create()),r);if(n)return n.name=this.name,n.item=this,t.push(n),n}}},{key:"GetGlowTranslation",value:function(e,t,r){return this.GetDirection(e),t&&S.vec3.scale(e,e,t),S.vec3.subtract(e,e,this.GetTranslation(o.global.vec3_0)),r&&S.vec3.transformMat4(e,e,r),e}},{key:"GetWeaponRotationTranslation",value:function(e,t,r){var n=S.mat4.copy(o.global.mat4_0,this.transform);S.vec3.normalize(n.subarray(0,3),n.subarray(0,3)),S.vec3.normalize(n.subarray(4,7),n.subarray(4,7)),S.vec3.normalize(n.subarray(8,11),n.subarray(8,11)),r&&S.mat4.multiply(n,r,n),S.mat4.getRotation(e,n),S.mat4.getTranslation(t,n)}},{key:"GetTranslation",value:function(e,t){return S.mat4.getTranslation(e,this.transform),t&&S.vec3.transformMat4(e,e,t),e}},{key:"GetDirection",value:function(e,t){S.vec3.set(e,this.transform[8],this.transform[9],this.transform[10]),t&&S.vec3.transformMat4(e,e,t),S.vec3.normalize(e,e);var r=this.GetScale();return r<3&&S.vec3.scale(e,e,r/3),e}},{key:"GetScale",value:function(){var e=this.transform;return Math.max(S.vec3.length([e[0],e[1],e[2]]),S.vec3.length([e[4],e[5],e[6]]))}},{key:"FindBone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.bone=e.FindBoneForMesh(this.name,t),this.bone}},{key:"type",get:function(){var e=this.name.split("_")[1];return o.LocatorType[e.toUpperCase()]||-1}}])&&O(t.prototype,r),n&&O(t,n),o}(z.meta.Model),w.global={vec3_0:S.vec3.create(),mat4_0:S.mat4.create()},w.LocatorType={UNKNOWN:0,AUDIO:1,ATTACH:2,BOOSTER:3,TURRET:100,XL_TURRET:101,LAUNCHER:102,CHAIN:103,ATOMIC:104},w.Type={AUDIO:"locator_audio",ATTACH:"locator_attach",BOOSTER:"locator_booster",TURRET:"locator_turret",XL_TURRET:"locator_xl",CHAIN:"locator_chain",ATOMIC:"locator_atomic",LAUNCHER:"locator_launcher"},m=k((y=x).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=k(y.prototype,"transform",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.mat4.create()}}),h=k(y.prototype,"atlasIndex0",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=k(y.prototype,"atlasIndex1",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=k(y.prototype,"bone",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d)||d),L=z.meta.type("EveLocator")(_=function(e){R(r,e);var t=D(r);function r(){return T(this,r),t.apply(this,arguments)}return r}(I))||_},"./eve/item/EveLocatorSets.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLocatorSetItem",(function(){return L})),r.d(t,"EveLocatorSets",(function(){return G}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S=r("./global/utils/index.js"),j=r("./global/math/index.js");function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var i=k(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return M(this,r)}}function M(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var L=(n=S.meta.type("EveLocatorSetItem"),i=S.meta.stage(1),o=S.meta.uint,a=S.meta.vector3,u=S.meta.quaternion,c=S.meta.vector3,n(l=i((m=function(e){P(o,e);var t,r,n,i=A(o);function o(){var e;O(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return T(e=i.call.apply(i,[this].concat(r)),"boneIndex",f,C(e)),T(e,"position",p,C(e)),T(e,"rotation",d,C(e)),T(e,"scaling",y,C(e)),e}return t=o,n=[{key:"blackStruct",value:function(e){var t=new o;return j.vec3.copy(t.position,e.ReadF32Array(3)),t.boneIndex=e.ReadUint(),j.vec4.copy(t.rotation,e.ReadF32Array(4)),t}}],(r=[{key:"GetTransform",value:function(e){return j.mat4.fromRotationTranslationScale(e,this.rotation,this.position,this.scaling)}}])&&R(t.prototype,r),n&&R(t,n),o}(S.meta.Model),f=I((s=m).prototype,"boneIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),p=I(s.prototype,"position",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.vec3.create()}}),d=I(s.prototype,"rotation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.quat.create()}}),y=I(s.prototype,"scaling",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.vec3.fromValues(1,1,1)}}),l=s))||l)||l),G=(b=S.meta.type("EveLocatorSets",!0),h=S.meta.string,v=S.meta.list(L),b((z=function(e){P(r,e);var t=A(r);function r(){var e;O(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return T(e=t.call.apply(t,[this].concat(i)),"name",x,C(e)),T(e,"locators",_,C(e)),e}return r}(S.meta.Model),x=I((w=z).prototype,"name",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=I(w.prototype,"locators",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=w))||g)},"./eve/item/EveObjectSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveObjectSetItem",(function(){return A})),r.d(t,"EveObjectSet",(function(){return M}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./global/utils/index.js"),g=r("./global/math/index.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r){return t&&z(e.prototype,t),r&&z(e,r),e}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var A=(n=v.meta.boolean,a=function(e){j(r,e);var t=T(r);function r(){var e;_(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return x(e=t.call.apply(t,[this].concat(i)),"display",o,R(e)),e._dirty=!0,e._boundsDirty=!0,e}return S(r,[{key:"OnValueChanged",value:function(){this._dirty=!0,this._boundsDirty=!0}}]),r}(v.meta.Model),o=D((i=a).prototype,"display",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i),M=(u=v.meta.boolean,c=v.meta.boolean,l=v.meta.list(),s=v.meta.abstract,f=v.meta.abstract,h=b=function(e){j(r,e);var t=T(r);function r(){var e;_(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return x(e=t.call.apply(t,[this].concat(i)),"autoRebuild",d,R(e)),x(e,"display",y,R(e)),x(e,"items",m,R(e)),e._dirty=!0,e._visibleItems=[],e._boundsDirty=!0,e._boundingBox=null,e._boundingSphere=null,e}return S(r,[{key:"Initialize",value:function(){this.Rebuild()}},{key:"RebuildBounds",value:function(e){return this._boundingBox||(this._boundingBox=g.box3.create(),this._boundingSphere=g.sph3.create(),this._boundsDirty=!0),e&&this._boundsDirty||(this._boundsDirty=this.AreItemBoundsDirty()),(e||this._boundsDirty)&&(g.box3.empty(this._boundingBox),g.sph3.empty(this._boundingSphere),this.OnRebuildBounds()),!1}},{key:"OnRebuildBounds",value:function(){this._boundsDirty=!1}},{key:"GetBoundingBox",value:function(e,t){return this.RebuildBounds(t),g.box3.copy(this._boundingBox,this._boundingBox),this._boundsDirty?null:e}},{key:"GetBoundingSphere",value:function(e,t){return this.RebuildBounds(t),g.sph3.copy(this._boundingSphere,this._boundingSphere),this._boundsDirty?null:e}},{key:"OnValueChanged",value:function(){this._dirty=!0,this._boundsDirty=!0}},{key:"OnItemModified",value:function(e,t){var r=t&&t.skipEvents;this.items.includes(e)?(this._dirty=!0,r||this.EmitEvent("item_modified",e,t)):(r||this.EmitEvent("item_removed",e,t),e.OffEvent("modified",this.OnItemModified)),this._boundsDirty=!0}},{key:"CreateItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=this.constructor.Item.from(e);return this.items.push(r),this._dirty=!0,this._boundsDirty=!0,r.OnEvent("modified",this.OnItemModified,this),t&&t.skipEvents||this.EmitEvent("item_created",r,t),t&&t.skipUpdate||this.UpdateValues(t),r}},{key:"AddItem",value:function(e,t){return!this.items.includes(e)&&(this.items.push(e),this._dirty=!0,this._boundsDirty=!0,e.OnEvent("modified",this.OnItemModified,this),t&&t.skipEvents||this.EmitEvent("item_added",e,t),t&&t.skipUpdate||this.UpdateValues(t),!0)}},{key:"RemoveItem",value:function(e,t){var r=this.items.indexOf(e);return-1!==r&&(this.items.splice(r,1),this._dirty=!0,this._boundsDirty=!0,e.OffEvent("modified",this.OnItemModified),t&&t.skipEvents||this.EmitEvent("item_removed",e,t),t&&t.skipUpdate||this.UpdateValues(t),!0)}},{key:"ClearItems",value:function(e){if(!this.items.length)return!1;var t,r=e&&e.skipEvents;r||(t=Array.from(this.items));for(var n=0;n<this.items.length;n++)this.RemoveItem(this.items[n],{skipEvents:!0,skipUpdate:!0}),n--;return r||this.EmitEvent("items_cleared",t,e),e&&e.skipUpdate||this.UpdateValues(e),!0}},{key:"RebuildItems",value:function(e){if(this._visibleItems.splice(0),this.display){for(var t=0;t<this.items.length;t++){var r=this.items[t],n=e&&e.skipEvents;r.HasEvent("modified",this.OnItemModified)||(n||this.EmitEvent("item_added",r,e),r.OnEvent("modified",this.OnItemModified,this)),r.display&&this._visibleItems.push(r),r._dirty&&!n&&this.EmitEvent("item_rebuilt",r,e),r._dirty=!1}this._dirty=!0}else this._dirty=!0}},{key:"AreItemsDirty",value:function(){for(var e=0;e<this.items.length;e++)if(this.items[e]._dirty)return!0;return!1}},{key:"AreItemBoundsDirty",value:function(){for(var e=0;e<this.items.length;e++)if(this.items[e]._boundsDirty)return!0;return!1}},{key:"Update",value:function(e){this.display&&(!this._dirty&&this.autoRebuild&&this.AreItemsDirty()&&(this._dirty=!0),this._dirty&&this.Rebuild())}},{key:"Unload",value:function(e){e&&e.skipEvents||this.EmitEvent("unloaded",this,e)}},{key:"Rebuild",value:function(e){e&&e.skipEvents||this.EmitEvent("rebuilt",this,e)}},{key:"GetBatches",value:function(e,t,r){return!1}},{key:"Render",value:function(){}}]),r}(v.meta.Model),b.Item=null,b.global={vec3_0:g.vec3.create(),vec3_1:g.vec3.create(),vec3_2:g.vec3.create(),vec4_0:g.vec4.create(),vec4_1:g.vec4.create(),mat4_0:g.mat4.create()},d=D((p=h).prototype,"autoRebuild",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=D(p.prototype,"display",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=D(p.prototype,"items",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D(p.prototype,"GetBatches",[s],Object.getOwnPropertyDescriptor(p.prototype,"GetBatches"),p.prototype),D(p.prototype,"Render",[f],Object.getOwnPropertyDescriptor(p.prototype,"Render"),p.prototype),p)},"./eve/item/EvePlaneSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePlaneSetItem",(function(){return De})),r.d(t,"EvePlaneSet",(function(){return Ae}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe,ae,ue,ce,le,se,fe,pe=r("./global/utils/index.js"),de=r("./global/index.js"),ye=r("./global/math/index.js"),me=r("./core/index.js"),be=r("./eve/item/EveObjectSet.js");function he(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ve(e,t,r){return(ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Re(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function ge(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e,t,r){return t&&_e(e.prototype,t),r&&_e(e,r),e}function Se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Re(e);if(t){var i=Re(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Te(this,r)}}function Te(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?Oe(e):t}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pe=function(e){Se(r,e);var t=Ee(r);function r(){var e;xe(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).planeSet=null,e}return ze(r,[{key:"Commit",value:function(e){return this.planeSet.Render(e)}},{key:"HasTechnique",value:function(e){return this.planeSet&&this.planeSet.effect&&this.planeSet.effect.HasTechnique(e)}}]),r}(me.Tw2RenderBatch),De=(n=pe.meta.type("EvePlaneSetItem",!0),i=pe.meta.string,o=pe.meta.notImplemented,a=pe.meta.float,u=pe.meta.notImplemented,c=pe.meta.float,l=pe.meta.notImplemented,s=pe.meta.uint,f=pe.meta.notImplemented,p=pe.meta.float,d=pe.meta.notImplemented,y=pe.meta.float,m=pe.meta.color,b=pe.meta.vector4,h=pe.meta.vector4,v=pe.meta.vector4,g=pe.meta.vector4,w=pe.meta.uint,x=pe.meta.vector3,_=pe.meta.quaternion,z=pe.meta.vector3,S=pe.meta.uint,j=pe.meta.uint,E=pe.meta.todo("Identify if this is required anywhere apart from the EVESOF, or if it can be deprecated"),T=pe.meta.uint,O=pe.meta.alias("maskAtlasID"),n((Y=function(e){Se(r,e);var t=Ee(r);function r(){var e;xe(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return he(e=t.call.apply(t,[this].concat(i)),"name",D,Oe(e)),he(e,"blinkRate",A,Oe(e)),he(e,"blinkPhase",M,Oe(e)),he(e,"blinkMode",C,Oe(e)),he(e,"dutyCycle",k,Oe(e)),he(e,"rate",I,Oe(e)),he(e,"color",L,Oe(e)),he(e,"layer1Scroll",G,Oe(e)),he(e,"layer1Transform",F,Oe(e)),he(e,"layer2Scroll",B,Oe(e)),he(e,"layer2Transform",N,Oe(e)),he(e,"maskAtlasID",U,Oe(e)),he(e,"position",V,Oe(e)),he(e,"rotation",q,Oe(e)),he(e,"scaling",H,Oe(e)),he(e,"boneIndex",W,Oe(e)),he(e,"groupIndex",X,Oe(e)),he(e,"colorType",K,Oe(e)),e}return ze(r,[{key:"GetTransform",value:function(e){return ye.mat4.fromRotationTranslationScale(e,this.rotation,this.position,this.scaling)}},{key:"OnValueChanged",value:function(){this._dirty=!0}},{key:"maskMapAtlasIndex",get:function(){return this.maskAtlasID},set:function(e){this.maskAtlasID=e}}],[{key:"set",value:function(e,t,n){return t&&void 0!==t.maskMapAtlasIndex&&(t.maskAtlasID=t.maskMapAtlasIndex),ve(Re(r),"set",this).call(this,e,t,n)}}]),r}(be.EveObjectSetItem),D=ge((P=Y).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),A=ge(P.prototype,"blinkRate",[o,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=ge(P.prototype,"blinkPhase",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=ge(P.prototype,"blinkMode",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=ge(P.prototype,"dutyCycle",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=ge(P.prototype,"rate",[d,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=ge(P.prototype,"color",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye.vec4.create()}}),G=ge(P.prototype,"layer1Scroll",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye.vec4.create()}}),F=ge(P.prototype,"layer1Transform",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye.vec4.create()}}),B=ge(P.prototype,"layer2Scroll",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye.vec4.create()}}),N=ge(P.prototype,"layer2Transform",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye.vec4.create()}}),U=ge(P.prototype,"maskAtlasID",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=ge(P.prototype,"position",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye.vec3.create()}}),q=ge(P.prototype,"rotation",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye.quat.create()}}),H=ge(P.prototype,"scaling",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye.vec3.fromValues(1,1,1)}}),W=ge(P.prototype,"boneIndex",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=ge(P.prototype,"groupIndex",[j,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),K=ge(P.prototype,"colorType",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),ge(P.prototype,"maskMapAtlasIndex",[O],Object.getOwnPropertyDescriptor(P.prototype,"maskMapAtlasIndex"),P.prototype),R=P))||R),Ae=(Q=pe.meta.type("EvePlaneSet",!0),Z=pe.meta.string,J=pe.meta.struct(),$=pe.meta.notImplemented,ee=pe.meta.boolean,te=pe.meta.notImplemented,re=pe.meta.byte,ne=pe.meta.list("EvePlaneSetItem"),Q((fe=se=function(e){Se(r,e);var t=Ee(r);function r(){var e;xe(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return he(e=t.call.apply(t,[this].concat(i)),"name",ae,Oe(e)),he(e,"effect",ue,Oe(e)),he(e,"hideOnLowQuality",ce,Oe(e)),he(e,"pickBufferID",le,Oe(e)),e._vertexBuffer=null,e._indexBuffer=null,e._decl=me.Tw2VertexDeclaration.from(r.vertexDeclarations),e}return ze(r,[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}},{key:"Unload",value:function(e){this._vertexBuffer&&(de.device.gl.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(de.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),ve(Re(r.prototype),"Unload",this).call(this,e)}},{key:"Rebuild",value:function(e){this.RebuildItems(e),this._dirty=!1;var t=this._visibleItems.length;if(t){for(var n=new Float32Array(4*t*35),i=0;i<t;++i){var o=this._visibleItems[i],a=4*i*35;n[a+35-3]=0,n[a+35+35-3]=1,n[a+70+35-3]=2,n[a+105+35-3]=3;for(var u=ye.mat4.fromRotationTranslationScale(be.EveObjectSet.global.mat4_0,o.rotation,o.position,o.scaling),c=0;c<4;++c){var l=a+35*c;n[l]=u[0],n[l+1]=u[4],n[l+2]=u[8],n[l+3]=u[12],n[l+4]=u[1],n[l+5]=u[5],n[l+6]=u[9],n[l+7]=u[13],n[l+8]=u[2],n[l+9]=u[6],n[l+10]=u[10],n[l+11]=u[14],n[l+12]=o.color[0],n[l+13]=o.color[1],n[l+14]=o.color[2],n[l+15]=o.color[3]*r.alphaMultiplier,n[l+16]=o.layer1Transform[0],n[l+17]=o.layer1Transform[1],n[l+18]=o.layer1Transform[2],n[l+19]=o.layer1Transform[3],n[l+20]=o.layer2Transform[0],n[l+21]=o.layer2Transform[1],n[l+22]=o.layer2Transform[2],n[l+23]=o.layer2Transform[3],n[l+24]=o.layer1Scroll[0],n[l+25]=o.layer1Scroll[1],n[l+26]=o.layer1Scroll[2],n[l+27]=o.layer1Scroll[3],n[l+28]=o.layer2Scroll[0],n[l+29]=o.layer2Scroll[1],n[l+30]=o.layer2Scroll[2],n[l+31]=o.layer2Scroll[3],n[l+33]=o.boneIndex,n[l+34]=o.maskAtlasID}}var s=de.device.gl;this._vertexBuffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this._vertexBuffer),s.bufferData(s.ARRAY_BUFFER,n,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,null);for(var f=new Uint16Array(6*t),p=0;p<t;++p){var d=6*p,y=4*p;f[d]=y,f[d+1]=y+2,f[d+2]=y+1,f[d+3]=y,f[d+4]=y+3,f[d+5]=y+2}this._indexBuffer=s.createBuffer(),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this._indexBuffer),s.bufferData(s.ELEMENT_ARRAY_BUFFER,f,s.STATIC_DRAW),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=6*t,ve(Re(r.prototype),"Rebuild",this).call(this,e)}else ve(Re(r.prototype),"Rebuild",this).call(this,e)}},{key:"GetBatches",value:function(e,t,r){if(this.display&&e===de.device.RM_ADDITIVE&&this.effect&&this.effect.IsGood()&&this._indexBuffer&&this._vertexBuffer&&this._visibleItems.length){var n=new Pe;return n.renderMode=de.device.RM_ADDITIVE,n.planeSet=this,n.perObjectData=r,n.effect=this.effect,t.Commit(n),!0}return!1}},{key:"Render",value:function(e){if(!(this.effect&&this.effect.IsGood()&&this._vertexBuffer&&this._indexBuffer))return!1;var t=de.device.gl;de.device.SetStandardStates(de.device.RM_ADDITIVE),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer);for(var r=0;r<this.effect.GetPassCount(e);++r){if(this.effect.ApplyPass(e,r),!this._decl.SetDeclaration(de.device,this.effect.GetPassInput(e,r),140))return!1;de.device.ApplyShadowState(),t.drawElements(t.TRIANGLES,this._indexBuffer.count,t.UNSIGNED_SHORT,0)}return!0}},{key:"planes",get:function(){return this.items},set:function(e){this.items=e}}],[{key:"from",value:function(e,t){var n=new r;if(e&&(Object(pe.assignIfExists)(n,e,["name","display","hideOnLowQuality"]),e.effect&&(n.effect=me.Tw2Effect.from(e.effect)),e.items))for(var i=0;i<e.items.length;i++)n.CreateItem(e.items[i]);return t&&t.skipUpdate||n.Initialize(),n}}]),r}(be.EveObjectSet),se.alphaMultiplier=1,se.Item=De,se.vertexDeclarations=[{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"COLOR",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:4},{usage:"TEXCOORD",usageIndex:4,elements:4},{usage:"TEXCOORD",usageIndex:5,elements:4},{usage:"TEXCOORD",usageIndex:6,elements:4},{usage:"TEXCOORD",usageIndex:7,elements:3}],ae=ge((oe=fe).prototype,"name",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ue=ge(oe.prototype,"effect",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=ge(oe.prototype,"hideOnLowQuality",[$,ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),le=ge(oe.prototype,"pickBufferID",[te,re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ge(oe.prototype,"planes",[ne],Object.getOwnPropertyDescriptor(oe.prototype,"planes"),oe.prototype),ie=oe))||ie)},"./eve/item/EveSpaceObjectDecal.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceObjectDecal",(function(){return V}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O=r("./global/utils/index.js"),R=r("./global/index.js"),P=r("./global/math/index.js"),D=r("./core/index.js");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t,r){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var V=(n=O.meta.type("EveSpaceObjectDecal",!0),i=O.meta.string,o=O.meta.struct("Tw2Effect"),a=O.meta.boolean,u=O.meta.uint,c=O.meta.uint,l=O.meta.boolean,s=O.meta.struct("Tw2Effect"),f=O.meta.vector3,p=O.meta.quaternion,d=O.meta.vector3,n((T=E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(o,e);var t,r,n,i=G(o);function o(){var e;C(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return M(e=i.call.apply(i,[this].concat(r)),"name",b,B(e)),M(e,"decalEffect",h,B(e)),M(e,"display",v,B(e)),M(e,"groupIndex",g,B(e)),M(e,"parentBoneIndex",w,B(e)),M(e,"pickable",x,B(e)),M(e,"pickEffect",_,B(e)),M(e,"position",z,B(e)),M(e,"rotation",S,B(e)),M(e,"scaling",j,B(e)),e._dirty=!0,e._indexBuffer=null,e._localTransform=P.mat4.create(),e._localTransformInverse=P.mat4.create(),e._perObjectData=D.Tw2PerObjectData.from(o.perObjectData),e._parentMeshIndex=0,e._rawIndexBuffers=[],e}return t=o,n=[{key:"set",value:function(e,t,r){var n=I(N(o),"set",this).call(this,e,t,r),i=t.indexBuffer?[t.indexBuffer]:t.indexBuffers;if(i){e._rawIndexBuffers.splice(0);for(var a=0;a<i.length;a++)e.SetIndexBuffer(i[a],a);n=!0}return t.decalEffect&&(e.decalEffect?e.decalEffect.SetValues(t.decalEffect)&&(n=!0):(e.decalEffect=D.Tw2Effect.from(t.decalEffect),n=!0)),t.pickEffect&&(e.pickEffect?e.pickEffect.SetValues(t.pickEffect)&&(n=!0):(e.pickEffect=D.Tw2Effect.from(t.pickEffect),n=!0)),n}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};I(N(o),"get",this).call(this,e,t,r),t.indexBuffers=[];for(var n=0;n<e._rawIndexBuffers.length;n++)t.indexBuffers.push(Array.from(e._rawIndexBuffers[n]));return t}}],(r=[{key:"Initialize",value:function(){this.UpdateValues()}},{key:"GetTransform",value:function(e){return P.mat4.fromRotationTranslationScale(e,this.rotation,this.position,this.scaling)}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.decalEffect&&this.decalEffect.GetResources(e),this.pickEffect&&this.pickEffect.GetResources(e),e}},{key:"OnValueChanged",value:function(){P.mat4.fromRotationTranslationScale(this._localTransform,this.rotation,this.position,this.scaling),P.mat4.invert(this._localTransformInverse,this._localTransform)}},{key:"SetIndexBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._rawIndexBuffers[t]=e?Array.from(e):[],this._dirty=!0}},{key:"Unload",value:function(e){this._indexBuffer&&(R.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),e&&e.skipEvents||this.EmitEvent("unloaded",this,e)}},{key:"GetCurrentIndexBuffer",value:function(){return this._rawIndexBuffers[this._parentMeshIndex]?this._rawIndexBuffers[this._parentMeshIndex]:null}},{key:"Rebuild",value:function(e){this.Unload({skipEvents:!0});var t=R.device.gl,r=this.GetCurrentIndexBuffer();r&&(this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),t.STATIC_DRAW)),this._dirty=!1,e&&e.skipEvents||this.EmitEvent("rebuilt",this,e)}},{key:"GetBatches",value:function(e,t,r,n){var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(!this.display||!n||!n.IsGood())return!1;if(this._parentMeshIndex!==a&&(this._parentMeshIndex=a,this._dirty=!0),this._dirty&&this.Rebuild(),!this._indexBuffer)return!1;switch(e){case R.device.RM_DECAL:i=this.decalEffect;break;case R.device.RM_PICKABLE:i=this.pickable?this.pickEffect:null}if(!i||!i.IsGood())return!1;var u=new D.Tw2ForwardingRenderBatch;if(this._perObjectData.vs.Set("worldMatrix",r.vs.Get("WorldMat")),this.parentBoneIndex>=0){var c=r.vs.Get("JointMat"),l=12*this.parentBoneIndex;if(c[l]||c[l+4]||c[l+8]){var s=this._perObjectData.vs.Get("parentBoneMatrix");P.mat4.fromJointMatIndex(s,c,this.parentBoneIndex),P.mat4.transpose(s,s)}}return P.mat4.invert(this._perObjectData.vs.Get("invWorldMatrix"),this._perObjectData.vs.Get("worldMatrix")),P.mat4.transpose(this._perObjectData.vs.Get("decalMatrix"),this._localTransform),P.mat4.transpose(this._perObjectData.vs.Get("invDecalMatrix"),this._localTransformInverse),this._perObjectData.ps.SetIndex("displayData",0,o),this._perObjectData.ps.Set("shipData",r.ps.data),u._geometryRes=n,u.perObjectData=this._perObjectData,u.geometryProvider=this,u.meshIx=a,u.renderMode=e,u.effect=i,t.Commit(u),!0}},{key:"Render",value:function(e,t){var r=e._geometryRes.meshes[e.meshIx],n=r.indexes,i=r.areas[0].start,o=r.areas[0].count,a=r.indexType;R.tw2.SetVariableValue("u_DecalMatrix",this._localTransform),R.tw2.SetVariableValue("u_InvDecalMatrix",this._localTransformInverse),r.indexes=this._indexBuffer,r.areas[0].start=0,r.areas[0].count=this.GetCurrentIndexBuffer().length,r.indexType=R.device.gl.UNSIGNED_SHORT,e._geometryRes.RenderAreas(0,0,1,e.effect,t),r.indexes=n,r.areas[0].start=i,r.areas[0].count=o,r.indexType=a}},{key:"effect",get:function(){return this.decalEffect},set:function(e){this.decalEffect=e}}])&&k(t.prototype,r),n&&k(t,n),o}(O.meta.Model),E.perObjectData={vs:[["worldMatrix",16],["invWorldMatrix",16],["decalMatrix",16],["invDecalMatrix",16],["parentBoneMatrix",P.mat4.identity([])],["clampDecalToEdge",4]],ps:[["displayData",[0,1,0,0]],["shipData",12]]},b=U((m=T).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=U(m.prototype,"decalEffect",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=U(m.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=U(m.prototype,"groupIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),w=U(m.prototype,"parentBoneIndex",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),x=U(m.prototype,"pickable",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=U(m.prototype,"pickEffect",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=U(m.prototype,"position",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.vec3.create()}}),S=U(m.prototype,"rotation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.quat.create()}}),j=U(m.prototype,"scaling",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.vec3.fromValues(1,1,1)}}),y=m))||y)},"./eve/item/EveSpotlightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpotlightSetItem",(function(){return ve})),r.d(t,"EveSpotlightSet",(function(){return ge}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$=r("./global/utils/index.js"),ee=r("./global/index.js"),te=r("./global/math/index.js"),re=r("./core/index.js"),ne=r("./eve/item/EveObjectSet.js");function ie(e,t,r){return(ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=be(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function oe(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ae(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t,r){return t&&le(e.prototype,t),r&&le(e,r),e}function fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=be(e);if(t){var i=be(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ye(this,r)}}function ye(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?me(e):t}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){fe(r,e);var t=de(r);function r(){var e;ce(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).spotlightSet=null,e.world=null,e}return se(r,[{key:"Commit",value:function(e){this.spotlightSet.useQuads&&this.spotlightSet.RebuildVertexBuffers(this.world,this.perObjectData);var t=!1;return this.spotlightSet.RenderCones(e)&&(t=!0),this.spotlightSet.RenderGlow(e)&&(t=!0),t}},{key:"HasTechnique",value:function(e){if(this.spotlightSet){if(this.spotlightSet.coneEffect&&this.spotlightSet.coneEffect.HasTechnique(e))return!0;if(this.spotlightSet.glowEffect&&this.spotlightSet.glowEffect.HasTechnique(e))return!0}return!1}}]),r}(re.Tw2RenderBatch),ve=(n=$.meta.type("EveSpotlightSetItem",!0),i=$.meta.string,o=$.meta.boolean,a=$.meta.uint,u=$.meta.color,c=$.meta.float,l=$.meta.boolean,s=$.meta.color,f=$.meta.float,p=$.meta.uint,d=$.meta.color,y=$.meta.float,m=$.meta.vector3,b=$.meta.matrix4,h=$.meta.uint,n((C=function(e){fe(r,e);var t=de(r);function r(){var e;ce(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._bone=null,oe(e,"name",w,me(e)),oe(e,"boosterGainInfluence",x,me(e)),oe(e,"boneIndex",_,me(e)),oe(e,"coneColor",z,me(e)),oe(e,"coneIntensity",S,me(e)),oe(e,"display",j,me(e)),oe(e,"flareColor",E,me(e)),oe(e,"flareIntensity",T,me(e)),oe(e,"groupIndex",O,me(e)),oe(e,"spriteColor",R,me(e)),oe(e,"spriteIntensity",P,me(e)),oe(e,"spriteScale",D,me(e)),oe(e,"transform",A,me(e)),oe(e,"colorType",M,me(e)),e}return se(r,[{key:"GetTransform",value:function(e){return te.mat4.copy(e,this.transform)}}]),r}(ne.EveObjectSetItem),w=ae((g=C).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=ae(g.prototype,"boosterGainInfluence",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=ae(g.prototype,"boneIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=ae(g.prototype,"coneColor",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return te.vec4.create()}}),S=ae(g.prototype,"coneIntensity",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=ae(g.prototype,"display",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=ae(g.prototype,"flareColor",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return te.vec4.create()}}),T=ae(g.prototype,"flareIntensity",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=ae(g.prototype,"groupIndex",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),R=ae(g.prototype,"spriteColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return te.vec4.create()}}),P=ae(g.prototype,"spriteIntensity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=ae(g.prototype,"spriteScale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return te.vec3.fromValues(1,1,1)}}),A=ae(g.prototype,"transform",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return te.mat4.create()}}),M=ae(g.prototype,"colorType",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=g))||v),ge=(k=$.meta.type("EveSpotlightSet",!0),I=$.meta.string,L=$.meta.struct("Tw2Effect"),G=$.meta.struct("Tw2Effect"),F=$.meta.float,B=$.meta.boolean,N=$.meta.boolean,U=$.meta.list("EveSpotlightSetItem"),k((J=Z=function(e){fe(r,e);var t=de(r);function r(){var e;ce(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return oe(e=t.call.apply(t,[this].concat(i)),"name",H,me(e)),oe(e,"coneEffect",W,me(e)),oe(e,"glowEffect",X,me(e)),oe(e,"intensity",K,me(e)),oe(e,"useQuads",Y,me(e)),oe(e,"skinned",Q,me(e)),e._coneVertexBuffer=null,e._decl=re.Tw2VertexDeclaration.from(r.vertexDeclarations),e._indexBuffer=null,e._spriteVertexBuffer=null,e._worldSpriteScale=1,e._indexOrder=[0,1,2,2,3,0],e}return se(r,[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.coneEffect&&this.coneEffect.GetResources(e),this.glowEffect&&this.glowEffect.GetResources(e),e}},{key:"Unload",value:function(e){this._coneVertexBuffer&&(ee.device.gl.deleteBuffer(this._coneVertexBuffer),this._coneVertexBuffer=null),this._spriteVertexBuffer&&(ee.device.gl.deleteBuffer(this._spriteVertexBuffer),this._spriteVertexBuffer=null),this._indexBuffer&&(ee.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),ie(be(r.prototype),"Unload",this).call(this,e)}},{key:"SetWorldSpriteScale",value:function(e){this._worldSpriteScale!==e&&(this._worldSpriteScale=e,this._dirty=!0)}},{key:"SetIndexOrder",value:function(e,t,r,n,i,o){this._indexOrder[0]=e,this._indexOrder[1]=t,this._indexOrder[2]=r,this._indexOrder[3]=n,this._indexOrder[4]=i,this._indexOrder[5]=o,this._dirty=!0}},{key:"RebuildVertexBuffers",value:function(e,t){for(var n=this._visibleItems.length,i=ee.device,o=[1,0,2,3],a=new Float32Array(22*(4*n*4)),u=r.global,c=u.quadScratch,l=u.mat4_0,s=t?t.vs.Get("JointMat"):null,f=[],p=0;p<n;p++){var d=this._visibleItems[p];if(this.useQuads&&e){c[p]||(c[p]=te.mat4.create());var y=c[p];this.skinned&&d.boneIndex>=0?(te.mat4.fromJointMatIndex(l,s,d.boneIndex),te.mat4.multiply(y,l,d.transform),te.mat4.multiply(y,e,y)):te.mat4.multiply(y,e,d.transform),f.push(y)}else f.push(d.transform)}for(var m=0;m<n;++m)for(var b=this._visibleItems[m],h=0;h<4;++h)for(var v=0;v<4;++v){var g=22*(4*m*4+4*h+v);a[g]=b.coneColor[0]*b.coneIntensity*this.intensity,a[g+1]=b.coneColor[1]*b.coneIntensity*this.intensity,a[g+2]=b.coneColor[2]*b.coneIntensity*this.intensity,a[g+3]=b.coneColor[3]*r.alphaMultiplier,a[g+4]=f[m][0],a[g+5]=f[m][4],a[g+6]=f[m][8],a[g+7]=f[m][12],a[g+8]=f[m][1],a[g+9]=f[m][5],a[g+10]=f[m][9],a[g+11]=f[m][13],a[g+12]=f[m][2],a[g+13]=f[m][6],a[g+14]=f[m][10],a[g+15]=f[m][14],a[g+16]=1,a[g+17]=1,a[g+18]=1,a[g+19]=4*h+o[v],a[g+20]=b.boneIndex,a[g+21]=b.boosterGainInfluence?255:0}this._coneVertexBuffer=i.gl.createBuffer(),i.gl.bindBuffer(i.gl.ARRAY_BUFFER,this._coneVertexBuffer),i.gl.bufferData(i.gl.ARRAY_BUFFER,a,i.gl.STATIC_DRAW),this._coneVertexBuffer.count=4*n*6;for(var w=new Float32Array(22*(2*n*4)),x=[1,0,2,3],_=0;_<n;++_)for(var z=this._visibleItems[_],S=0;S<2;++S)for(var j=0;j<4;++j){var E=22*(2*_*4+4*S+j);S%2==0?(w[E]=z.spriteColor[0]*z.spriteIntensity*this.intensity,w[E+1]=z.spriteColor[1]*z.spriteIntensity*this.intensity,w[E+2]=z.spriteColor[2]*z.spriteIntensity*this.intensity,w[E+3]=z.spriteColor[3],w[E+16]=z.spriteScale[0]*this._worldSpriteScale,w[E+17]=1,w[E+18]=1):(w[E]=z.flareColor[0]*z.flareIntensity*this.intensity,w[E+1]=z.flareColor[1]*z.flareIntensity*this.intensity,w[E+2]=z.flareColor[2]*z.flareIntensity*this.intensity,w[E+3]=z.flareColor[3],w[E+16]=1,w[E+17]=z.spriteScale[1]*this._worldSpriteScale,w[E+18]=z.spriteScale[2]*this._worldSpriteScale),w[E+4]=f[_][0],w[E+5]=f[_][4],w[E+6]=f[_][8],w[E+7]=f[_][12],w[E+8]=f[_][1],w[E+9]=f[_][5],w[E+10]=f[_][9],w[E+11]=f[_][13],w[E+12]=f[_][2],w[E+13]=f[_][6],w[E+14]=f[_][10],w[E+15]=f[_][14],w[E+19]=4*S+x[j],w[E+20]=z.boneIndex,w[E+21]=z.boosterGainInfluence?255:0}this._spriteVertexBuffer=i.gl.createBuffer(),i.gl.bindBuffer(i.gl.ARRAY_BUFFER,this._spriteVertexBuffer),i.gl.bufferData(i.gl.ARRAY_BUFFER,w,i.gl.STATIC_DRAW),this._spriteVertexBuffer.count=2*n*6}},{key:"Rebuild",value:function(e){this.RebuildItems(e),this._dirty=!1;var t=this._visibleItems.length;if(t){var n=ee.device.gl;this._indexOrder[5]=this.useQuads?1:0;for(var i=this._indexOrder,o=new Uint16Array(4*t*6),a=0;a<4*t;++a){var u=6*a,c=4*a;o[u]=c+i[0],o[u+1]=c+i[1],o[u+2]=c+i[2],o[u+3]=c+i[3],o[u+4]=c+i[4],o[u+5]=c+i[5]}this._indexBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,o,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=t,this.useQuads||this.RebuildVertexBuffers(),ie(be(r.prototype),"Rebuild",this).call(this,e)}else ie(be(r.prototype),"Rebuild",this).call(this,e)}},{key:"GetBatches",value:function(e,t,r,n){if(this.display&&e===ee.device.RM_ADDITIVE&&this._indexBuffer&&this._indexBuffer.count&&this._visibleItems.length){var i=new he;return i.renderMode=ee.device.RM_ADDITIVE,i.spotlightSet=this,i.perObjectData=r,i.world=n,i.mode=ee.device.RM_ADDITIVE,t.Commit(i),!0}return!1}},{key:"RenderCones",value:function(e){return r.Render(this,this.coneEffect,e,this._coneVertexBuffer)}},{key:"RenderGlow",value:function(e){return r.Render(this,this.glowEffect,e,this._spriteVertexBuffer)}},{key:"spotlightItems",get:function(){return this.items},set:function(e){this.items=e}}],[{key:"Render",value:function(e,t,r,n){if(!(t&&t.IsGood()&&n&&e._indexBuffer))return!1;var i=ee.device,o=i.gl;i.SetStandardStates(i.RM_ADDITIVE),o.bindBuffer(o.ARRAY_BUFFER,n),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e._indexBuffer);for(var a=0;a<t.GetPassCount(r);++a){if(t.ApplyPass(r,a),!e._decl.SetDeclaration(i,t.GetPassInput(r,a),88))return!1;i.ApplyShadowState(),i.gl.drawElements(o.TRIANGLES,n.count,o.UNSIGNED_SHORT,0)}return!0}},{key:"from",value:function(e,t){var n=new r;if(e&&(Object($.assignIfExists)(n,e,["name","display","intensity"]),e.coneEffect&&(Object($.isFunction)(e.coneEffect)?n.coneEffect=e.coneEffect:n.coneEffect=re.Tw2Effect.from(e.coneEffect)),e.glowEffect&&(Object($.isFunction)(e.glowEffect)?n.glowEffect=e.glowEffect:n.glowEffect=re.Tw2Effect.from(e.glowEffect)),e.items))for(var i=0;i<e.items.length;i++)n.CreateItem(e.items[i]);return t&&t.skipUpdate||n.Initialize(),n}}]),r}(ne.EveObjectSet),Z.alphaMultiplier=1,Z.global={mat4_0:te.mat4.create(),quadScratch:[]},Z.Item=ve,Z.vertexDeclarations=[{usage:"COLOR",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:3},{usage:"TEXCOORD",usageIndex:4,elements:3}],H=ae((q=J).prototype,"name",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),W=ae(q.prototype,"coneEffect",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=ae(q.prototype,"glowEffect",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=ae(q.prototype,"intensity",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Y=ae(q.prototype,"useQuads",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=ae(q.prototype,"skinned",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ae(q.prototype,"spotlightItems",[U],Object.getOwnPropertyDescriptor(q.prototype,"spotlightItems"),q.prototype),V=q))||V)},"./eve/item/EveSpriteSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpriteSetItem",(function(){return de})),r.d(t,"EveSpriteSet",(function(){return ye}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X=r("./global/utils/index.js"),K=r("./global/index.js"),Y=r("./global/math/index.js"),Q=r("./core/index.js"),Z=r("./eve/item/EveObjectSet.js"),J=r("./core/mesh/index.js");function $(e,t,r){return($="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fe(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function ee(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function te(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e,t,r){return t&&ie(e.prototype,t),r&&ie(e,r),e}function ae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fe(e);if(t){var i=fe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return le(this,r)}}function le(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?se(e):t}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pe=function(e){ae(r,e);var t=ce(r);function r(){var e;ne(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).boosterGlow=!1,e.spriteSet=null,e.world=null,e.boosterGain=0,e.warpIntensity=0,e}return oe(r,[{key:"Commit",value:function(e){return this.boosterGlow?this.spriteSet.RenderBoosterGlow(e,this.world,this.boosterGain,this.warpIntensity):this.spriteSet.Render(e,this.world,this.perObjectData)}},{key:"HasTechnique",value:function(e){return this.spriteSet&&this.spriteSet.effect&&this.spriteSet.effect.HasTechnique(e)}}]),r}(Q.Tw2RenderBatch),de=(n=X.meta.type("EveSpriteSetItem",!0),i=X.meta.string,o=X.meta.float,a=X.meta.float,u=X.meta.uint,c=X.meta.color,l=X.meta.float,s=X.meta.float,f=X.meta.float,p=X.meta.float,d=X.meta.vector3,y=X.meta.color,m=X.meta.uint,b=X.meta.uint,n((A=function(e){ae(r,e);var t=ce(r);function r(){var e;ne(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return ee(e=t.call.apply(t,[this].concat(i)),"name",g,se(e)),ee(e,"blinkPhase",w,se(e)),ee(e,"blinkRate",x,se(e)),ee(e,"boneIndex",_,se(e)),ee(e,"color",z,se(e)),ee(e,"falloff",S,se(e)),ee(e,"intensity",j,se(e)),ee(e,"maxScale",E,se(e)),ee(e,"minScale",T,se(e)),ee(e,"position",O,se(e)),ee(e,"warpColor",R,se(e)),ee(e,"groupIndex",P,se(e)),ee(e,"colorType",D,se(e)),e}return oe(r,[{key:"GetTransform",value:function(e){return Y.mat4.identity(e),e[12]=this.position[0],e[13]=this.position[1],e[14]=this.position[2],e}}]),r}(Z.EveObjectSetItem),g=te((v=A).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=te(v.prototype,"blinkPhase",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=te(v.prototype,"blinkRate",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=te(v.prototype,"boneIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=te(v.prototype,"color",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),S=te(v.prototype,"falloff",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=te(v.prototype,"intensity",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),E=te(v.prototype,"maxScale",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=te(v.prototype,"minScale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=te(v.prototype,"position",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec3.create()}}),R=te(v.prototype,"warpColor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),P=te(v.prototype,"groupIndex",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),D=te(v.prototype,"colorType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),h=v))||h),ye=(M=X.meta.type("EveSpriteSet",!0),C=X.meta.string,k=X.meta.struct("Tw2Effect"),I=X.meta.boolean,L=X.meta.boolean,G=X.meta.list("EveSpriteSetItem"),M((W=H=function(e){ae(r,e);var t=ce(r);function r(){var e;ne(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return ee(e=t.call.apply(t,[this].concat(i)),"name",N,se(e)),ee(e,"effect",U,se(e)),ee(e,"skinned",V,se(e)),ee(e,"useQuads",q,se(e)),e._time=0,e._vertexBuffer=null,e._indexBuffer=null,e._instanceBuffer=null,e._decl=null,e._vdecl=Q.Tw2VertexDeclaration.from([{usage:"TEXCOORD",usageType:5,elements:1}]),e._worldSpriteScale=1,e._randomness=Y.num.randomFloat(0,.2),e}return oe(r,[{key:"Initialize",value:function(){this.UseQuads(!!this.useQuads),this.Rebuild()}},{key:"OnRebuildBounds",value:function(){}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}},{key:"UseQuads",value:function(e){this.useQuads=e,this._decl=Q.Tw2VertexDeclaration.from(e?r.quadVertexDeclarations:r.vertexDeclarations),this._dirty=!0}},{key:"SetWorldSpriteScale",value:function(e){this._worldSpriteScale!==e&&(this._worldSpriteScale=e,this._dirty=!0)}},{key:"Update",value:function(e){this._time+=e,$(fe(r.prototype),"Update",this).call(this,e)}},{key:"Unload",value:function(e){var t=K.device.gl;this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._instanceBuffer&&(t.deleteBuffer(this._instanceBuffer),this._instanceBuffer=null),$(fe(r.prototype),"Unload",this).call(this,e)}},{key:"Rebuild",value:function(e){this.RebuildItems(e),this._dirty=!1;var t=this._visibleItems.length;if(t){var n=K.device.gl;if(this.useQuads)return this._vertexBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this._vertexBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,2,2,3,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),void(this._instanceBuffer=n.createBuffer());for(var i=new Float32Array(4*t*13),o=0;o<t;++o){var a=this._visibleItems[o],u=4*o*13;i[u]=0,i[u+13]=1,i[u+26]=2,i[u+39]=3;for(var c=0;c<4;++c){var l=u+13*c;i[l+1]=a.boneIndex,i[l+2]=a.position[0],i[l+3]=a.position[1],i[l+4]=a.position[2],i[l+5]=a.color[0]*a.intensity,i[l+6]=a.color[1]*a.intensity,i[l+7]=a.color[2]*a.intensity,i[l+8]=a.blinkPhase,i[l+9]=a.blinkRate+this._randomness,i[l+10]=a.minScale*this._worldSpriteScale,i[l+11]=a.maxScale*this._worldSpriteScale,i[l+12]=a.falloff}}this._vertexBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this._vertexBuffer),n.bufferData(n.ARRAY_BUFFER,i,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null);for(var s=new Uint16Array(6*t),f=0;f<t;++f){var p=6*f,d=4*f;s[p]=d,s[p+1]=d+2,s[p+2]=d+1,s[p+3]=d,s[p+4]=d+3,s[p+5]=d+2}this._indexBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,s,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=6*t,$(fe(r.prototype),"Rebuild",this).call(this)}else $(fe(r.prototype),"Rebuild",this).call(this,e)}},{key:"GetBatches",value:function(e,t,r,n){if(this.display&&e===K.device.RM_ADDITIVE&&this._vertexBuffer&&this._visibleItems.length){var i=new pe;return i.world=n,i.renderMode=K.device.RM_ADDITIVE,i.spriteSet=this,i.perObjectData=r,i.mode=K.device.RM_ADDITIVE,t.Commit(i),!0}return!1}},{key:"GetBoosterGlowBatches",value:function(e,t,r,n,i,o){if(this.display&&e===K.device.RM_ADDITIVE&&this._vertexBuffer&&this._visibleItems.length){var a=new pe;a.boosterGlow=!0,a.world=n,a.boosterGain=i,a.warpIntensity=o,a.renderMode=K.device.RM_ADDITIVE,a.spriteSet=this,a.perObjectData=r,t.Commit(a)}}},{key:"Render",value:function(e,t,r){if(this.useQuads)return this.RenderQuads(e,t,r);if(!(this.display&&this.effect&&this.effect.IsGood()&&this._indexBuffer&&this._vertexBuffer))return!1;var n=K.device,i=n.gl;n.SetStandardStates(n.RM_ADDITIVE),i.bindBuffer(i.ARRAY_BUFFER,this._vertexBuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this._indexBuffer);for(var o=0;o<this.effect.GetPassCount(e);++o){if(this.effect.ApplyPass(e,o),!this._decl.SetDeclaration(n,this.effect.GetPassInput(e,o),52))return!1;n.ApplyShadowState(),i.drawElements(i.TRIANGLES,this._indexBuffer.count,i.UNSIGNED_SHORT,0)}return!0}},{key:"RenderBoosterGlow",value:function(e,t,r,n){if(!(this.display&&this.effect&&this.effect.IsGood()&&this._instanceBuffer&&this._vertexBuffer))return!1;var i=K.device,o=i.gl,a=Z.EveObjectSet.global.vec3_0,u=this._visibleItems.length,c=new Float32Array(17*u);i.SetStandardStates(i.RM_ADDITIVE);for(var l=0,s=0;s<u;++s){var f=this._visibleItems[s];Y.vec3.transformMat4(a,f.position,t),c[l++]=a[0],c[l++]=a[1],c[l++]=a[2],c[l++]=t[8],c[l++]=f.blinkPhase,c[l++]=t[9],c[l++]=f.minScale*this._worldSpriteScale,c[l++]=f.maxScale*this._worldSpriteScale,c[l++]=t[10],c[l++]=f.color[0],c[l++]=f.color[1],c[l++]=f.color[2],c[l++]=r,c[l++]=f.warpColor[0],c[l++]=f.warpColor[1],c[l++]=f.warpColor[2],c[l++]=n}o.bindBuffer(o.ARRAY_BUFFER,this._instanceBuffer),o.bufferData(o.ARRAY_BUFFER,c,o.DYNAMIC_DRAW);for(var p=0;p<this.effect.GetPassCount(e);++p){this.effect.ApplyPass(e,p);var d=this.effect.GetPassInput(e,p);o.bindBuffer(o.ARRAY_BUFFER,this._vertexBuffer),this._vdecl.SetPartialDeclaration(i,d,4),o.bindBuffer(o.ARRAY_BUFFER,this._instanceBuffer);var y=this._decl.SetPartialDeclaration(i,d,68,0,1);i.ApplyShadowState(),o.drawArraysInstanced(o.TRIANGLES,0,6,u),this._decl.ResetInstanceDivisors(i,y)}return!0}},{key:"RenderQuads",value:function(e,t,r){if(!(this.display&&this.effect&&this.effect.IsGood()&&this._instanceBuffer&&this._vertexBuffer))return!1;var n=K.device,i=n.gl,o=this._visibleItems.length,a=new Float32Array(17*o),u=Z.EveObjectSet.global.vec3_0,c=r.vs.Get("JointMat");n.SetStandardStates(n.RM_ADDITIVE);for(var l=0,s=0;s<o;++s){var f=this._visibleItems[s];if(this.skinned){var p=12*f.boneIndex;u[0]=c[p]*f.position[0]+c[p+1]*f.position[1]+c[p+2]*f.position[2]+c[p+3],u[1]=c[p+4]*f.position[0]+c[p+5]*f.position[1]+c[p+6]*f.position[2]+c[p+7],u[2]=c[p+8]*f.position[0]+c[p+9]*f.position[1]+c[p+10]*f.position[2]+c[p+11],Y.vec3.transformMat4(u,u,t)}else Y.vec3.transformMat4(u,f.position,t);a[l++]=u[0],a[l++]=u[1],a[l++]=u[2],a[l++]=1,a[l++]=f.blinkPhase,a[l++]=f.blinkRate,a[l++]=f.minScale*this._worldSpriteScale,a[l++]=f.maxScale*this._worldSpriteScale,a[l++]=f.falloff,a[l++]=f.color[0],a[l++]=f.color[1],a[l++]=f.color[2],a[l++]=1,a[l++]=f.warpColor[0],a[l++]=f.warpColor[1],a[l++]=f.warpColor[2],a[l++]=1}i.bindBuffer(i.ARRAY_BUFFER,this._instanceBuffer),i.bufferData(i.ARRAY_BUFFER,a,i.DYNAMIC_DRAW);for(var d=0;d<this.effect.GetPassCount(e);++d){this.effect.ApplyPass(e,d);var y=this.effect.GetPassInput(e,d);i.bindBuffer(i.ARRAY_BUFFER,this._vertexBuffer),this._vdecl.SetPartialDeclaration(n,y,4),i.bindBuffer(i.ARRAY_BUFFER,this._instanceBuffer);var m=this._decl.SetPartialDeclaration(n,y,68,0,1);n.ApplyShadowState(),i.drawArraysInstanced(i.TRIANGLES,0,6,o),this._decl.ResetInstanceDivisors(n,m)}return!0}},{key:"sprites",get:function(){return this.items},set:function(e){this.items=e}}],[{key:"from",value:function(e,t){var n=new r;if(e&&(Object(X.assignIfExists)(n,e,["name","intensity","skinned","useQuads"]),e.effect&&(n.effect=J.Tw2Effect.from(e.effect)),e.items))for(var i=0;i<e.items.length;i++)n.CreateItem(e.items[i]);return t&&t.skipUpdate||n.Initialize(),n}}]),r}(Z.EveObjectSet),H.Item=de,H.vertexDeclarations=[{usage:"TEXCOORD",usageIndex:5,elements:2},{usage:"POSITION",usageIndex:0,elements:3},{usage:"COLOR",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:1},{usage:"TEXCOORD",usageIndex:1,elements:1},{usage:"TEXCOORD",usageIndex:2,elements:1},{usage:"TEXCOORD",usageIndex:3,elements:1},{usage:"TEXCOORD",usageIndex:4,elements:1}],H.quadVertexDeclarations=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:2},{usage:"COLOR",usageIndex:0,elements:4},{usage:"COLOR",usageIndex:1,elements:4}],N=te((B=W).prototype,"name",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),U=te(B.prototype,"effect",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=te(B.prototype,"skinned",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=te(B.prototype,"useQuads",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te(B.prototype,"sprites",[G],Object.getOwnPropertyDescriptor(B.prototype,"sprites"),B.prototype),F=B))||F)},"./eve/item/EveTurretSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTurretSetItem",(function(){return at})),r.d(t,"EveTurretSet",(function(){return ut}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe,ae,ue,ce,le,se,fe,pe,de,ye,me,be,he,ve,ge,we,xe,_e,ze,Se,je,Ee,Te,Oe,Re,Pe,De,Ae,Me,Ce,ke,Ie,Le,Ge,Fe,Be=r("./global/utils/index.js"),Ne=r("./global/index.js"),Ue=r("./global/math/index.js"),Ve=r("./core/index.js"),qe=r("./eve/item/EveObjectSet.js");function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t,r){return(We="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rt(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Xe(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t,r){return t&&Ye(e.prototype,t),r&&Ye(e,r),e}function Ze(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var i=rt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return et(this,r)}}function et(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?tt(e):t}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var it,ot,at=(n=Be.meta.type("EveTurretSetItem"),i=Be.meta.string,o=Be.meta.boolean,a=Be.meta.boolean,u=Be.meta.vector3,c=Be.meta.quaternion,n((b=function(e){Ze(r,e);var t=$e(r);function r(){var e;Ke(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Xe(e=t.call.apply(t,[this].concat(i)),"locatorName",f,tt(e)),Xe(e,"updateFromLocator",p,tt(e)),Xe(e,"canFireWhenHidden",d,tt(e)),Xe(e,"position",y,tt(e)),Xe(e,"rotation",m,tt(e)),e._isClosest=!1,e._bone=null,e._localTransform=Ue.mat4.create(),e._localRotation=Ue.quat.create(),e}return Qe(r,[{key:"Initialize",value:function(){this.UpdateValues()}},{key:"OnValueChanged",value:function(){this._dirty=!0,this.UpdateTransforms()}},{key:"UpdateTransforms",value:function(){this._bone&&(Ue.mat4.getRotation(this.rotation,this._bone.worldTransform),Ue.mat4.getTranslation(this.position,this._bone.worldTransform)),Ue.mat4.fromRotationTranslation(this._localTransform,this.rotation,this.position),Ue.quat.copy(this._localRotation,this.rotation)}},{key:"GetTransform",value:function(e){return Ue.mat4.copy(e,this._localTransform)}}]),r}(qe.EveObjectSetItem),f=nt((s=b).prototype,"locatorName",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=nt(s.prototype,"updateFromLocator",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=nt(s.prototype,"canFireWhenHidden",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=nt(s.prototype,"position",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ue.vec3.create()}}),m=nt(s.prototype,"rotation",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ue.quat.create()}}),l=s))||l),ut=(h=Be.meta.type("EveTurretSet",!0),v=Be.meta.stage(1),g=Be.meta.string,w=Be.meta.notImplemented,x=Be.meta.float,_=Be.meta.vector4,z=Be.meta.notImplemented,S=Be.meta.boolean,j=Be.meta.notImplemented,E=Be.meta.uint,T=Be.meta.path,O=Be.meta.path,R=Be.meta.notImplemented,P=Be.meta.float,D=Be.meta.notImplemented,A=Be.meta.boolean,M=Be.meta.string,C=Be.meta.notImplemented,k=Be.meta.uint,I=Be.meta.notImplemented,L=Be.meta.boolean,G=Be.meta.notImplemented,F=Be.meta.float,B=Be.meta.notImplemented,N=Be.meta.float,U=Be.meta.notImplemented,V=Be.meta.float,q=Be.meta.notImplemented,H=Be.meta.float,W=Be.meta.notImplemented,X=Be.meta.float,K=Be.meta.notImplemented,Y=Be.meta.float,Q=Be.meta.notImplemented,Z=Be.meta.float,J=Be.meta.struct("Tw2Effect"),$=Be.meta.notImplemented,ee=Be.meta.boolean,te=Be.meta.notImplemented,re=Be.meta.boolean,ne=Be.meta.notImplemented,ie=Be.meta.boolean,oe=Be.meta.struct(),ae=Be.meta.struct("Tw2GeometryResource"),ue=Be.meta.todo("Make private"),ce=Be.meta.plain,le=Be.meta.todo("Update parent class and replace with direct value"),h(se=v((Fe=Ge=function(e){Ze(r,e);var t=$e(r);function r(){var e;Ke(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Xe(e=t.call.apply(t,[this].concat(i)),"name",pe,tt(e)),Xe(e,"bottomClipHeight",de,tt(e)),Xe(e,"boundingSphere",ye,tt(e)),Xe(e,"chooseRandomLocator",me,tt(e)),Xe(e,"cyclingFireGroupCount",be,tt(e)),Xe(e,"firingEffectResPath",he,tt(e)),Xe(e,"geometryResPath",ve,tt(e)),Xe(e,"impactSize",ge,tt(e)),Xe(e,"laserMissBehaviour",we,tt(e)),Xe(e,"locatorName",xe,tt(e)),Xe(e,"maxCyclingFirePos",_e,tt(e)),Xe(e,"projectileMissBehaviour",ze,tt(e)),Xe(e,"sysBoneHeight",Se,tt(e)),Xe(e,"sysBonePitch01Factor",je,tt(e)),Xe(e,"sysBonePitch02Factor",Ee,tt(e)),Xe(e,"sysBonePitchFactor",Te,tt(e)),Xe(e,"sysBonePitchMax",Oe,tt(e)),Xe(e,"sysBonePitchMin",Re,tt(e)),Xe(e,"sysBonePitchOffset",Pe,tt(e)),Xe(e,"turretEffect",De,tt(e)),Xe(e,"updatePitchPose",Ae,tt(e)),Xe(e,"useDynamicBounds",Me,tt(e)),Xe(e,"useRandomFiringDelay",Ce,tt(e)),Xe(e,"firingEffect",ke,tt(e)),Xe(e,"geometryResource",Ie,tt(e)),Xe(e,"visible",Le,tt(e)),e._activeAnimation=new Ve.Tw2AnimationController,e._activeTurret=-1,e._currentCyclingFiresPos=0,e._fireCallback=null,e._fireCallbackPending=!1,e._hasCyclingFiringPos=!1,e._inactiveAnimation=new Ve.Tw2AnimationController,e._locatorDirty=!0,e._parentTransform=Ue.mat4.create(),e._perObjectDataActive=Ve.Tw2PerObjectData.from(r.perObjectData),e._perObjectDataInactive=Ve.Tw2PerObjectData.from(r.perObjectData),e._state=r.State.IDLE,e._targetPosition=Ue.vec3.create(),e._recheckTimeLeft=0,e}return Qe(r,[{key:"Initialize",value:function(){var e=this;this.turretEffect&&""!==this.geometryResPath&&(this.geometryResource=Ne.tw2.GetResource(this.geometryResPath,(function(t){return e.OnResPrepared(t)})),this._activeAnimation.SetGeometryResource(this.geometryResource),this._inactiveAnimation.SetGeometryResource(this.geometryResource)),""!==this.firingEffectResPath&&Ne.tw2.Fetch(this.firingEffectResPath).then((function(t){return e.firingEffect=t})),this.Rebuild()}},{key:"InitializeFiringEffect",value:function(){if(this.firingEffect&&this.geometryResource&&this.geometryResource.models.length)for(var e=this.geometryResource.models[0],t=0;t<this.firingEffect.GetPerMuzzleEffectCount();++t)this.firingEffect.SetMuzzleBoneID(t,e.FindBoneByName(r.positionBoneSkeletonNames[t]))}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.turretEffect&&this.turretEffect.GetResources(e),this.firingEffect&&this.firingEffect.GetResources(e),this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),e}},{key:"OnTurretFired",value:function(e){this._fireCallback=e}},{key:"SetTargetPosition",value:function(e){Ue.vec3.copy(this._targetPosition,e)}},{key:"GetClosestTurret",value:function(){for(var e=-1,t=-2,n=r.global,i=n.vec3_0,o=n.vec4_0,a=n.vec4_1,u=0;u<this.items.length;++u){var c=this.items[u];if(c.display||c.canFireWhenHidden){a[0]=c._localTransform[12],a[1]=c._localTransform[13],a[2]=c._localTransform[14],a[3]=1,Ue.vec4.transformMat4(a,a,this._parentTransform),Ue.vec3.subtract(i,this._targetPosition,a),Ue.vec3.normalize(i,i),Ue.vec4.set(o,0,1,0,0),Ue.vec4.transformMat4(o,o,c._localTransform),Ue.vec4.transformMat4(o,o,this._parentTransform);var l=Ue.vec3.dot(o,i);l>t&&(e=this.items.indexOf(c),t=l)}}for(var s=0;s<this.items.length;s++)this.items[s]._isClosest=this.items[s]===e;return e}},{key:"EnterStateDeactive",value:function(){var e=this;if(this._state!==r.State.INACTIVE&&this._state!==r.State.PACKING){if(this.turretEffect){var t=0;if(this._state===r.State.UNPACKING)t=this._activeAnimation.GetAnimation("Deploy").percent;this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._activeAnimation.PlayAnimation("Pack",{cycle:!1,percent:t,callback:function(){e._state=r.State.INACTIVE,e._activeAnimation.PlayAnimation("Inactive",{cycle:!0})}}),this._inactiveAnimation.PlayAnimation("Pack",{cycle:!1,percent:t,callback:function(){e._state=r.State.INACTIVE,e._inactiveAnimation.PlayAnimation("Inactive",{cycle:!0})}}),this._state=r.State.PACKING}else this._state=r.State.INACTIVE;this._activeTurret=-1,this.DoStopFiring()}}},{key:"EnterStateIdle",value:function(){var e=this;if(this._state!==r.State.IDLE&&this._state!==r.State.UNPACKING){if(this.turretEffect){var t=0;if(this._state===r.State.PACKING)t=this._activeAnimation.GetAnimation("Pack").percent;this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._state===r.State.FIRING?(this._activeAnimation.PlayAnimation("Active",{cycle:!0}),this._inactiveAnimation.PlayAnimation("Active",{cycle:!0}),this._state=r.State.IDLE):(this._activeAnimation.PlayAnimation("Deploy",{cycle:!1,percent:t,callback:function(){console.log("Active turret active..."),e._state=r.State.IDLE,e._activeAnimation.PlayAnimation("Active",{cycle:!0})}}),this._inactiveAnimation.PlayAnimation("Deploy",{cycle:!1,percent:t,callback:function(){console.log("Inactive turret active..."),e._state=r.State.IDLE,e._inactiveAnimation.PlayAnimation("Active",{cycle:!0})}}),this._state=r.State.UNPACKING)}else this._state=r.State.IDLE;this._activeTurret=-1,this.DoStopFiring()}}},{key:"EnterStateFiring",value:function(){var e=this;if(!this.turretEffect||this._state===r.State.FIRING)return this.DoStartFiring(),void(this.turretEffect&&this._activeAnimation.PlayAnimation("Fire",{cycle:!1,callback:function(){e._activeAnimation.PlayAnimation("Active",{cycle:!0})}}));this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._state===r.State.INACTIVE?(this._activeAnimation.PlayAnimation("Deploy",{cycle:!1,callback:function(){e.DoStartFiring(),e._activeAnimation.PlayAnimation("Fire",{cycle:!1,callback:function(){e._activeAnimation.PlayAnimation("Active",{cycle:!0})}})}}),this._inactiveAnimation.PlayAnimation("Deploy",{cycle:!1,callback:function(){e._inactiveAnimation.PlayAnimation("Active",{cycle:!0})}}),this._state=r.State.UNPACKING):(this.DoStartFiring(),this._activeAnimation.PlayAnimation("Fire",{cycle:!1,callback:function(){e._activeAnimation.PlayAnimation("Active",{cycle:!0})}}),this._inactiveAnimation.PlayAnimation("Active",{cycle:!0}))}},{key:"OnResPrepared",value:function(e){this.geometryResource=e;for(var t=Ve.Tw2VertexElement.from({usage:"TEXCOORD",usageIndex:1,elements:2}),n=this.geometryResource.meshes,i=this._activeAnimation,o=this._inactiveAnimation,a=0;a<n.length;++a)n[a].declaration.elements.push(t),n[a].declaration.RebuildHash();switch(this._state){case r.State.INACTIVE:i.PlayAnimation("Inactive",{cycle:!0}),o.PlayAnimation("Inactive",{cycle:!0});break;case r.State.IDLE:i.PlayAnimation("Active",{cycle:!0}),o.PlayAnimation("Active",{cycle:!0});break;case r.State.FIRING:i.PlayAnimation("Fire",{cycle:!1,callback:function(){i.PlayAnimation("Active",{cycle:!0})}}),o.PlayAnimation("Active",{cycle:!0});break;case r.State.PACKING:this.EnterStateIdle();break;case r.State.UNPACKING:this.EnterStateDeactive()}}},{key:"FindItemByLocatorName",value:function(e){for(var t=0;t<this.items.length;t++)if(this.items[t].locatorName===e)return this.items[t];return null}},{key:"UpdateItemsFromLocators",value:function(e){for(var t=r.global,n=Array.from(this.items),i=t.mat4_0,o=0;o<e.length;o++){var a=e[o],u=a.name,c=a.transform,l=a.bone,s=void 0===l?null:l,f=this.FindItemByLocatorName(u);f?n.splice(n.indexOf(f),1):f=this.CreateItem({name:u,locatorName:u,updateFromLocator:!0}),f.updateFromLocator&&(f._bone=s,Ue.mat4.copy(i,c),Ue.vec3.normalize(i.subarray(0,3),i.subarray(0,3)),Ue.vec3.normalize(i.subarray(4,7),i.subarray(4,7)),Ue.vec3.normalize(i.subarray(8,11),i.subarray(8,11)),Ue.mat4.getRotation(f.rotation,i),Ue.mat4.getTranslation(f.position,i),f.UpdateValues())}for(var p=0;p<n.length;p++)n[p].locatorName&&(this.RemoveItem(n[p]),p--);this.RebuildItemsFromLocators(),this._dirty&&this.Rebuild()}},{key:"RebuildItemsFromLocators",value:function(){this._locatorDirty=!0}},{key:"UpdateViewDependentData",value:function(e){Ue.mat4.copy(this._parentTransform,e),this.firingEffect&&this.firingEffect.UpdateViewDependentData(e)}},{key:"Rebuild",value:function(e){this.RebuildItems(e),this._dirty=!1,We(rt(r.prototype),"Rebuild",this).call(this,e)}},{key:"Update",value:function(e){if(We(rt(r.prototype),"Update",this).call(this,e),this.turretEffect&&(this._activeAnimation.Update(e),this._inactiveAnimation.Update(e)),this.firingEffect&&this._visibleItems.length){if(-1!==this._activeTurret){this.firingEffect.isLoopFiring&&this._state===r.State.FIRING&&(this._recheckTimeLeft-=e,this._recheckTimeLeft<=0&&this.DoStartFiring());var t=this.items[this._activeTurret];if(this._activeAnimation.models.length)for(var n=this._activeAnimation.models[0].bonesByName,i=0;i<this.firingEffect.GetPerMuzzleEffectCount();++i){var o=n[r.positionBoneSkeletonNames[i]].worldTransform,a=this.firingEffect.GetMuzzleTransform(i);Ue.mat4.multiply(a,t._localTransform,o),Ue.mat4.multiply(a,this._parentTransform,a)}else for(var u=0;u<this.firingEffect.GetPerMuzzleEffectCount();++u)Ue.mat4.multiply(this.firingEffect.GetMuzzleTransform(u),this._parentTransform,t._localTransform);if(this._fireCallbackPending){if(this._fireCallback){for(var c=[],l=0;l<this.firingEffect.GetPerMuzzleEffectCount();++l)c.push(this.firingEffect.GetMuzzleTransform(l));this._fireCallback(this,c,t)}this._fireCallbackPending=!1,this.EmitEvent("fired",{turretSet:this,turret:t})}}this.firingEffect.SetEndPosition(this._targetPosition),this.firingEffect.Update(e)}}},{key:"GetBatches",value:function(e,t,n,i){if(!(this.turretEffect&&this.geometryResource&&this.display&&this._visibleItems.length))return!1;var o=t.length;if(e===Ne.device.RM_OPAQUE&&this.visible.turrets){var a=this._inactiveAnimation.GetBoneMatrices(0);if(0!==a.length){this.UpdatePerObjectData(this._perObjectDataInactive.vs,a),this._perObjectDataInactive.ps=n.ps;var u=new Ve.Tw2ForwardingRenderBatch;if(u.renderMode=e,u.renderActive=!1,u.perObjectData=this._perObjectDataInactive,u.geometryProvider=this,u.effect=this.turretEffect,t.Commit(u),this._state===r.State.FIRING){var c=this._activeAnimation.GetBoneMatrices(0);if(0!==c.length){this.UpdatePerObjectData(this._perObjectDataActive.vs,c,!0),this._perObjectDataActive.ps=n.ps;var l=new Ve.Tw2ForwardingRenderBatch;l.renderActive=!0,l.perObjectData=this._perObjectDataActive,l.geometryProvider=this,l.effect=this.turretEffect,t.Commit(l)}}}}return i&&this.firingEffect&&this.visible.firingEffects&&this.firingEffect.GetBatches(e,t,n),t.length!==o}},{key:"GetFiringEffectBatches",value:function(e,t,r){return!!(this.firingEffect&&this.display&&this._visibleItems.length&&this.visible.firingEffects)&&(this.firingEffect.GetBatches(e,t,r),!0)}},{key:"Render",value:function(e,t){if(!this.turretEffect||!this.turretEffect.IsGood()||!this._visibleItems.length)return!1;for(var n=0,i=function(e){Ne.device.gl.disableVertexAttribArray(e.location),Ne.device.gl.vertexAttrib2f(e.location,n,n)},o=0;o<this.geometryResource.meshes.length;++o){var a=this.geometryResource.meshes[o].declaration.FindUsage(Ve.Tw2VertexElement.Type.TEXCOORD,1);a?a.customSetter=i:Ne.tw2.Debug({name:"EveTurretSet",message:"Could not find usage TEXCOORD usage 1"})}for(var u=0;n<this.items.length;++n)if(this.items[n].display){var c=this._state===r.State.FIRING&&n===this._activeTurret;e.renderActive===c&&this.geometryResource.RenderAreas(0,0,1,this.turretEffect,t)&&u++}return!!u}},{key:"UpdatePerObjectData",value:function(e,t,n){Ue.mat4.transpose(e.Get("shipMatrix"),this._parentTransform);var i=t.length/12;e.Get("turretSetData")[0]=i,e.Get("baseCutoffData")[0]=this.bottomClipHeight;for(var o=e.Get("turretTranslation"),a=e.Get("turretRotation"),u=e.Get("turretPoseTransAndRot"),c=0;c<this._visibleItems.length;++c){for(var l=this._visibleItems[c],s=0;s<i;++s)u[2*(c*i+s)*4]=t[12*s+3],u[2*(c*i+s)*4+1]=t[12*s+7],u[2*(c*i+s)*4+2]=t[12*s+11],u[2*(c*i+s)*4+3]=1,r.mat3x4toquat(t,s,u,2*(c*i+s)+1);l._bone&&!n&&l.UpdateTransforms(),o[4*c]=l._localTransform[12],o[4*c+1]=l._localTransform[13],o[4*c+2]=l._localTransform[14],o[4*c+3]=1,a[4*c]=l.rotation[0],a[4*c+1]=l.rotation[1],a[4*c+2]=l.rotation[2],a[4*c+3]=l.rotation[3]}}},{key:"DoStartFiring",value:function(){this._hasCyclingFiringPos&&(this._currentCyclingFiresPos=1-this._currentCyclingFiresPos),this.firingEffect&&this.firingEffect.PrepareFiring(0,this._hasCyclingFiringPos?this._currentCyclingFiresPos:-1),this._activeTurret=this.GetClosestTurret(),this._state=r.State.FIRING,this._recheckTimeLeft=2,this._fireCallbackPending=!0}},{key:"DoStopFiring",value:function(){this.firingEffect&&this.firingEffect.StopFiring()}},{key:"turrets",get:function(){return this.items},set:function(e){this.items=e}}]),r}(qe.EveObjectSet),Ge.Item=at,Ge.State={INACTIVE:0,IDLE:1,FIRING:2,PACKING:3,UNPACKING:4},Ge.worldNames=["turretWorld0","turretWorld1","turretWorld2"],Ge.positionBoneSkeletonNames=["Pos_Fire01","Pos_Fire02","Pos_Fire03","Pos_Fire04","Pos_Fire05","Pos_Fire06","Pos_Fire07","Pos_Fire08"],Ge.perObjectData={vs:[["baseCutoffData",4],["turretSetData",4],["shipMatrix",16],["turretTranslation",96],["turretRotation",96],["turretPoseTransAndRot",576]]},Ge.mat3x4toquat=function(e,t,r,n){it||(it=Ue.mat4.create(),ot=Ue.quat.create()),t*=12,n*=4,it[0]=e[t],it[1]=e[t+4],it[2]=e[t+8],it[3]=0,it[4]=e[t+1],it[5]=e[t+5],it[6]=e[t+9],it[7]=0,it[8]=e[t+2],it[9]=e[t+6],it[10]=e[t+10],it[11]=0,it[12]=e[t+3],it[13]=e[t+7],it[14]=e[t+11],it[15]=1,Ue.mat4.getRotation(ot,it),r[n]=ot[0],r[n+1]=ot[1],r[n+2]=ot[2],r[n+3]=ot[3]},pe=nt((fe=Fe).prototype,"name",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),de=nt(fe.prototype,"bottomClipHeight",[w,x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ye=nt(fe.prototype,"boundingSphere",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ue.vec4.create()}}),me=nt(fe.prototype,"chooseRandomLocator",[z,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),be=nt(fe.prototype,"cyclingFireGroupCount",[j,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),he=nt(fe.prototype,"firingEffectResPath",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ve=nt(fe.prototype,"geometryResPath",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ge=nt(fe.prototype,"impactSize",[R,P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),we=nt(fe.prototype,"laserMissBehaviour",[D,A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xe=nt(fe.prototype,"locatorName",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_e=nt(fe.prototype,"maxCyclingFirePos",[C,k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ze=nt(fe.prototype,"projectileMissBehaviour",[I,L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Se=nt(fe.prototype,"sysBoneHeight",[G,F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),je=nt(fe.prototype,"sysBonePitch01Factor",[B,N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ee=nt(fe.prototype,"sysBonePitch02Factor",[U,V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Te=nt(fe.prototype,"sysBonePitchFactor",[q,H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Oe=nt(fe.prototype,"sysBonePitchMax",[W,X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Re=nt(fe.prototype,"sysBonePitchMin",[K,Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pe=nt(fe.prototype,"sysBonePitchOffset",[Q,Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),De=nt(fe.prototype,"turretEffect",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=nt(fe.prototype,"updatePitchPose",[$,ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Me=nt(fe.prototype,"useDynamicBounds",[te,re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ce=nt(fe.prototype,"useRandomFiringDelay",[ne,ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ke=nt(fe.prototype,"firingEffect",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=nt(fe.prototype,"geometryResource",[ae,ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=nt(fe.prototype,"visible",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{turrets:!0,firingEffects:!0}}}),nt(fe.prototype,"turrets",[le],Object.getOwnPropertyDescriptor(fe.prototype,"turrets"),fe.prototype),se=fe))||se)||se)},"./eve/item/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/item/EveBoosterSet.js");r.d(t,"EveBoosterBatch",(function(){return n.EveBoosterBatch})),r.d(t,"EveBoosterSetItem",(function(){return n.EveBoosterSetItem})),r.d(t,"EveBoosterSet",(function(){return n.EveBoosterSet}));var i=r("./eve/item/EveCurveLineSet.js");r.d(t,"EveCurveLineSetItem",(function(){return i.EveCurveLineSetItem})),r.d(t,"EveCurveLineSet",(function(){return i.EveCurveLineSet}));var o=r("./eve/item/EveCustomMask.js");r.d(t,"EveCustomMask",(function(){return o.EveCustomMask}));var a=r("./eve/item/EveLocator2.js");r.d(t,"EveLocator2",(function(){return a.EveLocator2})),r.d(t,"EveLocator",(function(){return a.EveLocator}));var u=r("./eve/item/EveObjectSet.js");r.d(t,"EveObjectSetItem",(function(){return u.EveObjectSetItem})),r.d(t,"EveObjectSet",(function(){return u.EveObjectSet}));var c=r("./eve/item/EvePlaneSet.js");r.d(t,"EvePlaneSetItem",(function(){return c.EvePlaneSetItem})),r.d(t,"EvePlaneSet",(function(){return c.EvePlaneSet}));var l=r("./eve/item/EveSpaceObjectDecal.js");r.d(t,"EveSpaceObjectDecal",(function(){return l.EveSpaceObjectDecal}));var s=r("./eve/item/EveSpotlightSet.js");r.d(t,"EveSpotlightSetItem",(function(){return s.EveSpotlightSetItem})),r.d(t,"EveSpotlightSet",(function(){return s.EveSpotlightSet}));var f=r("./eve/item/EveSpriteSet.js");r.d(t,"EveSpriteSetItem",(function(){return f.EveSpriteSetItem})),r.d(t,"EveSpriteSet",(function(){return f.EveSpriteSet}));var p=r("./eve/item/EveTurretSet.js");r.d(t,"EveTurretSetItem",(function(){return p.EveTurretSetItem})),r.d(t,"EveTurretSet",(function(){return p.EveTurretSet}))},"./eve/object/EveEffectRoot.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveEffectRoot",(function(){return V}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R=r("./global/utils/index.js"),P=r("./global/math/index.js"),D=r("./core/index.js"),A=r("./eve/object/EveObject.js");function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var V=(n=R.meta.type("EveEffectRoot"),i=R.meta.todo("Implement LOD"),o=R.meta.list("Tw2CurveSet"),a=R.meta.list("EveMeshOverlayEffect"),u=R.meta.float,c=R.meta.vector3,l=R.meta.quaternion,s=R.meta.vector3,f=R.meta.matrix4,p=R.meta.isPrivate,d=R.meta.vector3,y=R.meta.isPrivate,m=R.meta.float,b=R.meta.isPrivate,n(h=i((O=T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(o,e);var t,r,n,i=G(o);function o(){var e;k(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return C(e=i.call.apply(i,[this].concat(r)),"curveSets",g,B(e)),C(e,"effectChildren",w,B(e)),C(e,"duration",x,B(e)),C(e,"scaling",_,B(e)),C(e,"rotation",z,B(e)),C(e,"translation",S,B(e)),C(e,"boundingSphereCenter",j,B(e)),C(e,"boundingSphereRadius",E,B(e)),e._parentTransform=P.mat4.create(),e._perObjectData=D.Tw2PerObjectData.from(e.constructor.perObjectData),e}return t=o,(r=[{key:"OnRebuildBounds",value:function(){for(var e=A.EveObject.global,t=e.box3_0,r=e.sph3_0,n=0;n<this.effectChildren.length;n++){var i=void 0;this.effectChildren[n].GetBoundingBox?(this.effectChildren[n].GetBoundingBox(t),P.sph3.fromBox3(r,t),i=!0):this.effectChildren[n].GetBoundingSphere&&(this.effectChildren[n].GetBoundingSphere(r),i=!0),i&&P.sph3.union(this._boundingSphere,this._boundingSphere,r)}P.sph3.unionPositionRadius(this._boundingSphere,this._boundingSphere,this.boundingSphereCenter,this.boundingSphereRadius),P.box3.fromSph3(this._boundingBox,this._boundingSphere),this._boundsDirty=!1}},{key:"ResetLod",value:function(){this._lod=3;for(var e=0;e<this.children.length;e++)this.effectChildren[e].ResetLod&&this.effectChildren[e].ResetLod()}},{key:"UpdateLod",value:function(e){this._lod=3;for(var t=0;t<this.children.length;t++)this.effectChildren[t].UpdateLod&&this.effectChildren[t].UpdateLod(e,this._lod)}},{key:"GetResources",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<this.effectChildren.length;++t)this.effectChildren[t].GetResources(e);return e}},{key:"Start",value:function(){for(var e=0;e<this.curveSets.length;++e)this.curveSets[e].Play()}},{key:"Stop",value:function(){for(var e=0;e<this.curveSets.length;++e)this.curveSets[e].Stop()}},{key:"UpdateViewDependentData",value:function(e){P.mat4.copy(this._parentTransform,e),this.RebuildTransforms({force:!0,skipUpdate:!0})}},{key:"Update",value:function(e){for(var t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e);for(var r=0;r<this.effectChildren.length;++r)this.effectChildren[r].Update(e,this._worldTransform),this.effectChildren[r]._boundsDirty&&(this._boundsDirty=!0)}},{key:"GetBatches",value:function(e,t){if(!this.display)return!1;for(var r=t.length,n=0;n<this.effectChildren.length;++n)this.effectChildren[n].GetBatches(e,t,this._perObjectData);return t.length!==r}},{key:"localTransform",get:function(){return this._localTransform},set:function(e){P.mat4.copy(this._localTransform,e)}}])&&I(t.prototype,r),n&&I(t,n),o}(A.EveObject),T.perObjectData={vs:[["WorldMat",16],["WorldMatLast",16],["Shipdata",[0,1,0,-10]],["Clipdata1",4],["EllipsoidRadii",4],["EllipsoidCenter",4],["CustomMaskMatrix0",P.mat4.identity([])],["CustomMaskMatrix1",P.mat4.identity([])],["CustomMaskData0",[1,0,0,0]],["CustomMaskData1",[1,0,0,0]],["JointMat",696]],ps:[["Shipdata",[0,1,0,1]],["Clipdata1",4],["Clipdata2",4],["ShLighting",28],["CustomMaskMaterialID0",4],["CustomMaskMaterialID1",4],["CustomMaskTarget0",4],["CustomMaskTarget1",4]]},g=U((v=O).prototype,"curveSets",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=U(v.prototype,"effectChildren",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=U(v.prototype,"duration",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=U(v.prototype,"scaling",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.vec3.fromValues(1,1,1)}}),z=U(v.prototype,"rotation",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.quat.create()}}),S=U(v.prototype,"translation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.vec3.create()}}),U(v.prototype,"localTransform",[f,p],Object.getOwnPropertyDescriptor(v.prototype,"localTransform"),v.prototype),j=U(v.prototype,"boundingSphereCenter",[d,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.vec3.create()}}),E=U(v.prototype,"boundingSphereRadius",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=v))||h)||h)},"./eve/object/EveObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveObject",(function(){return O}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js"),y=r("./global/math/index.js"),m=r("./core/Tw2Transform.js"),b=r("./eve/index.js"),h=r("./core/index.js");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var O=(n=d.meta.string,i=d.meta.boolean,o=d.meta.abstract,a=d.meta.abstract,u=d.meta.abstract,p=f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(o,e);var t,r,n,i=z(o);function o(){var e;w(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(e=i.call.apply(i,[this].concat(r)),"name",l,j(e)),g(e,"display",s,j(e)),e._lod=3,e}return t=o,(r=[{key:"ResetLod",value:function(){this._lod=3}},{key:"UpdateLod",value:function(e){this._lod=3}},{key:"GetResources",value:function(){}},{key:"Update",value:function(e){}},{key:"GetBatches",value:function(e,t){return!1}},{key:"FindPlaneSetsWithVideos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="attachments"in this?this.attachments:this.planeSets;if(t)for(var r=0;r<t.length;r++)if(t[r]instanceof b.EvePlaneSet&&t[r].effect){var n=t[r].effect.parameters;for(var i in n)if(n.hasOwnProperty(i)&&n[i]instanceof h.Tw2TextureParameter&&n[i].textureRes instanceof h.Tw2VideoRes&&!e.includes(n[i])){e.push(t[r]);break}}if("children"in this)for(var o=0;o<this.children.length;o++)"FindPlaneSetsWithVideos"in this.children[o]&&this.children[o].FindPlaneSetsWithVideos(e);return e}}])&&x(t.prototype,r),n&&x(t,n),o}(m.Tw2Transform),f.global={vec3_0:y.vec3.create(),vec3_1:y.vec3.create(),vec3_2:y.vec3.create(),vec3_3:y.vec3.create(),vec3_4:y.vec3.create(),vec3_5:y.vec3.create(),vec3_6:y.vec3.create(),vec3_7:y.vec3.create(),mat4_0:y.mat4.create(),mat4_1:y.mat4.create(),mat4_2:y.mat4.create(),mat4_ID:y.mat4.create(),box3_0:y.box3.create(),sph3_0:y.sph3.create()},l=T((c=p).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=T(c.prototype,"display",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),T(c.prototype,"GetResources",[o],Object.getOwnPropertyDescriptor(c.prototype,"GetResources"),c.prototype),T(c.prototype,"Update",[a],Object.getOwnPropertyDescriptor(c.prototype,"Update"),c.prototype),T(c.prototype,"GetBatches",[u],Object.getOwnPropertyDescriptor(c.prototype,"GetBatches"),c.prototype),c)},"./eve/object/EvePlanet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePlanet",(function(){return ce}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B=r("./global/utils/index.js"),N=r("./global/index.js"),U=r("./global/math/index.js"),V=r("./core/index.js"),q=r("./eve/object/EveTransform.js"),H=r("./eve/object/EveObject.js"),W=r("./eve/index.js");function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function Z(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Q(o,n,i,a,u,"next",e)}function u(e){Q(o,n,i,a,u,"throw",e)}a(void 0)}))}}function J(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function te(e,t,r){return(te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ae(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ae(e);if(t){var i=ae(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ie(this,r)}}function ie(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?oe(e):t}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ce=(n=B.meta.type("EvePlanet"),i=B.meta.list("Tw2CurveSet"),o=B.meta.struct("EveTransform"),a=B.meta.struct("Tw2Effect"),u=B.meta.struct("Tw2RenderTarget"),c=B.meta.struct("EveTransform"),l=B.meta.uint,s=B.meta.uint,f=B.meta.isPrivate,p=B.meta.path,d=B.meta.isPrivate,y=B.meta.path,m=B.meta.isPrivate,b=B.meta.list("EveChild"),h=B.meta.notImplemented,v=B.meta.float,g=B.meta.uint,w=B.meta.notImplemented,x=B.meta.uint,_=B.meta.notImplemented,n((F=G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(u,e);var t,r,n,i,o,a=ne(u);function u(){var e;$(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return J(e=a.call.apply(a,[this].concat(r)),"curveSets",j,oe(e)),J(e,"highDetail",E,oe(e)),J(e,"effectHeight",T,oe(e)),J(e,"heightMap",O,oe(e)),J(e,"zOnlyModel",R,oe(e)),J(e,"resolution",P,oe(e)),J(e,"itemID",D,oe(e)),J(e,"heightMapResPath1",A,oe(e)),J(e,"heightMapResPath2",M,oe(e)),J(e,"effectChildren",C,oe(e)),J(e,"radius",k,oe(e)),J(e,"minScreenSize",I,oe(e)),J(e,"estimatedPixelDiameter",L,oe(e)),e._parentTransform=U.mat4.create(),e._pendingLoad=null,e._atmosphere=null,e._planet=null,e._perObjectData=V.Tw2PerObjectData.from(W.EveShip2.perObjectData),e}return t=u,(r=[{key:"Intersect",value:function(e,t){if(!(!this.display||this._lod<1||e.IsMasked(this))){this.RebuildBounds();var r=e.IntersectSph3(this._boundingSphere,this._worldTransform);return r?(r.name=this.name,r.item=this,t.push(r),r):void 0}}},{key:"RebuildTransforms",value:function(e){if(te(ae(u.prototype),"RebuildTransforms",this).call(this,e)){var t=(this.scaling[0]+this.scaling[1]+this.scaling[2])/6;return Math.round(this.radius)!==Math.round(t)&&(this.radius=t,this._boundsDirty=!0),!0}return!1}},{key:"OnRebuildBounds",value:function(){U.sph3.fromMat4(this._boundingSphere,this._localTransform),U.box3.fromSph3(this._boundingBox,this._boundingSphere),this._boundsDirty=!1}},{key:"Fetch",value:(o=Z(regeneratorRuntime.mark((function e(){var t,r,n,i,o,a,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.length>0&&void 0!==z[0]?z[0]:{},r=t.name,n=void 0===r?"":r,i=t.itemID,o=void 0===i?0:i,a=t.resPath,c=void 0===a?"":a,l=t.atmospherePath,s=void 0===l?"":l,f=t.heightMap1,p=void 0===f?"":f,d=t.heightMap2,y=void 0===d?"":d,m=t.radius,b=void 0===m?0:m,this.name=n,this.itemID=o,this.heightMapResPath1=p,this.heightMapResPath2=y,this.highDetail.children.splice(0),this.radius=b,h=2*b,U.vec3.set(this.highDetail.scaling,h,h,h),e.next=12,N.tw2.FetchAll([u.zOnlyModelPath,c,[s,!0]]);case 12:return v=e.sent,g=K(v,3),w=g[0],x=g[1],_=g[2],this._planet=x,this._atmosphere=_,this.zOnlyModel=w,this.highDetail.children[0]=x,_&&(this.highDetail.children[1]=_),e.abrupt("return",this.Rebuild());case 23:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"Create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};this.Fetch(e).then(t)}},{key:"UpdateLod",value:function(e){this._lod=3}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.highDetail&&this.highDetail.GetResources(e),this.effectHeight&&this.effectHeight.GetResources(e),e}},{key:"UpdateViewDependentData",value:function(e){U.mat4.copy(this._parentTransform,e),U.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._worldTransform),this.RebuildTransforms({force:!0,skipUpdate:!0}),U.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._worldTransform),this.highDetail.SetTransform(this._localTransform),this.highDetail.UpdateViewDependentData(e),this.zOnlyModel&&(this.zOnlyModel.translation=this.highDetail.translation,this.zOnlyModel.scaling=this.highDetail.scaling,this.zOnlyModel.UpdateViewDependentData(e))}},{key:"Update",value:function(e){if(this.display){this.highDetail.Update(e);for(var t=0;t<this.curveSets.length;t++)this.curveSets[t].Update(e);for(var r=0;r<this.effectChildren.length;r++)this.effectChildren[r].Update(e,this._worldTransform,this._perObjectData),this.effectChildren[r]._boundsDirty&&(this._boundsDirty=!0)}}},{key:"GetBatches",value:function(e,t){if(!this.display||!this._lod||!this._planet)return!1;var r=t.length;this.highDetail.GetBatches(e,t);for(var n=0;n<this.effectChildren.length;n++)this.effectChildren[n].GetBatches(e,t,this._perObjectData);return t.length!==r}},{key:"GetZOnlyBatches",value:function(e,t){return!!(this.display&&this._lod&&this.zOnlyModel)&&this.zOnlyModel.GetBatches(e,t)}},{key:"Rebuild",value:(i=Z(regeneratorRuntime.mark((function e(){var t,r,n,i,o,a,u,c,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=function(e,t){var r=t.parameters;for(var n in r)r.hasOwnProperty(n)&&(e.parameters[n]=r[n])},n=function(e){var t=e.mesh?e.mesh.transparentAreas[0]||e.mesh.opaqueAreas[0]:null;return t?t.effect:null},t=this.effectHeight,r=this.heightMap,this._boundsDirty=!0,o=n(this.highDetail.children[0]),a="cdn:/Graphics/Effect/Managed/Space/Planet/EarthlikePlanet.fx",o&&(a=o.effectFilePath,i(t,o)),u=0;u<this.highDetail.children[0].children.length;++u)n(this.highDetail.children[0].children[u])&&i(t,o);if(t.SetParameters({Random:this.itemID%100,TargetTextureHeight:this.resolution,NormalHeight1:this.heightMapResPath1,NormalHeight2:this.heightMapResPath2}),c="."+Object(B.getPathExtension)(a),a=a.replace(c,"BlitHeight".concat(c)),t.SetValue(a),!this._pendingLoad){e.next=13;break}return e.abrupt("return",this._pendingLoad);case 13:return e.abrupt("return",this._pendingLoad=N.tw2.Watch(this).then((function(){return l.heightMap.Create(2*l.resolution,l.resolution,!1),l.heightMap.Set(),N.device.SetStandardStates(N.device.RM_FULLSCREEN),N.device.gl.clearColor(0,0,0,0),N.device.gl.clear(N.device.gl.COLOR_BUFFER_BIT),N.device.RenderFullScreenQuad(l.effectHeight),l.heightMap.Unset(),o&&(o.SetTextures({HeightMap:""}),o.parameters.HeightMap.AttachTextureRes(r.texture)),l._pendingLoad=null,l.EmitEvent("rebuilt",l),l})));case 14:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}])&&ee(t.prototype,r),n&&ee(t,n),u}(H.EveObject),G.zOnlyModelPath="cdn:/dx9/model/worldObject/planet/planetZOnly.black",G.DEFAULT_HEIGHT_MAP_RESOLUTION=4096,j=ue((S=F).prototype,"curveSets",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=ue(S.prototype,"highDetail",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new q.EveTransform}}),T=ue(S.prototype,"effectHeight",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V.Tw2Effect}}),O=ue(S.prototype,"heightMap",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V.Tw2RenderTarget}}),R=ue(S.prototype,"zOnlyModel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=ue(S.prototype,"resolution",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ce.DEFAULT_HEIGHT_MAP_RESOLUTION}}),D=ue(S.prototype,"itemID",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=ue(S.prototype,"heightMapResPath1",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=ue(S.prototype,"heightMapResPath2",[y,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=ue(S.prototype,"effectChildren",[b,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=ue(S.prototype,"radius",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=ue(S.prototype,"minScreenSize",[g,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=ue(S.prototype,"estimatedPixelDiameter",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=S))||z)},"./eve/object/EveShip2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveShip2",(function(){return Re}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe,ae,ue,ce=r("./global/utils/index.js"),le=r("./global/math/index.js"),se=r("./eve/object/EveObject.js"),fe=r("./core/data/index.js"),pe=r("./core/model/index.js"),de=r("./eve/item/index.js"),ye=r("./eve/effect/index.js"),me=r("./unsupported/eve/item/index.js"),be=r("./global/constant/ccpwgl.js"),he=r("./global/constant/index.js");function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _e(e,t,r){return(_e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Te(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Te(e);if(t){var i=Te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return je(this,r)}}function je(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?Ee(e):t}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Re=(n=ce.meta.type("EveShip2"),i=ce.meta.stage(2),o=ce.meta.struct("Tw2Animation"),a=ce.meta.isPrivate,u=ce.meta.list("EveObjectSet"),c=ce.meta.struct("EveBoosterSet2"),l=ce.meta.vector3,s=ce.meta.isPrivate,f=ce.meta.float,p=ce.meta.isPrivate,d=ce.meta.list("EveObject"),y=ce.meta.list("EveCustomMask"),m=ce.meta.list("EveSpaceObjectDecal"),b=ce.meta.string,h=ce.meta.list("EveLocatorSets"),v=ce.meta.list("EveLocator2"),g=ce.meta.struct("Tw2Mesh","Tw2InstancedMesh","Tr2MeshLod"),w=ce.meta.struct("EveCurve"),x=ce.meta.isPrivate,_=ce.meta.struct("Tw2Effect"),z=ce.meta.vector3,S=ce.meta.isPrivate,j=ce.meta.vector3,E=ce.meta.isPrivate,T=ce.meta.struct("EveCurve"),O=ce.meta.isPrivate,R=ce.meta.uint,P=ce.meta.uint,D=ce.meta.float,A=ce.meta.list("EveChild"),M=ce.meta.plain,C=ce.meta.float,n(k=i((ue=ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(o,e);var t,r,n,i=Se(o);function o(){var e;we(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ge(e=i.call.apply(i,[this].concat(r)),"animation",L,Ee(e)),ge(e,"attachments",G,Ee(e)),ge(e,"boosters",F,Ee(e)),ge(e,"boundingSphereCenter",B,Ee(e)),ge(e,"boundingSphereRadius",N,Ee(e)),ge(e,"children",U,Ee(e)),ge(e,"customMasks",V,Ee(e)),ge(e,"decals",q,Ee(e)),ge(e,"dna",H,Ee(e)),ge(e,"locatorSets",W,Ee(e)),ge(e,"locators",X,Ee(e)),ge(e,"mesh",K,Ee(e)),ge(e,"rotationCurve",Y,Ee(e)),ge(e,"shadowEffect",Q,Ee(e)),ge(e,"shapeEllipsoidCenter",Z,Ee(e)),ge(e,"shapeEllipsoidRadius",J,Ee(e)),ge(e,"translationCurve",$,Ee(e)),ge(e,"meshIndex",ee,Ee(e)),ge(e,"killCount",te,Ee(e)),ge(e,"boosterGain",re,Ee(e)),ge(e,"effectChildren",ne,Ee(e)),ge(e,"visible",ie,Ee(e)),ge(e,"weeksSinceCleaned",oe,Ee(e)),e._enableCurves=!1,e._pixelSizeAcross=0,e._effectScale=1,e._spriteScale=1,e._parentTransform=le.mat4.create(),e._perObjectData=fe.Tw2PerObjectData.from(o.perObjectData),e.dirtMultiplier=10,e}return t=o,(r=[{key:"Initialize",value:function(){this.RebuildBoosterSet(),_e(Te(o.prototype),"Initialize",this).call(this)}},{key:"Intersect",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.RebuildBounds(),!(!this.display||this._lod<1||this._boundsDirty)){var n=e.IntersectBox3(this._boundingBox,this._worldTransform);if(!n)return!1;var i,o=r.root,a=void 0===o?this:o,u=[e,t,this._worldTransform,r];if("Intersect"in this.mesh&&!e.GetOption("mesh","skip")&&(i=this.mesh).Intersect.apply(i,u).forEach((function(e){return e.root=a})),this._lod>1)for(var c=0;c<this.attachments.length;c++){var l=this.attachments[c],s=void 0;if(l.Intersect){var f=void 0;switch(l.constructor){case me.EveHazeSet:f="hazeSets";break;case me.EveBanner:f="banners";break;case de.EveTurretSet:f="turretSets";break;case de.EveSpotlightSet:f="spotlightSets";break;case de.EveSpriteSet:f="spriteSets";break;case de.EvePlaneSet:f="planeSets";break;case me.EveSpriteLineSet:f="spriteLineSets";break;case de.EveCurveLineSet:f="lineSets";break;case ye.EveMeshOverlayEffect:f="overlayEffects"}f&&this.visible[f]&&!e.GetOption(f,"skip")&&(s=l.Intersect.apply(l,u)),s&&(s.root=a)}}if(!e.GetOption("locators","skip"))for(var p=0;p<this.locators.length;p++){var d,y=(d=this.locators[p]).Intersect.apply(d,u);y&&(y.root=a)}if(this.visible.effectChildren&&!e.GetOption("effectChildren","skip"))for(var m=0;m<this.effectChildren.length;m++)if(this.effectChildren[m].Intersect){var b,h=(b=this.effectChildren[m]).Intersect.apply(b,u);h&&(h.root=a)}if(this.visible.children&&!e.GetOption("children","skip"))for(var v=0;v<this.children.length;v++)if(this.children[v].Intersect){var g,w=(g=this.children[v]).Intersect.apply(g,u);w&&(w.root=a)}return n}}},{key:"OnRebuildBounds",value:function(){var e=this;if(this.animation&&this.animation.animations.length&&console.warn("Rebuilding bounds on animated meshes not yet supported"),this.mesh&&this.mesh.IsGood()){this.mesh.geometryResource.GetBoundingBox(this._boundingBox);var t=se.EveObject.global,r=t.box3_0,n=t.sph3_0,i=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0;i<t.length;i++){var o=!1;"GetBoundingBox"in t[i]?(t[i].GetBoundingBox(r),o=!0):"GetBoundingSphere"in t[i]&&(t[i].GetBoundingSphere(n),le.box3.fromSph3(r,n),o=!0),o&&le.box3.union(e._boundingBox,e._boundingBox,r)}};i(this.attachments),i(this.effectChildren),i(this.children),le.sph3.fromBox3(this._boundingSphere,this._boundingBox),this._boundsDirty=!1}else this._boundsDirty=!0}},{key:"FindTurretSetByLocatorName",value:function(e){for(var t=0;t<this.attachments.length;t++)if(this.attachments[t]instanceof de.EveTurretSet&&this.attachments[t].locatorName===e)return this.attachments[t]}},{key:"FindTurretPrefixes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];function t(t){if(!t)return!1;var r=t[0].substring(0,t[0].length-1);return e.includes(r)||e.push(r),!0}for(var r=0;r<this.locators.length;r++){var n=this.locators[r].name;t(/^locator_turret_([0-9]+)[a-z]$/i.exec(n))||t(/^locator_xl_([0-9]+)[a-z]$/i.exec(n))}return e.sort(),e}},{key:"GetLocatorCount",value:function(e){return this.FindLocatorsByPrefix(e).length}},{key:"FindLocatorJointByName",value:function(e){var t=this.FindLocatorBoneByName(e);return t?t.worldTransform:null}},{key:"FindLocatorTransformByName",value:function(e){var t=this.FindLocatorByName(e);return t?t.transform:null}},{key:"HasLocatorPrefix",value:function(e){for(var t=0;t<this.locators.length;t++)if(0===this.locators[t].name.indexOf(e))return!0;return!1}},{key:"FindLocatorBoneByName",value:function(e){return this.animation?this.animation.FindBoneForMesh(e,this.meshIndex):null}},{key:"FindLocatorByName",value:function(e){for(var t=0;t<this.locators.length;t++)if(this.locators[t].name===e)return this.locators[t];return null}},{key:"FindLocatorsByPrefix",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=0;r<this.locators.length;r++)0===this.locators[r].name.indexOf(e)&&t.push(this.locators[r]);return t}},{key:"UpdateLod",value:function(e){var t=le.vec3.transformMat4(se.EveObject.global.vec3_0,this.boundingSphereCenter,this._worldTransform);e.IsSphereVisible(t,this.boundingSphereRadius)?(this._pixelSizeAcross=e.GetPixelSizeAcross(t,this.boundingSphereRadius),this._pixelSizeAcross<be.LodLevelPixels.ZERO?this._lod=0:this._pixelSizeAcross<be.LodLevelPixels.ONE?this._lod=1:this._pixelSizeAcross<be.LodLevelPixels.TWO?this._lod=2:this._lod=3):(this._pixelSizeAcross=0,this._lod=0);for(var r=0;r<this.children.length;r++)this.children[r].UpdateLod&&this.children[r].UpdateLod(e,this._lod);for(var n=0;n<this.effectChildren.length;n++)this.effectChildren[n].UpdateLod(e,this._lod)}},{key:"ResetLod",value:function(){this._lod=3;for(var e=0;e<this.children.length;e++)this.children[e].ResetLod&&this.children[e].ResetLod();for(var t=0;t<this.effectChildren.length;t++)this.effectChildren[t].ResetLod()}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.PerChild((function(t){"GetResources"in t.struct&&t.struct.GetResources(e)})),e}},{key:"RebuildBoosterSet",value:function(){return!!this.boosters&&(this.boosters.UpdateItemsFromLocators(this.FindLocatorsByPrefix("locator_booster")),!0)}},{key:"GetTurretSetByLocatorName",value:function(e){return this.attachments.find((function(t){return t instanceof de.EveTurretSet&&t.locatorName===e}))||null}},{key:"RemoveTurretSet",value:function(e){var t=this.attachments.indexOf(e);return-1!==t&&(this.attachments.splice(t,1),!0)}},{key:"AddTurretSet",value:function(e){if(!e.locatorName)throw new ReferenceError("Turret set must have a locator name");var t=this.GetTurretSetByLocatorName(e.locatorName);return t!==e&&(this.attachments.splice(this.attachments.indexOf(t),1),this.attachments.push(e),this.RebuildTurretSet(e),!0)}},{key:"RebuildTurretSet",value:function(e){for(var t=e.locatorName,r=this.GetLocatorCount(t),n=[],i=0;i<r;++i){var o=t+String.fromCharCode("a".charCodeAt(0)+i),a=this.FindLocatorByName(o);a&&(a.FindBone(this.animation),n.push(a))}return e.UpdateItemsFromLocators(n),!0}},{key:"RebuildOverlays",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!1,r=0;r<this.attachments.length;r++)this.attachments[r]instanceof ye.EveMeshOverlayEffect&&(t=!0,this.attachments.splice(r,1),r--);for(var n=0;n<e.length;n++)this.attachments.push(e[n]),t=!0;return t}},{key:"Update",value:function(e){if(!(this._lod<1)&&this.display){this.boosters&&(this.boosters._locatorDirty&&this.RebuildBoosterSet(),this.boosters.Update(e,this._worldTransform),this.boosters._boundsDirty&&(this._boundsDirty=!0));for(var t=0;t<this.attachments.length;t++)this.attachments[t]instanceof de.EveTurretSet&&this.attachments[t]._locatorDirty&&this.RebuildTurretSet(this.attachments[t]),this.attachments[t].Update(e,this),this.attachments[t]._boundsDirty&&(this._boundsDirty=!0);for(var r=0;r<this.children.length;r++)this.children[r].Update(e,this._worldTransform),this.children[r]._boundsDirty&&(this._boundsDirty=!0);for(var n=0;n<this.effectChildren.length;n++)this.effectChildren[n].Update(e,this._worldTransform,this._perObjectData),this.effectChildren[n]._boundsDirty&&(this._boundsDirty=!0);this.animation&&this.animation.Update(e)}}},{key:"GetShadowBatch",value:function(e){if(!(this.display&&this.visible.shadows&&this.mesh&&this.mesh.IsGood()&&this.shadowEffect&&this.shadowEffect.IsGood()))return!1;for(var t=this.mesh,r=0;r<t.opaqueAreas.length;r++){var n=t.opaqueAreas[r];if(n.display){var i=new n.constructor.batchType;i.renderMode=he.RM_OPAQUE,i.perObjectData=this._perObjectData,i.geometryRes=t.geometryResource,i.meshIx=t.meshIndex,i.start=n.index,i.count=n.count,i.effect=this.shadowEffect,e.Commit(i)}}return!0}},{key:"GetBatches",value:function(e,t){if(!this.display||this._lod<1)return!1;var r=t.length,n=this.visible,i=this.mesh&&this.mesh.IsGood()?this.mesh.geometryResource:null,o=this._perObjectData.ps.Get("Shipdata");o[0]=this.boosterGain,o[2]=0,this.weeksSinceCleaned>0&&(o[2]=-(.7-1/(Math.pow(this.weeksSinceCleaned,.65)+1/2.7))*this.dirtMultiplier),n.boosters&&this.boosters&&(this._perObjectData.vs.Get("Shipdata")[0]=this.boosterGain,this.boosters.GetBatches(e,t,this._perObjectData)),i&&(this.meshIndex>i.meshes.length&&(this.meshIndex=i.meshes.length-1),this.mesh.SetMeshIndex(this.meshIndex),n.mesh&&this.mesh.GetBatches(e,t,this._perObjectData));var a=n.firingEffect;if(this._lod>1){for(var u=0;u<this.attachments.length;u++){var c=this.attachments[u];switch(c.constructor){case de.EveTurretSet:n.turretSets&&(a=!1,c.GetBatches(e,t,this._perObjectData,n.firingEffect));break;case de.EveSpotlightSet:n.spotlightSets&&c.GetBatches(e,t,this._perObjectData,this._worldTransform);break;case de.EvePlaneSet:n.planeSets&&c.GetBatches(e,t,this._perObjectData);break;case de.EveSpriteSet:n.spriteSets&&c.GetBatches(e,t,this._perObjectData,this._worldTransform);break;case me.EveSpriteLineSet:n.spriteLineSets&&c.GetBatches(e,t,this._perObjectData,this._worldTransform);break;case de.EveCurveLineSet:n.lineSets&&c.GetBatches(e,t);break;case ye.EveMeshOverlayEffect:n.overlayEffects&&c.GetBatches(e,t,this._perObjectData,this.mesh);break;case me.EveHazeSet:n.hazeSets&&c.GetBatches(e,t,this._perObjectData);break;case me.EveBanner:n.banners&&c.GetBatches(e,t,this._perObjectData);break;default:c.GetBatches?c.GetBatches(e,t,this._perObjectData):console.log("Attachment not supported")}}if(i&&n.decals)for(var l=n.killmarks&&this._lod>2?this.killCount:0,s=0;s<this.decals.length;s++)this.decals[s].GetBatches(e,t,this._perObjectData,i,l,this.mesh.GetMeshIndex())}if(a)for(var f=0;f<this.attachments.length;f++)this.attachments[f]instanceof de.EveTurretSet&&this.attachments[f].GetFiringEffectBatches(e,t,this._perObjectData);if(n.children)for(var p=0;p<this.children.length;p++)this.children[p].GetBatches(e,t,this._perObjectData);if(n.effectChildren)for(var d=0;d<this.effectChildren.length;d++)this.effectChildren[d].GetBatches(e,t,this._perObjectData);return t.length!==r}},{key:"UpdateViewDependentData",value:function(e,t){le.mat4.copy(this._parentTransform,e),le.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._worldTransform),this._perObjectData.vs.SetIndex("Unknown0",3,this._effectScale),(this._enableCurves&&this.rotationCurve||this.translationCurve)&&(this.rotationCurve&&this.rotationCurve.GetValueAt(t,this.rotation),this.translationCurve&&this.translationCurve.GetValueAt(t,this.translation)),this.RebuildTransforms({force:!0,skipUpdate:!0});var r=this.mesh&&this.mesh.IsGood()?this.mesh.geometryResource:null;r&&(this.meshIndex>r.meshes.length&&(this.meshIndex=r.meshes.length-1),this.mesh.SetMeshIndex(this.meshIndex),this.animation&&(this.animation.HasGeometryResource(r)||(this.animation.SetGeometryResource(r),this.animation.OnResPrepared(r)),this.animation.animations.length&&this._perObjectData.vs.Set("JointMat",this.animation.GetBoneMatrices(this.meshIndex))));var n=le.mat4.maxScaleOnAxis(this._worldTransform);if(this._spriteScale!==n){this._spriteScale=n,this.boosters&&this.boosters.SetWorldSpriteScale(this._spriteScale);for(var i=0;i<this.attachments.length;i++)"SetWorldSpriteScale"in this.attachments[i]&&this.attachments[i].SetWorldSpriteScale(this._spriteScale)}for(var o=0;o<this.children.length;++o)this.children[o].UpdateViewDependentData(this._worldTransform);le.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._worldTransform);var a=this._perObjectData.vs.Get("EllipsoidCenter"),u=this._perObjectData.vs.Get("EllipsoidRadii");if(this.shapeEllipsoidRadius[0]>0)a[0]=this.shapeEllipsoidCenter[0],a[1]=this.shapeEllipsoidCenter[1],a[2]=this.shapeEllipsoidCenter[2],u[0]=this.shapeEllipsoidRadius[0],u[1]=this.shapeEllipsoidRadius[1],u[2]=this.shapeEllipsoidRadius[2];else if(r){var c=r.maxBounds,l=r.minBounds;le.vec3.subtract(a,c,l),le.vec3.scale(a,a,.8660254035),le.vec3.add(u,c,l),le.vec3.scale(u,u,.5)}var s=le.mat4.identity(se.EveObject.global.mat4_0);s[12]=0,s[13]=0,s[14]=0;for(var f=0;f<this.customMasks.length;++f)this.customMasks[f].UpdatePerObjectData(s,this._perObjectData,f,this.visible.customMasks);for(var p=0;p<this.attachments.length;p++)"UpdateViewDependentData"in this.attachments[p]&&this.attachments[p].UpdateViewDependentData(this._worldTransform,t,this._spriteScale);this.boosters&&this.boosters.UpdateViewDependentData(this._worldTransform)}}])&&xe(t.prototype,r),n&&xe(t,n),o}(se.EveObject),ae.perObjectData={vs:[["WorldMat",16],["WorldMatLast",16],["Shipdata",[0,1,0,-10]],["Clipdata1",4],["Unknown_WasEllipsoidRadii",4],["Unknown_WasEllipsoidCenter",4],["Unknown0",[0,1,0,1]],["Unknown1",4],["EllipsoidRadii",4],["EllipsoidCenter",4],["CustomMaskMatrix0",le.mat4.create()],["CustomMaskMatrix1",le.mat4.create()],["CustomMaskData0",[1,0,0,0]],["CustomMaskData1",[1,0,0,0]],["JointMat",696]],ps:[["Shipdata",[0,1,0,1]],["Clipdata1",4],["Clipdata2",4],["ShLighting",28],["CustomMaskMaterialID0",4],["CustomMaskMaterialID1",4],["CustomMaskTarget0",4],["CustomMaskTarget1",4],["Unknown4",4]]},L=Oe((I=ue).prototype,"animation",[o,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new pe.Tw2AnimationController}}),G=Oe(I.prototype,"attachments",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=Oe(I.prototype,"boosters",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=Oe(I.prototype,"boundingSphereCenter",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return le.vec3.create()}}),N=Oe(I.prototype,"boundingSphereRadius",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=Oe(I.prototype,"children",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=Oe(I.prototype,"customMasks",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=Oe(I.prototype,"decals",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=Oe(I.prototype,"dna",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),W=Oe(I.prototype,"locatorSets",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=Oe(I.prototype,"locators",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=Oe(I.prototype,"mesh",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=Oe(I.prototype,"rotationCurve",[w,x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=Oe(I.prototype,"shadowEffect",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=Oe(I.prototype,"shapeEllipsoidCenter",[z,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return le.vec3.create()}}),J=Oe(I.prototype,"shapeEllipsoidRadius",[j,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return le.vec3.create()}}),$=Oe(I.prototype,"translationCurve",[T,O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=Oe(I.prototype,"meshIndex",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),te=Oe(I.prototype,"killCount",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),re=Oe(I.prototype,"boosterGain",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ne=Oe(I.prototype,"effectChildren",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ie=Oe(I.prototype,"visible",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{mesh:!0,children:!0,effectChildren:!0,planeSets:!0,spotlightSets:!0,decals:!0,spriteSets:!0,hazeSets:!0,overlayEffects:!0,lineSets:!0,killmarks:!0,customMasks:!0,turretSets:!0,boosters:!0,shadows:!0}}}),oe=Oe(I.prototype,"weeksSinceCleaned",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=I))||k)||k)},"./eve/object/EveTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTransform",(function(){return ge}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re=r("./global/utils/index.js"),ne=r("./global/math/index.js"),ie=r("./core/index.js"),oe=r("./eve/object/EveObject.js"),ae=r("./global/constant/ccpwgl.js"),ue=r("./global/tw2.js");function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=be(e);if(t){var i=be(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ye(this,r)}}function ye(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?me(e):t}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ve={NONE:0,BILLBOARD:1,TRANSLATE_WITH_CAMERA:2,LOOK_AT_CAMERA:3,SIMPLE_HALO:4,EVE_CAMERA_ROTATION_ALIGNED:100,EVE_BOOSTER:101,EVE_SIMPLE_HALO:102,EVE_CAMERA_ROTATION:103},ge=(n=re.meta.type("EveTransform"),i=re.meta.string,o=re.meta.list("EveObject"),a=re.meta.list("Tw2CurveSet"),u=re.meta.boolean,c=re.meta.notImplemented,l=re.meta.float,s=re.meta.notImplemented,f=re.meta.float,p=re.meta.notImplemented,d=re.meta.boolean,y=re.meta.struct(["Tw2Mesh","Tr2MeshLOD","Tw2InstancedMesh"]),m=re.meta.uint,b=re.meta.enums(ve),h=re.meta.list("Tr2ObserverLocal"),v=re.meta.vector3,g=re.meta.vector3,w=re.meta.list("EveParticleEmitter"),x=re.meta.list("EveParticleSystem"),_=re.meta.notImplemented,z=re.meta.float,S=re.meta.boolean,j=re.meta.notImplemented,E=re.meta.boolean,T=re.meta.notImplemented,O=re.meta.boolean,R=re.meta.notImplemented,P=re.meta.float,D=re.meta.plain,n((te=ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(o,e);var t,r,n,i=de(o);function o(){var e;se(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return le(e=i.call.apply(i,[this].concat(r)),"name",C,me(e)),le(e,"children",k,me(e)),le(e,"curveSets",I,me(e)),le(e,"display",L,me(e)),le(e,"distanceBasedScaleArg1",G,me(e)),le(e,"distanceBasedScaleArg2",F,me(e)),le(e,"hideOnLowQuality",B,me(e)),le(e,"mesh",N,me(e)),le(e,"modifier",U,me(e)),le(e,"observers",V,me(e)),le(e,"overrideBoundsMax",q,me(e)),le(e,"overrideBoundsMin",H,me(e)),le(e,"particleEmitters",W,me(e)),le(e,"particleSystems",X,me(e)),le(e,"sortValueMultiplier",K,me(e)),le(e,"update",Y,me(e)),le(e,"useDistanceBasedScale",Q,me(e)),le(e,"useLodLevel",Z,me(e)),le(e,"visibilityThreshold",J,me(e)),le(e,"visible",$,me(e)),e._parentTransform=ne.mat4.create(),e._perObjectData=ie.Tw2PerObjectData.from(o.perObjectData),e}return t=o,n=[{key:"Multiply3x3",value:function(e,t,r){r||(r=t);var n=t[0],i=t[1];return t=t[2],r[0]=e[0]*n+e[4]*i+e[8]*t,r[1]=e[1]*n+e[5]*i+e[9]*t,r[2]=e[2]*n+e[6]*i+e[10]*t,r}}],(r=[{key:"UpdateLod",value:function(e){this.RebuildBounds();var t=oe.EveObject.global.sph3_0;this.GetWorldBoundingSphere(t)?e.IsSphereVisible(t,t[3])?(this._pixelSizeAcross=e.GetPixelSizeAcross(t,t[3]),this._pixelSizeAcross<ae.LodLevelPixels.ZERO?this._lod=0:this._pixelSizeAcross<ae.LodLevelPixels.ONE?this._lod=1:this._pixelSizeAcross<ae.LodLevelPixels.TWO?this._lod=2:this._lod=3):(this._pixelSizeAcross=0,this._lod=0):this._lod=3}},{key:"OnRebuildBounds",value:function(){var e=this;if(!ne.box3.bounds.isEmpty(this.overrideBoundsMin,this.overrideBoundsMax))return ne.box3.fromBounds(this._boundingBox,this.overrideBoundsMin,this.overrideBoundsMax),ne.sph3.fromBox3(this._boundingSphere,this._boundingBox),void(this._boundsDirty=!1);var t=oe.EveObject.global,r=t.box3_0,n=t.sph3_0,i=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0;i<t.length;i++){var o=!1;"GetBoundingBox"in t[i]?(t[i].GetBoundingBox(r),o=!0):"GetBoundingSphere"in t[i]&&(t[i].GetBoundingSphere(n),ne.box3.fromSph3(r,n),o=!0),o&&ne.box3.union(e._boundingBox,e._boundingBox,r)}};i(this.children),i(this.particleSystems),i(this.particleEmitters),ne.sph3.fromBox3(this._boundingSphere,this._boundingBox),this._boundsDirty=!1}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.mesh&&this.mesh.GetResources(e);for(var t=0;t<this.children.length;t++)this.children[t].GetResources(e);return e}},{key:"UpdateViewDependentData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne.mat4.create();ne.mat4.copy(this._parentTransform,e),this.RebuildTransforms({force:!0,skipUpdate:!0});for(var t=0;t<this.children.length;++t)this.children[t].UpdateViewDependentData(this._worldTransform)}},{key:"Update",value:function(e){for(var t=0;t<this.children.length;++t)this.children[t].Update(e),this.children[t]._boundsDirty&&(this._boundsDirty=!0);for(var r=0;r<this.particleEmitters.length;++r)this.particleEmitters[r].Update(e),this.particleEmitters[r]._boundsDirty&&(this._boundsDirty=!0);for(var n=0;n<this.particleSystems.length;++n)this.particleSystems[n].Update(e),this.particleSystems[n]._boundsDirty&&(this._boundsDirty=!0);for(var i=0;i<this.curveSets.length;++i)this.curveSets[i].Update(e)}},{key:"GetBatches",value:function(e,t,r){if(!this.display)return!1;var n=t.length;if(this.visible.mesh&&this.mesh&&(ne.mat4.transpose(this._perObjectData.ffe.Get("World"),this._worldTransform),ne.mat4.invert(this._perObjectData.ffe.Get("WorldInverseTranspose"),this._worldTransform),r&&(this._perObjectData.vs=r.vs,this._perObjectData.ps=r.ps),this.mesh.GetBatches(e,t,this._perObjectData)),this.visible.children)for(var i=0;i<this.children.length;++i)this.children[i].GetBatches(e,t,r);return t.length!==n}},{key:"RebuildTransforms",value:function(e){var t=e&&e.skipUpdate;ne.mat4.fromRotationTranslationScale(this._localTransform,this.rotation,this.translation,this.scaling),this._rebuildLocal=!1;var r=ue.device,n=ne.vec3.create(),i=ne.vec3.create(),a=ne.vec3.create(),u=r.viewInverse;switch(ne.mat4.getScaling(i,this._parentTransform),this.modifier){case o.Modifier.BILLBOARD:case o.Modifier.SIMPLE_HALO:var c=ne.vec3.create();if(ne.mat4.multiply(this._worldTransform,this._parentTransform,this._localTransform),ne.vec3.multiply(n,this.scaling,i),this.modifier===o.Modifier.SIMPLE_HALO){ne.vec3.subtract(a,r.GetEyePosition(a),this._worldTransform.subarray(12)),ne.vec3.normalize(c,this._worldTransform.subarray(8)),ne.vec3.normalize(a,a);var l=ne.vec3.dot(a,c);l<0&&(l=0),ne.vec3.scale(n,n,l*l)}this._worldTransform[0]=u[0]*n[0],this._worldTransform[1]=u[1]*n[0],this._worldTransform[2]=u[2]*n[0],this._worldTransform[4]=u[4]*n[1],this._worldTransform[5]=u[5]*n[1],this._worldTransform[6]=u[6]*n[1],this._worldTransform[8]=u[8]*n[2],this._worldTransform[9]=u[9]*n[2],this._worldTransform[10]=u[10]*n[2];break;case o.Modifier.EVE_CAMERA_ROTATION:var s=ne.vec3.create();ne.vec3.transformMat4(s,this.translation,this._parentTransform),ne.mat4.fromRotationTranslationScale(this._localTransform,this.rotation,s,this.scaling),ne.mat4.multiply(this._worldTransform,u,this._localTransform),this._worldTransform[12]=this._localTransform[12],this._worldTransform[13]=this._localTransform[13],this._worldTransform[14]=this._localTransform[14];break;case o.Modifier.EVE_CAMERA_ROTATION_ALIGNED:case o.Modifier.EVE_SIMPLE_HALO:var f=ne.vec3.create(),p=ne.vec3.create(),d=ne.vec3.create(),y=ne.vec3.create(),m=ne.vec3.create(),b=ne.mat4.create(),h=ne.mat4.create(),v=ne.mat4.create();if(ne.mat4.translate(this._worldTransform,this._parentTransform,this.translation),ne.mat4.transpose(b,this._parentTransform),r.GetEyePosition(a),a[0]-=this._worldTransform[12],a[1]-=this._worldTransform[13],a[2]-=this._worldTransform[14],ne.vec3.copy(f,a),ne.vec3.transformMat4(f,f,b),ne.vec3.divide(f,f,i),ne.vec3.normalize(f,f),ne.vec3.set(p,r.view[0],r.view[4],r.view[8]),ne.vec3.transformMat4(p,p,b),ne.vec3.normalize(p,p),ne.vec3.cross(d,f,p),ne.vec3.normalize(d,d),ne.vec3.cross(p,d,f),h[0]=p[0],h[1]=p[1],h[2]=p[2],h[4]=d[0],h[5]=d[1],h[6]=d[2],h[8]=f[0],h[9]=f[1],h[10]=f[2],h[15]=1,ne.mat4.fromQuat(v,this.rotation),ne.mat4.multiply(h,h,v),this.modifier===o.Modifier.EVE_SIMPLE_HALO){ne.vec3.normalize(y,this._worldTransform.subarray(8)),ne.vec3.normalize(m,a);var g=-ne.vec3.dot(m,y);g<0&&(g=0),ne.mat4.multiply(this._worldTransform,this._worldTransform,h),ne.mat4.scale(this._worldTransform,this._worldTransform,[this.scaling[0]*g,this.scaling[1]*g,this.scaling[2]*g])}else ne.mat4.scale(this._worldTransform,this._worldTransform,this.scaling),ne.mat4.multiply(this._worldTransform,this._worldTransform,h);break;case o.Modifier.LOOK_AT_CAMERA:var w=ne.mat4.create();ne.mat4.multiply(this._worldTransform,this._parentTransform,this._localTransform),ne.mat4.lookAt(w,u.subarray(12),this._worldTransform.subarray(12),[0,1,0]),ne.mat4.transpose(w,w),ne.vec3.multiply(n,this.scaling,i),this._worldTransform[0]=w[0]*n[0],this._worldTransform[1]=w[1]*n[0],this._worldTransform[2]=w[2]*n[0],this._worldTransform[4]=w[4]*n[1],this._worldTransform[5]=w[5]*n[1],this._worldTransform[6]=w[6]*n[1],this._worldTransform[8]=w[8]*n[2],this._worldTransform[9]=w[9]*n[2],this._worldTransform[10]=w[10]*n[2];break;default:ne.mat4.multiply(this._worldTransform,this._parentTransform,this._localTransform)}return this._worldInverse&&ne.mat4.invert(this._worldInverse,this._worldTransform),this._worldTranspose&&ne.mat4.transpose(this._worldTranspose,this._worldTransform),this._worldInverseTranspose&&(this._worldTranspose?ne.mat4.invert(this._worldInverseTranspose,this._worldTranspose):(ne.mat4.invert(this._worldInverseTranspose,this._worldTransform),ne.mat4.transpose(this._worldInverseTranspose,this._worldInverseTranspose))),this._onWorldTransformModified&&this._onWorldTransformModified(this._worldTransform),this.OnWorldTransformModified&&this.OnWorldTransformModified(this._worldTransform),t||this.UpdateValues({skipTransforms:!0}),this._rebuildWorld=!1,!0}}])&&fe(t.prototype,r),n&&fe(t,n),o}(oe.EveObject),ee.perObjectData={ffe:[["World",16],["WorldInverseTranspose",16]]},ee.Modifier=ve,C=he((M=te).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=he(M.prototype,"children",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=he(M.prototype,"curveSets",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=he(M.prototype,"display",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),G=he(M.prototype,"distanceBasedScaleArg1",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),F=he(M.prototype,"distanceBasedScaleArg2",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.63}}),B=he(M.prototype,"hideOnLowQuality",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=he(M.prototype,"mesh",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=he(M.prototype,"modifier",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ve.NONE}}),V=he(M.prototype,"observers",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=he(M.prototype,"overrideBoundsMax",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ne.vec3.create()}}),H=he(M.prototype,"overrideBoundsMin",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ne.vec3.create()}}),W=he(M.prototype,"particleEmitters",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=he(M.prototype,"particleSystems",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=he(M.prototype,"sortValueMultiplier",[_,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Y=he(M.prototype,"update",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=he(M.prototype,"useDistanceBasedScale",[j,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Z=he(M.prototype,"useLodLevel",[T,O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),J=he(M.prototype,"visibilityThreshold",[R,P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$=he(M.prototype,"visible",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{mesh:!0,children:!0}}}),A=M))||A)},"./eve/object/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/object/EveTransform.js");r.d(t,"EveTransform",(function(){return n.EveTransform}));var i=r("./eve/object/EveEffectRoot.js");r.d(t,"EveEffectRoot",(function(){return i.EveEffectRoot}));var o=r("./eve/object/EvePlanet.js");r.d(t,"EvePlanet",(function(){return o.EvePlanet}));var a=r("./eve/object/EveShip2.js");r.d(t,"EveShip2",(function(){return a.EveShip2}));var u=r("./eve/object/legacy/index.js");r.d(t,"EveShip",(function(){return u.EveShip})),r.d(t,"EveSpaceObject",(function(){return u.EveSpaceObject})),r.d(t,"EveStation",(function(){return u.EveStation}))},"./eve/object/legacy/EveShip.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveShip",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js"),y=r("./eve/object/legacy/EveSpaceObject.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,r){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=d.meta.type("EveShip"),i=d.meta.struct("EveBoosterSet"),o=d.meta.list("EveTurretSet"),a=d.meta.float,n((p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(o,e);var t,r,n,i=x(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return b(e=i.call.apply(i,[this].concat(r)),"boosters",l,z(e)),b(e,"turretSets",s,z(e)),b(e,"boosterGain",f,z(e)),e}return t=o,(r=[{key:"Initialize",value:function(){g(S(o.prototype),"Initialize",this).call(this),this.boosters&&this.RebuildBoosterSet(),this.visible.boosters=!0,this.visible.firingEffect=!0}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];g(S(o.prototype),"GetResources",this).call(this,e);for(var t=0;t<this.turretSets.length;t++)this.turretSets[t].GetResources(e);return this.boosters&&this.boosters.GetResources(e),e}},{key:"RebuildBoosterSet",value:function(){this.boosters&&this.boosters.UpdateItemsFromLocators(this.FindLocatorsByPrefix("locator_booster"))}},{key:"RebuildTurretPositions",value:function(){for(var e=0;e<this.turretSets.length;e++)this.RebuildTurretSet(e)}},{key:"RebuildTurretSet",value:function(e){if(Object(d.isNumber)(e)||(e=this.turretSets.indexOf(e)),void 0!==this.turretSets[e]){for(var t=this.turretSets[e],r=t.locatorName,n=this.GetLocatorCount(r),i=[],o=0;o<n;++o){var a=r+String.fromCharCode("a".charCodeAt(0)+o),u=this.FindLocatorByName(a);u&&(u.FindBone(this.animation),i.push(u))}t.UpdateItemsFromLocators(i)}}},{key:"UpdateViewDependentData",value:function(e,t,r){var n=this._worldSpriteScale!==r;g(S(o.prototype),"UpdateViewDependentData",this).call(this,e,t,r),!n&&this.boosters&&this.boosters.SetWorldSpriteScale(this._worldSpriteScale);for(var i=0;i<this.turretSets.length;++i)this.turretSets[i].UpdateViewDependentData(this._worldTransform)}},{key:"Update",value:function(e){g(S(o.prototype),"Update",this).call(this,e),this.boosters&&(this.boosters._locatorDirty&&this.RebuildBoosterSet(),this.boosters.SetWorldSpriteScale(this._worldSpriteScale),this.boosters.Update(e,this._worldTransform));for(var t=0;t<this.turretSets.length;++t)this.turretSets[t]._locatorDirty&&this.RebuildTurretSet(t),this.turretSets[t].Update(e)}},{key:"GetBatches",value:function(e,t){if(!this.display||!this._lod)return!1;var r=t.length;if(g(S(o.prototype),"GetBatches",this).call(this,e,t),this._perObjectData.vs.Get("Shipdata")[0]=this.boosterGain,this._perObjectData.ps.Get("Shipdata")[0]=this.boosterGain,this.boosters&&this.visible.boosters&&this.boosters.GetBatches(e,t,this._perObjectData),this.visible.turretSets)if(this._lod>1)for(var n=0;n<this.turretSets.length;++n)this.turretSets[n].GetBatches(e,t,this._perObjectData,this.visible.firingEffects);else if(this.visible.firingEffects)for(var i=0;i<this.turretSets.length;++i)this.turretSets[i].GetFiringEffectBatches(e,t,this._perObjectData);return t.length!==r}}])&&v(t.prototype,r),n&&v(t,n),o}(y.EveSpaceObject),l=j((c=p).prototype,"boosters",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=j(c.prototype,"turretSets",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=j(c.prototype,"boosterGain",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),u=c))||u)},"./eve/object/legacy/EveSpaceObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceObject",(function(){return be})),r.d(t,"EveStation",(function(){return be}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee=r("./global/utils/index.js"),te=r("./global/math/index.js"),re=r("./core/index.js"),ne=r("./eve/object/EveObject.js"),ie=r("./global/constant/ccpwgl.js");function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function le(e,t,r){return(le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ye(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ye(e);if(t){var i=ye(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pe(this,r)}}function pe(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var be=(n=ee.meta.type("EveSpaceObject"),i=ee.meta.struct("Tw2AnimationController"),o=ee.meta.isPrivate,a=ee.meta.vector3,u=ee.meta.isPrivate,c=ee.meta.float,l=ee.meta.isPrivate,s=ee.meta.list("EveObject"),f=ee.meta.list("Tw2CurveSet"),p=ee.meta.list("EveCustomMask"),d=ee.meta.list("EveSpaceObjectDecal"),y=ee.meta.list("EveChild"),m=ee.meta.float,b=ee.meta.list("EveCurveLineSet"),h=ee.meta.list("EveLocator"),v=ee.meta.struct("Tw2Mesh"),g=ee.meta.list("EveMeshOverlayEffect"),w=ee.meta.list("EvePlaneSet"),x=ee.meta.vector3,_=ee.meta.isPrivate,z=ee.meta.vector3,S=ee.meta.isPrivate,j=ee.meta.list("EveSpotlightSet"),E=ee.meta.list("EveSpriteSet"),T=ee.meta.list("EveTurretSet"),O=ee.meta.plain,R=ee.meta.matrix4,n(($=J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(o,e);var t,r,n,i=fe(o);function o(){var e;ue(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ae(e=i.call.apply(i,[this].concat(r)),"animation",A,de(e)),ae(e,"boundingSphereCenter",M,de(e)),ae(e,"boundingSphereRadius",C,de(e)),ae(e,"children",k,de(e)),ae(e,"curveSets",I,de(e)),ae(e,"customMasks",L,de(e)),ae(e,"decals",G,de(e)),ae(e,"effectChildren",F,de(e)),ae(e,"killCount",B,de(e)),ae(e,"lineSets",N,de(e)),ae(e,"locators",U,de(e)),ae(e,"mesh",V,de(e)),ae(e,"overlayEffects",q,de(e)),ae(e,"planeSets",H,de(e)),ae(e,"shapeEllipsoidRadius",W,de(e)),ae(e,"shapeEllipsoidCenter",X,de(e)),ae(e,"spotlightSets",K,de(e)),ae(e,"spriteSets",Y,de(e)),ae(e,"turretSets",Q,de(e)),ae(e,"visible",Z,de(e)),e._lod=3,e._worldSpriteScale=1,e._parentTransform=te.mat4.create(),e._perObjectData=re.Tw2PerObjectData.from(o.perObjectData),e}return t=o,(r=[{key:"Initialize",value:function(){this.mesh&&this.animation.SetGeometryResource(this.mesh.geometryResource),le(ye(o.prototype),"Initialize",this).call(this)}},{key:"OnRebuildBounds",value:function(){var e=this;if(this.animation&&this.animation.animations.length)throw new Error("Rebuilding bounds on animated meshes not yet supported");if(this.mesh&&this.mesh.IsGood()){var t=ne.EveObject.global,r=t.box3_0,n=t.sph3_0;te.box3.empty(this._boundingBox),this.mesh.geometryResource.GetBoundingBox(this._boundingBox);var i=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0;i<t.length;i++)"GetBoundingBox"in t[i]?(t[i].GetBoundingBox(r),te.box3.union(e._boundingBox,e._boundingBox,r)):"GetBoundingSphere"in t[i]&&(t[i].GetBoundingSphere(n),te.box3.fromSph3(r,n),te.box3.union(e._boundingBox,e._boundingBox,r))};i(this.spriteSets),i(this.spotlightSets),i(this.planeSets),i(this.children),i(this.effectChildren),i(this.boosters),i(this.turretSets),te.sph3.fromBox3(this._boundingSphere,this._boundingBox),this._boundsDirty=!1}else this._boundsDirty=!0}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.mesh&&this.mesh.GetResources(e),this.animation&&this.animation.GetResources(e);var t=ee.perArrayChild;return t(this.spriteSets,"GetResources",e),t(this.turretSets,"GetResources",e),t(this.decals,"GetResources",e),t(this.spotlightSets,"GetResources",e),t(this.planeSets,"GetResources",e),t(this.lineSets,"GetResources",e),t(this.overlayEffects,"GetResources",e),t(this.effectChildren,"GetResources",e),t(this.children,"GetResources",e),e}},{key:"ResetLod",value:function(){this._lod=3}},{key:"UpdateLod",value:function(e){var t=te.vec3.transformMat4(ne.EveObject.global.vec3_0,this.boundingSphereCenter,this.transform);e.IsSphereVisible(t,this.boundingSphereRadius)?(this._pixelSizeAcross=e.GetPixelSizeAcross(t,this.boundingSphereRadius),this._pixelSizeAcross<ie.LodLevelPixels.ZERO?this._lod=0:this._pixelSizeAcross<ie.LodLevelPixels.ONE?this._lod=1:this._pixelSizeAcross<ie.LodLevelPixels.TWO?this._lod=2:this._lod=3):(this._pixelSizeAcross=0,this._lod=0);for(var r=0;r<this.children.length;r++)this.children[r].UpdateLod&&this.children[r].UpdateLod(e,this._lod);for(var n=0;n<this.effectChildren.length;n++)this.effectChildren[n].UpdateLod&&this.effectChildren[n].UpdateLod(e,this._lod)}},{key:"FindTurretPrefixes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];function t(t){if(!t)return!1;var r=t[0].substring(0,t[0].length-1);return e.includes(r)||e.push(r),!0}for(var r=0;r<this.locators.length;r++){var n=this.locators[r].name;t(/^locator_turret_([0-9]+)[a-z]$/i.exec(n))||t(/^locator_xl_([0-9]+)[a-z]$/i.exec(n))}return e.sort(),e}},{key:"GetLocatorCount",value:function(e){return this.FindLocatorsByPrefix(e).length}},{key:"FindLocatorJointByName",value:function(e){var t=this.FindLocatorBoneByName(e);return t?t.worldTransform:null}},{key:"FindLocatorTransformByName",value:function(e){var t=this.FindLocatorByName(e);return t?t.transform:null}},{key:"HasLocatorPrefix",value:function(e){for(var t=0;t<this.locators.length;t++)if(0===this.locators[t].name.indexOf(e))return!0;return!1}},{key:"FindLocatorBoneByName",value:function(e){return this.animation?this.animation.FindBoneForMesh(e,0):null}},{key:"FindLocatorByName",value:function(e){for(var t=0;t<this.locators.length;t++)if(this.locators[t].name===e)return this.locators[t];return null}},{key:"FindLocatorsByPrefix",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=0;r<this.locators.length;r++)0===this.locators[r].name.indexOf(e)&&t.push(this.locators[r]);return t}},{key:"RebuildOverlays",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length&&0===this.overlayEffects.length)return!1;this.overlayEffects.splice(0);for(var t=0;t<e.length;t++)this.overlayEffects.push(e[t]);return!0}},{key:"UpdateViewDependentData",value:function(e,t,r){te.mat4.copy(this._parentTransform,e),te.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._worldTransform),this.RebuildTransforms({force:!0,skipUpdate:!0});var n=this.mesh&&this.mesh.IsGood()?this.mesh.geometryResource:null;if(n&&(this.animation.HasGeometryResource(n)||this.animation.SetGeometryResource(n),this.animation.animations.length&&this._perObjectData.vs.Set("JointMat",this.animation.GetBoneMatrices(0))),this._worldSpriteScale!==r){this._worldSpriteScale=r;for(var i=0;i<this.spriteSets.length;i++)this.spriteSets[i].SetWorldSpriteScale(r)}for(var o=0;o<this.children.length;++o)this.children[o].UpdateViewDependentData(this._worldTransform,t,r);te.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._worldTransform);var a=this._perObjectData.vs.Get("EllipsoidCenter"),u=this._perObjectData.vs.Get("EllipsoidRadii");if(this.shapeEllipsoidRadius[0]>0)a[0]=this.shapeEllipsoidCenter[0],a[1]=this.shapeEllipsoidCenter[1],a[2]=this.shapeEllipsoidCenter[2],u[0]=this.shapeEllipsoidRadius[0],u[1]=this.shapeEllipsoidRadius[1],u[2]=this.shapeEllipsoidRadius[2];else if(n){var c=n.maxBounds,l=n.minBounds;te.vec3.subtract(a,c,l),te.vec3.scale(a,a,.8660254035),te.vec3.add(u,c,l),te.vec3.scale(u,u,.5)}var s=te.mat4.copy(ne.EveObject.global.mat4_0,this._worldTransform);s[12]=0,s[13]=0,s[14]=0;for(var f=0;f<this.customMasks.length;++f)this.customMasks[f].UpdatePerObjectData(s,this._perObjectData,f,this.visible.customMasks);for(var p=0;p<this.lineSets.length;++p)this.lineSets[p].UpdateViewDependentData(this._worldTransform)}},{key:"Update",value:function(e){if(this._lod>0){for(var t=0;t<this.spriteSets.length;++t)this.spriteSets[t].Update(e);for(var r=0;r<this.planeSets.length;r++)this.planeSets[r].Update(e);for(var n=0;n<this.spotlightSets.length;n++)this.spotlightSets[n].Update(e);for(var i=0;i<this.children.length;++i)this.children[i].Update(e);for(var o=0;o<this.effectChildren.length;++o)this.effectChildren[o].Update(e,this._worldTransform,this._lod);for(var a=0;a<this.curveSets.length;++a)this.curveSets[a].Update(e);for(var u=0;u<this.overlayEffects.length;++u)this.overlayEffects[u].Update(e);for(var c=0;c<this.lineSets.length;c++)this.lineSets[c].Update(e);this.animation&&this.animation.Update(e)}}},{key:"GetBatches",value:function(e,t){if(!this.display||this._lod<1)return!1;var r=t.length,n=this.visible,i=this.mesh&&this.mesh.IsGood()?this.mesh.geometryResource:null;if(n.mesh&&i&&this.mesh.GetBatches(e,t,this._perObjectData),this._lod>1){if(n.spriteSets)for(var o=0;o<this.spriteSets.length;o++)this.spriteSets[o].GetBatches(e,t,this._perObjectData,this._worldTransform);if(n.spotlightSets)for(var a=0;a<this.spotlightSets.length;a++)this.spotlightSets[a].GetBatches(e,t,this._perObjectData);if(n.planeSets)for(var u=0;u<this.planeSets.length;u++)this.planeSets[u].GetBatches(e,t,this._perObjectData);if(n.lineSets)for(var c=0;c<this.lineSets.length;c++)this.lineSets[c].GetBatches(e,t);if(i){if(n.decals)for(var l=0;l<this.decals.length;l++)this.decals[l].GetBatches(e,t,this._perObjectData,i,n.killmarks?this.killCount:0);if(n.overlayEffects)for(var s=0;s<this.overlayEffects.length;s++)this.overlayEffects[s].GetBatches(e,t,this._perObjectData,this.mesh)}}if(n.children)for(var f=0;f<this.children.length;f++)this.children[f].GetBatches(e,t,this._perObjectData);if(n.effectChildren)for(var p=0;p<this.effectChildren.length;p++)this.effectChildren[p].GetBatches(e,t,this._perObjectData);return t.length!==r}},{key:"RenderDebugInfo",value:function(e){this.animation&&this.animation.RenderDebugInfo(e)}},{key:"transform",get:function(){return this._localTransform},set:function(e){te.mat4.copy(this._localTransform,e)}}])&&ce(t.prototype,r),n&&ce(t,n),o}(ne.EveObject),J.perObjectData={vs:[["WorldMat",16],["WorldMatLast",16],["Shipdata",[0,1,0,-10]],["Clipdata1",4],["EllipsoidRadii",4],["EllipsoidCenter",4],["CustomMaskMatrix0",te.mat4.identity([])],["CustomMaskMatrix1",te.mat4.identity([])],["CustomMaskData0",[1,0,0,0]],["CustomMaskData1",[1,0,0,0]],["JointMat",696]],ps:[["Shipdata",[0,1,0,1]],["Clipdata1",4],["Clipdata2",4],["ShLighting",28],["CustomMaskMaterialID0",4],["CustomMaskMaterialID1",4],["CustomMaskTarget0",4],["CustomMaskTarget1",4]]},A=me((D=$).prototype,"animation",[i,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new re.Tw2AnimationController}}),M=me(D.prototype,"boundingSphereCenter",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return te.vec3.create()}}),C=me(D.prototype,"boundingSphereRadius",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=me(D.prototype,"children",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=me(D.prototype,"curveSets",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=me(D.prototype,"customMasks",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=me(D.prototype,"decals",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=me(D.prototype,"effectChildren",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=me(D.prototype,"killCount",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=me(D.prototype,"lineSets",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=me(D.prototype,"locators",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=me(D.prototype,"mesh",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=me(D.prototype,"overlayEffects",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=me(D.prototype,"planeSets",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=me(D.prototype,"shapeEllipsoidRadius",[x,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return te.vec3.create()}}),X=me(D.prototype,"shapeEllipsoidCenter",[z,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return te.vec3.create()}}),K=me(D.prototype,"spotlightSets",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=me(D.prototype,"spriteSets",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=me(D.prototype,"turretSets",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=me(D.prototype,"visible",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{mesh:!0,children:!0,effectChildren:!0,planeSets:!0,spotlightSets:!0,decals:!0,spriteSets:!0,overlayEffects:!0,lineSets:!0,killmarks:!0,customMasks:!0,turretSets:!0,boosters:!0}}}),me(D.prototype,"transform",[R],Object.getOwnPropertyDescriptor(D.prototype,"transform"),D.prototype),P=D))||P)},"./eve/object/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/object/legacy/EveShip.js");r.d(t,"EveShip",(function(){return n.EveShip}));var i=r("./eve/object/legacy/EveSpaceObject.js");r.d(t,"EveSpaceObject",(function(){return i.EveSpaceObject})),r.d(t,"EveStation",(function(){return i.EveStation}))},"./global/constant/ccpwgl.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DeviceTextureQuality",(function(){return n})),r.d(t,"DeviceShaderQuality",(function(){return i})),r.d(t,"SceneLodSettings",(function(){return o})),r.d(t,"LodLevelPixels",(function(){return a})),r.d(t,"Mouse",(function(){return u})),r.d(t,"Touch",(function(){return c})),r.d(t,"PickingBlueChannel",(function(){return l}));var n={HIGH:0,MEDIUM:1,LOW:2},i={HIGH:"hi",LOW:"lo"},o={LOD_DISABLED:0,LOD_ENABLED:1},a={ZERO:20,ONE:100,TWO:250},u={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},c={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},l={UNKNOWN:0,MATERIAL_1:1,MATERIAL_2:2,MATERIAL_3:3,MATERIAL_4:4,MATERIAL_5:5,MATERIAL_6:6,GLOW:10,PAINT:11,HEAT:12,GLASS:13,SAIL:14,DETAIL:15,DECAL:20,BOOSTER:21,PLANE_SET:22,SPOTLIGHT_SET:23,SPRITE_SET:24,SPRITE_LINE_SET:25,LINE_SET:26,HAZE_SET:27,BANNER:28}},"./global/constant/d3d.js":function(e,t,r){"use strict";r.r(t),r.d(t,"RM_ANY",(function(){return u})),r.d(t,"RM_OPAQUE",(function(){return c})),r.d(t,"RM_DECAL",(function(){return l})),r.d(t,"RM_TRANSPARENT",(function(){return s})),r.d(t,"RM_ADDITIVE",(function(){return f})),r.d(t,"RM_DEPTH",(function(){return p})),r.d(t,"RM_FULLSCREEN",(function(){return d})),r.d(t,"RM_PICKABLE",(function(){return y})),r.d(t,"RM_DISTORTION",(function(){return m})),r.d(t,"RS_ZENABLE",(function(){return b})),r.d(t,"RS_FILLMODE",(function(){return h})),r.d(t,"RS_SHADEMODE",(function(){return v})),r.d(t,"RS_ZWRITEENABLE",(function(){return g})),r.d(t,"RS_ALPHATESTENABLE",(function(){return w})),r.d(t,"RS_LASTPIXEL",(function(){return x})),r.d(t,"RS_SRCBLEND",(function(){return _})),r.d(t,"RS_DESTBLEND",(function(){return z})),r.d(t,"RS_CULLMODE",(function(){return S})),r.d(t,"RS_ZFUNC",(function(){return j})),r.d(t,"RS_ALPHAREF",(function(){return E})),r.d(t,"RS_ALPHAFUNC",(function(){return T})),r.d(t,"RS_DITHERENABLE",(function(){return O})),r.d(t,"RS_ALPHABLENDENABLE",(function(){return R})),r.d(t,"RS_FOGENABLE",(function(){return P})),r.d(t,"RS_SPECULARENABLE",(function(){return D})),r.d(t,"RS_FOGCOLOR",(function(){return A})),r.d(t,"RS_FOGTABLEMODE",(function(){return M})),r.d(t,"RS_FOGSTART",(function(){return C})),r.d(t,"RS_FOGEND",(function(){return k})),r.d(t,"RS_FOGDENSITY",(function(){return I})),r.d(t,"RS_RANGEFOGENABLE",(function(){return L})),r.d(t,"RS_STENCILENABLE",(function(){return G})),r.d(t,"RS_STENCILFAIL",(function(){return F})),r.d(t,"RS_STENCILZFAIL",(function(){return B})),r.d(t,"RS_STENCILPASS",(function(){return N})),r.d(t,"RS_STENCILFUNC",(function(){return U})),r.d(t,"RS_STENCILREF",(function(){return V})),r.d(t,"RS_STENCILMASK",(function(){return q})),r.d(t,"RS_STENCILWRITEMASK",(function(){return H})),r.d(t,"RS_TEXTUREFACTOR",(function(){return W})),r.d(t,"RS_WRAP0",(function(){return X})),r.d(t,"RS_WRAP1",(function(){return K})),r.d(t,"RS_WRAP2",(function(){return Y})),r.d(t,"RS_WRAP3",(function(){return Q})),r.d(t,"RS_WRAP4",(function(){return Z})),r.d(t,"RS_WRAP5",(function(){return J})),r.d(t,"RS_WRAP6",(function(){return $})),r.d(t,"RS_WRAP7",(function(){return ee})),r.d(t,"RS_CLIPPING",(function(){return te})),r.d(t,"RS_LIGHTING",(function(){return re})),r.d(t,"RS_AMBIENT",(function(){return ne})),r.d(t,"RS_FOGVERTEXMODE",(function(){return ie})),r.d(t,"RS_COLORVERTEX",(function(){return oe})),r.d(t,"RS_LOCALVIEWER",(function(){return ae})),r.d(t,"RS_NORMALIZENORMALS",(function(){return ue})),r.d(t,"RS_DIFFUSEMATERIALSOURCE",(function(){return ce})),r.d(t,"RS_SPECULARMATERIALSOURCE",(function(){return le})),r.d(t,"RS_AMBIENTMATERIALSOURCE",(function(){return se})),r.d(t,"RS_EMISSIVEMATERIALSOURCE",(function(){return fe})),r.d(t,"RS_VERTEXBLEND",(function(){return pe})),r.d(t,"RS_CLIPPLANEENABLE",(function(){return de})),r.d(t,"RS_POINTSIZE",(function(){return ye})),r.d(t,"RS_POINTSIZE_MIN",(function(){return me})),r.d(t,"RS_POINTSPRITEENABLE",(function(){return be})),r.d(t,"RS_POINTSCALEENABLE",(function(){return he})),r.d(t,"RS_POINTSCALE_A",(function(){return ve})),r.d(t,"RS_POINTSCALE_B",(function(){return ge})),r.d(t,"RS_POINTSCALE_C",(function(){return we})),r.d(t,"RS_MULTISAMPLEANTIALIAS",(function(){return xe})),r.d(t,"RS_MULTISAMPLEMASK",(function(){return _e})),r.d(t,"RS_PATCHEDGESTYLE",(function(){return ze})),r.d(t,"RS_DEBUGMONITORTOKEN",(function(){return Se})),r.d(t,"RS_POINTSIZE_MAX",(function(){return je})),r.d(t,"RS_INDEXEDVERTEXBLENDENABLE",(function(){return Ee})),r.d(t,"RS_COLORWRITEENABLE",(function(){return Te})),r.d(t,"RS_TWEENFACTOR",(function(){return Oe})),r.d(t,"RS_BLENDOP",(function(){return Re})),r.d(t,"RS_POSITIONDEGREE",(function(){return Pe})),r.d(t,"RS_NORMALDEGREE",(function(){return De})),r.d(t,"RS_SCISSORTESTENABLE",(function(){return Ae})),r.d(t,"RS_SLOPESCALEDEPTHBIAS",(function(){return Me})),r.d(t,"RS_ANTIALIASEDLINEENABLE",(function(){return Ce})),r.d(t,"RS_TWOSIDEDSTENCILMODE",(function(){return ke})),r.d(t,"RS_CCW_STENCILFAIL",(function(){return Ie})),r.d(t,"RS_CCW_STENCILZFAIL",(function(){return Le})),r.d(t,"RS_CCW_STENCILPASS",(function(){return Ge})),r.d(t,"RS_CCW_STENCILFUNC",(function(){return Fe})),r.d(t,"RS_COLORWRITEENABLE1",(function(){return Be})),r.d(t,"RS_COLORWRITEENABLE2",(function(){return Ne})),r.d(t,"RS_COLORWRITEENABLE3",(function(){return Ue})),r.d(t,"RS_BLENDFACTOR",(function(){return Ve})),r.d(t,"RS_SRGBWRITEENABLE",(function(){return qe})),r.d(t,"RS_DEPTHBIAS",(function(){return He})),r.d(t,"RS_SEPARATEALPHABLENDENABLE",(function(){return We})),r.d(t,"RS_SRCBLENDALPHA",(function(){return Xe})),r.d(t,"RS_DESTBLENDALPHA",(function(){return Ke})),r.d(t,"RS_BLENDOPALPHA",(function(){return Ye})),r.d(t,"CULL_NONE",(function(){return Qe})),r.d(t,"CULL_CW",(function(){return Ze})),r.d(t,"CULL_CCW",(function(){return Je})),r.d(t,"CMP_NEVER",(function(){return $e})),r.d(t,"CMP_LESS",(function(){return et})),r.d(t,"CMP_EQUAL",(function(){return tt})),r.d(t,"CMP_LEQUAL",(function(){return rt})),r.d(t,"CMP_GREATER",(function(){return nt})),r.d(t,"CMP_NOTEQUAL",(function(){return it})),r.d(t,"CMP_GREATEREQUAL",(function(){return ot})),r.d(t,"CMP_ALWAYS",(function(){return at})),r.d(t,"BLEND_ZERO",(function(){return ut})),r.d(t,"BLEND_ONE",(function(){return ct})),r.d(t,"BLEND_SRCCOLOR",(function(){return lt})),r.d(t,"BLEND_INVSRCCOLOR",(function(){return st})),r.d(t,"BLEND_SRCALPHA",(function(){return ft})),r.d(t,"BLEND_INVSRCALPHA",(function(){return pt})),r.d(t,"BLEND_DESTALPHA",(function(){return dt})),r.d(t,"BLEND_INVDESTALPHA",(function(){return yt})),r.d(t,"BLEND_DESTCOLOR",(function(){return mt})),r.d(t,"BLEND_INVDESTCOLOR",(function(){return bt})),r.d(t,"BLEND_SRCALPHASAT",(function(){return ht})),r.d(t,"BLEND_BOTHSRCALPHA",(function(){return vt})),r.d(t,"BLEND_BOTHINVSRCALPHA",(function(){return gt})),r.d(t,"BLEND_BLENDFACTOR",(function(){return wt})),r.d(t,"BLEND_INVBLENDFACTOR",(function(){return xt})),r.d(t,"BLENDOP_ADD",(function(){return _t})),r.d(t,"BLENDOP_SUBTRACT",(function(){return zt})),r.d(t,"BLENDOP_REVSUBTRACT",(function(){return St})),r.d(t,"BLENDOP_MIN",(function(){return jt})),r.d(t,"BLENDOP_MAX",(function(){return Et})),r.d(t,"BlendTable",(function(){return Tt})),r.d(t,"WrapMode",(function(){return Ot})),r.d(t,"FilterMode",(function(){return Rt})),r.d(t,"MipFilterMode",(function(){return Pt})),r.d(t,"TEX_2D",(function(){return Dt})),r.d(t,"TEX_VOLUME",(function(){return At})),r.d(t,"TEX_CUBE_MAP",(function(){return Mt})),r.d(t,"TEX_PROJECTION",(function(){return Ct})),r.d(t,"TEX_SHADOW_MAP",(function(){return kt})),r.d(t,"TexTypeToGLTexture",(function(){return It})),r.d(t,"TexTypeToString",(function(){return Lt}));var n,i,o=r("./global/constant/gl.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=-1,c=0,l=1,s=2,f=3,p=4,d=5,y=6,m=7,b=7,h=8,v=9,g=14,w=15,x=16,_=19,z=20,S=22,j=23,E=24,T=25,O=26,R=27,P=28,D=29,A=34,M=35,C=36,k=37,I=38,L=48,G=52,F=53,B=54,N=55,U=56,V=57,q=58,H=59,W=60,X=128,K=129,Y=130,Q=131,Z=132,J=133,$=134,ee=135,te=136,re=137,ne=139,ie=140,oe=141,ae=142,ue=143,ce=145,le=146,se=147,fe=148,pe=151,de=152,ye=154,me=155,be=156,he=157,ve=158,ge=159,we=160,xe=161,_e=162,ze=163,Se=165,je=166,Ee=167,Te=168,Oe=170,Re=171,Pe=172,De=173,Ae=174,Me=175,Ce=176,ke=185,Ie=186,Le=187,Ge=188,Fe=189,Be=190,Ne=191,Ue=192,Ve=193,qe=194,He=195,We=206,Xe=207,Ke=208,Ye=209,Qe=1,Ze=2,Je=3,$e=1,et=2,tt=3,rt=4,nt=5,it=6,ot=7,at=8,ut=1,ct=2,lt=3,st=4,ft=5,pt=6,dt=7,yt=8,mt=9,bt=10,ht=11,vt=12,gt=13,wt=14,xt=15,_t=1,zt=2,St=3,jt=4,Et=5,Tt=[-1,o.GL_ZERO,o.GL_ONE,o.GL_SRC_COLOR,o.GL_ONE_MINUS_SRC_COLOR,o.GL_SRC_ALPHA,o.GL_ONE_MINUS_SRC_ALPHA,o.GL_DST_ALPHA,o.GL_ONE_MINUS_DST_ALPHA,o.GL_DST_COLOR,o.GL_ONE_MINUS_DST_COLOR,o.GL_SRC_ALPHA_SATURATE,-1,-1,o.GL_CONSTANT_COLOR,o.GL_ONE_MINUS_CONSTANT_COLOR],Ot={REPEAT:1,MIRRORED_REPEAT:2,CLAMP_TO_EDGE:3,CLAMP_TO_BORDER:4},Rt={NEAREST:1,LINEAR:2,LINEAR_ANISOTROPY:3},Pt={NONE:0,NEAREST:1,LINEAR:2,LINEAR_ANISOTROPY:3},Dt=2,At=3,Mt=4,Ct=5,kt=5,It=(a(n={},Dt,o.GL_TEXTURE_2D),a(n,At,o.GL_TEXTURE_2D),a(n,Mt,o.GL_TEXTURE_CUBE_MAP),a(n,Ct,o.GL_TEXTURE_2D),n),Lt=(a(i={},Dt,"2D"),a(i,At,"VOLUME"),a(i,Mt,"CUBE_MAP"),a(i,Ct,"SHADOW_MAP"),i)},"./global/constant/dds.js":function(e,t,r){"use strict";var n,i,o;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"DDS_MAGIC",(function(){return u})),r.d(t,"DDSD_CAPS",(function(){return c})),r.d(t,"DDSD_HEIGHT",(function(){return l})),r.d(t,"DDSD_WIDTH",(function(){return s})),r.d(t,"DDSD_PITCH",(function(){return f})),r.d(t,"DDSD_PIXELFORMAT",(function(){return p})),r.d(t,"DDSD_MIPMAPCOUNT",(function(){return d})),r.d(t,"DDSD_LINEARSIZE",(function(){return y})),r.d(t,"DDSD_DEPTH",(function(){return m})),r.d(t,"DDSCAPS_COMPLEX",(function(){return b})),r.d(t,"DDSCAPS_MIPMAP",(function(){return h})),r.d(t,"DDSCAPS_TEXTURE",(function(){return v})),r.d(t,"DDSCAPS2_CUBEMAP",(function(){return g})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEX",(function(){return w})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEX",(function(){return x})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEY",(function(){return _})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEY",(function(){return z})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEZ",(function(){return S})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEZ",(function(){return j})),r.d(t,"DDSCAPS2_VOLUME",(function(){return E})),r.d(t,"DDPF_ALPHAPIXELS",(function(){return T})),r.d(t,"DDPF_ALPHA",(function(){return O})),r.d(t,"DDPF_FOURCC",(function(){return R})),r.d(t,"DDPF_RGB",(function(){return P})),r.d(t,"DDPF_YUV",(function(){return D})),r.d(t,"DDPF_LUMINANCE",(function(){return A})),r.d(t,"DDS_HEADER_LENGTH_INT",(function(){return M})),r.d(t,"DDS_HEADER_OFFSET_MAGIC",(function(){return C})),r.d(t,"DDS_HEADER_OFFSET_SIZE",(function(){return k})),r.d(t,"DDS_HEADER_OFFSET_FLAGS",(function(){return I})),r.d(t,"DDS_HEADER_OFFSET_HEIGHT",(function(){return L})),r.d(t,"DDS_HEADER_OFFSET_WIDTH",(function(){return G})),r.d(t,"DDS_HEADER_OFFSET_MIPMAP_COUNT",(function(){return F})),r.d(t,"DDS_HEADER_OFFSET_PF_FLAGS",(function(){return B})),r.d(t,"DDS_HEADER_OFFSET_PF_FOURCC",(function(){return N})),r.d(t,"DDS_HEADER_OFFSET_RGB_BPP",(function(){return U})),r.d(t,"DDS_HEADER_OFFSET_R_MASK",(function(){return V})),r.d(t,"DDS_HEADER_OFFSET_G_MASK",(function(){return q})),r.d(t,"DDS_HEADER_OFFSET_B_MASK",(function(){return H})),r.d(t,"DDS_HEADER_OFFSET_A_MASK",(function(){return W})),r.d(t,"DDS_HEADER_OFFSET_CAPS1",(function(){return X})),r.d(t,"DDS_HEADER_OFFSET_CAPS2",(function(){return K})),r.d(t,"DDS_HEADER_OFFSET_CAPS3",(function(){return Y})),r.d(t,"DDS_HEADER_OFFSET_CAPS4",(function(){return Q})),r.d(t,"DDS_HEADER_OFFSET_DXGI_FORMAT",(function(){return Z})),r.d(t,"FOURCC_ATI1",(function(){return J})),r.d(t,"FOURCC_ATI2",(function(){return $})),r.d(t,"FOURCC_ETC1",(function(){return ee})),r.d(t,"FOURCC_DXT1",(function(){return te})),r.d(t,"FOURCC_DXT5",(function(){return re})),r.d(t,"FOURCC_DXT3",(function(){return ne})),r.d(t,"FOURCC_DXT10",(function(){return ie})),r.d(t,"FOURCC_D3DFMT_R16G16B16A16F",(function(){return oe})),r.d(t,"FOURCC_D3DFMT_R32G32B32A32F",(function(){return ae})),r.d(t,"DXGI_FORMAT_R16G16B16A16_FLOAT",(function(){return ue})),r.d(t,"DXGI_FORMAT_R32G32B32A32_FLOAT",(function(){return ce})),r.d(t,"DXGI_FORMAT_B8G8R8X8_UNORM",(function(){return le})),r.d(t,"DDS_DX10_FIELDS",(function(){return se})),r.d(t,"DDS_MAGIC_SIZE",(function(){return fe})),r.d(t,"DDS_HEADER_SIZE",(function(){return pe})),r.d(t,"DDS_HEADER_PF_SIZE",(function(){return de})),r.d(t,"DDS_HEADER_DX10_SIZE",(function(){return ye})),r.d(t,"D3D10_RESOURCE_DIMENSION",(function(){return me})),r.d(t,"DXGI_FORMAT",(function(){return be})),r.d(t,"INTERNAL_FORMATS",(function(){return he})),r.d(t,"FOURCC_TO_FORMAT",(function(){return ve})),r.d(t,"INTERNAL_FORMAT_TO_BYTES_PER_PIXEL",(function(){return ge})),r.d(t,"DXGI_TO_FORMAT",(function(){return we})),r.d(t,"formatToExtension",(function(){return xe}));var u=542327876,c=1,l=2,s=4,f=8,p=4096,d=131072,y=524288,m=8388608,b=8,h=4194304,v=4096,g=512,w=1024,x=2048,_=4096,z=8192,S=16384,j=32768,E=2097152,T=1,O=2,R=4,P=64,D=512,A=131072,M=31,C=0,k=1,I=2,L=3,G=4,F=7,B=20,N=21,U=22,V=23,q=24,H=25,W=26,X=27,K=28,Y=29,Q=30,Z=32,J=826889281,$=843666497,ee=826496069,te=827611204,re=894720068,ne=861165636,ie=827611204,oe=113,ae=116,ue=10,ce=2,le=88,se={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},fe=4,pe=124,de=32,ye=20,me={DDS_DIMENSION_TEXTURE1D:2,DDS_DIMENSION_TEXTURE2D:3,DDS_DIMENSION_TEXTURE3D:6},be=["DXGI_FORMAT_UNKNOWN","DXGI_FORMAT_R32G32B32A32_TYPELESS","DXGI_FORMAT_R32G32B32A32_FLOAT","DXGI_FORMAT_R32G32B32A32_UINT","DXGI_FORMAT_R32G32B32A32_SINT","DXGI_FORMAT_R32G32B32_TYPELESS","DXGI_FORMAT_R32G32B32_FLOAT","DXGI_FORMAT_R32G32B32_UINT","DXGI_FORMAT_R32G32B32_SINT","DXGI_FORMAT_R16G16B16A16_TYPELESS","DXGI_FORMAT_R16G16B16A16_FLOAT","DXGI_FORMAT_R16G16B16A16_UNORM","DXGI_FORMAT_R16G16B16A16_UINT","DXGI_FORMAT_R16G16B16A16_SNORM","DXGI_FORMAT_R16G16B16A16_SINT","DXGI_FORMAT_R32G32_TYPELESS","DXGI_FORMAT_R32G32_FLOAT","DXGI_FORMAT_R32G32_UINT","DXGI_FORMAT_R32G32_SINT","DXGI_FORMAT_R32G8X24_TYPELESS","DXGI_FORMAT_D32_FLOAT_S8X24_UINT","DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS","DXGI_FORMAT_X32_TYPELESS_G8X24_UINT","DXGI_FORMAT_R10G10B10A2_TYPELESS","DXGI_FORMAT_R10G10B10A2_UNORM","DXGI_FORMAT_R10G10B10A2_UINT","DXGI_FORMAT_R11G11B10_FLOAT","DXGI_FORMAT_R8G8B8A8_TYPELESS","DXGI_FORMAT_R8G8B8A8_UNORM","DXGI_FORMAT_R8G8B8A8_UNORM_SRGB","DXGI_FORMAT_R8G8B8A8_UINT","DXGI_FORMAT_R8G8B8A8_SNORM","DXGI_FORMAT_R8G8B8A8_SINT","DXGI_FORMAT_R16G16_TYPELESS","DXGI_FORMAT_R16G16_FLOAT","DXGI_FORMAT_R16G16_UNORM","DXGI_FORMAT_R16G16_UINT","DXGI_FORMAT_R16G16_SNORM","DXGI_FORMAT_R16G16_SINT","DXGI_FORMAT_R32_TYPELESS","DXGI_FORMAT_D32_FLOAT","DXGI_FORMAT_R32_FLOAT","DXGI_FORMAT_R32_UINT","DXGI_FORMAT_R32_SINT","DXGI_FORMAT_R24G8_TYPELESS","DXGI_FORMAT_D24_UNORM_S8_UINT","DXGI_FORMAT_R24_UNORM_X8_TYPELESS","DXGI_FORMAT_X24_TYPELESS_G8_UINT","DXGI_FORMAT_R8G8_TYPELESS","DXGI_FORMAT_R8G8_UNORM","DXGI_FORMAT_R8G8_UINT","DXGI_FORMAT_R8G8_SNORM","DXGI_FORMAT_R8G8_SINT","DXGI_FORMAT_R16_TYPELESS","DXGI_FORMAT_R16_FLOAT","DXGI_FORMAT_D16_UNORM","DXGI_FORMAT_R16_UNORM","DXGI_FORMAT_R16_UINT","DXGI_FORMAT_R16_SNORM","DXGI_FORMAT_R16_SINT","DXGI_FORMAT_R8_TYPELESS","DXGI_FORMAT_R8_UNORM","DXGI_FORMAT_R8_UINT","DXGI_FORMAT_R8_SNORM","DXGI_FORMAT_R8_SINT","DXGI_FORMAT_A8_UNORM","DXGI_FORMAT_R1_UNORM","DXGI_FORMAT_R9G9B9E5_SHAREDEXP","DXGI_FORMAT_R8G8_B8G8_UNORM","DXGI_FORMAT_G8R8_G8B8_UNORM","DXGI_FORMAT_BC1_TYPELESS","DXGI_FORMAT_BC1_UNORM","DXGI_FORMAT_BC1_UNORM_SRGB","DXGI_FORMAT_BC2_TYPELESS","DXGI_FORMAT_BC2_UNORM","DXGI_FORMAT_BC2_UNORM_SRGB","DXGI_FORMAT_BC3_TYPELESS","DXGI_FORMAT_BC3_UNORM","DXGI_FORMAT_BC3_UNORM_SRGB","DXGI_FORMAT_BC4_TYPELESS","DXGI_FORMAT_BC4_UNORM","DXGI_FORMAT_BC4_SNORM","DXGI_FORMAT_BC5_TYPELESS","DXGI_FORMAT_BC5_UNORM","DXGI_FORMAT_BC5_SNORM","DXGI_FORMAT_B5G6R5_UNORM","DXGI_FORMAT_B5G5R5A1_UNORM","DXGI_FORMAT_B8G8R8A8_UNORM","DXGI_FORMAT_B8G8R8X8_UNORM","DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM","DXGI_FORMAT_B8G8R8A8_TYPELESS","DXGI_FORMAT_B8G8R8A8_UNORM_SRGB","DXGI_FORMAT_B8G8R8X8_TYPELESS","DXGI_FORMAT_B8G8R8X8_UNORM_SRGB","DXGI_FORMAT_BC6H_TYPELESS","DXGI_FORMAT_BC6H_UF16","DXGI_FORMAT_BC6H_SF16","DXGI_FORMAT_BC7_TYPELESS","DXGI_FORMAT_BC7_UNORM","DXGI_FORMAT_BC7_UNORM_SRGB","DXGI_FORMAT_AYUV","DXGI_FORMAT_Y410","DXGI_FORMAT_Y416","DXGI_FORMAT_NV12","DXGI_FORMAT_P010","DXGI_FORMAT_P016","DXGI_FORMAT_420_OPAQUE","DXGI_FORMAT_YUY2","DXGI_FORMAT_Y210","DXGI_FORMAT_Y216","DXGI_FORMAT_NV11","DXGI_FORMAT_AI44","DXGI_FORMAT_IA44","DXGI_FORMAT_P8","DXGI_FORMAT_A8P8","DXGI_FORMAT_B4G4R4A4_UNORM","DXGI_FORMAT_P208","DXGI_FORMAT_V208","DXGI_FORMAT_V408","DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE","DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE","DXGI_FORMAT_FORCE_UINT"],he={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798},ve=(a(n={},te,he.COMPRESSED_RGBA_S3TC_DXT1_EXT),a(n,ne,he.COMPRESSED_RGBA_S3TC_DXT3_EXT),a(n,re,he.COMPRESSED_RGBA_S3TC_DXT5_EXT),n),ge=(a(i={},he.COMPRESSED_RGB_S3TC_DXT1_EXT,.5),a(i,he.COMPRESSED_RGBA_S3TC_DXT1_EXT,.5),a(i,he.COMPRESSED_RGBA_S3TC_DXT3_EXT,1),a(i,he.COMPRESSED_RGBA_S3TC_DXT5_EXT,1),a(i,he.COMPRESSED_SRGB_S3TC_DXT1_EXT,.5),a(i,he.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,.5),a(i,he.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,1),a(i,he.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,1),a(i,he.COMPRESSED_R11_EAC,.5),a(i,he.COMPRESSED_SIGNED_R11_EAC,.5),a(i,he.COMPRESSED_RG11_EAC,1),a(i,he.COMPRESSED_SIGNED_RG11_EAC,1),a(i,he.COMPRESSED_RGB8_ETC2,.5),a(i,he.COMPRESSED_RGBA8_ETC2_EAC,1),a(i,he.COMPRESSED_SRGB8_ETC2,.5),a(i,he.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,1),a(i,he.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,.5),a(i,he.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,.5),a(i,he.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,.5),a(i,he.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,.5),a(i,he.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,.25),a(i,he.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,.25),a(i,he.COMPRESSED_RGB_ETC1_WEBGL,.5),a(i,he.COMPRESSED_RGB_ATC_WEBGL,.5),a(i,he.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,1),a(i,he.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL,1),i),we=(a(o={},be.indexOf("DXGI_FORMAT_BC1_TYPELESS"),he.COMPRESSED_RGBA_S3TC_DXT1_EXT),a(o,be.indexOf("DXGI_FORMAT_BC1_UNORM"),he.COMPRESSED_RGBA_S3TC_DXT1_EXT),a(o,be.indexOf("DXGI_FORMAT_BC2_TYPELESS"),he.COMPRESSED_RGBA_S3TC_DXT3_EXT),a(o,be.indexOf("DXGI_FORMAT_BC2_UNORM"),he.COMPRESSED_RGBA_S3TC_DXT3_EXT),a(o,be.indexOf("DXGI_FORMAT_BC3_TYPELESS"),he.COMPRESSED_RGBA_S3TC_DXT5_EXT),a(o,be.indexOf("DXGI_FORMAT_BC3_UNORM"),he.COMPRESSED_RGBA_S3TC_DXT5_EXT),a(o,be.indexOf("DXGI_FORMAT_BC1_UNORM_SRGB"),he.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT),a(o,be.indexOf("DXGI_FORMAT_BC2_UNORM_SRGB"),he.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT),a(o,be.indexOf("DXGI_FORMAT_BC3_UNORM_SRGB"),he.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT),o);function xe(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid compressed format")}},"./global/constant/gl.js":function(e,t,r){"use strict";var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"GL_COLOR_BUFFER_BIT",(function(){return o})),r.d(t,"GL_DEPTH_BUFFER_BIT",(function(){return a})),r.d(t,"GL_STENCIL_BUFFER_BIT",(function(){return u})),r.d(t,"GL_TEXTURE_2D",(function(){return c})),r.d(t,"GL_TEXTURE_CUBE_MAP",(function(){return l})),r.d(t,"GL_TEXTURE_3D",(function(){return s})),r.d(t,"GL_TEXTURE_MAG_FILTER",(function(){return f})),r.d(t,"GL_TEXTURE_MIN_FILTER",(function(){return p})),r.d(t,"GL_TEXTURE_WRAP_S",(function(){return d})),r.d(t,"GL_TEXTURE_WRAP_T",(function(){return y})),r.d(t,"GL_BYTE",(function(){return m})),r.d(t,"GL_UNSIGNED_BYTE",(function(){return b})),r.d(t,"GL_SHORT",(function(){return h})),r.d(t,"GL_UNSIGNED_SHORT",(function(){return v})),r.d(t,"GL_INT",(function(){return g})),r.d(t,"GL_UNSIGNED_INT",(function(){return w})),r.d(t,"GL_FLOAT",(function(){return x})),r.d(t,"GL_HALF_FLOAT_OES",(function(){return _})),r.d(t,"GL_HALF_FLOAT",(function(){return z})),r.d(t,"GL_DEPTH_COMPONENT16",(function(){return S})),r.d(t,"GL_DEPTH_COMPONENT24",(function(){return j})),r.d(t,"GL_DEPTH_COMPONENT32F",(function(){return E})),r.d(t,"GL_FLOAT_VEC2",(function(){return T})),r.d(t,"GL_FLOAT_VEC3",(function(){return O})),r.d(t,"GL_FLOAT_VEC4",(function(){return R})),r.d(t,"GL_INT_VEC2",(function(){return P})),r.d(t,"GL_INT_VEC3",(function(){return D})),r.d(t,"GL_INT_VEC4",(function(){return A})),r.d(t,"GL_BOOL",(function(){return M})),r.d(t,"GL_BOOL_VEC2",(function(){return C})),r.d(t,"GL_BOOL_VEC3",(function(){return k})),r.d(t,"GL_BOOL_VEC4",(function(){return I})),r.d(t,"GL_FLOAT_MAT2",(function(){return L})),r.d(t,"GL_FLOAT_MAT3",(function(){return G})),r.d(t,"GL_FLOAT_MAT4",(function(){return F})),r.d(t,"GL_TYPE_LENGTH",(function(){return B})),r.d(t,"GL_SAMPLER_2D",(function(){return N})),r.d(t,"GL_SAMPLER_3D",(function(){return U})),r.d(t,"GL_SAMPLER_CUBE",(function(){return V})),r.d(t,"GL_DEPTH_COMPONENT",(function(){return q})),r.d(t,"GL_ALPHA",(function(){return H})),r.d(t,"GL_RGB",(function(){return W})),r.d(t,"GL_RGBA",(function(){return X})),r.d(t,"GL_LUMINANCE",(function(){return K})),r.d(t,"GL_LUMINANCE_ALPHA",(function(){return Y})),r.d(t,"GL_DEPTH_STENCIL",(function(){return Q})),r.d(t,"GL_UNSIGNED_INT_24_8_WEBGL",(function(){return Z})),r.d(t,"GL_R8",(function(){return J})),r.d(t,"GL_R16F",(function(){return $})),r.d(t,"GL_R32F",(function(){return ee})),r.d(t,"GL_R8UI",(function(){return te})),r.d(t,"GL_RG8",(function(){return re})),r.d(t,"GL_RG16F",(function(){return ne})),r.d(t,"GL_RG32F",(function(){return ie})),r.d(t,"GL_RGB8",(function(){return oe})),r.d(t,"GL_SRGB8",(function(){return ae})),r.d(t,"GL_RGB565",(function(){return ue})),r.d(t,"GL_R11F_G11F_B10F",(function(){return ce})),r.d(t,"GL_RGB9_E5",(function(){return le})),r.d(t,"GL_RGB16F",(function(){return se})),r.d(t,"GL_RGB32F",(function(){return fe})),r.d(t,"GL_RGB8UI",(function(){return pe})),r.d(t,"GL_RGBA8",(function(){return de})),r.d(t,"GL_RGB5_A1",(function(){return ye})),r.d(t,"GL_RGBA16F",(function(){return me})),r.d(t,"GL_RGBA32F",(function(){return be})),r.d(t,"GL_RGBA8UI",(function(){return he})),r.d(t,"GL_RGBA16I",(function(){return ve})),r.d(t,"GL_RGBA16UI",(function(){return ge})),r.d(t,"GL_RGBA32I",(function(){return we})),r.d(t,"GL_RGBA32UI",(function(){return xe})),r.d(t,"GL_NEAREST",(function(){return _e})),r.d(t,"GL_LINEAR",(function(){return ze})),r.d(t,"GL_NEAREST_MIPMAP_NEAREST",(function(){return Se})),r.d(t,"GL_LINEAR_MIPMAP_NEAREST",(function(){return je})),r.d(t,"GL_NEAREST_MIPMAP_LINEAR",(function(){return Ee})),r.d(t,"GL_LINEAR_MIPMAP_LINEAR",(function(){return Te})),r.d(t,"GL_REPEAT",(function(){return Oe})),r.d(t,"GL_CLAMP_TO_EDGE",(function(){return Re})),r.d(t,"GL_MIRRORED_REPEAT",(function(){return Pe})),r.d(t,"GL_ZERO",(function(){return De})),r.d(t,"GL_ONE",(function(){return Ae})),r.d(t,"GL_SRC_COLOR",(function(){return Me})),r.d(t,"GL_ONE_MINUS_SRC_COLOR",(function(){return Ce})),r.d(t,"GL_SRC_ALPHA",(function(){return ke})),r.d(t,"GL_ONE_MINUS_SRC_ALPHA",(function(){return Ie})),r.d(t,"GL_DST_ALPHA",(function(){return Le})),r.d(t,"GL_ONE_MINUS_DST_ALPHA",(function(){return Ge})),r.d(t,"GL_DST_COLOR",(function(){return Fe})),r.d(t,"GL_ONE_MINUS_DST_COLOR",(function(){return Be})),r.d(t,"GL_SRC_ALPHA_SATURATE",(function(){return Ne})),r.d(t,"GL_CONSTANT_COLOR",(function(){return Ue})),r.d(t,"GL_ONE_MINUS_CONSTANT_COLOR",(function(){return Ve})),r.d(t,"GL_CONSTANT_ALPHA",(function(){return qe})),r.d(t,"GL_ONE_MINUS_CONSTANT_ALPHA",(function(){return He})),r.d(t,"GL_VERTEX_SHADER",(function(){return We})),r.d(t,"GL_FRAGMENT_SHADER",(function(){return Xe})),r.d(t,"GL_FRONT",(function(){return Ke})),r.d(t,"GL_BACK",(function(){return Ye})),r.d(t,"GL_FRONT_AND_BACK",(function(){return Qe})),r.d(t,"GL_NEVER",(function(){return Ze})),r.d(t,"GL_LESS",(function(){return Je})),r.d(t,"GL_EQUAL",(function(){return $e})),r.d(t,"GL_LEQUAL",(function(){return et})),r.d(t,"GL_GREATER",(function(){return tt})),r.d(t,"GL_NOTEQUAL",(function(){return rt})),r.d(t,"GL_GEQUAL",(function(){return nt})),r.d(t,"GL_ALWAYS",(function(){return it})),r.d(t,"GL_KEEP",(function(){return ot})),r.d(t,"GL_REPLACE",(function(){return at})),r.d(t,"GL_INCR",(function(){return ut})),r.d(t,"GL_DECR",(function(){return ct})),r.d(t,"GL_INCR_WRAP",(function(){return lt})),r.d(t,"GL_DECR_WRAP",(function(){return st})),r.d(t,"GL_INVERT",(function(){return ft})),r.d(t,"GL_STREAM_DRAW",(function(){return pt})),r.d(t,"GL_STATIC_DRAW",(function(){return dt})),r.d(t,"GL_DYNAMIC_DRAW",(function(){return yt})),r.d(t,"GL_ARRAY_BUFFER",(function(){return mt})),r.d(t,"GL_ELEMENT_ARRAY_BUFFER",(function(){return bt})),r.d(t,"GL_POINTS",(function(){return ht})),r.d(t,"GL_LINES",(function(){return vt})),r.d(t,"GL_LINE_LOOP",(function(){return gt})),r.d(t,"GL_LINE_STRIP",(function(){return wt})),r.d(t,"GL_TRIANGLES",(function(){return xt})),r.d(t,"GL_TRIANGLE_STRIP",(function(){return _t})),r.d(t,"GL_TRIANGLE_FAN",(function(){return zt})),r.d(t,"GL_CW",(function(){return St})),r.d(t,"GL_CCW",(function(){return jt})),r.d(t,"GL_CULL_FACE",(function(){return Et})),r.d(t,"GL_DEPTH_TEST",(function(){return Tt})),r.d(t,"GL_BLEND",(function(){return Ot}));var o=16384,a=256,u=1024,c=3553,l=34067,s=32879,f=10240,p=10241,d=10242,y=10243,m=5120,b=5121,h=5122,v=5123,g=5124,w=5125,x=5126,_=36193,z=5131,S=33189,j=33190,E=36012,T=35664,O=35665,R=35666,P=35667,D=35668,A=35669,M=35670,C=35671,k=35672,I=35673,L=35674,G=35675,F=35676,B=(i(n={},x,1),i(n,g,1),i(n,m,1),i(n,M,1),i(n,T,2),i(n,P,2),i(n,C,2),i(n,O,3),i(n,D,3),i(n,k,3),i(n,R,4),i(n,A,4),i(n,I,4),i(n,G,9),i(n,F,16),n),N=35678,U=35679,V=35680,q=6402,H=6406,W=6407,X=6408,K=6409,Y=6410,Q=34041,Z=34042,J=33321,$=33325,ee=33326,te=33330,re=33323,ne=33327,ie=33328,oe=32849,ae=35905,ue=36194,ce=35898,le=35901,se=34843,fe=34837,pe=36221,de=32856,ye=32855,me=34842,be=34836,he=36220,ve=36232,ge=36214,we=36226,xe=36208,_e=9728,ze=9729,Se=9984,je=9985,Ee=9986,Te=9987,Oe=10497,Re=33071,Pe=33648,De=0,Ae=1,Me=768,Ce=769,ke=770,Ie=771,Le=772,Ge=773,Fe=774,Be=775,Ne=776,Ue=32769,Ve=32770,qe=32771,He=32772,We=35633,Xe=35632,Ke=1028,Ye=1029,Qe=1032,Ze=512,Je=513,$e=514,et=515,tt=516,rt=517,nt=518,it=519,ot=7680,at=7681,ut=7682,ct=7683,lt=34055,st=34056,ft=5386,pt=35040,dt=35044,yt=35048,mt=34962,bt=34963,ht=0,vt=1,gt=2,wt=3,xt=4,_t=5,zt=6,St=2304,jt=2305,Et=2884,Tt=2929,Ot=3042},"./global/constant/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/constant/d3d.js");r.d(t,"RM_ANY",(function(){return n.RM_ANY})),r.d(t,"RM_OPAQUE",(function(){return n.RM_OPAQUE})),r.d(t,"RM_DECAL",(function(){return n.RM_DECAL})),r.d(t,"RM_TRANSPARENT",(function(){return n.RM_TRANSPARENT})),r.d(t,"RM_ADDITIVE",(function(){return n.RM_ADDITIVE})),r.d(t,"RM_DEPTH",(function(){return n.RM_DEPTH})),r.d(t,"RM_FULLSCREEN",(function(){return n.RM_FULLSCREEN})),r.d(t,"RM_PICKABLE",(function(){return n.RM_PICKABLE})),r.d(t,"RM_DISTORTION",(function(){return n.RM_DISTORTION})),r.d(t,"RS_ZENABLE",(function(){return n.RS_ZENABLE})),r.d(t,"RS_FILLMODE",(function(){return n.RS_FILLMODE})),r.d(t,"RS_SHADEMODE",(function(){return n.RS_SHADEMODE})),r.d(t,"RS_ZWRITEENABLE",(function(){return n.RS_ZWRITEENABLE})),r.d(t,"RS_ALPHATESTENABLE",(function(){return n.RS_ALPHATESTENABLE})),r.d(t,"RS_LASTPIXEL",(function(){return n.RS_LASTPIXEL})),r.d(t,"RS_SRCBLEND",(function(){return n.RS_SRCBLEND})),r.d(t,"RS_DESTBLEND",(function(){return n.RS_DESTBLEND})),r.d(t,"RS_CULLMODE",(function(){return n.RS_CULLMODE})),r.d(t,"RS_ZFUNC",(function(){return n.RS_ZFUNC})),r.d(t,"RS_ALPHAREF",(function(){return n.RS_ALPHAREF})),r.d(t,"RS_ALPHAFUNC",(function(){return n.RS_ALPHAFUNC})),r.d(t,"RS_DITHERENABLE",(function(){return n.RS_DITHERENABLE})),r.d(t,"RS_ALPHABLENDENABLE",(function(){return n.RS_ALPHABLENDENABLE})),r.d(t,"RS_FOGENABLE",(function(){return n.RS_FOGENABLE})),r.d(t,"RS_SPECULARENABLE",(function(){return n.RS_SPECULARENABLE})),r.d(t,"RS_FOGCOLOR",(function(){return n.RS_FOGCOLOR})),r.d(t,"RS_FOGTABLEMODE",(function(){return n.RS_FOGTABLEMODE})),r.d(t,"RS_FOGSTART",(function(){return n.RS_FOGSTART})),r.d(t,"RS_FOGEND",(function(){return n.RS_FOGEND})),r.d(t,"RS_FOGDENSITY",(function(){return n.RS_FOGDENSITY})),r.d(t,"RS_RANGEFOGENABLE",(function(){return n.RS_RANGEFOGENABLE})),r.d(t,"RS_STENCILENABLE",(function(){return n.RS_STENCILENABLE})),r.d(t,"RS_STENCILFAIL",(function(){return n.RS_STENCILFAIL})),r.d(t,"RS_STENCILZFAIL",(function(){return n.RS_STENCILZFAIL})),r.d(t,"RS_STENCILPASS",(function(){return n.RS_STENCILPASS})),r.d(t,"RS_STENCILFUNC",(function(){return n.RS_STENCILFUNC})),r.d(t,"RS_STENCILREF",(function(){return n.RS_STENCILREF})),r.d(t,"RS_STENCILMASK",(function(){return n.RS_STENCILMASK})),r.d(t,"RS_STENCILWRITEMASK",(function(){return n.RS_STENCILWRITEMASK})),r.d(t,"RS_TEXTUREFACTOR",(function(){return n.RS_TEXTUREFACTOR})),r.d(t,"RS_WRAP0",(function(){return n.RS_WRAP0})),r.d(t,"RS_WRAP1",(function(){return n.RS_WRAP1})),r.d(t,"RS_WRAP2",(function(){return n.RS_WRAP2})),r.d(t,"RS_WRAP3",(function(){return n.RS_WRAP3})),r.d(t,"RS_WRAP4",(function(){return n.RS_WRAP4})),r.d(t,"RS_WRAP5",(function(){return n.RS_WRAP5})),r.d(t,"RS_WRAP6",(function(){return n.RS_WRAP6})),r.d(t,"RS_WRAP7",(function(){return n.RS_WRAP7})),r.d(t,"RS_CLIPPING",(function(){return n.RS_CLIPPING})),r.d(t,"RS_LIGHTING",(function(){return n.RS_LIGHTING})),r.d(t,"RS_AMBIENT",(function(){return n.RS_AMBIENT})),r.d(t,"RS_FOGVERTEXMODE",(function(){return n.RS_FOGVERTEXMODE})),r.d(t,"RS_COLORVERTEX",(function(){return n.RS_COLORVERTEX})),r.d(t,"RS_LOCALVIEWER",(function(){return n.RS_LOCALVIEWER})),r.d(t,"RS_NORMALIZENORMALS",(function(){return n.RS_NORMALIZENORMALS})),r.d(t,"RS_DIFFUSEMATERIALSOURCE",(function(){return n.RS_DIFFUSEMATERIALSOURCE})),r.d(t,"RS_SPECULARMATERIALSOURCE",(function(){return n.RS_SPECULARMATERIALSOURCE})),r.d(t,"RS_AMBIENTMATERIALSOURCE",(function(){return n.RS_AMBIENTMATERIALSOURCE})),r.d(t,"RS_EMISSIVEMATERIALSOURCE",(function(){return n.RS_EMISSIVEMATERIALSOURCE})),r.d(t,"RS_VERTEXBLEND",(function(){return n.RS_VERTEXBLEND})),r.d(t,"RS_CLIPPLANEENABLE",(function(){return n.RS_CLIPPLANEENABLE})),r.d(t,"RS_POINTSIZE",(function(){return n.RS_POINTSIZE})),r.d(t,"RS_POINTSIZE_MIN",(function(){return n.RS_POINTSIZE_MIN})),r.d(t,"RS_POINTSPRITEENABLE",(function(){return n.RS_POINTSPRITEENABLE})),r.d(t,"RS_POINTSCALEENABLE",(function(){return n.RS_POINTSCALEENABLE})),r.d(t,"RS_POINTSCALE_A",(function(){return n.RS_POINTSCALE_A})),r.d(t,"RS_POINTSCALE_B",(function(){return n.RS_POINTSCALE_B})),r.d(t,"RS_POINTSCALE_C",(function(){return n.RS_POINTSCALE_C})),r.d(t,"RS_MULTISAMPLEANTIALIAS",(function(){return n.RS_MULTISAMPLEANTIALIAS})),r.d(t,"RS_MULTISAMPLEMASK",(function(){return n.RS_MULTISAMPLEMASK})),r.d(t,"RS_PATCHEDGESTYLE",(function(){return n.RS_PATCHEDGESTYLE})),r.d(t,"RS_DEBUGMONITORTOKEN",(function(){return n.RS_DEBUGMONITORTOKEN})),r.d(t,"RS_POINTSIZE_MAX",(function(){return n.RS_POINTSIZE_MAX})),r.d(t,"RS_INDEXEDVERTEXBLENDENABLE",(function(){return n.RS_INDEXEDVERTEXBLENDENABLE})),r.d(t,"RS_COLORWRITEENABLE",(function(){return n.RS_COLORWRITEENABLE})),r.d(t,"RS_TWEENFACTOR",(function(){return n.RS_TWEENFACTOR})),r.d(t,"RS_BLENDOP",(function(){return n.RS_BLENDOP})),r.d(t,"RS_POSITIONDEGREE",(function(){return n.RS_POSITIONDEGREE})),r.d(t,"RS_NORMALDEGREE",(function(){return n.RS_NORMALDEGREE})),r.d(t,"RS_SCISSORTESTENABLE",(function(){return n.RS_SCISSORTESTENABLE})),r.d(t,"RS_SLOPESCALEDEPTHBIAS",(function(){return n.RS_SLOPESCALEDEPTHBIAS})),r.d(t,"RS_ANTIALIASEDLINEENABLE",(function(){return n.RS_ANTIALIASEDLINEENABLE})),r.d(t,"RS_TWOSIDEDSTENCILMODE",(function(){return n.RS_TWOSIDEDSTENCILMODE})),r.d(t,"RS_CCW_STENCILFAIL",(function(){return n.RS_CCW_STENCILFAIL})),r.d(t,"RS_CCW_STENCILZFAIL",(function(){return n.RS_CCW_STENCILZFAIL})),r.d(t,"RS_CCW_STENCILPASS",(function(){return n.RS_CCW_STENCILPASS})),r.d(t,"RS_CCW_STENCILFUNC",(function(){return n.RS_CCW_STENCILFUNC})),r.d(t,"RS_COLORWRITEENABLE1",(function(){return n.RS_COLORWRITEENABLE1})),r.d(t,"RS_COLORWRITEENABLE2",(function(){return n.RS_COLORWRITEENABLE2})),r.d(t,"RS_COLORWRITEENABLE3",(function(){return n.RS_COLORWRITEENABLE3})),r.d(t,"RS_BLENDFACTOR",(function(){return n.RS_BLENDFACTOR})),r.d(t,"RS_SRGBWRITEENABLE",(function(){return n.RS_SRGBWRITEENABLE})),r.d(t,"RS_DEPTHBIAS",(function(){return n.RS_DEPTHBIAS})),r.d(t,"RS_SEPARATEALPHABLENDENABLE",(function(){return n.RS_SEPARATEALPHABLENDENABLE})),r.d(t,"RS_SRCBLENDALPHA",(function(){return n.RS_SRCBLENDALPHA})),r.d(t,"RS_DESTBLENDALPHA",(function(){return n.RS_DESTBLENDALPHA})),r.d(t,"RS_BLENDOPALPHA",(function(){return n.RS_BLENDOPALPHA})),r.d(t,"CULL_NONE",(function(){return n.CULL_NONE})),r.d(t,"CULL_CW",(function(){return n.CULL_CW})),r.d(t,"CULL_CCW",(function(){return n.CULL_CCW})),r.d(t,"CMP_NEVER",(function(){return n.CMP_NEVER})),r.d(t,"CMP_LESS",(function(){return n.CMP_LESS})),r.d(t,"CMP_EQUAL",(function(){return n.CMP_EQUAL})),r.d(t,"CMP_LEQUAL",(function(){return n.CMP_LEQUAL})),r.d(t,"CMP_GREATER",(function(){return n.CMP_GREATER})),r.d(t,"CMP_NOTEQUAL",(function(){return n.CMP_NOTEQUAL})),r.d(t,"CMP_GREATEREQUAL",(function(){return n.CMP_GREATEREQUAL})),r.d(t,"CMP_ALWAYS",(function(){return n.CMP_ALWAYS})),r.d(t,"BLEND_ZERO",(function(){return n.BLEND_ZERO})),r.d(t,"BLEND_ONE",(function(){return n.BLEND_ONE})),r.d(t,"BLEND_SRCCOLOR",(function(){return n.BLEND_SRCCOLOR})),r.d(t,"BLEND_INVSRCCOLOR",(function(){return n.BLEND_INVSRCCOLOR})),r.d(t,"BLEND_SRCALPHA",(function(){return n.BLEND_SRCALPHA})),r.d(t,"BLEND_INVSRCALPHA",(function(){return n.BLEND_INVSRCALPHA})),r.d(t,"BLEND_DESTALPHA",(function(){return n.BLEND_DESTALPHA})),r.d(t,"BLEND_INVDESTALPHA",(function(){return n.BLEND_INVDESTALPHA})),r.d(t,"BLEND_DESTCOLOR",(function(){return n.BLEND_DESTCOLOR})),r.d(t,"BLEND_INVDESTCOLOR",(function(){return n.BLEND_INVDESTCOLOR})),r.d(t,"BLEND_SRCALPHASAT",(function(){return n.BLEND_SRCALPHASAT})),r.d(t,"BLEND_BOTHSRCALPHA",(function(){return n.BLEND_BOTHSRCALPHA})),r.d(t,"BLEND_BOTHINVSRCALPHA",(function(){return n.BLEND_BOTHINVSRCALPHA})),r.d(t,"BLEND_BLENDFACTOR",(function(){return n.BLEND_BLENDFACTOR})),r.d(t,"BLEND_INVBLENDFACTOR",(function(){return n.BLEND_INVBLENDFACTOR})),r.d(t,"BLENDOP_ADD",(function(){return n.BLENDOP_ADD})),r.d(t,"BLENDOP_SUBTRACT",(function(){return n.BLENDOP_SUBTRACT})),r.d(t,"BLENDOP_REVSUBTRACT",(function(){return n.BLENDOP_REVSUBTRACT})),r.d(t,"BLENDOP_MIN",(function(){return n.BLENDOP_MIN})),r.d(t,"BLENDOP_MAX",(function(){return n.BLENDOP_MAX})),r.d(t,"BlendTable",(function(){return n.BlendTable})),r.d(t,"WrapMode",(function(){return n.WrapMode})),r.d(t,"FilterMode",(function(){return n.FilterMode})),r.d(t,"MipFilterMode",(function(){return n.MipFilterMode})),r.d(t,"TEX_2D",(function(){return n.TEX_2D})),r.d(t,"TEX_VOLUME",(function(){return n.TEX_VOLUME})),r.d(t,"TEX_CUBE_MAP",(function(){return n.TEX_CUBE_MAP})),r.d(t,"TEX_PROJECTION",(function(){return n.TEX_PROJECTION})),r.d(t,"TEX_SHADOW_MAP",(function(){return n.TEX_SHADOW_MAP})),r.d(t,"TexTypeToGLTexture",(function(){return n.TexTypeToGLTexture})),r.d(t,"TexTypeToString",(function(){return n.TexTypeToString}));var i=r("./global/constant/dds.js");r.d(t,"DDS_MAGIC",(function(){return i.DDS_MAGIC})),r.d(t,"DDSD_CAPS",(function(){return i.DDSD_CAPS})),r.d(t,"DDSD_HEIGHT",(function(){return i.DDSD_HEIGHT})),r.d(t,"DDSD_WIDTH",(function(){return i.DDSD_WIDTH})),r.d(t,"DDSD_PITCH",(function(){return i.DDSD_PITCH})),r.d(t,"DDSD_PIXELFORMAT",(function(){return i.DDSD_PIXELFORMAT})),r.d(t,"DDSD_MIPMAPCOUNT",(function(){return i.DDSD_MIPMAPCOUNT})),r.d(t,"DDSD_LINEARSIZE",(function(){return i.DDSD_LINEARSIZE})),r.d(t,"DDSD_DEPTH",(function(){return i.DDSD_DEPTH})),r.d(t,"DDSCAPS_COMPLEX",(function(){return i.DDSCAPS_COMPLEX})),r.d(t,"DDSCAPS_MIPMAP",(function(){return i.DDSCAPS_MIPMAP})),r.d(t,"DDSCAPS_TEXTURE",(function(){return i.DDSCAPS_TEXTURE})),r.d(t,"DDSCAPS2_CUBEMAP",(function(){return i.DDSCAPS2_CUBEMAP})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEX",(function(){return i.DDSCAPS2_CUBEMAP_POSITIVEX})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEX",(function(){return i.DDSCAPS2_CUBEMAP_NEGATIVEX})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEY",(function(){return i.DDSCAPS2_CUBEMAP_POSITIVEY})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEY",(function(){return i.DDSCAPS2_CUBEMAP_NEGATIVEY})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEZ",(function(){return i.DDSCAPS2_CUBEMAP_POSITIVEZ})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEZ",(function(){return i.DDSCAPS2_CUBEMAP_NEGATIVEZ})),r.d(t,"DDSCAPS2_VOLUME",(function(){return i.DDSCAPS2_VOLUME})),r.d(t,"DDPF_ALPHAPIXELS",(function(){return i.DDPF_ALPHAPIXELS})),r.d(t,"DDPF_ALPHA",(function(){return i.DDPF_ALPHA})),r.d(t,"DDPF_FOURCC",(function(){return i.DDPF_FOURCC})),r.d(t,"DDPF_RGB",(function(){return i.DDPF_RGB})),r.d(t,"DDPF_YUV",(function(){return i.DDPF_YUV})),r.d(t,"DDPF_LUMINANCE",(function(){return i.DDPF_LUMINANCE})),r.d(t,"DDS_HEADER_LENGTH_INT",(function(){return i.DDS_HEADER_LENGTH_INT})),r.d(t,"DDS_HEADER_OFFSET_MAGIC",(function(){return i.DDS_HEADER_OFFSET_MAGIC})),r.d(t,"DDS_HEADER_OFFSET_SIZE",(function(){return i.DDS_HEADER_OFFSET_SIZE})),r.d(t,"DDS_HEADER_OFFSET_FLAGS",(function(){return i.DDS_HEADER_OFFSET_FLAGS})),r.d(t,"DDS_HEADER_OFFSET_HEIGHT",(function(){return i.DDS_HEADER_OFFSET_HEIGHT})),r.d(t,"DDS_HEADER_OFFSET_WIDTH",(function(){return i.DDS_HEADER_OFFSET_WIDTH})),r.d(t,"DDS_HEADER_OFFSET_MIPMAP_COUNT",(function(){return i.DDS_HEADER_OFFSET_MIPMAP_COUNT})),r.d(t,"DDS_HEADER_OFFSET_PF_FLAGS",(function(){return i.DDS_HEADER_OFFSET_PF_FLAGS})),r.d(t,"DDS_HEADER_OFFSET_PF_FOURCC",(function(){return i.DDS_HEADER_OFFSET_PF_FOURCC})),r.d(t,"DDS_HEADER_OFFSET_RGB_BPP",(function(){return i.DDS_HEADER_OFFSET_RGB_BPP})),r.d(t,"DDS_HEADER_OFFSET_R_MASK",(function(){return i.DDS_HEADER_OFFSET_R_MASK})),r.d(t,"DDS_HEADER_OFFSET_G_MASK",(function(){return i.DDS_HEADER_OFFSET_G_MASK})),r.d(t,"DDS_HEADER_OFFSET_B_MASK",(function(){return i.DDS_HEADER_OFFSET_B_MASK})),r.d(t,"DDS_HEADER_OFFSET_A_MASK",(function(){return i.DDS_HEADER_OFFSET_A_MASK})),r.d(t,"DDS_HEADER_OFFSET_CAPS1",(function(){return i.DDS_HEADER_OFFSET_CAPS1})),r.d(t,"DDS_HEADER_OFFSET_CAPS2",(function(){return i.DDS_HEADER_OFFSET_CAPS2})),r.d(t,"DDS_HEADER_OFFSET_CAPS3",(function(){return i.DDS_HEADER_OFFSET_CAPS3})),r.d(t,"DDS_HEADER_OFFSET_CAPS4",(function(){return i.DDS_HEADER_OFFSET_CAPS4})),r.d(t,"DDS_HEADER_OFFSET_DXGI_FORMAT",(function(){return i.DDS_HEADER_OFFSET_DXGI_FORMAT})),r.d(t,"FOURCC_ATI1",(function(){return i.FOURCC_ATI1})),r.d(t,"FOURCC_ATI2",(function(){return i.FOURCC_ATI2})),r.d(t,"FOURCC_ETC1",(function(){return i.FOURCC_ETC1})),r.d(t,"FOURCC_DXT1",(function(){return i.FOURCC_DXT1})),r.d(t,"FOURCC_DXT5",(function(){return i.FOURCC_DXT5})),r.d(t,"FOURCC_DXT3",(function(){return i.FOURCC_DXT3})),r.d(t,"FOURCC_DXT10",(function(){return i.FOURCC_DXT10})),r.d(t,"FOURCC_D3DFMT_R16G16B16A16F",(function(){return i.FOURCC_D3DFMT_R16G16B16A16F})),r.d(t,"FOURCC_D3DFMT_R32G32B32A32F",(function(){return i.FOURCC_D3DFMT_R32G32B32A32F})),r.d(t,"DXGI_FORMAT_R16G16B16A16_FLOAT",(function(){return i.DXGI_FORMAT_R16G16B16A16_FLOAT})),r.d(t,"DXGI_FORMAT_R32G32B32A32_FLOAT",(function(){return i.DXGI_FORMAT_R32G32B32A32_FLOAT})),r.d(t,"DXGI_FORMAT_B8G8R8X8_UNORM",(function(){return i.DXGI_FORMAT_B8G8R8X8_UNORM})),r.d(t,"DDS_DX10_FIELDS",(function(){return i.DDS_DX10_FIELDS})),r.d(t,"DDS_MAGIC_SIZE",(function(){return i.DDS_MAGIC_SIZE})),r.d(t,"DDS_HEADER_SIZE",(function(){return i.DDS_HEADER_SIZE})),r.d(t,"DDS_HEADER_PF_SIZE",(function(){return i.DDS_HEADER_PF_SIZE})),r.d(t,"DDS_HEADER_DX10_SIZE",(function(){return i.DDS_HEADER_DX10_SIZE})),r.d(t,"D3D10_RESOURCE_DIMENSION",(function(){return i.D3D10_RESOURCE_DIMENSION})),r.d(t,"DXGI_FORMAT",(function(){return i.DXGI_FORMAT})),r.d(t,"INTERNAL_FORMATS",(function(){return i.INTERNAL_FORMATS})),r.d(t,"FOURCC_TO_FORMAT",(function(){return i.FOURCC_TO_FORMAT})),r.d(t,"INTERNAL_FORMAT_TO_BYTES_PER_PIXEL",(function(){return i.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL})),r.d(t,"DXGI_TO_FORMAT",(function(){return i.DXGI_TO_FORMAT})),r.d(t,"formatToExtension",(function(){return i.formatToExtension}));var o=r("./global/constant/gl.js");r.d(t,"GL_COLOR_BUFFER_BIT",(function(){return o.GL_COLOR_BUFFER_BIT})),r.d(t,"GL_DEPTH_BUFFER_BIT",(function(){return o.GL_DEPTH_BUFFER_BIT})),r.d(t,"GL_STENCIL_BUFFER_BIT",(function(){return o.GL_STENCIL_BUFFER_BIT})),r.d(t,"GL_TEXTURE_2D",(function(){return o.GL_TEXTURE_2D})),r.d(t,"GL_TEXTURE_CUBE_MAP",(function(){return o.GL_TEXTURE_CUBE_MAP})),r.d(t,"GL_TEXTURE_3D",(function(){return o.GL_TEXTURE_3D})),r.d(t,"GL_TEXTURE_MAG_FILTER",(function(){return o.GL_TEXTURE_MAG_FILTER})),r.d(t,"GL_TEXTURE_MIN_FILTER",(function(){return o.GL_TEXTURE_MIN_FILTER})),r.d(t,"GL_TEXTURE_WRAP_S",(function(){return o.GL_TEXTURE_WRAP_S})),r.d(t,"GL_TEXTURE_WRAP_T",(function(){return o.GL_TEXTURE_WRAP_T})),r.d(t,"GL_BYTE",(function(){return o.GL_BYTE})),r.d(t,"GL_UNSIGNED_BYTE",(function(){return o.GL_UNSIGNED_BYTE})),r.d(t,"GL_SHORT",(function(){return o.GL_SHORT})),r.d(t,"GL_UNSIGNED_SHORT",(function(){return o.GL_UNSIGNED_SHORT})),r.d(t,"GL_INT",(function(){return o.GL_INT})),r.d(t,"GL_UNSIGNED_INT",(function(){return o.GL_UNSIGNED_INT})),r.d(t,"GL_FLOAT",(function(){return o.GL_FLOAT})),r.d(t,"GL_HALF_FLOAT_OES",(function(){return o.GL_HALF_FLOAT_OES})),r.d(t,"GL_HALF_FLOAT",(function(){return o.GL_HALF_FLOAT})),r.d(t,"GL_DEPTH_COMPONENT16",(function(){return o.GL_DEPTH_COMPONENT16})),r.d(t,"GL_DEPTH_COMPONENT24",(function(){return o.GL_DEPTH_COMPONENT24})),r.d(t,"GL_DEPTH_COMPONENT32F",(function(){return o.GL_DEPTH_COMPONENT32F})),r.d(t,"GL_FLOAT_VEC2",(function(){return o.GL_FLOAT_VEC2})),r.d(t,"GL_FLOAT_VEC3",(function(){return o.GL_FLOAT_VEC3})),r.d(t,"GL_FLOAT_VEC4",(function(){return o.GL_FLOAT_VEC4})),r.d(t,"GL_INT_VEC2",(function(){return o.GL_INT_VEC2})),r.d(t,"GL_INT_VEC3",(function(){return o.GL_INT_VEC3})),r.d(t,"GL_INT_VEC4",(function(){return o.GL_INT_VEC4})),r.d(t,"GL_BOOL",(function(){return o.GL_BOOL})),r.d(t,"GL_BOOL_VEC2",(function(){return o.GL_BOOL_VEC2})),r.d(t,"GL_BOOL_VEC3",(function(){return o.GL_BOOL_VEC3})),r.d(t,"GL_BOOL_VEC4",(function(){return o.GL_BOOL_VEC4})),r.d(t,"GL_FLOAT_MAT2",(function(){return o.GL_FLOAT_MAT2})),r.d(t,"GL_FLOAT_MAT3",(function(){return o.GL_FLOAT_MAT3})),r.d(t,"GL_FLOAT_MAT4",(function(){return o.GL_FLOAT_MAT4})),r.d(t,"GL_TYPE_LENGTH",(function(){return o.GL_TYPE_LENGTH})),r.d(t,"GL_SAMPLER_2D",(function(){return o.GL_SAMPLER_2D})),r.d(t,"GL_SAMPLER_3D",(function(){return o.GL_SAMPLER_3D})),r.d(t,"GL_SAMPLER_CUBE",(function(){return o.GL_SAMPLER_CUBE})),r.d(t,"GL_DEPTH_COMPONENT",(function(){return o.GL_DEPTH_COMPONENT})),r.d(t,"GL_ALPHA",(function(){return o.GL_ALPHA})),r.d(t,"GL_RGB",(function(){return o.GL_RGB})),r.d(t,"GL_RGBA",(function(){return o.GL_RGBA})),r.d(t,"GL_LUMINANCE",(function(){return o.GL_LUMINANCE})),r.d(t,"GL_LUMINANCE_ALPHA",(function(){return o.GL_LUMINANCE_ALPHA})),r.d(t,"GL_DEPTH_STENCIL",(function(){return o.GL_DEPTH_STENCIL})),r.d(t,"GL_UNSIGNED_INT_24_8_WEBGL",(function(){return o.GL_UNSIGNED_INT_24_8_WEBGL})),r.d(t,"GL_R8",(function(){return o.GL_R8})),r.d(t,"GL_R16F",(function(){return o.GL_R16F})),r.d(t,"GL_R32F",(function(){return o.GL_R32F})),r.d(t,"GL_R8UI",(function(){return o.GL_R8UI})),r.d(t,"GL_RG8",(function(){return o.GL_RG8})),r.d(t,"GL_RG16F",(function(){return o.GL_RG16F})),r.d(t,"GL_RG32F",(function(){return o.GL_RG32F})),r.d(t,"GL_RGB8",(function(){return o.GL_RGB8})),r.d(t,"GL_SRGB8",(function(){return o.GL_SRGB8})),r.d(t,"GL_RGB565",(function(){return o.GL_RGB565})),r.d(t,"GL_R11F_G11F_B10F",(function(){return o.GL_R11F_G11F_B10F})),r.d(t,"GL_RGB9_E5",(function(){return o.GL_RGB9_E5})),r.d(t,"GL_RGB16F",(function(){return o.GL_RGB16F})),r.d(t,"GL_RGB32F",(function(){return o.GL_RGB32F})),r.d(t,"GL_RGB8UI",(function(){return o.GL_RGB8UI})),r.d(t,"GL_RGBA8",(function(){return o.GL_RGBA8})),r.d(t,"GL_RGB5_A1",(function(){return o.GL_RGB5_A1})),r.d(t,"GL_RGBA16F",(function(){return o.GL_RGBA16F})),r.d(t,"GL_RGBA32F",(function(){return o.GL_RGBA32F})),r.d(t,"GL_RGBA8UI",(function(){return o.GL_RGBA8UI})),r.d(t,"GL_RGBA16I",(function(){return o.GL_RGBA16I})),r.d(t,"GL_RGBA16UI",(function(){return o.GL_RGBA16UI})),r.d(t,"GL_RGBA32I",(function(){return o.GL_RGBA32I})),r.d(t,"GL_RGBA32UI",(function(){return o.GL_RGBA32UI})),r.d(t,"GL_NEAREST",(function(){return o.GL_NEAREST})),r.d(t,"GL_LINEAR",(function(){return o.GL_LINEAR})),r.d(t,"GL_NEAREST_MIPMAP_NEAREST",(function(){return o.GL_NEAREST_MIPMAP_NEAREST})),r.d(t,"GL_LINEAR_MIPMAP_NEAREST",(function(){return o.GL_LINEAR_MIPMAP_NEAREST})),r.d(t,"GL_NEAREST_MIPMAP_LINEAR",(function(){return o.GL_NEAREST_MIPMAP_LINEAR})),r.d(t,"GL_LINEAR_MIPMAP_LINEAR",(function(){return o.GL_LINEAR_MIPMAP_LINEAR})),r.d(t,"GL_REPEAT",(function(){return o.GL_REPEAT})),r.d(t,"GL_CLAMP_TO_EDGE",(function(){return o.GL_CLAMP_TO_EDGE})),r.d(t,"GL_MIRRORED_REPEAT",(function(){return o.GL_MIRRORED_REPEAT})),r.d(t,"GL_ZERO",(function(){return o.GL_ZERO})),r.d(t,"GL_ONE",(function(){return o.GL_ONE})),r.d(t,"GL_SRC_COLOR",(function(){return o.GL_SRC_COLOR})),r.d(t,"GL_ONE_MINUS_SRC_COLOR",(function(){return o.GL_ONE_MINUS_SRC_COLOR})),r.d(t,"GL_SRC_ALPHA",(function(){return o.GL_SRC_ALPHA})),r.d(t,"GL_ONE_MINUS_SRC_ALPHA",(function(){return o.GL_ONE_MINUS_SRC_ALPHA})),r.d(t,"GL_DST_ALPHA",(function(){return o.GL_DST_ALPHA})),r.d(t,"GL_ONE_MINUS_DST_ALPHA",(function(){return o.GL_ONE_MINUS_DST_ALPHA})),r.d(t,"GL_DST_COLOR",(function(){return o.GL_DST_COLOR})),r.d(t,"GL_ONE_MINUS_DST_COLOR",(function(){return o.GL_ONE_MINUS_DST_COLOR})),r.d(t,"GL_SRC_ALPHA_SATURATE",(function(){return o.GL_SRC_ALPHA_SATURATE})),r.d(t,"GL_CONSTANT_COLOR",(function(){return o.GL_CONSTANT_COLOR})),r.d(t,"GL_ONE_MINUS_CONSTANT_COLOR",(function(){return o.GL_ONE_MINUS_CONSTANT_COLOR})),r.d(t,"GL_CONSTANT_ALPHA",(function(){return o.GL_CONSTANT_ALPHA})),r.d(t,"GL_ONE_MINUS_CONSTANT_ALPHA",(function(){return o.GL_ONE_MINUS_CONSTANT_ALPHA})),r.d(t,"GL_VERTEX_SHADER",(function(){return o.GL_VERTEX_SHADER})),r.d(t,"GL_FRAGMENT_SHADER",(function(){return o.GL_FRAGMENT_SHADER})),r.d(t,"GL_FRONT",(function(){return o.GL_FRONT})),r.d(t,"GL_BACK",(function(){return o.GL_BACK})),r.d(t,"GL_FRONT_AND_BACK",(function(){return o.GL_FRONT_AND_BACK})),r.d(t,"GL_NEVER",(function(){return o.GL_NEVER})),r.d(t,"GL_LESS",(function(){return o.GL_LESS})),r.d(t,"GL_EQUAL",(function(){return o.GL_EQUAL})),r.d(t,"GL_LEQUAL",(function(){return o.GL_LEQUAL})),r.d(t,"GL_GREATER",(function(){return o.GL_GREATER})),r.d(t,"GL_NOTEQUAL",(function(){return o.GL_NOTEQUAL})),r.d(t,"GL_GEQUAL",(function(){return o.GL_GEQUAL})),r.d(t,"GL_ALWAYS",(function(){return o.GL_ALWAYS})),r.d(t,"GL_KEEP",(function(){return o.GL_KEEP})),r.d(t,"GL_REPLACE",(function(){return o.GL_REPLACE})),r.d(t,"GL_INCR",(function(){return o.GL_INCR})),r.d(t,"GL_DECR",(function(){return o.GL_DECR})),r.d(t,"GL_INCR_WRAP",(function(){return o.GL_INCR_WRAP})),r.d(t,"GL_DECR_WRAP",(function(){return o.GL_DECR_WRAP})),r.d(t,"GL_INVERT",(function(){return o.GL_INVERT})),r.d(t,"GL_STREAM_DRAW",(function(){return o.GL_STREAM_DRAW})),r.d(t,"GL_STATIC_DRAW",(function(){return o.GL_STATIC_DRAW})),r.d(t,"GL_DYNAMIC_DRAW",(function(){return o.GL_DYNAMIC_DRAW})),r.d(t,"GL_ARRAY_BUFFER",(function(){return o.GL_ARRAY_BUFFER})),r.d(t,"GL_ELEMENT_ARRAY_BUFFER",(function(){return o.GL_ELEMENT_ARRAY_BUFFER})),r.d(t,"GL_POINTS",(function(){return o.GL_POINTS})),r.d(t,"GL_LINES",(function(){return o.GL_LINES})),r.d(t,"GL_LINE_LOOP",(function(){return o.GL_LINE_LOOP})),r.d(t,"GL_LINE_STRIP",(function(){return o.GL_LINE_STRIP})),r.d(t,"GL_TRIANGLES",(function(){return o.GL_TRIANGLES})),r.d(t,"GL_TRIANGLE_STRIP",(function(){return o.GL_TRIANGLE_STRIP})),r.d(t,"GL_TRIANGLE_FAN",(function(){return o.GL_TRIANGLE_FAN})),r.d(t,"GL_CW",(function(){return o.GL_CW})),r.d(t,"GL_CCW",(function(){return o.GL_CCW})),r.d(t,"GL_CULL_FACE",(function(){return o.GL_CULL_FACE})),r.d(t,"GL_DEPTH_TEST",(function(){return o.GL_DEPTH_TEST})),r.d(t,"GL_BLEND",(function(){return o.GL_BLEND}));var a=r("./global/constant/web.js");r.d(t,"VendorRequestAnimationFrame",(function(){return a.VendorRequestAnimationFrame})),r.d(t,"VendorCancelAnimationFrame",(function(){return a.VendorCancelAnimationFrame})),r.d(t,"VendorRequestFullScreen",(function(){return a.VendorRequestFullScreen})),r.d(t,"VendorExitFullScreen",(function(){return a.VendorExitFullScreen})),r.d(t,"VendorGetFullScreenElement",(function(){return a.VendorGetFullScreenElement})),r.d(t,"VendorWebglPrefixes",(function(){return a.VendorWebglPrefixes}));var u=r("./global/constant/type.js");r.d(t,"PT_UNKNOWN",(function(){return u.PT_UNKNOWN})),r.d(t,"PT_BOOLEAN",(function(){return u.PT_BOOLEAN})),r.d(t,"PT_ENUM",(function(){return u.PT_ENUM})),r.d(t,"PT_STRING",(function(){return u.PT_STRING})),r.d(t,"PT_PATH",(function(){return u.PT_PATH})),r.d(t,"PT_EXPRESSION",(function(){return u.PT_EXPRESSION})),r.d(t,"PT_BYTE",(function(){return u.PT_BYTE})),r.d(t,"PT_UINT",(function(){return u.PT_UINT})),r.d(t,"PT_USHORT",(function(){return u.PT_USHORT})),r.d(t,"PT_FLOAT",(function(){return u.PT_FLOAT})),r.d(t,"PT_STRUCT",(function(){return u.PT_STRUCT})),r.d(t,"PT_STRUCT_RAW",(function(){return u.PT_STRUCT_RAW})),r.d(t,"PT_STRUCT_LIST",(function(){return u.PT_STRUCT_LIST})),r.d(t,"PT_PLAIN",(function(){return u.PT_PLAIN})),r.d(t,"PT_ARRAY",(function(){return u.PT_ARRAY})),r.d(t,"PT_VECTOR",(function(){return u.PT_VECTOR})),r.d(t,"PT_VECTOR2",(function(){return u.PT_VECTOR2})),r.d(t,"PT_VECTOR3",(function(){return u.PT_VECTOR3})),r.d(t,"PT_VECTOR4",(function(){return u.PT_VECTOR4})),r.d(t,"PT_COLOR",(function(){return u.PT_COLOR})),r.d(t,"PT_QUATERNION",(function(){return u.PT_QUATERNION})),r.d(t,"PT_MATRIX3",(function(){return u.PT_MATRIX3})),r.d(t,"PT_MATRIX4",(function(){return u.PT_MATRIX4})),r.d(t,"PT_UINT8_ARRAY",(function(){return u.PT_UINT8_ARRAY})),r.d(t,"PT_UINT8_CLAMPED_ARRAY",(function(){return u.PT_UINT8_CLAMPED_ARRAY})),r.d(t,"PT_UINT16_ARRAY",(function(){return u.PT_UINT16_ARRAY})),r.d(t,"PT_UINT32_ARRAY",(function(){return u.PT_UINT32_ARRAY})),r.d(t,"PT_INT8_ARRAY",(function(){return u.PT_INT8_ARRAY})),r.d(t,"PT_INT16_ARRAY",(function(){return u.PT_INT16_ARRAY})),r.d(t,"PT_INT32_ARRAY",(function(){return u.PT_INT32_ARRAY})),r.d(t,"PT_FLOAT32_ARRAY",(function(){return u.PT_FLOAT32_ARRAY})),r.d(t,"PT_FLOAT64_ARRAY",(function(){return u.PT_FLOAT64_ARRAY})),r.d(t,"VectorConstructors",(function(){return u.VectorConstructors})),r.d(t,"VectorLengths",(function(){return u.VectorLengths}));var c=r("./global/constant/ccpwgl.js");r.d(t,"DeviceTextureQuality",(function(){return c.DeviceTextureQuality})),r.d(t,"DeviceShaderQuality",(function(){return c.DeviceShaderQuality})),r.d(t,"SceneLodSettings",(function(){return c.SceneLodSettings})),r.d(t,"LodLevelPixels",(function(){return c.LodLevelPixels})),r.d(t,"Mouse",(function(){return c.Mouse})),r.d(t,"Touch",(function(){return c.Touch})),r.d(t,"PickingBlueChannel",(function(){return c.PickingBlueChannel}))},"./global/constant/type.js":function(e,t,r){"use strict";var n,i;function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"PT_UNKNOWN",(function(){return a})),r.d(t,"PT_BOOLEAN",(function(){return u})),r.d(t,"PT_ENUM",(function(){return c})),r.d(t,"PT_STRING",(function(){return l})),r.d(t,"PT_PATH",(function(){return s})),r.d(t,"PT_EXPRESSION",(function(){return f})),r.d(t,"PT_BYTE",(function(){return p})),r.d(t,"PT_UINT",(function(){return d})),r.d(t,"PT_USHORT",(function(){return y})),r.d(t,"PT_FLOAT",(function(){return m})),r.d(t,"PT_STRUCT",(function(){return b})),r.d(t,"PT_STRUCT_RAW",(function(){return h})),r.d(t,"PT_STRUCT_LIST",(function(){return v})),r.d(t,"PT_PLAIN",(function(){return g})),r.d(t,"PT_ARRAY",(function(){return w})),r.d(t,"PT_VECTOR",(function(){return x})),r.d(t,"PT_VECTOR2",(function(){return _})),r.d(t,"PT_VECTOR3",(function(){return z})),r.d(t,"PT_VECTOR4",(function(){return S})),r.d(t,"PT_COLOR",(function(){return j})),r.d(t,"PT_QUATERNION",(function(){return E})),r.d(t,"PT_MATRIX3",(function(){return T})),r.d(t,"PT_MATRIX4",(function(){return O})),r.d(t,"PT_UINT8_ARRAY",(function(){return R})),r.d(t,"PT_UINT8_CLAMPED_ARRAY",(function(){return P})),r.d(t,"PT_UINT16_ARRAY",(function(){return D})),r.d(t,"PT_UINT32_ARRAY",(function(){return A})),r.d(t,"PT_INT8_ARRAY",(function(){return M})),r.d(t,"PT_INT16_ARRAY",(function(){return C})),r.d(t,"PT_INT32_ARRAY",(function(){return k})),r.d(t,"PT_FLOAT32_ARRAY",(function(){return I})),r.d(t,"PT_FLOAT64_ARRAY",(function(){return L})),r.d(t,"VectorConstructors",(function(){return G})),r.d(t,"VectorLengths",(function(){return F}));var a=0,u=1,c=2,l=10,s=11,f=12,p=20,d=21,y=22,m=23,b=30,h=31,v=32,g=33,w=34,x=50,_=51,z=52,S=53,j=60,E=61,T=70,O=71,R=81,P=82,D=83,A=84,M=85,C=86,k=87,I=88,L=89,G=(o(n={},_,Float32Array),o(n,z,Float32Array),o(n,S,Float32Array),o(n,E,Float32Array),o(n,j,Float32Array),o(n,T,Float32Array),o(n,O,Float32Array),o(n,I,Float32Array),o(n,L,Float64Array),o(n,R,Uint8Array),o(n,P,Uint8ClampedArray),o(n,D,Uint16Array),o(n,A,Uint32Array),o(n,M,Int8Array),o(n,C,Int16Array),o(n,k,Int32Array),n),F=(o(i={},_,2),o(i,z,3),o(i,S,4),o(i,E,4),o(i,j,4),o(i,T,9),o(i,O,16),i)},"./global/constant/web.js":function(e,t,r){"use strict";r.r(t),r.d(t,"VendorRequestAnimationFrame",(function(){return n})),r.d(t,"VendorCancelAnimationFrame",(function(){return i})),r.d(t,"VendorRequestFullScreen",(function(){return o})),r.d(t,"VendorExitFullScreen",(function(){return a})),r.d(t,"VendorGetFullScreenElement",(function(){return u})),r.d(t,"VendorWebglPrefixes",(function(){return c}));var n=["requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame"],i=["cancelAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame"],o=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],a=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],u=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"],c=["","MOZ_","WEBKIT_","WEBGL_"]},"./global/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/tw2.js");r.d(t,"tw2",(function(){return n.tw2})),r.d(t,"resMan",(function(){return n.resMan})),r.d(t,"device",(function(){return n.device}))},"./global/math/box3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"box3",(function(){return o}));var n=r("./global/math/num.js"),i=r("./global/math/vec3.js"),o=(r("./global/math/sph3.js"),{bounds:{}}),a=null;o.$min=function(e){return e.subarray(0,3)},o.$max=function(e){return e.subarray(3,6)},o.addPoint=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],r[0]),e[4]=Math.max(t[4],r[1]),e[5]=Math.max(t[5],r[2]),e},o.addPoints=function(e,t,r){for(var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],l=0;l<r.length;l++)n=Math.min(n,r[l][0]),i=Math.min(i,r[l][1]),o=Math.min(o,r[l][2]),a=Math.max(a,r[l][0]),u=Math.max(u,r[l][1]),c=Math.max(c,r[l][2]);return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=c,e},o.clone=function(e){var t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.contains=function(e,t){return e[0]<=t[0]&&t[3]<=e[3]&&e[1]<=t[1]&&t[4]<=e[4]&&e[2]<=t[2]&&t[5]<=e[5]},o.containsBounds=function(e,t,r){return e[0]<=t[0]&&r[0]<=e[3]&&e[1]<=t[1]&&r[1]<=e[4]&&e[2]<=t[2]&&r[2]<=e[5]},o.containsPoint=function(e,t){return!(t[0]<e[0]||t[0]>e[3]||t[1]<e[1]||t[1]>e[4]||t[2]<e[2]||t[2]>e[5])},o.containsValue=function(e,t,r,n){return!(t<e[0]||t>e[3]||r<e[1]||r>e[4]||n<e[2]||n>e[5])},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.copyMin=i.vec3.copy,o.copyMax=function(e,t){return e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.create=function(){return o.empty(new Float32Array(6))},o.distanceToPoint=function(e,t){var r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],n=Math.max(e[1],Math.min(e[4],t[1]))-t[1],i=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return Math.sqrt(r*r+n*n+i*i)},o.distanceToValues=function(e,t,r,n){var i=Math.max(e[0],Math.min(e[3],t))-t,o=Math.max(e[1],Math.min(e[4],r))-r,a=Math.max(e[2],Math.min(e[5],n))-n;return Math.sqrt(i*i+o*o+a*a)},o.empty=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e},o.bounds.empty=function(e,t){e[0]=0,e[1]=0,e[2]=0,t[0]=0,t[1]=0,t[2]=0},o.equals=function(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],c=e[5],l=t[0],s=t[1],f=t[2],p=t[3],d=t[4],y=t[5];return Math.abs(r-l)<=n.num.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-s)<=n.num.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-f)<=n.num.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-p)<=n.num.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(u-d)<=n.num.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(c-y)<=n.num.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))},o.equalsBounds=function(e,t,r){var i=e[0],o=e[1],a=e[2],u=e[3],c=e[4],l=e[5],s=t[0],f=t[1],p=t[2],d=r[0],y=r[1],m=r[2];return Math.abs(i-s)<=n.num.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-f)<=n.num.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-p)<=n.num.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(u-d)<=n.num.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(c-y)<=n.num.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-m)<=n.num.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},o.exactEqualsBounds=function(e,t,r){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===r[0]&&e[4]===r[1]&&e[5]===r[2]},o.expandScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[3]+r,e[4]=t[4]+r,e[5]=t[5]+r,e},o.expandValues=function(e,t,r,n,i){return e[0]=t[0]-r,e[1]=t[1]-n,e[2]=t[2]-i,e[3]=t[3]+r,e[4]=t[4]+n,e[5]=t[5]+i,e},o.expandVec3=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e},o.fromArray=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e},o.fromBounds=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0],e[4]=r[1],e[5]=r[2],e},o.fromPositionSize=function(e,t,r){return e[0]=t[0]-.5*r[0],e[1]=t[1]-.5*r[1],e[2]=t[2]-.5*r[2],e[3]=t[0]+.5*r[0],e[4]=t[1]+.5*r[1],e[5]=t[2]+.5*r[2],e},o.fromPoints=function(e,t){o.empty(e);for(var r=0;r<t.length;r++)e[0]=Math.min(e[0],t[r][0]),e[1]=Math.min(e[1],t[r][1]),e[2]=Math.min(e[2],t[r][2]),e[3]=Math.max(e[3],t[r][0]),e[4]=Math.max(e[4],t[r][1]),e[5]=Math.max(e[5],t[r][2]);return e},o.fromPositionRadius=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[0]+r,e[4]=t[1]+r,e[5]=t[2]+r,e},o.fromSph3=function(e,t){return e[0]=t[0]-t[3],e[1]=t[1]-t[3],e[2]=t[2]-t[3],e[3]=t[0]+t[3],e[4]=t[1]+t[3],e[5]=t[2]+t[3],e},o.fromValues=function(e,t,r,n,i,a){var u=o.create();return u[0]=e,u[1]=t,u[2]=r,u[3]=n,u[4]=i,u[5]=a,u},o.getCenter=function(e,t){return o.isEmpty(t)?(e[0]=0,e[1]=0,e[2]=0,e):(e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e)},o.getClampedPoint=function(e,t,r){return e[0]=Math.max(t[0],Math.min(t[3],r[0])),e[1]=Math.max(t[1],Math.min(t[4],r[1])),e[2]=Math.max(t[2],Math.min(t[5],r[2])),e},o.getMax=function(e,t){return e[0]=t[3],e[1]=t[4],e[2]=t[5],e},o.getMin=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.getSize=function(e,t){return e[0]=t[3]-t[0],e[1]=t[4]-t[1],e[2]=t[5]-t[2],e},o.getPosition=function(e,t){return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e},o.radius=function(e){var t=e[3]-e[0],r=e[4]-e[1],n=e[5]-e[2];return.5*Math.sqrt(t*t+r*r+n*n)},o.intersect=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e[4]=Math.min(t[4],r[4]),e[5]=Math.min(t[5],r[5]),e},o.intersectBounds=function(e,t,r,n){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.min(t[3],n[0]),e[4]=Math.min(t[4],n[1]),e[5]=Math.min(t[5],n[2]),e},o.intersects=function(e,t){return!(t[3]<e[0]||t[0]>e[3]||t[4]<e[1]||t[1]>e[4]||t[5]<e[2]||t[2]>e[5])},o.intersectsBounds=function(e,t,r){return!(r[0]<e[0]||t[0]>e[3]||r[1]<e[1]||t[1]>e[4]||r[2]<e[2]||t[2]>e[5])},o.intersectsNormalConstant=function(e,t,r){var n,i;return t[0]>0?(n=t[0]*e[0],i=t[0]*e[3]):(n=t[0]*e[3],i=t[0]*e[0]),t[1]>0?(n=t[1]*e[1],i=t[1]*e[4]):(n=t[1]*e[4],i=t[1]*e[1]),t[2]>0?(n+=t[2]*e[2],i+=t[2]*e[5]):(n+=t[2]*e[5],i+=t[2]*e[2]),n<=r&&i>=r},o.intersectsPln=function(e,t){return o.intersectsNormalConstant(e,t,t[3])},o.intersectsPoint=function(e,t){return t[0]>=e[0]&&t[0]<=e[3]&&t[1]>=e[1]&&t[1]<=e[4]&&t[2]>=e[2]&&t[2]<=e[5]},o.intersectsValues=function(e,t,r,n){return t>=e[0]&&t<=e[3]&&r>=e[1]&&r<=e[4]&&n>=e[2]&&n<=e[5]},o.intersectsPositionRadius=function(e,t,r){var n=Math.max(e[0],Math.min(e[3],t[0]))-t[0],i=Math.max(e[1],Math.min(e[4],t[1]))-t[1],o=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return n*n+i*i+o*o<=r*r},o.intersectsSph3=function(e,t){var r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],n=Math.max(e[1],Math.min(e[4],t[1]))-t[1],i=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return r*r+n*n+i*i<=t[3]*t[3]},o.isEmpty=function(e){return e[0]+e[1]+e[2]+e[0]+e[1]+e[2]===0||(e[3]<e[0]||e[4]<e[1]||e[5]<e[2])},o.bounds.isEmpty=function(e,t){return e[0]+e[1]+e[2]+t[0]+t[1]+t[2]===0||(t[0]<e[0]||t[1]<e[1]||t[2]<e[2])},o.set=function(e,t,r,n,i,o,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e},o.setMinBounds=i.vec3.copy,o.setMaxBounds=function(e,t){return e[3]=t[0],e[4]=t[1],e[5]=t[2],e},o.squaredDistanceToPoint=function(e,t){var r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],n=Math.max(e[1],Math.min(e[4],t[1]))-t[1],i=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return r*r+n*n+i*i},o.surfaceArea=function(e){var t=e[3]-e[0],r=e[4]-e[1],n=e[5]-e[2];return 2*(t*(r+n)+r*n)},o.toArray=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],e},o.toBounds=function(e,t,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[3],r[1]=e[4],r[2]=e[5],e},o.toPoints=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],c=o+Math.abs(r),l=a+Math.abs(n),s=u+Math.abs(i);return t.push([o+0,a+0,u+0]),t.push([o-c,a+0,u+0]),t.push([o+0,a+0,u-s]),t.push([o-c,a+0,u-s]),t.push([o+0,a-l,u+0]),t.push([o-c,a-l,u+0]),t.push([o+0,a-l,u-s]),t.push([o-c,a-l,u-s]),t},o.toPositionRadius=function(e,t){var r=e[3]-e[0],n=e[4]-e[1],i=e[5]-e[2];return t[0]=.5*(e[0]+e[3]),t[1]=.5*(e[1]+e[4]),t[2]=.5*(e[2]+e[5]),.5*Math.sqrt(r*r+n*n+i*i)},o.bounds.toPositionRadius=function(e,t,r){var n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2];return r[0]=.5*(e[0]+t[0]),r[1]=.5*(e[1]+t[1]),r[2]=.5*(e[2]+t[2]),.5*Math.sqrt(n*n+i*i+o*o)},o.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e},o.transformMat4=function(e,t,r){return o.isEmpty(t)?o.empty(e):(a||(a=[i.vec3.create(),i.vec3.create(),i.vec3.create(),i.vec3.create()]),i.vec3.set(a[0],t[0],t[1],t[2]),i.vec3.set(a[1],t[3],t[4],t[5]),i.vec3.transformMat4(a[2],a[0],r),i.vec3.transformMat4(a[3],a[1],r),o.fromBounds(e,a[2],a[3]))},o.union=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e[4]=Math.max(t[4],r[4]),e[5]=Math.max(t[5],r[5]),e},o.unionBounds=function(e,t,r,n){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],n[0]),e[4]=Math.max(t[4],n[1]),e[5]=Math.max(t[5],n[2]),e},o.bounds.union=function(e,t,r,n,i,o){e[0]=Math.min(r[0],i[0]),e[1]=Math.min(r[1],i[1]),e[2]=Math.min(r[2],i[2]),t[0]=Math.max(n[0],o[0]),t[1]=Math.max(n[1],o[1]),t[2]=Math.max(n[2],o[2])}},"./global/math/curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"curve",(function(){return n}));var n={evaluate:function(e,t,r,n,i){for(var o=e.knots.length,a=o-1,u=0,c=0;c<e.knots.length;++c)if(e.knots[c]>t){a=c;break}if(0===e.degree)for(var l=0;l<e.dimension;++l)r[l]=e.controls[a*e.dimension+l];else if(1===e.degree){var s=n?(a+o-1)%o:0===a?0:a-1,f=e.knots[a]-e.knots[s];f<0&&(f+=i),f>0&&(u=(t-e.knots[e.knots.length-1])/f);for(var p=0;p<e.dimension;++p)r[p]=e.controls[s*e.dimension+p]*(1-u)+e.controls[a*e.dimension+p]*u}else{var d=n?(a+o-2)%o:0===a?0:a-2,y=n?(a+o-1)%o:0===a?0:a-1,m=d*e.dimension,b=y*e.dimension,h=a*e.dimension,v=e.knots[d],g=e.knots[y],w=e.knots[a],x=e.knots[(a+1)%o];v>w&&(w+=i,x+=i,t+=i),g>w&&(w+=i,x+=i,t+=i),x<w&&(x+=i);var _=t-g,z=_/(w-g),S=(t-v)/(w-v),j=S+z-z*S,E=z*(_/(x-g)),T=j-E;j=1-j;for(var O=0;O<e.dimension;++O)r[O]=j*e.controls[m+O]+T*e.controls[b+O]+E*e.controls[h+O]}},ag_horner1:function(e,t,r){for(var n=e[t];--t>=0;)n=r*n+e[t];return n},ag_zeroin2:function(e,t,r,i,o,a){var u,c,l,s,f,p,d,y,m,b;for(var h=!0;h&&(u=e,s=r,l=c=t-e),Math.abs(s)<Math.abs(i)&&(e=t,t=u,u=e,r=i,i=s,s=r),h=!1,f=2.384185792e-7*Math.abs(t)+.5*o,p=.5*(u-t),Math.abs(p)>f&&0!==i;)Math.abs(l)<f||Math.abs(r)<=Math.abs(i)?l=c=p:(b=i/r,e===u?(d=2*p*b,y=1-b):(d=b*(2*p*(y=r/s)*(y-(m=i/s))-(t-e)*(m-1)),y=(y-1)*(m-1)*(b-1)),d>0?y=-y:d=-d,b=l,l=c,2*d<3*p*y-Math.abs(f*y)&&d<Math.abs(.5*b*y)?c=d/y:l=c=p),e=t,r=i,Math.abs(c)>f?t+=c:p>0?t+=f:t-=f,(i=n.ag_horner1(a.p,a.deg,t))*(s/Math.abs(s))>0&&(h=!0);return t},ag_zeroin:function(e,t,r,i){var o,a;return o=n.ag_horner1(i.p,i.deg,e),Math.abs(o)<1.192092896e-7?e:(a=n.ag_horner1(i.p,i.deg,t),Math.abs(a)<1.192092896e-7?t:n.ag_zeroin2(e,t,o,a,r,i))},polyZeroes:function(e,t,r,i,o,a,u){var c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z=new Array(22),S=new Array(22),j=new Array(22),E={p:[],deg:0};for(y=h=0,m=0,c=0;c<t+1;++c)m+=Math.abs(e[c]);if(m<=(g=(Math.abs(r)+Math.abs(o))*(t+1)*1.192092896e-7))return-1;for(w=z,x=S,_=j,c=0;c<t+1;++c)w[c]=1/m*e[c];for(;Math.abs(w[t])<g;)t--;if(f=0,0===t)return f;if(1===t)return u[0]=-w[0]/w[1],l=i?r<u[0]+g:r<u[0]-g,s=a?o>u[0]-g:o>u[0]+g,(f=l&&s?1:0)&&(i&&u[0]<r?u[0]=r:a&&u[0]>o&&(u[0]=o)),f;for(E.p=w,E.deg=t,c=1;c<=t;c++)x[c-1]=c*w[c];if(0===(p=n.polyZeroes(x,t-1,r,0,o,0,_)).length)return 0;for(c=d=0;c<=p;c++){if(f>t)return f;0===c?(b=r,v=n.ag_horner1(w,t,b),Math.abs(v)<=g&&i&&(u[f++]=r)):(b=y,v=h),c===p?(y=o,d=0):y=_[c],h=n.ag_horner1(w,t,y),d?d=0:Math.abs(h)<g?(c!==p||a)&&(u[f++]=y,d=1):(v<0&&h>0||v>0&&h<0)&&(u[f++]=n.ag_zeroin(b,y,0,E),f>1&&u[f-2]>=u[f-1]-g&&(u[f-2]=.5*(u[f-2]+u[f-1]),f--))}return f}}},"./global/math/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/math/num.js");r.d(t,"num",(function(){return n.num}));var i=r("./global/math/vec2.js");r.d(t,"vec2",(function(){return i.vec2}));var o=r("./global/math/vec3.js");r.d(t,"vec3",(function(){return o.vec3}));var a=r("./global/math/vec4.js");r.d(t,"vec4",(function(){return a.vec4}));var u=r("./global/math/quat.js");r.d(t,"quat",(function(){return u.quat}));var c=r("./global/math/mat3.js");r.d(t,"mat3",(function(){return c.mat3}));var l=r("./global/math/mat4.js");r.d(t,"mat4",(function(){return l.mat4}));var s=r("./global/math/noise.js");r.d(t,"noise",(function(){return s.noise}));var f=r("./global/math/curve.js");r.d(t,"curve",(function(){return f.curve}));var p=r("./global/math/box3.js");r.d(t,"box3",(function(){return p.box3}));var d=r("./global/math/tri3.js");r.d(t,"tri3",(function(){return d.tri3}));var y=r("./global/math/lne3.js");r.d(t,"lne3",(function(){return y.lne3}));var m=r("./global/math/pln.js");r.d(t,"pln",(function(){return m.pln}));var b=r("./global/math/ray3.js");r.d(t,"ray3",(function(){return b.ray3}));var h=r("./global/math/sph3.js");r.d(t,"sph3",(function(){return h.sph3}))},"./global/math/lne3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"lne3",(function(){return u}));var n,i,o=r("./global/math/vec3.js"),a=r("./global/math/box3.js"),u={};u.$end=a.box3.$max,u.$start=a.box3.$min,u.clone=a.box3.clone,u.closestPointToPointParameter=function(e,t,r){n||(n=o.vec3.create(),i=o.vec3.create());var a=n,u=i;a[0]=t[0]-e[0],a[1]=t[1]-e[1],a[2]=t[2]-e[2],u[0]=e[3]-e[0],u[1]=e[4]-e[1],u[2]=e[5]-e[2];var c=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],l=(u[0]*a[0]+u[1]*a[1]+u[2]*a[2])/c;return r&&(l=Math.max(0,Math.min(1,l))),l},u.copy=a.box3.copy,u.copyStart=o.vec3.copy,u.copyEnd=a.box3.copyMax,u.create=a.box3.create,u.equals=a.box3.equals,u.equalsStartEnd=a.box3.equalsBounds,u.exactEquals=a.box3.equals,u.exactEqualsStartEnd=a.box3.exactEqualsBounds,u.fromArray=a.box3.fromArray,u.fromStartEnd=a.box3.fromBounds,u.get=function(e,t,r){if(r<0||r>1)throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return e[0]=(t[3]-t[0])*r+t[0],e[1]=(t[4]-t[1])*r+t[1],e[2]=(t[5]-t[2])*r+t[2],e},u.getCenter=function(e,t){return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e},u.getClosestPointToPoint=function(e,t,r,n){return u.get(e,t,u.closestPointToPointParameter(t,r,n))},u.getEnd=a.box3.getMax,u.getDelta=function(e,t){return e[0]=t[3]-t[0],e[1]=t[4]-t[1],e[2]=t[5]-t[2],e},u.getStart=a.box3.getMin,u.intersectsNormalConstant=function(e,t,r){var n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+r,i=t[0]*e[3]+t[1]*e[4]+t[2]*e[5]+r;return n<0&&i>0||i<0&&n>0},u.length=function(e){var t=e[0]-e[3],r=e[1]-e[4],n=e[2]-e[5];return Math.sqrt(t*t+r*r+n*n)},u.set=a.box3.set,u.squaredLength=function(e){var t=e[0]-e[3],r=e[1]-e[4],n=e[2]-e[5];return t*t+r*r+n*n},u.toArray=a.box3.toArray,u.toStartEnd=a.box3.toBounds,u.setStart=a.box3.setMinBounds,u.setEnd=a.box3.setMaxBounds,u.transformMat4=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12],e[1]=r[1]*n+r[5]*i+r[9]*o+r[13],e[2]=r[2]*n+r[6]*i+r[10]*o+r[14],e[3]=r[0]*a+r[4]*u+r[8]*c+r[12],e[4]=r[1]*a+r[5]*u+r[9]*c+r[13],e[5]=r[2]*a+r[6]*u+r[10]*c+r[14],e},u.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e}},"./global/math/mat3.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"mat3",(function(){return n.mat3})),n.mat3.fromArray=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e[6]=t[r+6],e[7]=t[r+7],e[8]=t[r+8],e},n.mat3.setArray=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e[6]=t[r+6],e[7]=t[r+7],e[8]=t[r+8],e},n.mat3.toArray=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],e}},"./global/math/mat4.js":function(e,t,r){"use strict";r.r(t);var n,i=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"mat4",(function(){return i.mat4})),i.mat4.fromJointMatIndex=function(e,t,r){if(r>=0){var n=12*r;e[0]=t[n],e[1]=t[n+4],e[2]=t[n+8],e[3]=0,e[4]=t[n+1],e[5]=t[n+5],e[6]=t[n+9],e[7]=0,e[8]=t[n+2],e[9]=t[n+6],e[10]=t[n+10],e[11]=0,e[12]=t[n+3],e[13]=t[n+7],e[14]=t[n+11],e[15]=1}else i.mat4.identity(e,e);return e},i.mat4.arcFromForward=function(e,t){n||(n=i.vec3.create());var r=i.vec3.normalize(n,t);if(i.mat4.identity(e),r[2]<-.99999)return e;if(r[2]>.99999)return e[5]=-1,e[10]=-1,e;var o=(1+r[2])/(r[0]*r[0]+r[1]*r[1]);return e[0]=o*r[1]*r[1]-r[2],e[1]=-o*r[0]*r[1],e[2]=r[0],e[4]=e[1],e[5]=o*r[0]*r[0]-r[2],e[6]=r[1],e[8]=-r[0],e[9]=-r[1],e[10]=-r[2],e},i.mat4.copyTranslation=function(e,t){return e[12]=t[12],e[13]=t[13],e[14]=t[14],e},i.mat4.fromMat3=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[4]=t[3],e[5]=t[4],e[6]=t[5],e[8]=t[6],e[9]=t[7],e[10]=t[8],e[3]=e[7]=e[11]=e[12]=e[13]=e[14]=0,e[15]=1,e},i.mat4.lookAtGL=function(){var e,t,r;return function(n,o,a,u){return e||(e=i.vec3.create(),t=i.vec3.create(),r=i.vec3.create()),i.vec3.subtract(r,o,a),0===i.vec3.squaredLength(r)&&(r[2]=1),i.vec3.normalize(r,r),i.vec3.cross(e,u,r),0===i.vec3.squaredLength(e)&&(r[2]+=1e-4,i.vec3.cross(e,u,r)),i.vec3.normalize(e,e),i.vec3.cross(t,r,e),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=0,n[4]=t[0],n[5]=t[1],n[6]=t[2],n[7]=0,n[8]=r[0],n[9]=r[1],n[10]=r[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}}(),i.mat4.maxScaleOnAxis=function(e){var t=e[0],r=e[4],n=e[8],i=e[1],o=e[5],a=e[9],u=e[2],c=e[6],l=e[10],s=t*t+r*r+n*n,f=i*i+o*o+a*a,p=u*u+c*c+l*l;return Math.sqrt(Math.max(s,f,p))},i.mat4.perspectiveGL=function(e,t,r,n,o){var a=Math.tan(t/360*Math.PI)*n,u=a*r;return i.mat4.frustum(e,-u,u,-a,a,n,o),e},i.mat4.projectVec3=function(e,t,r){var n=r[0],i=r[1],o=r[2],a=t[0]*n+t[4]*i+t[8]*o+t[12],u=t[1]*n+t[5]*i+t[9]*o+t[13],c=t[2]*n+t[6]*i+t[10]*o+t[14],l=t[3]*n+t[7]*i+t[11]*o+t[15];return e[0]=(a/l+1)/2,e[1]=(u/l+1)/2,e[2]=(c/l+1)/2,e},i.mat4.setTranslation=function(e,t){return e[12]=t[0],e[13]=t[1],e[14]=t[2],e},i.mat4.setTranslationFromValues=function(e,t,r,n){return e[12]=t,e[13]=r,e[14]=n,e},i.mat4.makePerspective=function(e,t,r,n,i,o,a){var u=2*o/(r-t),c=2*o/(n-i),l=(r+t)/(r-t),s=(n+i)/(n-i),f=-(a+o)/(a-o),p=-2*a*o/(a-o);return e[0]=u,e[4]=0,e[8]=l,e[12]=0,e[1]=0,e[5]=c,e[9]=s,e[13]=0,e[2]=0,e[6]=0,e[10]=f,e[14]=p,e[3]=0,e[7]=0,e[11]=-1,e[15]=0,e},i.mat4.makeOrthographic=function(e,t,r,n,i,o,a){var u=1/(r-t),c=1/(n-i),l=1/(a-o),s=(r+t)*u,f=(n+i)*c,p=(a+o)*l;return e[0]=2*u,e[4]=0,e[8]=0,e[12]=-s,e[1]=0,e[5]=2*c,e[9]=0,e[13]=-f,e[2]=0,e[6]=0,e[10]=-2*l,e[14]=-p,e[3]=0,e[7]=0,e[11]=0,e[15]=1,e}},"./global/math/noise.js":function(e,t,r){"use strict";r.r(t),r.d(t,"noise",(function(){return p}));var n,i,o,a,u,c,l,s=r("./global/math/vec3.js"),f=r("./global/math/vec4.js"),p={};p.turbulence=(n=[],i=[],o=[],a=!1,function(e,t,r,u,c,l){a||function(){for(var e=0;e<256;e++)n[e]=f.vec4.fromValues(Math.random()-.5,Math.random()-.5,Math.random()-.5,Math.random()-.5),i[e]=e;for(var t=256;--t;){var r=i[t],u=Math.floor(256*Math.random());i[t]=i[u],i[u]=r}for(var c=0;c<256;c++)i[256+c]=i[c],n[256+c]=n[c],n[512+c]=n[c];for(var l=0;l<15;++l)o[l]=s.vec3.create();a=!0}(),t+=4096,r+=4096,u+=4096,c+=4096;var p=Math.floor(t),d=Math.floor(r),y=Math.floor(u),m=Math.floor(c),b=t-p,h=r-d,v=u-y,g=c-m,w=1+(p&=255),x=1+(d&=255),_=1+(y&=255),z=1+(m&=255),S=i[p],j=i[w],E=i[S+d],T=i[j+d],O=i[S+x],R=i[j+x],P=s.vec3.lerp(o[0],n[E+y+m],n[T+y+m],b),D=s.vec3.lerp(o[1],n[O+y+m],n[R+y+m],b),A=s.vec3.lerp(o[2],n[E+_+m],n[T+_+m],b),M=s.vec3.lerp(o[3],n[E+_+m],n[T+_+m],b),C=s.vec3.lerp(o[4],P,D,h),k=s.vec3.lerp(o[5],A,M,h),I=s.vec3.lerp(o[6],C,k,v);P=s.vec3.lerp(o[7],n[E+y+z],n[T+y+z],b),D=s.vec3.lerp(o[8],n[O+y+z],n[R+y+z],b),A=s.vec3.lerp(o[9],n[E+_+z],n[T+_+z],b),M=s.vec3.lerp(o[10],n[E+_+z],n[T+_+z],b),C=s.vec3.lerp(o[11],P,D,h),k=s.vec3.lerp(o[12],A,M,h);var L=s.vec3.lerp(o[13],C,k,v),G=s.vec3.lerp(o[14],I,L,g);return e[0]+=G[0]*l,e[1]+=G[1]*l,e[2]+=G[2]*l,e}),p.perlin1=(u=!1,c=null,l=null,function(e){u||function(){c=new Array(514),l=new Array(514);var e=0,t=0,r=0;for(e=0;e<256;e++)c[e]=e,l[e]=2*Math.random()-1;for(;--e;)r=c[e],c[e]=c[t=Math.floor(256*Math.random())],c[t]=r;for(e=0;e<258;e++)c[256+e]=c[e],l[256+e]=l[e];u=!0}();var t=e+4096,r=255&Math.floor(t),n=r+1&255,i=t-Math.floor(t),o=i-1,a=i*i*(3-2*i),s=i*l[c[r]];return s+a*(o*l[c[n]]-s)}),p.perlin1D=function(e,t,r,n){for(var i=0,o=e,a=1,u=0;u<n;++u)i+=p.perlin1(o)/a,a*=t,o*=r;return i}},"./global/math/num.js":function(e,t,r){"use strict";r.r(t),r.d(t,"num",(function(){return o}));var n,i,o={};o.EPSILON=1e-6,o.RAD2DEG=180/Math.PI,o.DEG2RAD=Math.PI/180,o.TWO_PI=2*Math.PI,o.PI=Math.PI,o.biCumulative=function(e,t){if(1===t){var r=1-e;return 1-r*r*r}return 2===t?3*e*e-2*e*e*e:e*e*e},o.ceil=Math.ceil,o.clamp=function(e,t,r){return Math.max(t,Math.min(r,e))},o.decimalPlaces=function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},o.degrees=function(e){return e*o.RAD2DEG},o.degreesUnwrapped=function(e){return o.unwrapDegrees(e*o.RAD2DEG)},o.dwordToFloat=function(e){var t=(16711680&e)>>16,r=(4278190080&e)>>24,n=(r<<1&255|t>>7)-127,i=(127&t)<<16|(65280&e)>>8<<8|255&e;return 0===i&&-127===n?0:(1-2*(r>>7))*(1+i*Math.pow(2,-23))*Math.pow(2,n)},o.equals=function(e,t){return Math.abs(e-t)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},o.exactEquals=function(e,t){return e===t},o.exponentialDecay=function(e,t,r,n,i){return t*i/n+r*(e*n-t)/(n*n)*(1-Math.pow(Math.E,-n*i/r))},o.fract=function(e){return e-Math.floor(e)},o.fromHalfFloat=function(e){var t=(32768&e)>>15,r=(31744&e)>>10,n=1023&e;return 0===r?(t?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):31===r?n?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,r-15)*(1+n/Math.pow(2,10))},o.floor=Math.floor,o.getLongWordOrder=function(e){return 0===e||255===e||-16777216===e?0:1+o.getLongWordOrder(e>>8)},o.greaterThan=function(e,t){return e>t?1:0},o.greaterThanEqual=function(e,t){return o.isEqual(e,t)||e>t?1:0},o.greaterThanExactEqual=function(e,t){return e>=t?1:0},o.isEven=function(e){return Math.abs(e)%2==0},o.isFloat=function(e){return e%1!=0},o.isFinite=Number.isFinite,o.isInt=function(e){return e%1==0},o.isNaN=Number.isNaN,o.isOdd=function(e){return Math.abs(e)%2==1},o.isPowerOfTwo=function(e){return 0==(e&e-1)&&0!==e},o.lessThan=function(e,t){return e<t?1:0},o.lessThanEqual=function(e,t){return o.isEqual(e,t)||e<t?1:0},o.lessThanExactEqual=function(e,t){return e<=t?1:0},o.log2=function(e){return Math.log(e)*Math.LOG2E},o.max=Math.max,o.min=Math.min,o.nearestPowerOfTwo=function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},o.normalizeInt=function(e,t,r,n){var i=r-t,o=e-t,a=o-o/i*i+t;return void 0===n?a:Number(a.toFixed(n))},o.normalizeFloat=function(e,t,r,n){var i=r-t,o=e-t,a=o-Math.floor(o/i)*i+t;return void 0===n?a:Number(a.toFixed(n))},o.radians=function(e){return e*o.DEG2RAD},o.radiansUnwrapped=function(e){return o.unwrapRadians(e*=o.DEG2RAD)},o.randomInt=function(e,t){return e+Math.floor(Math.random()*(t-e+1))},o.randomFloat=function(e,t){return e+Math.random()*(t-e)},o.round=Math.round,o.roundToZero=function(e){return e<0?Math.ceil(e):Math.floor(e)},o.step=o.greaterThan,o.smoothStep=function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},o.smootherStep=function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},o.toHalfFloat=function(e){n||(n=new Float32Array(1),i=new Int32Array(n.buffer)),n[0]=e;var t=i[0],r=t>>16&32768,o=t>>12&2047,a=t>>23&255;return a<103?r:a>142?(r|=31744,r|=(255===a?0:1)&&8388607&t):a<113?r|=((o|=2048)>>114-a)+(o>>113-a&1):(r|=a-112<<10|o>>1,r+=1&o)},o.colorFromLinear=function(e){return Math.min(Math.floor(255*e),255)},o.linearFromColor=function(e){return e/255},o.hexFromLinear=function(e){return o.hexFromColor(o.colorFromLinear(e))},o.hexFromColor=function(e){return(256|e).toString(16).slice(1)},o.unwrapDegrees=function(e){return(e%=360)>180&&(e-=360),e<-180&&(e+=360),e},o.unwrapRadians=function(e){return(e%=o.TWO_PI)>o.PI&&(e-=o.TWO_PI),e<-o.PI&&(e+=o.TWO_PI),e}},"./global/math/pln.js":function(e,t,r){"use strict";r.r(t),r.d(t,"pln",(function(){return s}));var n,i,o=r("./global/math/num.js"),a=r("./global/math/vec3.js"),u=r("./global/math/vec4.js"),c=r("./global/math/mat3.js"),l=r("./global/math/box3.js"),s={};s.$normal=function(e){return e.subarray(0,3)},s.clone=u.vec4.clone,s.constant=function(e){return e[3]},s.copy=u.vec4.copy,s.create=u.vec4.create,s.distanceToPoint=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]},s.distanceToPositionRadius=function(e,t,r){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]-r},s.distanceToSph3=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]-t[3]},s.distanceToValues=function(e,t,r,n){return e[0]*t+e[1]*r+e[2]*n+e[3]},s.equals=u.vec4.equals,s.equalsNormalConstant=function(e,t,r){var n=e[0],i=e[1],a=e[2],u=e[3],c=t[0],l=t[1],s=t[2],f=r;return Math.abs(n-c)<=o.num.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-l)<=o.num.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-s)<=o.num.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(u-f)<=o.num.EPSILON*Math.max(1,Math.abs(u),Math.abs(f))},s.exactEquals=u.vec4.exactEquals,s.exactEqualsNormalConstant=function(e,t,r){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===r},s.extract=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],e[3]},s.fromNormalConstant=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r,e},s.fromCoplanarPoints=function(e,t,r,n){var i=n[0]-r[0],o=n[1]-r[1],a=n[2]-r[2],u=t[0]-r[0],c=t[1]-r[1],l=t[2]-r[2],s=o*l-a*c,f=a*u-i*l,p=i*c-o*u,d=s*s+f*f+p*p;if(!(d>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return d=1/Math.sqrt(d),e[0]=s*d,e[1]=f*d,e[2]=p*d,e[3]=-(t[0]*e[0]+t[1]*e[1]+t[2]*e[2]),e},s.fromNormalAndCoplanarPoint=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),e},s.getCoplanarPoint=function(e,t){return e[0]=t[0]*-t[3],e[1]=t[1]*-t[3],e[2]=t[2]*-t[3],e},s.getIntersectLne3=function(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],u=r[4],c=r[5];e[0]=0,e[1]=0,e[2]=0;var l=a-n,s=u-i,f=c-o,p=t[0]*l+t[1]*s+t[2]*f;if(0===p){if(t[0]*n+t[1]*i+t[2]*o+t[3]===0)return e[0]=n,e[1]=i,e[2]=o,e;throw new Error("Denominator error")}var d=(n*t[0]+i*t[1]+o*t[2]+t[3])/p;if(d<0||d>1)throw new Error("Normalization error");return e[0]=l*d+n,e[1]=s*d+i,e[2]=f*d+o,e},s.getIntersectStartEnd=function(e,t,r,i){return n||(n=l.box3.create()),l.box3.from(n,r,i),s.getIntersectLne3(e,t,n)},s.getNormal=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},s.getOrthoPoint=function(e,t,r){var n=t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3];return a.vec3.multiplyScalar(e,t,n),e},s.getProjectedPoint=function(e,t,r){return s.getOrthoPoint(e,t,r),e[0]=-(e[0]-r[0]),e[1]=-(e[1]-r[1]),e[2]=-(e[2]-r[2]),e},s.intersectsBounds=function(){var e;return function(t,r,n){return e||(e=l.box3.create()),l.box3.from(e,r,n),l.box3.intersectsPln(e,t)}}(),s.intersectsBox3=function(e,t){return l.box3.intersectsPln(t,e)},s.intersectsLne3=function(e,t){var r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3],n=e[0]*t[3]+e[1]*t[4]+e[2]*t[5]+e[3];return r<0&&n>0||n<0&&r>0},s.intersectsPositionRadius=function(e,t,r){var n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2];return Math.abs(n-e[3])<=r},s.intersectsSph3=function(e,t){var r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2];return Math.abs(r-e[3])<=t[3]},s.intersectsStartEnd=function(e,t,r){var n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3],i=e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3];return n<0&&i>0||i<0&&n>0},s.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-1*t[3],e},s.normalize=function(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;if(!(o>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o,e},s.set=u.vec4.set,s.setAndNormalize=function(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,s.normalize(e,e)},s.setArray=u.vec4.setArray,s.toArray=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],e},s.transformMat4=function(e,t,r,n){n||i||(i=c.mat3.create()),n=n||c.mat3.normalFromMat4(i,r);var o=t[0]*-t[3],a=t[1]*-t[3],u=t[2]*-t[3],l=r[0]*o+r[4]*a+r[8]*u+r[12],s=r[1]*o+r[5]*a+r[9]*u+r[13],f=r[2]*o+r[6]*a+r[10]*u+r[14],p=t[0],d=t[1],y=t[2],m=p*n[0]+d*n[3]+y*n[6],b=p*n[1]+d*n[4]+y*n[7],h=p*n[2]+d*n[5]+y*n[8],v=m*m+b*b+h*h;if(!(v>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return v=1/Math.sqrt(v),e[0]=m*v,e[1]=b*v,e[2]=h*v,e[3]=-(l*e[0]+s*e[1]+f*e[2]),e},s.translate=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),e}},"./global/math/quat.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"quat",(function(){return n.quat})),n.quat.exp=function(e,t){var r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return r?(e[0]=Math.sin(r)*t[0]/r,e[1]=Math.sin(r)*t[1]/r,e[2]=Math.sin(r)*t[2]/r,e[3]=Math.cos(r)):(e[0]=0,e[1]=0,e[2]=0,e[3]=1),e},n.quat.ln=function(e,t){var r=n.quat.length(t);if(r>1.0001||r<.99999)e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0;else if(r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])){var i=Math.atan2(r,t[3])/r;e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=0}else e[0]=0,e[1]=0,e[2]=0,e[3]=0;return e},n.quat.pow=function(e,t,r){return 1===r?n.quat.copy(e,t):(n.quat.ln(e,t),e[0]*=r,e[1]*=r,e[2]*=r,e[3]*=r,n.quat.exp(e,e),e)}},"./global/math/ray3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ray3",(function(){return y}));var n,i,o,a,u,c=r("./global/math/vec3.js"),l=r("./global/math/pln.js"),s=r("./global/math/sph3.js"),f=r("./global/math/box3.js"),p=r("./global/math/tri3.js"),d=r("./global/math/mat3.js"),y={};y.$origin=f.box3.$min,y.$direction=f.box3.$max,y.clone=f.box3.clone,y.copy=f.box3.copy,y.copyOrigin=f.box3.copyMin,y.copyDirection=f.box3.copyMax,y.create=f.box3.create,y.distance=function(e,t){return Math.sqrt(y.squaredDistance(e,t))},y.distanceNormalConstant=function(e,t,r){var n=t[0]*e[3]+t[1]*e[4]+t[2]*e[5],i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+r;if(0===n){if(0===i)return 0;throw new Error("Determinant error")}var o=-i/n;return o>=0?o:null},y.distancePln=function(e,t){var r=t[0]*e[3]+t[1]*e[4]+t[2]*e[5],n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+t[3];if(0===r){if(0===n)return 0;throw new Error("Determinant error")}var i=-n/r;return i>=0?i:null},y.equals=f.box3.equals,y.equalsOriginDestination=f.box3.equalsBounds,y.exactEquals=f.box3.exactEquals,y.exactEqualsOriginDestination=f.box3.exactEqualsBounds,y.from=f.box3.from,y.fromArray=f.box3.fromArray,y.fromStartEnd=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0]-t[0],e[4]=r[1]-t[1],e[5]=r[2]-t[2],y.normalize(e,e)},y.fromMat4=function(e,t){return n||(n=d.mat3.create()),e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-1,c.vec3.transformMat4(y.$origin(e),y.$origin(e),t),d.mat3.fromMat4(n,t),c.vec3.transformMat3(y.$direction(e),y.$direction(e),n),y.normalize(e,e)},y.fromPerspective=function(e,t,r,n){var i=2*(t[0]-n[0])/n[2]-1,o=2*(t[1]-n[1])/n[3]-1,a=r[3]*i+r[7]*o+-1*r[11]+r[15],u=r[3]*i+r[7]*o+1*r[11]+r[15];if(0===a||0===u)throw new Error("Perspective Divide Error");return e[0]=(r[0]*i+r[4]*o+-1*r[8]+r[12])/a,e[1]=(r[1]*i+r[5]*o+-1*r[9]+r[13])/a,e[2]=(r[2]*i+r[6]*o+-1*r[10]+r[14])/a,e[3]=(r[0]*i+r[4]*o+1*r[8]+r[12])/u-e[0],e[4]=(r[1]*i+r[5]*o+1*r[9]+r[13])/u-e[1],e[5]=(r[2]*i+r[6]*o+1*r[10]+r[14])/u-e[2],y.normalize(e,e)},y.unproject=function(e,t,r,n){var i=[t[0],t[1],0],o=[t[0],t[1],1];return c.vec3.unproject(i,i,r,n),c.vec3.unproject(o,o,r,n),y.fromStartEnd(e,i,o)},y.get=function(e,t,r){return e[0]=t[0]+t[3]*r,e[1]=t[1]+t[4]*r,e[2]=t[2]+t[5]*r,e},y.getDirection=f.box3.getMax,y.getClosestPointToPoint=function(e,t,r){var n=r[0]-t[0],i=r[1]-t[1],o=r[2]-t[2],a=n*t[3]+i*t[4]+o*t[5];return a<0?(e[0]=t[0],e[1]=t[1],e[2]=t[2]):y.get(e,t,a),e},y.getIntersectBounds=function(e,t,r,n){var i,o,a,u,c,l,s=1/t[3],f=1/t[4],p=1/t[5];return s>=0?(i=(r[0]-t[0])*s,o=(n[0]-t[0])*s):(i=(n[0]-t[0])*s,o=(r[0]-t[0])*s),f>=0?(a=(r[1]-t[1])*f,u=(n[1]-t[1])*f):(a=(n[1]-t[1])*f,u=(r[1]-t[1])*f),i>u||a>o?null:((a>i||i!=i)&&(i=a),(u<o||o!=o)&&(o=u),p>=0?(c=(r[2]-t[2])*p,l=(n[2]-t[2])*p):(c=(n[2]-t[2])*p,l=(r[2]-t[2])*p),i>l||c>o?null:((c>i||i!=i)&&(i=c),(l<o||o!=o)&&(o=l),o<0?null:y.get(e,t,i>=0?i:o)))},y.getIntersectBox3=function(e,t,r){return i||(i=c.vec3.create(),o=c.vec3.create()),f.box3.getMin(i,r),f.box3.getMax(o,r),y.getIntersectBounds(e,t,i,o)},y.getIntersectTri3=function(){var e,t,r;return function(n,i,o,a){return e||(e=c.vec3.create(),t=c.vec3.create(),r=c.vec3.create()),p.tri3.getV1(e,o),p.tri3.getV2(t,o),p.tri3.getV3(r,o),y.getIntersectVertices(n,i,e,t,r,a)}}(),y.getIntersectVertices=function(){var e,t,r,n,i,o;return function(a,u,l,s,f,p){e||(e=c.vec3.create(),t=c.vec3.create(),r=c.vec3.create(),n=c.vec3.create(),i=c.vec3.create(),o=c.vec3.create());var d,m=y.getOrigin(i,u),b=y.getDirection(o,u),h=c.vec3.subtract(e,m,l),v=c.vec3.subtract(t,s,l),g=c.vec3.subtract(r,f,l),w=c.vec3.cross(n,v,g),x=c.vec3.dot(b,w);if(x>0){if(p)return null;d=1}else{if(!(x<0))return null;d=-1,x=-x}c.vec3.cross(g,h,g);var _=d*c.vec3.dot(b,g);if(_<0)return null;c.vec3.cross(v,v,h);var z=d*c.vec3.dot(b,v);if(z<0)return null;if(_+z>x)return null;var S=-d*c.vec3.dot(h,w);return S<0?null:y.get(a,u,S/x)}}(),y.getIntersectNormalConstant=function(e,t,r,n){var i=y.distanceNormalConstant(t,r,n);return null!==i?y.get(e,t,i):null},y.getIntersectPln=function(e,t,r){var n=y.distancePln(t,r);return null!==n?y.get(e,t,n):null},y.getIntersectPositionRadius=function(e,t,r,n){return a||(a=s.sph3.create()),s.sph3.from(a,r,n),y.getIntersectSph3(e,t,a)},y.getIntersectSph3=function(e,t,r){var n=r[0]-t[0],i=r[1]-t[1],o=r[2]-t[2],a=r[3]*r[3],u=n*t[3]+i*t[4]+o*t[5],c=n*n+i*i+o*o-u*u;if(c>a)return null;var l=Math.sqrt(a-c),s=u-l,f=u+l;return s<0&&f<0?null:s<0?y.get(e,t,f):y.get(e,t,s)},y.getOrigin=f.box3.getMin,y.intersectsBox3=function(){var e;return function(t,r){return e||(e=c.vec3.create()),y.vec3_0=null!==y.getIntersectBox3(e,t,r)}}(),y.intersectsBounds=function(){var e;return function(t,r,n){return e||(e=c.vec3.create()),null!==y.getIntersectBounds(e,t,r,n)}}(),y.intersectsNormalConstant=function(e,t,r){var n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+r;return 0===n||(t[0]*e[3]+t[1]*e[4]+t[2]*e[5])*n<0},y.intersectsPln=function(e,t){var r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+t[3];return 0===r||(t[0]*e[3]+t[1]*e[4]+t[2]*e[5])*r<0},y.intersectsPositionRadius=function(e,t,r){return y.distance(e,t)<=r},y.intersectsSph3=function(e,t){return y.distance(e,t)<=t[3]},y.lookAt=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0]-t[0],e[4]=r[1]-t[1],e[5]=r[2]-t[2],y.normalize(e,e)},y.normalize=function(e,t){e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]);var r=t[3],n=t[4],i=t[5],o=r*r+n*n+i*i;if(!(o>0))throw e[1]=0,e[2]=0,e[3]=0,new Error("Normalization error");return o=1/Math.sqrt(o),e[3]=r*o,e[4]=n*o,e[5]=i*o,e},y.recast=function(e,t,r){return e[0]=t[0]+t[3]*r,e[1]=t[1]+t[4]*r,e[2]=t[2]+t[5]*r,e[3]=t[3],e[4]=t[4],e[5]=t[5],e},y.set=f.box3.set,y.SORT=function(e,t){return e.distance-t.distance},y.squaredDistance=function(){var e,t;return function(r,n){e||(e=c.vec3.create(),t=c.vec3.create()),e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2];var i=e[0]*r[3]+e[1]*r[4]+e[2]*r[5];return i<0?(y.getOrigin(t,r),c.vec3.squaredDistance(t,n)):(y.get(e,r,i),c.vec3.squaredDistance(e,n))}}(),y.toArray=f.box3.toArray,y.toOriginDirection=function(e,t,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[3],r[1]=e[4],r[2]=e[5],e},y.transformMat4=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3]+t[0],u=t[4]+t[1],c=t[5]+t[2],l=r[3]*n+r[7]*i+r[11]*o+r[15]||1,s=r[3]*a+r[7]*u+r[11]*c+r[15]||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/l,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/l,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/l,e[3]=(r[0]*a+r[4]*u+r[8]*c+r[12])/s-e[0],e[4]=(r[1]*a+r[5]*u+r[9]*c+r[13])/s-e[1],e[5]=(r[2]*a+r[6]*u+r[10]*c+r[14])/s-e[2],y.normalize(e,e)},y.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},y.fromEvent=function(e,t,r,n,i,o){u||(u=l.pln.create());var a=r.target||r.srcElement,c=a.getBoundingClientRect(),s=r.clientX,f=r.clientY,p=s-c.left,d=f-c.top,m=p*a.width/a.clientWidth,b=a.height-d*a.height/a.clientWidth-1;return u[0]=0,u[1]=0,u[2]=a.width,u[3]=a.height,n&&(n[0]=s,n[1]=f),i&&(i[0]=m,i[1]=b),o&&(o[0]=p,o[1]=d),y.unproject(e,[m,b],t,u)}},"./global/math/sph3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"sph3",(function(){return p}));var n,i,o,a,u=r("./global/math/vec3.js"),c=r("./global/math/vec4.js"),l=r("./global/math/mat4.js"),s=r("./global/math/pln.js"),f=r("./global/math/box3.js"),p={},d=null;p.$position=s.pln.$normal,p.clone=c.vec4.clone,p.containsPoint=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i<=e[3]*e[3]},p.copy=c.vec4.copy,p.create=function(){return new Float32Array([0,0,0,0])},p.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],o=t[3]+e[3];return Math.sqrt(r*r+n*n+i*i)-o},p.distanceToPoint=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)-e[3]},p.empty=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},p.equals=c.vec4.equals,p.equalsPositionRadius=s.pln.equalsNormalConstant,p.exactEquals=c.vec4.exactEquals,p.exactEqualsPositionRadius=s.pln.exactEqualsNormalConstant,p.extract=s.pln.extract,p.fromBox3=function(e,t){var r=t[3]-t[0],n=t[4]-t[1],i=t[5]-t[2];return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e[3]=.5*Math.sqrt(r*r+n*n+i*i),e},p.fromBounds=function(e,t,r){var n=r[0]-t[0],i=r[1]-t[1],o=r[2]-t[2];return e[0]=.5*(t[0]+r[0]),e[1]=.5*(t[1]+r[1]),e[2]=.5*(t[2]+r[2]),e[3]=.5*Math.sqrt(n*n+i*i+o*o),e},p.fromPositionRadius=s.pln.fromNormalConstant,p.fromTranslationRadius=function(e,t,r){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e[3]=r,e},p.fromMat4=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e[3]=l.mat4.maxScaleOnAxis(t),e},p.union=function(e,t,r){n||(n=u.vec3.create(),i=u.vec3.create(),u.vec3.create(),o=u.vec3.create());var c=p.extract(t,n),l=p.extract(r,i);u.vec3.subtract(o,i,n);var s=u.vec3.length(o);if(c>=s+l)return e===t?e:p.copy(e,t);if(l>=s+c)return e===r?e:p.copy(e,r);a||(a=u.vec3.create());var f=.5*(c+s+l);return u.vec3.scale(a,o,(-c+f)/s),u.vec3.add(a,n,a),p.fromPositionRadius(e,a,f)},p.unionPositionRadius=function(e,t,r,n){return p.union(e,t,p.fromPositionRadius(null,r,n))},p.getClampedPoint=function(e,t,r){e[0]=r[0],e[1]=r[1],e[2]=r[2];var n=t[0]-r[0],i=t[1]-r[1],o=t[2]-r[2];return n*n+i*i+o*o>t[3]*t[3]&&(e[0]=e[0]-t[0],e[1]=e[1]-t[1],e[2]=e[2]-t[2],u.vec3.normalize(e,e),e[0]=e[0]*t[3]+t[0],e[1]=e[1]*t[3]+t[1],e[2]=e[2]*t[3]+t[2]),e},p.getPointFromLongLat=function(e,t,r,n){return e[0]=t[0]+t[3]*Math.sin(n)*Math.cos(r),e[1]=t[1]+t[3]*Math.sin(n)*Math.sin(r),e[2]=t[2]+t[3]*Math.cos(n),e},p.getPosition=s.pln.getNormal,p.intersectsSph3=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],o=e[3]+t[3];return r*r+n*n+i*i<=o*o},p.intersectsBox3=function(e,t){return f.box3.intersectsSph3(t,e)},p.intersectsBounds=function(e,t,r){var n=Math.max(t[0],Math.min(r[0],e[0]))-e[0],i=Math.max(t[1],Math.min(r[1],e[1]))-e[1],o=Math.max(t[2],Math.min(r[2],e[2]))-e[2];return n*n+i*i+o*o<=e[3]*e[3]},p.intersectsPositionRadius=function(e,t,r){var n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2],a=e[3]+r;return n*n+i*i+o*o<=a*a},p.intersectsPln=function(e,t){return s.pln.intersectsSph3(t,e)},p.intersectsNormalConstant=function(e,t,r){var n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2];return Math.abs(n-r)<=e[3]},p.isEmpty=function(e){return e[3]<=0},p.radius=s.pln.constant,p.set=c.vec4.set,p.setArray=c.vec4.setArray,p.setPoints=function(e,t,r){d||(d=f.box3.create()),r?(e[0]=r[0],e[1]=r[1],e[2]=r[2]):(f.box3.setPoints(d,t),e[0]=.5*(d[0]+d[3]),e[1]=.5*(d[1]+d[4]),e[2]=.5*(d[2]+d[5]));for(var n=0,i=0;i<t.length;i++){var o=e[0]-t[i][0],a=e[1]-t[i][1],u=e[2]-t[i][2];n=Math.max(n,o*o+a*a+u*u)}return e[3]=Math.sqrt(n),e},p.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],o=t[3]+e[3];return r*r+n*n+i*i-o*o},p.squaredDistanceToPoint=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i-e[3]},p.toArray=c.vec4.toArray,p.toBounds=function(e,t,r){d||(d=f.box3.create()),f.box3.fromSph3(d,e),f.box3.toBounds(d,t,r)},p.toPositionRadius=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],e[3]},p.transformMat4=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],u=r[4]*r[4]+r[5]*r[5]+r[6]*r[6],c=r[8]*r[8]+r[9]*r[9]+r[10]*r[10];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12],e[1]=r[1]*n+r[5]*i+r[9]*o+r[13],e[2]=r[2]*n+r[6]*i+r[10]*o+r[14],e[3]=t[3]*Math.sqrt(Math.max(a,u,c)),e},p.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}},"./global/math/tri3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tri3",(function(){return s}));var n,i,o,a=r("./global/math/vec3.js"),u=r("./global/math/mat3.js"),c=r("./global/math/pln.js"),l=r("./global/math/lne3.js"),s={};s.$v1=l.lne3.$start,s.$v2=l.lne3.$end,s.$v3=function(e){return e.subarray(6,9)},s.area=function(e){var t=e[6]-e[3],r=e[7]-e[4],n=e[8]-e[5],i=e[0]-e[3],o=e[1]-e[4],a=e[2]-e[5],u=t*a-n*o,c=n*i-t*a,l=t*o-r*i;return.5*Math.sqrt(u*u+c*c+l*l)},s.create=function(){var e=new Float32Array(9);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0,e},s.clone=u.mat3.clone,s.contains=function(){var e;return function(t,r){return e||(e=a.vec3.create()),s.getBaryCentricCoordinates(e,t,r),e[0]>=0&&e[1]>=0&&e[0]+e[1]<=1}}(),s.copy=u.mat3.copy,s.fromVertices=function(e,t,r,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0],e[4]=r[1],e[5]=r[2],e[6]=n[0],e[7]=n[1],e[8]=n[2],e},s.fromArray=u.mat3.fromArray,s.getBaryCentricCoordinates=function(e,t,r){var n=t[6]-t[0],i=t[7]-t[1],o=t[8]-t[2],a=t[3]-t[0],u=t[4]-t[1],c=t[5]-t[2],l=r[0]-n,s=r[1]-i,f=r[2]-o,p=n*n+i*i+o*o,d=n*a+i*u+o*c,y=n*l+i*s+o*f,m=a*a+u*u+c*c,b=a*l+u*s+c*f,h=p*m-d*d;if(0===h)throw e[0]=-2,e[1]=-1,e[2]=-1,new Error("Denominator error");var v=1/h,g=(m*y-d*b)*v,w=(p*b-d*y)*v;return e[0]=1-g-w,e[1]=w,e[2]=g,e},s.getClosestEdgeToPoint=function(e,t,r,u){n||(n=a.vec3.create(),i=a.vec3.create(),o=[l.lne3.create(),l.lne3.create(),l.lne3.create()]);var c=s.getClosestPointToPoint(n,t,r);l.lne3.set(o[0],t[0],t[1],t[2],t[3],t[4],t[5]),l.lne3.set(o[1],t[3],t[4],t[5],t[6],t[7],t[8]),l.lne3.set(o[2],t[6],t[7],t[8],t[0],t[1],t[2]);for(var f,p=1/0,d=0;d<o.length;d++){var y=l.lne3.getClosestPointToPoint(i,o[d],c,!0),m=a.vec3.squaredDistance(y,c);m<p&&(p=m,e[0]=o[d][0],e[1]=o[d][1],e[2]=o[d][2],e[3]=o[d][3],e[4]=o[d][4],e[5]=o[d][5],f=d)}if(u)switch(f){case 0:u.edgeStart=0,u.edgeEnd=1;break;case 1:u.edgeStart=1,u.edgeEnd=2;break;default:u.edgeStart=2,u.edgeEnd=1}return e},s.getClosestPointToPoint=function(){var e,t,r,n,i,o,u;return function(f,p,d){if(e||(e=c.pln.create(),t=[l.lne3.create(),l.lne3.create(),l.lne3.create()],r=a.vec3.create(),n=a.vec3.create(),i=a.vec3.create(),o=a.vec3.create(),u=a.vec3.create()),s.getV1(i,p),s.getV2(o,p),s.getV3(u,p),c.pln.fromCoplanarPoints(e,i,o,u),c.pln.getProjectedPoint(r,e,d),!0===s.contains(p,r))f[0]=r[0],f[1]=r[1],f[2]=r[2];else{l.lne3.set(t[0],p[0],p[1],p[2],p[3],p[4],p[5]),l.lne3.set(t[1],p[3],p[4],p[5],p[6],p[7],p[8]),l.lne3.set(t[2],p[6],p[7],p[8],p[0],p[1],p[2]);for(var y=1/0,m=0;m<t.length;m++){l.lne3.getClosestPointToPoint(n,t[m],r,!0);var b=a.vec3.squaredDistance(r,n);b<y&&(y=b,f[0]=n[0],f[1]=n[1],f[2]=n[2])}}return f}}(),s.getClosestVertexToPoint=function(){var e,t,r;return function(n,i,o,u){e||(e=a.vec3.create(),t=a.vec3.create(),r=a.vec3.create()),s.getClosestPointToPoint(n,i,o);for(var c,l,f,p,d,y=1/0,m=[s.getV1(e,i),s.getV2(t,i),s.getV3(r,i)],b=0;b<m.length;b++)(c=a.vec3.squaredDistance(m[b],n))<y&&(y=c,l=m[b][0],f=m[b][1],p=m[b][2],d=b);return u&&(u.closest=d),n[0]=l,n[1]=f,n[2]=p,n}}(),s.getMidpoint=function(e,t){return e[0]=(t[0]+t[3]+t[6])*(1/3),e[1]=(t[1]+t[4]+t[7])*(1/3),e[2]=(t[2]+t[5]+t[8])*(1/3),e};var f,p,d,y=null;s.getNormalFromVertices=function(e,t,r,n){return y||(y=s.create()),s.fromVertices(y,t,r,n),s.getNormal(e,y)},s.getNormal=function(e,t){var r=t[6]-t[3],n=t[7]-t[4],i=t[8]-t[5],o=t[0]-t[3],a=t[1]-t[4],u=t[2]-t[5],c=n*u-i*a,l=i*o-r*u,s=r*a-n*o,f=c*c+l*l+s*s;if(!(f>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return f=1/Math.sqrt(f),e[0]=c*f,e[1]=l*f,e[2]=s*f,e},s.getV1=l.lne3.getStart,s.getV2=l.lne3.getEnd,s.getV3=function(e,t){return e[0]=t[6],e[1]=t[7],e[2]=t[8],e},s.setV1=l.lne3.setStart,s.setV2=l.lne3.setEnd,s.setV3=function(e,t){return e[6]=t[0],e[7]=t[1],e[8]=t[2],e},s.toArray=u.mat3.toArray,s.toVertices=function(e,t,r,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[0],r[1]=e[1],r[2]=e[2],n[0]=e[0],n[1]=e[1],n[2]=e[2],e},s.transformMat4=function(e,t,r){return f||(f=a.vec3.create(),p=a.vec3.create(),d=a.vec3.create()),s.getV1(f,t),s.getV2(p,t),s.getV3(d,t),a.vec3.transformMat4(f,f,r),a.vec3.transformMat4(p,p,r),a.vec3.transformMat4(d,d,r),s.fromVertices(e,f,p,d)}},"./global/math/vec2.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec2",(function(){return n.vec2})),n.vec2.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e},n.vec2.isEmpty=function(e){return 0===e[0]&&0===e[1]},n.vec2.divideScalar=function(e,t,r){return n.vec2.multiplyScalar(e,t,1/r)},n.vec2.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},n.vec2.setScalar=function(e,t){return e[0]=t,e[1]=t,e},n.vec2.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e},n.vec2.fromArray=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[0]=t[r],e[1]=t[r+1],e},n.vec2.mousePositionFromEvent=function(e,t){return e[0]=t.clientX,e[1]=t.clientY,e},n.vec2.cssPositionFromEvent=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.target,n=r.getBoundingClientRect();return e[0]=t.clientX-n.left,e[1]=t.clientY-n.top,e},n.vec2.pixelPositionFromEvent=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.target,n=r.getBoundingClientRect(),i=t.clientX-n.left,o=t.clientY-n.top;return e[0]=i*r.width/r.clientWidth,e[1]=r.height-o*r.height/r.clientHeight-1,e}},"./global/math/vec3.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec3",(function(){return n.vec3}));var i,o,a,u,c=r("./global/math/num.js");n.vec3.X_AXIS=n.vec3.fromValues(1,0,0),n.vec3.Y_AXIS=n.vec3.fromValues(0,1,0),n.vec3.Z_AXIS=n.vec3.fromValues(0,0,1),n.vec3.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e[2]=t[2]+r,e},n.vec3.degrees=function(e,t){return e[0]=c.num.degrees(t[0]),e[1]=c.num.degrees(t[1]),e[2]=c.num.degrees(t[2]),e},n.vec3.degreesUnwrapped=function(e,t){return e[0]=c.num.degreesUnwrapped(t[0]),e[1]=c.num.degreesUnwrapped(t[1]),e[2]=c.num.degreesUnwrapped(t[2]),e},n.vec3.direction=function(e,t,r){return n.vec3.subtract(e,t,r),n.vec3.normalize(e,e),e},n.vec3.directionFromQuat=function(e,t,r){return n.vec3.transformQuat(e,t,r)},n.vec3.directionFromMat4=function(e,t,r){return i||(i=n.quat.create()),n.mat4.getRotation(i,r),n.vec3.transformQuat(e,t,i)},n.vec3.divideScalar=function(e,t,r){return n.vec3.multiplyScalar(e,t,1/r)},n.vec3.euler={},n.vec3.euler.DEFAULT_ORDER="XYZ",n.vec3.euler.fromQuat=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.vec3.euler.DEFAULT_ORDER;return o||(o=n.mat4.create()),n.mat4.fromQuat(o,t),n.vec3.euler.fromMat4(e,o,r)},n.vec3.euler.fromMat4=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.vec3.euler.DEFAULT_ORDER,i=t[0],o=t[4],a=t[8],u=t[1],l=t[5],s=t[9],f=t[2],p=t[6],d=t[10],y=c.num.clamp;if("XYZ"===r)e[1]=Math.asin(y(a,-1,1)),Math.abs(a)<.99999?(e[0]=Math.atan2(-s,d),e[2]=Math.atan2(-o,i)):(e[0]=Math.atan2(p,l),e[2]=0);else if("YXZ"===r)e[0]=Math.asin(-y(s,-1,1)),Math.abs(s)<.99999?(e[1]=Math.atan2(a,d),e[2]=Math.atan2(u,l)):(e[1]=Math.atan2(-f,i),e[2]=0);else if("ZXY"===r)e[0]=Math.asin(y(p,-1,1)),Math.abs(p)<.99999?(e[1]=Math.atan2(-f,d),e[2]=Math.atan2(-o,l)):(e[1]=0,e[2]=Math.atan2(u,i));else if("ZYX"===r)e[1]=Math.asin(-y(f,-1,1)),Math.abs(f)<.99999?(e[0]=Math.atan2(p,d),e[2]=Math.atan2(u,i)):(e[0]=0,e[2]=Math.atan2(-o,l));else if("YZX"===r)e[2]=Math.asin(y(u,-1,1)),Math.abs(u)<.99999?(e[0]=Math.atan2(-s,l),e[1]=Math.atan2(-f,i)):(e[0]=0,e[1]=Math.atan2(a,d));else{if("XZY"!==r)throw e[0]=0,e[1]=0,e[2]=0,new Error("Unrecognised euler order: "+r);e[2]=Math.asin(-y(o,-1,1)),Math.abs(o)<.99999?(e[0]=Math.atan2(p,l),e[1]=Math.atan2(a,i)):(e[0]=Math.atan2(-s,d),e[1]=0)}return e},n.vec3.euler.getQuat=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.vec3.euler.DEFAULT_ORDER,i=t[0],o=t[1],a=t[2],u=Math.cos(i/2),c=Math.cos(o/2),l=Math.cos(a/2),s=Math.sin(i/2),f=Math.sin(o/2),p=Math.sin(a/2);if("XYZ"===r)e[0]=s*c*l+u*f*p,e[1]=u*f*l-s*c*p,e[2]=u*c*p+s*f*l,e[3]=u*c*l-s*f*p;else if("YXZ"===r)e[0]=s*c*l+u*f*p,e[1]=u*f*l-s*c*p,e[2]=u*c*p-s*f*l,e[3]=u*c*l+s*f*p;else if("ZXY"===r)e[0]=s*c*l-u*f*p,e[1]=u*f*l+s*c*p,e[2]=u*c*p+s*f*l,e[3]=u*c*l-s*f*p;else if("ZYX"===r)e[0]=s*c*l-u*f*p,e[1]=u*f*l+s*c*p,e[2]=u*c*p-s*f*l,e[3]=u*c*l+s*f*p;else if("YZX"===r)e[0]=s*c*l+u*f*p,e[1]=u*f*l+s*c*p,e[2]=u*c*p-s*f*l,e[3]=u*c*l-s*f*p;else{if("XZY"!==r)throw e[0]=0,e[1]=0,e[2]=0,e[3]=1,new Error("Unrecognised euler order: "+r);e[0]=s*c*l-u*f*p,e[1]=u*f*l-s*c*p,e[2]=u*c*p+s*f*l,e[3]=u*c*l+s*f*p}return e},n.vec3.euler.getQuatFromValues=function(e,t,r,i,o){return a||(a=n.vec3.create()),n.vec3.set(a,t,r,i),n.vec3.euler.getQuat(e,a,o)},n.vec3.euler.getQuatFromDegrees=function(e,t,r){return a||(a=n.vec3.create()),n.vec3.radians(a,t),n.vec3.euler.getQuat(e,a,r)},n.vec3.euler.getQuatFromDegreeValues=function(e,t,r,i,o){return a||(a=n.vec3.create()),n.vec3.set(a,t,r,i),n.vec3.radians(a,a),n.vec3.euler.getQuat(e,a,o)},n.vec3.euler.fromQuatInDegrees=function(e,t,r){return n.vec3.euler.fromQuat(e,t,r),n.vec3.degrees(e,e)},n.vec3.exponentialDecay=function(e,t,r,n,i,o){return e[0]=c.num.exponentialDecay(t[0],r[0],n,i,o),e[1]=c.num.exponentialDecay(t[1],r[1],n,i,o),e[2]=c.num.exponentialDecay(t[2],r[2],n,i,o),e},n.vec3.fromSpherical=function(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=o*Math.sin(n)*Math.sin(i),e[1]=o*Math.cos(i),e[2]=o*Math.cos(n)*Math.sin(i),r&&(e[0]+=r[0],e[1]+=r[1],e[2]+=r[2]),e},n.vec3.getSpherical=function(e,t){var r=0,i=0,o=n.vec3.length(t);return 0!==o&&(r=Math.acos(Math.max(t[1]/o,Math.min(-1,1))),i=Math.atan2(t[0],t[2])),e[0]=r,e[1]=i,e[2]=o,e},n.vec3.makeSphericalSafe=function(e,t){return e[0]=Math.max(c.num.EPSILON,Math.min(Math.PI-c.num.EPSILON,t[0])),e[1]=t[1],e[2]=t[2],e},n.vec3.isEmpty=function(e){return 0===e[0]&&0===e[1]&&0===e[2]},n.vec3.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},n.vec3.polarToCartesian=function(e,t,r,n){return e[0]=t*Math.cos(r)*Math.sin(n),e[1]=t*Math.sin(r),e[2]=t*Math.cos(r)*Math.cos(n),e},n.vec3.project=function(e,t,r,n){var i=t[0],o=t[1],a=t[2],u=r[0]*i+r[4]*o+r[8]*a+r[12],c=r[1]*i+r[5]*o+r[9]*a+r[13],l=r[3]*i+r[7]*o+r[11]*a+r[15],s=(u/l+1)/2,f=1-(c/l+1)/2;return e[0]=s*n[2]+n[0],e[1]=f*n[3]+n[1],e[2]=l,e},n.vec3.radians=function(e,t){return e[0]=c.num.radians(t[0]),e[1]=c.num.radians(t[1]),e[2]=c.num.radians(t[2]),e},n.vec3.radiansUnwrapped=function(e,t){return e[0]=c.num.radiansUnwrapped(t[0]),e[1]=c.num.radiansUnwrapped(t[1]),e[2]=c.num.radiansUnwrapped(t[2]),e},n.vec3.setScalar=function(e,t){return e[0]=t,e[1]=t,e[2]=t,e},n.vec3.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e},n.vec3.unproject=function(e,t,r,i){u||(u=n.vec4.create());var o=t[0],a=t[1],c=t[2];if(u[0]=2*(o-i[0])/i[2]-1,u[1]=2*(a-i[1])/i[3]-1,u[2]=2*c-1,u[3]=1,n.vec4.transformMat4(u,u,r),0===u[3])throw e[0]=0,e[1]=0,e[2]=0,new Error("Perspective divide error");return e[0]=u[0]/u[3],e[1]=u[1]/u[3],e[2]=u[2]/u[3],e},n.vec3.unwrapDegrees=function(e,t){return e[0]=c.num.unwrapDegrees(t[0]),e[1]=c.num.unwrapDegrees(t[1]),e[2]=c.num.unwrapDegrees(t[2]),e},n.vec3.unwrapRadians=function(e,t){return e[0]=c.num.unwrapRadians(t[0]),e[1]=c.num.unwrapRadians(t[1]),e[2]=c.num.unwrapRadians(t[2]),e},n.vec3.toRGB=function(e,t){return e[0]=c.num.colorFromLinear(t[0]),e[1]=c.num.colorFromLinear(t[1]),e[2]=c.num.colorFromLinear(t[2]),e},n.vec3.toRGBA=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e[0]=c.num.colorFromLinear(t[0]),e[1]=c.num.colorFromLinear(t[1]),e[2]=c.num.colorFromLinear(t[2]),e[3]=c.num.colorFromLinear(r),e},n.vec3.fromRGB=function(e,t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e},n.vec3.toHex=function(e){return"#"+c.num.hexFromLinear(e[0])+c.num.hexFromLinear(e[1])+c.num.hexFromLinear(e[2])},n.vec3.toHexA=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"#"+c.num.hexFromLinear(e[0])+c.num.hexFromLinear(e[1])+c.num.hexFromLinear(e[2])+c.num.hexFromColor(t)},n.vec3.fromHex=function(e,t){if(e[0]=0,e[1]=0,e[2]=0,4===t.length||5===t.length)e[0]=("0x"+t[1]+t[1])/255,e[1]=("0x"+t[2]+t[2])/255,e[2]=("0x"+t[3]+t[3])/255;else{if(7!==t.length&&9!==t.length)throw new TypeError("Invalid hex");e[0]=("0x"+t[1]+t[2])/255,e[1]=("0x"+t[3]+t[4])/255,e[2]=("0x"+t[5]+t[6])/255}return e},n.vec3.fromArray=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e},n.vec3.fromMat4Column=function(e,t,r){return n.vec3.fromArray(e,t,4*r)},n.vec3.fromMat3Column=function(e,t,r){return n.vec3.fromArray(e,t,3*r)}},"./global/math/vec4.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec4",(function(){return n.vec4}));var i=r("./global/math/num.js");n.vec4.ZERO=n.vec4.fromValues(0,0,0,0),n.vec4.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e[2]=t[2]+r,e[3]=t[3]+r,e},n.vec4.isEmpty=function(e){return 0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]},n.vec4.divideScalar=function(e,t,r){return n.vec4.multiplyScalar(e,t,1/r)},n.vec4.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},n.vec4.setScalar=function(e,t){return e[0]=t,e[1]=t,e[2]=t,e[3]=t,e},n.vec4.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[3]-r,e},n.vec4.toRGBA=function(e,t,r){return e[0]=i.num.colorFromLinear(t[0]),e[1]=i.num.colorFromLinear(t[1]),e[2]=i.num.colorFromLinear(t[2]),e[3]=r?i.num.colorFromLinear(t[3]):t[3],e},n.vec4.fromRGBA=function(e,t,r){return e[0]=i.num.linearFromColor(t[0]),e[1]=i.num.linearFromColor(t[1]),e[2]=i.num.linearFromColor(t[2]),e[3]=r?i.num.linearFromColor(t[3]):t[3],e},n.vec4.fromRGB=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e[0]=i.num.linearFromColor(t[0]),e[1]=i.num.linearFromColor(t[1]),e[2]=i.num.linearFromColor(t[2]),e[3]=r,e},n.vec4.toHexA=function(e){return"#"+i.num.hexFromLinear(e[0])+i.num.hexFromLinear(e[1])+i.num.hexFromLinear(e[2])+i.num.hexFromLinear(e[3])},n.vec4.toHex=function(e){return"#"+i.num.hexFromLinear(e[0])+i.num.hexFromLinear(e[1])+i.num.hexFromLinear(e[2])},n.vec4.fromHex=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e[0]=0,e[1]=0,e[2]=0,e[3]=r,4===t.length||5===t.length)e[0]=("0x"+t[1]+t[1])/255,e[1]=("0x"+t[2]+t[2])/255,e[2]=("0x"+t[3]+t[3])/255,5===t.length&&(e[3]=("0x"+t[4]+t[4])/255);else{if(7!==t.length&&9!==t.length)throw new TypeError("Invalid hex");e[0]=("0x"+t[1]+t[2])/255,e[1]=("0x"+t[3]+t[4])/255,e[2]=("0x"+t[5]+t[6])/255,9===t.length&&(e[3]=("0x"+t[7]+t[8])/255)}return e},n.vec4.fromArray=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e}},"./global/meta/@generic.js":function(e,t,r){"use strict";r.r(t),r.d(t,"abstract",(function(){return f})),r.d(t,"singleton",(function(){return p})),r.d(t,"data",(function(){return d})),r.d(t,"alias",(function(){return y})),r.d(t,"readOnly",(function(){return m})),r.d(t,"isPrivate",(function(){return b})),r.d(t,"desc",(function(){return h})),r.d(t,"todo",(function(){return v})),r.d(t,"noLongerSupported",(function(){return g})),r.d(t,"partialImplementation",(function(){return w})),r.d(t,"notImplemented",(function(){return x})),r.d(t,"stage",(function(){return _}));var n=r("./core/Tw2Error.js"),i=r("./global/utils/reflect.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=Object(i.createDecorator)({noArgs:!0,ctor:function(e){return e.target},method:function(e){var t=e.target,r=e.property,o=e.descriptor;return Object(i.defineMetadata)("abstract",!0,t,r),o.value=function(){throw new n.ErrAbstractMethod({class:this.constructor.name,method:r})},o}}),p=Object(i.createDecorator)({noArgs:!0,ctor:function(e){var t=e.target,r=0;return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,e);var i=c(o);function o(){if(a(this,o),++r>1)throw new n.ErrSingletonInstantiation({class:t.name});for(var e=arguments.length,u=new Array(e),c=0;c<e;c++)u[c]=arguments[c];return i.call.apply(i,[this].concat(u))}return o}(t)}}),d=Object(i.createDecorator)({handler:function(e,t){var r=e.target,n=e.property;Object(i.hasMetadata)("data",r,n)&&Object.assign({},Object(i.getMetadata)("data",r,n),t),Object(i.defineMetadata)("data",t,r,n)}}),y=Object(i.createDecorator)({property:function(e,t){var r=e.target,n=e.property;Object(i.defineMetadata)("alias",t,r,n)}}),m=Object(i.createDecorator)({noArgs:!0,property:function(e){var t=e.descriptor;return t.writable=!1,t.enumerable=!1,t}}),b=Object(i.createDecorator)({noArgs:!0,property:function(e){var t=e.target,r=e.property;Object(i.defineMetadata)("isPrivate",!0,t,r)}}),h=Object(i.createDecorator)({handler:function(e,t){var r=e.target,n=e.property;Object(i.defineMetadata)("desc",t,r,n)}}),v=Object(i.createDecorator)({handler:function(e,t){var r=e.target,n=e.property,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Object(i.defineMetadata)("todo",t,r,n),0!==o){var a=Object(i.getMetadata)("stage",r,n)||0;Object(i.defineMetadata)("stage",Math.max(o,a),r,n)}}}),g=Object(i.createDecorator)({noArgs:!0,handler:function(e){var t=e.target,r=e.property;Object(i.defineMetadata)("todo","No longer supported",t,r),Object(i.defineMetadata)("stage",3,t,r)}}),w=Object(i.createDecorator)({noArgs:!0,handler:function(e){var t=e.target,r=e.property;Object(i.defineMetadata)("stage",2,t,r)}}),x=Object(i.createDecorator)({noArgs:!0,handler:function(e){var t=e.target,r=e.property;Object(i.defineMetadata)("stage",3,t,r)}}),_=Object(i.createDecorator)({ctor:function(e){var t=e.target,r=e.property,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(i.defineMetadata)("stage",n,t,r)}})},"./global/meta/@type.js":function(e,t,r){"use strict";r.r(t),r.d(t,"type",(function(){return c})),r.d(t,"unknown",(function(){return s})),r.d(t,"boolean",(function(){return f})),r.d(t,"string",(function(){return p})),r.d(t,"path",(function(){return d})),r.d(t,"expression",(function(){return y})),r.d(t,"float",(function(){return m})),r.d(t,"uint",(function(){return b})),r.d(t,"ushort",(function(){return h})),r.d(t,"byte",(function(){return v})),r.d(t,"array",(function(){return g})),r.d(t,"vector2",(function(){return w})),r.d(t,"vector3",(function(){return x})),r.d(t,"vector4",(function(){return _})),r.d(t,"color",(function(){return z})),r.d(t,"quaternion",(function(){return S})),r.d(t,"matrix3",(function(){return j})),r.d(t,"matrix4",(function(){return E})),r.d(t,"int8Array",(function(){return T})),r.d(t,"int16Array",(function(){return O})),r.d(t,"int32Array",(function(){return R})),r.d(t,"uint8Array",(function(){return P})),r.d(t,"uint8ClampedArray",(function(){return D})),r.d(t,"uint16Array",(function(){return A})),r.d(t,"uint32Array",(function(){return M})),r.d(t,"float32Array",(function(){return C})),r.d(t,"float64Array",(function(){return k})),r.d(t,"vector",(function(){return I})),r.d(t,"enums",(function(){return L})),r.d(t,"plain",(function(){return G})),r.d(t,"list",(function(){return F})),r.d(t,"fromList",(function(){return B})),r.d(t,"struct",(function(){return U})),r.d(t,"raw",(function(){return V}));var n=r("./core/reader/Tw2BlackPropertyReaders.js"),i=r("./global/utils/type.js"),o=r("./global/utils/reflect.js"),a=r("./global/constant/index.js"),u=function(e,t){var r=e.target,n=e.property;void 0!==t&&Object(o.defineMetadata)("type",t,r,n);for(var i=arguments.length,u=new Array(i>2?i-2:0),c=2;c<i;c++)u[c-2]=arguments[c];switch(u[0]&&Object(o.defineMetadata)("typesOf",u,r,n),"_"===n.charAt(0)&&Object(o.defineMetadata)("isPrivate",!0,r,n),t){case a.PT_STRUCT_RAW:case a.PT_STRUCT:var l=Object(o.getMetadata)("structs",r.constructor);(l=l?Array.from(l):[]).includes(n)||(l.push(n),l.sort()),Object(o.defineMetadata)("structs",l,r.constructor);break;case a.PT_STRUCT_LIST:var s=Object(o.getMetadata)("structLists",r.constructor);(s=s?Array.from(s):[]).includes(n)||(s.push(n),s.sort()),Object(o.defineMetadata)("structLists",s,r.constructor)}},c=Object(o.createDecorator)({ctor:function(e,t){var r=e.target,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;Object(o.defineMetadata)("type",t,r),Object(o.defineMetadata)("ccp",n,r)},parameter:function(e,t,r){u(e,t,r)}});function l(e,t){return Object(o.createDecorator)({noArgs:!t,property:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];u.apply(void 0,[t,e].concat(n))}})}var s=l(a.PT_UNKNOWN),f=l(a.PT_BOOLEAN),p=l(a.PT_STRING),d=l(a.PT_PATH),y=l(a.PT_EXPRESSION),m=l(a.PT_FLOAT),b=l(a.PT_UINT),h=l(a.PT_USHORT),v=l(a.PT_BYTE),g=l(a.PT_ARRAY),w=l(a.PT_VECTOR2),x=l(a.PT_VECTOR3),_=l(a.PT_VECTOR4),z=l(a.PT_COLOR),S=l(a.PT_QUATERNION),j=l(a.PT_MATRIX3),E=l(a.PT_MATRIX4),T=l(a.PT_INT8_ARRAY),O=l(a.PT_INT16_ARRAY),R=l(a.PT_INT32_ARRAY),P=l(a.PT_UINT8_ARRAY),D=l(a.PT_UINT8_CLAMPED_ARRAY),A=l(a.PT_UINT16_ARRAY),M=l(a.PT_UINT32_ARRAY),C=l(a.PT_FLOAT32_ARRAY),k=l(a.PT_FLOAT64_ARRAY),I=l(a.PT_VECTOR),L=Object(o.createDecorator)({property:function(e,t){var r=e.target,n=e.property;u({target:r,property:n},a.PT_ENUM),Object(o.defineMetadata)("isPrivate",!0,r,n),Object(o.defineMetadata)("enumerable",t,r,n)}}),G=l(a.PT_PLAIN),F=Object(o.createDecorator)({property:function(e){for(var t=e.target,r=e.property,c=arguments.length,l=new Array(c>1?c-1:0),s=1;s<c;s++)l[s-1]=arguments[s];if(Object(i.isFunction)(l[0])){var f=l.shift();Object(o.defineMetadata)("black",n.structList(f),t,r),Object(o.hasMetadata)("type",f)&&l.unshift(Object(o.getMetadata)("type",f))}u.apply(void 0,[{target:t,property:r},a.PT_STRUCT_LIST].concat(l))}}),B=Object(o.createDecorator)({property:function(e,t){var r=e.target,c=e.property;if(Object(i.isString)(t)&&(t={key:t}),!Object(i.isPlain)(t))throw new Error("Invalid argument for decorator: expected plain object");Object(o.defineMetadata)("black",n.fromList(t),r,c);for(var l=arguments.length,s=new Array(l>2?l-2:0),f=2;f<l;f++)s[f-2]=arguments[f];t.struct&&Object(o.hasMetadata)("type",t.struct)&&s.unshift(Object(o.getMetadata)("type",t.struct)),u.apply(void 0,[{target:r,property:c},a.PT_PLAIN].concat(s))}});function N(e){return Object(o.createDecorator)({property:function(t){for(var r=t.target,a=t.property,c=arguments.length,l=new Array(c>1?c-1:0),s=1;s<c;s++)l[s-1]=arguments[s];if(Object(i.isFunction)(l[0])){var f=l.shift();Object(o.defineMetadata)("black",n.struct(f),r,a),Object(o.hasMetadata)("type",f)&&l.unshift(Object(o.getMetadata)("type",f))}u.apply(void 0,[{target:r,property:a},e].concat(l))}})}var U=N(a.PT_STRUCT),V=N(a.PT_STRUCT_RAW)},"./global/meta/@ui.js":function(e,t,r){"use strict";r.r(t),r.d(t,"uiGroup",(function(){return i})),r.d(t,"uiDescription",(function(){return o})),r.d(t,"uiName",(function(){return a})),r.d(t,"uiValueMin",(function(){return u})),r.d(t,"uiValueMax",(function(){return c})),r.d(t,"uiValueStep",(function(){return l})),r.d(t,"uiComponents",(function(){return s})),r.d(t,"uiWidget",(function(){return f})),r.d(t,"uiDisabled",(function(){return p})),r.d(t,"uiHidden",(function(){return d}));var n=r("./global/utils/index.js"),i=Object(n.createDecorator)({property:function(e,t){var r=e.target,i=e.property;Object(n.defineMetadata)("uiGroup",t,r,i)}}),o=Object(n.createDecorator)({property:function(e,t){var r=e.target,i=e.property;Object(n.defineMetadata)("uiDescription",t,r,i)}}),a=Object(n.createDecorator)({property:function(e,t){var r=e.target,i=e.property;Object(n.defineMetadata)("uiName",t,r,i)}}),u=Object(n.createDecorator)({property:function(e,t){var r=e.target,i=e.property;Object(n.defineMetadata)("uiValueMin",t,r,i)}}),c=Object(n.createDecorator)({property:function(e,t){var r=e.target,i=e.property;Object(n.defineMetadata)("uiValueMax",t,r,i)}}),l=Object(n.createDecorator)({property:function(e,t){var r=e.target,i=e.property;Object(n.defineMetadata)("uiValueStep",t,r,i)}}),s=Object(n.createDecorator)({property:function(e){for(var t=e.target,r=e.property,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];Object(n.defineMetadata)("uiComponents",o,t,r)}}),f=Object(n.createDecorator)({property:function(e,t){var r=e.target,i=e.property;Object(n.defineMetadata)("uiWidget",t,r,i)}}),p=Object(n.createDecorator)({noArgs:!0,property:function(e){var t=e.target,r=e.property;Object(n.defineMetadata)("uiDisabled",!0,t,r)}}),d=Object(n.createDecorator)({noArgs:!0,property:function(e){var t=e.target,r=e.property;Object(n.defineMetadata)("uiHidden",!0,t,r)}})},"./global/meta/Model.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Model",(function(){return m}));var n=r("./global/utils/uuid.js"),i=r("./global/utils/reflect.js"),o=r("./global/utils/type.js"),a=r("./global/meta/ModelPropertyTypes.js"),u=r("./global/tw2.js");function c(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=new WeakMap,y=Symbol("id"),m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[y]=null}var t,r,l;return t=e,l=[{key:"copy",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.set(e,t.GetValues(),s({_clear:!0},r))}},{key:"clone",value:function(e,t){return this.from(e.GetValues(),t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Object(i.hasMetadata)("type",this))throw new ReferenceError("No meta type defined");var n=!r._ids;if(n)r._ids=new Map;else if(r._ids.has(e)){var o={__ref:e._id};return r._ids.get(e).push(o),o}for(var u in t={__type:Object(i.getMetadata)("type",e.constructor),__id:e._id},r._ids.set(e,[t]),e)if(e.hasOwnProperty(u)&&Object(i.hasMetadata)("type",e,u)&&!Object(i.getMetadata)("isPrivate",e,u)&&!Object(i.getMetadata)("alias",e,u)){var c=Object(i.getMetadata)("type",e,u),l=a.propTypes.get(c);if(!l)throw new TypeError("Unknown type: "+c);t[u]=l.get(e,u,r)}if(n&&!r.useObjectIds){var s=0;r._ids.forEach((function(e){if(1!==e.length)for(var t="#"+s++,r=0;r<e.length;r++)0===r?e[r].__id=t:e[r].__ref=t;else Reflect.deleteProperty(e[0],"__id")}))}return t}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.constructor!==this)throw new ReferenceError("Invalid constructor");var n=Object(i.getMetadata)("type",this);if(!n)throw new ReferenceError("No meta type defined");if(t&&!Object(o.isObjectObject)(t))throw new ReferenceError("Invalid values, expected plain object or object");var l,s=r._clear,f=r._ids,p=void 0===f?new Map:f,d=(r.skipEvents,r.skipUpdate),y=c(r,["_clear","_ids","skipEvents","skipUpdate"]);if(p.has(e))return p.get(e);y._ids=p,s&&e.Clear({skipUpdate:!0,skipEvents:!0});var m=!1;if(t)for(var b in t)if(t.hasOwnProperty(b)){var h=t[b];if(void 0===t[b]){(l=l||{}).undefined=l.undefined||[],l.undefined.push(b);continue}if(Object(i.getMetadata)("isPrivate",e,b)){(l=l||{}).private=l.private||[],l.private.push(b);continue}if(Object(i.hasMetadata)("alias",e,b)&&(b=Object(i.getMetadata)("alias",e,b)),!Object(i.hasMetadata)("type",e,b)){(l=l||{}).noType=l.noType||[],l.noType.push(b);continue}var v=Object(i.getMetadata)("type",e,b),g=a.propTypes.get(v);if(!g)throw new TypeError("".concat(n," > Unknown property type: ").concat(v));if(null===h&&g.delete){g.delete(e,b,y)&&(m=!0);continue}if(!g.is(h,e[b],y))throw new TypeError("".concat(n," > Unexpected value type for property: ").concat(b));if(g.equals(h,e[b]))continue;!1!==g.set(e,b,h,y)&&(m=!0)}return m&&!d&&e.UpdateValues(y),p.set(e,m),l&&u.tw2.Debug({name:"".concat(n,".set"),message:"Properties values skipped",data:l}),m}},{key:"from",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.skipUpdate,o=c(r,["skipUpdate"]);if(e&&e.__type&&Object(i.getMetadata)("type",this)!==e.__type)throw new ReferenceError("Unexpected constructor "+e.__type);return e&&e instanceof this?t=e:(t=new this,e&&t.SetValues(e,s({skipUpdate:!0},o))),!n&&t.Initialize&&t.Initialize(),t}}],(r=[{key:"EmitEvent",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=d.get(this);return i?(e=e.toLowerCase(),i[e]&&(i[e].forEach((function(t,n){n.call.apply(n,[t.context].concat(r)),t.once&&i[e].delete(n)})),i[e]&&0===i[e].size&&Reflect.deleteProperty(i,e)),this):this}},{key:"AddEvents",value:function(e){if(!e)return this;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t],n=t,i=void 0,a=void 0;if(-1!==t.indexOf(".once")&&t.lastIndexOf(".once")===t.length-5&&(n=t.substring(0,t.length-5),a=!0),Object(o.isArray)(r)&&(i=(r=r[0])[1]),!Object(o.isFunction)(r))throw new Error("Invalid listener");this.OnEvent(n,r,i,a)}return this}},{key:"OnEvent",value:function(e,t,r,n){var i=d.get(this);if(i||(i={},d.set(this,i)),i[e=e.toLowerCase()]||(i[e]=new Map),!i[e].has(t))if(this.constructor.onListener){if(this.constructor.onListener(this,e,t,r)&&n)return this}else if(this.OnEventFirstListener&&this.OnEventFirstListener(this,e,t,r)&&n)return this;return i[e].set(t,{context:r,once:n}),this}},{key:"OnceEvent",value:function(e,t,r){return this.OnEvent(e,t,r,!0)}},{key:"OffEvent",value:function(e,t){var r=d.get(this);if(!r)return this;if("*"===e){for(var n in r)r.hasOwnProperty(n)&&(r[n].delete(t),0===r[n].size&&Reflect.deleteProperty(r,n));return this}return(e=e.toLowerCase())in r&&(r[e].delete(t),0===r[e].size&&Reflect.deleteProperty(r,e)),this}},{key:"HasEvent",value:function(e,t){var r=d.get(this);if(!r)return!1;if("*"===e){for(var n in r)if(r.hasOwnProperty(n)&&r[n].has(t))return!0;return!1}return!(!t||!(e in r))&&("*"===t?!!r[e].size:r[e].has(t))}},{key:"ClearEvent",value:function(e){var t=d.get(this);return t?"*"===e?(d.delete(this),this):((e=e.toLowerCase())in t&&(t[e].clear(),Reflect.deleteProperty(t,e)),this):this}},{key:"Copy",value:function(e,t){return this.constructor.copy(this,e,t)}},{key:"Clone",value:function(e){return this.constructor.clone(this,e)}},{key:"SetValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.constructor.set(this,e,t)}},{key:"GetValues",value:function(e,t){return this.constructor.get(this,e,t)}},{key:"UpdateValues",value:function(e){var t=e&&e.skipEvents;t||this.EmitEvent("modify",this,e),this.OnValueChanged&&this.OnValueChanged(e),t||this.EmitEvent("modified",this,e)}},{key:"OnModified",value:function(e,t,r){this.OnEvent("modified",e,t,r)}},{key:"OffModified",value:function(e){this.OffEvent("modified",e)}},{key:"Destructor",value:function(e){return console.log("Destructor has been replaced with 'Destroy'"),this.Destroy(e)}},{key:"Destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.skipEvents||(this.EmitEvent("destroy",this,e),this.EmitEvent("destruct",this,e)),this.OnDestroy&&this.OnDestroy(),this.OnDestruct&&(console.log("'OnDestruct' has been replaced with 'OnDestroy'"),this.OnDestruct()),e&&e.skipChildren||this.Clear({skipUpdate:!0,skipEvents:!0,controller:e.controller}),e&&e.skipEvents||(this.EmitEvent("destroyed",this,e),this.EmitEvent("destructed",this,e)),this.ClearEvent("*")}},{key:"Clear",value:function(){var e,t,r=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.skipEvents||this.EmitEvent("clear",this),this.OnClear&&this.OnClear();var o=Object(i.getMetadata)("structLists",this.constructor)||[];o.forEach((function(t){if(!Object(i.getMetadata)("isPrivate",r,t)){for(var o=0;o<r[t].length;o++)r[t][o]&&(r[t][o].Destroy?r[t][o].Destroy({controller:n.controller}):r[t][o].Destructor&&r[t][o].Destructor({controller:n.controller}),e=!0);r[t].splice(0)}}));var a=Object(i.getMetadata)("structs",this.constructor)||[];a.forEach((function(o){Object(i.getMetadata)("isPrivate",r,o)||r[o]&&(r[o].Destroy?(t=t||{controller:n.controller},r[o].Destroy(t)):r[o].Destructor&&(t=t||{controller:n.controller},r[o].Destructor(t)),r[o]=null,e=!0)})),n&&n.skipEvents||this.EmitEvent("cleared",this),!e||n&&n.skipUpdate||this.UpdateValues(n)}},{key:"PerChild",value:function(e,t){if(Object(i.hasMetadata)("structs",this.constructor))for(var r=Object(i.getMetadata)("structs",this.constructor),n=0;n<r.length;n++){var o=r[n],a=this[o];if(!Object(i.getMetadata)("isPrivate",this,o)&&(a||t)){var u=e({parent:this,key:o,struct:a,path:"/".concat(o)});if(void 0!==u)return u}}if(Object(i.hasMetadata)("structLists",this.constructor))for(var c=Object(i.getMetadata)("structLists",this.constructor),l=0;l<c.length;l++){var s=c[l],f=this[c[l]];if(!Object(i.getMetadata)("isPrivate",this,s))for(var p=0;p<f.length;p++){var d=f[p];if(d||t){var y=e({parent:this,key:s,struct:d,array:f,index:p,path:"/".concat(s,"/").concat(p)});if(void 0!==y)return y}}}}},{key:"Filter",value:function(e,t){return console.log("'Filter' has been replaced with 'FilterStruct'"),this.FilterStruct(e,t)}},{key:"FilterStruct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.Traverse((function(r){e(r.struct,r)&&!t.includes(r.struct)&&t.push(r.struct)})),t}},{key:"FindObjectByID",value:function(e){return this.Traverse((function(t){if(t.struct._id===e)return t.struct}))}},{key:"FindStruct",value:function(e){return this.Traverse((function(t){if(e(t.struct,t))return t.struct})),null}},{key:"Traverse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(!r.has(this)){r.add(this),t.path=t.path||"root",t.struct=this;var n=e(t);return void 0!==n?n:this.PerChild((function(n){if(n.struct&&n.struct.Traverse){n.path=t.path+n.path;var i=n.struct.Traverse(e,n,r);if(void 0!==i)return i}}))}}},{key:"GetAsyncTasks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return e}},{key:"_id",get:function(){return this[y]||(this[y]=Object(n.generateID)()),this[y]}}])&&p(t.prototype,r),l&&p(t,l),e}()},"./global/meta/ModelPropertyTypes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"propTypes",(function(){return a}));var n=r("./global/math/index.js"),i=r("./global/constant/type.js"),o=r("./global/utils/type.js"),a=new Map,u=function(e,t){return Array.from(e[t])},c=function(e,t){return e[t]},l=function(e,t,r){return e[t]=r},s=function(e,t){return e===t},f=function(){throw new ReferenceError("Not implemented")};function p(e){a.set(e,{is:o.isNumber,equals:n.num.equals,get:c,set:l,type:e})}function d(e){a.set(e,{is:o.isString,equals:s,get:c,set:l,type:e})}function y(e,t,r){a.set(e,{is:function(e){return Object(o.isVector)(e,r)},equals:o.isVectorEqual,get:u,set:function(e,r,n){e[r].length!==n.length?e[r]=new t(n):e[r].set(n)},length:r,type:e})}function m(e){a.set(e,{is:o.isVector4,equals:n.vec4.equals,get:u,set:function(e,t,r){return n.vec4.copy(e[t],r)},type:e})}function b(e){a.set(e,{is:function(e){return!!Object(o.isPlain)(e)},equals:s,get:function(e,t,r){return null===e[t]?null:e[t].GetValues({},r)},set:function(e,t,r,n){f()},type:e})}a.set(i.PT_BOOLEAN,{is:o.isBoolean,equals:s,get:c,set:l,type:i.PT_BOOLEAN}),p(i.PT_BYTE),p(i.PT_FLOAT),p(i.PT_UINT),p(i.PT_USHORT),d(i.PT_STRING),d(i.PT_EXPRESSION),d(i.PT_PATH),y(i.PT_VECTOR,Float32Array),y(i.PT_INT32_ARRAY,Int32Array),y(i.PT_INT16_ARRAY,Int16Array),y(i.PT_INT8_ARRAY,Int8Array),y(i.PT_UINT8_ARRAY,Uint8Array),y(i.PT_UINT32_ARRAY,Uint32Array),y(i.PT_UINT16_ARRAY,Uint16Array),y(i.PT_UINT32_ARRAY,Uint32Array),y(i.PT_FLOAT32_ARRAY,Float32Array),y(i.PT_FLOAT64_ARRAY,Float64Array),a.set(i.PT_MATRIX3,{is:o.isMatrix3,equals:n.mat3.equals,get:u,set:function(e,t,r){return n.mat3.copy(e[t],r)},type:i.PT_MATRIX3}),a.set(i.PT_MATRIX4,{is:o.isMatrix4,equals:n.mat4.equals,get:u,set:function(e,t,r){return n.mat4.copy(e[t],r)},type:i.PT_MATRIX4}),a.set(i.PT_VECTOR2,{is:o.isVector2,equals:n.vec2.equals,get:u,set:function(e,t,r){return n.vec2.copy(e[t],r)},type:i.PT_VECTOR2}),a.set(i.PT_VECTOR3,{is:o.isVector3,equals:n.vec3.equals,get:u,set:function(e,t,r){return n.vec3.copy(e[t],r)},type:i.PT_VECTOR3}),m(i.PT_VECTOR4),m(i.PT_COLOR),m(i.PT_QUATERNION),a.set(i.PT_PLAIN,{is:o.isPlain,equals:o.isEqual,get:function(e,t){return Object.assign({},e[t])},set:function(e,t,r){return Object.assign(e[t],r)},type:i.PT_PLAIN}),b(i.PT_STRUCT),b(i.PT_STRUCT_RAW),a.set(i.PT_STRUCT_LIST,{is:function(e){return!!Object(o.isArray)(e)},equals:s,get:function(e,t,r){var n=e[t].length;if(!n)return null;for(var i=[],o=0;o<n;o++)try{i.push(e[t][o].GetValues({},r))}catch(r){throw console.dir(e[t][o]),r}return i},set:function(e,t,r,n){f()},type:i.PT_STRUCT_LIST})},"./global/meta/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/meta/@type.js");r.d(t,"type",(function(){return n.type})),r.d(t,"unknown",(function(){return n.unknown})),r.d(t,"boolean",(function(){return n.boolean})),r.d(t,"string",(function(){return n.string})),r.d(t,"path",(function(){return n.path})),r.d(t,"expression",(function(){return n.expression})),r.d(t,"float",(function(){return n.float})),r.d(t,"uint",(function(){return n.uint})),r.d(t,"ushort",(function(){return n.ushort})),r.d(t,"byte",(function(){return n.byte})),r.d(t,"array",(function(){return n.array})),r.d(t,"vector2",(function(){return n.vector2})),r.d(t,"vector3",(function(){return n.vector3})),r.d(t,"vector4",(function(){return n.vector4})),r.d(t,"color",(function(){return n.color})),r.d(t,"quaternion",(function(){return n.quaternion})),r.d(t,"matrix3",(function(){return n.matrix3})),r.d(t,"matrix4",(function(){return n.matrix4})),r.d(t,"int8Array",(function(){return n.int8Array})),r.d(t,"int16Array",(function(){return n.int16Array})),r.d(t,"int32Array",(function(){return n.int32Array})),r.d(t,"uint8Array",(function(){return n.uint8Array})),r.d(t,"uint8ClampedArray",(function(){return n.uint8ClampedArray})),r.d(t,"uint16Array",(function(){return n.uint16Array})),r.d(t,"uint32Array",(function(){return n.uint32Array})),r.d(t,"float32Array",(function(){return n.float32Array})),r.d(t,"float64Array",(function(){return n.float64Array})),r.d(t,"vector",(function(){return n.vector})),r.d(t,"enums",(function(){return n.enums})),r.d(t,"plain",(function(){return n.plain})),r.d(t,"list",(function(){return n.list})),r.d(t,"fromList",(function(){return n.fromList})),r.d(t,"struct",(function(){return n.struct})),r.d(t,"raw",(function(){return n.raw}));var i=r("./global/meta/@generic.js");r.d(t,"abstract",(function(){return i.abstract})),r.d(t,"singleton",(function(){return i.singleton})),r.d(t,"data",(function(){return i.data})),r.d(t,"alias",(function(){return i.alias})),r.d(t,"readOnly",(function(){return i.readOnly})),r.d(t,"isPrivate",(function(){return i.isPrivate})),r.d(t,"desc",(function(){return i.desc})),r.d(t,"todo",(function(){return i.todo})),r.d(t,"noLongerSupported",(function(){return i.noLongerSupported})),r.d(t,"partialImplementation",(function(){return i.partialImplementation})),r.d(t,"notImplemented",(function(){return i.notImplemented})),r.d(t,"stage",(function(){return i.stage}));var o=r("./global/meta/@ui.js");r.d(t,"uiGroup",(function(){return o.uiGroup})),r.d(t,"uiDescription",(function(){return o.uiDescription})),r.d(t,"uiName",(function(){return o.uiName})),r.d(t,"uiValueMin",(function(){return o.uiValueMin})),r.d(t,"uiValueMax",(function(){return o.uiValueMax})),r.d(t,"uiValueStep",(function(){return o.uiValueStep})),r.d(t,"uiComponents",(function(){return o.uiComponents})),r.d(t,"uiWidget",(function(){return o.uiWidget})),r.d(t,"uiDisabled",(function(){return o.uiDisabled})),r.d(t,"uiHidden",(function(){return o.uiHidden}));var a=r("./global/meta/Model.js");r.d(t,"Model",(function(){return a.Model}))},"./global/tw2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tw2",(function(){return n})),r.d(t,"resMan",(function(){return i})),r.d(t,"device",(function(){return o}));var n=new(r("./core/engine/Tw2Library.js").Tw2Library),i=n.resMan,o=n.device},"./global/utils/arr.js":function(e,t,r){"use strict";r.r(t),r.d(t,"addToArray",(function(){return i})),r.d(t,"findElementByPropertyValue",(function(){return o})),r.d(t,"findIndexByPropertyValue",(function(){return a})),r.d(t,"perArrayChild",(function(){return u})),r.d(t,"removeFromArray",(function(){return c})),r.d(t,"toArray",(function(){return l})),r.d(t,"toUniqueArray",(function(){return s})),r.d(t,"chunkArray",(function(){return f}));var n=r("./global/utils/type.js");function i(e){for(var t=!1,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(var o=0;o<n.length;o++)-1===e.indexOf(n[o])&&(e.push(n[o]),t=!0);return t}function o(e,t,r,n){return e[a(e,t,r,n)]}function a(e,t,r,n){for(var i=0;i<e.length;i++)if(t in e[i]&&e[i][t]===r)return i;if(n)throw new n(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r));return-1}function u(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];for(var o=0;o<e.length;o++){var a;if(t in e[o])(a=e[o])[t].apply(a,n)}}function c(e){for(var t=!1,r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var n=e.indexOf(r+1<1||arguments.length<=r+1?void 0:arguments[r+1]);-1!==n&&(e.splice(n,1),t=!0)}return t}function l(e){return Object(n.isArray)(e)?e:[e]}function s(e){return Array.from(new Set(l(e)))}function f(e,t){for(var r=[],n=0;n<e.length;n+=t){var i=e.slice(n,n+t);r.push(i)}return r}},"./global/utils/canvas.js":function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement("canvas"),n=r.getContext("2d"),i=t.fontSize||56;n.font="".concat(i,"px monospace");var o=n.measureText(e),a=o.width,u=i;return r.width=a,r.height=u,r.style.width=a+"px",r.style.height=u+"px",n.font="".concat(i,"px monospace"),n.textAlign=t.align||"center",n.textBaseline=t.baseline||"middle",n.fillStyle="transparent",n.fillRect(0,0,n.canvas.width,n.canvas.height),n.fillStyle=t.color||"white",n.fillText(e,a/2,u/2),r}r.r(t),r.d(t,"createTextCanvas",(function(){return n}))},"./global/utils/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/utils/arr.js");r.d(t,"addToArray",(function(){return n.addToArray})),r.d(t,"findElementByPropertyValue",(function(){return n.findElementByPropertyValue})),r.d(t,"findIndexByPropertyValue",(function(){return n.findIndexByPropertyValue})),r.d(t,"perArrayChild",(function(){return n.perArrayChild})),r.d(t,"removeFromArray",(function(){return n.removeFromArray})),r.d(t,"toArray",(function(){return n.toArray})),r.d(t,"toUniqueArray",(function(){return n.toUniqueArray})),r.d(t,"chunkArray",(function(){return n.chunkArray}));var i=r("./global/utils/canvas.js");r.d(t,"createTextCanvas",(function(){return i.createTextCanvas}));var o=r("./global/utils/obj.js");r.d(t,"getRandomObjectElement",(function(){return o.getRandomObjectElement})),r.d(t,"emptyObject",(function(){return o.emptyObject})),r.d(t,"assignIfExists",(function(){return o.assignIfExists})),r.d(t,"get",(function(){return o.get})),r.d(t,"template",(function(){return o.template})),r.d(t,"getKeyFromValue",(function(){return o.getKeyFromValue})),r.d(t,"pick",(function(){return o.pick})),r.d(t,"downloadObjectAsJson",(function(){return o.downloadObjectAsJson}));var a=r("./global/utils/str.js");r.d(t,"getPathExtension",(function(){return a.getPathExtension}));var u=r("./global/utils/type.js");r.d(t,"isArray",(function(){return u.isArray})),r.d(t,"isArrayLike",(function(){return u.isArrayLike})),r.d(t,"isAsyncFunction",(function(){return u.isAsyncFunction})),r.d(t,"isBoolean",(function(){return u.isBoolean})),r.d(t,"isCanvas",(function(){return u.isCanvas})),r.d(t,"isDescriptor",(function(){return u.isDescriptor})),r.d(t,"isDNA",(function(){return u.isDNA})),r.d(t,"isError",(function(){return u.isError})),r.d(t,"isNumber",(function(){return u.isNumber})),r.d(t,"isFunction",(function(){return u.isFunction})),r.d(t,"isNoU",(function(){return u.isNoU})),r.d(t,"isNull",(function(){return u.isNull})),r.d(t,"isObject",(function(){return u.isObject})),r.d(t,"isObjectLike",(function(){return u.isObjectLike})),r.d(t,"isObjectObject",(function(){return u.isObjectObject})),r.d(t,"isPlain",(function(){return u.isPlain})),r.d(t,"isPrimary",(function(){return u.isPrimary})),r.d(t,"isPromise",(function(){return u.isPromise})),r.d(t,"isString",(function(){return u.isString})),r.d(t,"isSymbol",(function(){return u.isSymbol})),r.d(t,"isSubclassOf",(function(){return u.isSubclassOf})),r.d(t,"isTag",(function(){return u.isTag})),r.d(t,"isTr2OrTri",(function(){return u.isTr2OrTri})),r.d(t,"toTw2",(function(){return u.toTw2})),r.d(t,"getTypeUpper",(function(){return u.getTypeUpper})),r.d(t,"isTyped",(function(){return u.isTyped})),r.d(t,"isUndefined",(function(){return u.isUndefined})),r.d(t,"isVector",(function(){return u.isVector})),r.d(t,"isVector2",(function(){return u.isVector2})),r.d(t,"isVector3",(function(){return u.isVector3})),r.d(t,"isVector4",(function(){return u.isVector4})),r.d(t,"isMatrix3",(function(){return u.isMatrix3})),r.d(t,"isMatrix4",(function(){return u.isMatrix4})),r.d(t,"isPrimaryEqual",(function(){return u.isPrimaryEqual})),r.d(t,"isVectorEqual",(function(){return u.isVectorEqual})),r.d(t,"isEqual",(function(){return u.isEqual}));var c=r("./global/utils/uuid.js");r.d(t,"enableUUID",(function(){return c.enableUUID})),r.d(t,"generateID",(function(){return c.generateID}));var l=r("./global/utils/url.js");r.d(t,"getURL",(function(){return l.getURL})),r.d(t,"getURLString",(function(){return l.getURLString})),r.d(t,"getURLInteger",(function(){return l.getURLInteger})),r.d(t,"getURLFloat",(function(){return l.getURLFloat})),r.d(t,"getURLBoolean",(function(){return l.getURLBoolean}));var s=r("./global/utils/reflect.js");r.d(t,"defineMetadata",(function(){return s.defineMetadata})),r.d(t,"hasMetadata",(function(){return s.hasMetadata})),r.d(t,"hasOwnMetadata",(function(){return s.hasOwnMetadata})),r.d(t,"getMetadata",(function(){return s.getMetadata})),r.d(t,"getOwnMetadata",(function(){return s.getOwnMetadata})),r.d(t,"deleteMetadata",(function(){return s.deleteMetadata})),r.d(t,"getMetadataKeys",(function(){return s.getMetadataKeys})),r.d(t,"getOwnMetadataKeys",(function(){return s.getOwnMetadataKeys})),r.d(t,"getMetadataValues",(function(){return s.getMetadataValues})),r.d(t,"getOwnMetadataValues",(function(){return s.getOwnMetadataValues})),r.d(t,"handleDescriptor",(function(){return s.handleDescriptor})),r.d(t,"createDecorator",(function(){return s.createDecorator}));var f=r("./global/meta/index.js");r.d(t,"meta",(function(){return f}))},"./global/utils/obj.js":function(e,t,r){"use strict";r.r(t),r.d(t,"getRandomObjectElement",(function(){return o})),r.d(t,"emptyObject",(function(){return a})),r.d(t,"assignIfExists",(function(){return u})),r.d(t,"get",(function(){return c})),r.d(t,"template",(function(){return l})),r.d(t,"getKeyFromValue",(function(){return s})),r.d(t,"pick",(function(){return f})),r.d(t,"downloadObjectAsJson",(function(){return p}));var n=r("./global/utils/type.js"),i=r("./global/utils/arr.js");function o(e){var t;if(Array.isArray(e))t=Math.floor(Math.random()*e.length);else{var r=Object.keys(e);t=r[Math.floor(Math.random()*r.length)]}return[e[t],t]}function a(e){if(Object(n.isArray)(e))return e.splice(0),e;if(Object(n.isPlain)(e)){for(var t in e)e.hasOwnProperty(t)&&Reflect.deleteProperty(e,t);return e}throw new ReferenceError("Invalid object, expected array or plain object")}function u(e,t,r,o){if(!t)return!1;r=Object(i.toArray)(r);for(var a=!1,u=0;u<r.length;u++){var c=r[u],l=c,s=c;if(Object(n.isArray)(c)&&(l=c[1],s=c[0]),void 0!==t[l]&&(!o||void 0!==e[s])){if(Object(n.isArrayLike)(e[s]))if(Object(n.isTyped)(e[s]))if(e[s].length!==t[l].length){var f=e[s].constructor;e[s]=new f(t[l])}else e[s].set(t[l]);else{e[s].splice(0);for(var p=0;p<t[l].length;p++)e[s].push(t[l][p])}else if(Object(n.isTyped)(t[l])){var d=t[l].constructor;e[s]=new d(t[l])}else e[s]=t[l];a=!0}}return a}function c(e,t,r){if(!Object(n.isArray)(t))return void 0!==e[t]?e[t]:r;for(var i=0;i<t.length;i++)if(void 0!==e[t[i]])return e[t[i]];return r}function l(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(/%([^%]+)?%/g)||[],n=0;n<r.length;n++){var i=r[n],o=i.substring(1,i.length-1).split("="),a=o[0]in t?t[o[0]]:o[1];e=e.replace(i,a)}return e}function s(e,t,r){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n;return r}function f(e,t){return t.reduce((function(t,r){return e&&Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]),t}),{})}function p(e,t){var r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",t+".json"),document.body.appendChild(n),n.click(),n.remove()}},"./global/utils/reflect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"defineMetadata",(function(){return l})),r.d(t,"hasMetadata",(function(){return s})),r.d(t,"hasOwnMetadata",(function(){return f})),r.d(t,"getMetadata",(function(){return p})),r.d(t,"getOwnMetadata",(function(){return d})),r.d(t,"deleteMetadata",(function(){return y})),r.d(t,"getMetadataKeys",(function(){return b})),r.d(t,"getOwnMetadataKeys",(function(){return h})),r.d(t,"getMetadataValues",(function(){return g})),r.d(t,"getOwnMetadataValues",(function(){return w})),r.d(t,"handleDescriptor",(function(){return x})),r.d(t,"createDecorator",(function(){return E}));var n=r("./global/utils/index.js");function i(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return"".concat("tw2",":").concat(e)}function l(e,t,r,n){Reflect.defineMetadata(c(e),t,r,n)}function s(e,t,r){return Reflect.hasMetadata(c(e),t,r)}function f(e,t,r){return Reflect.hasOwnMetadata(c(e),t,r)}function p(e,t,r){return Reflect.getMetadata(c(e),t,r)}function d(e,t,r){return Reflect.getOwnMetadata(c(e),t,r)}function y(e,t,r){return Reflect.deleteMetadata(c(e),t,r)}function m(e){for(var t=[],r=0;r<e.length;r++)0===e[r].indexOf("tw2")&&t.push(e[r].replace("tw2:",""));return t}function b(e,t){return m(Reflect.getMetadataKeys(e,t))}function h(e,t){return m(Reflect.getOwnMetadataKeys(e,t))}function v(e,t,r,n){var i=r(e,t),o={};return i.forEach((function(r){var i=n(r,e,t);void 0!==i&&(o[r]=i)})),o}function g(e,t){return v(e,t,b,p)}function w(e,t){return v(e,t,h,d)}function x(e){return!e||e.set||e.get||(void 0===e.writable&&(e.writable=!0),void 0===e.enumerable&&(e.enumerable=!0),void 0===e.configurable&&(e.configurable=!0)),e}var _=function(){throw new TypeError("Decorator doesn't support classes")},z=function(){throw new TypeError("Decorator doesn't support methods")},S=function(){throw new TypeError("Decorator doesn't support properties")};function j(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return function(r,o,u){u&&x(u);var c=a({target:r,property:o,descriptor:u},t);return o?Object(n.isFunction)(r[o])?e.method.apply(e,[c].concat(i)):e.property.apply(e,[c].concat(i)):e.ctor.apply(e,[c].concat(i))}}function E(e){e.handler,e.property,e.method,e.ctor;var t=e.noArgs,r=i(e,["handler","property","method","ctor","noArgs"]),o=function(e){var t=e.ctor,r=e.method,i=e.property,o=e.handler;function a(e,t){return Object(n.isFunction)(e)?e:!1===e?t:Object(n.isFunction)(o)?o:t}return{ctor:a(t,_),method:a(r,z),property:a(i,S)}}(e);return t?j(o,r):function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return j.apply(void 0,[o,r].concat(t))}}},"./global/utils/str.js":function(e,t,r){"use strict";function n(e){var t=e.lastIndexOf(".");return-1===t?null:e.substr(t+1)}r.r(t),r.d(t,"getPathExtension",(function(){return n}))},"./global/utils/type.js":function(e,t,r){"use strict";r.r(t),r.d(t,"isArray",(function(){return a})),r.d(t,"isArrayLike",(function(){return u})),r.d(t,"isAsyncFunction",(function(){return c})),r.d(t,"isBoolean",(function(){return l})),r.d(t,"isCanvas",(function(){return s})),r.d(t,"isDescriptor",(function(){return f})),r.d(t,"isDNA",(function(){return p})),r.d(t,"isError",(function(){return d})),r.d(t,"isNumber",(function(){return y})),r.d(t,"isFunction",(function(){return m})),r.d(t,"isNoU",(function(){return b})),r.d(t,"isNull",(function(){return h})),r.d(t,"isObject",(function(){return v})),r.d(t,"isObjectLike",(function(){return g})),r.d(t,"isObjectObject",(function(){return w})),r.d(t,"isPlain",(function(){return x})),r.d(t,"isPrimary",(function(){return _})),r.d(t,"isPromise",(function(){return z})),r.d(t,"isString",(function(){return S})),r.d(t,"isSymbol",(function(){return j})),r.d(t,"isSubclassOf",(function(){return E})),r.d(t,"isTag",(function(){return T})),r.d(t,"isTr2OrTri",(function(){return O})),r.d(t,"toTw2",(function(){return R})),r.d(t,"getTypeUpper",(function(){return P})),r.d(t,"isTyped",(function(){return D})),r.d(t,"isUndefined",(function(){return A})),r.d(t,"isVector",(function(){return M})),r.d(t,"isVector2",(function(){return C})),r.d(t,"isVector3",(function(){return k})),r.d(t,"isVector4",(function(){return I})),r.d(t,"isMatrix3",(function(){return L})),r.d(t,"isMatrix4",(function(){return G})),r.d(t,"isPrimaryEqual",(function(){return F})),r.d(t,"isVectorEqual",(function(){return B})),r.d(t,"isEqual",(function(){return N}));var n=r("./global/math/num.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=Object.prototype.toString,a=Array.isArray;function u(e){return!!e&&(a(e)||D(e))}function c(e){return!(!m(e)||"AsyncFunction"!==e.constructor.name)}function l(e){return T(e,"[object Boolean]")}function s(e){return!!(e&&e instanceof HTMLCanvasElement)}function f(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],r=0,n=t.length;r<n;r++)if(e.hasOwnProperty(t[r]))return!0;return!1}function p(e){return S(e)&&e.match(/(\w|\d|[-_])+:(\w|\d|[-_])+:(\w|\d|[-_])+/)}function d(e){return!!e&&(e instanceof Error||"Error"===e.constructor.__category)}function y(e){return T(e,"[object Number]")}function m(e){return"function"==typeof e}function b(e){return null==e}function h(e){return null===e}function v(e){var t=i(e);return null!==e&&("object"===t||"function"===t)}function g(e){return null!==e&&"object"===i(e)}function w(e){return null!==e&&T(e,"[object Object]")}function x(e){if(!v(e)||!w)return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _(e){return l(e)||y(e)||S(e)}function z(e){return v(e)&&m(e.then)}function S(e){return T(e,"[object String]")}function j(e){return"symbol"===i(e)||T(e,"[object Symbol]")}function E(e,t){if(!m(e))return!1;for(;m(e);){if(e===t)return!0;e=Reflect.getPrototypeOf(e)}return!1}function T(e,t){return o.call(e)===t}function O(e){return e&&0===e.indexOf("Tr2")||0===e.indexOf("Tri")}function R(e){return O(e)?e.replace("Tr2","Tw2").replace("Tri","Tw2"):e}function P(e){return Object.prototype.toString.call(e).slice(8,-1).toUpperCase()}function D(e){return!!e&&!!(e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT)}function A(e){return void 0===e}function M(e,t){if(e){if(D(e))return void 0===t||e.length===t;if(a(e)){if(void 0!==t&&e.length!==t)return!1;for(var r=0;r<e.length;r++)if(!y(e[r]))return!1;return!0}}return!1}function C(e){return M(e,2)}function k(e){return M(e,3)}function I(e){return M(e,4)}function L(e){return M(e,9)}function G(e){return M(e,16)}function F(e,t){return e===t||!(!y(e)||!y(t))&&n.num.equals(e,t)}function B(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!n.num.equals(e[r],t[r]))return!1;return!0}function N(e,t){if(e===t)return!0;if(y(e))return!!y(t)&&n.num.equals(e,t);if(M(e))return!!M(t)&&B(e,t);if(!w(e)||!w(t))return!1;if(e.constructor!==t.constructor)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++){var a=r[o];if(!t.hasOwnProperty(a))return!1;if(!N(e[a],t[a]))return!1}for(var u=0;u<i.length;u++)if(e.hasOwnProperty(i[u]))return!1;return!0}},"./global/utils/url.js":function(e,t,r){"use strict";r.r(t),r.d(t,"getURL",(function(){return f})),r.d(t,"getURLString",(function(){return p})),r.d(t,"getURLInteger",(function(){return d})),r.d(t,"getURLFloat",(function(){return y})),r.d(t,"getURLBoolean",(function(){return m}));for(var n=r("./global/utils/type.js"),i={},o=window.location.search.substring(1).split("&"),a=0;a<o.length;a++){var u=o[a].split("="),c=u[0],l=unescape(u[1]);if(c){var s=l.toLowerCase();switch(s){case"true":s=!0;break;case"false":s=!1;break;case"null":s=null;break;case"undefined":s=void 0;break;default:isNaN(s)||(s=Number(s))}i[c.toLowerCase()]=s}}function f(e){if(Object(n.isPlain)(e)){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=void 0===i[r]?e[r]:i[r]);return t}if(Object(n.isFunction)(e)){var o={};for(var a in i)if(i.hasOwnProperty(a)){var u=e(a,i[a],i);void 0!==u&&(o[a]=u)}return o}return Object.assign({},i)}function p(e,t){return(e=e.toLowerCase())in i?i[e]:t}function d(e,t){return(e=e.toLowerCase())in i?parseInt(i[e],10):t}function y(e,t){return(e=e.toLowerCase())in i?parseFloat(i[e]):t}function m(e,t){return(e=e.toLowerCase())in i?i[e]:t}},"./global/utils/uuid.js":function(e,t,r){"use strict";r.r(t),r.d(t,"enableUUID",(function(){return a})),r.d(t,"generateID",(function(){return u}));var n=null,i=0,o=null;function a(e){if(e!==n){if(null!==n)throw new Error("Cannot change id generation type once set");if(e){o=[];for(var t=0;t<256;t++)o[t]=(t<16?"0":"")+t.toString(16).toUpperCase()}n=e}}function u(){return null===n&&(n=!1),n?(e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,a=4294967295*Math.random()|0,o[255&e]+o[e>>8&255]+o[e>>16&255]+o[e>>24&255]+"-"+o[255&t]+o[t>>8&255]+"-"+o[t>>16&15|64]+o[t>>24&255]+"-"+o[63&r|128]+o[r>>8&255]+"-"+o[r>>16&255]+o[r>>24&255]+o[255&a]+o[a>>8&255]+o[a>>16&255]+o[a>>24&255]):i++;var e,t,r,a}},"./index.js":function(e,t,r){"use strict";r.r(t);r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.symbol.description.js"),r("../node_modules/core-js/modules/es.symbol.async-iterator.js"),r("../node_modules/core-js/modules/es.symbol.has-instance.js"),r("../node_modules/core-js/modules/es.symbol.is-concat-spreadable.js"),r("../node_modules/core-js/modules/es.symbol.iterator.js"),r("../node_modules/core-js/modules/es.symbol.match.js"),r("../node_modules/core-js/modules/es.symbol.replace.js"),r("../node_modules/core-js/modules/es.symbol.search.js"),r("../node_modules/core-js/modules/es.symbol.species.js"),r("../node_modules/core-js/modules/es.symbol.split.js"),r("../node_modules/core-js/modules/es.symbol.to-primitive.js"),r("../node_modules/core-js/modules/es.symbol.to-string-tag.js"),r("../node_modules/core-js/modules/es.symbol.unscopables.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.copy-within.js"),r("../node_modules/core-js/modules/es.array.every.js"),r("../node_modules/core-js/modules/es.array.fill.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.array.find-index.js"),r("../node_modules/core-js/modules/es.array.flat.js"),r("../node_modules/core-js/modules/es.array.flat-map.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/es.array.from.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.array.index-of.js"),r("../node_modules/core-js/modules/es.array.is-array.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.array.join.js"),r("../node_modules/core-js/modules/es.array.last-index-of.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.of.js"),r("../node_modules/core-js/modules/es.array.reduce.js"),r("../node_modules/core-js/modules/es.array.reduce-right.js"),r("../node_modules/core-js/modules/es.array.reverse.js"),r("../node_modules/core-js/modules/es.array.slice.js"),r("../node_modules/core-js/modules/es.array.some.js"),r("../node_modules/core-js/modules/es.array.sort.js"),r("../node_modules/core-js/modules/es.array.species.js"),r("../node_modules/core-js/modules/es.array.splice.js"),r("../node_modules/core-js/modules/es.array.unscopables.flat.js"),r("../node_modules/core-js/modules/es.array.unscopables.flat-map.js"),r("../node_modules/core-js/modules/es.array-buffer.constructor.js"),r("../node_modules/core-js/modules/es.array-buffer.is-view.js"),r("../node_modules/core-js/modules/es.array-buffer.slice.js"),r("../node_modules/core-js/modules/es.data-view.js"),r("../node_modules/core-js/modules/es.date.now.js"),r("../node_modules/core-js/modules/es.date.to-iso-string.js"),r("../node_modules/core-js/modules/es.date.to-json.js"),r("../node_modules/core-js/modules/es.date.to-primitive.js"),r("../node_modules/core-js/modules/es.date.to-string.js"),r("../node_modules/core-js/modules/es.function.bind.js"),r("../node_modules/core-js/modules/es.function.has-instance.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.json.to-string-tag.js"),r("../node_modules/core-js/modules/es.map.js"),r("../node_modules/core-js/modules/es.math.acosh.js"),r("../node_modules/core-js/modules/es.math.asinh.js"),r("../node_modules/core-js/modules/es.math.atanh.js"),r("../node_modules/core-js/modules/es.math.cbrt.js"),r("../node_modules/core-js/modules/es.math.clz32.js"),r("../node_modules/core-js/modules/es.math.cosh.js"),r("../node_modules/core-js/modules/es.math.expm1.js"),r("../node_modules/core-js/modules/es.math.fround.js"),r("../node_modules/core-js/modules/es.math.hypot.js"),r("../node_modules/core-js/modules/es.math.imul.js"),r("../node_modules/core-js/modules/es.math.log10.js"),r("../node_modules/core-js/modules/es.math.log1p.js"),r("../node_modules/core-js/modules/es.math.log2.js"),r("../node_modules/core-js/modules/es.math.sign.js"),r("../node_modules/core-js/modules/es.math.sinh.js"),r("../node_modules/core-js/modules/es.math.tanh.js"),r("../node_modules/core-js/modules/es.math.to-string-tag.js"),r("../node_modules/core-js/modules/es.math.trunc.js"),r("../node_modules/core-js/modules/es.number.constructor.js"),r("../node_modules/core-js/modules/es.number.epsilon.js"),r("../node_modules/core-js/modules/es.number.is-finite.js"),r("../node_modules/core-js/modules/es.number.is-integer.js"),r("../node_modules/core-js/modules/es.number.is-nan.js"),r("../node_modules/core-js/modules/es.number.is-safe-integer.js"),r("../node_modules/core-js/modules/es.number.max-safe-integer.js"),r("../node_modules/core-js/modules/es.number.min-safe-integer.js"),r("../node_modules/core-js/modules/es.number.parse-float.js"),r("../node_modules/core-js/modules/es.number.parse-int.js"),r("../node_modules/core-js/modules/es.number.to-fixed.js"),r("../node_modules/core-js/modules/es.number.to-precision.js"),r("../node_modules/core-js/modules/es.object.assign.js"),r("../node_modules/core-js/modules/es.object.create.js"),r("../node_modules/core-js/modules/es.object.define-getter.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js"),r("../node_modules/core-js/modules/es.object.define-setter.js"),r("../node_modules/core-js/modules/es.object.entries.js"),r("../node_modules/core-js/modules/es.object.freeze.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.get-own-property-names.js"),r("../node_modules/core-js/modules/es.object.get-prototype-of.js"),r("../node_modules/core-js/modules/es.object.is.js"),r("../node_modules/core-js/modules/es.object.is-extensible.js"),r("../node_modules/core-js/modules/es.object.is-frozen.js"),r("../node_modules/core-js/modules/es.object.is-sealed.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.object.lookup-getter.js"),r("../node_modules/core-js/modules/es.object.lookup-setter.js"),r("../node_modules/core-js/modules/es.object.prevent-extensions.js"),r("../node_modules/core-js/modules/es.object.seal.js"),r("../node_modules/core-js/modules/es.object.set-prototype-of.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.object.values.js"),r("../node_modules/core-js/modules/es.parse-float.js"),r("../node_modules/core-js/modules/es.parse-int.js"),r("../node_modules/core-js/modules/es.promise.js"),r("../node_modules/core-js/modules/es.promise.finally.js"),r("../node_modules/core-js/modules/es.reflect.apply.js"),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.reflect.define-property.js"),r("../node_modules/core-js/modules/es.reflect.delete-property.js"),r("../node_modules/core-js/modules/es.reflect.get.js"),r("../node_modules/core-js/modules/es.reflect.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.reflect.get-prototype-of.js"),r("../node_modules/core-js/modules/es.reflect.has.js"),r("../node_modules/core-js/modules/es.reflect.is-extensible.js"),r("../node_modules/core-js/modules/es.reflect.own-keys.js"),r("../node_modules/core-js/modules/es.reflect.prevent-extensions.js"),r("../node_modules/core-js/modules/es.reflect.set.js"),r("../node_modules/core-js/modules/es.reflect.set-prototype-of.js"),r("../node_modules/core-js/modules/es.regexp.constructor.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.regexp.flags.js"),r("../node_modules/core-js/modules/es.regexp.to-string.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.code-point-at.js"),r("../node_modules/core-js/modules/es.string.ends-with.js"),r("../node_modules/core-js/modules/es.string.from-code-point.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/es.string.match.js"),r("../node_modules/core-js/modules/es.string.pad-end.js"),r("../node_modules/core-js/modules/es.string.pad-start.js"),r("../node_modules/core-js/modules/es.string.raw.js"),r("../node_modules/core-js/modules/es.string.repeat.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.string.search.js"),r("../node_modules/core-js/modules/es.string.split.js"),r("../node_modules/core-js/modules/es.string.starts-with.js"),r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/core-js/modules/es.string.trim-end.js"),r("../node_modules/core-js/modules/es.string.trim-start.js"),r("../node_modules/core-js/modules/es.string.anchor.js"),r("../node_modules/core-js/modules/es.string.big.js"),r("../node_modules/core-js/modules/es.string.blink.js"),r("../node_modules/core-js/modules/es.string.bold.js"),r("../node_modules/core-js/modules/es.string.fixed.js"),r("../node_modules/core-js/modules/es.string.fontcolor.js"),r("../node_modules/core-js/modules/es.string.fontsize.js"),r("../node_modules/core-js/modules/es.string.italics.js"),r("../node_modules/core-js/modules/es.string.link.js"),r("../node_modules/core-js/modules/es.string.small.js"),r("../node_modules/core-js/modules/es.string.strike.js"),r("../node_modules/core-js/modules/es.string.sub.js"),r("../node_modules/core-js/modules/es.string.sup.js"),r("../node_modules/core-js/modules/es.typed-array.float32-array.js"),r("../node_modules/core-js/modules/es.typed-array.float64-array.js"),r("../node_modules/core-js/modules/es.typed-array.int8-array.js"),r("../node_modules/core-js/modules/es.typed-array.int16-array.js"),r("../node_modules/core-js/modules/es.typed-array.int32-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint8-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint16-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint32-array.js"),r("../node_modules/core-js/modules/es.typed-array.copy-within.js"),r("../node_modules/core-js/modules/es.typed-array.every.js"),r("../node_modules/core-js/modules/es.typed-array.fill.js"),r("../node_modules/core-js/modules/es.typed-array.filter.js"),r("../node_modules/core-js/modules/es.typed-array.find.js"),r("../node_modules/core-js/modules/es.typed-array.find-index.js"),r("../node_modules/core-js/modules/es.typed-array.for-each.js"),r("../node_modules/core-js/modules/es.typed-array.from.js"),r("../node_modules/core-js/modules/es.typed-array.includes.js"),r("../node_modules/core-js/modules/es.typed-array.index-of.js"),r("../node_modules/core-js/modules/es.typed-array.iterator.js"),r("../node_modules/core-js/modules/es.typed-array.join.js"),r("../node_modules/core-js/modules/es.typed-array.last-index-of.js"),r("../node_modules/core-js/modules/es.typed-array.map.js"),r("../node_modules/core-js/modules/es.typed-array.of.js"),r("../node_modules/core-js/modules/es.typed-array.reduce.js"),r("../node_modules/core-js/modules/es.typed-array.reduce-right.js"),r("../node_modules/core-js/modules/es.typed-array.reverse.js"),r("../node_modules/core-js/modules/es.typed-array.set.js"),r("../node_modules/core-js/modules/es.typed-array.slice.js"),r("../node_modules/core-js/modules/es.typed-array.some.js"),r("../node_modules/core-js/modules/es.typed-array.sort.js"),r("../node_modules/core-js/modules/es.typed-array.subarray.js"),r("../node_modules/core-js/modules/es.typed-array.to-locale-string.js"),r("../node_modules/core-js/modules/es.typed-array.to-string.js"),r("../node_modules/core-js/modules/es.weak-map.js"),r("../node_modules/core-js/modules/es.weak-set.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/web.immediate.js"),r("../node_modules/core-js/modules/web.queue-microtask.js"),r("../node_modules/core-js/modules/web.timers.js"),r("../node_modules/core-js/modules/web.url.js"),r("../node_modules/core-js/modules/web.url.to-json.js"),r("../node_modules/core-js/modules/web.url-search-params.js"),r("../node_modules/regenerator-runtime/runtime.js"),r("../node_modules/reflect-metadata/Reflect.js");var n=r("./config.js"),i=r("./global/index.js");r.d(t,"tw2",(function(){return i.tw2})),r.d(t,"CCPWGL",(function(){return i.tw2}));var o=r("./wrapped/index.js");r.d(t,"tiny",(function(){return o.tiny})),i.tw2.Register(n.config)},"./particle/Tw2ParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleSystem",(function(){return $}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F=r("./global/utils/index.js"),B=r("./global/index.js"),N=r("./global/math/index.js"),U=r("./core/index.js"),V=r("./particle/element/index.js");function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Z(e);if(t){var i=Z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Y(this,r)}}function Y(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var $=(n=F.meta.type("Tw2ParticleSystem","Tr2ParticleSystem"),i=F.meta.string,o=F.meta.boolean,a=F.meta.boolean,u=F.meta.list("Tw2ParticleConstraint"),c=F.meta.list("Tw2ParticleElementDeclaration"),l=F.meta.struct("Tw2ParticleEmitter"),s=F.meta.struct("Tw2ParticleEmitter"),f=F.meta.list("Tw2ParticleForce"),p=F.meta.uint,d=F.meta.boolean,y=F.meta.boolean,m=F.meta.boolean,b=F.meta.notImplemented,h=F.meta.boolean,v=F.meta.todo("This is unused, remove it?"),g=F.meta.todo("This is unused, remove it?"),n((G=L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(o,e);var t,r,n,i=K(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),H(e=i.call(this),"name",_,Q(e)),H(e,"applyAging",z,Q(e)),H(e,"applyForce",S,Q(e)),H(e,"constraints",j,Q(e)),H(e,"elements",E,Q(e)),H(e,"emitParticleDuringLifeEmitter",T,Q(e)),H(e,"emitParticleOnDeathEmitter",O,Q(e)),H(e,"forces",R,Q(e)),H(e,"maxParticleCount",P,Q(e)),H(e,"requiresSorting",D,Q(e)),H(e,"updateBoundingBox",A,Q(e)),H(e,"updateSimulation",M,Q(e)),H(e,"useSimTimeRebase",C,Q(e)),H(e,"isGlobal",k,Q(e)),H(e,"peakAliveCount",I,Q(e)),e._aabbMin=N.vec3.create(),e._aabbMax=N.vec3.create(),e._aliveCount=0,e._bufferDirty=!1,e._buffers=[null,null],e._declaration=null,e._elements=[],e._instanceStride=[null,null],e._isValid=!1,e._distancesBuffer=null,e._sortedBuffer=null,e._sortedIndexes=null,e._stdElements=[null,null,null,null],e._vb=null,e._vertexStride=[null,null],o.init(),e}return t=o,n=[{key:"init",value:function(){V.Tw2ParticleElement.global||(o.global={vec3_0:N.vec3.create(),mat4_0:N.mat4.create()})}}],(r=[{key:"Initialize",value:function(){this.UpdateElementDeclaration()}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e}},{key:"UpdateElementDeclaration",value:function(){this._isValid=!1;var e=B.device.gl;if(this._vb&&(e.deleteBuffer(this._vb),this._vb=null),this._declaration=null,this._aliveCount=0,0!==this.elements.length){this._stdElements=[null,null,null,null],this._elements=[],this._instanceStride=[0,0],this._vertexStride=[0,0],this._declaration=new U.Tw2VertexDeclaration,this._buffers=[null,null];for(var t=0;t<this.elements.length;++t){var r=this.elements[t].usedByGPU?0:1,n=this.elements[t],i=V.Tw2ParticleElement.from({elementType:n.elementType,customName:n.customName,dimension:n.GetDimension(),usageIndex:n.usageIndex,usedByGPU:!!n.usedByGPU});if(i.startOffset=this._vertexStride[r],i.offset=i.startOffset,this.elements[t].elementType!==V.Tw2ParticleElement.Type.CUSTOM&&(this._stdElements[this.elements[t].elementType]=i),this._vertexStride[r]+=i.dimension,this._elements.push(i),0===r){var o=this.elements[t].GetDeclaration();o.offset=4*i.startOffset,this._declaration.elements.push(o)}}this._declaration.RebuildHash();for(var a=0;a<this._elements.length;++a){var u=this._elements[a].usedByGPU?0:1;this._elements[a].vertexStride=this._vertexStride[u]}this._instanceStride[0]=4*this._vertexStride[0],this._instanceStride[1]=4*this._vertexStride[1];for(var c=0;c<this._elements.length;++c){var l=this._elements[c].usedByGPU?0:1;this._elements[c].instanceStride=this._instanceStride[l]}this._buffers=[null,null],this._instanceStride[0]&&this.maxParticleCount&&(this._buffers[0]=new Float32Array(this._instanceStride[0]*this.maxParticleCount),this._vb=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferData(e.ARRAY_BUFFER,this._buffers[0].length,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null)),this._instanceStride[1]&&(this._buffers[1]=new Float32Array(this._instanceStride[1]*this.maxParticleCount));for(var s=0;s<this._elements.length;++s){var f=this._elements[s].usedByGPU?0:1;this._elements[s].buffer=this._buffers[f]}this.requiresSorting&&(this._sortedIndexes=new Array(this.maxParticleCount),this._sortedBuffer=new Float32Array(this._instanceStride[0]*this.maxParticleCount),this._distancesBuffer=new Float32Array(this.maxParticleCount)),this._isValid=!0,this._bufferDirty=!0}}},{key:"HasElement",value:function(e){return null!==this._stdElements[e]}},{key:"GetElement",value:function(e){return this._stdElements[e]&&(this._stdElements[e].offset=this._stdElements[e].startOffset),this._stdElements[e]}},{key:"BeginSpawnParticle",value:function(){return!this._isValid||this._aliveCount>=this.maxParticleCount?null:this._aliveCount++}},{key:"EndSpawnParticle",value:function(){this._bufferDirty=!0}},{key:"Update",value:function(e){if(e=Math.min(e,.1),this.applyAging&&this.HasElement(V.Tw2ParticleElement.Type.LIFETIME)){for(var t=this.GetElement(V.Tw2ParticleElement.Type.LIFETIME),r=this.emitParticleOnDeathEmitter?this.GetElement(V.Tw2ParticleElement.Type.POSITION):null,n=this.emitParticleOnDeathEmitter?this.GetElement(V.Tw2ParticleElement.Type.VELOCITY):null,i=0;i<this._aliveCount;++i)if(t.buffer[t.offset]+=e/t.buffer[t.offset+1],t.buffer[t.offset]>1){if(this.emitParticleOnDeathEmitter&&this.emitParticleOnDeathEmitter.SpawnParticles(r,n,1),this._aliveCount--,i<this._aliveCount){for(var a=0;a<2;++a)this._buffers[a]&&this._buffers[a].set(this._buffers[a].subarray(this._instanceStride[a]*this._aliveCount,this._instanceStride[a]*this._aliveCount+this._instanceStride[a]),i*this._instanceStride[a]);--i,this._bufferDirty=!0}}else t.offset+=t.instanceStride,r&&(r.offset+=r.instanceStride),n&&(n.offset+=n.instanceStride);t.dirty=!0}var u=o.global.vec3_0;if(this.updateSimulation&&this.HasElement(V.Tw2ParticleElement.Type.POSITION)&&this.HasElement(V.Tw2ParticleElement.Type.VELOCITY)){for(var c=this.applyForce&&this.forces.length,l=0;l<this.forces.length;++l)this.forces[l].Update(e);for(var s=this.GetElement(V.Tw2ParticleElement.Type.POSITION),f=this.GetElement(V.Tw2ParticleElement.Type.VELOCITY),p=c?this.GetElement(V.Tw2ParticleElement.Type.MASS):null,d=0;d<this._aliveCount;++d){if(c){for(var y=p?p.buffer[p.offset]:1,m=N.vec3.set(u,0,0,0),b=0;b<this.forces.length;++b)this.forces[b].ApplyForce(s,f,m,e,y);p&&N.vec3.scale(m,m,1/p.buffer[p.offset]),f.buffer[f.offset]+=m[0]*e,f.buffer[f.offset+1]+=m[1]*e,f.buffer[f.offset+2]+=m[2]*e}s.buffer[s.offset]+=f.buffer[f.offset]*e,s.buffer[s.offset+1]+=f.buffer[f.offset+1]*e,s.buffer[s.offset+2]+=f.buffer[f.offset+2]*e,this.emitParticleDuringLifeEmitter&&this.emitParticleDuringLifeEmitter.SpawnParticles(s,f,e),s.offset+=s.instanceStride,f.offset+=f.instanceStride,p&&(p.offset+=p.instanceStride)}s.dirty=!0,f.dirty=!0}if(this.updateSimulation&&this.constraints.length)for(var h=0;h<this.constraints.length;++h)this.constraints[h].ApplyConstraint(this._buffers,this._instanceStride,this._aliveCount,e);if(this.updateBoundingBox&&this.GetBoundingBox(this._aabbMin,this._aabbMax),this.emitParticleDuringLifeEmitter&&(!this.HasElement(V.Tw2ParticleElement.Type.POSITION)||!this.HasElement(V.Tw2ParticleElement.Type.VELOCITY))&&this.updateSimulation)for(var v=this.GetElement(V.Tw2ParticleElement.Type.POSITION),g=this.GetElement(V.Tw2ParticleElement.Type.VELOCITY),w=0;w<this._aliveCount;++w)this.emitParticleDuringLifeEmitter.SpawnParticles(v,g,1),v&&(v.offset+=v.instanceStride),g&&(g.offset+=g.instanceStride);for(var x=0;x<this._elements.length;++x){var _=this._elements[x];_.offset=_.startOffset,_.dirty&&(this._bufferDirty=!0,_.dirty=!1)}}},{key:"GetBoundingBox",value:function(e,t){if(this._aliveCount&&this.HasElement(V.Tw2ParticleElement.Type.POSITION)){var r=this.GetElement(V.Tw2ParticleElement.Type.POSITION);e[0]=r.buffer[r.offset],e[1]=r.buffer[r.offset+1],e[2]=r.buffer[r.offset+2],t[0]=r.buffer[r.offset],t[1]=r.buffer[r.offset+1],t[2]=r.buffer[r.offset+2];for(var n=0;n<this._aliveCount;++n)e[0]=Math.min(e[0],r.buffer[r.offset]),e[1]=Math.min(e[1],r.buffer[r.offset+1]),e[2]=Math.min(e[2],r.buffer[r.offset+2]),t[0]=Math.max(t[0],r.buffer[r.offset]),t[1]=Math.max(t[1],r.buffer[r.offset+1]),t[2]=Math.max(t[2],r.buffer[r.offset+2]),r.offset+=r.instanceStride;return!0}return!1}},{key:"_Sort",value:function(){for(var e=N.mat4.multiply(o.global.mat4_0,B.device.projection,B.device.view),t=this.GetElement(V.Tw2ParticleElement.Type.POSITION),r=this._aliveCount,n=this._distancesBuffer,i=0;i<r;++i){var a=t.offset+t.instanceStride*i,u=t.buffer[a]-e[12],c=u*u;c+=(u=t.buffer[a+1]-e[13])*u,c+=(u=t.buffer[a+2]-e[14])*u,n[i]=c}for(var l=0;l<this.maxParticleCount;++l)this._sortedIndexes[l]=l;this._sortedIndexes.sort((function(e,t){if(e>=r&&t>=r)return e<t?-1:e>t?1:0;if(e>=r)return 1;if(t>=r)return-1;var i=n[e],o=n[t];return i<o?1:i>o?-1:0}))}},{key:"GetInstanceBuffer",value:function(){if(0!==this._aliveCount){var e=B.device.gl;if(this.requiresSorting&&this.HasElement(V.Tw2ParticleElement.Type.POSITION)&&this._buffers){this._Sort();for(var t=this._instanceStride[0],r=this._buffers[0],n=0;n<this._aliveCount;++n)for(var i=n*t,o=this._sortedIndexes[n]*t,a=0;a<t;++a)this._sortedBuffer[i+a]=r[a+o];e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferSubData(e.ARRAY_BUFFER,0,this._sortedBuffer.subarray(0,this._vertexStride[0]*this._aliveCount)),this._bufferDirty=!1}else this._bufferDirty&&(e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferSubData(e.ARRAY_BUFFER,0,this._buffers[0].subarray(0,this._vertexStride[0]*this._aliveCount)),this._bufferDirty=!1);return this._vb}}},{key:"GetInstanceDeclaration",value:function(){return this._declaration}},{key:"GetInstanceStride",value:function(){return this._instanceStride[0]}},{key:"GetInstanceCount",value:function(){return this._aliveCount}}])&&W(t.prototype,r),n&&W(t,n),o}(F.meta.Model),L.global=null,_=J((x=G).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=J(x.prototype,"applyAging",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=J(x.prototype,"applyForce",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),j=J(x.prototype,"constraints",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=J(x.prototype,"elements",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=J(x.prototype,"emitParticleDuringLifeEmitter",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=J(x.prototype,"emitParticleOnDeathEmitter",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=J(x.prototype,"forces",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=J(x.prototype,"maxParticleCount",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=J(x.prototype,"requiresSorting",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=J(x.prototype,"updateBoundingBox",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=J(x.prototype,"updateSimulation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=J(x.prototype,"useSimTimeRebase",[b,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=J(x.prototype,"isGlobal",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=J(x.prototype,"peakAliveCount",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=x))||w)},"./particle/element/Tw2ParticleElement.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleElement",(function(){return C}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R=r("./global/utils/index.js");function P(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var M={LIFETIME:0,POSITION:1,VELOCITY:2,MASS:3,CUSTOM:4},C=(n=R.meta.type("Tw2ParticleElement"),i=R.meta.enums(M),o=R.meta.string,a=R.meta.uint,u=R.meta.uint,c=R.meta.boolean,l=R.meta.uint,s=R.meta.uint,f=R.meta.uint,p=R.meta.uint,d=R.meta.boolean,y=R.meta.isPrivate,n((O=T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,"elementType",h,this),P(this,"customName",v,this),P(this,"dimension",g,this),P(this,"usageIndex",w,this),P(this,"usedByGPU",x,this),this.buffer=null,P(this,"startOffset",_,this),P(this,"offset",z,this),P(this,"instanceStride",S,this),P(this,"vertexStride",j,this),P(this,"dirty",E,this)}var t,r,n;return t=e,n=[{key:"from",value:function(t){var r=new e;if(t){var n=t.elementType;r.elementType="string"==typeof n?this.Type[n.toUpperCase()]:n,r.customName=t.customName,r.dimension=t.dimension,r.usageIndex=t.usageIndex,r.usedByGPU=t.usedByGPU?1:0}return r}}],(r=[{key:"string",get:function(){return Object(R.getKeyFromValue)(this.constructor.Type,this.elementType,"UNKNOWN")}}])&&D(t.prototype,r),n&&D(t,n),e}(),T.Type=M,h=A((b=O).prototype,"elementType",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=A(b.prototype,"customName",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=A(b.prototype,"dimension",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=A(b.prototype,"usageIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=A(b.prototype,"usedByGPU",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=A(b.prototype,"startOffset",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=A(b.prototype,"offset",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=A(b.prototype,"instanceStride",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=A(b.prototype,"vertexStride",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=A(b.prototype,"dirty",[d,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=b))||m)},"./particle/element/Tw2ParticleElementDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleElementDeclaration",(function(){return D}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./core/index.js"),g=r("./particle/element/Tw2ParticleElement.js"),w=r("./global/utils/index.js");function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D=(n=w.meta.type("Tw2ParticleElementDeclaration","Tr2ParticleElementDeclaration"),i=w.meta.string,o=w.meta.uint,a=w.meta.uint,u=w.meta.enums(g.Tw2ParticleElement.Type),c=w.meta.uint,l=w.meta.boolean,n((h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,r,n,i=E(o);function o(){var e;z(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _(e=i.call.apply(i,[this].concat(r)),"customName",p,O(e)),_(e,"dimension",d,O(e)),_(e,"elementType",y,O(e)),_(e,"usageIndex",m,O(e)),_(e,"usedByGPU",b,O(e)),e}return t=o,(r=[{key:"GetDimension",value:function(){switch(this.elementType){case g.Tw2ParticleElement.Type.LIFETIME:return 2;case g.Tw2ParticleElement.Type.POSITION:case g.Tw2ParticleElement.Type.VELOCITY:return 3;case g.Tw2ParticleElement.Type.MASS:return 1}return this.dimension}},{key:"GetDeclaration",value:function(){var e;switch(this.elementType){case g.Tw2ParticleElement.Type.LIFETIME:e=v.Tw2VertexElement.Type.TANGENT;break;case g.Tw2ParticleElement.Type.POSITION:e=v.Tw2VertexElement.Type.POSITION;break;case g.Tw2ParticleElement.Type.VELOCITY:e=v.Tw2VertexElement.Type.NORMAL;break;case g.Tw2ParticleElement.Type.MASS:e=v.Tw2VertexElement.Type.BINORMAL;break;default:e=v.Tw2VertexElement.Type.TEXCOORD}return v.Tw2VertexElement.from({usage:e,usageIndex:this.usageIndex,elements:this.GetDimension()})}}])&&S(t.prototype,r),n&&S(t,n),o}(w.meta.Model),p=P((f=h).prototype,"customName",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=P(f.prototype,"dimension",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=P(f.prototype,"elementType",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.Tw2ParticleElement.Type.CUSTOM}}),m=P(f.prototype,"usageIndex",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=P(f.prototype,"usedByGPU",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s=f))||s)},"./particle/element/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/element/Tw2ParticleElement.js");r.d(t,"Tw2ParticleElement",(function(){return n.Tw2ParticleElement}));var i=r("./particle/element/Tw2ParticleElementDeclaration.js");r.d(t,"Tw2ParticleElementDeclaration",(function(){return i.Tw2ParticleElementDeclaration}))},"./particle/emitter/Tw2DynamicEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2DynamicEmitter",(function(){return P}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./global/utils/index.js"),g=r("./particle/emitter/Tw2ParticleEmitter.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P=(n=v.meta.type("Tw2DynamicEmitter","Tr2DynamicEmitter"),i=v.meta.string,o=v.meta.list("Tw2ParticleAttributeGenerator"),a=v.meta.notImplemented,u=v.meta.uint,c=v.meta.struct("Tw2ParticleSystem"),l=v.meta.float,n((h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,r,n,i=j(o);function o(){var e;_(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(e=i.call.apply(i,[this].concat(r)),"name",p,T(e)),x(e,"generators",d,T(e)),x(e,"maxParticles",y,T(e)),x(e,"particleSystem",m,T(e)),x(e,"rate",b,T(e)),e._accumulatedRate=0,e._isValid=!1,e}return t=o,(r=[{key:"Initialize",value:function(){this.Rebind()}},{key:"Update",value:function(e){this.SpawnParticles(null,null,Math.min(e,.1))}},{key:"Rebind",value:function(){if(this._isValid=!1,this.particleSystem){for(var e=0;e<this.generators.length;++e)if(!this.generators[e].Bind(this.particleSystem))return;this._isValid=!0}}},{key:"SpawnParticles",value:function(e,t,r){if(this._isValid){this._accumulatedRate+=this.rate*r;var n=Math.floor(this._accumulatedRate);this._accumulatedRate-=n;for(var i=0;i<n;++i){var o=this.particleSystem.BeginSpawnParticle();if(null===o)break;for(var a=0;a<this.generators.length;++a)this.generators[a].Generate(e,t,o);this.particleSystem.EndSpawnParticle()}}}}])&&z(t.prototype,r),n&&z(t,n),o}(g.Tw2ParticleEmitter),p=R((f=h).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=R(f.prototype,"generators",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=R(f.prototype,"maxParticles",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=R(f.prototype,"particleSystem",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=R(f.prototype,"rate",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=f))||s)},"./particle/emitter/Tw2ParticleEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleEmitter",(function(){return z}));var n,i,o,a,u=r("./global/utils/index.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h,v,g,w,x,_,z=(n=u.meta.struct("Tw2ParticleSystem"),a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,r,n,i=d(a);function a(){var e;s(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(e=i.call.apply(i,[this].concat(r)),"particleSystem",o,m(e)),e}return t=a,(r=[{key:"Initialize",value:function(){}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.particleSystem&&this.particleSystem.GetResources(e),e}},{key:"Update",value:function(e){}}])&&f(t.prototype,r),n&&f(t,n),a}(u.meta.Model),h=(i=a).prototype,v="particleSystem",g=[n],w={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},_={},Object.keys(w).forEach((function(e){_[e]=w[e]})),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=g.slice().reverse().reduce((function(e,t){return t(h,v,e)||e}),_),x&&void 0!==_.initializer&&(_.value=_.initializer?_.initializer.call(x):void 0,_.initializer=void 0),void 0===_.initializer&&(Object.defineProperty(h,v,_),_=null),o=_,i)},"./particle/emitter/Tw2StaticEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2StaticEmitter",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./global/utils/index.js"),g=r("./global/index.js"),w=r("./core/index.js"),x=r("./particle/emitter/Tw2ParticleEmitter.js");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var A=(n=v.meta.type("Tw2StaticEmitter","Tr2StaticEmitter"),i=v.meta.string,o=v.meta.path,a=v.meta.uint,u=v.meta.struct("Tw2ParticleSystem"),c=v.meta.struct("Tw2GeometryRes"),l=v.meta.isPrivate,n((h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,e);var t,r,n,i=T(o);function o(){var e;S(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return z(e=i.call.apply(i,[this].concat(r)),"name",p,R(e)),z(e,"geometryResourcePath",d,R(e)),z(e,"meshIndex",y,R(e)),z(e,"particleSystem",m,R(e)),z(e,"geometryResource",b,R(e)),e._spawned=!1,e}return t=o,(r=[{key:"Initialize",value:function(){var e=this;""!==this.geometryResourcePath&&(this.geometryResource=g.tw2.GetResource(this.geometryResourcePath,(function(t){t.systemMirror=!0,e.OnResPrepared(t)}))),this._spawned=!1}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.particleSystem&&this.particleSystem.GetResources(e),this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),e}},{key:"OnResPrepared",value:function(){this.geometryResource&&this.geometryResource.meshes.length&&(this.geometryResource.meshes[0].bufferData||(this.geometryResource.systemMirror=!0,this.geometryResource.Reload()))}},{key:"Update",value:function(){var e=this.geometryResource;if(!this._spawned&&this.particleSystem&&e&&e.IsGood()&&e.meshes.length>this.meshIndex&&e.meshes[this.meshIndex].bufferData){this._spawned=!0;for(var t=e.meshes[this.meshIndex],r=this.particleSystem.elements,n=new Array(r.length),i=0;i<r.length;++i){var o=r[i].GetDeclaration(),a=t.declaration.FindUsage(o.usage,o.usageIndex-8);if(null===a)return void e.OnError(new w.ErrGeometryMeshMissingParticleElement({path:e.path,elementUsage:o.usage,elementUsageIndex:o.usageIndex}));if(a.elements<o.elements)return void e.OnError(new w.ErrGeometryMeshElementComponentsMissing({path:e.path,inputCount:a.elements,elementCount:o.elements,elementUsage:o.usage,elementUsageIndex:o.usageIndex}));n[i]=a.offset/4}for(var u=t.bufferData.length/t.declaration.stride*4,c=0;c<u;++c){var l=this.particleSystem.BeginSpawnParticle();if(null===l)break;for(var s=0;s<this.particleSystem._elements.length;++s)for(var f=this.particleSystem._elements[s],p=0;p<f.dimension;++p)f.buffer[f.instanceStride*l+f.startOffset+p]=t.bufferData[n[s]+p+c*t.declaration.stride/4];this.particleSystem.EndSpawnParticle()}}}},{key:"geometryIndex",get:function(){return this.meshIndex},set:function(e){this.meshIndex=e}}])&&j(t.prototype,r),n&&j(t,n),o}(x.Tw2ParticleEmitter),p=D((f=h).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=D(f.prototype,"geometryResourcePath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=D(f.prototype,"meshIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=D(f.prototype,"particleSystem",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=D(f.prototype,"geometryResource",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=f))||s)},"./particle/emitter/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/emitter/Tw2StaticEmitter.js");r.d(t,"Tw2StaticEmitter",(function(){return n.Tw2StaticEmitter}));var i=r("./particle/emitter/Tw2DynamicEmitter.js");r.d(t,"Tw2DynamicEmitter",(function(){return i.Tw2DynamicEmitter}))},"./particle/force/Tw2ParticleAttractorForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleAttractorForce",(function(){return S}));var n,i,o,a,u,c,l,s,f=r("./global/math/index.js"),p=r("./global/utils/index.js"),d=r("./particle/force/Tw2ParticleForce.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=p.meta.type("Tw2ParticleAttractorForce","Tr2ParticleAttractorForce"),i=p.meta.float,o=p.meta.vector3,n((s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,r,n,i=g(o);function o(){var e;b(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(e=i.call.apply(i,[this].concat(r)),"magnitude",c,x(e)),m(e,"position",l,x(e)),e}return t=o,(r=[{key:"ApplyForce",value:function(e,t,r,n,i){var o=d.Tw2ParticleForce.global.vec3_0;o[0]=this.position[0]-e.buffer[e.offset],o[1]=this.position[1]-e.buffer[e.offset+1],o[2]=this.position[2]-e.buffer[e.offset+2],f.vec3.normalize(o,o),f.vec3.scale(o,o,this.magnitude),f.vec3.add(r,r,o)}}])&&h(t.prototype,r),n&&h(t,n),o}(d.Tw2ParticleForce),c=z((u=s).prototype,"magnitude",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=z(u.prototype,"position",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.vec3.create()}}),a=u))||a)},"./particle/force/Tw2ParticleDirectForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleDirectForce",(function(){return T}));var n,i,o,a,u,c,l=r("./global/utils/index.js"),s=r("./global/math/index.js"),f=r("./particle/force/Tw2ParticleForce.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x,_,z,S,j,E,T=(n=l.meta.type("Tw2ParticleDirectForce","Tr2ParticleDirectForce"),i=l.meta.vector3,n((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,r,n,i=h(o);function o(){var e;y(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(e=i.call.apply(i,[this].concat(r)),"force",u,g(e)),e}return t=o,(r=[{key:"ApplyForce",value:function(e,t,r,n,i){s.vec3.add(r,r,this.force)}}])&&m(t.prototype,r),n&&m(t,n),o}(f.Tw2ParticleForce),x=(a=c).prototype,_="force",z=[i],S={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.vec3.create()}},E={},Object.keys(S).forEach((function(e){E[e]=S[e]})),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=z.slice().reverse().reduce((function(e,t){return t(x,_,e)||e}),E),j&&void 0!==E.initializer&&(E.value=E.initializer?E.initializer.call(j):void 0,E.initializer=void 0),void 0===E.initializer&&(Object.defineProperty(x,_,E),E=null),u=E,o=a))||o)},"./particle/force/Tw2ParticleDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleDragForce",(function(){return E}));var n,i,o,a,u,c,l=r("./global/utils/index.js"),s=r("./particle/force/Tw2ParticleForce.js");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,x,_,z,S,j,E=(n=l.meta.type("Tw2ParticleDragForce","Tr2ParticleDragForce"),i=l.meta.float,n((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,e);var t,r,n,i=b(o);function o(){var e;d(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return p(e=i.call.apply(i,[this].concat(r)),"drag",u,v(e)),e}return t=o,(r=[{key:"ApplyForce",value:function(e,t,r,n,i){r[0]+=t.buffer[t.offset]*-this.drag,r[1]+=t.buffer[t.offset+1]*-this.drag,r[2]+=t.buffer[t.offset+2]*-this.drag}}])&&y(t.prototype,r),n&&y(t,n),o}(s.Tw2ParticleForce),w=(a=c).prototype,x="drag",_=[i],z={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}},j={},Object.keys(z).forEach((function(e){j[e]=z[e]})),j.enumerable=!!j.enumerable,j.configurable=!!j.configurable,("value"in j||j.initializer)&&(j.writable=!0),j=_.slice().reverse().reduce((function(e,t){return t(w,x,e)||e}),j),S&&void 0!==j.initializer&&(j.value=j.initializer?j.initializer.call(S):void 0,j.initializer=void 0),void 0===j.initializer&&(Object.defineProperty(w,x,j),j=null),u=j,o=a))||o)},"./particle/force/Tw2ParticleFluidDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleFluidDragForce",(function(){return T}));var n,i,o,a,u,c,l=r("./global/utils/index.js"),s=r("./global/math/index.js"),f=r("./particle/force/Tw2ParticleForce.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x,_,z,S,j,E,T=(n=l.meta.type("Tw2ParticleFluidDragForce","Tr2ParticleFluidDragForce"),i=l.meta.float,n((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,r,n,i=h(o);function o(){var e;y(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(e=i.call.apply(i,[this].concat(r)),"drag",u,g(e)),e}return t=o,(r=[{key:"ApplyForce",value:function(e,t,r,n,i){var o=f.Tw2ParticleForce.global.vec3_0,a=f.Tw2ParticleForce.global.vec3_1,u=Math.sqrt(t.buffer[t.offset]*t.buffer[t.offset]+t.buffer[t.offset+1]*t.buffer[t.offset+1]+t.buffer[t.offset+2]*t.buffer[t.offset+2]);o[0]=t.buffer[t.offset]*-u*this.drag,o[1]=t.buffer[t.offset+1]*-u*this.drag,o[2]=t.buffer[t.offset+2]*-u*this.drag,s.vec3.scale(a,o,n*i),a[0]+=t.buffer[t.offset],a[1]+=t.buffer[t.offset+1],a[2]+=t.buffer[t.offset+2],t.buffer[t.offset]*a[0]+t.buffer[t.offset+1]*a[1]+t.buffer[t.offset+2]*a[2]<0?(r[0]=-t.buffer[t.offset]/n/i,r[1]=-t.buffer[t.offset+1]/n/i,r[2]=-t.buffer[t.offset+2]/n/i):s.vec3.copy(r,o)}}])&&m(t.prototype,r),n&&m(t,n),o}(f.Tw2ParticleForce),x=(a=c).prototype,_="drag",z=[i],S={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}},E={},Object.keys(S).forEach((function(e){E[e]=S[e]})),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=z.slice().reverse().reduce((function(e,t){return t(x,_,e)||e}),E),j&&void 0!==E.initializer&&(E.value=E.initializer?E.initializer.call(j):void 0,E.initializer=void 0),void 0===E.initializer&&(Object.defineProperty(x,_,E),E=null),u=E,o=a))||o)},"./particle/force/Tw2ParticleForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleForce",(function(){return _}));var n,i,o,a,u=r("./global/utils/index.js"),c=r("./global/math/index.js");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b,h,v,g,w,x,_=(n=u.meta.abstract,a=o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,e);var t,r,n,i=d(o);function o(){return s(this,o),i.apply(this,arguments)}return t=o,(r=[{key:"ApplyForce",value:function(e,t,r,n,i){}},{key:"Update",value:function(e){}}])&&f(t.prototype,r),n&&f(t,n),o}(u.meta.Model),o.global={vec3_0:c.vec3.create(),vec3_1:c.vec3.create(),vec4_0:c.vec4.create()},b=(i=a).prototype,h="ApplyForce",v=[n],g=Object.getOwnPropertyDescriptor(i.prototype,"ApplyForce"),w=i.prototype,x={},Object.keys(g).forEach((function(e){x[e]=g[e]})),x.enumerable=!!x.enumerable,x.configurable=!!x.configurable,("value"in x||x.initializer)&&(x.writable=!0),x=v.slice().reverse().reduce((function(e,t){return t(b,h,e)||e}),x),w&&void 0!==x.initializer&&(x.value=x.initializer?x.initializer.call(w):void 0,x.initializer=void 0),void 0===x.initializer&&(Object.defineProperty(b,h,x),x=null),i)},"./particle/force/Tw2ParticleSpring.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleSpring",(function(){return S}));var n,i,o,a,u,c,l,s,f=r("./global/utils/index.js"),p=r("./global/math/index.js"),d=r("./particle/force/Tw2ParticleForce.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=f.meta.type("Tw2ParticleSpring","Tr2ParticleSpring"),i=f.meta.float,o=f.meta.vector3,n((s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,r,n,i=g(o);function o(){var e;b(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(e=i.call.apply(i,[this].concat(r)),"springConstant",c,x(e)),m(e,"position",l,x(e)),e}return t=o,(r=[{key:"ApplyForce",value:function(e,t,r,n,i){r[0]+=(this.position[0]-e.buffer[e.offset])*this.springConstant,r[1]+=(this.position[1]-e.buffer[e.offset+1])*this.springConstant,r[2]+=(this.position[2]-e.buffer[e.offset+2])*this.springConstant}}])&&h(t.prototype,r),n&&h(t,n),o}(d.Tw2ParticleForce),c=z((u=s).prototype,"springConstant",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=z(u.prototype,"position",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.vec3.create()}}),a=u))||a)},"./particle/force/Tw2ParticleTurbulenceForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleTurbulenceForce",(function(){return O}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js"),b=r("./global/math/index.js"),h=r("./particle/force/Tw2ParticleForce.js");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var O=(n=m.meta.type("Tw2ParticleTurbulenceForce","Tr2ParticleTurbulenceForce"),i=m.meta.vector3,o=m.meta.vector4,a=m.meta.float,u=m.meta.float,n((y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(o,e);var t,r,n,i=z(o);function o(){var e;w(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(e=i.call.apply(i,[this].concat(r)),"amplitude",s,j(e)),g(e,"frequency",f,j(e)),g(e,"noiseLevel",p,j(e)),g(e,"noiseRatio",d,j(e)),e._time=0,e}return t=o,(r=[{key:"ApplyForce",value:function(e,t,r,n,i){if(0!==this.noiseLevel){for(var o=e.buffer[e.offset]*this.frequency[0],a=e.buffer[e.offset+1]*this.frequency[1],u=e.buffer[e.offset+2]*this.frequency[2],c=this._time*this.frequency[3],l=0,s=.5,f=1/this.noiseRatio,p=b.vec4.set(h.Tw2ParticleForce.global.vec4_0,0,0,0,0),d=0;d<this.noiseLevel;++d)b.noise.turbulence(p,o,a,u,c,s),l+=s,o*=f,a*=f,u*=f,c*=f,s*=this.noiseRatio;r[0]+=p[0]*this.amplitude[0]*l,r[1]+=p[1]*this.amplitude[1]*l,r[2]+=p[2]*this.amplitude[2]*l}}},{key:"Update",value:function(e){this._time+=e}}])&&x(t.prototype,r),n&&x(t,n),o}(h.Tw2ParticleForce),s=T((l=y).prototype,"amplitude",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec3.fromValues(1,1,1)}}),f=T(l.prototype,"frequency",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec4.fromValues(1,1,1,1)}}),p=T(l.prototype,"noiseLevel",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=T(l.prototype,"noiseRatio",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),c=l))||c)},"./particle/force/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/force/Tw2ParticleAttractorForce.js");r.d(t,"Tw2ParticleAttractorForce",(function(){return n.Tw2ParticleAttractorForce}));var i=r("./particle/force/Tw2ParticleDirectForce.js");r.d(t,"Tw2ParticleDirectForce",(function(){return i.Tw2ParticleDirectForce}));var o=r("./particle/force/Tw2ParticleDragForce.js");r.d(t,"Tw2ParticleDragForce",(function(){return o.Tw2ParticleDragForce}));var a=r("./particle/force/Tw2ParticleFluidDragForce.js");r.d(t,"Tw2ParticleFluidDragForce",(function(){return a.Tw2ParticleFluidDragForce}));var u=r("./particle/force/Tw2ParticleSpring.js");r.d(t,"Tw2ParticleSpring",(function(){return u.Tw2ParticleSpring}));var c=r("./particle/force/Tw2ParticleTurbulenceForce.js");r.d(t,"Tw2ParticleTurbulenceForce",(function(){return c.Tw2ParticleTurbulenceForce}))},"./particle/generators/Tw2ParticleAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleAttributeGenerator",(function(){return v}));var n,i,o,a,u,c=r("./global/utils/index.js"),l=r("./global/math/index.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var v=(n=c.meta.abstract,i=c.meta.abstract,u=a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,e);var t,r,n,i=y(o);function o(){return f(this,o),i.apply(this,arguments)}return t=o,(r=[{key:"Bind",value:function(e){}},{key:"Generate",value:function(e,t,r){}}])&&p(t.prototype,r),n&&p(t,n),o}(c.meta.Model),a.global={vec3_0:l.vec3.create()},h((o=u).prototype,"Bind",[n],Object.getOwnPropertyDescriptor(o.prototype,"Bind"),o.prototype),h(o.prototype,"Generate",[i],Object.getOwnPropertyDescriptor(o.prototype,"Generate"),o.prototype),o)},"./particle/generators/Tw2RandomIntegerAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomIntegerAttributeGenerator",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./global/utils/index.js"),g=r("./global/math/index.js"),w=r("./particle/element/Tw2ParticleElement.js"),x=r("./particle/generators/Tw2ParticleAttributeGenerator.js");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var A=(n=v.meta.type("Tw2RandomIntegerAttributeGenerator","Tr2RandomIntegerAttributeGenerator"),i=v.meta.string,o=v.meta.uint,a=v.meta.enums(w.Tw2ParticleElement.Type),u=v.meta.vector4,c=v.meta.vector4,l=v.meta.struct("Tw2ParticleElement"),n((h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,e);var t,r,n,i=T(o);function o(){var e;S(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return z(e=i.call.apply(i,[this].concat(r)),"customName",p,R(e)),z(e,"elementType",d,R(e)),z(e,"minRange",y,R(e)),z(e,"maxRange",m,R(e)),z(e,"_element",b,R(e)),e}return t=o,(r=[{key:"Bind",value:function(e){for(var t=0;t<e._elements.length;++t)if(e._elements[t].elementType===this.elementType&&(this.elementType!==w.Tw2ParticleElement.Type.CUSTOM||e._elements[t].customName===this.customName))return this._element=e._elements[t],!0;return!1}},{key:"Generate",value:function(e,t,r){for(var n=0;n<this._element.dimension;++n)this._element.buffer[this._element.instanceStride*r+this._element.startOffset+n]=Math.floor(this.minRange[n]+Math.random()*(this.maxRange[n]-this.minRange[n])+.5)}}])&&j(t.prototype,r),n&&j(t,n),o}(x.Tw2ParticleAttributeGenerator),p=D((f=h).prototype,"customName",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=D(f.prototype,"elementType",[o,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.Tw2ParticleElement.Type.CUSTOM}}),y=D(f.prototype,"minRange",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec4.create()}}),m=D(f.prototype,"maxRange",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec4.create()}}),b=D(f.prototype,"_element",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=f))||s)},"./particle/generators/Tw2RandomUniformAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomUniformAttributeGenerator",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./global/utils/index.js"),g=r("./global/math/index.js"),w=r("./particle/element/Tw2ParticleElement.js"),x=r("./particle/generators/Tw2ParticleAttributeGenerator.js");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var A=(n=v.meta.type("Tw2RandomUniformAttributeGenerator","Tr2RandomUniformAttributeGenerator"),i=v.meta.string,o=v.meta.uint,a=v.meta.enums(w.Tw2ParticleElement.Type),u=v.meta.vector4,c=v.meta.vector4,l=v.meta.struct("Tw2ParticleElement"),n((h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,e);var t,r,n,i=T(o);function o(){var e;S(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return z(e=i.call.apply(i,[this].concat(r)),"customName",p,R(e)),z(e,"elementType",d,R(e)),z(e,"minRange",y,R(e)),z(e,"maxRange",m,R(e)),z(e,"_element",b,R(e)),e}return t=o,(r=[{key:"Bind",value:function(e){for(var t=0;t<e._elements.length;++t)if(e._elements[t].elementType===this.elementType&&(this.elementType!==w.Tw2ParticleElement.Type.CUSTOM||e._elements[t].customName===this.customName))return this._element=e._elements[t],!0;return!1}},{key:"Generate",value:function(e,t,r){for(var n=0;n<this._element.dimension;++n)this._element.buffer[this._element.instanceStride*r+this._element.startOffset+n]=this.minRange[n]+Math.random()*(this.maxRange[n]-this.minRange[n])}},{key:"elementType",get:function(){return w.Tw2ParticleElement.Type.CUSTOM}}])&&j(t.prototype,r),n&&j(t,n),o}(x.Tw2ParticleAttributeGenerator),p=D((f=h).prototype,"customName",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=D(f.prototype,"elementType",[o,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.Tw2ParticleElement.Type.CUSTOM}}),y=D(f.prototype,"minRange",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec4.create()}}),m=D(f.prototype,"maxRange",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec4.create()}}),b=D(f.prototype,"_element",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=f))||s)},"./particle/generators/Tw2SphereShapeAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SphereShapeAttributeGenerator",(function(){return ie}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q=r("./global/utils/index.js"),H=r("./global/math/index.js"),W=r("./particle/element/Tw2ParticleElement.js"),X=r("./particle/generators/Tw2ParticleAttributeGenerator.js");function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=re(e);if(t){var i=re(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ee(this,r)}}function ee(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?te(e):t}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ie=(n=q.meta.type("Tw2SphereShapeAttributeGenerator","Tr2SphereShapeAttributeGenerator"),i=q.meta.string,o=q.meta.float,a=q.meta.notImplemented,u=q.meta.float,c=q.meta.float,l=q.meta.float,s=q.meta.float,f=q.meta.float,p=q.meta.float,d=q.meta.float,y=q.meta.float,m=q.meta.float,b=q.meta.vector3,h=q.meta.quaternion,v=q.meta.boolean,g=q.meta.todo("Is this deprecated?"),w=q.meta.boolean,x=q.meta.todo("Is this deprecated?"),_=q.meta.struct("Tw2ParticleElement"),z=q.meta.struct("Tw2ParticleElement"),n((V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(o,e);var t,r,n,i=$(o);function o(){var e;Q(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Y(e=i.call.apply(i,[this].concat(r)),"customName",E,te(e)),Y(e,"distributionExponent",T,te(e)),Y(e,"maxPhi",O,te(e)),Y(e,"maxRadius",R,te(e)),Y(e,"maxSpeed",P,te(e)),Y(e,"maxTheta",D,te(e)),Y(e,"minPhi",A,te(e)),Y(e,"minRadius",M,te(e)),Y(e,"minSpeed",C,te(e)),Y(e,"minTheta",k,te(e)),Y(e,"parentVelocityFactor",I,te(e)),Y(e,"position",L,te(e)),Y(e,"rotation",G,te(e)),Y(e,"controlPosition",F,te(e)),Y(e,"controlVelocity",B,te(e)),Y(e,"_position",N,te(e)),Y(e,"_velocity",U,te(e)),e}return t=o,(r=[{key:"Bind",value:function(e){this._position=null,this._velocity=null;for(var t=0;t<e._elements.length;++t)e._elements[t].elementType===W.Tw2ParticleElement.Type.POSITION&&this.controlPosition?this._position=e._elements[t]:e._elements[t].elementType===W.Tw2ParticleElement.Type.VELOCITY&&this.controlVelocity&&(this._velocity=e._elements[t]);return!(this.controlPosition&&null===this._position||this.controlVelocity&&null===this._velocity)}},{key:"Generate",value:function(e,t,r){var n=(this.minPhi+Math.random()*(this.maxPhi-this.minPhi))/180*Math.PI,i=(this.minTheta+Math.random()*(this.maxTheta-this.minTheta))/180*Math.PI,o=X.Tw2ParticleAttributeGenerator.global.vec3_0;if(o[0]=Math.sin(n)*Math.cos(i),o[1]=-Math.cos(n),o[2]=Math.sin(n)*Math.sin(i),H.vec3.transformQuat(o,o,this.rotation),this._velocity){var a=this.minSpeed+Math.random()*(this.maxSpeed-this.minSpeed),u=this._velocity.instanceStride*r+this._velocity.startOffset;this._velocity.buffer[u]=o[0]*a,this._velocity.buffer[u+1]=o[1]*a,this._velocity.buffer[u+2]=o[2]*a,t&&(this._velocity.buffer[u]+=t.buffer[t.offset]*this.parentVelocityFactor,this._velocity.buffer[u+1]+=t.buffer[t.offset+1]*this.parentVelocityFactor,this._velocity.buffer[u+2]+=t.buffer[t.offset+2]*this.parentVelocityFactor)}if(this._position){H.vec3.scale(o,o,this.minRadius+Math.random()*(this.maxRadius-this.minRadius)),H.vec3.add(o,o,this.position),e&&(o[0]+=e.buffer[e.offset],o[1]+=e.buffer[e.offset+1],o[2]+=e.buffer[e.offset+2]);var c=this._position.instanceStride*r+this._position.startOffset;this._position.buffer[c]=o[0],this._position.buffer[c+1]=o[1],this._position.buffer[c+2]=o[2]}}}])&&Z(t.prototype,r),n&&Z(t,n),o}(X.Tw2ParticleAttributeGenerator),E=ne((j=V).prototype,"customName",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=ne(j.prototype,"distributionExponent",[o,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=ne(j.prototype,"maxPhi",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),R=ne(j.prototype,"maxRadius",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=ne(j.prototype,"maxSpeed",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=ne(j.prototype,"maxTheta",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),A=ne(j.prototype,"minPhi",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=ne(j.prototype,"minRadius",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=ne(j.prototype,"minSpeed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=ne(j.prototype,"minTheta",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=ne(j.prototype,"parentVelocityFactor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=ne(j.prototype,"position",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.vec3.create()}}),G=ne(j.prototype,"rotation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.quat.create()}}),F=ne(j.prototype,"controlPosition",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),B=ne(j.prototype,"controlVelocity",[w,x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=ne(j.prototype,"_position",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=ne(j.prototype,"_velocity",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=j))||S)},"./particle/generators/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/generators/Tw2RandomIntegerAttributeGenerator.js");r.d(t,"Tw2RandomIntegerAttributeGenerator",(function(){return n.Tw2RandomIntegerAttributeGenerator}));var i=r("./particle/generators/Tw2RandomUniformAttributeGenerator.js");r.d(t,"Tw2RandomUniformAttributeGenerator",(function(){return i.Tw2RandomUniformAttributeGenerator}));var o=r("./particle/generators/Tw2SphereShapeAttributeGenerator.js");r.d(t,"Tw2SphereShapeAttributeGenerator",(function(){return o.Tw2SphereShapeAttributeGenerator}))},"./particle/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/element/index.js");r.d(t,"Tw2ParticleElement",(function(){return n.Tw2ParticleElement})),r.d(t,"Tw2ParticleElementDeclaration",(function(){return n.Tw2ParticleElementDeclaration}));var i=r("./particle/emitter/index.js");r.d(t,"Tw2StaticEmitter",(function(){return i.Tw2StaticEmitter})),r.d(t,"Tw2DynamicEmitter",(function(){return i.Tw2DynamicEmitter}));var o=r("./particle/force/index.js");r.d(t,"Tw2ParticleAttractorForce",(function(){return o.Tw2ParticleAttractorForce})),r.d(t,"Tw2ParticleDirectForce",(function(){return o.Tw2ParticleDirectForce})),r.d(t,"Tw2ParticleDragForce",(function(){return o.Tw2ParticleDragForce})),r.d(t,"Tw2ParticleFluidDragForce",(function(){return o.Tw2ParticleFluidDragForce})),r.d(t,"Tw2ParticleSpring",(function(){return o.Tw2ParticleSpring})),r.d(t,"Tw2ParticleTurbulenceForce",(function(){return o.Tw2ParticleTurbulenceForce}));var a=r("./particle/generators/index.js");r.d(t,"Tw2RandomIntegerAttributeGenerator",(function(){return a.Tw2RandomIntegerAttributeGenerator})),r.d(t,"Tw2RandomUniformAttributeGenerator",(function(){return a.Tw2RandomUniformAttributeGenerator})),r.d(t,"Tw2SphereShapeAttributeGenerator",(function(){return a.Tw2SphereShapeAttributeGenerator}));var u=r("./particle/Tw2ParticleSystem.js");r.d(t,"Tw2ParticleSystem",(function(){return u.Tw2ParticleSystem}))},"./sof/EveSOFData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFData",(function(){return be})),r.d(t,"ErrSOFHullNotFound",(function(){return ge})),r.d(t,"ErrSOFFactionNotFound",(function(){return we})),r.d(t,"ErrSOFRaceNotFound",(function(){return xe})),r.d(t,"ErrSOFMaterialNotFound",(function(){return _e})),r.d(t,"ErrSOFPatternNotFound",(function(){return ze})),r.d(t,"ErrSOFDNAFormatInvalid",(function(){return Se})),r.d(t,"ErrSOFResPathInsertInvalid",(function(){return je}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q=r("./global/index.js"),H=r("./global/math/index.js"),W=r("./global/constant/d3d.js"),X=r("./global/utils/index.js"),K=r("./core/index.js"),Y=r("./eve/index.js"),Q=r("./unsupported/eve/object/index.js"),Z=r("./sof/pattern/index.js"),J=r("./sof/faction/index.js"),$=r("./eve/item/EveLocatorSets.js");function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ne(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function ie(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ne(o,n,i,a,u,"next",e)}function u(e){ne(o,n,i,a,u,"throw",e)}a(void 0)}))}}function oe(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(e,t,r){return t&&ue(e.prototype,t),r&&ue(e,r),e}function le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ye(e);if(t){var i=ye(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pe(this,r)}}function pe(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var be=(n=X.meta.type("EveSOFData"),i=X.meta.list("EveSOFDataFaction"),o=X.meta.struct("EveSOFDataGeneric"),a=X.meta.list("EveSOFDataHull"),u=X.meta.list("EveSOFDataMaterial"),c=X.meta.list("EveSOFDataPattern"),l=X.meta.list("EveSOFDataRace"),n((g=v=function(e){le(l,e);var t,r,n,i,o,a,u,c=fe(l);function l(){var e;ae(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return oe(e=c.call.apply(c,[this].concat(r)),"faction",p,de(e)),oe(e,"generic",d,de(e)),oe(e,"hull",y,de(e)),oe(e,"material",m,de(e)),oe(e,"pattern",b,de(e)),oe(e,"race",h,de(e)),e._options={useSpotlightPool:!0,devColor:[0,0,0,0],wreckArea:{fallbackGeneralGlowColor:[67,9,0,1],minMapScaleUV:8,minGlowIntensity:50,maxGlowFlicker:.003,minSharpness:2.1,maxGlowFlickerDecalAreas:.004,minSharpnessDecalAreas:3.5},multiplier:{generalGlowColor:[10,10,10,1],generalHeatGlowColor:[100,100,100,1],boosterGlowScale:.125,boosterHaloScale:.5,boosterSymHalo:.125,boosterBrightness:1,boosterScale:[.9,.9,.9],boosterAlpha:.5,maxDistortionOffset:.001},effect:{sprite:null,banner:null,shadow:null,shadowSkinned:null},materialOverrides:{orange_neon01:{FresnelColor:[0,0,0,1]}},billboardsURL:"cdn:/billboards",billboards:null,effectPath:{plane:"cdn:/graphics/effect/managed/space/spaceobject/fx/planeglow.fx",spotlightCone:"res:/graphics/effect/managed/space/spaceobject/fx/spotlightcone.fx",spotlightGlow:"res:/graphics/effect/managed/space/spaceobject/fx/spotlightglow.fx",spotlightConePool:"cdn:/graphics/effect/managed/space/spaceobject/fx/spotlightconepool.fx",spotlightGlowPool:"cdn:/graphics/effect/managed/space/spaceobject/fx/spotlightglowpool.fx",boosterVolumetric:"cdn:/graphics/effect/managed/space/booster/boostervolumetric.fx",boosterGlow:"cdn:/graphics/effect/managed/space/booster/boosterglowanimated.fx",spriteSet:"cdn:/graphics/effect/managed/space/spaceobject/fx/blinkinglightspool.fx",banner:"cdn:/graphics/effect/managed/space/spaceobject/v5/fx/banner/unpacked_fxbannerv5.fx",shadow:"cdn:/graphics/effect/managed/space/spaceobject/shadow/shadow.fx"},texturePath:{noise:"res:/Texture/global/noise.dds.0.png",noise32:"res:/Texture/Global/noise32cube_volume.dds.0.png",whiteSharp:"res:/Texture/Particle/whitesharp.dds.0.png",hologramNoise:"cdn:/texture/fx/hologram/hologram_noise.dds",hologramPulse:"cdn:/texture/fx/hologram/hologram_pulse.dds",hologramInterlace:"cdn:/texture/fx/hologram/hologram_interlace_p.dds",bannerImage:"",bannerBorder:""},decalUsage:["decalv5.fx","decalcounterv5.fx","decalholev5.fx","decalcylindricv5.fx","decalglowcylindricv5.fx","decalglowv5.fx","decalv5.fx"]},e}return ce(l,[{key:"Initialize",value:function(e){var t=this;e&&Object.assign(this._options,e);var r=this._options,n=r.effect,i=r.effectPath,o=r.texturePath;n.sprite||(n.sprite=K.Tw2Effect.from({name:"Shared sprite set effect",effectFilePath:i.spriteSet,parameters:{MainIntensity:1,GradientMap:o.whiteSharp}})),n.banner||(n.banner=K.Tw2Effect.from({name:"Shared banner effect",effectFilePath:i.banner,autoParameter:!0,parameters:{Layer1Transform:[1.5,1.5,0,0],Layer2Transform:[1,1,0,0],Layer1Scroll:[.1,.1,.1,.1],Layer2Scroll:[.2,.2,0,0],BaseColor:[1.388235330581665,1.4980392456054688,1.7882353067398071,1]},textures:{BorderMap:o.bannerBorder,ImageMap:o.bannerImage,Layer1Map:o.hologramNoise,Layer2Map:o.hologramPulse,MaskMap:o.hologramInterlace}})),n.shadow||(n.shadow=K.Tw2Effect.from({name:"Shared shadow effect",effectFilePath:i.shadow})),n.shadowSkinned||(n.shadowSkinned=K.Tw2Effect.from({name:"Shared shadow skinned effect",effectFilePath:this.GetShaderPath(i.shadow,!0)}));var a=this._options.materialOverrides;if(a){var u=function(e){if(a.hasOwnProperty(e)&&Object.keys(a[e]).length){var r=t.material.find((function(t){return t.name===e}));if(r){var n=a[e],i=function(e){if(n.hasOwnProperty(e)){var t=r.parameters.find((function(t){return t.name===e}));t&&H.vec4.copy(t.value,n[e])}};for(var o in n)i(o)}}};for(var c in a)u(c)}}},{key:"GetHull",value:function(e){return Object(X.findElementByPropertyValue)(this.hull,"name",e,ge)}},{key:"GetHullNames",value:function(e){return l.GetNames(this.hull,e)}},{key:"HasHull",value:function(e){return!!Object(X.findElementByPropertyValue)(this.hull,"name",e)}},{key:"GetHullResPathInserts",value:function(e){return this.GetHull(e),J.EveSOFDataFaction.GetHullResPathInserts(e)}},{key:"GetHullBuildClass",value:function(e){return 2===this.GetHull(e).buildClass?2:1}},{key:"GetHullPatternNames",value:function(e){this.GetHull(e);for(var t=[],r=0;r<this.pattern.length;r++)this.pattern[r].Has(e)&&t.push(this.pattern[r].name);return t.sort()}},{key:"HasHullPattern",value:function(e,t){var r=this.GetHull(e);return!!this.HasPattern(t)&&this.GetPattern(t).Has(r.name)}},{key:"GetHullPattern",value:function(e,t){this.GetHull(e);return this.GetPattern(t).Get(e)}},{key:"GetFaction",value:function(e){return Object(X.findElementByPropertyValue)(this.faction,"name",e,we)}},{key:"GetFactionNames",value:function(e){return l.GetNames(this.faction,e)}},{key:"HasFaction",value:function(e){return!!Object(X.findElementByPropertyValue)(this.faction,"name",e)}},{key:"GetRace",value:function(e){return Object(X.findElementByPropertyValue)(this.race,"name",e,xe)}},{key:"GetRaceNames",value:function(e){return l.GetNames(this.race,e)}},{key:"HasRace",value:function(e){return!!Object(X.findElementByPropertyValue)(this.race,"name",e)}},{key:"GetMaterial",value:function(e){return Object(X.findElementByPropertyValue)(this.material,"name",e,_e)}},{key:"GetMaterialNames",value:function(e){return l.GetNames(this.material,e)}},{key:"HasMaterial",value:function(e){return!!Object(X.findElementByPropertyValue)(this.material,"name",e)}},{key:"GetPattern",value:function(e){return Object(X.findElementByPropertyValue)(this.pattern,"name",e,ze)}},{key:"GetPatternNames",value:function(e){return l.GetNames(this.pattern,e)}},{key:"HasPattern",value:function(e){return!!Object(X.findElementByPropertyValue)(this.pattern,"name",e)}},{key:"GetShaderPath",value:function(e,t){var r=this.generic.GetShaderPrefix(t),n=e.lastIndexOf("/");return e.substring(0,n+1)+r+e.substring(n+1)}},{key:"ParseDNA",value:function(e){if(!Object(X.isDNA)(e))throw new Se({dna:e});for(var t=(e=e.toLowerCase()).split(":"),r={},n=3;n<t.length;++n)try{var i=t[n].split("?");r[i[0].toUpperCase()]=i[1].split(";")}catch(t){throw new Se({dna:e})}var o=this.GetHull(t[0]),a=this.GetFaction(t[1]),u=this.GetRace(t[2]),c={},l=null,s=null,f=r.MESH||r.MATERIAL;if(f)for(var p=0;p<f.length;p++)this.generic.GetMaterialPrefix(p+1),f[p]&&"NONE"!==f[p].toUpperCase()&&(c["material".concat(p+1)]=this.GetMaterial(f[p]).name);var d=r.PATTERN;if(d){s=d[0]&&"NONE"!==d[0].toUpperCase()?this.GetHullPattern(o.name,d[0]):null;for(var y=1;y<d.length;y++)this.generic.GetPatternMaterialPrefix(y),d[y]&&"NONE"!==d[y].toUpperCase()&&(c["patternMaterial".concat(y)]=this.GetMaterial(d[y]).name)}return s||(a.defaultPattern?s={layer1:a.defaultPattern}:o.defaultPattern&&(s={layer1:o.defaultPattern})),!c.patternMaterial1&&a.defaultPatternLayer1MaterialName&&(c.patternMaterial1=this.GetMaterial(a.defaultPatternLayer1MaterialName).name),l=r.RESPATHINSERT?r.RESPATHINSERT[0]:a.resPathInsert||null,J.EveSOFDataFaction.IsValidResPathInsert(o.name,l)||(l="none"),{hull:o,faction:a,race:u,area:c,resPathInsert:l,pattern:s,dna:e}}},{key:"ToDNA",value:function(e){var t=e.hull,r=e.faction,n=e.race,i=e.area,o=e.resPathInsert,a=e.pattern;if(Object(X.isObjectObject)(t)&&(t=t.name),Object(X.isObjectObject)(r)&&(r=r.name),Object(X.isObjectObject)(n)&&(n=n.name),Object(X.isObjectObject)(a)&&(a=a.name),!t||!r||!n)throw new ReferenceError("Invalid dna object");var u="".concat(t,":").concat(r,":").concat(n).toLowerCase();if(o&&(u+=":respathinsert?resPathInsert"),i||((i={}).material1=e.material1,i.material2=e.material2,i.material3=e.material3,i.material4=e.material4,i.patternMaterial1=e.material5,i.patternMaterial2=e.material6),i){var c="".concat(i.material1||"none",";").concat(i.material2||"none",";").concat(i.material3||"none",";").concat(i.material4||"none").toLowerCase();"none;none;none;none"!==c&&(u+=":mesh?".concat(c))}if(a&&(u+=":pattern?".concat(a),i)){var l=";".concat(i.patternMaterial1||"none",";").concat(i.patternMaterial2||"none").toLowerCase();";none;none"!==l&&(u+=l)}return u}},{key:"AssignMaterialParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.material1&&this.GetMaterial(e.material1).AssignParameters(t,"Mtl1"),e.material2&&this.GetMaterial(e.material2).AssignParameters(t,"Mtl2"),e.material3&&this.GetMaterial(e.material3).AssignParameters(t,"Mtl3"),e.material4&&this.GetMaterial(e.material4).AssignParameters(t,"Mtl4"),e.patternMaterial1&&this.GetMaterial(e.patternMaterial1).AssignParameters(t,"PMtl1"),e.patternMaterial2&&this.GetMaterial(e.patternMaterial2).AssignParameters(t,"PMtl2"),t}},{key:"GetParametersFromMaterials",value:function(e){for(var t=this,r={},n=0;n<5;n++)e[n]&&function(){var i=t.GetMaterial(e[n]),o=void 0;switch(n){case 0:case 1:case 2:case 3:o="Mtl"+(n+1);break;case 4:case 5:o="PMtl"+(n-3)}i.parameters.forEach((function(e){r[o+e.name]=Array.from(e.value)}))}();return r}},{key:"Build",value:(u=ie(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.ParseDNA(t),(n=2===r.hull.buildClass?new Q.EveStation2:new Y.EveShip2).dna=t,e.next=4,l.Build(this,n,r,this._options);case 4:return n.Initialize&&n.Initialize(),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"Rebuild",value:(a=ie(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.ParseDNA(r),t.dna=r,e.next=4,l.Build(this,t,n,this._options);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"SetupTurretMaterial",value:(o=ie(regeneratorRuntime.mark((function e(t,r,n,i){var o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y=function(e,t,r){t&&void 0!==t[e]&&"none"!==t[e]?d[e]=t[e]:r&&void 0!==r[e]&&"none"!==r[e]&&(d[e]=r[e]),"none"===d[e]&&(d[e]=null)},o=r?this.GetFaction(r):null,a=n?this.GetFaction(n):null,o&&a){e.next=4;break}return e.abrupt("return");case 4:u=o?o.GetAreaType(0):null,c=a?a.GetAreaType(0):null,l=o?o.GetColorType(u.colorType,[0,0,0,1]):null,s=a?a.GetColorType(c.colorType,[0,0,0,1]):null,f=t.turretEffect,p=f.name,d={glowColor:null,material1:null,material2:null,material3:null,material4:null},m=!1,e.t0=p,e.next="overridable"===e.t0||"half_overridable"===e.t0?11:"not_overridable"===e.t0||"half_overridable_2"===e.t0?19:25;break;case 11:return y("material1",u,c),y("material2",u,c),y("material3",u,c),y("material4",u,c),d.glowColor=s,"overrideable"===p&&l&&(d.glowColor=l),i&&(m=!0),e.abrupt("break",25);case 19:return y("material1",c),y("material2",c),y("material3",c),y("material4",c),d.glowColor=s,e.abrupt("break",25);case 25:h=(b=o||{}).materialUsageMtl1,v=void 0===h?0:h,g=b.materialUsageMtl2,w=void 0===g?1:g,x=b.materialUsageMtl3,_=void 0===x?2:x,z=b.materialUsageMtl4,S=void 0===z?3:z,m?(T="Mtl".concat(v+1),O="Mtl".concat(w+1),R="Mtl".concat(_+1),P="Mtl".concat(S+1),f.parameters.GeneralGlowColor=i.GeneralGlowColor,f.parameters.Mtl1DiffuseColor=i["".concat(T,"DiffuseColor")],f.parameters.Mtl1FresnelColor=i["".concat(T,"FresnelColor")],f.parameters.Mtl1DustDiffuseColor=i["".concat(T,"DustDiffuseColor")],f.parameters.Mtl1Gloss=i["".concat(T,"Gloss")],f.parameters.Mtl2DiffuseColor=i["".concat(O,"DiffuseColor")],f.parameters.Mtl2FresnelColor=i["".concat(O,"FresnelColor")],f.parameters.Mtl2DustDiffuseColor=i["".concat(O,"DustDiffuseColor")],f.parameters.Mtl2Gloss=i["".concat(O,"Gloss")],f.parameters.Mtl3DiffuseColor=i["".concat(R,"DiffuseColor")],f.parameters.Mtl3FresnelColor=i["".concat(R,"FresnelColor")],f.parameters.Mtl3DustDiffuseColor=i["".concat(R,"DustDiffuseColor")],f.parameters.Mtl3Gloss=i["".concat(R,"Gloss")],f.parameters.Mtl4DiffuseColor=i["".concat(P,"DiffuseColor")],f.parameters.Mtl4FresnelColor=i["".concat(P,"FresnelColor")],f.parameters.Mtl4DustDiffuseColor=i["".concat(P,"DustDiffuseColor")],f.parameters.Mtl4Gloss=i["".concat(P,"Gloss")],f.BindParameters()):(j=f.GetParameters(),d.glowColor&&(H.vec4.multiply(d.glowColor,d.glowColor,this._options.multiplier.generalGlowColor),H.vec4.multiply(d.glowColor,d.glowColor,[.5,.5,.5,1]),j.GeneralGlowColor=d.glowColor),E={material1:d["material".concat([v+1])],material2:d["material".concat([w+1])],material3:d["material".concat([_+1])],material4:d["material".concat([S+1])]},this.AssignMaterialParameters(E,j),f.SetParameters(j)),f.SetValue(f.effectFilePath);case 28:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return o.apply(this,arguments)})}],[{key:"GetNames",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(X.isArray)(t),n=0;n<e.length;n++)r?t.push(e[n].name):t[e[n].name]=e[n].description||"";return r&&t.sort(),t}},{key:"Build",value:(i=ie(regeneratorRuntime.mark((function e(t,r,n,i){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=[t,r,n,i],!i.billboardsURL||i.billboards){e.next=13;break}return e.prev=2,e.next=5,fetch(q.resMan.BuildUrl(i.billboardsURL));case 5:return a=e.sent,e.next=8,a.json();case 8:i.billboards=e.sent,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:return this.SetupBounds.apply(this,o),this.SetupCustomMasks.apply(this,o),e.next=17,this.SetupMesh.apply(this,o);case 17:return this.SetupSpotlightSets.apply(this,o),this.SetupPlaneSets.apply(this,o),this.SetupSpriteSets.apply(this,o),this.SetupDecals.apply(this,o),this.SetupBoosters.apply(this,o),this.SetupLocators.apply(this,o),this.SetupInstancedMesh.apply(this,o),e.next=26,this.SetupShadows.apply(this,o);case 26:return this.SetupLocatorSets.apply(this,o),this.SetupHazeSets.apply(this,o),this.SetupSpriteLineSets.apply(this,o),this.SetupAudio.apply(this,o),this.SetupModelCurves.apply(this,o),this.SetupLights.apply(this,o),this.SetupObservers.apply(this,o),e.next=35,this.SetupChildren.apply(this,o);case 35:return this.SetupControllers.apply(this,o),e.abrupt("return",r);case 37:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(e,t,r,n){return i.apply(this,arguments)})},{key:"SetupCustomMask",value:function(e,t,r,n){r?(e.isMirrored=r.isMirrored,e.Compose(r.rotation,r.position,r.scaling)):(e.isMirrored=!1,e.Identity()),e.RebuildTransforms();var i=0,o=0;if(t?(e.display=!t.textureResFilepath||t.textureResFilepath.includes("solid_white"),e.materialIndex=t.materialSource,e.parameters.PatternMaskMap.SetValue(t.textureResFilePath),H.vec4.set(e.targetMaterials,t.isTargetMtl1?1:0,t.isTargetMtl2?1:0,t.isTargetMtl3?1:0,t.isTargetMtl4?1:0),i=t.projectionTypeU,o=t.projectionTypeV):(e.display=!1,e.materialIndex=0,e.parameters.PatternMaskMap.SetValue("cdn:/texture/global/black.png"),H.vec4.set(e.targetMaterials,0,0,0,0)),e.parameters.PatternMaskMap.SetOverrides({addressUMode:Z.EveSOFDataPatternLayer.ToAddressMode(i),addressVMode:Z.EveSOFDataPatternLayer.ToAddressMode(o)}),n){var a=n.AssignParameters({});e.parameters.DiffuseColor.SetValue(a.DiffuseColor),e.parameters.FresnelColor.SetValue(a.FresnelColor),e.parameters.DustDiffuseColor.SetValue(a.DustDiffuseColor),e.parameters.Gloss.SetValue(a.Gloss)}}},{key:"SetupCustomMasks",value:function(e,t,r,n){t.customMasks&&(t.customMasks[0]||(t.customMasks[0]=new Y.EveCustomMask,t.customMasks[0].name="Pattern1"),t.customMasks[1]||(t.customMasks[1]=new Y.EveCustomMask,t.customMasks[1].name="Pattern2"));var i=r.area.patternMaterial1?e.GetMaterial(r.area.patternMaterial1):null,o=r.area.patternMaterial2?e.GetMaterial(r.area.patternMaterial2):null,a=r.pattern||{};this.SetupCustomMask(t.customMasks[0],a.layer1,a.transformLayer1,i),this.SetupCustomMask(t.customMasks[1],a.layer2,a.transformLayer2,o)}},{key:"SetupBounds",value:function(e,t,r,n){var i=Object(X.get)(r.hull,"boundingSphere",[0,0,0,0]);t.boundingSphereRadius=i[3],H.vec3.copy(t.boundingSphereCenter,i);H.vec3.copy(t.shapeEllipsoidCenter,Object(X.get)(r.hull,"shapeEllipsoidCenter",[0,0,0])),H.vec3.copy(t.shapeEllipsoidRadius,Object(X.get)(r.hull,"shapeEllipsoidRadius",[0,0,0]))}},{key:"SetupMesh",value:(n=ie(regeneratorRuntime.mark((function e(t,r,n,i){var o,a,u,c,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.mesh=r.mesh||new K.Tw2Mesh,a=n.hull,u=Object(X.get)(n.hull,"geometryResFilePath","")){e.next=4;break}throw new TypeError("Hull has no geometry");case 4:return e.next=6,o.FetchGeometryResPath(u);case 6:(c=function(e){var u=Array.from(r.mesh[e]);Object(X.get)(a,e,[]).forEach((function(a){var c=a.name,s=void 0===c?"":c,f=a.index,p=void 0===f?0:f,d=a.count,y=void 0===d?1:d,m=a.shader,b=void 0===m?"":m,h=a.areaType,v=void 0===h?-1:h,g=r.mesh.FindMeshAreaByTypeAndIndex(e,p);g?u.splice(u.indexOf(g,1)):((g=new K.Tw2MeshArea).name=s,g.index=p,g.count=y,g._areaType=v,o[e].push(g));var w=t.generic.GetShaderConfig(b,n.hull.isSkinned);w.autoParameter=!0,a.Assign(w);var x=n.faction.AssignAreaType(v),_=n.faction.GetAreaType(v,0).name;if(g.sofHullAreaName=_,Object.assign(x,n.area),t.AssignMaterialParameters(x,w.parameters),w.textures.PmdgMap?w.textures.PmdgMap=n.faction.GetResPathInsert(n.hull.name,w.textures.PmdgMap,n.resPathInsert):w.textures.MaterialMap&&(w.textures.MaterialMap=n.faction.GetResPathInsert(n.hull.name,w.textures.MaterialMap,n.resPathInsert)),t.generic.HasShaderUsage(b,"GeneralHeatGlowColor")&&n.race.booster&&n.race.booster.glowColor&&(w.parameters.GeneralHeatGlowColor=H.vec4.multiply([1,1,1,1],n.race.booster.glowColor,i.multiplier.generalHeatGlowColor)),t.generic.HasShaderUsage(b,"GeneralGlowColor")){var z=[1,1,1,1];if(b.toLowerCase().includes("wreck")){var S=i.wreckArea,j=S.fallbackGeneralGlowColor,E=void 0===j?[4,1.0140079259872437,0,1]:j,T=S.minMapScaleUV,O=void 0===T?8:T,R=S.minGlowIntensity,P=S.maxGlowFlicker,D=S.minSharpness,A=S.minSharpnessDecalAreas,M=S.maxGlowFlickerDecalAreas;n.faction.HasColorType(11)?n.faction.GetColorType(11,z):H.vec4.copy(z,E);var C=w.parameters.WreckFactors,k=void 0===C?[0,0,0,0]:C;k[0]=Math.min(O,k[0]),void 0!==D&&(k[1]=Math.max(D,k[1])),void 0!==R&&(k[2]=Math.max(R,k[2])),void 0!==P&&(k[3]=Math.min(P,k[3])),"decalAreas"===e&&(void 0!==A&&(k[1]=Math.max(A,k[1])),void 0!==M&&(k[3]=Math.min(M,k[3]))),w.parameters.WreckFactors=k}else n.faction.GetColorType(x.colorType,z,0);H.vec4.multiply(z,z,i.multiplier.generalGlowColor),w.parameters.GeneralGlowColor=z}if(g.effect||(g.effect=new K.Tw2Effect,g.effect.name=g.name+"_effect"),w.parameters.MAX_DISTORTION_OFFSET||"distortionAreas"===e){var I=w.parameters.MAX_DISTORTION_OFFSET||[128,0,0,0];I[0]*=i.multiplier.maxDistortionOffset,w.parameters.MAX_DISTORTION_OFFSET=I}g.effect.SetValues(w,{controller:l});for(var L=0;L<r.customMasks.length;L++)Y.EveCustomMask.ApplyMaterials(g.effect,r.customMasks[L],L)})),u.forEach((function(t){t.Destroy(),r.mesh[e].splice(r.mesh[e].indexOf(t),1)}))})("additiveAreas"),c("decalAreas"),c("depthAreas"),c("distortionAreas"),c("opaqueAreas"),c("transparentAreas"),r.mesh=o;case 14:case"end":return e.stop()}}),e)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"FindAttachmentByConstructorAndName",value:function(e,t,r){var n=e.filter((function(e){return e.constructor===t&&e.name===r}));if(n.length>1)throw new ReferenceError("Found ".concat(n.length," attachments, expected 1"));return n[0]?n[0]:null}},{key:"SetupSpriteSets",value:function(e,t,r,n){var i=this,o=r.hull,a=o.isSkinned,u=void 0!==a&&a,c=o.spriteSets,s=void 0===c?[]:c,f=t.attachments||t.spriteSets,p=l.FindObjectsByConstructor(f,Y.EveSpriteSet);s.forEach((function(e){var t=i.FindAttachmentByConstructorAndName(f,Y.EveSpriteSet,e.name);e.visibilityGroup&&!r.faction.HasVisibilityGroup(e.visibilityGroup)||(t?(t.ClearItems(),p.splice(p.indexOf(t),1)):(t=new Y.EveSpriteSet,f.push(t)),t.name=e.name,t.display=!0,t.useQuads=!0,t.skinned=e.skinned&&u,t.effect=n.effect.sprite,e.items.forEach((function(e){var n=H.vec4.fromValues(1,1,1,1);r.faction.GetColorType(e.colorType,n,0),t.items.push(Y.EveSpriteSetItem.from(Object.assign({},e,{color:n})))})),t.Initialize())})),p.forEach((function(e){e.Destroy(),f.splice(f.indexOf(e),1)}))}},{key:"FindObjectsByConstructor",value:function(e,t){return e.filter((function(e){return e.constructor===t}))}},{key:"SetupSpotlightSets",value:function(e,t,r,n){var i=this,o=r.hull,a=o.isSkinned,u=void 0!==a&&a,c=o.spotlightSets,s=void 0===c?[]:c,f=t.attachments||t.spotlightSets,p=l.FindObjectsByConstructor(f,Y.EveSpotlightSet);s.forEach((function(t){var o,a,c=i.FindAttachmentByConstructorAndName(f,Y.EveSpotlightSet,t.name);c?(c.ClearItems(),p.splice(p.indexOf(c),1)):(c=Y.EveSpotlightSet.from({name:t.name}),f.push(c)),c.skinned=u&&t.skinned,n.useSpotlightPool?(c.useQuads=!0,o=n.effectPath.spotlightConePool,a=n.effectPath.spotlightGlowPool):(o=e.GetShaderPath(n.effectPath.spotlightCone,c.skinned),a=e.GetShaderPath(n.effectPath.spotlightGlow,c.skinned)),c.SetValues({display:!0}),c.coneEffect=c.coneEffect||new K.Tw2Effect,c.coneEffect.SetValues({effectFilePath:o,parameters:{zOffset:t.zOffset},textures:{TextureMap:t.coneTextureResPath}}),c.glowEffect=c.glowEffect||new K.Tw2Effect,c.glowEffect.SetValues({effectFilePath:a,textures:{TextureMap:t.glowTextureResPath}}),t.items.forEach((function(e){return c.CreateItem(e)})),c.items.forEach((function(e){var t=r.faction.FindSpotlightSetByGroupIndex(e.groupIndex);t&&e.SetValues({coneColor:t.coneColor,flareColor:t.flareColor,spriteColor:t.spriteColor})}))})),p.forEach((function(e){e.Destroy(),f.splice(f.indexOf(e),1)}))}},{key:"HandleBillboards",value:function(e,t){var r=[];(e.attachments||e.planeSets).forEach((function(e){if(e.constructor===Y.EvePlaneSet){var t=e.name.split(" ").join("").toUpperCase();(t.includes("BILLBOARD")||t.includes("VIDEOS"))&&r.push(e)}})),r.length?(e.RandomizeBillboards=function(){r.forEach((function(e){var r=t.billboards,n=void 0===r?[]:r,i=n[H.num.randomInt(0,n.length-1)];-1===i.indexOf(":")&&(i="cdn:/"+i),e.effect.parameters.MaskMap.SetValue(i)}))},e.RandomizeBillboards()):e.RandomizeBillboards=function(){}}},{key:"SetupPlaneSets",value:function(e,t,r,n){var i=this,o=r.hull,a=o.isSkinned,u=o.planeSets,c=t.attachments||t.planeSets,s=l.FindObjectsByConstructor(c,Y.EvePlaneSet);u.forEach((function(t){var o=i.FindAttachmentByConstructorAndName(c,Y.EvePlaneSet,t.name);o?(o.ClearItems(),s.splice(s.indexOf(o),1)):(o=Y.EvePlaneSet.from({name:t.name}),c.push(o)),o.SetValues({display:!0}),o.effect=o.effect||new K.Tw2Effect,o.effect.SetValues({effectFilePath:e.GetShaderPath(n.effectPath.plane,a&&t.skinned),autoParameter:!0,parameters:{PlaneData:[0,t.atlasSize||1,0,0]},textures:{Layer1Map:t.layer1MapResPath,Layer2Map:t.layer2MapResPath,MaskMap:t.maskMapResPath}}),t.items.forEach((function(e){return o.CreateItem(e)})),o.items.forEach((function(e){var t=r.faction.FindPlaneSetByGroupIndex(e.groupIndex);t&&e.SetValues({color:t.color}),l.isZeroColor(e.color)&&e.SetValues({display:!1})}))})),this.HandleBillboards(t,n),s.forEach((function(e){e.Destroy(),c.splice(c.indexOf(e),1)}))}},{key:"isZeroColor",value:function(e){return 0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]}},{key:"SetupDecals",value:function(e,t,r,n){var i=this,o=r.hull,a=r.faction;function u(e){var r=t.mesh.FindParameters(e);return r[0]?r[0].resourcePath:""}var c={textures:{PmdgMap:u("PmdgMap"),NoMap:u("NoMap"),NormalMap:u("NormalMap"),GlowMap:u("GlowMap"),AoMap:u("AoMap"),AlbedoMap:u("AlbedoMap"),RoughnessMap:u("RoughnessMap"),DirtMap:u("DirtMap"),MaterialMap:u("MaterialMap"),PatternMaskMap:u("PatternMaskMap")}},l=Array.from(t.decals);o.decalSets.forEach((function(r){var o=!r.visibilityGroup||a.HasVisibilityGroup(r.visibilityGroup);r.items.forEach((function(u){var s="".concat(r.name,"_").concat(u.name),f=i.FindAttachmentByConstructorAndName(t.decals,Y.EveSpaceObjectDecal,s),p=u.visibilityGroup,d=u.logoType,y=u.usage,m=u.glowColorType,b=!p||a.HasVisibilityGroup(p);if(a.HasLogoType(d)||(q.tw2.Debug({name:"Space object factory",message:"Could not find logo type for decal: ".concat(s," (").concat(d,")")}),b=!1),o&&b){f?l.splice(l.indexOf(f),1):(f=Y.EveSpaceObjectDecal.from({name:s}),t.decals.push(f));var h=e.generic.GetShaderConfig(n.decalUsage[y],!1,c);switch(y){case 1:h.overrides.DecalAtMap={addressUMode:W.WrapMode.REPEAT,addressVMode:W.WrapMode.REPEAT,filterMode:W.FilterMode.LINEAR,mipFilterMode:W.MipFilterMode.NONE};break;case 5:h.overrides.DecalAtMap={addressUMode:W.WrapMode.CLAMP_TO_EDGE,addressVMode:W.WrapMode.CLAMP_TO_EDGE,filterMode:W.FilterMode.LINEAR,mipFilterMode:W.MipFilterMode.NONE}}a.AssignLogoType(d,h);var v=h.parameters.DecalGlowColor;v&&a.GetColorType(m,v,0),u.Assign(h),f.decalEffect=f.decalEffect||new K.Tw2Effect,f.decalEffect.SetValues(h),f._logoType=d;var g=Object.assign({display:!0},{rotation:u.rotation,position:u.position,scaling:u.scaling,parentBoneIndex:u.boneIndex,name:u.name,indexBuffers:u.GetIndexBuffers()});f.SetValues(g)}}))})),l.forEach((function(e){e.Destroy(),t.decals.splice(t.decals.indexOf(e),1)}))}},{key:"SetupBoosters",value:function(e,t,r,n){var i=r.hull,o=r.race;if(i.booster&&o.booster){var a=o.booster,u=a.shape0,c=a.shape1,l=a.warpShape0,s=a.warpShape1,f=n.multiplier,p=f.boosterGlowScale,d=void 0===p?1:p,y=f.boosterHaloScale,m=void 0===y?1:y,b=f.boosterSymHalo,h=void 0===b?1:b,v=f.boosterBrightness,g=void 0===v?1:v,w=f.boosterAlpha,x=void 0===w?1:w,_=H.vec4.multiplyScalar([],u.color,g),z=H.vec4.multiplyScalar([],c.color,g);_[3]=x,z[3]=x,t.boosters?t.boosters.effect.SetValues({effectFilePath:n.effectPath.boosterVolumetric,autoParameter:!0,parameters:{NoiseFunction0:u.noiseFunction,NoiseSpeed0:u.noiseSpeed,NoiseAmplitudeStart0:u.noiseAmplitureStart,NoiseAmplitudeEnd0:u.noiseAmplitureEnd,NoiseFrequency0:u.noiseFrequency,Color0:_,NoiseFunction1:c.noiseFunction,NoiseSpeed1:c.noiseSpeed,NoiseAmplitudeStart1:c.noiseAmplitureStart,NoiseAmplitudeEnd1:c.noiseAmplitureEnd,NoiseFrequency1:c.noiseFrequency,Color1:z,WarpNoiseFunction0:l.noiseFunction,WarpNoiseSpeed0:l.noiseSpeed,WarpNoiseAmplitudeStart0:l.noiseAmplitureStart,WarpNoiseAmplitudeEnd0:l.noiseAmplitureEnd,WarpNoiseFrequency0:l.noiseFrequency,WarpColor0:l.color,WarpNoiseFunction1:s.noiseFunction,WarpNoiseSpeed1:s.noiseSpeed,WarpNoiseAmplitudeStart1:s.noiseAmplitureStart,WarpNoiseAmplitudeEnd1:s.noiseAmplitureEnd,WarpNoiseFrequency1:s.noiseFrequency,WarpColor1:s.color,ShapeAtlasSize:[a.shapeAtlasHeight,a.shapeAtlasCount,0,0],BoosterScale:a.scale},textures:{ShapeMap:a.shapeAtlasResPath,GradientMap0:a.gradient0ResPath,GradientMap1:a.gradient1ResPath,NoiseMap:n.texturePath.noise32}}):t.boosters=Y.EveBoosterSet.from({name:a.name,glowColor:a.glowColor,glowScale:a.glowScale*d,haloColor:a.haloColor,haloScaleX:a.haloScaleX*m,haloScaleY:a.haloScaleY*m,symHaloScale:a.symHaloScale*h,trailColor:a.trailColor,trailSize:a.trailSize,warpGlowColor:a.warpGlowColor,warpHaloColor:a.warpHalpColor,effect:{effectFilePath:n.effectPath.boosterVolumetric,autoParameter:!0,parameters:{NoiseFunction0:u.noiseFunction,NoiseSpeed0:u.noiseSpeed,NoiseAmplitudeStart0:u.noiseAmplitureStart,NoiseAmplitudeEnd0:u.noiseAmplitureEnd,NoiseFrequency0:u.noiseFrequency,Color0:_,NoiseFunction1:c.noiseFunction,NoiseSpeed1:c.noiseSpeed,NoiseAmplitudeStart1:c.noiseAmplitureStart,NoiseAmplitudeEnd1:c.noiseAmplitureEnd,NoiseFrequency1:c.noiseFrequency,Color1:z,WarpNoiseFunction0:l.noiseFunction,WarpNoiseSpeed0:l.noiseSpeed,WarpNoiseAmplitudeStart0:l.noiseAmplitureStart,WarpNoiseAmplitudeEnd0:l.noiseAmplitureEnd,WarpNoiseFrequency0:l.noiseFrequency,WarpColor0:l.color,WarpNoiseFunction1:s.noiseFunction,WarpNoiseSpeed1:s.noiseSpeed,WarpNoiseAmplitudeStart1:s.noiseAmplitureStart,WarpNoiseAmplitudeEnd1:s.noiseAmplitureEnd,WarpNoiseFrequency1:s.noiseFrequency,WarpColor1:s.color,ShapeAtlasSize:[a.shapeAtlasHeight,a.shapeAtlasCount,0,0],BoosterScale:a.scale},textures:{ShapeMap:a.shapeAtlasResPath,GradientMap0:a.gradient0ResPath,GradientMap1:a.gradient1ResPath,NoiseMap:n.texturePath.noise32}},glows:{useQuads:!0,effect:{effectFilePath:n.texturePath.boosterGlow,textures:{DiffuseMap:n.texturePath.whiteSharp,NoiseMap:n.texturePath.noise}}}})}}},{key:"SetupLocators",value:function(e,t,r,n){var i=r.hull,o=i.locatorTurrets,a=void 0===o?[]:o,u=i.booster,c=Array.from(t.locators);a.forEach((function(e){var r=l.FindAttachmentByConstructorAndName(t.locators,Y.EveLocator2,e.name);r?c.splice(c.indexOf(r),1):(r=new Y.EveLocator2,t.locators.push(r)),r.SetValues(e)}));for(var s=u&&u.items?u.items:[],f=0;f<s.length;++f){var p="locator_booster_"+(f+1),d=t.FindLocatorByName(p);d?c.splice(c.indexOf(d),1):(d=Y.EveLocator2.from({name:p}),t.locators.push(d)),d.SetValues({transform:H.mat4.scale([],s[f].transform,n.multiplier.boosterScale),atlasIndex0:s[f].atlasIndex0,atlasIndex1:s[f].atlasIndex1,hasTrail:s[f].hasTrail,lightScale:s[f].lightScale,functionality:s[f].functionality})}c.forEach((function(e){e.Destroy(),t.locators.splice(t.locators.indexOf(e),1)}))}},{key:"SetupInstancedMesh",value:function(e,t,r,n){if((!t.mesh||t.mesh.constructor!==K.Tw2InstancedMesh)&&r.hull.instancedMeshes&&r.hull.instancedMeshes.length){var i=q.tw2.gl,o=r.hull.instancedMeshes,a=void 0===o?[]:o,u=H.mat4.create(),c=H.quat.create(),l=H.vec3.create(),s=H.vec3.create(),f=(H.vec3.create(),new Y.EveChildContainer);f.name="Instanced meshes",t.effectChildren.push(f);for(var p=0;p<a.length;p++){var d=a[p],y=new K.Tw2InstancedMesh,m=new K.Tw2GeometryMesh;m.declaration=K.Tw2VertexDeclaration.from([{usage:"TEXCOORD",usageIndex:8,elements:4,attr:"attr3"},{usage:"TEXCOORD",usageIndex:9,elements:4,attr:"attr4"},{usage:"TEXCOORD",usageIndex:10,elements:4,attr:"attr5"}]),m.declaration.stride=48,m.declaration.name=d.name;for(var b=[],h=0;h<d.instances.length;h++){var v=d.instances[h].data;c[0]=v[0],c[1]=v[1],c[2]=v[2],c[3]=v[3],s[0]=v[4],s[1]=v[5],s[2]=v[6],l[0]=v[7],l[1]=v[8],l[2]=v[9],H.mat4.fromRotationTranslationScale(u,c,l,s),H.mat4.transpose(u,u),b.push(u[0]),b.push(u[1]),b.push(u[2]),b.push(u[3]),b.push(u[4]),b.push(u[5]),b.push(u[6]),b.push(u[7]),b.push(u[8]),b.push(u[9]),b.push(u[10]),b.push(u[11])}m.bufferData=new Float32Array(b),m.bufferLength=m.bufferData.length,m.buffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,m.buffer),i.bufferData(i.ARRAY_BUFFER,m.bufferData,i.STATIC_DRAW),q.tw2.systemMirror||(m.bufferData=null);var g=new K.Tw2GeometryRes;g.meshes[0]=m,g.OnPrepared(),y.geometryResPath=d.geometryResPath,y.instanceGeometryResource=g,y.Initialize();var w=new Y.EveChildMesh;w.useSpaceObjectData=!0,w.useSRT=!0,w.mesh=y;var x=new K.Tw2MeshArea;x.name="instance",x.index=0,x.count=1,w.mesh.opaqueAreas.push(x);var _=e.generic.GetShaderConfig(d.shader,r.hull.isSkinned),z=x.effect=new K.Tw2Effect;z.name=x.name+"_effect",z.effectFilePath=_.effectFilePath,z.autoParameter=!0,_.textures=d.AssignTextures(_.textures);var S=r.faction.AssignAreaType(0,{});Object.assign(S,r.area),e.AssignMaterialParameters(S,_.parameters);var j=_.parameters.GeneralGlowColor||H.vec4.fromValues(1,1,1,1);j&&(r.faction.GetColorType(S.colorType,j),H.vec4.multiply(j,j,n.multiplier.generalGlowColor),_.parameters.GeneralGlowColor=j),z.SetParameters(_.parameters),z.SetTextures(_.textures),z.SetOverrides(_.overrides),z.Initialize(),f.objects.push(w)}}}},{key:"SetupShadows",value:(r=ie(regeneratorRuntime.mark((function e(t,r,n,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.shadowEffect||(r.shadowEffect=n.hull.isSkinned?i.effect.shadowSkinned:i.effect.shadow);case 1:case"end":return e.stop()}}),e)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"SetupLocatorSets",value:function(e,t,r,n){r.hull.locatorSets.forEach((function(e){var r=new $.EveLocatorSets;r.name=e.name,e.locators.forEach((function(e){var t=new $.EveLocatorSetItem;t.boneIndex=e.boneIndex,H.vec3.copy(t.scaling,e.scaling),H.vec3.copy(t.position,e.position),H.quat.copy(t.rotation,e.rotation),r.locators.push(t)})),t.locatorSets.push(r)}))}},{key:"SetupModelCurves",value:function(e,t,r,n){q.tw2.Debug({name:"Space object factory",message:"Model curves not implemented"})}},{key:"SetupLights",value:function(e,t,r,n){q.tw2.Debug({name:"Space object factory",message:"Lights not implemented"})}},{key:"SetupObservers",value:function(e,t,r,n){q.tw2.Debug({name:"Space object factory",message:"Observers not implemented"})}},{key:"SetupHazeSets",value:function(e,t,r,n){q.tw2.Debug({name:"Space object factory",message:"Haze sets not implemented"})}},{key:"SetupSpriteLineSets",value:function(e,t,r,n){q.tw2.Debug({name:"Space object factory",message:"Sprite line sets not implemented"})}},{key:"SetupAudio",value:function(e,t,r,n){q.tw2.Debug({name:"Space object factory",message:"Audio not implemented"})}},{key:"SetupAnimations",value:function(e,t,r,n){q.tw2.Debug({name:"Space object factory",message:"Animations not implemented"})}},{key:"SetupChildren",value:(t=ie(regeneratorRuntime.mark((function e(t,r,n,i){var o,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q.tw2.Debug({name:"Space object factory",message:"Child objects partially implemented"}),o=n.hull.children.filter((function(e){return n.faction.children.find((function(t){return t.isVisible&&t.groupIndex===e.groupIndex}))})),a=0;case 3:if(!(a<o.length)){e.next=16;break}return e.next=6,q.tw2.Fetch(o[a].redFilePath);case 6:(u=e.sent).Traverse((function(e){e.struct.curveSets&&e.struct.curveSets.forEach((function(e){return e.Stop()}))})),H.quat.copy(u.rotation,o[a].rotation),H.vec3.copy(u.translation,o[a].translation),H.vec3.copy(u.scaling,o[a].scaling),u.UpdateValues(),r.effectChildren.push(u);case 13:a++,e.next=3;break;case 16:case"end":return e.stop()}}),e)}))),function(e,r,n,i){return t.apply(this,arguments)})},{key:"BindParticleEmitters",value:function(e,t,r,n){q.tw2.Debug({name:"Space object factory",message:"Binding child particle emitters not implemented"})}},{key:"SetupControllers",value:function(e,t,r,n){q.tw2.Debug({name:"Space object factory",message:"Animation controllers not implemented"})}}]),l}(X.meta.Model),v.knownGeometryResPath={},v.modelPath="cdn:/dx9/model/",p=me((f=g).prototype,"faction",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=me(f.prototype,"generic",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=me(f.prototype,"hull",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=me(f.prototype,"material",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=me(f.prototype,"pattern",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=me(f.prototype,"race",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=f))||s),he=(w=X.meta.type("Tw2ParameterSet"),x=X.meta.string,_=X.meta.struct(),z=X.meta.list(),w((R=function(e){le(r,e);var t=fe(r);function r(e){var n;return ae(this,r),oe(n=t.call(this),"name",E,de(n)),oe(n,"parameter",T,de(n)),oe(n,"items",O,de(n)),n.name=e,n}return ce(r,[{key:"isUnused",get:function(){return!!this.items.length}}]),ce(r,[{key:"Empty",value:function(e){var t=this.items.splice(0);t.length&&(e&&e.skipEvent||this.EmitEvent("removed",this,t),e&&e.skipUpdate||this.UpdateValues(e))}},{key:"SetValue",value:function(e,t){this.parameter.SetValue(e,t);for(var r=0;r<this.items.length;r++)this.items[r].SetValue(e,t)}},{key:"GetValue",value:function(e){return this.parameter.GetValue(e)}},{key:"SetIndexValue",value:function(e,t,r){if(this.parameter.SetIndexValue){this.parameter.SetIndexValue(e,t,r);for(var n=0;n<this.items.length;n++)this.items[n].SetIndexValue(e,t,r);return!0}throw new Error("SetIndexValue not supported")}},{key:"GetIndexValue",value:function(e){if(this.parameter.GetIndexValue)return this.parameter.GetIndexValue(e);throw new Error("SetIndexValue not supported")}},{key:"Add",value:function(e,t){var r=this,n=!0;if(this.parameter){if(e.constructor!==this.parameter.constructor)throw new Error("Invalid parameter constructor '".concat(e.constructor.name,"', expected '").concat(this.parameter.constructor.name,"'"))}else this.parameter=new e.constructor(e.GetValue()),n=!1,this.parameter.OnEvent("modified",(function(){r.EmitEvent("modified",r)}));return!this.items.includes(e)&&(n&&e.SetValue(this.parameter.GetValue()),this.items.push(e),t&&t.skipEvent||this.EmitEvent("added",this,e),t&&t.skipUpdate||this.UpdateValues(t),!0)}}]),r}(X.meta.Model),E=me((j=R).prototype,"name",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=me(j.prototype,"parameter",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=me(j.prototype,"items",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=j))||S),ve=(P=X.meta.type("Tw2ParameterGroup"),D=X.meta.string,A=X.meta.list(),P((L=function(e){le(r,e);var t=fe(r);function r(e){var n;if(ae(this,r),oe(n=t.call(this),"name",k,de(n)),oe(n,"items",I,de(n)),n._onParameterSetModified=function(e){n.EmitEvent("modified",de(n),e)},!e)throw new Error("name must be defined");return n.name=e,n}return ce(r,[{key:"isUnused",get:function(){for(var e=0;e<this.items.length;e++)if(!this.items.isUnused)return!1;return!0}}]),ce(r,[{key:"Empty",value:function(e){for(var t=0;t<this.items.length;t++)this.items[t].Empty(e)}},{key:"Add",value:function(e,t){var r=this.items.find((function(t){return t.name===e.name}));return r||((r=new he(e.name)).OnEvent("modified",this._onParameterSetModified),this.items.push(r),t&&t.skipEvent||this.EmitEvent("added",this,r),t&&t.skipUpdate||this.UpdateValues(t)),r.Add(e),r}},{key:"RemoveUnused",value:function(e){for(var t=[],r=0;r<this.items.length;r++)if(this.items[r].isUnused){var n=te(this.items.splice(r,1),1)[0];t.push(n),n.Destroy(e),r--}return t.length&&(e&&e.skipEvent||this.EmitEvent("removed",this,t),e&&e.skipUpdate||this.UpdateValues(e)),this.isUnused}}]),r}(X.meta.Model),k=me((C=L).prototype,"name",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=me(C.prototype,"items",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=C))||M),ge=(G=X.meta.type("Tw2ParameterGroups"),F=X.meta.list(),G((V=function(e){le(r,e);var t=fe(r);function r(){var e;ae(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return oe(e=t.call.apply(t,[this].concat(i)),"groups",U,de(e)),e._onParameterGroupModified=function(t){e.EmitEvent("modified",de(e),t)},e}return ce(r,[{key:"Empty",value:function(e){for(var t=0;t<this.groups.length;t++)this.groups[t].Empty(e)}},{key:"GetGroup",value:function(e){var t=this.groups.find((function(t){return t.name===e}));return t||(t=new ve(e),this.groups.push(t),this.EmitEvent("added",this,t),t.OnEvent("modified",this._onParameterGroupModified)),t}},{key:"AddFromAreaEffect",value:function(e,t){var r=t.parameters,n=this.GetGroup(e);for(var i in r)r.hasOwnProperty(i)&&n.Add(r[i])}},{key:"RemoveUnused",value:function(e){for(var t=[],r=0;r<this.groups.length;r++)if(this.groups[r].RemoveUnused({skipEvent:!0,skipUpdate:!0})){var n=te(this.groups.splice(r,1),1)[0];t.push(n),n.Destroy(e),r--}return t.length&&(e&&e.skipEvent||this.EmitEvent("removed",this,t),e&&e.skipUpdate||this.UpdateValues(e)),!!this.groups.length}}]),r}(X.meta.Model),U=me((N=V).prototype,"groups",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=N)),function(e){le(r,e);var t=fe(r);function r(e){return ae(this,r),t.call(this,e,"SOF Hull not found (%name%)")}return r}(K.Tw2Error)),we=function(e){le(r,e);var t=fe(r);function r(e){return ae(this,r),t.call(this,e,"SOF Faction not found (%name%)")}return r}(K.Tw2Error),xe=function(e){le(r,e);var t=fe(r);function r(e){return ae(this,r),t.call(this,e,"SOF Race not found (%name%)")}return r}(K.Tw2Error),_e=function(e){le(r,e);var t=fe(r);function r(e){return ae(this,r),t.call(this,e,"SOF Material not found (%name%)")}return r}(K.Tw2Error),ze=function(e){le(r,e);var t=fe(r);function r(e){return ae(this,r),t.call(this,e,"SOF Pattern not found (%name%)")}return r}(K.Tw2Error),Se=function(e){le(r,e);var t=fe(r);function r(e){return ae(this,r),t.call(this,e,"DNA format invalid (%dnaString%)")}return r}(K.Tw2Error),je=function(e){le(r,e);var t=fe(r);function r(e){return ae(this,r),t.call(this,e,"Resource path insert is invalid for hull (%hull%:%resPathInsert%)")}return r}(K.Tw2Error)},"./sof/faction/EveSOFDataFaction.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFaction",(function(){return ee}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B=r("./global/utils/index.js"),N=r("./sof/shared/index.js"),U=r("./sof/faction/resPathInsert.json"),V=r("./global/tw2.js");function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=J(e);if(t){var i=J(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Q(this,r)}}function Q(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ee=(n=B.meta.type("EveSOFDataFaction"),i=B.meta.string,o=B.meta.struct("EveSOFDataArea"),a=B.meta.list("EveSOFDataFactionChild"),u=B.meta.struct("EveSOFDataFactionColorSet"),c=B.meta.struct("EveSOFDataPatternLayer"),l=B.meta.string,s=B.meta.string,f=B.meta.struct("EveSOFDataLogoSet"),p=B.meta.uint,d=B.meta.uint,y=B.meta.uint,m=B.meta.uint,b=B.meta.list("EveSOFDataFactionPlaneSet"),h=B.meta.string,v=B.meta.list("EveSOFDataFactionSpotlightSet"),g=B.meta.struct("EveSOFDataFactionVisibilityGroupSet"),n((F=G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(o,e);var t,r,n,i=Y(o);function o(){var e;W(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return H(e=i.call.apply(i,[this].concat(r)),"name",_,Z(e)),H(e,"areaTypes",z,Z(e)),H(e,"children",S,Z(e)),H(e,"colorSet",j,Z(e)),H(e,"defaultPattern",E,Z(e)),H(e,"defaultPatternLayer1MaterialName",T,Z(e)),H(e,"description",O,Z(e)),H(e,"logoSet",R,Z(e)),H(e,"materialUsageMtl1",P,Z(e)),H(e,"materialUsageMtl2",D,Z(e)),H(e,"materialUsageMtl3",A,Z(e)),H(e,"materialUsageMtl4",M,Z(e)),H(e,"planeSets",C,Z(e)),H(e,"resPathInsert",k,Z(e)),H(e,"spotlightSets",I,Z(e)),H(e,"visibilityGroupSet",L,Z(e)),e}return t=o,n=[{key:"IsValidResPathInsert",value:function(e,t){var r=U[t];return!!r&&r.includes(e)}},{key:"GetHullResPathInserts",value:function(e){this.resPathInserts||(this.resPathInserts=Object.assign({},U));var t=[];for(var r in this.resPathInserts)this.resPathInserts.hasOwnProperty(r)&&this.resPathInserts[r].includes(e)&&t.push(r);return t.sort()}}],(r=[{key:"HasColorType",value:function(e){return this.colorSet.Has(e)}},{key:"GetColorType",value:function(e,t,r){return this.HasColorType(e)?this.colorSet.Get(e,t):void 0!==r&&this.HasColorType(r)?(V.tw2.Debug({name:"Space object factory",message:"Using fallback value, could not resolve color type: "+e}),this.colorSet.Get(r,t)):(V.tw2.Debug({name:"Space object factory",message:"Could not resolve color type: "+e}),t[0]=t[1]=t[2]=t[3]=1,t)}},{key:"HasAreaType",value:function(e){return!!this.areaTypes&&this.areaTypes.Has(e)}},{key:"GetAreaType",value:function(e,t){if(!this.areaTypes)throw new N.ErrSOFAreaTypeNotFound({type:e});return this.HasAreaType(e)?this.areaTypes.Get(e):void 0!==t&&this.HasAreaType(t)?(V.tw2.Debug({name:"Space object factory",message:"Using fallback value, could not resolve area type: "+e}),this.areaTypes.Get(t)):void V.tw2.Debug({name:"Space object factory",message:"Could not resolve area type: "+e})}},{key:"AssignAreaType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;0===e||r||this.AssignAreaType(0,t,!1);var n=this.GetAreaType(e);return n&&n.Assign(t),t}},{key:"HasLogoType",value:function(e){return!!this.logoSet&&this.logoSet.Has(e)}},{key:"GetLogoType",value:function(e,t){if(!this.logoSet)throw new N.ErrSOFLogoSetTypeNotFound({type:e});return this.HasLogoType(e)?this.logoSet.Get(e):void 0!==t&&this.HasAreaType(t)?(V.tw2.Debug({name:"Space object factory",message:"Using fallback value, could not resolve area type: "+e}),this.areaTypes.Get(t)):void V.tw2.Debug({name:"Space object factory",message:"Could not resolve logo type: "+e})}},{key:"AssignLogoType",value:function(e,t,r){var n=this.GetLogoType(e,r);if(n)return n.Assign(t),t}},{key:"HasVisibilityGroup",value:function(e){return!!this.visibilityGroupSet&&this.visibilityGroupSet.Has(e)}},{key:"GetResPathInsert",value:function(e,t,r){if(!r||"NONE"===r.toUpperCase()){if(!this.resPathInsert)return t;r=this.resPathInsert}if(!o.IsValidResPathInsert(e,r))return V.tw2.Debug({name:"Space object factory",message:"ResPathInsert not found for hull ".concat(e,": ").concat(r)}),t;var n=t.lastIndexOf("/");return n>=0&&(t=t.substr(0,n+1)+r+"/"+t.substr(n+1)),(n=t.lastIndexOf("_"))>=0&&(t=t.substr(0,n)+"_"+r+t.substr(n)),t}},{key:"FindPlaneSetByGroupIndex",value:function(e){for(var t=0;t<this.planeSets.length;t++)if(this.planeSets[t].groupIndex===e)return this.planeSets[t]}},{key:"FindSpotlightSetByGroupIndex",value:function(e){for(var t=0;t<this.spotlightSets.length;t++)if(this.spotlightSets[t].groupIndex===e)return this.spotlightSets[t]}}])&&X(t.prototype,r),n&&X(t,n),o}(B.meta.Model),G.resPathInserts=null,_=$((x=F).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=$(x.prototype,"areaTypes",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=$(x.prototype,"children",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=$(x.prototype,"colorSet",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=$(x.prototype,"defaultPattern",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=$(x.prototype,"defaultPatternLayer1MaterialName",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=$(x.prototype,"description",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=$(x.prototype,"logoSet",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=$(x.prototype,"materialUsageMtl1",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=$(x.prototype,"materialUsageMtl2",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=$(x.prototype,"materialUsageMtl3",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=$(x.prototype,"materialUsageMtl4",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=$(x.prototype,"planeSets",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=$(x.prototype,"resPathInsert",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=$(x.prototype,"spotlightSets",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=$(x.prototype,"visibilityGroupSet",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=x))||w)},"./sof/faction/EveSOFDataFactionChild.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionChild",(function(){return z}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=d.meta.type("EveSOFDataFactionChild"),i=d.meta.string,o=d.meta.uint,a=d.meta.boolean,n((p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=v(r);function r(){var e;b(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return m(e=t.call.apply(t,[this].concat(i)),"name",l,w(e)),m(e,"groupIndex",s,w(e)),m(e,"isVisible",f,w(e)),e}return r}(d.meta.Model),l=_((c=p).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=_(c.prototype,"groupIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),f=_(c.prototype,"isVisible",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=c))||u)},"./sof/faction/EveSOFDataFactionColorSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionColorSet",(function(){return pe})),r.d(t,"ErrSOFFactionColorSetTypeUnknown",(function(){return de})),r.d(t,"ErrSOFFactionColorSetTypeNotFound",(function(){return ye}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J=r("./global/utils/index.js"),$=r("./global/math/index.js"),ee=r("./core/index.js");function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=se(e);if(t){var i=se(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ce(this,r)}}function ce(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?le(e):t}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var pe=(n=J.meta.type("EveSOFDataFactionColorSet"),i=J.meta.color,o=J.meta.color,a=J.meta.color,u=J.meta.color,c=J.meta.color,l=J.meta.color,s=J.meta.color,f=J.meta.color,p=J.meta.color,d=J.meta.color,y=J.meta.color,m=J.meta.color,b=J.meta.color,h=J.meta.color,v=J.meta.color,g=J.meta.color,w=J.meta.color,x=J.meta.color,_=J.meta.color,z=J.meta.color,S=J.meta.color,j=J.meta.color,n((Z=Q=function(e){oe(o,e);var t,r,n,i=ue(o);function o(){var e;ne(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return re(e=i.call.apply(i,[this].concat(r)),"Black",O,le(e)),re(e,"Blue",R,le(e)),re(e,"Booster",P,le(e)),re(e,"Cyan",D,le(e)),re(e,"Darkhull",A,le(e)),re(e,"Fire",M,le(e)),re(e,"Glass",C,le(e)),re(e,"Green",k,le(e)),re(e,"Hull",I,le(e)),re(e,"Killmark",L,le(e)),re(e,"Orange",G,le(e)),re(e,"Primary",F,le(e)),re(e,"PrimaryLight",B,le(e)),re(e,"Reactor",N,le(e)),re(e,"Red",U,le(e)),re(e,"Secondary",V,le(e)),re(e,"SecondaryLight",q,le(e)),re(e,"Tertiary",H,le(e)),re(e,"TertiaryLight",W,le(e)),re(e,"White",X,le(e)),re(e,"WhiteLight",K,le(e)),re(e,"Yellow",Y,le(e)),e}return t=o,(r=[{key:"Has",value:function(e){var t=o.Type[e];if(void 0===t)throw new de({type:e});return!!this[t]}},{key:"Get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$.vec4.create();if(!this.Has(e))throw new ye({type:e});return $.vec4.copy(t,this[o.Type[e]])}}])&&ie(t.prototype,r),n&&ie(t,n),o}(J.meta.Model),Q.Type=["Primary","Secondary","Tertiary","Black","White","Yellow","Orange","Red","Blue","Green","Cyan","Fire","Hull","Glass","Reactor","Darkhull","Booster","Killmark","PrimaryLight","SecondaryLight","TertiaryLight","WhiteLight"],O=fe((T=Z).prototype,"Black",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),R=fe(T.prototype,"Blue",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),P=fe(T.prototype,"Booster",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),D=fe(T.prototype,"Cyan",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),A=fe(T.prototype,"Darkhull",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),M=fe(T.prototype,"Fire",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),C=fe(T.prototype,"Glass",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),k=fe(T.prototype,"Green",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),I=fe(T.prototype,"Hull",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),L=fe(T.prototype,"Killmark",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),G=fe(T.prototype,"Orange",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),F=fe(T.prototype,"Primary",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),B=fe(T.prototype,"PrimaryLight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),N=fe(T.prototype,"Reactor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),U=fe(T.prototype,"Red",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),V=fe(T.prototype,"Secondary",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),q=fe(T.prototype,"SecondaryLight",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),H=fe(T.prototype,"Tertiary",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),W=fe(T.prototype,"TertiaryLight",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),X=fe(T.prototype,"White",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),K=fe(T.prototype,"WhiteLight",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),Y=fe(T.prototype,"Yellow",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),E=T))||E),de=function(e){oe(r,e);var t=ue(r);function r(e){var n;return ne(this,r),(n=t.call(this,e,"SOF faction color set type unknown (%type%)")).unknownType=!0,n}return r}(ee.Tw2Error),ye=function(e){oe(r,e);var t=ue(r);function r(e){return ne(this,r),t.call(this,e,"SOF faction color set type not found (%type%)")}return r}(ee.Tw2Error)},"./sof/faction/EveSOFDataFactionPlaneSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionPlaneSet",(function(){return S}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js"),y=r("./global/math/index.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=d.meta.type("EveSOFDataFactionPlaneSet"),i=d.meta.string,o=d.meta.color,a=d.meta.uint,n((p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(r,e);var t=g(r);function r(){var e;h(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return b(e=t.call.apply(t,[this].concat(i)),"name",l,x(e)),b(e,"color",s,x(e)),b(e,"groupIndex",f,x(e)),e}return r}(d.meta.Model),l=z((c=p).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=z(c.prototype,"color",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.vec4.create()}}),f=z(c.prototype,"groupIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),u=c))||u)},"./sof/faction/EveSOFDataFactionSpotlightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionSpotlightSet",(function(){return O}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h=r("./global/utils/index.js"),v=r("./global/math/index.js");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var O=(n=h.meta.type("EveSOFDataFactionSpotlightSet"),i=h.meta.string,o=h.meta.color,a=h.meta.color,u=h.meta.uint,c=h.meta.color,n((b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(r,e);var t=z(r);function r(){var e;x(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return w(e=t.call.apply(t,[this].concat(i)),"name",f,j(e)),w(e,"coneColor",p,j(e)),w(e,"flareColor",d,j(e)),w(e,"groupIndex",y,j(e)),w(e,"spriteColor",m,j(e)),e}return r}(h.meta.Model),f=T((s=b).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=T(s.prototype,"coneColor",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec4.create()}}),d=T(s.prototype,"flareColor",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec4.create()}}),y=T(s.prototype,"groupIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),m=T(s.prototype,"spriteColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec4.create()}}),l=s))||l)},"./sof/faction/EveSOFDataFactionVisibilityGroupSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionVisibilityGroupSet",(function(){return j}));var n,i,o,a,u,c,l=r("./global/utils/index.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g,w,x,_,z,S,j=(n=l.meta.type("EveSOFDataFactionVisibilityGroupSet"),i=l.meta.list("EveSOFDataGenericString"),n((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,e);var t,r,n,i=m(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return f(e=i.call.apply(i,[this].concat(r)),"visibilityGroups",u,h(e)),e}return t=o,(r=[{key:"Has",value:function(e){e=e.toUpperCase();for(var t=0;t<this.visibilityGroups.length;t++)if(this.visibilityGroups[t].str.toUpperCase()===e)return!0;return!1}}])&&d(t.prototype,r),n&&d(t,n),o}(l.meta.Model),g=(a=c).prototype,w="visibilityGroups",x=[i],_={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},S={},Object.keys(_).forEach((function(e){S[e]=_[e]})),S.enumerable=!!S.enumerable,S.configurable=!!S.configurable,("value"in S||S.initializer)&&(S.writable=!0),S=x.slice().reverse().reduce((function(e,t){return t(g,w,e)||e}),S),z&&void 0!==S.initializer&&(S.value=S.initializer?S.initializer.call(z):void 0,S.initializer=void 0),void 0===S.initializer&&(Object.defineProperty(g,w,S),S=null),u=S,o=a))||o)},"./sof/faction/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/faction/EveSOFDataFaction.js");r.d(t,"EveSOFDataFaction",(function(){return n.EveSOFDataFaction}));var i=r("./sof/faction/EveSOFDataFactionChild.js");r.d(t,"EveSOFDataFactionChild",(function(){return i.EveSOFDataFactionChild}));var o=r("./sof/faction/EveSOFDataFactionColorSet.js");r.d(t,"EveSOFDataFactionColorSet",(function(){return o.EveSOFDataFactionColorSet})),r.d(t,"ErrSOFFactionColorSetTypeUnknown",(function(){return o.ErrSOFFactionColorSetTypeUnknown})),r.d(t,"ErrSOFFactionColorSetTypeNotFound",(function(){return o.ErrSOFFactionColorSetTypeNotFound}));var a=r("./sof/faction/EveSOFDataFactionPlaneSet.js");r.d(t,"EveSOFDataFactionPlaneSet",(function(){return a.EveSOFDataFactionPlaneSet}));var u=r("./sof/faction/EveSOFDataFactionSpotlightSet.js");r.d(t,"EveSOFDataFactionSpotlightSet",(function(){return u.EveSOFDataFactionSpotlightSet}));var c=r("./sof/faction/EveSOFDataFactionVisibilityGroupSet.js");r.d(t,"EveSOFDataFactionVisibilityGroupSet",(function(){return c.EveSOFDataFactionVisibilityGroupSet}))},"./sof/faction/resPathInsert.json":function(e){e.exports=JSON.parse('{"bloodraider":["abc1_t1","abc2_t1","abc2_t2","abc3_t1","ab1_t1","ab1_t2","ab2_t1","ab2_t2","ab3_t1","ac1_t1","ac2_t1","ac3_t1","ac4_t1","ac6_t1","ade1_t1","ade2_t1","adn1_t1","adn1_t1","afaux1_t1","af1_t1","af2_t1","af3_t1","af4_t1","af4_t2a","af4_t2b","af5_t1","af5_t2","af6_t1","af7_t1","af8_t1","af9_t1","ai1_t1","ai2_t1","as1_t1","at1_t1"],"igc":["ab1_t1","mb1_t1"],"serenity":["ab1_t1","ab2_t1","ab2_t2","ab3_t1","ac3_t1","af7_t1","angbc1_t1","angb1_t1","cbc2_t1","cbc3_t1","cb1_t1","cb2_t1","cb2_t2","cc2_t1","cc2_t2b","cc3_t1","gbc3_t1","gb1_t1","gb1_t1","gb2_t1","gb3_t1","gc2_t1","gc4_t1","gc4_t2","mb1_t1","mb1_t2b","mf4_t1","morb1_t1","sb1_t1","soec1_t1"],"wreck":["ab1_t1","ab2_t1","aca1_t1","aca2_t1","adn1_t1","afaux1_t1","afr1_t1","angt1_t1","angt1_t1","cb1_t1","cb2_t1","cca1_t1","cca2_t1","cca2_t1","cfaux1_t1","cfr1_t1","ct1_t1","ct1_t1","conb1_t1","gb1_t1","gb2_t1","gca1_t1","gca2_t1","gdn1_t1","gdn1_t1","gfaux1_t1","gfr1_t1","gt1_t1","gt1_t1","jb1_t1","cap1_t1","mb1_t1","mb2_t1","mca1_t1","mca2_t1","mfaux1_t1","mfr1_t1","orecs1_t1","orecs2_t1","soeb1_t1","tgb01_t1","tgdn01_t1"],"tournament-xiv":["ac6_t1","af8_t1"],"fallen":["angbc1_t1","angb1_t1","angf1_t1","angf2_t1","gb2_t1","gc4_t1"],"guardian":["angbc1_t1","angb1_t1","angc1_t1","angf1_t1","angf2_t1","angf3_t1","angf4_t1","angf5_t1","angf6_t1","angf7_t1"],"serpentis":["angf2_t1","gb2_t1"],"guristas":["cbc1_t1","cbc2_t1","cbc2_t2","cbc3_t1","cb1_t1","cb1_t2","cb2_t1","cb2_t2","cb3_t1","cca1_t1","cca2_t1","cca2_t1","cc1_t1","cc2_t1","cc3_t1","cc4_t1","cc4_t2a","cc4_t2b","cde1_t1","cde1_t2","cde2_t1","cdn1_t1","cdn1_t1","cfi1_t1","cfaux1_t1","cf1_t1","cf2_t1","cf3_t1","cf3_t2","cf4_t1","cf4_t2","cf5_t1","cf6_t1","cf7_t1","cf7_t2a","cf7_t2b","ci1_t1","ci1_t2","ci2_t1","ci2_t2","ci3_t1","ci3_t2","cs1_t1","ct1_t1","ct1_t1"],"ishukone":["cbc1_t1","cbc2_t1","cbc2_t2","cb1_t1","cb2_t1","cb3_t1","cca1_t1","cc2_t2b","cc4_t1","cc4_t2a","cc4_t2b","cde1_t1","cde1_t2","cf1_t1","cf1_t2","cf3_t1","cf3_t2","cf4_t1","cf4_t2","cf7_t1","cf7_t2a","cf7_t2b","ci1_t1","ci1_t2","ci2_t1","ci2_t2","ci3_t1","ci3_t2"],"kaalakiota":["cbc1_t1","cbc2_t1","cbc2_t2","cb1_t1","cb1_t2","cb2_t1","cb2_t2","cb3_t1","cca1_t1","cc2_t2a","cc4_t1","cc4_t2a","cc4_t2b","cde1_t2","cde2_t1","cf2_t2a","cf3_t1","cf3_t2","cf4_t1","cf4_t2","cf5_t1","cf6_t1","cf7_t1","cf7_t2a","cf7_t2b","ci1_t1","ci1_t2","ci2_t1","ci2_t2","ci3_t1","ci3_t2"],"navy":["cbc1_t1","cbc2_t1","cbc2_t2","cbc3_t1","cb1_t1","cb2_t1","cb2_t2","cb3_t1","cca1_t1","cc1_fn","cc2_t1","cc3_t1","cc4_t1","cc4_t2a","cc4_t2b","cde1_t1","cde1_t2","cfaux1_t1","cf1_t1","cf2_t1","cf3_t1","cf3_t2","cf4_t1","cf5_t1","cf6_t1","cf7_t1","cf7_t2a","cf7_t2b","cf8_t1","ci1_t2","ci2_t1","ci2_t2","ci3_t1","ci3_t2","gbc1_t1","gbc3_t1","gb1_t1","gb1_t1","gb2_t1","gb2_t2","gb3_t1","gc1_t1","gc2_t1","gc3_t1","gc4_t1","gde1_t1","gde2_t1","gfb1_t1","gfi1_t1","gfaux1_t1","gfr1_t1","gf3_t1","gf4_t1","gf6_t1","gf7_t1","gf7_t2","gf8_t1","mbc1_t1","mbc2_t1","mbc2_t2","mbc3_t1","mb1_t1","mb1_t2b","mb2_t1","mb2_t2a","mc1_t1","mc1_t2a","mc1_t2b","mc2_t1","mc2_t2a","mc2_t2c","mc3_t1","mc4_t1","mde1_t1","mde2_t1","mfaux1_t1","mf1_t1","mf2_t1","mf3_t1","mf4_t1","mf5_t1","mf6_t1","mf7_t1","mf8_t1","mi1_t1","mi2_t1","mi3_t1","ms1_t1"],"sukuuvestaa":["cbc2_t1","cbc2_t2","cb2_t1","cb2_t2","cb3_t1","cf3_t1"],"noh":["cb1_t1","cb1_t2","cb2_t1","cb2_t2","cb3_t1","cca1_t1","cc3_t1","cde2_t1","cfaux1_t1","cf1_t1","cf7_t1","cf7_t2a","cf7_t2b","ci1_t1","ci1_t2","ci2_t1","ci2_t2","ci3_t1","ci3_t2"],"cbd":["cb2_t1","cb2_t2"],"hyasyoda":["cb2_t1","cb2_t2","cf3_t1","cf3_t2"],"tournament-xii":["cb2_t1","cc2_t1","cf2_t2a"],"tournament-x":["cc1_t1","cf7_t1","cf7_t2a","cf7_t2b"],"police":["gbc1_t1","gbc2_t1","gb1_t1","gb1_t1","gb2_t1","gb2_t2","gc2_t1","gc3_t1","gdn1_t1","gfaux1_t1","gf4_t1","gf4_t2a","gf4_t2b","gf6_t1","gf7_t1","gf7_t2","gf8_t1"],"aliastra":["gb1_t1","gb1_t1","gb2_t1","gb2_t2","gb3_t1","gc2_t1","gc3_t1","gc4_t1","gde1_t1","gf4_t1","gf4_t2a","gf4_t2b","gf7_t1","gf7_t2"],"quafeultra":["gb2_t1","gi4_t1"],"creodron":["gc3_t1","gc4_t1"],"tournament-viii":["gc4_t1","gf4_t1"],"interbus":["gs1_t1"],"odyssey":["cap1_t1"],"palatine":["cap1_t1"],"upwell":["cap1_t1"],"brutor":["mbc1_t1","mbc2_t1","mbc2_t2","mbc3_t1","mb1_t1","mb1_t2b","mb2_t1","mb2_t2a","mb3_t1","mc1_t1","mc1_t2a","mc1_t2b","mc2_t1","mc2_t2a","mc2_t2c","mc3_t1","mc4_t1","mde1_t1","mde2_t1","mfaux1_t1","mf1_t1","mf1_t2a","mf1_t2c","mf2_t1","mf2_t2b","mf3_t1","mf4_t1","mf5_t1","mf5_t2a","mf6_t1","mf7_t1","mf8_t1","mi1_t1","mi2_t1","mi3_t1","ms1_t1"],"nefantar":["mbc1_t1","mbc2_t1","mbc2_t2","mbc3_t1","mb1_t1","mb1_t2b","mb2_t1","mb2_t2a","mb3_t1","mca1_t1","mca1_t1","mca2_t1","mc1_t1","mc1_t2a","mc1_t2b","mc2_t1","mc2_t2a","mc2_t2c","mc3_t1","mc4_t1","mde1_t1","mde2_t1","mdn1_t1","mdn1_t1","mfaux1_t1","mfr1_t1","mf1_t1","mf1_t2a","mf1_t2c","mf2_t1","mf2_t2b","mf3_t1","mf4_t1","mf5_t1","mf5_t2a","mf6_t1","mf7_t1","mf8_t1","mi1_t1","mi2_t1","mi3_t1","ms1_t1","mt1_t1","mt1_t1"],"thukker":["mbc1_t1","mbc2_t1","mbc2_t2","mbc3_t1","mb1_t1","mb1_t2b","mb2_t1","mb2_t2a","mb3_t1","mc1_t1","mc1_t2a","mc1_t2b","mc2_t1","mc2_t2a","mc2_t2c","mc3_t1","mc4_t1","mde1_t1","mde2_t1","mfaux1_t1","mfr1_t1","mf1_t1","mf1_t2a","mf1_t2c","mf2_t1","mf2_t2b","mf3_t1","mf4_t1","mf5_t1","mf5_t2a","mf6_t1","mf7_t1","mf8_t1","mi1_t1","mi2_t1","mi3_t1","ms1_t1"],"tournament-vii":["mc2_t1","mf4_t1","mf4_wing"],"tournament-xiii":["sc1_t1","sc1_xiii","sf2_t1","sf2_xiii"],"base":["tgf01_t2"]}')},"./sof/generic/EveSOFDataGeneric.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGeneric",(function(){return ne})),r.d(t,"ErrSOFAreaShaderNotFound",(function(){return ie})),r.d(t,"ErrSOFDecalShaderNotFound",(function(){return oe})),r.d(t,"ErrSOFMaterialPrefixNotFound",(function(){return ae})),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",(function(){return ue}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V=r("./core/index.js"),q=r("./global/utils/index.js"),H=r("./global/tw2.js");function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=te(e);if(t){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $(this,r)}}function $(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ne=(n=q.meta.type("EveSOFDataGeneric"),i=q.meta.path,o=q.meta.list("EveSOFDataGenericShader"),a=q.meta.raw("EveSOFDataGenericShader"),u=q.meta.struct("EveSOFDataGenericDamage"),c=q.meta.path,l=q.meta.list("EveSOFDataGenericDecalShader"),s=q.meta.struct("EveSOFDataAreaMaterial"),f=q.meta.struct("EveSOFDataGenericHullDamage"),p=q.meta.list(),d=q.meta.list("EveSOFDataGenericString"),y=q.meta.list("EveSOFDataGenericString"),m=q.meta.path,b=q.meta.path,h=q.meta.path,v=q.meta.string,g=q.meta.struct("EveSOFDataGenericSwarm"),w=q.meta.list("EveSOFDataGenericVariant"),x=q.meta.list("EveSOFDataVisibilityGroup"),n((U=function(e){Q(o,e);var t,r,n,i=J(o);function o(){var e;K(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return X(e=i.call.apply(i,[this].concat(r)),"areaShaderLocation",S,ee(e)),X(e,"areaShaders",j,ee(e)),X(e,"bannerShader",E,ee(e)),X(e,"damage",T,ee(e)),X(e,"decalShaderLocation",O,ee(e)),X(e,"decalShaders",R,ee(e)),X(e,"genericWreckMaterial",P,ee(e)),X(e,"hullDamage",D,ee(e)),X(e,"hullCategories",A,ee(e)),X(e,"materialPrefixes",M,ee(e)),X(e,"patternMaterialPrefixes",C,ee(e)),X(e,"resPathDefaultAlliance",k,ee(e)),X(e,"resPathDefaultCeo",I,ee(e)),X(e,"resPathDefaultCorp",L,ee(e)),X(e,"shaderPrefixAnimated",G,ee(e)),X(e,"swarm",F,ee(e)),X(e,"variants",B,ee(e)),X(e,"visibilityGroups",N,ee(e)),e}return t=o,(r=[{key:"Initialize",value:function(){this.bannerShader&&(this.bannerShader.shader="cdn:/graphics/effect/managed/space/spaceobject/v5/fx/banner/unpacked_fxbannerv5.fx"),V.Tw2Effect.UNPACKED_TEXTURES=this.HasUnpackedTextures()}},{key:"HasUnpackedTextures",value:function(){for(var e=0;e<this.decalShaders.length;e++)for(var t=0;t<this.decalShaders[e].parentTextures.length;t++)if("NormalMap"===this.decalShaders[e].parentTextures[t].str)return!0;return!1}},{key:"HasShaderUsage",value:function(e,t){return!!t&&(this.HasDecalShader(e)?this.GetDecalShader(e):this.GetAreaShader(e)).HasUsage(t)}},{key:"GetShaderConfig",value:function(e,t,r){var n=this.HasDecalShader(e),i=n?this.GetDecalShader(e):this.GetAreaShader(e),o=i.hasPatternMaskMaps,a=void 0!==o&&o,u=n?this.GetDecalShaderPath(e,t):this.GetAreaShaderPath(e,t);return u.includes("quadheatdetail")&&(H.tw2.Debug({name:"Space object factory",message:"Patching missing shader: "+u}),u=u.replace("quadheatdetail","quaddetail")),i.Assign({effectFilePath:u,hasPatternMaskMaps:a,overrides:{}},r)}},{key:"GetShaderPrefix",value:function(e){return e?this.shaderPrefixAnimated:""}},{key:"GetShaderPath",value:function(e,t){var r=this.GetShaderPrefix(t);"/"!==e.charAt(0)&&(e="/"+e);var n=e.lastIndexOf("/");return e.substring(0,n+1)+r+e.substring(n+1)}},{key:"GetAreaShaderPath",value:function(e,t){return this.areaShaderLocation+this.GetShaderPath(e,t)}},{key:"GetDecalShaderPath",value:function(e,t){return this.decalShaderLocation+this.GetShaderPath(e,t)}},{key:"HasAreaShader",value:function(e){return!!Object(q.findElementByPropertyValue)(this.areaShaders,"shader",e)}},{key:"GetAreaShader",value:function(e){return Object(q.findElementByPropertyValue)(this.areaShaders,"shader",e,ie)}},{key:"HasDecalShader",value:function(e){return!!Object(q.findElementByPropertyValue)(this.decalShaders,"shader",e)}},{key:"GetDecalShader",value:function(e){return Object(q.findElementByPropertyValue)(this.decalShaders,"shader",e,oe)}},{key:"GetMaterialPrefixes",value:function(){for(var e=[],t=0;t<this.materialPrefixes.length;t++)e.push(this.materialPrefixes[t].str);return e}},{key:"GetPatternMaterialPrefixes",value:function(){for(var e=[],t=0;t<this.patternMaterialPrefixes.length;t++)e.push(this.patternMaterialPrefixes[t].str);return e}},{key:"GetMaterialPrefix",value:function(e){var t=e-1;if(void 0===this.materialPrefixes[t])throw new ae({index:e});return this.materialPrefixes[t].str}},{key:"GetPatternMaterialPrefix",value:function(e){var t=e-1;if(void 0===this.patternMaterialPrefixes[t])throw new ue({index:e});return this.patternMaterialPrefixes[t].str}}])&&Y(t.prototype,r),n&&Y(t,n),o}(q.meta.Model),S=re((z=U).prototype,"areaShaderLocation",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=re(z.prototype,"areaShaders",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=re(z.prototype,"bannerShader",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=re(z.prototype,"damage",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=re(z.prototype,"decalShaderLocation",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=re(z.prototype,"decalShaders",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=re(z.prototype,"genericWreckMaterial",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=re(z.prototype,"hullDamage",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=re(z.prototype,"hullCategories",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=re(z.prototype,"materialPrefixes",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=re(z.prototype,"patternMaterialPrefixes",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=re(z.prototype,"resPathDefaultAlliance",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=re(z.prototype,"resPathDefaultCeo",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=re(z.prototype,"resPathDefaultCorp",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),G=re(z.prototype,"shaderPrefixAnimated",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),F=re(z.prototype,"swarm",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=re(z.prototype,"variants",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=re(z.prototype,"visibilityGroups",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=z))||_),ie=function(e){Q(r,e);var t=J(r);function r(e){return K(this,r),t.call(this,e,"SOF Area shader not found (%name%)")}return r}(V.Tw2Error),oe=function(e){Q(r,e);var t=J(r);function r(e){return K(this,r),t.call(this,e,"SOF Decal area shader not found (%name%)")}return r}(V.Tw2Error),ae=function(e){Q(r,e);var t=J(r);function r(e){return K(this,r),t.call(this,e,"SOF Material prefix index not found (%index%)")}return r}(V.Tw2Error),ue=function(e){Q(r,e);var t=J(r);function r(e){return K(this,r),t.call(this,e,"SOF Pattern material prefix index not found (%index%)")}return r}(V.Tw2Error)},"./sof/generic/EveSOFDataGenericDamage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericDamage",(function(){return ce}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z=r("./global/utils/index.js"),J=r("./global/math/index.js");function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ae(e);if(t){var i=ae(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ie(this,r)}}function ie(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?oe(e):t}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ce=(n=Z.meta.type("EveSOFDataGenericDamage"),i=Z.meta.float,o=Z.meta.color,a=Z.meta.color,u=Z.meta.color,c=Z.meta.color,l=Z.meta.float,s=Z.meta.vector2,f=Z.meta.vector2,p=Z.meta.float,d=Z.meta.vector4,y=Z.meta.uint,m=Z.meta.float,b=Z.meta.float,h=Z.meta.float,v=Z.meta.string,g=Z.meta.float,w=Z.meta.float,x=Z.meta.uint,_=Z.meta.float,z=Z.meta.path,S=Z.meta.string,j=Z.meta.string,n((Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(r,e);var t=ne(r);function r(){var e;te(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return ee(e=t.call.apply(t,[this].concat(i)),"armorParticleAngle",O,oe(e)),ee(e,"armorParticleColor0",R,oe(e)),ee(e,"armorParticleColor1",P,oe(e)),ee(e,"armorParticleColor2",D,oe(e)),ee(e,"armorParticleColor3",A,oe(e)),ee(e,"armorParticleDrag",M,oe(e)),ee(e,"armorParticleMinMaxLifeTime",C,oe(e)),ee(e,"armorParticleMinMaxSpeed",k,oe(e)),ee(e,"armorParticleRate",I,oe(e)),ee(e,"armorParticleSizes",L,oe(e)),ee(e,"armorParticleTextureIndex",G,oe(e)),ee(e,"armorParticleTurbulenceAmplitude",F,oe(e)),ee(e,"armorParticleTurbulenceFrequency",B,oe(e)),ee(e,"armorParticleVelocityStretchRotation",N,oe(e)),ee(e,"armorShader",U,oe(e)),ee(e,"flickerPerlinAlpha",V,oe(e)),ee(e,"flickerPerlinBeta",q,oe(e)),ee(e,"flickerPerlinN",H,oe(e)),ee(e,"flickerPerlinSpeed",W,oe(e)),ee(e,"shieldGeometryResFilePath",X,oe(e)),ee(e,"shieldShaderEllipsoid",K,oe(e)),ee(e,"shieldShaderHull",Y,oe(e)),e}return r}(Z.meta.Model),O=ue((T=Q).prototype,"armorParticleAngle",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=ue(T.prototype,"armorParticleColor0",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec4.create()}}),P=ue(T.prototype,"armorParticleColor1",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec4.create()}}),D=ue(T.prototype,"armorParticleColor2",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec4.create()}}),A=ue(T.prototype,"armorParticleColor3",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec4.create()}}),M=ue(T.prototype,"armorParticleDrag",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=ue(T.prototype,"armorParticleMinMaxLifeTime",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec2.create()}}),k=ue(T.prototype,"armorParticleMinMaxSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec2.create()}}),I=ue(T.prototype,"armorParticleRate",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=ue(T.prototype,"armorParticleSizes",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec4.create()}}),G=ue(T.prototype,"armorParticleTextureIndex",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=ue(T.prototype,"armorParticleTurbulenceAmplitude",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=ue(T.prototype,"armorParticleTurbulenceFrequency",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=ue(T.prototype,"armorParticleVelocityStretchRotation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=ue(T.prototype,"armorShader",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),V=ue(T.prototype,"flickerPerlinAlpha",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=ue(T.prototype,"flickerPerlinBeta",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=ue(T.prototype,"flickerPerlinN",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=ue(T.prototype,"flickerPerlinSpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=ue(T.prototype,"shieldGeometryResFilePath",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),K=ue(T.prototype,"shieldShaderEllipsoid",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Y=ue(T.prototype,"shieldShaderHull",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=T))||E)},"./sof/generic/EveSOFDataGenericDecalShader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericDecalShader",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=m.meta.type("EveSOFDataGenericDecalShader"),i=m.meta.list("EveSOFDataTexture"),o=m.meta.list("EveSOFDataGenericString"),a=m.meta.list("EveSOFDataGenericString"),u=m.meta.string,n((y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(o,e);var t,r,n,i=x(o);function o(){var e;v(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(e=i.call.apply(i,[this].concat(r)),"defaultTextures",s,z(e)),h(e,"parameters",f,z(e)),h(e,"parentTextures",p,z(e)),h(e,"shader",d,z(e)),e}return t=o,(r=[{key:"HasUsage",value:function(e){if(!e)return!1;if(this.transparencyTextureName===e)return!0;for(var t=0;t<this.defaultParameters.length;t++)if(this.defaultParameters[t].name===e)return!0;for(var r=0;r<this.parameters.length;r++)if(this.parameters[r].str===e)return!0;for(var n=0;n<this.defaultTextures.length;n++)if(this.defaultTextures[n].name===e)return!0;return!1}},{key:"Assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.textures=this.AssignTextures(e.textures,t.textures),e.parameters=this.AssignParameters(e.parameters,t.parameters),e}},{key:"AssignParameters",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=0;r<this.parameters.length;r++){var n=this.parameters[r].str;t&&t[n]?e[n]=Array.from(t[n]):e[n]=[0,0,0,1]}return e}},{key:"AssignTextures",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=0;r<this.defaultTextures.length;r++)this.defaultTextures[r].Assign(e);for(var n=0;n<this.parentTextures.length;n++){var i=this.parentTextures[n].str;t&&t[i]?e[i]=t[i]:e[i]||(e[i]="")}return e}}])&&g(t.prototype,r),n&&g(t,n),o}(m.meta.Model),s=j((l=y).prototype,"defaultTextures",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=j(l.prototype,"parameters",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=j(l.prototype,"parentTextures",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=j(l.prototype,"shader",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=l))||c)},"./sof/generic/EveSOFDataGenericHullDamage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericHullDamage",(function(){return q}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M=r("./global/utils/index.js"),C=r("./global/math/index.js");function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=U(e);if(t){var i=U(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return B(this,r)}}function B(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var q=(n=M.meta.type("EveSOFDataGenericHullDamage"),i=M.meta.float,o=M.meta.color,a=M.meta.color,u=M.meta.color,c=M.meta.float,l=M.meta.float,s=M.meta.vector2,f=M.meta.vector2,p=M.meta.float,d=M.meta.vector4,y=M.meta.uint,m=M.meta.float,b=M.meta.float,n((A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(r,e);var t=F(r);function r(){var e;L(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return I(e=t.call.apply(t,[this].concat(i)),"hullParticleAngle",g,N(e)),I(e,"hullParticleColor0",w,N(e)),I(e,"hullParticleColor1",x,N(e)),I(e,"hullParticleColor2",_,N(e)),I(e,"hullParticleColorMidpoint",z,N(e)),I(e,"hullParticleDrag",S,N(e)),I(e,"hullParticleMinMaxLifeTime",j,N(e)),I(e,"hullParticleMinMaxSpeed",E,N(e)),I(e,"hullParticleRate",T,N(e)),I(e,"hullParticleSizes",O,N(e)),I(e,"hullParticleTextureIndex",R,N(e)),I(e,"hullParticleTurbulenceAmplitude",P,N(e)),I(e,"hullParticleTurbulenceFrequency",D,N(e)),e}return r}(M.meta.Model),g=V((v=A).prototype,"hullParticleAngle",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=V(v.prototype,"hullParticleColor0",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),x=V(v.prototype,"hullParticleColor1",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),_=V(v.prototype,"hullParticleColor2",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),z=V(v.prototype,"hullParticleColorMidpoint",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=V(v.prototype,"hullParticleDrag",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=V(v.prototype,"hullParticleMinMaxLifeTime",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec2.create()}}),E=V(v.prototype,"hullParticleMinMaxSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec2.create()}}),T=V(v.prototype,"hullParticleRate",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=V(v.prototype,"hullParticleSizes",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),R=V(v.prototype,"hullParticleTextureIndex",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=V(v.prototype,"hullParticleTurbulenceAmplitude",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=V(v.prototype,"hullParticleTurbulenceFrequency",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=v))||h)},"./sof/generic/EveSOFDataGenericShader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericShader",(function(){return M}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_=r("./global/utils/index.js");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var i=D(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var M=(n=_.meta.type("EveSOFDataGenericShader"),i=_.meta.list("EveSOFDataParameter"),o=_.meta.list("EveSOFDataTexture"),a=_.meta.notImplemented,u=_.meta.boolean,c=_.meta.list("EveSOFDataGenericString"),l=_.meta.path,s=_.meta.notImplemented,f=_.meta.string,n((x=w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(o,e);var t,r,n,i=O(o);function o(){var e;j(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(e=i.call.apply(i,[this].concat(r)),"defaultParameters",y,P(e)),S(e,"defaultTextures",m,P(e)),S(e,"doGenerateDepthArea",b,P(e)),S(e,"parameters",h,P(e)),S(e,"shader",v,P(e)),S(e,"transparencyTextureName",g,P(e)),e}return t=o,(r=[{key:"HasUsage",value:function(e){if(!e)return!1;if(this.transparencyTextureName===e)return!0;for(var t=0;t<this.defaultParameters.length;t++)if(this.defaultParameters[t].name===e)return!0;for(var r=0;r<this.parameters.length;r++)if(this.parameters[r].str===e)return!0;for(var n=0;n<this.defaultTextures.length;n++)if(this.defaultTextures[n].name===e)return!0;return!1}},{key:"Assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.textures=this.AssignTextures(e.textures,t.textures),e.parameters=this.AssignParameters(e.parameters,t.parameters),e}},{key:"AssignParameters",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=0;r<this.defaultParameters.length;r++)this.defaultParameters[r].Assign(e);for(var n=0;n<this.parameters.length;n++){var i=this.parameters[n].str;t&&t[i]?e[i]=Array.from(t[i]):e[i]&&(e[i]=[0,0,0,1])}return e}},{key:"AssignTextures",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=0;r<this.defaultTextures.length;r++)this.defaultTextures[r].Assign(e);return Object.assign(e,t)}},{key:"hasPatternMaskMaps",get:function(){for(var e=0;e<this.defaultTextures.length;e++)if(o.PatternMaskMaps.includes(this.defaultTextures[e].name))return!0;return!1}}])&&E(t.prototype,r),n&&E(t,n),o}(_.meta.Model),w.PatternMaskMaps=["PatternMask1Map","PatternMask2Map"],y=A((d=x).prototype,"defaultParameters",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=A(d.prototype,"defaultTextures",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=A(d.prototype,"doGenerateDepthArea",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=A(d.prototype,"parameters",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=A(d.prototype,"shader",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=A(d.prototype,"transparencyTextureName",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=d))||p)},"./sof/generic/EveSOFDataGenericString.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericString",(function(){return S}));var n,i,o,a,u,c,l=r("./global/utils/index.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v,g,w,x,_,z,S=(n=l.meta.type("EveSOFDataGenericString"),i=l.meta.string,n((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(r,e);var t=y(r);function r(){var e;p(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return f(e=t.call.apply(t,[this].concat(i)),"str",u,b(e)),e}return r}(l.meta.Model),v=(a=c).prototype,g="str",w=[i],x={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},z={},Object.keys(x).forEach((function(e){z[e]=x[e]})),z.enumerable=!!z.enumerable,z.configurable=!!z.configurable,("value"in z||z.initializer)&&(z.writable=!0),z=w.slice().reverse().reduce((function(e,t){return t(v,g,e)||e}),z),_&&void 0!==z.initializer&&(z.value=z.initializer?z.initializer.call(_):void 0,z.initializer=void 0),void 0===z.initializer&&(Object.defineProperty(v,g,z),z=null),u=z,o=a))||o)},"./sof/generic/EveSOFDataGenericSwarm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericSwarm",(function(){return V}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M=r("./global/utils/index.js");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var V=(n=M.meta.type("EveSOFDataGenericShader"),i=M.meta.float,o=M.meta.float,a=M.meta.float,u=M.meta.float,c=M.meta.float,l=M.meta.float,s=M.meta.float,f=M.meta.float,p=M.meta.float,d=M.meta.float,y=M.meta.float,m=M.meta.float,b=M.meta.float,n((A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(r,e);var t=G(r);function r(){var e;I(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return k(e=t.call.apply(t,[this].concat(i)),"formationDistance",g,B(e)),k(e,"maxDeceleration",w,B(e)),k(e,"maxDistance0",x,B(e)),k(e,"separationDistance",_,B(e)),k(e,"wanderDistance",z,B(e)),k(e,"wanderFluctuation",S,B(e)),k(e,"wanderRadius",j,B(e)),k(e,"weightAlign",E,B(e)),k(e,"weightAnchor",T,B(e)),k(e,"weightCohesion",O,B(e)),k(e,"weightDeceleration",R,B(e)),k(e,"weightFormation",P,B(e)),k(e,"weightSeparation",D,B(e)),e}return r}(M.meta.Model),g=U((v=A).prototype,"formationDistance",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=U(v.prototype,"maxDeceleration",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=U(v.prototype,"maxDistance0",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=U(v.prototype,"separationDistance",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=U(v.prototype,"wanderDistance",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=U(v.prototype,"wanderFluctuation",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=U(v.prototype,"wanderRadius",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=U(v.prototype,"weightAlign",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=U(v.prototype,"weightAnchor",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=U(v.prototype,"weightCohesion",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=U(v.prototype,"weightDeceleration",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=U(v.prototype,"weightFormation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=U(v.prototype,"weightSeparation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=v))||h)},"./sof/generic/EveSOFDataGenericVariant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericVariant",(function(){return z}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=d.meta.type("EveSOFDataGenericVariant"),i=d.meta.string,o=d.meta.struct("EveSOFDataHullArea"),a=d.meta.boolean,n((p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=v(r);function r(){var e;b(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return m(e=t.call.apply(t,[this].concat(i)),"name",l,w(e)),m(e,"hullArea",s,w(e)),m(e,"isTransparent",f,w(e)),e}return r}(d.meta.Model),l=_((c=p).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=_(c.prototype,"hullArea",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=_(c.prototype,"isTransparent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=c))||u)},"./sof/generic/EveSOFDataVisibilityGroup.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataVisibilityGroup",(function(){return S}));var n,i,o,a,u,c,l=r("./global/utils/index.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v,g,w,x,_,z,S=(n=l.meta.type("EveSOFDataVisibilityGroup"),i=l.meta.string,n((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(r,e);var t=y(r);function r(){var e;p(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return f(e=t.call.apply(t,[this].concat(i)),"name",u,b(e)),e}return r}(l.meta.Model),v=(a=c).prototype,g="name",w=[i],x={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},z={},Object.keys(x).forEach((function(e){z[e]=x[e]})),z.enumerable=!!z.enumerable,z.configurable=!!z.configurable,("value"in z||z.initializer)&&(z.writable=!0),z=w.slice().reverse().reduce((function(e,t){return t(v,g,e)||e}),z),_&&void 0!==z.initializer&&(z.value=z.initializer?z.initializer.call(_):void 0,z.initializer=void 0),void 0===z.initializer&&(Object.defineProperty(v,g,z),z=null),u=z,o=a))||o)},"./sof/generic/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/generic/EveSOFDataGeneric.js");r.d(t,"EveSOFDataGeneric",(function(){return n.EveSOFDataGeneric})),r.d(t,"ErrSOFAreaShaderNotFound",(function(){return n.ErrSOFAreaShaderNotFound})),r.d(t,"ErrSOFDecalShaderNotFound",(function(){return n.ErrSOFDecalShaderNotFound})),r.d(t,"ErrSOFMaterialPrefixNotFound",(function(){return n.ErrSOFMaterialPrefixNotFound})),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",(function(){return n.ErrSOFPatternMaterialPrefixNotFound}));var i=r("./sof/generic/EveSOFDataGenericDamage.js");r.d(t,"EveSOFDataGenericDamage",(function(){return i.EveSOFDataGenericDamage}));var o=r("./sof/generic/EveSOFDataGenericDecalShader.js");r.d(t,"EveSOFDataGenericDecalShader",(function(){return o.EveSOFDataGenericDecalShader}));var a=r("./sof/generic/EveSOFDataGenericHullDamage.js");r.d(t,"EveSOFDataGenericHullDamage",(function(){return a.EveSOFDataGenericHullDamage}));var u=r("./sof/generic/EveSOFDataGenericShader.js");r.d(t,"EveSOFDataGenericShader",(function(){return u.EveSOFDataGenericShader}));var c=r("./sof/generic/EveSOFDataGenericString.js");r.d(t,"EveSOFDataGenericString",(function(){return c.EveSOFDataGenericString}));var l=r("./sof/generic/EveSOFDataGenericSwarm.js");r.d(t,"EveSOFDataGenericSwarm",(function(){return l.EveSOFDataGenericSwarm}));var s=r("./sof/generic/EveSOFDataGenericVariant.js");r.d(t,"EveSOFDataGenericVariant",(function(){return s.EveSOFDataGenericVariant}));var f=r("./sof/generic/EveSOFDataVisibilityGroup.js");r.d(t,"EveSOFDataVisibilityGroup",(function(){return f.EveSOFDataVisibilityGroup}))},"./sof/hull/EveSOFDataHull.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHull",(function(){return Ne}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe,ae,ue,ce,le,se,fe,pe,de,ye,me,be,he,ve,ge,we,xe,_e,ze,Se,je,Ee,Te,Oe,Re=r("./global/utils/index.js"),Pe=r("./global/math/index.js");function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Fe(e);if(t){var i=Fe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Le(this,r)}}function Le(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?Ge(e):t}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Ne=(n=Re.meta.type("EveSOFDataHull"),i=Re.meta.string,o=Re.meta.list("EveSOFDataHullArea"),a=Re.meta.list("EveSOFDataHullAnimation"),u=Re.meta.vector3,c=Re.meta.list("EveSOFDataHullBanner"),l=Re.meta.struct("EveSOFDataHullBooster"),s=Re.meta.vector4,f=Re.meta.uint,p=Re.meta.boolean,d=Re.meta.string,y=Re.meta.list("EveSOFDataHullChild"),m=Re.meta.list("EveSOFDataHullController"),b=Re.meta.list("EveSOFDataHullArea"),h=Re.meta.list("EveSOFDataHullDecalSet"),v=Re.meta.struct("EveSOFDataPatternPerHull"),g=Re.meta.list("EveSOFDataHullArea"),w=Re.meta.string,x=Re.meta.list("EveSOFDataHullArea"),_=Re.meta.boolean,z=Re.meta.path,S=Re.meta.list("EveSOFDataHullHazeSet"),j=Re.meta.list("EveSOFDataHullDecalSet"),E=Re.meta.uint,T=Re.meta.list("EveSOFDataInstancedMesh"),O=Re.meta.boolean,R=Re.meta.list("EveSOFDataHullLightSet"),P=Re.meta.list("EveSOFDataHullLocatorSet"),D=Re.meta.list("EveSOFDataHullLocator"),A=Re.meta.path,M=Re.meta.list("EveSOFDataHullArea"),C=Re.meta.list("EveSOFDataHullPlaneSet"),k=Re.meta.vector3,I=Re.meta.vector3,L=Re.meta.list("EveSOFDataHullSoundEmitter"),G=Re.meta.list("EveSOFDataHullSpotlightSet"),F=Re.meta.list("EveSOFDataHullSpriteLineSet"),B=Re.meta.list("EveSOFDataHullSpriteSet"),N=Re.meta.list("EveSOFDataHullArea"),n((Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(o,e);var t,r,n,i=Ie(o);function o(){var e;Me(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ae(e=i.call.apply(i,[this].concat(r)),"name",q,Ge(e)),Ae(e,"additiveAreas",H,Ge(e)),Ae(e,"animations",W,Ge(e)),Ae(e,"audioPosition",X,Ge(e)),Ae(e,"banners",K,Ge(e)),Ae(e,"booster",Y,Ge(e)),Ae(e,"boundingSphere",Q,Ge(e)),Ae(e,"buildClass",Z,Ge(e)),Ae(e,"castShadow",J,Ge(e)),Ae(e,"category",$,Ge(e)),Ae(e,"children",ee,Ge(e)),Ae(e,"controllers",te,Ge(e)),Ae(e,"decalAreas",re,Ge(e)),Ae(e,"decalSets",ne,Ge(e)),Ae(e,"defaultPattern",ie,Ge(e)),Ae(e,"depthAreas",oe,Ge(e)),Ae(e,"description",ae,Ge(e)),Ae(e,"distortionAreas",ue,Ge(e)),Ae(e,"enableDynamicBoundingSphere",ce,Ge(e)),Ae(e,"geometryResFilePath",le,Ge(e)),Ae(e,"hazeSets",se,Ge(e)),Ae(e,"hullDecals",fe,Ge(e)),Ae(e,"impactEffectType",pe,Ge(e)),Ae(e,"instancedMeshes",de,Ge(e)),Ae(e,"isSkinned",ye,Ge(e)),Ae(e,"lightSets",me,Ge(e)),Ae(e,"locatorSets",be,Ge(e)),Ae(e,"locatorTurrets",he,Ge(e)),Ae(e,"modelRotationCurvePath",ve,Ge(e)),Ae(e,"opaqueAreas",ge,Ge(e)),Ae(e,"planeSets",we,Ge(e)),Ae(e,"shapeEllipsoidCenter",xe,Ge(e)),Ae(e,"shapeEllipsoidRadius",_e,Ge(e)),Ae(e,"soundEmitters",ze,Ge(e)),Ae(e,"spotlightSets",Se,Ge(e)),Ae(e,"spriteLineSets",je,Ge(e)),Ae(e,"spriteSets",Ee,Ge(e)),Ae(e,"transparentAreas",Te,Ge(e)),e}return t=o,(r=[{key:"Initialize",value:function(){this.geometryResFilePath.includes(".cake")&&(this._wasSkinned=this.isSkinned,this.isSkinned=!1)}}])&&Ce(t.prototype,r),n&&Ce(t,n),o}(Re.meta.Model),q=Be((V=Oe).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),H=Be(V.prototype,"additiveAreas",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=Be(V.prototype,"animations",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=Be(V.prototype,"audioPosition",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Pe.vec3.create()}}),K=Be(V.prototype,"banners",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=Be(V.prototype,"booster",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=Be(V.prototype,"boundingSphere",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Pe.vec4.create()}}),Z=Be(V.prototype,"buildClass",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=Be(V.prototype,"castShadow",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$=Be(V.prototype,"category",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ee=Be(V.prototype,"children",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),te=Be(V.prototype,"controllers",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),re=Be(V.prototype,"decalAreas",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ne=Be(V.prototype,"decalSets",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ie=Be(V.prototype,"defaultPattern",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=Be(V.prototype,"depthAreas",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ae=Be(V.prototype,"description",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ue=Be(V.prototype,"distortionAreas",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ce=Be(V.prototype,"enableDynamicBoundingSphere",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),le=Be(V.prototype,"geometryResFilePath",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),se=Be(V.prototype,"hazeSets",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fe=Be(V.prototype,"hullDecals",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pe=Be(V.prototype,"impactEffectType",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),de=Be(V.prototype,"instancedMeshes",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=Be(V.prototype,"isSkinned",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),me=Be(V.prototype,"lightSets",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),be=Be(V.prototype,"locatorSets",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),he=Be(V.prototype,"locatorTurrets",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=Be(V.prototype,"modelRotationCurvePath",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ge=Be(V.prototype,"opaqueAreas",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),we=Be(V.prototype,"planeSets",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xe=Be(V.prototype,"shapeEllipsoidCenter",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Pe.vec3.create()}}),_e=Be(V.prototype,"shapeEllipsoidRadius",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Pe.vec3.create()}}),ze=Be(V.prototype,"soundEmitters",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Se=Be(V.prototype,"spotlightSets",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),je=Be(V.prototype,"spriteLineSets",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ee=Be(V.prototype,"spriteSets",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Te=Be(V.prototype,"transparentAreas",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=V))||U)},"./sof/hull/EveSOFDataHullAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullAnimation",(function(){return C}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z=r("./global/utils/index.js"),S=r("./global/math/index.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var C=(n=z.meta.type("EveSOFDataHullAnimation"),i=z.meta.string,o=z.meta.float,a=z.meta.float,u=z.meta.quaternion,c=z.meta.uint,l=z.meta.float,s=z.meta.float,f=z.meta.quaternion,n((_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(r,e);var t=R(r);function r(){var e;T(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return E(e=t.call.apply(t,[this].concat(i)),"name",y,D(e)),E(e,"endRate",m,D(e)),E(e,"endRotationTime",b,D(e)),E(e,"endRotationValue",h,D(e)),E(e,"id",v,D(e)),E(e,"startRate",g,D(e)),E(e,"startRotationTime",w,D(e)),E(e,"startRotationValue",x,D(e)),e}return r}(z.meta.Model),y=M((d=_).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=M(d.prototype,"endRate",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=M(d.prototype,"endRotationTime",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=M(d.prototype,"endRotationValue",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.quat.create()}}),v=M(d.prototype,"id",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=M(d.prototype,"startRate",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=M(d.prototype,"startRotationTime",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=M(d.prototype,"startRotationValue",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.quat.create()}}),p=d))||p)},"./sof/hull/EveSOFDataHullArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullArea",(function(){return k}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S=r("./global/utils/index.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=M(e);if(t){var i=M(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return D(this,r)}}function D(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?A(e):t}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var k=(n=S.meta.type("EveSOFDataHullArea"),i=S.meta.string,o=S.meta.uint,a=S.meta.uint,u=S.meta.todo("Figure out what this is for"),c=S.meta.uint,l=S.meta.uint,s=S.meta.list("EveSOFDataParameter"),f=S.meta.string,p=S.meta.list("EveSOFDataTexture"),n((z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(o,e);var t,r,n,i=P(o);function o(){var e;T(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(e=i.call.apply(i,[this].concat(r)),"name",m,A(e)),E(e,"areaType",b,A(e)),E(e,"blockedMaterials",h,A(e)),E(e,"count",v,A(e)),E(e,"index",g,A(e)),E(e,"parameters",w,A(e)),E(e,"shader",x,A(e)),E(e,"textures",_,A(e)),e}return t=o,(r=[{key:"Assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.textures=this.AssignTextures(e.textures),e.parameters=this.AssignParameters(e.parameters),e}},{key:"AssignParameters",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;t<this.parameters.length;t++)this.parameters[t].Assign(e);return e}},{key:"AssignTextures",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;t<this.textures.length;t++)this.textures[t].Assign(e);return e}}])&&O(t.prototype,r),n&&O(t,n),o}(S.meta.Model),m=C((y=z).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=C(y.prototype,"areaType",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=C(y.prototype,"blockedMaterials",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=C(y.prototype,"count",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=C(y.prototype,"index",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=C(y.prototype,"parameters",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=C(y.prototype,"shader",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=C(y.prototype,"textures",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=y))||d)},"./sof/hull/EveSOFDataHullBanner.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBanner",(function(){return G}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T=r("./global/utils/index.js"),O=r("./global/math/index.js");function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var G=(n=T.meta.type("EveSOFDataHullBanner"),i=T.meta.string,o=T.meta.float,a=T.meta.float,u=T.meta.float,c=T.meta.uint,l=T.meta.struct(),s=T.meta.vector3,f=T.meta.quaternion,p=T.meta.vector3,d=T.meta.uint,n((E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(r,e);var t=M(r);function r(){var e;D(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return P(e=t.call.apply(t,[this].concat(i)),"name",b,k(e)),P(e,"angleX",h,k(e)),P(e,"angleY",v,k(e)),P(e,"angleZ",g,k(e)),P(e,"boneIndex",w,k(e)),P(e,"lightOverride",x,k(e)),P(e,"position",_,k(e)),P(e,"rotation",z,k(e)),P(e,"scaling",S,k(e)),P(e,"usage",j,k(e)),e}return r}(T.meta.Model),b=L((m=E).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=L(m.prototype,"angleX",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=L(m.prototype,"angleY",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=L(m.prototype,"angleZ",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=L(m.prototype,"boneIndex",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),x=L(m.prototype,"lightOverride",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=L(m.prototype,"position",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.create()}}),z=L(m.prototype,"rotation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.quat.create()}}),S=L(m.prototype,"scaling",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.fromValues(1,1,1)}}),j=L(m.prototype,"usage",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=m))||y)},"./sof/hull/EveSOFDataHullBannerLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBannerLight",(function(){return f}));var n,i=r("./global/utils/index.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=(0,i.meta.notImplemented)(n=i.meta.type("EveSOFDataHullBannerLight")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(r,e);var t=c(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(i.meta.Model))||n)||n},"./sof/hull/EveSOFDataHullBooster.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBooster",(function(){return z}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=d.meta.type("EveSOFDataHullBooster"),i=d.meta.boolean,o=d.meta.boolean,a=d.meta.list("EveSOFDataHullBoosterItem"),n((p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=v(r);function r(){var e;b(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return m(e=t.call.apply(t,[this].concat(i)),"alwaysOn",l,w(e)),m(e,"hasTrails",s,w(e)),m(e,"items",f,w(e)),e}return r}(d.meta.Model),l=_((c=p).prototype,"alwaysOn",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=_(c.prototype,"hasTrails",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=_(c.prototype,"items",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=c))||u)},"./sof/hull/EveSOFDataHullBoosterItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBoosterItem",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x=r("./global/utils/index.js"),_=r("./global/math/index.js");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var A=(n=x.meta.type("EveSOFDataHullBoosterItem"),i=x.meta.uint,o=x.meta.uint,a=x.meta.vector4,u=x.meta.notImplemented,c=x.meta.boolean,l=x.meta.float,s=x.meta.todo("What should the default value be?"),f=x.meta.matrix4,n((w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(r,e);var t=T(r);function r(){var e;j(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return S(e=t.call.apply(t,[this].concat(i)),"atlasIndex0",y,R(e)),S(e,"atlasIndex1",m,R(e)),S(e,"functionality",b,R(e)),S(e,"hasTrail",h,R(e)),S(e,"lightScale",v,R(e)),S(e,"transform",g,R(e)),e}return r}(x.meta.Model),y=D((d=w).prototype,"atlasIndex0",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=D(d.prototype,"atlasIndex1",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=D(d.prototype,"functionality",[a,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.vec4.create()}}),h=D(d.prototype,"hasTrail",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=D(d.prototype,"lightScale",[l,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=D(d.prototype,"transform",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.mat4.create()}}),p=d))||p)},"./sof/hull/EveSOFDataHullChild.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullChild",(function(){return I}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j=r("./global/utils/index.js"),E=r("./global/math/index.js");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var i=C(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}function A(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var I=(n=j.meta.type("EveSOFDataHullChild"),i=j.meta.string,o=j.meta.uint,a=j.meta.uint,u=j.meta.uint,c=j.meta.path,l=j.meta.quaternion,s=j.meta.vector3,f=j.meta.vector3,p=j.meta.string,n((S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(r,e);var t=D(r);function r(){var e;R(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return O(e=t.call.apply(t,[this].concat(i)),"name",m,M(e)),O(e,"groupIndex",b,M(e)),O(e,"id",h,M(e)),O(e,"lowestLodVisible",v,M(e)),O(e,"redFilePath",g,M(e)),O(e,"rotation",w,M(e)),O(e,"scaling",x,M(e)),O(e,"translation",_,M(e)),O(e,"visibilityGroup",z,M(e)),e}return r}(j.meta.Model),m=k((y=S).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=k(y.prototype,"groupIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),h=k(y.prototype,"id",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=k(y.prototype,"lowestLodVisible",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=k(y.prototype,"redFilePath",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=k(y.prototype,"rotation",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.quat.create()}}),x=k(y.prototype,"scaling",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.vec3.fromValues(1,1,1)}}),_=k(y.prototype,"translation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.vec3.create()}}),z=k(y.prototype,"visibilityGroup",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=y))||d)},"./sof/hull/EveSOFDataHullController.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullController",(function(){return S}));var n,i,o,a,u,c,l=r("./global/utils/index.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v,g,w,x,_,z,S=(n=l.meta.type("EveSOFDataHullController"),i=l.meta.path,n((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(r,e);var t=y(r);function r(){var e;p(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return f(e=t.call.apply(t,[this].concat(i)),"path",u,b(e)),e}return r}(l.meta.Model),v=(a=c).prototype,g="path",w=[i],x={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},z={},Object.keys(x).forEach((function(e){z[e]=x[e]})),z.enumerable=!!z.enumerable,z.configurable=!!z.configurable,("value"in z||z.initializer)&&(z.writable=!0),z=w.slice().reverse().reduce((function(e,t){return t(v,g,e)||e}),z),_&&void 0!==z.initializer&&(z.value=z.initializer?z.initializer.call(_):void 0,z.initializer=void 0),void 0===z.initializer&&(Object.defineProperty(v,g,z),z=null),u=z,o=a))||o)},"./sof/hull/EveSOFDataHullDecalSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullDecalSet",(function(){return z}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=d.meta.type("EveSOFDataHullDecalSet"),i=d.meta.string,o=d.meta.list("EveSOFDataHullDecalSetItem"),a=d.meta.string,n((p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=v(r);function r(){var e;b(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return m(e=t.call.apply(t,[this].concat(i)),"name",l,w(e)),m(e,"items",s,w(e)),m(e,"visibilityGroup",f,w(e)),e}return r}(d.meta.Model),l=_((c=p).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=_(c.prototype,"items",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=_(c.prototype,"visibilityGroup",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=c))||u)},"./sof/hull/EveSOFDataHullDecalSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullDecalSetItem",(function(){return X}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k=r("./global/utils/index.js"),I=r("./global/math/index.js");r("./core/index.js");function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=H(e);if(t){var i=H(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return V(this,r)}}function V(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?q(e):t}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var X=(n=k.meta.type("EveSOFDataHullDecalSetItem"),i=k.meta.string,o=k.meta.uint,a=k.meta.list(),u=k.meta.uint,c=k.meta.uint,l=k.meta.uint,s=k.meta.list("EveSOFDataParameter"),f=k.meta.vector3,p=k.meta.quaternion,d=k.meta.vector3,y=k.meta.list("EveSOFDataTexture"),m=k.meta.uint,b=k.meta.string,h=k.meta.uint16Array,n((C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(o,e);var t,r,n,i=U(o);function o(){var e;F(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return G(e=i.call.apply(i,[this].concat(r)),"name",w,q(e)),G(e,"boneIndex",x,q(e)),G(e,"indexBuffers",_,q(e)),G(e,"glowColorType",z,q(e)),G(e,"logoType",S,q(e)),G(e,"meshIndex",j,q(e)),G(e,"parameters",E,q(e)),G(e,"position",T,q(e)),G(e,"rotation",O,q(e)),G(e,"scaling",R,q(e)),G(e,"textures",P,q(e)),G(e,"usage",D,q(e)),G(e,"visibilityGroup",A,q(e)),G(e,"indexBuffer",M,q(e)),e}return t=o,(r=[{key:"GetIndexBuffers",value:function(){return this.indexBuffer?[this.indexBuffer]:this.indexBuffers?this.indexBuffers.map((function(e){return e.indexBuffer})):null}},{key:"Assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.textures=this.AssignTextures(e.textures),e.parameters=this.AssignParameters(e.parameters),e}},{key:"AssignParameters",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;t<this.parameters.length;t++)this.parameters[t].Assign(e);return e}},{key:"AssignTextures",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;t<this.textures.length;t++)this.textures[t].Assign(e);return e}}])&&B(t.prototype,r),n&&B(t,n),o}(k.meta.Model),w=W((g=C).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=W(g.prototype,"boneIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),_=W(g.prototype,"indexBuffers",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=W(g.prototype,"glowColorType",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=W(g.prototype,"logoType",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=W(g.prototype,"meshIndex",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=W(g.prototype,"parameters",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=W(g.prototype,"position",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.vec3.create()}}),O=W(g.prototype,"rotation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.quat.create()}}),R=W(g.prototype,"scaling",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.vec3.fromValues(1,1,1)}}),P=W(g.prototype,"textures",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=W(g.prototype,"usage",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=W(g.prototype,"visibilityGroup",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=W(g.prototype,"indexBuffer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=g))||v)},"./sof/hull/EveSOFDataHullHazeSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullHazeSet",(function(){return j}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=m.meta.type("EveSOFDataHullHazeSet"),i=m.meta.string,o=m.meta.list("EveSOFDataHullHazeSetItem"),a=m.meta.string,u=m.meta.boolean,n((y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t=w(r);function r(){var e;v(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return h(e=t.call.apply(t,[this].concat(i)),"name",s,_(e)),h(e,"items",f,_(e)),h(e,"visibilityGroup",p,_(e)),h(e,"skinned",d,_(e)),e}return r}(m.meta.Model),s=S((l=y).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=S(l.prototype,"items",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=S(l.prototype,"visibilityGroup",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=S(l.prototype,"skinned",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=l))||c)},"./sof/hull/EveSOFDataHullHazeSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullHazeSetItem",(function(){return G}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T=r("./global/utils/index.js"),O=r("./global/math/index.js");function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var G=(n=T.meta.type("EveSOFDataHullHazeSetItem"),i=T.meta.uint,o=T.meta.boolean,a=T.meta.uint,u=T.meta.float,c=T.meta.float,l=T.meta.vector3,s=T.meta.quaternion,f=T.meta.vector3,p=T.meta.float,d=T.meta.float,n((E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(r,e);var t=M(r);function r(){var e;D(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return P(e=t.call.apply(t,[this].concat(i)),"boneIndex",b,k(e)),P(e,"boosterGainInfluence",h,k(e)),P(e,"colorType",v,k(e)),P(e,"hazeBrightness",g,k(e)),P(e,"hazeFalloff",w,k(e)),P(e,"position",x,k(e)),P(e,"rotation",_,k(e)),P(e,"scaling",z,k(e)),P(e,"sourceBrightness",S,k(e)),P(e,"sourceSize",j,k(e)),e}return r}(T.meta.Model),b=L((m=E).prototype,"boneIndex",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),h=L(m.prototype,"boosterGainInfluence",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=L(m.prototype,"colorType",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=L(m.prototype,"hazeBrightness",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=L(m.prototype,"hazeFalloff",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=L(m.prototype,"position",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.create()}}),_=L(m.prototype,"rotation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.quat.create()}}),z=L(m.prototype,"scaling",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.fromValues(1,1,1)}}),S=L(m.prototype,"sourceBrightness",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=L(m.prototype,"sourceSize",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=m))||y)},"./sof/hull/EveSOFDataHullLightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSet",(function(){return R}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g=r("./global/utils/index.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R=(n=g.meta.type("EveSOFDataHullLightSet"),i=g.meta.string,o=g.meta.uint,a=g.meta.list("EveSOFDataHullLightSetItem"),u=g.meta.float,c=g.meta.float,l=g.meta.string,n((v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(r,e);var t=S(r);function r(){var e;_(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return x(e=t.call.apply(t,[this].concat(i)),"name",p,E(e)),x(e,"boneIndex",d,E(e)),x(e,"items",y,E(e)),x(e,"noiseAmplitude",m,E(e)),x(e,"noiseOctaves",b,E(e)),x(e,"visibilityGroup",h,E(e)),e}return r}(g.meta.Model),p=O((f=v).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=O(f.prototype,"boneIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),y=O(f.prototype,"items",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=O(f.prototype,"noiseAmplitude",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=O(f.prototype,"noiseOctaves",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=O(f.prototype,"visibilityGroup",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=f))||s)},"./sof/hull/EveSOFDataHullLightSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetItem",(function(){return G}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T=r("./global/utils/index.js"),O=r("./global/math/index.js");function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var G=(n=T.meta.type("EveSOFDataHullLightSetItem"),i=T.meta.string,o=T.meta.uint,a=T.meta.float,u=T.meta.float,c=T.meta.color,l=T.meta.float,s=T.meta.float,f=T.meta.float,p=T.meta.vector3,d=T.meta.float,n((E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(r,e);var t=M(r);function r(){var e;D(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return P(e=t.call.apply(t,[this].concat(i)),"name",b,k(e)),P(e,"boneIndex",h,k(e)),P(e,"brightness",v,k(e)),P(e,"innerRadius",g,k(e)),P(e,"lightColor",w,k(e)),P(e,"noiseAmplitude",x,k(e)),P(e,"noiseFrequency",_,k(e)),P(e,"noiseOctaves",z,k(e)),P(e,"position",S,k(e)),P(e,"radius",j,k(e)),e}return r}(T.meta.Model),b=L((m=E).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=L(m.prototype,"boneIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=L(m.prototype,"brightness",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=L(m.prototype,"innerRadius",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=L(m.prototype,"lightColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec4.create()}}),x=L(m.prototype,"noiseAmplitude",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=L(m.prototype,"noiseFrequency",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=L(m.prototype,"noiseOctaves",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=L(m.prototype,"position",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.create()}}),j=L(m.prototype,"radius",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=m))||y)},"./sof/hull/EveSOFDataHullLightSetSpotLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetSpotLight",(function(){return U}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D=r("./global/utils/index.js"),A=r("./global/math/index.js");function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=B(e);if(t){var i=B(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return G(this,r)}}function G(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var U=(n=D.meta.type("EveSOFDataHullLightSetSpotLight"),i=D.meta.string,o=D.meta.uint,a=D.meta.float,u=D.meta.float,c=D.meta.float,l=D.meta.color,s=D.meta.float,f=D.meta.float,p=D.meta.float,d=D.meta.vector3,y=D.meta.uint,m=D.meta.quaternion,n((P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(r,e);var t=L(r);function r(){var e;k(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return C(e=t.call.apply(t,[this].concat(i)),"name",v,F(e)),C(e,"boneIndex",g,F(e)),C(e,"brightness",w,F(e)),C(e,"innerAngle",x,F(e)),C(e,"innerRadius",_,F(e)),C(e,"lightColor",z,F(e)),C(e,"noiseAmplitude",S,F(e)),C(e,"noiseFrequency",j,F(e)),C(e,"outerAngle",E,F(e)),C(e,"position",T,F(e)),C(e,"radius",O,F(e)),C(e,"rotation",R,F(e)),e}return r}(D.meta.Model),v=N((h=P).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=N(h.prototype,"boneIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),w=N(h.prototype,"brightness",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=N(h.prototype,"innerAngle",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=N(h.prototype,"innerRadius",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=N(h.prototype,"lightColor",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.vec4.create()}}),S=N(h.prototype,"noiseAmplitude",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=N(h.prototype,"noiseFrequency",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=N(h.prototype,"outerAngle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=N(h.prototype,"position",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.vec3.create()}}),O=N(h.prototype,"radius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=N(h.prototype,"rotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.quat.create()}}),b=h))||b)},"./sof/hull/EveSOFDataHullLightSetTexturedPointLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetTexturedPointLight",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x=r("./global/utils/index.js"),_=r("./global/math/index.js");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var A=(n=x.meta.type("EveSOFDataHullLightSetTexturedPointLight"),i=x.meta.string,o=x.meta.float,a=x.meta.float,u=x.meta.vector3,c=x.meta.float,l=x.meta.float,s=x.meta.path,n((w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(r,e);var t=T(r);function r(){var e;j(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return S(e=t.call.apply(t,[this].concat(i)),"name",d,R(e)),S(e,"brightness",y,R(e)),S(e,"innerRadius",m,R(e)),S(e,"position",b,R(e)),S(e,"noiseOctaves",h,R(e)),S(e,"radius",v,R(e)),S(e,"texturePath",g,R(e)),e}return r}(x.meta.Model),d=D((p=w).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=D(p.prototype,"brightness",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=D(p.prototype,"innerRadius",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=D(p.prototype,"position",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.vec3.create()}}),h=D(p.prototype,"noiseOctaves",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=D(p.prototype,"radius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=D(p.prototype,"texturePath",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=p))||f)},"./sof/hull/EveSOFDataHullLocator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLocator",(function(){return _}));var n,i,o,a,u,c,l,s,f=r("./global/utils/index.js"),p=r("./global/math/index.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=f.meta.type("EveSOFDataHullLocator"),i=f.meta.string,o=f.meta.matrix4,n((s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(r,e);var t=h(r);function r(){var e;m(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return y(e=t.call.apply(t,[this].concat(i)),"name",c,g(e)),y(e,"transform",l,g(e)),e}return r}(f.meta.Model),c=x((u=s).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=x(u.prototype,"transform",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.mat4.create()}}),a=u))||a)},"./sof/hull/EveSOFDataHullLocatorSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLocatorSet",(function(){return x}));var n,i,o,a,u,c,l,s,f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var x=(n=f.meta.type("EveSOFDataHullLocatorSet"),i=f.meta.string,o=f.meta.list("EveSOFDataTransform"),n((s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,e);var t=b(r);function r(){var e;y(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(e=t.call.apply(t,[this].concat(i)),"name",c,v(e)),d(e,"locators",l,v(e)),e}return r}(f.meta.Model),c=w((u=s).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=w(u.prototype,"locators",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=u))||a)},"./sof/hull/EveSOFDataHullPlaneSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullPlaneSet",(function(){return C}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S=r("./global/utils/index.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var C=(n=S.meta.type("EveSOFDataHullPlaneSet"),i=S.meta.string,o=S.meta.uint,a=S.meta.list("EveSOFDataHullPlaneSetItem"),u=S.meta.path,c=S.meta.path,l=S.meta.path,s=S.meta.boolean,f=S.meta.notImplemented,p=S.meta.uint,n((z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(r,e);var t=R(r);function r(){var e;T(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return E(e=t.call.apply(t,[this].concat(i)),"name",m,D(e)),E(e,"atlasSize",b,D(e)),E(e,"items",h,D(e)),E(e,"layer1MapResPath",v,D(e)),E(e,"layer2MapResPath",g,D(e)),E(e,"maskMapResPath",w,D(e)),E(e,"skinned",x,D(e)),E(e,"usage",_,D(e)),e}return r}(S.meta.Model),m=M((y=z).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=M(y.prototype,"atlasSize",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=M(y.prototype,"items",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=M(y.prototype,"layer1MapResPath",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=M(y.prototype,"layer2MapResPath",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=M(y.prototype,"maskMapResPath",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=M(y.prototype,"skinned",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=M(y.prototype,"usage",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=y))||d)},"./sof/hull/EveSOFDataHullPlaneSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullPlaneSetItem",(function(){return Q}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F=r("./global/utils/index.js"),B=r("./global/math/index.js");function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var i=K(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return W(this,r)}}function W(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Q=(n=F.meta.type("EveSOFDataHullPlaneSetItem"),i=F.meta.float,o=F.meta.float,a=F.meta.uint,u=F.meta.uint,c=F.meta.color,l=F.meta.float,s=F.meta.uint,f=F.meta.vector4,p=F.meta.vector4,d=F.meta.vector4,y=F.meta.vector4,m=F.meta.uint,b=F.meta.vector3,h=F.meta.float,v=F.meta.quaternion,g=F.meta.vector3,n((G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(r,e);var t=H(r);function r(){var e;V(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return U(e=t.call.apply(t,[this].concat(i)),"blinkRate",_,X(e)),U(e,"blinkPhase",z,X(e)),U(e,"blinkMode",S,X(e)),U(e,"boneIndex",j,X(e)),U(e,"color",E,X(e)),U(e,"dutyCycle",T,X(e)),U(e,"groupIndex",O,X(e)),U(e,"layer1Scroll",R,X(e)),U(e,"layer1Transform",P,X(e)),U(e,"layer2Scroll",D,X(e)),U(e,"layer2Transform",A,X(e)),U(e,"maskMapAtlasIndex",M,X(e)),U(e,"position",C,X(e)),U(e,"rate",k,X(e)),U(e,"rotation",I,X(e)),U(e,"scaling",L,X(e)),e}return r}(F.meta.Model),_=Y((x=G).prototype,"blinkRate",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=Y(x.prototype,"blinkPhase",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=Y(x.prototype,"blinkMode",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=Y(x.prototype,"boneIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=Y(x.prototype,"color",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec4.create()}}),T=Y(x.prototype,"dutyCycle",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=Y(x.prototype,"groupIndex",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),R=Y(x.prototype,"layer1Scroll",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec4.create()}}),P=Y(x.prototype,"layer1Transform",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec4.create()}}),D=Y(x.prototype,"layer2Scroll",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec4.create()}}),A=Y(x.prototype,"layer2Transform",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec4.create()}}),M=Y(x.prototype,"maskMapAtlasIndex",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=Y(x.prototype,"position",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec3.create()}}),k=Y(x.prototype,"rate",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=Y(x.prototype,"rotation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.quat.create()}}),L=Y(x.prototype,"scaling",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec3.fromValues(1,1,1)}}),w=x))||w)},"./sof/hull/EveSOFDataHullSoundEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSoundEmitter",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js"),b=r("./global/math/index.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=m.meta.type("EveSOFDataHullSoundEmitter"),i=m.meta.string,o=m.meta.string,a=m.meta.vector3,u=m.meta.quaternion,n((y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,e);var t=x(r);function r(){var e;g(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return v(e=t.call.apply(t,[this].concat(i)),"name",s,z(e)),v(e,"prefix",f,z(e)),v(e,"position",p,z(e)),v(e,"rotation",d,z(e)),e}return r}(m.meta.Model),s=j((l=y).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=j(l.prototype,"prefix",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=j(l.prototype,"position",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec3.create()}}),d=j(l.prototype,"rotation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.quat.create()}}),c=l))||c)},"./sof/hull/EveSOFDataHullSpotlightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpotlightSet",(function(){return R}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g=r("./global/utils/index.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R=(n=g.meta.type("EveSOFDataHullSpotlightSet"),i=g.meta.string,o=g.meta.path,a=g.meta.path,u=g.meta.list("EveSOFDataHullSpotlightSetItem"),c=g.meta.boolean,l=g.meta.float,n((v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(r,e);var t=S(r);function r(){var e;_(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return x(e=t.call.apply(t,[this].concat(i)),"name",p,E(e)),x(e,"coneTextureResPath",d,E(e)),x(e,"glowTextureResPath",y,E(e)),x(e,"items",m,E(e)),x(e,"skinned",b,E(e)),x(e,"zOffset",h,E(e)),e}return r}(g.meta.Model),p=O((f=v).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=O(f.prototype,"coneTextureResPath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=O(f.prototype,"glowTextureResPath",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=O(f.prototype,"items",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=O(f.prototype,"skinned",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=O(f.prototype,"zOffset",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=f))||s)},"./sof/hull/EveSOFDataHullSpotlightSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpotlightSetItem",(function(){return C}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z=r("./global/utils/index.js"),S=r("./global/math/index.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var C=(n=z.meta.type("EveSOFDataHullSpotlightSetItem"),i=z.meta.uint,o=z.meta.boolean,a=z.meta.float,u=z.meta.float,c=z.meta.uint,l=z.meta.float,s=z.meta.vector3,f=z.meta.matrix4,n((_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(r,e);var t=R(r);function r(){var e;T(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return E(e=t.call.apply(t,[this].concat(i)),"boneIndex",y,D(e)),E(e,"boosterGainInfluence",m,D(e)),E(e,"coneIntensity",b,D(e)),E(e,"flareIntensity",h,D(e)),E(e,"groupIndex",v,D(e)),E(e,"spriteIntensity",g,D(e)),E(e,"spriteScale",w,D(e)),E(e,"transform",x,D(e)),e}return r}(z.meta.Model),y=M((d=_).prototype,"boneIndex",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=M(d.prototype,"boosterGainInfluence",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=M(d.prototype,"coneIntensity",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=M(d.prototype,"flareIntensity",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=M(d.prototype,"groupIndex",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),g=M(d.prototype,"spriteIntensity",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=M(d.prototype,"spriteScale",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.vec3.fromValues(1,1,1)}}),x=M(d.prototype,"transform",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.mat4.create()}}),p=d))||p)},"./sof/hull/EveSOFDataHullSpriteLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteLineSet",(function(){return j}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=m.meta.type("EveSOFDataHullSpriteLineSet"),i=m.meta.string,o=m.meta.list("EveSOFDataHullSpriteLineSetItem"),a=m.meta.boolean,u=m.meta.string,n((y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t=w(r);function r(){var e;v(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return h(e=t.call.apply(t,[this].concat(i)),"name",s,_(e)),h(e,"items",f,_(e)),h(e,"skinned",p,_(e)),h(e,"visibilityGroup",d,_(e)),e}return r}(m.meta.Model),s=S((l=y).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=S(l.prototype,"items",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=S(l.prototype,"skinned",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=S(l.prototype,"visibilityGroup",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=l))||c)},"./sof/hull/EveSOFDataHullSpriteLineSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteLineSetItem",(function(){return K}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L=r("./global/utils/index.js"),G=r("./global/math/index.js");function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=W(e);if(t){var i=W(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return q(this,r)}}function q(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?H(e):t}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var K=(n=L.meta.type("EveSOFDataHullSpriteLineSetItem"),i=L.meta.float,o=L.meta.float,a=L.meta.float,u=L.meta.uint,c=L.meta.uint,l=L.meta.float,s=L.meta.uint,f=L.meta.float,p=L.meta.boolean,d=L.meta.float,y=L.meta.float,m=L.meta.vector3,b=L.meta.quaternion,h=L.meta.vector3,v=L.meta.float,n((I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(r,e);var t=V(r);function r(){var e;N(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return B(e=t.call.apply(t,[this].concat(i)),"blinkPhase",x,H(e)),B(e,"blinkPhaseShift",_,H(e)),B(e,"blinkRate",z,H(e)),B(e,"boneIndex",S,H(e)),B(e,"colorType",j,H(e)),B(e,"falloff",E,H(e)),B(e,"groupIndex",T,H(e)),B(e,"intensity",O,H(e)),B(e,"isCircle",R,H(e)),B(e,"maxScale",P,H(e)),B(e,"minScale",D,H(e)),B(e,"position",A,H(e)),B(e,"rotation",M,H(e)),B(e,"scaling",C,H(e)),B(e,"spacing",k,H(e)),e}return r}(L.meta.Model),x=X((w=I).prototype,"blinkPhase",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=X(w.prototype,"blinkPhaseShift",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=X(w.prototype,"blinkRate",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=X(w.prototype,"boneIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=X(w.prototype,"colorType",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=X(w.prototype,"falloff",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=X(w.prototype,"groupIndex",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),O=X(w.prototype,"intensity",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=X(w.prototype,"isCircle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=X(w.prototype,"maxScale",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=X(w.prototype,"minScale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=X(w.prototype,"position",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.vec3.create()}}),M=X(w.prototype,"rotation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.quat.create()}}),C=X(w.prototype,"scaling",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.vec3.fromValues(1,1,1)}}),k=X(w.prototype,"spacing",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=w))||g)},"./sof/hull/EveSOFDataHullSpriteSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteSet",(function(){return j}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=m.meta.type("EveSOFDataHullSpriteSet"),i=m.meta.string,o=m.meta.list("EveSOFDataHullSpriteSetItem"),a=m.meta.boolean,u=m.meta.string,n((y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t=w(r);function r(){var e;v(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return h(e=t.call.apply(t,[this].concat(i)),"name",s,_(e)),h(e,"items",f,_(e)),h(e,"skinned",p,_(e)),h(e,"visibilityGroup",d,_(e)),e}return r}(m.meta.Model),s=S((l=y).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=S(l.prototype,"items",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=S(l.prototype,"skinned",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=S(l.prototype,"visibilityGroup",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=l))||c)},"./sof/hull/EveSOFDataHullSpriteSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteSetItem",(function(){return G}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T=r("./global/utils/index.js"),O=r("./global/math/index.js");function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var G=(n=T.meta.type("EveSOFDataHullSpriteSetItem"),i=T.meta.float,o=T.meta.float,a=T.meta.uint,u=T.meta.uint,c=T.meta.float,l=T.meta.uint,s=T.meta.float,f=T.meta.float,p=T.meta.float,d=T.meta.vector3,n((E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(r,e);var t=M(r);function r(){var e;D(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return P(e=t.call.apply(t,[this].concat(i)),"blinkPhase",b,k(e)),P(e,"blinkRate",h,k(e)),P(e,"boneIndex",v,k(e)),P(e,"colorType",g,k(e)),P(e,"falloff",w,k(e)),P(e,"groupIndex",x,k(e)),P(e,"intensity",_,k(e)),P(e,"maxScale",z,k(e)),P(e,"minScale",S,k(e)),P(e,"position",j,k(e)),e}return r}(T.meta.Model),b=L((m=E).prototype,"blinkPhase",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=L(m.prototype,"blinkRate",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=L(m.prototype,"boneIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=L(m.prototype,"colorType",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=L(m.prototype,"falloff",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=L(m.prototype,"groupIndex",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),_=L(m.prototype,"intensity",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=L(m.prototype,"maxScale",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=L(m.prototype,"minScale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=L(m.prototype,"position",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.create()}}),y=m))||y)},"./sof/hull/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/hull/EveSOFDataHull.js");r.d(t,"EveSOFDataHull",(function(){return n.EveSOFDataHull}));var i=r("./sof/hull/EveSOFDataHullAnimation.js");r.d(t,"EveSOFDataHullAnimation",(function(){return i.EveSOFDataHullAnimation}));var o=r("./sof/hull/EveSOFDataHullArea.js");r.d(t,"EveSOFDataHullArea",(function(){return o.EveSOFDataHullArea}));var a=r("./sof/hull/EveSOFDataHullBanner.js");r.d(t,"EveSOFDataHullBanner",(function(){return a.EveSOFDataHullBanner}));var u=r("./sof/hull/EveSOFDataHullBannerLight.js");r.d(t,"EveSOFDataHullBannerLight",(function(){return u.EveSOFDataHullBannerLight}));var c=r("./sof/hull/EveSOFDataHullBooster.js");r.d(t,"EveSOFDataHullBooster",(function(){return c.EveSOFDataHullBooster}));var l=r("./sof/hull/EveSOFDataHullBoosterItem.js");r.d(t,"EveSOFDataHullBoosterItem",(function(){return l.EveSOFDataHullBoosterItem}));var s=r("./sof/hull/EveSOFDataHullChild.js");r.d(t,"EveSOFDataHullChild",(function(){return s.EveSOFDataHullChild}));var f=r("./sof/hull/EveSOFDataHullController.js");r.d(t,"EveSOFDataHullController",(function(){return f.EveSOFDataHullController}));var p=r("./sof/hull/EveSOFDataHullDecalSet.js");r.d(t,"EveSOFDataHullDecalSet",(function(){return p.EveSOFDataHullDecalSet}));var d=r("./sof/hull/EveSOFDataHullDecalSetItem.js");r.d(t,"EveSOFDataHullDecalSetItem",(function(){return d.EveSOFDataHullDecalSetItem}));var y=r("./sof/hull/EveSOFDataHullHazeSet.js");r.d(t,"EveSOFDataHullHazeSet",(function(){return y.EveSOFDataHullHazeSet}));var m=r("./sof/hull/EveSOFDataHullHazeSetItem.js");r.d(t,"EveSOFDataHullHazeSetItem",(function(){return m.EveSOFDataHullHazeSetItem}));var b=r("./sof/hull/EveSOFDataHullLightSet.js");r.d(t,"EveSOFDataHullLightSet",(function(){return b.EveSOFDataHullLightSet}));var h=r("./sof/hull/EveSOFDataHullLightSetItem.js");r.d(t,"EveSOFDataHullLightSetItem",(function(){return h.EveSOFDataHullLightSetItem}));var v=r("./sof/hull/EveSOFDataHullLightSetSpotLight.js");r.d(t,"EveSOFDataHullLightSetSpotLight",(function(){return v.EveSOFDataHullLightSetSpotLight}));var g=r("./sof/hull/EveSOFDataHullLightSetTexturedPointLight.js");r.d(t,"EveSOFDataHullLightSetTexturedPointLight",(function(){return g.EveSOFDataHullLightSetTexturedPointLight}));var w=r("./sof/hull/EveSOFDataHullLocator.js");r.d(t,"EveSOFDataHullLocator",(function(){return w.EveSOFDataHullLocator}));var x=r("./sof/hull/EveSOFDataHullLocatorSet.js");r.d(t,"EveSOFDataHullLocatorSet",(function(){return x.EveSOFDataHullLocatorSet}));var _=r("./sof/hull/EveSOFDataHullPlaneSet.js");r.d(t,"EveSOFDataHullPlaneSet",(function(){return _.EveSOFDataHullPlaneSet}));var z=r("./sof/hull/EveSOFDataHullPlaneSetItem.js");r.d(t,"EveSOFDataHullPlaneSetItem",(function(){return z.EveSOFDataHullPlaneSetItem}));var S=r("./sof/hull/EveSOFDataHullSoundEmitter.js");r.d(t,"EveSOFDataHullSoundEmitter",(function(){return S.EveSOFDataHullSoundEmitter}));var j=r("./sof/hull/EveSOFDataHullSpotlightSet.js");r.d(t,"EveSOFDataHullSpotlightSet",(function(){return j.EveSOFDataHullSpotlightSet}));var E=r("./sof/hull/EveSOFDataHullSpotlightSetItem.js");r.d(t,"EveSOFDataHullSpotlightSetItem",(function(){return E.EveSOFDataHullSpotlightSetItem}));var T=r("./sof/hull/EveSOFDataHullSpriteLineSet.js");r.d(t,"EveSOFDataHullSpriteLineSet",(function(){return T.EveSOFDataHullSpriteLineSet}));var O=r("./sof/hull/EveSOFDataHullSpriteLineSetItem.js");r.d(t,"EveSOFDataHullSpriteLineSetItem",(function(){return O.EveSOFDataHullSpriteLineSetItem}));var R=r("./sof/hull/EveSOFDataHullSpriteSet.js");r.d(t,"EveSOFDataHullSpriteSet",(function(){return R.EveSOFDataHullSpriteSet}));var P=r("./sof/hull/EveSOFDataHullSpriteSetItem.js");r.d(t,"EveSOFDataHullSpriteSetItem",(function(){return P.EveSOFDataHullSpriteSetItem}))},"./sof/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/legacy/index.js");r.d(t,"EveSOF",(function(){return n.EveSOF}));var i=r("./sof/faction/index.js");r.d(t,"EveSOFDataFaction",(function(){return i.EveSOFDataFaction})),r.d(t,"EveSOFDataFactionChild",(function(){return i.EveSOFDataFactionChild})),r.d(t,"EveSOFDataFactionColorSet",(function(){return i.EveSOFDataFactionColorSet})),r.d(t,"ErrSOFFactionColorSetTypeUnknown",(function(){return i.ErrSOFFactionColorSetTypeUnknown})),r.d(t,"ErrSOFFactionColorSetTypeNotFound",(function(){return i.ErrSOFFactionColorSetTypeNotFound})),r.d(t,"EveSOFDataFactionPlaneSet",(function(){return i.EveSOFDataFactionPlaneSet})),r.d(t,"EveSOFDataFactionSpotlightSet",(function(){return i.EveSOFDataFactionSpotlightSet})),r.d(t,"EveSOFDataFactionVisibilityGroupSet",(function(){return i.EveSOFDataFactionVisibilityGroupSet}));var o=r("./sof/generic/index.js");r.d(t,"EveSOFDataGeneric",(function(){return o.EveSOFDataGeneric})),r.d(t,"ErrSOFAreaShaderNotFound",(function(){return o.ErrSOFAreaShaderNotFound})),r.d(t,"ErrSOFDecalShaderNotFound",(function(){return o.ErrSOFDecalShaderNotFound})),r.d(t,"ErrSOFMaterialPrefixNotFound",(function(){return o.ErrSOFMaterialPrefixNotFound})),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",(function(){return o.ErrSOFPatternMaterialPrefixNotFound})),r.d(t,"EveSOFDataGenericDamage",(function(){return o.EveSOFDataGenericDamage})),r.d(t,"EveSOFDataGenericDecalShader",(function(){return o.EveSOFDataGenericDecalShader})),r.d(t,"EveSOFDataGenericHullDamage",(function(){return o.EveSOFDataGenericHullDamage})),r.d(t,"EveSOFDataGenericShader",(function(){return o.EveSOFDataGenericShader})),r.d(t,"EveSOFDataGenericString",(function(){return o.EveSOFDataGenericString})),r.d(t,"EveSOFDataGenericSwarm",(function(){return o.EveSOFDataGenericSwarm})),r.d(t,"EveSOFDataGenericVariant",(function(){return o.EveSOFDataGenericVariant})),r.d(t,"EveSOFDataVisibilityGroup",(function(){return o.EveSOFDataVisibilityGroup}));var a=r("./sof/hull/index.js");r.d(t,"EveSOFDataHull",(function(){return a.EveSOFDataHull})),r.d(t,"EveSOFDataHullAnimation",(function(){return a.EveSOFDataHullAnimation})),r.d(t,"EveSOFDataHullArea",(function(){return a.EveSOFDataHullArea})),r.d(t,"EveSOFDataHullBanner",(function(){return a.EveSOFDataHullBanner})),r.d(t,"EveSOFDataHullBannerLight",(function(){return a.EveSOFDataHullBannerLight})),r.d(t,"EveSOFDataHullBooster",(function(){return a.EveSOFDataHullBooster})),r.d(t,"EveSOFDataHullBoosterItem",(function(){return a.EveSOFDataHullBoosterItem})),r.d(t,"EveSOFDataHullChild",(function(){return a.EveSOFDataHullChild})),r.d(t,"EveSOFDataHullController",(function(){return a.EveSOFDataHullController})),r.d(t,"EveSOFDataHullDecalSet",(function(){return a.EveSOFDataHullDecalSet})),r.d(t,"EveSOFDataHullDecalSetItem",(function(){return a.EveSOFDataHullDecalSetItem})),r.d(t,"EveSOFDataHullHazeSet",(function(){return a.EveSOFDataHullHazeSet})),r.d(t,"EveSOFDataHullHazeSetItem",(function(){return a.EveSOFDataHullHazeSetItem})),r.d(t,"EveSOFDataHullLightSet",(function(){return a.EveSOFDataHullLightSet})),r.d(t,"EveSOFDataHullLightSetItem",(function(){return a.EveSOFDataHullLightSetItem})),r.d(t,"EveSOFDataHullLightSetSpotLight",(function(){return a.EveSOFDataHullLightSetSpotLight})),r.d(t,"EveSOFDataHullLightSetTexturedPointLight",(function(){return a.EveSOFDataHullLightSetTexturedPointLight})),r.d(t,"EveSOFDataHullLocator",(function(){return a.EveSOFDataHullLocator})),r.d(t,"EveSOFDataHullLocatorSet",(function(){return a.EveSOFDataHullLocatorSet})),r.d(t,"EveSOFDataHullPlaneSet",(function(){return a.EveSOFDataHullPlaneSet})),r.d(t,"EveSOFDataHullPlaneSetItem",(function(){return a.EveSOFDataHullPlaneSetItem})),r.d(t,"EveSOFDataHullSoundEmitter",(function(){return a.EveSOFDataHullSoundEmitter})),r.d(t,"EveSOFDataHullSpotlightSet",(function(){return a.EveSOFDataHullSpotlightSet})),r.d(t,"EveSOFDataHullSpotlightSetItem",(function(){return a.EveSOFDataHullSpotlightSetItem})),r.d(t,"EveSOFDataHullSpriteLineSet",(function(){return a.EveSOFDataHullSpriteLineSet})),r.d(t,"EveSOFDataHullSpriteLineSetItem",(function(){return a.EveSOFDataHullSpriteLineSetItem})),r.d(t,"EveSOFDataHullSpriteSet",(function(){return a.EveSOFDataHullSpriteSet})),r.d(t,"EveSOFDataHullSpriteSetItem",(function(){return a.EveSOFDataHullSpriteSetItem}));var u=r("./sof/pattern/index.js");r.d(t,"EveSOFDataPattern",(function(){return u.EveSOFDataPattern})),r.d(t,"ErrSOFProjectionNotFound",(function(){return u.ErrSOFProjectionNotFound})),r.d(t,"EveSOFDataPatternLayer",(function(){return u.EveSOFDataPatternLayer})),r.d(t,"EveSOFDataPatternPerHull",(function(){return u.EveSOFDataPatternPerHull})),r.d(t,"EveSOFDataPatternTransform",(function(){return u.EveSOFDataPatternTransform}));var c=r("./sof/race/index.js");r.d(t,"EveSOFDataRace",(function(){return c.EveSOFDataRace})),r.d(t,"EveSOFDataRaceDamage",(function(){return c.EveSOFDataRaceDamage}));var l=r("./sof/shared/index.js");r.d(t,"EveSOFDataArea",(function(){return l.EveSOFDataArea})),r.d(t,"ErrSOFAreaTypeUnknown",(function(){return l.ErrSOFAreaTypeUnknown})),r.d(t,"ErrSOFAreaTypeNotFound",(function(){return l.ErrSOFAreaTypeNotFound})),r.d(t,"EveSOFDataAreaMaterial",(function(){return l.EveSOFDataAreaMaterial})),r.d(t,"EveSOFDataBooster",(function(){return l.EveSOFDataBooster})),r.d(t,"EveSOFDataBoosterShape",(function(){return l.EveSOFDataBoosterShape})),r.d(t,"EveSOFDataDecalIndexBuffer",(function(){return l.EveSOFDataDecalIndexBuffer})),r.d(t,"EveSOFDataInstancedMesh",(function(){return l.EveSOFDataInstancedMesh})),r.d(t,"EveSOFDataLogo",(function(){return l.EveSOFDataLogo})),r.d(t,"EveSOFDataLogoSet",(function(){return l.EveSOFDataLogoSet})),r.d(t,"ErrSOFLogoSetTypeUnknown",(function(){return l.ErrSOFLogoSetTypeUnknown})),r.d(t,"ErrSOFLogoSetTypeNotFound",(function(){return l.ErrSOFLogoSetTypeNotFound})),r.d(t,"EveSOFDataMaterial",(function(){return l.EveSOFDataMaterial})),r.d(t,"EveSOFDataParameter",(function(){return l.EveSOFDataParameter})),r.d(t,"EveSOFDataTexture",(function(){return l.EveSOFDataTexture})),r.d(t,"EveSOFDataTransform",(function(){return l.EveSOFDataTransform}));var s=r("./sof/EveSOFData.js");r.d(t,"EveSOFData",(function(){return s.EveSOFData})),r.d(t,"ErrSOFHullNotFound",(function(){return s.ErrSOFHullNotFound})),r.d(t,"ErrSOFFactionNotFound",(function(){return s.ErrSOFFactionNotFound})),r.d(t,"ErrSOFRaceNotFound",(function(){return s.ErrSOFRaceNotFound})),r.d(t,"ErrSOFMaterialNotFound",(function(){return s.ErrSOFMaterialNotFound})),r.d(t,"ErrSOFPatternNotFound",(function(){return s.ErrSOFPatternNotFound})),r.d(t,"ErrSOFDNAFormatInvalid",(function(){return s.ErrSOFDNAFormatInvalid})),r.d(t,"ErrSOFResPathInsertInvalid",(function(){return s.ErrSOFResPathInsertInvalid}))},"./sof/legacy/EveSOF.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOF",(function(){return p}));var n=r("./global/index.js"),i=r("./global/math/index.js"),o=r("./global/utils/index.js"),a=r("./curve/index.js"),u=r("./core/index.js"),c=r("./eve/index.js"),l=r("./sof/EveSOFData.js");function s(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,u,"next",e)}function u(e){s(o,n,i,a,u,"throw",e)}a(void 0)}))}}function p(){var e=this,t=this,r=null,s=null;function p(e){return e?Object(o.get)(r.generic,"shaderPrefixAnimated",""):Object(o.get)(r.generic,"shaderPrefix","")}function d(e,t,r,n,i){var a=null;if(Object(o.get)(n,"resPathInsert","").length&&(a=n.resPathInsert),"respathinsert"in i&&1===i.respathinsert.length){if("none"===i.respathinsert[0])return e;a=i.respathinsert[0]}if("MaterialMap"===t||"PaintMaskMap"===t||"PmdgMap"===t){var u=e.lastIndexOf("/"),c=e;if(u>=0&&(c=e.substr(0,u+1)+a+"/"+e.substr(u+1)),(u=c.lastIndexOf("_"))>=0){c=c.substr(0,u)+"_"+a+c.substr(u);var l=Object(o.get)(r,"textureOverrides",{});if(t in l&&n.name in l[t])return c}}return e}function y(e,t){for(var r=0;r<e.length;++r)if(t.substr(0,e[r].length)===e[r])return r;return null}function m(e,t,n,i){var a,u,c,l;return"mesh"in n&&null!==(u=y(a=r.generic.materialPrefixes,e))&&u<n.mesh.length&&0==(Object(o.get)(t,"blockedMaterials",0)&1<<u)&&(c=Object(o.get)(r.material,n.mesh[u],null))?(l=e.substr(a[u].length),Object(o.get)(c.parameters,l,void 0)):(u=y(a=r.generic.patternMaterialPrefixes,e),"pattern"in n&&null!==u&&1+u<n.pattern.length&&(c=Object(o.get)(r.material,n.pattern[1+u],null))||null!==u&&(c=Object(o.get)(r.material,i.defaultPatternLayer1MaterialName,null))?(l=e.substr(a[u].length),Object(o.get)(c.parameters,l,void 0)):void 0)}function b(e){switch(e){case 2:return 4;case 1:return 3;default:return 1}}function h(e,t,n,i,a,c,l,s,f){for(var y,h,v,g,w=Object(o.get)(n,t,[]),x=0;x<w.length;++x){var _=w[x],z=new u.Tw2Effect;if(f)for(var S=0;S<2;S++){var j=f[S];if(j){var E=j.parameters,T=E.PatternMaskMap,O=E.DiffuseColor,R=E.FresnelColor,P=E.Gloss;z.parameters[T.name]=T,z.parameters[O.name]=O,z.parameters[R.name]=R,z.parameters[P.name]=P}else console.error("Missing mask "+S)}z.effectFilePath=r.generic.areaShaderLocation+(y=s||_.shader,h=n.isSkinned,v=void 0,g=void 0,v=p(h),g=(y="/"+y).lastIndexOf("/"),y.substr(0,g+1)+v+y.substr(g+1));for(var D=Object(o.get)(Object(o.get)(r.generic.areaShaders,_.shader,{}),"parameters",[]),A=0;A<D.length;++A){var M=D[A],C=m(M,_,l,a);(C=(C=(C=(C=C||Object(o.get)(Object(o.get)(Object(o.get)(r.generic.hullAreas,_.name,{}),"parameters",{}),M))||Object(o.get)(Object(o.get)(Object(o.get)(a.hullAreas,_.name,{}),"parameters",{}),M))||Object(o.get)(Object(o.get)(Object(o.get)(i.areas,_.name,{}),"parameters",{}),M))||Object(o.get)(Object(o.get)(_,"parameters",{}),M))&&(z.parameters[M]?z.parameters[M].SetValue(C):z.parameters[M]=new u.Tw2Vector4Parameter(M,C))}var k=Object(o.get)(_,"textures",{});for(var I in k)if(k.hasOwnProperty(I)){var L=d(k[I],I,_,i,l);z.parameters[I]?z.parameters[I].SetValue(L):z.parameters[I]=new u.Tw2TextureParameter(I,L)}for(var G=0;G<c.layers.length;++G){var F=c.layers[G]?c.layers[G].textureName:"";if(F&&!z.parameters[F]){var B=new u.Tw2TextureParameter(c.layers[G].textureName);B.resourcePath=c.layers[G].textureResFilePath,B.useAllOverrides=!0,B.addressUMode=b(Object(o.get)(c.layers[G],"projectionTypeU",0)),B.addressVMode=b(Object(o.get)(c.layers[G],"projectionTypeV",0)),B.Initialize(),z.parameters[c.layers[G].textureName]=B}}var N=Object(o.get)(Object(o.get)(r.generic.areaShaders,_.shader,{}),"defaultTextures",{});for(var U in N)N.hasOwnProperty(U)&&(U in z.parameters||(z.parameters[U]=new u.Tw2TextureParameter(U,N[U])));z.Initialize();var V=new u.Tw2MeshArea;V.name=_.name,V.effect=z,V.index=Object(o.get)(_,"index",0),V.count=Object(o.get)(_,"count",1),e.push(V)}}function v(e,t,r,n,i,a){var l=e.mesh||new u.Tw2Mesh;l.geometryResPath=t.geometryResFilePath,e.mesh!==l?(e.boundingSphereCenter[0]=t.boundingSphere[0],e.boundingSphereCenter[1]=t.boundingSphere[1],e.boundingSphereCenter[2]=t.boundingSphere[2],e.boundingSphereRadius=t.boundingSphere[3]):l.EmptyAreas();var s=e.customMasks;s[0]=s[0]||new c.EveCustomMask,s[1]=s[1]||new c.EveCustomMask;var f=[t,r,n,a,i,void 0,s];h.apply(void 0,[Object(o.get)(l,"opaqueAreas",[]),"opaqueAreas"].concat(f)),h.apply(void 0,[Object(o.get)(l,"transparentAreas",[]),"transparentAreas"].concat(f)),h.apply(void 0,[Object(o.get)(l,"additiveAreas",[]),"additiveAreas"].concat(f)),h.apply(void 0,[Object(o.get)(l,"decalAreas",[]),"decalAreas"].concat(f)),h.apply(void 0,[Object(o.get)(l,"depthAreas",[]),"depthAreas"].concat(f)),e.mesh!==l&&("shapeEllipsoidCenter"in t&&(e.shapeEllipsoidCenter=t.shapeEllipsoidCenter),"shapeEllipsoidRadius"in t&&(e.shapeEllipsoidRadius=t.shapeEllipsoidRadius)),e.mesh=l,l.Initialize()}function g(e,t,n){var i={patterns:[],layers:[]};if("pattern"in n){for(var a={},u=0;u<r.pattern.length;++u)if(r.pattern[u].name===n.pattern[0]){a=r.pattern[u];break}i.layers.push(Object(o.get)(a,"layer1",{})),i.layers.push(Object(o.get)(a,"layer2",{}));for(var c=Object(o.get)(a,"projections",[]),l={},s=0;s<c.length;++s)if(c[s].name===e.name){l=c[s];break}i.patterns.push(Object(o.get)(l,"transformLayer1",{})),i.patterns.push(Object(o.get)(l,"transformLayer2",{}))}else{var f=Object(o.get)(t,"defaultPattern",{});i.layers.push(Object(o.get)(f,"layer1",{})),i.layers.push(Object(o.get)(f,"layer2",{}));var p=Object(o.get)(e,"defaultPattern",{});i.patterns.push(Object(o.get)(p,"transformLayer1",{})),i.patterns.push(Object(o.get)(p,"transformLayer2",{}))}return i}function w(e,t,r,n,i,a){for(var l=Object(o.get)(t,"instancedMeshes",[]),s=0;s<l.length;++s){var f=l[s],p=new u.Tw2InstancedMesh;p.instanceGeometryResPath=f.instanceGeometryResPath,p.geometryResPath=f.geometryResPath,p.Initialize(),h(Object(o.get)(p,"opaqueAreas",[]),"opaqueAreas",t,r,n,a,i,f.shader);var d=new c.EveChildMesh;d.mesh=p,e.effectChildren.push(d)}}function x(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.patterns,n=void 0===r?[]:r,o=t.layers,a=void 0===o?[]:o,u=0;u<2;++u){var l=n[u]||{},s=a[u]||{},f=l.rotation,p=void 0===f?i.quat.create():f,d=l.scaling,y=void 0===d?i.vec3.fromValues(1,1,1):d,m=l.position,h=void 0===m?i.vec3.create():m,v=l.isMirrored,g=void 0!==v&&v,w=s.display,x=void 0===w?!!a[u].textureName:w,_=s.materialSource,z=void 0===_?0:_,S=s.textureName,j=void 0===S?"PatternMask".concat(u+1,"Map"):S,E=s.textureResFilePath,T=void 0===E?"res:/texture/global/black.dds.0.png":E,O=s.projectionTypeU,R=void 0===O?0:O,P=s.projectionTypeV,D=void 0===P?0:P,A=s.isTargetMtl1,M=void 0===A||A,C=s.isTargetMtl2,k=void 0===C||C,I=s.isTargetMtl3,L=void 0===I||I,G=s.isTargetMtl4,F=void 0===G||G,B=e.customMasks[u]||new c.EveCustomMask;B.name="Pattern".concat(u+1),B.display=x,i.quat.copy(B.rotation,p),i.vec3.copy(B.scaling,y),i.vec3.copy(B.translation,h),i.vec4.set(B.targetMaterials,M?1:0,k?1:0,L?1:0,F?1:0),B.materialIndex=z,B.isMirrored=!!g;var N=B.parameters,U=N.PatternMaskMap,V=N.DiffuseColor,q=N.FresnelColor,H=N.Gloss;U.name=j,U.resourcePath=T,U.useAllOverrides=!0,U.addressUMode=b(R),U.addressVMode=b(D),U.Initialize();var W="PMtl".concat(u+1);V.name="".concat(W,"DiffuseColor"),q.name="".concat(W,"FresnelColor"),H.name="".concat(W,"Gloss"),B.Initialize(),e.customMasks[u]!==B&&e.customMasks.push(B)}}function _(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object(o.get)(t,"hullDecals",[]),a=0;a<i.length;++a){var u=i[a],l=z(n.decals,u.groupIndex);if(!l||l.isVisible){var s=l&&l.shader||u.shader;if(s){var f=r.generic.decalShaderLocation+"/"+p(!1)+s,d=Object.assign({},u.parameters),y=Object.assign(Object(o.get)(Object(o.get)(r.generic.decalShaders,s,{}),"defaultTextures",{}));l&&(Object.assign(d,l.parameters),Object.assign(y,l.textures)),Object.assign(y,u.textures),e.decals.push(c.EveSpaceObjectDecal.from({name:u.name,groupIndex:u.groupIndex,parentBoneIndex:u.boneIndex,indexBuffer:u.indexBuffer,position:u.position,rotation:u.rotation,scaling:u.scaling,effect:{effectFilePath:f,parameters:d,textures:y}}))}}}}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(!e)return null;var r="group".concat(t);return e[r]?e[r]:null}function S(e,r,n){for(var a=Object(o.get)(r,"spriteSets",[]),u=Object(o.get)(n,"spriteSets",{}),l=0;l<a.length;++l){for(var f=a[l],p=Object(o.get)(f,"items",[]),d=[],y=0;y<p.length;y++){var m=Object.assign({blinkRate:.1,maxScale:10,minScale:1},p[y]),b=z(u,m.groupIndex);b&&(m.groupName=b.name,Object(o.assignIfExists)(m,b,"color")),(!t.SKIP_EMPTY_ITEMS||m.color&&!i.vec3.isEmpty(m.color))&&d.push(m)}t.SKIP_EMPTY_ITEMS&&!d.length||e.spriteSets.push(c.EveSpriteSet.from({name:f.name,useQuads:!0,skinned:!(!r.isSkinned||!f.skinned),effect:s,items:d}))}}this.SKIP_EMPTY_ITEMS=!0;function j(e,r,n){for(var i=Object(o.get)(r,"spotlightSets",[]),a=Object(o.get)(n,"spotlightSets",{}),u=0;u<i.length;++u){for(var l=i[u],s=Object(o.get)(l,"items",[]),f=l.skinned,p=[],d=0;d<s.length;++d){var y=Object.assign({},s[d]),m=z(a,y.groupIndex);m&&Object(o.assignIfExists)(y,m,["coneColor","spriteColor","flareColor"]),t.SKIP_EMPTY_ITEMS&&!m||p.push(y)}t.SKIP_EMPTY_ITEMS&&!p.length||e.spotlightSets.push(c.EveSpotlightSet.from({name:l.name,items:p,coneEffect:{effectFilePath:f?"res:/graphics/effect/managed/space/spaceobject/fx/skinned_spotlightcone.fx":"res:/graphics/effect/managed/space/spaceobject/fx/spotlightcone.fx",parameters:{TextureMap:l.coneTextureResPath,zOffset:Object(o.get)(l,"zOffset",0)}},glowEffect:{effectFilePath:f?"res:/graphics/effect/managed/space/spaceobject/fx/skinned_spotlightglow.fx":"res:/graphics/effect/managed/space/spaceobject/fx/spotlightglow.fx",parameters:{TextureMap:l.glowTextureResPath}}}))}}function E(e,r,n){for(var a=Object(o.get)(r,"planeSets",[]),u=Object(o.get)(n,"planeSets",{}),l=0;l<a.length;++l){for(var s=a[l],f=Object(o.get)(s,"items",[]),p=[],d=0;d<f.length;++d){var y=Object.assign({boneIndex:-1},f[d]),m=z(u,y.groupIndex);m&&Object(o.assignIfExists)(y,m,"color"),(!t.SKIP_EMPTY_ITEMS||y.color&&!i.vec3.isEmpty(y.color))&&p.push(y)}t.SKIP_EMPTY_ITEMS&&!p.length||e.planeSets.push(c.EvePlaneSet.from({name:s.name,items:p,effect:{effectFilePath:s.skinned?"res:/graphics/effect/managed/space/spaceobject/fx/skinned_planeglow.fx":"res:/graphics/effect/managed/space/spaceobject/fx/planeglow.fx",parameters:{PlaneData:Object(o.get)(s,"planeData",[1,0,0,0])},textures:{Layer1Map:s.layer1MapResPath,Layer2Map:s.layer2MapResPath,MaskMap:s.maskMapResPath}}}))}}function T(e,t,r){if(t.booster){for(var n=[0,0,0,0],i=Object(o.get)(r,"booster",{}),a=t.booster,u=Object(o.get)(a,"items",[]),l=0;l<u.length;++l)e.locators.push(c.EveLocator2.from({name:"locator_booster_"+(l+1),transform:u[l].transform,atlasIndex0:Object(o.get)(u[l],"atlasIndex0",0),atlasIndex1:Object(o.get)(u[l],"atlasIndex1",0)}));e.boosters=c.EveBoosterSet.from({glowScale:i.glowScale,symHaloScale:i.symHaloScale,haloScaleX:i.haloScaleX,haloScaleY:i.haloScaleY,haloColor:i.haloColor,glowColor:i.glowColor,warpGlowColor:i.warpGlowColor,warpHaloColor:i.warpHalpColor,trailColor:i.trailColor,trailSize:i.trailSize,effect:{effectFilePath:"res:/Graphics/Effect/Managed/Space/Booster/BoosterVolumetric.fx",parameters:{NoiseFunction0:Object(o.get)(i.shape0,"noiseFunction",0),NoiseSpeed0:Object(o.get)(i.shape0,"noiseSpeed",0),NoiseAmplitudeStart0:Object(o.get)(i.shape0,"noiseAmplitureStart",n),NoiseAmplitudeEnd0:Object(o.get)(i.shape0,"noiseAmplitureEnd",n),NoiseFrequency0:Object(o.get)(i.shape0,"noiseFrequency",n),Color0:Object(o.get)(i.shape0,"color",n),NoiseFunction1:Object(o.get)(i.shape1,"noiseFunction",0),NoiseSpeed1:Object(o.get)(i.shape1,"noiseSpeed",0),NoiseAmplitudeStart1:Object(o.get)(i.shape1,"noiseAmplitureStart",n),NoiseAmplitudeEnd1:Object(o.get)(i.shape1,"noiseAmplitureEnd",n),NoiseFrequency1:Object(o.get)(i.shape1,"noiseFrequency",n),Color1:Object(o.get)(i.shape1,"color",n),WarpNoiseFunction0:Object(o.get)(i.warpShape0,"noiseFunction",0),WarpNoiseSpeed0:Object(o.get)(i.warpShape0,"noiseSpeed",0),WarpNoiseAmplitudeStart0:Object(o.get)(i.warpShape0,"noiseAmplitureStart",n),WarpNoiseAmplitudeEnd0:Object(o.get)(i.warpShape0,"noiseAmplitureEnd",n),WarpNoiseFrequency0:Object(o.get)(i.warpShape0,"noiseFrequency",n),WarpColor0:Object(o.get)(i.warpShape0,"color",n),WarpNoiseFunction1:Object(o.get)(i.warpShape1,"noiseFunction",0),WarpNoiseSpeed1:Object(o.get)(i.warpShape1,"noiseSpeed",0),WarpNoiseAmplitudeStart1:Object(o.get)(i.warpShape1,"noiseAmplitureStart",n),WarpNoiseAmplitudeEnd1:Object(o.get)(i.warpShape1,"noiseAmplitureEnd",n),WarpNoiseFrequency1:Object(o.get)(i.warpShape1,"noiseFrequency",n),WarpColor1:Object(o.get)(i.warpShape1,"color",n),ShapeAtlasSize:[Object(o.get)(i,"shapeAtlasHeight",0),Object(o.get)(i,"shapeAtlasCount",0),0,0],BoosterScale:Object(o.get)(i,"scale",[1,1,1,1])},textures:{ShapeMap:i.shapeAtlasResPath,GradientMap0:i.gradient0ResPath,GradientMap1:i.gradient1ResPath,NoiseMap:"res:/Texture/Global/noise32cube_volume.dds.0.png"}},glows:{useQuads:!0,effect:{effectFilePath:"res:/Graphics/Effect/Managed/Space/Booster/BoosterGlowAnimated.fx",textures:{DiffuseMap:"res:/Texture/Particle/whitesharp.dds.0.png",NoiseMap:"res:/Texture/global/noise.dds.0.png"}}}})}}function O(e,t){for(var r=Object(o.get)(t,"locatorTurrets",[]),n=0;n<r.length;++n)e.locators.push(c.EveLocator2.from(r[n]))}function R(e,t,r,u){function c(t){return function(c){c.constructor.__isEffectChild?e.effectChildren.push(c):e.children.push(c),i.vec3.copy(c.translation,Object(o.get)(t,"translation",[0,0,0])),i.quat.copy(c.rotation,Object(o.get)(t,"rotation",[0,0,0,1])),i.vec3.copy(c.scaling,Object(o.get)(t,"scaling",[1,1,1]));var l=Object(o.get)(t,"id",-1);-1!==l&&u[l]&&function e(t,r,i){if(Array.isArray(t.particleEmitters)){for(var o=0;o<t.particleEmitters.length;++o)if("rate"in t.particleEmitters[o]){var u=new a.Tw2ValueBinding;u.sourceObject=i,u.sourceAttribute="currentValue",u.destinationObject=t.particleEmitters[o],u.destinationAttribute="rate",u.Initialize(),r.bindings.push(u)}for(o=0;o<t.children.length;++o)e(t.children[o],r,i)}else n.tw2.Warning({name:"Space object factory",message:"Unable to bind particle emitters: ".concat(t.constructor.name)})}(c,r,u[l])}}for(var l=Object(o.get)(t,"children",[]),s=0;s<l.length;++s){var f=l[s].redFilePath;f?n.tw2.Fetch(f).then(c(l[s])):n.tw2.Warning({name:"Space object factory",message:'No resource path found for "'.concat(t.name,'" child at index ').concat(s)})}}function P(e,t){for(var r=[],n=null,i=Object(o.get)(t,"animations",[]),u=0;u<i.length;++u)if(-1!==Object(o.get)(i[u],"id",-1)&&-1!==Object(o.get)(i[u],"startRate",-1)){n||(n=new a.Tw2CurveSet);var c=new a.Tw2ScalarCurve2;c.keys.push(new a.Tw2ScalarKey2),c.keys.push(new a.Tw2ScalarKey2),c.keys[0].value=Object(o.get)(i[u],"startRate",-1),c.keys[1].time=1,c.keys[1].value=Object(o.get)(i[u],"endRate",-1),c.Initialize(),n.curves.push(c),e.curveSets.push(n),r[Object(o.get)(i[u],"id",-1)]=c}return n&&n.Initialize(),[n,r]}function D(e,t,n){for(var i=-1,a=0;a<r.generic.materialPrefixes.length;++a)e.substr(0,r.generic.materialPrefixes[a].length)===r.generic.materialPrefixes[a]&&(i=a,e=e.substr(r.generic.materialPrefixes[a].length));if(-1!==i){var u=Object(o.get)(t,"materialUsageMtl"+(i+1),i);if(u>=0&&u<r.generic.materialPrefixes.length&&(e=r.generic.materialPrefixes[u]+e)in n.parameters)return n.parameters[e]}}var A,M=[0,0,0,0];function C(e,t,r,n){switch(n){case"overridable":return t||(r||M);case"half_overridable":return e.indexOf("GlowColor")>=0?r||M:t||(r||M);case"not_overridable":case"half_overridable_2":return r||M}return M}function k(e,t,n){var o=r.faction[t],a=r.faction[n],c=null;o&&o.areas&&"hull"in o.areas&&(c=o.areas.hull);var l=null;if(a&&a.areas&&"hull"in a.areas&&(l=a.areas.hull),(c||l)&&e.turretEffect){var s=e.turretEffect.parameters;for(var f in s)if(s.hasOwnProperty(f)){if(s[f].constructor.prototype!==u.Tw2Vector4Parameter.prototype)continue;var p=null,d=null;c&&(p=D(f,o,c)),l&&(d=D(f,o,c)),i.vec4.copy(s[f].value,C(f,p,d,e.turretEffect.name))}e.turretEffect.BindParameters()}}this.SetupTurretMaterial=function(e,t,r,n,i){return this.FetchTurretMaterial(e,t,r).then(n).catch(i)},this.FetchTurretMaterial=function(){var e=f(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.FetchSOF();case 2:return k(t,r,n),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),this.FetchSOF=(A=null,f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A||(s=u.Tw2Effect.from({effectFilePath:"res:/graphics/effect/managed/space/spaceobject/fx/blinkinglightspool.fx",parameters:{MainIntensity:1,GradientMap:"res:/texture/particle/whitesharp_gradient.dds.0.png"}}),A=n.tw2.Fetch("res:/dx9/model/spaceobjectfactory/data.red").then((function(e){return r=e})).catch((function(e){throw n.tw2.Error({name:"Space object factory",message:"Could not load data"}),e}))),e.abrupt("return",A);case 2:case"end":return e.stop()}}),e)}))));var I=function(){var t=f(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.FetchSOF();case 2:if(!(n=t.sent)[r]){t.next=5;break}return t.abrupt("return",n[r]);case 5:throw new Error("Invalid sof object (".concat(r,")"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var e=f(regeneratorRuntime.mark((function e(t,r,n){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:if(i=e.sent,!Object(o.isArray)(i)){e.next=13;break}a=0;case 5:if(!(a<i.length)){e.next=11;break}if(i[r].name!==t){e.next=8;break}return e.abrupt("return",i[r]);case 8:a++,e.next=5;break;case 11:e.next=15;break;case 13:if(!i[r]){e.next=15;break}return e.abrupt("return",i[r]);case 15:if(!n){e.next=17;break}throw new n({name:r});case 17:throw new Error("Invalid sof object key (".concat(t,":").concat(r,")"));case 18:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),G=function(){var e=f(regeneratorRuntime.mark((function e(t){var r,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:if(r=e.sent,n={},!Object(o.isArray)(r)){e.next=7;break}for(i=0;i<r.length;i++)n[r[i].name]=r[i].description||"";return e.abrupt("return",n);case 7:for(a in r)r.hasOwnProperty(a)&&(n[a]=r[a].description||"");return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var t=f(regeneratorRuntime.mark((function t(r,n){var i,o,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.FetchHull(r);case 2:i=n.projections,o=void 0===i?[]:i,a=0;case 4:if(!(a<o.length)){t.next=16;break}if(o[a].name!==r){t.next=13;break}return(u={}).name=n.name,u.layer1=n.layer1,u.layer2=n.layer2,u.transformLayer1=o[a].transformLayer1,u.transformLayer2=o[a].transformLayer2,t.abrupt("return",u);case 13:a++,t.next=4;break;case 16:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();this.FetchObject=function(){var t=f(regeneratorRuntime.mark((function t(r){var n,i,a,u,l,s,f,p,d,y,m,b;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(o.isDNA)(r)){t.next=2;break}throw new Error("Invalid DNA (".concat(r,")"));case 2:for(n=r.split(":"),i={},a=3;a<n.length;++a)u=n[a].split("?"),i[u[0]]=u[1].split(";");return t.next=6,e.FetchHull(n[0]);case 6:return l=t.sent,t.next=9,e.FetchFaction(n[1]);case 9:return s=t.sent,t.next=12,e.FetchRace(n[2]);case 12:if(f=t.sent,!i.mesh){t.next=21;break}p=0;case 15:if(!(p<i.mesh.length)){t.next=21;break}return t.next=18,e.FetchMaterial(i.mesh[p]);case 18:p++,t.next=15;break;case 21:if(!(i.pattern&&i.pattern.length>1)){t.next=29;break}d=1;case 23:if(!(d<i.pattern.length)){t.next=29;break}return t.next=26,e.FetchMaterial(i.pattern[d]);case 26:d++,t.next=23;break;case 29:return y=new(2===Object(o.get)(l,"buildClass",0)?c.EveSpaceObject:c.EveShip),m=g(l,f,i),x(y,m),v(y,l,s,f,i,m),_(y,l,s),S(y,l,s),j(y,l,s),E(y,l,s),T(y,l,f),O(y,l),b=P(y,l),R(y,l,b[0],b[1]),w(y,l,s,f,i,m),y.Initialize(),t.abrupt("return",y);case 43:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.FetchHull=function(){var e=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("hull",t,l.ErrSOFHullNotFound));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.FetchHullNames=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G("hull"));case 1:case"end":return e.stop()}}),e)}))),this.FetchHullPattern=function(){var t=f(regeneratorRuntime.mark((function t(r,n){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.FetchPattern(n);case 2:if(i=t.sent,!(o=F(r,i))){t.next=6;break}return t.abrupt("return",o);case 6:throw new Error("Invalid pattern for hull (".concat(r,":").concat(n,")"));case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),this.FetchHullPatternNames=function(){var e=f(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("pattern");case 2:return r=e.sent,n=[],r.forEach((function(e){for(var r=0;r<e.projections.length;r++)if(e.projections[r].name===t){n.push(e.name);break}})),n.sort(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.FetchHullBuildClass=function(){var t=f(regeneratorRuntime.mark((function t(r){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.split(":")[0],t.next=3,e.FetchHull(n);case 3:return i=t.sent,t.abrupt("return",2===i.buildClass?2:1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.FetchRace=function(){var e=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("race",t,l.ErrSOFRaceNotFound));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.FetchRaceNames=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G("race"));case 1:case"end":return e.stop()}}),e)}))),this.FetchFaction=function(){var e=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("faction",t,l.ErrSOFFactionNotFound));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.FetchFactionNames=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G("faction"));case 1:case"end":return e.stop()}}),e)}))),this.FetchMaterial=function(){var e=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("material",t,l.ErrSOFMaterialNotFound));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.FetchMaterialNames=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G("material"));case 1:case"end":return e.stop()}}),e)}))),this.FetchPattern=function(){var e=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("pattern",t,l.ErrSOFPatternNotFound));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.FetchPatternNames=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G("pattern"));case 1:case"end":return e.stop()}}),e)})))}},"./sof/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/legacy/EveSOF.js");r.d(t,"EveSOF",(function(){return n.EveSOF}))},"./sof/pattern/EveSOFDataPattern.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPattern",(function(){return O})),r.d(t,"ErrSOFProjectionNotFound",(function(){return R}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js"),b=r("./core/index.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var O=(n=m.meta.type("EveSOFDataPattern"),i=m.meta.string,o=m.meta.struct("EveSOFDataPatternLayer"),a=m.meta.struct("EveSOFDataPatternLayer"),u=m.meta.list("EveSOFDataPatternPerHull"),n((y=function(e){x(o,e);var t,r,n,i=z(o);function o(){var e;g(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(e=i.call.apply(i,[this].concat(r)),"name",s,j(e)),v(e,"layer1",f,j(e)),v(e,"layer2",p,j(e)),v(e,"projections",d,j(e)),e}return t=o,(r=[{key:"Has",value:function(e){return-1!==this.IndexOfProjection(e)}},{key:"Get",value:function(e){var t=this.IndexOfProjection(e);if(-1===t)throw new R({pattern:this.name,projection:e});return{name:this.name,layer1:this.layer1,layer2:this.layer2,transformLayer1:this.projections[t].transformLayer1,transformLayer2:this.projections[t].transformLayer2}}},{key:"IndexOfProjection",value:function(e){for(var t=0;t<this.projections.length;t++)if(this.projections[t].name.toUpperCase()===e.toUpperCase())return t;return-1}}])&&w(t.prototype,r),n&&w(t,n),o}(m.meta.Model),s=T((l=y).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=T(l.prototype,"layer1",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=T(l.prototype,"layer2",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=T(l.prototype,"projections",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=l))||c),R=function(e){x(r,e);var t=z(r);function r(e){return g(this,r),t.call(this,e,"SOF pattern projection '%projection%' not found for pattern '%pattern%'")}return r}(b.Tw2Error)},"./sof/pattern/EveSOFDataPatternLayer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPatternLayer",(function(){return I}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j=r("./global/utils/index.js");function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var i=C(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}function A(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var I=(n=j.meta.type("EveSOFDataPatternLayer"),i=j.meta.boolean,o=j.meta.boolean,a=j.meta.boolean,u=j.meta.boolean,c=j.meta.uint,l=j.meta.uint,s=j.meta.uint,f=j.meta.string,p=j.meta.path,n((S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(o,e);var t,r,n,i=D(o);function o(){var e;O(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return T(e=i.call.apply(i,[this].concat(r)),"isTargetMtl1",m,M(e)),T(e,"isTargetMtl2",b,M(e)),T(e,"isTargetMtl3",h,M(e)),T(e,"isTargetMtl4",v,M(e)),T(e,"materialSource",g,M(e)),T(e,"projectionTypeU",w,M(e)),T(e,"projectionTypeV",x,M(e)),T(e,"textureName",_,M(e)),T(e,"textureResFilePath",z,M(e)),e}return t=o,n=[{key:"ToAddressMode",value:function(e){switch(e){case 2:return 4;case 1:return 3;default:return 1}}},{key:"FromAddressMode",value:function(e){switch(e){case 4:return 2;case 3:return 1;default:return 0}}}],(r=null)&&R(t.prototype,r),n&&R(t,n),o}(j.meta.Model),m=k((y=S).prototype,"isTargetMtl1",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=k(y.prototype,"isTargetMtl2",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=k(y.prototype,"isTargetMtl3",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=k(y.prototype,"isTargetMtl4",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=k(y.prototype,"materialSource",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=k(y.prototype,"projectionTypeU",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=k(y.prototype,"projectionTypeV",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=k(y.prototype,"textureName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=k(y.prototype,"textureResFilePath",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=y))||d)},"./sof/pattern/EveSOFDataPatternPerHull.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPatternPerHull",(function(){return z}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=d.meta.type("EveSOFDataPatternPerHull"),i=d.meta.string,o=d.meta.struct("EveSOFDataPatternTransform"),a=d.meta.struct("EveSOFDataPatternTransform"),n((p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=v(r);function r(){var e;b(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return m(e=t.call.apply(t,[this].concat(i)),"name",l,w(e)),m(e,"transformLayer1",s,w(e)),m(e,"transformLayer2",f,w(e)),e}return r}(d.meta.Model),l=_((c=p).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=_(c.prototype,"transformLayer1",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=_(c.prototype,"transformLayer2",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=c))||u)},"./sof/pattern/EveSOFDataPatternTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPatternTransform",(function(){return T}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js"),b=r("./global/math/index.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return z(this,r)}}function z(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T=(n=m.meta.type("EveSOFDataPatternTransform"),i=m.meta.boolean,o=m.meta.vector3,a=m.meta.quaternion,u=m.meta.vector3,n((y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(o,e);var t,r,n,i=_(o);function o(){var e;g(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(e=i.call.apply(i,[this].concat(r)),"isMirrored",s,S(e)),v(e,"position",f,S(e)),v(e,"rotation",p,S(e)),v(e,"scaling",d,S(e)),e}return t=o,(r=[{key:"GetTransform",value:function(e){return b.mat4.fromRotationTranslationScale(e,this.rotation,this.position,this.scaling)}}])&&w(t.prototype,r),n&&w(t,n),o}(m.meta.Model),s=E((l=y).prototype,"isMirrored",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=E(l.prototype,"position",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec3.create()}}),p=E(l.prototype,"rotation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.quat.create()}}),d=E(l.prototype,"scaling",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec3.fromValues(1,1,1)}}),c=l))||c)},"./sof/pattern/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/pattern/EveSOFDataPattern.js");r.d(t,"EveSOFDataPattern",(function(){return n.EveSOFDataPattern})),r.d(t,"ErrSOFProjectionNotFound",(function(){return n.ErrSOFProjectionNotFound}));var i=r("./sof/pattern/EveSOFDataPatternLayer.js");r.d(t,"EveSOFDataPatternLayer",(function(){return i.EveSOFDataPatternLayer}));var o=r("./sof/pattern/EveSOFDataPatternPerHull.js");r.d(t,"EveSOFDataPatternPerHull",(function(){return o.EveSOFDataPatternPerHull}));var a=r("./sof/pattern/EveSOFDataPatternTransform.js");r.d(t,"EveSOFDataPatternTransform",(function(){return a.EveSOFDataPatternTransform}))},"./sof/race/EveSOFDataRace.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataRace",(function(){return z}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=d.meta.type("EveSOFDataRace"),i=d.meta.string,o=d.meta.struct("EveSOFDataBooster"),a=d.meta.struct("EveSOFDataRaceDamage"),n((p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=v(r);function r(){var e;b(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return m(e=t.call.apply(t,[this].concat(i)),"name",l,w(e)),m(e,"booster",s,w(e)),m(e,"damage",f,w(e)),e}return r}(d.meta.Model),l=_((c=p).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=_(c.prototype,"booster",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=_(c.prototype,"damage",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=c))||u)},"./sof/race/EveSOFDataRaceDamage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataRaceDamage",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=m.meta.type("EveSOFDataRaceDamage"),i=m.meta.list("EveSOFDataParameter"),o=m.meta.list("EveSOFDataTexture"),a=m.meta.list("EveSOFDataParameter"),u=m.meta.list("EveSOFDataTexture"),n((y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(o,e);var t,r,n,i=x(o);function o(){var e;v(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(e=i.call.apply(i,[this].concat(r)),"armorImpactParameters",s,z(e)),h(e,"armorImpactTextures",f,z(e)),h(e,"shieldImpactParameters",p,z(e)),h(e,"shieldImpactTextures",d,z(e)),e}return t=o,(r=[{key:"AssignArmor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.parameters=e.parameters||{},e.textures=e.textures||{};for(var t=0;t<this.armorImpactParameters.length;t++)this.armorImpactParameters[t].Assign(e.parameters);for(var r=0;r<this.armorImpactTextures.length;r++)this.armorImpactTextures[r].Assign(e.textures);return e}},{key:"AssignShield",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.parameters=e.parameters||{},e.textures=e.textures||{};for(var t=0;t<this.shieldImpactParameters.length;t++)this.shieldImpactParameters[t].Assign(e.parameters);for(var r=0;r<this.shieldImpactTextures.length;r++)this.shieldImpactTextures[r].Assign(e.textures);return e}}])&&g(t.prototype,r),n&&g(t,n),o}(m.meta.Model),s=j((l=y).prototype,"armorImpactParameters",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=j(l.prototype,"armorImpactTextures",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=j(l.prototype,"shieldImpactParameters",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=j(l.prototype,"shieldImpactTextures",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=l))||c)},"./sof/race/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/race/EveSOFDataRace.js");r.d(t,"EveSOFDataRace",(function(){return n.EveSOFDataRace}));var i=r("./sof/race/EveSOFDataRaceDamage.js");r.d(t,"EveSOFDataRaceDamage",(function(){return i.EveSOFDataRaceDamage}))},"./sof/shared/EveSOFDataArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataArea",(function(){return me})),r.d(t,"ErrSOFAreaTypeUnknown",(function(){return be})),r.d(t,"ErrSOFAreaTypeNotFound",(function(){return he}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te=r("./global/utils/index.js"),re=r("./core/index.js"),ne=r("./sof/shared/EveSOFDataAreaMaterial.js");function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=de(e);if(t){var i=de(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fe(this,r)}}function fe(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?pe(e):t}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var me=(n=te.meta.type("EveSOFDataArea"),i=te.meta.struct("EveSOFDataAreaMaterial"),o=te.meta.struct("EveSOFDataAreaMaterial"),a=te.meta.struct("EveSOFDataAreaMaterial"),u=te.meta.struct("EveSOFDataAreaMaterial"),c=te.meta.struct("EveSOFDataAreaMaterial"),l=te.meta.struct("EveSOFDataAreaMaterial"),s=te.meta.struct("EveSOFDataAreaMaterial"),f=te.meta.struct("EveSOFDataAreaMaterial"),p=te.meta.struct("EveSOFDataAreaMaterial"),d=te.meta.struct("EveSOFDataAreaMaterial"),y=te.meta.struct("EveSOFDataAreaMaterial"),m=te.meta.struct("EveSOFDataAreaMaterial"),b=te.meta.struct("EveSOFDataAreaMaterial"),h=te.meta.struct("EveSOFDataAreaMaterial"),v=te.meta.struct("EveSOFDataAreaMaterial"),g=te.meta.struct("EveSOFDataAreaMaterial"),w=te.meta.struct("EveSOFDataAreaMaterial"),x=te.meta.struct("EveSOFDataAreaMaterial"),_=te.meta.struct("EveSOFDataAreaMaterial"),z=te.meta.struct("EveSOFDataAreaMaterial"),S=te.meta.struct("EveSOFDataAreaMaterial"),j=te.meta.struct("EveSOFDataAreaMaterial"),E=te.meta.struct("EveSOFDataAreaMaterial"),T=te.meta.isPrivate,n((ee=function(e){ce(o,e);var t,r,n,i=se(o);function o(){var e;ae(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return oe(e=i.call.apply(i,[this].concat(r)),"Black",P,pe(e)),oe(e,"Blue",D,pe(e)),oe(e,"Booster",A,pe(e)),oe(e,"Cyan",M,pe(e)),oe(e,"Darkhull",C,pe(e)),oe(e,"Fire",k,pe(e)),oe(e,"Glass",I,pe(e)),oe(e,"Green",L,pe(e)),oe(e,"Hull",G,pe(e)),oe(e,"Killmark",F,pe(e)),oe(e,"Monument",B,pe(e)),oe(e,"Orange",N,pe(e)),oe(e,"Ornament",U,pe(e)),oe(e,"Primary",V,pe(e)),oe(e,"Reactor",q,pe(e)),oe(e,"Red",H,pe(e)),oe(e,"Rock",W,pe(e)),oe(e,"Sails",X,pe(e)),oe(e,"SimplePrimary",K,pe(e)),oe(e,"Secondary",Y,pe(e)),oe(e,"Tertiary",Q,pe(e)),oe(e,"White",Z,pe(e)),oe(e,"Yellow",J,pe(e)),oe(e,"_typesByIndex",$,pe(e)),e}return t=o,n=[{key:"onAfterBlackPropertyReader",value:function(e,t,r){t instanceof ne.EveSOFDataAreaMaterial&&(t.name=e,r._typesByIndex.push(e))}}],(r=[{key:"GetTypeByIndex",value:function(e){var t=this._typesByIndex[e];return this.hasOwnProperty(t)?this[t]:null}},{key:"Has",value:function(e){return!!this.GetTypeByIndex(e)}},{key:"Get",value:function(e){if(!this.Has(e))throw new he({type:e});return this.GetTypeByIndex(e)}}])&&ue(t.prototype,r),n&&ue(t,n),o}(te.meta.Model),P=ye((R=ee).prototype,"Black",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=ye(R.prototype,"Blue",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=ye(R.prototype,"Booster",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=ye(R.prototype,"Cyan",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=ye(R.prototype,"Darkhull",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=ye(R.prototype,"Fire",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=ye(R.prototype,"Glass",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=ye(R.prototype,"Green",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=ye(R.prototype,"Hull",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=ye(R.prototype,"Killmark",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=ye(R.prototype,"Monument",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=ye(R.prototype,"Orange",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=ye(R.prototype,"Ornament",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=ye(R.prototype,"Primary",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=ye(R.prototype,"Reactor",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=ye(R.prototype,"Red",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=ye(R.prototype,"Rock",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=ye(R.prototype,"Sails",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=ye(R.prototype,"SimplePrimary",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=ye(R.prototype,"Secondary",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=ye(R.prototype,"Tertiary",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=ye(R.prototype,"White",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=ye(R.prototype,"Yellow",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=ye(R.prototype,"_typesByIndex",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=R))||O),be=function(e){ce(r,e);var t=se(r);function r(e){var n;return ae(this,r),(n=t.call(this,e,"SOF area type unknown (%type%)")).unknownType=!0,n}return r}(re.Tw2Error),he=function(e){ce(r,e);var t=se(r);function r(e){return ae(this,r),t.call(this,e,"SOF area type not found (%type%)")}return r}(re.Tw2Error)},"./sof/shared/EveSOFDataAreaMaterial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataAreaMaterial",(function(){return P}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g=r("./global/utils/index.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P=(n=g.meta.type("EveSOFDataAreaMaterial"),i=g.meta.string,o=g.meta.uint,a=g.meta.string,u=g.meta.string,c=g.meta.string,l=g.meta.string,n((v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,r,n,i=j(o);function o(){var e;_(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(e=i.call.apply(i,[this].concat(r)),"name",p,T(e)),x(e,"colorType",d,T(e)),x(e,"material1",y,T(e)),x(e,"material2",m,T(e)),x(e,"material3",b,T(e)),x(e,"material4",h,T(e)),e}return t=o,(r=[{key:"Assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.colorType=this.colorType,this.material1&&(e.material1=this.material1),this.material2&&(e.material2=this.material2),this.material3&&(e.material3=this.material3),this.material4&&(e.material4=this.material4),e}}])&&z(t.prototype,r),n&&z(t,n),o}(g.meta.Model),p=R((f=v).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=R(f.prototype,"colorType",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=R(f.prototype,"material1",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=R(f.prototype,"material2",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=R(f.prototype,"material3",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=R(f.prototype,"material4",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=f))||s)},"./sof/shared/EveSOFDataBooster.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataBooster",(function(){return he}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe=r("./global/utils/index.js"),ae=r("./global/math/index.js");function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=me(e);if(t){var i=me(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return de(this,r)}}function de(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?ye(e):t}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var he=(n=oe.meta.type("EveSOFDataBooster"),i=oe.meta.color,o=oe.meta.float,a=oe.meta.path,u=oe.meta.path,c=oe.meta.color,l=oe.meta.float,s=oe.meta.float,f=oe.meta.color,p=oe.meta.float,d=oe.meta.float,y=oe.meta.float,m=oe.meta.color,b=oe.meta.float,h=oe.meta.struct("EveSOFDataBoosterShape"),v=oe.meta.struct("EveSOFDataBoosterShape"),g=oe.meta.uint,w=oe.meta.uint,x=oe.meta.path,_=oe.meta.uint,z=oe.meta.float,S=oe.meta.color,j=oe.meta.vector4,E=oe.meta.color,T=oe.meta.color,O=oe.meta.struct("EveSOFDataBoosterShape"),R=oe.meta.struct("EveSOFDataBoosterShape"),n((ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(o,e);var t,r,n,i=pe(o);function o(){var e;le(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ce(e=i.call.apply(i,[this].concat(r)),"glowColor",A,ye(e)),ce(e,"glowScale",M,ye(e)),ce(e,"gradient0ResPath",C,ye(e)),ce(e,"gradient1ResPath",k,ye(e)),ce(e,"haloColor",I,ye(e)),ce(e,"haloScaleX",L,ye(e)),ce(e,"haloScaleY",G,ye(e)),ce(e,"lightColor",F,ye(e)),ce(e,"lightFlickerAmplitude",B,ye(e)),ce(e,"lightFlickerFrequency",N,ye(e)),ce(e,"lightRadius",U,ye(e)),ce(e,"lightWarpColor",V,ye(e)),ce(e,"lightWarpRadius",q,ye(e)),ce(e,"shape0",H,ye(e)),ce(e,"shape1",W,ye(e)),ce(e,"shapeAtlasCount",X,ye(e)),ce(e,"shapeAtlasHeight",K,ye(e)),ce(e,"shapeAtlasResPath",Y,ye(e)),ce(e,"shapeAtlasWidth",Q,ye(e)),ce(e,"symHaloScale",Z,ye(e)),ce(e,"trailColor",J,ye(e)),ce(e,"trailSize",$,ye(e)),ce(e,"warpGlowColor",ee,ye(e)),ce(e,"warpHalpColor",te,ye(e)),ce(e,"warpShape0",re,ye(e)),ce(e,"warpShape1",ne,ye(e)),e}return t=o,(r=[{key:"warpHaloColor",get:function(){return this.warpHalpColor},set:function(e){this.warpHalpColor=e}}])&&se(t.prototype,r),n&&se(t,n),o}(oe.meta.Model),A=be((D=ie).prototype,"glowColor",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.vec4.create()}}),M=be(D.prototype,"glowScale",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=be(D.prototype,"gradient0ResPath",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=be(D.prototype,"gradient1ResPath",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=be(D.prototype,"haloColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.vec4.create()}}),L=be(D.prototype,"haloScaleX",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=be(D.prototype,"haloScaleY",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=be(D.prototype,"lightColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.vec4.create()}}),B=be(D.prototype,"lightFlickerAmplitude",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=be(D.prototype,"lightFlickerFrequency",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=be(D.prototype,"lightRadius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=be(D.prototype,"lightWarpColor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.vec4.create()}}),q=be(D.prototype,"lightWarpRadius",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=be(D.prototype,"shape0",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=be(D.prototype,"shape1",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=be(D.prototype,"shapeAtlasCount",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),K=be(D.prototype,"shapeAtlasHeight",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=be(D.prototype,"shapeAtlasResPath",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Q=be(D.prototype,"shapeAtlasWidth",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=be(D.prototype,"symHaloScale",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=be(D.prototype,"trailColor",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.vec4.create()}}),$=be(D.prototype,"trailSize",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.vec4.create()}}),ee=be(D.prototype,"warpGlowColor",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.vec4.create()}}),te=be(D.prototype,"warpHalpColor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.vec4.create()}}),re=be(D.prototype,"warpShape0",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=be(D.prototype,"warpShape1",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=D))||P)},"./sof/shared/EveSOFDataBoosterShape.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataBoosterShape",(function(){return D}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g=r("./global/utils/index.js"),w=r("./global/math/index.js");function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D=(n=g.meta.type("EveSOFDataBoosterShape"),i=g.meta.color,o=g.meta.vector4,a=g.meta.vector4,u=g.meta.vector4,c=g.meta.float,l=g.meta.float,n((v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,r,n,i=E(o);function o(){var e;z(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _(e=i.call.apply(i,[this].concat(r)),"color",p,O(e)),_(e,"noiseAmplitureEnd",d,O(e)),_(e,"noiseAmplitureStart",y,O(e)),_(e,"noiseFrequency",m,O(e)),_(e,"noiseFunction",b,O(e)),_(e,"noiseSpeed",h,O(e)),e}return t=o,(r=[{key:"noiseAmplitudeEnd",get:function(){return this.noiseAmplitureEnd}},{key:"noiseAmplitudeStart",get:function(){return this.noiseAmplitureStart}}])&&S(t.prototype,r),n&&S(t,n),o}(g.meta.Model),p=P((f=v).prototype,"color",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.vec4.create()}}),d=P(f.prototype,"noiseAmplitureEnd",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.vec4.create()}}),y=P(f.prototype,"noiseAmplitureStart",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.vec4.create()}}),m=P(f.prototype,"noiseFrequency",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.vec4.create()}}),b=P(f.prototype,"noiseFunction",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=P(f.prototype,"noiseSpeed",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=f))||s)},"./sof/shared/EveSOFDataDecalIndexBuffer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataDecalIndexBuffer",(function(){return j}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g,w,x,_,z,S,j=(n=s.meta.type("EveSOFDataDecalIndexBuffer"),i=s.meta.uint32Array,n((l=c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(r,e);var t=m(r);function r(){var e;d(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return p(e=t.call.apply(t,[this].concat(i)),"indexBuffer",u,h(e)),e}return r}(s.meta.Model),c.blackReaders={indexBuffer:function(e){for(var t=e.ReadU32()/4,r=new Uint32Array(t),n=0;n<t;n++)r[n]=e.ReadU32();return r}},g=(a=l).prototype,w="indexBuffer",x=[i],_={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},S={},Object.keys(_).forEach((function(e){S[e]=_[e]})),S.enumerable=!!S.enumerable,S.configurable=!!S.configurable,("value"in S||S.initializer)&&(S.writable=!0),S=x.slice().reverse().reduce((function(e,t){return t(g,w,e)||e}),S),z&&void 0!==S.initializer&&(S.value=S.initializer?S.initializer.call(z):void 0,S.initializer=void 0),void 0===S.initializer&&(Object.defineProperty(g,w,S),S=null),u=S,o=a))||o)},"./sof/shared/EveSOFDataInstancedMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataInstancedMesh",(function(){return U}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O=r("./global/utils/index.js");function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t,r){return t&&A(e.prototype,t),r&&A(e,r),e}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=F(e);if(t){var i=F(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return L(this,r)}}function L(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?G(e):t}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var N=(n=O.meta.type("EveSOFDataInstancedMeshInstanceReader"),i=O.meta.vector,n((c=function(e){C(r,e);var t=I(r);function r(){var e;D(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return P(e=t.call.apply(t,[this].concat(i)),"data",u,G(e)),e}return M(r,null,[{key:"blackStruct",value:function(e){var t=new r;return t.data=e.ReadF32Array(11),t}}]),r}(O.meta.Model),u=B((a=c).prototype,"data",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=a))||o),U=(l=O.meta.type("EveSOFDataInstancedMesh"),s=O.meta.string,f=O.meta.uint,p=O.meta.todo("Figure out constants"),d=O.meta.path,y=O.meta.list(N),m=O.meta.uint,b=O.meta.string,h=O.meta.list("EveSOFDataTexture"),l((T=function(e){C(r,e);var t=I(r);function r(){var e;D(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return P(e=t.call.apply(t,[this].concat(i)),"name",w,G(e)),P(e,"displayModifier",x,G(e)),P(e,"geometryResPath",_,G(e)),P(e,"instances",z,G(e)),P(e,"lowestLodVisible",S,G(e)),P(e,"shader",j,G(e)),P(e,"textures",E,G(e)),e}return M(r,[{key:"AssignTextures",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;t<this.textures.length;t++)this.textures[t].Assign(e);return e}}]),r}(O.meta.Model),w=B((g=T).prototype,"name",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=B(g.prototype,"displayModifier",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=B(g.prototype,"geometryResPath",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=B(g.prototype,"instances",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=B(g.prototype,"lowestLodVisible",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=B(g.prototype,"shader",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=B(g.prototype,"textures",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=g))||v)},"./sof/shared/EveSOFDataLogo.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataLogo",(function(){return j}));var n,i,o,a,u,c,l=r("./global/utils/index.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g,w,x,_,z,S,j=(n=l.meta.type("EveSOFDataLogo"),i=l.meta.list("EveSOFDataTexture"),n((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,e);var t,r,n,i=m(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return f(e=i.call.apply(i,[this].concat(r)),"textures",u,h(e)),e}return t=o,(r=[{key:"Assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.textures=this.AssignTextures(e.textures),e}},{key:"AssignTextures",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;t<this.textures.length;t++)this.textures[t].Assign(e);return e}}])&&d(t.prototype,r),n&&d(t,n),o}(l.meta.Model),g=(a=c).prototype,w="textures",x=[i],_={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},S={},Object.keys(_).forEach((function(e){S[e]=_[e]})),S.enumerable=!!S.enumerable,S.configurable=!!S.configurable,("value"in S||S.initializer)&&(S.writable=!0),S=x.slice().reverse().reduce((function(e,t){return t(g,w,e)||e}),S),z&&void 0!==S.initializer&&(S.value=S.initializer?S.initializer.call(z):void 0,S.initializer=void 0),void 0===S.initializer&&(Object.defineProperty(g,w,S),S=null),u=S,o=a))||o)},"./sof/shared/EveSOFDataLogoSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataLogoSet",(function(){return D})),r.d(t,"ErrSOFLogoSetTypeUnknown",(function(){return A})),r.d(t,"ErrSOFLogoSetTypeNotFound",(function(){return M}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./global/utils/index.js"),g=r("./core/index.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D=(n=v.meta.type("EveSOFDataLogoSet"),i=v.meta.struct("EveSOFDataLogo"),o=v.meta.struct("EveSOFDataLogo"),a=v.meta.struct("EveSOFDataLogo"),u=v.meta.struct("EveSOFDataLogo"),c=v.meta.struct("EveSOFDataLogo"),n((h=b=function(e){S(o,e);var t,r,n,i=E(o);function o(){var e;_(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(e=i.call.apply(i,[this].concat(r)),"Marking_01",f,O(e)),x(e,"Marking_02",p,O(e)),x(e,"Primary",d,O(e)),x(e,"Secondary",y,O(e)),x(e,"Tertiary",m,O(e)),e}return t=o,(r=[{key:"Has",value:function(e){var t=o.LogoType[e];if(void 0===t)throw new A({type:e});return!!this[t]}},{key:"Get",value:function(e){if(!this.Has(e))throw new M({type:e});return this[o.LogoType[e]]}}])&&z(t.prototype,r),n&&z(t,n),o}(v.meta.Model),b.LogoType=["Primary","Secondary","Tertiary","Marking_01","Marking_02"],f=P((s=h).prototype,"Marking_01",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=P(s.prototype,"Marking_02",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=P(s.prototype,"Primary",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=P(s.prototype,"Secondary",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=P(s.prototype,"Tertiary",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=s))||l),A=function(e){S(r,e);var t=E(r);function r(e){var n;return _(this,r),(n=t.call(this,e,"SOF logo set type unknown (%type%)")).unknownType=!0,n}return r}(g.Tw2Error),M=function(e){S(r,e);var t=E(r);function r(e){return _(this,r),t.call(this,e,"SOF logo set type not found (%type%)")}return r}(g.Tw2Error)},"./sof/shared/EveSOFDataMaterial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataMaterial",(function(){return _}));var n,i,o,a,u,c,l,s,f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=f.meta.type("EveSOFDataMaterial"),i=f.meta.string,o=f.meta.list("EveSOFDataParameter"),n((s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,r,n,i=h(o);function o(){var e;y(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(e=i.call.apply(i,[this].concat(r)),"name",c,g(e)),d(e,"parameters",l,g(e)),e}return t=o,(r=[{key:"AssignParameters",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=0;r<this.parameters.length;r++)this.parameters[r].Assign(e,t);return e}}])&&m(t.prototype,r),n&&m(t,n),o}(f.meta.Model),c=x((u=s).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=x(u.prototype,"parameters",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=u))||a)},"./sof/shared/EveSOFDataParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataParameter",(function(){return z}));var n,i,o,a,u,c,l,s,f=r("./global/utils/index.js"),p=r("./global/math/index.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=f.meta.type("EveSOFDataParameter"),i=f.meta.string,o=f.meta.vector4,n((s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,e);var t,r,n,i=v(o);function o(){var e;m(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return y(e=i.call.apply(i,[this].concat(r)),"name",c,w(e)),y(e,"value",l,w(e)),e}return t=o,(r=[{key:"Assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t?t+this.name:this.name;return e[r]=Array.from(this.value),e}}])&&b(t.prototype,r),n&&b(t,n),o}(f.meta.Model),c=_((u=s).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=_(u.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.vec4.create()}}),a=u))||a)},"./sof/shared/EveSOFDataTexture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataTexture",(function(){return _}));var n,i,o,a,u,c,l,s,f=r("./global/utils/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=f.meta.type("EveSOFDataTexture"),i=f.meta.string,o=f.meta.path,n((s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,r,n,i=h(o);function o(){var e;y(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(e=i.call.apply(i,[this].concat(r)),"name",c,g(e)),d(e,"resFilePath",l,g(e)),e}return t=o,(r=[{key:"Assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e[this.name]=this.resFilePath,e}}])&&m(t.prototype,r),n&&m(t,n),o}(f.meta.Model),c=x((u=s).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=x(u.prototype,"resFilePath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=u))||a)},"./sof/shared/EveSOFDataTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataTransform",(function(){return T}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js"),b=r("./global/math/index.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return z(this,r)}}function z(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T=(n=m.meta.type("EveSOFDataTransform"),i=m.meta.uint,o=m.meta.vector3,a=m.meta.quaternion,u=m.meta.vector3,n((y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(o,e);var t,r,n,i=_(o);function o(){var e;g(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(e=i.call.apply(i,[this].concat(r)),"boneIndex",s,S(e)),v(e,"position",f,S(e)),v(e,"rotation",p,S(e)),v(e,"scaling",d,S(e)),e}return t=o,(r=[{key:"GetTransform",value:function(e){return b.mat4.fromRotationTranslationScale(e,this.rotation,this.translation,this.scaling)}}])&&w(t.prototype,r),n&&w(t,n),o}(m.meta.Model),s=E((l=y).prototype,"boneIndex",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),f=E(l.prototype,"position",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec3.create()}}),p=E(l.prototype,"rotation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.quat.create()}}),d=E(l.prototype,"scaling",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec3.fromValues(1,1,1)}}),c=l))||c)},"./sof/shared/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/shared/EveSOFDataArea.js");r.d(t,"EveSOFDataArea",(function(){return n.EveSOFDataArea})),r.d(t,"ErrSOFAreaTypeUnknown",(function(){return n.ErrSOFAreaTypeUnknown})),r.d(t,"ErrSOFAreaTypeNotFound",(function(){return n.ErrSOFAreaTypeNotFound}));var i=r("./sof/shared/EveSOFDataAreaMaterial.js");r.d(t,"EveSOFDataAreaMaterial",(function(){return i.EveSOFDataAreaMaterial}));var o=r("./sof/shared/EveSOFDataBooster.js");r.d(t,"EveSOFDataBooster",(function(){return o.EveSOFDataBooster}));var a=r("./sof/shared/EveSOFDataBoosterShape.js");r.d(t,"EveSOFDataBoosterShape",(function(){return a.EveSOFDataBoosterShape}));var u=r("./sof/shared/EveSOFDataDecalIndexBuffer.js");r.d(t,"EveSOFDataDecalIndexBuffer",(function(){return u.EveSOFDataDecalIndexBuffer}));var c=r("./sof/shared/EveSOFDataInstancedMesh.js");r.d(t,"EveSOFDataInstancedMesh",(function(){return c.EveSOFDataInstancedMesh}));var l=r("./sof/shared/EveSOFDataLogo.js");r.d(t,"EveSOFDataLogo",(function(){return l.EveSOFDataLogo}));var s=r("./sof/shared/EveSOFDataLogoSet.js");r.d(t,"EveSOFDataLogoSet",(function(){return s.EveSOFDataLogoSet})),r.d(t,"ErrSOFLogoSetTypeUnknown",(function(){return s.ErrSOFLogoSetTypeUnknown})),r.d(t,"ErrSOFLogoSetTypeNotFound",(function(){return s.ErrSOFLogoSetTypeNotFound}));var f=r("./sof/shared/EveSOFDataMaterial.js");r.d(t,"EveSOFDataMaterial",(function(){return f.EveSOFDataMaterial}));var p=r("./sof/shared/EveSOFDataParameter.js");r.d(t,"EveSOFDataParameter",(function(){return p.EveSOFDataParameter}));var d=r("./sof/shared/EveSOFDataTexture.js");r.d(t,"EveSOFDataTexture",(function(){return d.EveSOFDataTexture}));var y=r("./sof/shared/EveSOFDataTransform.js");r.d(t,"EveSOFDataTransform",(function(){return y.EveSOFDataTransform}))},"./unsupported/AudEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AudEmitter",(function(){return S}));var n,i,o,a,u,c,l=r("./global/utils/index.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v,g,w,x,_,z,S=(n=l.meta.type("AudEmitter",!0),i=l.meta.string,n((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(r,e);var t=y(r);function r(){var e;p(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return f(e=t.call.apply(t,[this].concat(i)),"name",u,b(e)),e}return r}(l.meta.Model),v=(a=c).prototype,g="name",w=[i],x={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},z={},Object.keys(x).forEach((function(e){z[e]=x[e]})),z.enumerable=!!z.enumerable,z.configurable=!!z.configurable,("value"in z||z.initializer)&&(z.writable=!0),z=w.slice().reverse().reduce((function(e,t){return t(v,g,e)||e}),z),_&&void 0!==z.initializer&&(z.value=z.initializer?z.initializer.call(_):void 0,z.initializer=void 0),void 0===z.initializer&&(Object.defineProperty(v,g,z),z=null),u=z,o=a))||o)},"./unsupported/core/Tr2DistanceTracker.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2DistanceTracker",(function(){return T}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js"),h=r("./global/math/index.js");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return z(this,r)}}function z(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T=(n=b.meta.notImplemented,i=b.meta.type("Tr2DistanceTracker"),o=b.meta.string,a=b.meta.vector3,u=b.meta.vector3,c=b.meta.float,n(l=i((m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(r,e);var t=_(r);function r(){var e;w(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return g(e=t.call.apply(t,[this].concat(i)),"name",f,S(e)),g(e,"direction",p,S(e)),g(e,"targetPosition",d,S(e)),g(e,"value",y,S(e)),e}return r}(b.meta.Model),f=E((s=m).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=E(s.prototype,"direction",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.vec3.create()}}),d=E(s.prototype,"targetPosition",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.vec3.create()}}),y=E(s.prototype,"value",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=s))||l)||l)},"./unsupported/core/TriObserverLocal.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriObserverLocal",(function(){return j}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js"),m=r("./global/math/index.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=y.meta.notImplemented,i=y.meta.type("TriObserverLocal"),o=y.meta.string,a=y.meta.vector3,u=y.meta.struct(),n(c=i((d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t=w(r);function r(){var e;v(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return h(e=t.call.apply(t,[this].concat(i)),"name",s,_(e)),h(e,"front",f,_(e)),h(e,"observer",p,_(e)),e}return r}(y.meta.Model),s=S((l=d).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=S(l.prototype,"front",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.vec3.create()}}),p=S(l.prototype,"observer",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=l))||c)||c)},"./unsupported/core/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/core/lighting/index.js");r.d(t,"Tr2SpotLight",(function(){return n.Tr2SpotLight})),r.d(t,"EvePointLightBatch",(function(){return n.EvePointLightBatch})),r.d(t,"Tr2PointLight",(function(){return n.Tr2PointLight})),r.d(t,"Tr2ShLightingManager",(function(){return n.Tr2ShLightingManager}));var i=r("./unsupported/core/mesh/index.js");r.d(t,"Tr2MeshLod",(function(){return i.Tr2MeshLod}));var o=r("./unsupported/core/parameter/index.js");r.d(t,"Tr2ExternalParameter",(function(){return o.Tr2ExternalParameter})),r.d(t,"Tr2Texture2dLodParameter",(function(){return o.Tr2Texture2dLodParameter}));var a=r("./unsupported/core/post/index.js");r.d(t,"Tr2PostProcess2",(function(){return a.Tr2PostProcess2})),r.d(t,"Tr2PPBloomEffect",(function(){return a.Tr2PPBloomEffect})),r.d(t,"Tr2PPDesaturateEffect",(function(){return a.Tr2PPDesaturateEffect})),r.d(t,"Tr2PPDynamicExposureEffect",(function(){return a.Tr2PPDynamicExposureEffect})),r.d(t,"Tr2PPFadeEffect",(function(){return a.Tr2PPFadeEffect})),r.d(t,"Tr2PPFidelityFXEffect",(function(){return a.Tr2PPFidelityFXEffect})),r.d(t,"Tr2PPFilmGrainEffect",(function(){return a.Tr2PPFilmGrainEffect})),r.d(t,"Tr2PPFogEffect",(function(){return a.Tr2PPFogEffect})),r.d(t,"Tr2PPGodRaysEffect",(function(){return a.Tr2PPGodRaysEffect})),r.d(t,"Tr2PPLutEffect",(function(){return a.Tr2PPLutEffect})),r.d(t,"Tr2PPSignalLossEffect",(function(){return a.Tr2PPSignalLossEffect})),r.d(t,"Tr2PPVignetteEffect",(function(){return a.Tr2PPVignetteEffect}));var u=r("./unsupported/core/resource/index.js");r.d(t,"Tr2LodResource",(function(){return u.Tr2LodResource}));var c=r("./unsupported/core/value/index.js");r.d(t,"TriMatrix",(function(){return c.TriMatrix}));var l=r("./unsupported/core/Tr2DistanceTracker.js");r.d(t,"Tr2DistanceTracker",(function(){return l.Tr2DistanceTracker}));var s=r("./unsupported/core/TriObserverLocal.js");r.d(t,"TriObserverLocal",(function(){return s.TriObserverLocal}))},"./unsupported/core/lighting/Tr2PointLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePointLightBatch",(function(){return H})),r.d(t,"Tr2PointLight",(function(){return W}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R=r("./global/utils/index.js"),P=r("./global/math/index.js"),D=r("./global/index.js");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function C(e,t,r){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t,r){return t&&L(e.prototype,t),r&&L(e,r),e}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=q(e);if(t){var i=q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){F(r,e);var t=N(r);function r(){var e;I(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).light=null,e}return G(r,[{key:"Commit",value:function(e){return this.light.Render(e)}},{key:"HasTechnique",value:function(e){return this.light&&this.light._effect&&this.light._effect.HasTechnique(e)}}]),r}(r("./core/batch/index.js").Tw2RenderBatch),W=(n=R.meta.notImplemented,i=R.meta.type("Tr2PointLight"),o=R.meta.string,a=R.meta.uint,u=R.meta.float,c=R.meta.color,l=R.meta.float,s=R.meta.float,f=R.meta.float,p=R.meta.float,d=R.meta.vector3,y=R.meta.float,n(m=i((O=T=function(e){F(r,e);var t=N(r);function r(){var e;I(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return M(e=t.call.apply(t,[this].concat(i)),"name",h,V(e)),M(e,"boneIndex",v,V(e)),M(e,"brightness",g,V(e)),M(e,"color",w,V(e)),M(e,"innerRadius",x,V(e)),M(e,"noiseAmplitude",_,V(e)),M(e,"noiseFrequency",z,V(e)),M(e,"noiseOctaves",S,V(e)),M(e,"position",j,V(e)),M(e,"radius",E,V(e)),e._effect=null,e._worldPosition=P.vec3.create(),e._indexBuffer=null,e}return G(r,[{key:"Unload",value:function(e){this._indexBuffer&&(D.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),C(q(r.prototype),"Unload",this).call(this,e)}},{key:"Rebuild",value:function(){}},{key:"Update",value:function(e,t){P.vec3.transformMat4(this._worldPosition,this.position,t),this._dirty&&this.Rebuild()}},{key:"GetBatches",value:function(e,t,r){if(this.display&&e===D.device.RM_ADDITIVE&&this._indexBuffer&&this._indexBuffer.count){var n=new H;return n.renderMode=D.device.RM_ADDITIVE,n.light=this,n.perObjectData=r,t.Commit(n),!0}return!1}},{key:"Render",value:function(e){if(!this._effect||!this._effect.IsGood()||!this.buffer)return!1;var t=D.device,r=t.gl;t.SetStandardStates(t.RM_ADDITIVE),r.bindBuffer(r.ARRAY_BUFFER,this.buffer);for(var n=0;n<this._effect.GetPassCount(e);++n)this.effect.ApplyPass(e,n),t.ApplyShadowState(),t.gl.drawElements(r.TRIANGLES,this.buffer.count,r.UNSIGNED_SHORT,0);return!1}}]),r}(R.meta.Model),T.vertexDeclarations=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"POSITION",usageIndex:1,elements:3},{usage:"POSITION",usageIndex:2,elements:3},{usage:"POSITION",usageIndex:3,elements:3},{usage:"POSITION",usageIndex:4,elements:3},{usage:"POSITION",usageIndex:5,elements:3},{usage:"TEXCOORD",usageIndex:6,elements:1},{usage:"TEXCOORD",usageIndex:7,elements:1},{usage:"TEXCOORD",usageIndex:8,elements:1}],h=k((b=O).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=k(b.prototype,"boneIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),g=k(b.prototype,"brightness",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=k(b.prototype,"color",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.vec4.create()}}),x=k(b.prototype,"innerRadius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=k(b.prototype,"noiseAmplitude",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=k(b.prototype,"noiseFrequency",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=k(b.prototype,"noiseOctaves",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=k(b.prototype,"position",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.vec3.create()}}),E=k(b.prototype,"radius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=b))||m)||m)},"./unsupported/core/lighting/Tr2ShLightingManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ShLightingManager",(function(){return _}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=p.meta.notImplemented,i=p.meta.type("Tr2ShLightingManager"),o=p.meta.float,a=p.meta.float,n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(r,e);var t=h(r);function r(){var e;m(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return y(e=t.call.apply(t,[this].concat(i)),"primaryIntensity",l,g(e)),y(e,"secondaryIntensity",s,g(e)),e}return r}(p.meta.Model),l=x((c=f).prototype,"primaryIntensity",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=x(c.prototype,"secondaryIntensity",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=c))||u)||u)},"./unsupported/core/lighting/Tr2SpotLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2SpotLight",(function(){return N}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P=r("./global/utils/index.js"),D=r("./global/math/index.js");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=F(e);if(t){var i=F(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return L(this,r)}}function L(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?G(e):t}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var N=(n=P.meta.notImplemented,i=P.meta.type("Tr2SpotLight"),o=P.meta.string,a=P.meta.float,u=P.meta.vector4,c=P.meta.float,l=P.meta.float,s=P.meta.float,f=P.meta.float,p=P.meta.float,d=P.meta.vector3,y=P.meta.float,m=P.meta.quaternion,n(b=i((R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(r,e);var t=I(r);function r(){var e;C(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return M(e=t.call.apply(t,[this].concat(i)),"name",v,G(e)),M(e,"brightness",g,G(e)),M(e,"color",w,G(e)),M(e,"innerAngle",x,G(e)),M(e,"innerRadius",_,G(e)),M(e,"noiseAmplitude",z,G(e)),M(e,"noiseFrequency",S,G(e)),M(e,"outerAngle",j,G(e)),M(e,"position",E,G(e)),M(e,"radius",T,G(e)),M(e,"rotation",O,G(e)),e}return r}(P.meta.Model),v=B((h=R).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=B(h.prototype,"brightness",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=B(h.prototype,"color",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec4.fromValues(0,0,0,1)}}),x=B(h.prototype,"innerAngle",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=B(h.prototype,"innerRadius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=B(h.prototype,"noiseAmplitude",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=B(h.prototype,"noiseFrequency",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=B(h.prototype,"outerAngle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=B(h.prototype,"position",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec3.create()}}),T=B(h.prototype,"radius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=B(h.prototype,"rotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.quat.create()}}),b=h))||b)||b)},"./unsupported/core/lighting/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/core/lighting/Tr2SpotLight.js");r.d(t,"Tr2SpotLight",(function(){return n.Tr2SpotLight}));var i=r("./unsupported/core/lighting/Tr2PointLight.js");r.d(t,"EvePointLightBatch",(function(){return i.EvePointLightBatch})),r.d(t,"Tr2PointLight",(function(){return i.Tr2PointLight}));var o=r("./unsupported/core/lighting/Tr2ShLightingManager.js");r.d(t,"Tr2ShLightingManager",(function(){return o.Tr2ShLightingManager}))},"./unsupported/core/mesh/Tr2MeshLod.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2MeshLod",(function(){return Y}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L=r("./global/utils/index.js"),G=r("./global/constant/index.js");function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=X(e);if(t){var i=X(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return H(this,r)}}function H(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Y=(n=L.meta.notImplemented,i=L.meta.type("Tr2MeshLod"),o=L.meta.todo("Implement LOD"),a=L.meta.string,u=L.meta.list("Tw2MeshArea"),c=L.meta.notImplemented,l=L.meta.list("Tw2GeometryRes"),s=L.meta.list("Tw2MeshArea"),f=L.meta.notImplemented,p=L.meta.list("Tw2MeshArea"),d=L.meta.notImplemented,y=L.meta.list("Tw2MeshArea"),m=L.meta.struct("Tr2LodResource"),b=L.meta.list("Tw2MeshArea"),h=L.meta.list("Tw2MeshArea"),v=L.meta.list("Tw2MeshArea"),g=L.meta.boolean,w=L.meta.plain,x=L.meta.notImplemented,n(_=i(_=o((I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(o,e);var t,r,n,i=q(o);function o(){var e;N(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return B(e=i.call.apply(i,[this].concat(r)),"name",S,W(e)),B(e,"additiveAreas",j,W(e)),B(e,"associatedResources",E,W(e)),B(e,"decalAreas",T,W(e)),B(e,"depthAreas",O,W(e)),B(e,"distortionAreas",R,W(e)),B(e,"geometryRes",P,W(e)),B(e,"opaqueAreas",D,W(e)),B(e,"pickableAreas",A,W(e)),B(e,"transparentAreas",M,W(e)),B(e,"display",C,W(e)),B(e,"visible",k,W(e)),e._geometryResource=null,e}return t=o,n=[{key:"GetAreaBatches",value:function(e,t,r,n,i){for(var o=n.length,a=0;a<t.length;++a){var u=t[a];if(u.effect&&u.display){var c=new u.constructor.batchType;c.renderMode=r,c.perObjectData=i,c.geometryRes=e._geometryResource,c.meshIx=0,c.start=u.index,c.count=u.count,c.effect=u.effect,n.Commit(c)}}return n.length!==o}}],(r=[{key:"Initialize",value:function(){}},{key:"OnResPrepared",value:function(e){this._geometryResource=e}},{key:"IsGood",value:function(){return this._geometryResource&&this._geometryResource.IsGood()}},{key:"GetResources",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<this.associatedResources;t++)e[t]&&!e.includes(this.associatedResources[t])&&e.push(this.associatedResources[t]);var r=L.perArrayChild;return r(this.additiveAreas,"GetResources",e),r(this.decalAreas,"GetResources",e),r(this.depthAreas,"GetResources",e),r(this.distortionAreas,"GetResources",e),r(this.opaqueAreas,"GetResources",e),r(this.pickableAreas,"GetResources",e),r(this.transparentAreas,"GetResources",e),e}},{key:"GetBatches",value:function(e,t,r){if(!this.IsGood()||!this.display)return!1;var n,i=this.constructor.GetAreaBatches;switch(e){case G.RM_ADDITIVE:this.visible.additiveAreas&&(n=this.additiveAreas);break;case G.RM_DECAL:this.visible.decalAreas&&(n=this.decalAreas);break;case G.RM_DEPTH:this.visible.depthAreas&&(n=this.depthAreas);break;case G.RM_DISTORTION:this.visible.distortionAreas&&(n=this.distortionAreas);break;case G.RM_OPAQUE:this.visible.opaqueAreas&&(n=this.opaqueAreas);break;case G.RM_PICKABLE:this.visible.pickableAreas&&(n=this.pickableAreas);break;case G.RM_TRANSPARENT:this.visible.transparentAreas&&(n=this.transparentAreas)}return!!n&&i(this,n,e,t,r)}},{key:"EmptyAreas",value:function(){this.additiveAreas.splice(0),this.decalAreas.splice(0),this.depthAreas.splice(0),this.distortionAreas.splice(0),this.opaqueAreas.splice(0),this.pickableAreas.splice(0),this.transparentAreas.splice(0)}},{key:"geometryResource",get:function(){return this._geometryResource},set:function(e){this._geometryResource=e}}])&&U(t.prototype,r),n&&U(t,n),o}(L.meta.Model),S=K((z=I).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=K(z.prototype,"additiveAreas",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=K(z.prototype,"associatedResources",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=K(z.prototype,"decalAreas",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=K(z.prototype,"depthAreas",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=K(z.prototype,"distortionAreas",[d,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=K(z.prototype,"geometryRes",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=K(z.prototype,"opaqueAreas",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=K(z.prototype,"pickableAreas",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=K(z.prototype,"transparentAreas",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=K(z.prototype,"display",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=K(z.prototype,"visible",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opaqueAreas:!0,transparentAreas:!0,additiveAreas:!0,pickableAreas:!0,distortionAreas:!0,decalAreas:!0,depthAreas:!0}}}),K(z.prototype,"Initialize",[x],Object.getOwnPropertyDescriptor(z.prototype,"Initialize"),z.prototype),_=z))||_)||_)||_)},"./unsupported/core/mesh/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/core/mesh/Tr2MeshLod.js");r.d(t,"Tr2MeshLod",(function(){return n.Tr2MeshLod}))},"./unsupported/core/parameter/Tr2ExternalParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ExternalParameter",(function(){return j}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js"),m=r("./core/parameter/Tw2Parameter.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=y.meta.notImplemented,i=y.meta.type("Tr2ExternalParameter"),o=y.meta.string,a=y.meta.string,u=y.meta.struct(),n(c=i((d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t=w(r);function r(){var e;v(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return h(e=t.call.apply(t,[this].concat(i)),"name",s,_(e)),h(e,"destinationAttribute",f,_(e)),h(e,"destinationObject",p,_(e)),e}return r}(m.Tw2Parameter),s=S((l=d).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=S(l.prototype,"destinationAttribute",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=S(l.prototype,"destinationObject",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=l))||c)||c)},"./unsupported/core/parameter/Tr2Texture2dLodParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2Texture2dLodParameter",(function(){return z}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./core/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=p.meta.notImplemented,i=p.meta.type("Tr2Texture2dLodParameter"),o=p.meta.string,a=p.meta.struct("Tr2LodResource"),n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=v(r);function r(){var e;b(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return m(e=t.call.apply(t,[this].concat(i)),"name",l,w(e)),m(e,"lodResource",s,w(e)),e}return r}(d.Tw2Parameter),l=_((c=f).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=_(c.prototype,"lodResource",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=c))||u)||u)},"./unsupported/core/parameter/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/core/parameter/Tr2ExternalParameter.js");r.d(t,"Tr2ExternalParameter",(function(){return n.Tr2ExternalParameter}));var i=r("./unsupported/core/parameter/Tr2Texture2dLodParameter.js");r.d(t,"Tr2Texture2dLodParameter",(function(){return i.Tr2Texture2dLodParameter}))},"./unsupported/core/post/Tr2PPBloomEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPBloomEffect",(function(){return o}));var n,i=r("./global/utils/index.js");var o=(0,i.meta.notImplemented)(n=i.meta.type("Tr2PPBloomEffect")(n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)})||n)||n},"./unsupported/core/post/Tr2PPDesaturateEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPDesaturateEffect",(function(){return h}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");var f,p,d,y,m,b,h=(n=s.meta.notImplemented,i=s.meta.type("Tr2PPDesaturateEffect"),o=s.meta.float,n(a=i((l=function e(){var t,r,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="intensity",i=this,(n=c)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})},f=(u=l).prototype,p="intensity",d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}},b={},Object.keys(y).forEach((function(e){b[e]=y[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(f,p,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(f,p,b),b=null),c=b,a=u))||a)||a)},"./unsupported/core/post/Tr2PPDynamicExposureEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPDynamicExposureEffect",(function(){return b}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js");function y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function m(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var b=(n=d.meta.notImplemented,i=d.meta.type("Tr2PPDynamicExposureEffect"),o=d.meta.float,a=d.meta.float,u=d.meta.float,n(c=i((s=m((l=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"adjustment",s,this),y(this,"influence",f,this),y(this,"middleValue",p,this)}).prototype,"adjustment",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=m(l.prototype,"influence",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=m(l.prototype,"middleValue",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=l))||c)||c)},"./unsupported/core/post/Tr2PPFadeEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPFadeEffect",(function(){return o}));var n,i=r("./global/utils/index.js");var o=(0,i.meta.notImplemented)(n=i.meta.type("Tr2PPFadeEffect")(n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)})||n)||n},"./unsupported/core/post/Tr2PPFidelityFXEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPFidelityFXEffect",(function(){return o}));var n,i=r("./global/utils/index.js");var o=(0,i.meta.notImplemented)(n=i.meta.type("Tr2PPFidelityFXEffect")(n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)})||n)||n},"./unsupported/core/post/Tr2PPFilmGrainEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPFilmGrainEffect",(function(){return o}));var n,i=r("./global/utils/index.js");var o=(0,i.meta.notImplemented)(n=i.meta.type("Tr2PPFilmGrainEffect")(n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)})||n)||n},"./unsupported/core/post/Tr2PPFogEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPFogEffect",(function(){return V}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F=r("./global/utils/index.js"),B=r("./global/math/index.js");function N(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function U(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var V=(n=F.meta.notImplemented,i=F.meta.type("Tr2PPFogEffect"),o=F.meta.vector3,a=F.meta.float,u=F.meta.float,c=F.meta.float,l=F.meta.float,s=F.meta.float,f=F.meta.float,p=F.meta.float,d=F.meta.float,y=F.meta.float,m=F.meta.float,b=F.meta.float,h=F.meta.float,v=F.meta.color,g=F.meta.float,w=F.meta.float,n(x=i((z=U((_=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,"areaCenter",z,this),N(this,"blendAmount0",S,this),N(this,"blendAmount1",j,this),N(this,"blendAmount2",E,this),N(this,"blendBias0",T,this),N(this,"blendBias1",O,this),N(this,"blendBias2",R,this),N(this,"blendDistance0",P,this),N(this,"blendDistance1",D,this),N(this,"blendDistance2",A,this),N(this,"blendPower0",M,this),N(this,"blendPower1",C,this),N(this,"blendPower2",k,this),N(this,"color",I,this),N(this,"colorInfluence",L,this),N(this,"nebulaInfluence",G,this)}).prototype,"areaCenter",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec3.create()}}),S=U(_.prototype,"blendAmount0",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=U(_.prototype,"blendAmount1",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=U(_.prototype,"blendAmount2",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=U(_.prototype,"blendBias0",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=U(_.prototype,"blendBias1",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=U(_.prototype,"blendBias2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=U(_.prototype,"blendDistance0",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=U(_.prototype,"blendDistance1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=U(_.prototype,"blendDistance2",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=U(_.prototype,"blendPower0",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=U(_.prototype,"blendPower1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=U(_.prototype,"blendPower2",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=U(_.prototype,"color",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec4.create()}}),L=U(_.prototype,"colorInfluence",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=U(_.prototype,"nebulaInfluence",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=_))||x)||x)},"./unsupported/core/post/Tr2PPGodRaysEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPGodRaysEffect",(function(){return h}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");var f,p,d,y,m,b,h=(n=s.meta.notImplemented,i=s.meta.type("Tr2PPGodRaysEffect"),o=s.meta.path,n(a=i((l=function e(){var t,r,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="noiseTexturePath",i=this,(n=c)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})},f=(u=l).prototype,p="noiseTexturePath",d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},b={},Object.keys(y).forEach((function(e){b[e]=y[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(f,p,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(f,p,b),b=null),c=b,a=u))||a)||a)},"./unsupported/core/post/Tr2PPLutEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPLutEffect",(function(){return h}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");var f,p,d,y,m,b,h=(n=s.meta.notImplemented,i=s.meta.type("Tr2PPLutEffect"),o=s.meta.path,n(a=i((l=function e(){var t,r,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="path",i=this,(n=c)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})},f=(u=l).prototype,p="path",d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},b={},Object.keys(y).forEach((function(e){b[e]=y[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(f,p,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(f,p,b),b=null),c=b,a=u))||a)||a)},"./unsupported/core/post/Tr2PPSignalLossEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPSignalLossEffect",(function(){return o}));var n,i=r("./global/utils/index.js");var o=(0,i.meta.notImplemented)(n=i.meta.type("Tr2PPSignalLossEffect")(n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)})||n)||n},"./unsupported/core/post/Tr2PPVignetteEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPVignetteEffect",(function(){return h}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");var f,p,d,y,m,b,h=(n=s.meta.notImplemented,i=s.meta.type("Tr2PPVignetteEffect"),o=s.meta.float,n(a=i((l=function e(){var t,r,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="sineFrequency",i=this,(n=c)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})},f=(u=l).prototype,p="sineFrequency",d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}},b={},Object.keys(y).forEach((function(e){b[e]=y[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(f,p,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(f,p,b),b=null),c=b,a=u))||a)||a)},"./unsupported/core/post/Tr2PostProcess2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PostProcess2",(function(){return B}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P=r("./global/utils/index.js");function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var i=G(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return I(this,r)}}function I(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var B=(n=P.meta.notImplemented,i=P.meta.type("Tr2PostProcess2"),o=P.meta.struct("Tr2PPBloomEffect"),a=P.meta.struct("Tr2DesaturateEffect"),u=P.meta.struct("Tr2PPDynamicExposureEffect"),c=P.meta.struct("Tr2PPFadeEffect"),l=P.meta.struct("Tr2PPFidelityFXEffect"),s=P.meta.struct("Tr2PPFilmGrainEffect"),f=P.meta.struct("Tr2PPFogEffect"),p=P.meta.struct("Tr2PPGodRaysEffect"),d=P.meta.struct("Tr2PPLutEffect"),y=P.meta.struct("Tr2PPSignalLossEffect"),m=P.meta.struct("Tr2PPVignetteEffect"),n(b=i((R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(r,e);var t=k(r);function r(){var e;M(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return A(e=t.call.apply(t,[this].concat(i)),"bloom",v,L(e)),A(e,"desaturate",g,L(e)),A(e,"dynamicExposure",w,L(e)),A(e,"fade",x,L(e)),A(e,"fidelityFX",_,L(e)),A(e,"filmGrain",z,L(e)),A(e,"fog",S,L(e)),A(e,"godRays",j,L(e)),A(e,"lut",E,L(e)),A(e,"signalLoss",T,L(e)),A(e,"vignette",O,L(e)),e}return r}(P.meta.Model),v=F((h=R).prototype,"bloom",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=F(h.prototype,"desaturate",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=F(h.prototype,"dynamicExposure",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=F(h.prototype,"fade",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=F(h.prototype,"fidelityFX",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=F(h.prototype,"filmGrain",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=F(h.prototype,"fog",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=F(h.prototype,"godRays",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=F(h.prototype,"lut",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=F(h.prototype,"signalLoss",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=F(h.prototype,"vignette",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b)||b)},"./unsupported/core/post/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/core/post/Tr2PostProcess2.js");r.d(t,"Tr2PostProcess2",(function(){return n.Tr2PostProcess2}));var i=r("./unsupported/core/post/Tr2PPBloomEffect.js");r.d(t,"Tr2PPBloomEffect",(function(){return i.Tr2PPBloomEffect}));var o=r("./unsupported/core/post/Tr2PPDesaturateEffect.js");r.d(t,"Tr2PPDesaturateEffect",(function(){return o.Tr2PPDesaturateEffect}));var a=r("./unsupported/core/post/Tr2PPDynamicExposureEffect.js");r.d(t,"Tr2PPDynamicExposureEffect",(function(){return a.Tr2PPDynamicExposureEffect}));var u=r("./unsupported/core/post/Tr2PPFadeEffect.js");r.d(t,"Tr2PPFadeEffect",(function(){return u.Tr2PPFadeEffect}));var c=r("./unsupported/core/post/Tr2PPFidelityFXEffect.js");r.d(t,"Tr2PPFidelityFXEffect",(function(){return c.Tr2PPFidelityFXEffect}));var l=r("./unsupported/core/post/Tr2PPFilmGrainEffect.js");r.d(t,"Tr2PPFilmGrainEffect",(function(){return l.Tr2PPFilmGrainEffect}));var s=r("./unsupported/core/post/Tr2PPFogEffect.js");r.d(t,"Tr2PPFogEffect",(function(){return s.Tr2PPFogEffect}));var f=r("./unsupported/core/post/Tr2PPGodRaysEffect.js");r.d(t,"Tr2PPGodRaysEffect",(function(){return f.Tr2PPGodRaysEffect}));var p=r("./unsupported/core/post/Tr2PPLutEffect.js");r.d(t,"Tr2PPLutEffect",(function(){return p.Tr2PPLutEffect}));var d=r("./unsupported/core/post/Tr2PPSignalLossEffect.js");r.d(t,"Tr2PPSignalLossEffect",(function(){return d.Tr2PPSignalLossEffect}));var y=r("./unsupported/core/post/Tr2PPVignetteEffect.js");r.d(t,"Tr2PPVignetteEffect",(function(){return y.Tr2PPVignetteEffect}))},"./unsupported/core/resource/Tw2LodResource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2LodResource",(function(){return O}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./global/utils/index.js");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var O=(n=v.meta.notImplemented,i=v.meta.type("Tr2LodResource"),o=v.meta.string,a=v.meta.path,u=v.meta.path,c=v.meta.path,l=v.meta.path,n(s=i((h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(r,e);var t=z(r);function r(){var e;x(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return w(e=t.call.apply(t,[this].concat(i)),"name",p,j(e)),w(e,"highDetailResPath",d,j(e)),w(e,"lowDetailResPath",y,j(e)),w(e,"mediumDetailResPath",m,j(e)),w(e,"ultraDetailResPath",b,j(e)),e}return r}(v.meta.Model),p=T((f=h).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=T(f.prototype,"highDetailResPath",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=T(f.prototype,"lowDetailResPath",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=T(f.prototype,"mediumDetailResPath",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=T(f.prototype,"ultraDetailResPath",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=f))||s)||s)},"./unsupported/core/resource/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/core/resource/Tw2LodResource.js");r.d(t,"Tr2LodResource",(function(){return n.Tr2LodResource}))},"./unsupported/core/value/TriMatrix.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriMatrix",(function(){return Z}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N=r("./global/utils/index.js");function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Y(e);if(t){var i=Y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return X(this,r)}}function X(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Z=(n=N.meta.notImplemented,i=N.meta.type("TriMatrix"),o=N.meta.todo("Should this default to a identity matrix?"),a=N.meta.float,u=N.meta.float,c=N.meta.float,l=N.meta.float,s=N.meta.float,f=N.meta.float,p=N.meta.float,d=N.meta.float,y=N.meta.float,m=N.meta.float,b=N.meta.float,h=N.meta.float,v=N.meta.float,g=N.meta.float,w=N.meta.float,x=N.meta.float,n(_=i(_=o((B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(r,e);var t=W(r);function r(){var e;q(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return V(e=t.call.apply(t,[this].concat(i)),"_11",S,K(e)),V(e,"_12",j,K(e)),V(e,"_13",E,K(e)),V(e,"_14",T,K(e)),V(e,"_21",O,K(e)),V(e,"_22",R,K(e)),V(e,"_23",P,K(e)),V(e,"_24",D,K(e)),V(e,"_31",A,K(e)),V(e,"_32",M,K(e)),V(e,"_33",C,K(e)),V(e,"_34",k,K(e)),V(e,"_41",I,K(e)),V(e,"_42",L,K(e)),V(e,"_43",G,K(e)),V(e,"_44",F,K(e)),e}return r}(N.meta.Model),S=Q((z=B).prototype,"_11",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=Q(z.prototype,"_12",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=Q(z.prototype,"_13",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=Q(z.prototype,"_14",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=Q(z.prototype,"_21",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=Q(z.prototype,"_22",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=Q(z.prototype,"_23",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=Q(z.prototype,"_24",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=Q(z.prototype,"_31",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=Q(z.prototype,"_32",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=Q(z.prototype,"_33",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=Q(z.prototype,"_34",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=Q(z.prototype,"_41",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=Q(z.prototype,"_42",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=Q(z.prototype,"_43",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=Q(z.prototype,"_44",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=z))||_)||_)||_)},"./unsupported/core/value/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/core/value/TriMatrix.js");r.d(t,"TriMatrix",(function(){return n.TriMatrix}))},"./unsupported/curve/Tw2CurveSetRange.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSetRange",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=b.meta.notImplemented,i=b.meta.type("Tw2CurveSetRange"),o=b.meta.string,a=b.meta.float,u=b.meta.boolean,c=b.meta.float,n(l=i((m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,e);var t=x(r);function r(){var e;g(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return v(e=t.call.apply(t,[this].concat(i)),"name",f,z(e)),v(e,"endTime",p,z(e)),v(e,"looped",d,z(e)),v(e,"startTime",y,z(e)),e}return r}(b.meta.Model),f=j((s=m).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=j(s.prototype,"endTime",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=j(s.prototype,"looped",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=j(s.prototype,"startTime",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=s))||l)||l)},"./unsupported/curve/adapter/Tr2RotationAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2RotationAdapter",(function(){return b}));var n,i,o,a=r("./global/utils/index.js"),u=r("./global/math/index.js"),c=r("./unsupported/curve/adapter/Tw2CurveAdapter.js");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=(0,a.meta.notImplemented)(n=a.meta.type("Tr2RotationAdapter")((o=i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,e);var t,r,n,i=d(o);function o(){var e;s(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r))).curve=null,e.value=u.vec4.create(),e}return t=o,(r=[{key:"GetValueAt",value:function(e,t){return this.curve&&this.curve.GetValueAt(e,this.value),u.vec4.copy(t,this.value)}}])&&f(t.prototype,r),n&&f(t,n),o}(c.Tw2CurveAdapter),i.outputDimension=4,n=o))||n)||n},"./unsupported/curve/adapter/Tr2TranslationAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2TranslationAdapter",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d=r("./global/utils/index.js"),y=r("./global/math/index.js"),m=r("./unsupported/curve/adapter/Tw2CurveAdapter.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=d.meta.notImplemented,i=d.meta.type("Tr2TranslationAdapter"),o=d.meta.struct("Tw2Curve"),a=d.meta.vector3,n(u=i((p=f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(o,e);var t,r,n,i=x(o);function o(){var e;v(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(e=i.call.apply(i,[this].concat(r)),"curve",l,z(e)),h(e,"value",s,z(e)),e}return t=o,(r=[{key:"GetValueAt",value:function(e,t){return this.curve&&this.curve.GetValueAt(e,this.value),y.vec3.copy(t,this.value)}}])&&g(t.prototype,r),n&&g(t,n),o}(m.Tw2CurveAdapter),f.outputDimension=3,l=j((c=p).prototype,"curve",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=j(c.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.vec3.create()}}),u=c))||u)||u)},"./unsupported/curve/adapter/Tw2CurveAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveAdapter",(function(){return m}));var n,i,o,a=r("./global/utils/index.js"),u=r("./curve/index.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=a.meta.type("Tw2CurveAdapter")((o=i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,e);var t,r,n,i=p(o);function o(){var e;l(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r))).name="",e.curve=null,e.value=null,e}return t=o,(r=[{key:"Sort",value:function(){this.curve&&this.curve.Sort()}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.value)}}])&&s(t.prototype,r),n&&s(t,n),o}(u.Tw2Curve),i.valueProperty="value",i.curveType=u.Tw2Curve.Type.ADAPTER,n=o))||n},"./unsupported/curve/adapter/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/curve/adapter/Tr2RotationAdapter.js");r.d(t,"Tr2RotationAdapter",(function(){return n.Tr2RotationAdapter}));var i=r("./unsupported/curve/adapter/Tr2TranslationAdapter.js");r.d(t,"Tr2TranslationAdapter",(function(){return i.Tr2TranslationAdapter}))},"./unsupported/curve/curve/AudEventCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AudEventKey",(function(){return I})),r.d(t,"AudEventCurve",(function(){return L}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S=r("./global/utils/index.js"),j=r("./curve/index.js");function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var i=C(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}function A(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var I=(n=S.meta.type("AudEventKey"),i=S.meta.float,o=S.meta.ushort,n((s=function(e){R(r,e);var t=D(r);function r(){var e;O(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return T(e=t.call.apply(t,[this].concat(i)),"time",c,M(e)),T(e,"value",l,M(e)),e}return r}(j.Tw2CurveKey),c=k((u=s).prototype,"time",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=k(u.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a=u))||a),L=(f=S.meta.notImplemented,p=S.meta.type("AudEventCurve"),d=S.meta.string,y=S.meta.uint,m=S.meta.list("AudEventKey"),b=S.meta.struct("TriObserverLocal"),f(h=p((z=function(e){R(r,e);var t=D(r);function r(){var e;O(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return T(e=t.call.apply(t,[this].concat(i)),"name",g,M(e)),T(e,"extrapolation",w,M(e)),T(e,"keys",x,M(e)),T(e,"sourceTriObserver",_,M(e)),e}return r}(j.Tw2Curve),g=k((v=z).prototype,"name",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=k(v.prototype,"extrapolation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=k(v.prototype,"keys",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=k(v.prototype,"sourceTriObserver",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=v))||h)||h)},"./unsupported/curve/curve/EveBezierCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBezierCurve",(function(){return Y}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L=r("./global/utils/index.js"),G=r("./curve/index.js"),F=r("./global/math/index.js");function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=X(e);if(t){var i=X(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return H(this,r)}}function H(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Y=(n=L.meta.notImplemented,i=L.meta.type("EveBezierCurve"),o=L.meta.boolean,a=L.meta.vector3,u=L.meta.struct(),c=L.meta.float,l=L.meta.float,s=L.meta.float,f=L.meta.vector3,p=L.meta.vector3,d=L.meta.vector3,y=L.meta.quaternion,m=L.meta.boolean,b=L.meta.boolean,h=L.meta.uint,v=L.meta.vector3,n(g=i((I=k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(r,e);var t=q(r);function r(){var e;U(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return N(e=t.call.apply(t,[this].concat(i)),"billboardObjects",x,W(e)),N(e,"bezierPoint",_,W(e)),N(e,"lineSet",z,W(e)),N(e,"lineWidth",S,W(e)),N(e,"movementScale",j,W(e)),N(e,"movementSpeed",E,W(e)),N(e,"objectScale",T,W(e)),N(e,"point1",O,W(e)),N(e,"point2",R,W(e)),N(e,"rotation",P,W(e)),N(e,"scaleEndpoints",D,W(e)),N(e,"scaleSegmentsByCompleteness",A,W(e)),N(e,"segments",M,W(e)),N(e,"translation",C,W(e)),e}return r}(G.Tw2Curve),k.inputDimension=0,k.outputDimension=0,k.valueProperty="value",k.curveType=G.Tw2Curve.Type.CURVE2,x=K((w=I).prototype,"billboardObjects",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=K(w.prototype,"bezierPoint",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.create()}}),z=K(w.prototype,"lineSet",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=K(w.prototype,"lineWidth",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),j=K(w.prototype,"movementScale",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),E=K(w.prototype,"movementSpeed",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),T=K(w.prototype,"objectScale",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.fromValues(1,1,1)}}),O=K(w.prototype,"point1",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.create()}}),R=K(w.prototype,"point2",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.create()}}),P=K(w.prototype,"rotation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.quat.create()}}),D=K(w.prototype,"scaleEndpoints",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=K(w.prototype,"scaleSegmentsByCompleteness",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=K(w.prototype,"segments",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=K(w.prototype,"translation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.create()}}),g=w))||g)||g)},"./unsupported/curve/curve/Tr2BoneMatrixCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2BoneMatrixCurve",(function(){return E}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js"),f=r("./curve/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,x,_,z,S,j,E=(n=s.meta.notImplemented,i=s.meta.type("Tr2BoneMatrixCurve"),o=s.meta.string,n(a=i((l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,e);var t=b(r);function r(){var e;y(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(e=t.call.apply(t,[this].concat(i)),"name",c,v(e)),e}return r}(f.Tw2Curve),w=(u=l).prototype,x="name",_=[o],z={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},j={},Object.keys(z).forEach((function(e){j[e]=z[e]})),j.enumerable=!!j.enumerable,j.configurable=!!j.configurable,("value"in j||j.initializer)&&(j.writable=!0),j=_.slice().reverse().reduce((function(e,t){return t(w,x,e)||e}),j),S&&void 0!==j.initializer&&(j.value=j.initializer?j.initializer.call(S):void 0,j.initializer=void 0),void 0===j.initializer&&(Object.defineProperty(w,x,j),j=null),c=j,a=u))||a)||a)},"./unsupported/curve/curve/Tr2CurveConstant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveConstant",(function(){return T}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js"),m=r("./global/math/index.js"),b=r("./curve/index.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return z(this,r)}}function z(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T=(n=y.meta.notImplemented,i=y.meta.type("Tw2CurveConstant"),o=y.meta.todo("Is this a curve or a key?"),a=y.meta.string,u=y.meta.vector4,n(c=i(c=o((d=p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(o,e);var t,r,n,i=_(o);function o(){var e;g(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(e=i.call.apply(i,[this].concat(r)),"name",s,S(e)),v(e,"value",f,S(e)),e}return t=o,(r=[{key:"Sort",value:function(){}},{key:"GetLength",value:function(){return 0}},{key:"UpdateValue",value:function(e,t){m.vec4.copy(t,this.value)}},{key:"currentValue",get:function(){return this.value}}])&&w(t.prototype,r),n&&w(t,n),o}(b.Tw2Curve),p.inputDimension=4,p.outputDimension=4,p.valueProperty="value",p.curveType=b.Tw2Curve.Type.CURVE_NO_KEYS,s=E((l=d).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=E(l.prototype,"value",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.vec4.create()}}),c=l))||c)||c)||c)},"./unsupported/curve/curve/Tr2CurveScalar.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveScalarKey",(function(){return ne})),r.d(t,"Tr2CurveScalar",(function(){return ie}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N=r("./global/utils/index.js"),U=r("./curve/index.js");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function X(e,t,r){return t&&W(e.prototype,t),r&&W(e,r),e}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=$(e);if(t){var i=$(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Z(this,r)}}function Z(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var te={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},re={NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3,CATMULROM:4},ne=(n=N.meta.type("Tw2CurveScalarKey"),i=N.meta.todo("Figure out how this basic curve works!"),o=N.meta.float,a=N.meta.uint,u=N.meta.uint,c=N.meta.uint,l=N.meta.float,s=N.meta.float,n(f=i((g=function(e){K(r,e);var t=Q(r);function r(){var e;H(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return q(e=t.call.apply(t,[this].concat(i)),"endTangent",d,J(e)),q(e,"extrapolation",y,J(e)),q(e,"index",m,J(e)),q(e,"interpolation",b,J(e)),q(e,"startTangent",h,J(e)),q(e,"value",v,J(e)),e}return X(r,null,[{key:"blackStruct",value:function(e){var t=new this;return t.time=e.ReadF32(),t.value=e.ReadF32(),t.startTangent=e.ReadF32(),t.endTangent=e.ReadF32(),t.index=e.ReadU16(),t.interpolation=e.ReadU8(),t.extrapolation=e.ReadU8(),t}}]),r}(U.Tw2CurveKey),d=ee((p=g).prototype,"endTangent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=ee(p.prototype,"extrapolation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=ee(p.prototype,"index",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=ee(p.prototype,"interpolation",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=ee(p.prototype,"startTangent",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=ee(p.prototype,"value",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=p))||f)||f),ie=(w=N.meta.notImplemented,x=N.meta.type("Tr2CurveScalar"),_=N.meta.string,z=N.meta.uint,S=N.meta.uint,j=N.meta.list(ne),E=N.meta.float,T=N.meta.float,O=N.meta.float,R=N.meta.isPrivate,w(P=x((B=F=function(e){K(r,e);var t=Q(r);function r(){var e;H(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return q(e=t.call.apply(t,[this].concat(i)),"name",A,J(e)),q(e,"extrapolationAfter",M,J(e)),q(e,"extrapolationBefore",C,J(e)),q(e,"keys",k,J(e)),q(e,"timeOffset",I,J(e)),q(e,"timeScale",L,J(e)),q(e,"currentValue",G,J(e)),e._currentKey=1,e._length=0,e}return X(r,[{key:"Sort",value:function(){this._length=U.Tw2Curve.Sort3(this.keys)}},{key:"GetLength",value:function(){return this._length}},{key:"UpdateValue",value:function(e){this.currentValue=this.GetValueAt(e)}},{key:"GetValueAt",value:function(e){if(e=e/this.timeScale-this.timeOffset,0===this._length)return this.currentValue;var t=this.keys[0],r=this.keys[this.keys.length-1];if(e>=r.time)switch(this.extrapolation){case te.NONE:return this.value;case te.CONSTANT:return r.value;case te.GRADIENT:return r.value+(e-r.time)*r.right;default:e%=r.time}else if(e<0||e<t.time)switch(this.extrapolation){case te.NONE:return this.value;case te.GRADIENT:return t.value+(e*this._length-r.time)*t.left;default:return t.value}for(var n=this.keys[this._currentKey],i=this.keys[this._currentKey-1];e>=n.time||e<i.time;)e<i.time&&(this._currentKey=0),this._currentKey++,n=this.keys[this._currentKey],i=this.keys[this._currentKey-1];var o=(e-i.time)/(n.time-i.time);switch(i.interpolation){case re.CONSTANT:return i.value;case re.LINEAR:return i.value*(1-o)+n.value*o;case re.HERMITE:var a=-2*o*o*o+3*o*o,u=o*o*o-2*o*o+o,c=o*o*o-o*o;return(2*o*o*o-3*o*o+1)*i.value+a*n.value+u*i.right+c*n.left;default:var l=1+(Math.sqrt(i.value/n.value)-1)*Math.exp(-e/i.right);return l*l*n.value}}}]),r}(U.Tw2Curve),F.inputDimension=1,F.outputDimension=1,F.valueProperty="currentValue",F.curveType=U.Tw2Curve.Type.CURVE3,F.Key=ne,F.Interpolation=re,F.Extrapolation=te,A=ee((D=B).prototype,"name",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=ee(D.prototype,"extrapolationAfter",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=ee(D.prototype,"extrapolationBefore",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=ee(D.prototype,"keys",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=ee(D.prototype,"timeOffset",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=ee(D.prototype,"timeScale",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=ee(D.prototype,"currentValue",[O,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=D))||P)||P)},"./unsupported/curve/curve/Tr2ScalarExprCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ScalarExprCurve",(function(){return B}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R=r("./curve/curve/index.js"),P=r("./global/utils/index.js");function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var i=G(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return I(this,r)}}function I(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var B=(n=P.meta.type("Tr2ScalarExprCurve"),i=P.meta.notImplemented,o=P.meta.float,a=P.meta.float,u=P.meta.float,c=P.meta.float,l=P.meta.isPrivate,s=P.meta.float,f=P.meta.isPrivate,p=P.meta.uint,d=P.meta.uint,y=P.meta.isPrivate,m=P.meta.string,b=P.meta.expression,n(h=i((O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(r,e);var t=k(r);function r(){var e;M(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return A(e=t.call.apply(t,[this].concat(i)),"input1",g,L(e)),A(e,"input2",w,L(e)),A(e,"input3",x,L(e)),A(e,"value",_,L(e)),A(e,"currentValue",z,L(e)),A(e,"cycle",S,L(e)),A(e,"length",j,L(e)),A(e,"name",E,L(e)),A(e,"expr",T,L(e)),e}return r}(R.Tw2Curve),g=F((v=O).prototype,"input1",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=F(v.prototype,"input2",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=F(v.prototype,"input3",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=F(v.prototype,"value",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=F(v.prototype,"currentValue",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=F(v.prototype,"cycle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=F(v.prototype,"length",[d,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=F(v.prototype,"name",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=F(v.prototype,"expr",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=v))||h)||h)},"./unsupported/curve/curve/Tr2ScalarExprKeyCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ScalarExprKey",(function(){return Z})),r.d(t,"Tr2ScalarExprKeyCurve",(function(){return J}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F=r("./global/utils/index.js"),B=r("./curve/index.js");function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Y(e);if(t){var i=Y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return X(this,r)}}function X(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Z=(n=F.meta.type("Tr2ScalarExprKey"),i=F.meta.float,o=F.meta.float,a=F.meta.float,u=F.meta.uint,c=F.meta.float,l=F.meta.float,s=F.meta.float,f=F.meta.expression,p=F.meta.float,d=F.meta.isPrivate,n((j=function(e){q(r,e);var t=W(r);function r(){var e;V(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return U(e=t.call.apply(t,[this].concat(i)),"input1",b,K(e)),U(e,"input2",h,K(e)),U(e,"input3",v,K(e)),U(e,"interpolation",g,K(e)),U(e,"left",w,K(e)),U(e,"right",x,K(e)),U(e,"time",_,K(e)),U(e,"timeExpression",z,K(e)),U(e,"value",S,K(e)),e}return r}(B.Tw2CurveKey),b=Q((m=j).prototype,"input1",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),h=Q(m.prototype,"input2",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=Q(m.prototype,"input3",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),g=Q(m.prototype,"interpolation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=Q(m.prototype,"left",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=Q(m.prototype,"right",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=Q(m.prototype,"time",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=Q(m.prototype,"timeExpression",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=Q(m.prototype,"value",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=m))||y),J=(E=F.meta.notImplemented,T=F.meta.type("Tr2ScalarExprKeyCurve"),O=F.meta.string,R=F.meta.uint,P=F.meta.list("Tr2ScalarExprKey"),D=F.meta.float,E(A=T((G=function(e){q(r,e);var t=W(r);function r(){var e;V(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return U(e=t.call.apply(t,[this].concat(i)),"name",C,K(e)),U(e,"interpolation",k,K(e)),U(e,"keys",I,K(e)),U(e,"currentValue",L,K(e)),e}return r}(B.Tw2Curve),C=Q((M=G).prototype,"name",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=Q(M.prototype,"interpolation",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=Q(M.prototype,"keys",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=Q(M.prototype,"currentValue",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=M))||A)||A)},"./unsupported/curve/curve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/curve/curve/AudEventCurve.js");r.d(t,"AudEventKey",(function(){return n.AudEventKey})),r.d(t,"AudEventCurve",(function(){return n.AudEventCurve}));var i=r("./unsupported/curve/curve/EveBezierCurve.js");r.d(t,"EveBezierCurve",(function(){return i.EveBezierCurve}));var o=r("./unsupported/curve/curve/Tr2BoneMatrixCurve.js");r.d(t,"Tr2BoneMatrixCurve",(function(){return o.Tr2BoneMatrixCurve}));var a=r("./unsupported/curve/curve/Tr2CurveConstant.js");r.d(t,"Tr2CurveConstant",(function(){return a.Tr2CurveConstant}));var u=r("./unsupported/curve/curve/Tr2CurveScalar.js");r.d(t,"Tw2CurveScalarKey",(function(){return u.Tw2CurveScalarKey})),r.d(t,"Tr2CurveScalar",(function(){return u.Tr2CurveScalar}));var c=r("./unsupported/curve/curve/Tr2ScalarExprKeyCurve.js");r.d(t,"Tr2ScalarExprKey",(function(){return c.Tr2ScalarExprKey})),r.d(t,"Tr2ScalarExprKeyCurve",(function(){return c.Tr2ScalarExprKeyCurve}));var l=r("./unsupported/curve/curve/Tr2ScalarExprCurve.js");r.d(t,"Tr2ScalarExprCurve",(function(){return l.Tr2ScalarExprCurve}))},"./unsupported/curve/expression/Tr2CurveEulerRotationExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveEulerRotationExpression",(function(){return I}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S=r("./global/utils/index.js"),j=r("./global/math/index.js"),E=r("./unsupported/curve/expression/Tw2CurveExpression.js");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var i=C(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}function A(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var I=(n=S.meta.notImplemented,i=S.meta.type("Tr2CurveEulerRotationExpression"),o=S.meta.string,a=S.meta.float,u=S.meta.list(),c=S.meta.expression,l=S.meta.expression,s=S.meta.expression,f=S.meta.quaternion,p=S.meta.isPrivate,n(d=i((z=_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(r,e);var t=D(r);function r(){var e;R(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return O(e=t.call.apply(t,[this].concat(i)),"name",m,M(e)),O(e,"input1",b,M(e)),O(e,"inputs",h,M(e)),O(e,"expressionPitch",v,M(e)),O(e,"expressionRoll",g,M(e)),O(e,"expressionYaw",w,M(e)),O(e,"currentValue",x,M(e)),e}return r}(E.Tw2CurveExpression),_.inputDimension=1,_.outputDimension=4,_.valueProperty="currentValue",_.childProperties=["expressionPitch","expressionRoll","expressionYaw"],m=k((y=z).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=k(y.prototype,"input1",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=k(y.prototype,"inputs",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=k(y.prototype,"expressionPitch",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=k(y.prototype,"expressionRoll",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=k(y.prototype,"expressionYaw",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=k(y.prototype,"currentValue",[f,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.quat.create()}}),d=y))||d)||d)},"./unsupported/curve/expression/Tr2CurveScalarExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveScalarExpression",(function(){return G}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T=r("./unsupported/curve/expression/Tw2CurveExpression.js"),O=r("./global/utils/index.js");function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var G=(n=O.meta.notImplemented,i=O.meta.type("Tr2CurveScalarExpression"),o=O.meta.string,a=O.meta.list(),u=O.meta.expression,c=O.meta.float,l=O.meta.todo("Figure out the default value"),s=O.meta.float,f=O.meta.todo("Figure out the default value"),p=O.meta.float,d=O.meta.todo("Figure out the default value"),y=O.meta.float,m=O.meta.isPrivate,n(b=i((E=j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(r,e);var t=M(r);function r(){var e;D(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return P(e=t.call.apply(t,[this].concat(i)),"name",v,k(e)),P(e,"inputs",g,k(e)),P(e,"expression",w,k(e)),P(e,"input1",x,k(e)),P(e,"input2",_,k(e)),P(e,"input3",z,k(e)),P(e,"currentValue",S,k(e)),e}return r}(T.Tw2CurveExpression),j.inputDimension=1,j.outputDimension=1,j.valueProperty="currentValue",j.childProperties=["expression"],v=L((h=E).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=L(h.prototype,"inputs",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=L(h.prototype,"expression",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=L(h.prototype,"input1",[c,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),_=L(h.prototype,"input2",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),z=L(h.prototype,"input3",[p,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),S=L(h.prototype,"currentValue",[y,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=h))||b)||b)},"./unsupported/curve/expression/Tr2CurveVector3Expression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveVector3Expression",(function(){return C}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_=r("./global/utils/index.js"),z=r("./global/math/index.js"),S=r("./unsupported/curve/expression/Tw2CurveExpression.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var C=(n=_.meta.notImplemented,i=_.meta.type("Tr2CurveVector3Expression"),o=_.meta.string,a=_.meta.list(),u=_.meta.expression,c=_.meta.expression,l=_.meta.expression,s=_.meta.vector3,f=_.meta.isPrivate,n(p=i((x=w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(r,e);var t=R(r);function r(){var e;T(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return E(e=t.call.apply(t,[this].concat(i)),"name",y,D(e)),E(e,"inputs",m,D(e)),E(e,"expressionX",b,D(e)),E(e,"expressionY",h,D(e)),E(e,"expressionZ",v,D(e)),E(e,"currentValue",g,D(e)),e}return r}(S.Tw2CurveExpression),w.inputDimension=1,w.outputDimension=3,w.valueProperty="currentValue",w.childProperties=["expressionX","expressionY","expressionZ"],y=M((d=x).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=M(d.prototype,"inputs",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=M(d.prototype,"expressionX",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=M(d.prototype,"expressionY",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=M(d.prototype,"expressionZ",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=M(d.prototype,"currentValue",[s,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.vec3.create()}}),p=d))||p)||p)},"./unsupported/curve/expression/Tw2CurveExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveExpression",(function(){return S}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./curve/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=p.meta.type("Tw2CurveExpression"),i=p.meta.string,o=p.meta.list(),n((f=s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,r,n,i=g(o);function o(){var e;b(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(e=i.call.apply(i,[this].concat(r)),"name",c,x(e)),m(e,"inputs",l,x(e)),e}return t=o,(r=[{key:"GetValueAt",value:function(){}},{key:"UpdateValue",value:function(e){this.GetValueAt(e,this.currentValue)}}])&&h(t.prototype,r),n&&h(t,n),o}(d.Tw2Curve),s.curveType=d.Tw2Curve.Type.EXPRESSION,c=z((u=f).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=z(u.prototype,"inputs",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=u))||a)},"./unsupported/curve/expression/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/curve/expression/Tr2CurveEulerRotationExpression.js");r.d(t,"Tr2CurveEulerRotationExpression",(function(){return n.Tr2CurveEulerRotationExpression}));var i=r("./unsupported/curve/expression/Tr2CurveScalarExpression.js");r.d(t,"Tr2CurveScalarExpression",(function(){return i.Tr2CurveScalarExpression}));var o=r("./unsupported/curve/expression/Tr2CurveVector3Expression.js");r.d(t,"Tr2CurveVector3Expression",(function(){return o.Tr2CurveVector3Expression}));var a=r("./unsupported/curve/expression/Tw2CurveExpression.js");r.d(t,"Tw2CurveExpression",(function(){return a.Tw2CurveExpression}))},"./unsupported/curve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/curve/adapter/index.js");r.d(t,"Tr2RotationAdapter",(function(){return n.Tr2RotationAdapter})),r.d(t,"Tr2TranslationAdapter",(function(){return n.Tr2TranslationAdapter}));var i=r("./unsupported/curve/curve/index.js");r.d(t,"AudEventKey",(function(){return i.AudEventKey})),r.d(t,"AudEventCurve",(function(){return i.AudEventCurve})),r.d(t,"EveBezierCurve",(function(){return i.EveBezierCurve})),r.d(t,"Tr2BoneMatrixCurve",(function(){return i.Tr2BoneMatrixCurve})),r.d(t,"Tr2CurveConstant",(function(){return i.Tr2CurveConstant})),r.d(t,"Tw2CurveScalarKey",(function(){return i.Tw2CurveScalarKey})),r.d(t,"Tr2CurveScalar",(function(){return i.Tr2CurveScalar})),r.d(t,"Tr2ScalarExprKey",(function(){return i.Tr2ScalarExprKey})),r.d(t,"Tr2ScalarExprKeyCurve",(function(){return i.Tr2ScalarExprKeyCurve})),r.d(t,"Tr2ScalarExprCurve",(function(){return i.Tr2ScalarExprCurve}));var o=r("./unsupported/curve/expression/index.js");r.d(t,"Tr2CurveEulerRotationExpression",(function(){return o.Tr2CurveEulerRotationExpression})),r.d(t,"Tr2CurveScalarExpression",(function(){return o.Tr2CurveScalarExpression})),r.d(t,"Tr2CurveVector3Expression",(function(){return o.Tr2CurveVector3Expression})),r.d(t,"Tw2CurveExpression",(function(){return o.Tw2CurveExpression}));var a=r("./unsupported/curve/Tw2CurveSetRange.js");r.d(t,"Tw2CurveSetRange",(function(){return a.Tw2CurveSetRange}))},"./unsupported/eve/animation/EveAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimation",(function(){return y}));var n,i,o,a,u,c,l,s,f=r("./global/utils/index.js");function p(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function d(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var y=(n=f.meta.notImplemented,i=f.meta.type("EveAnimation"),o=f.meta.string,a=f.meta.uint,n(u=i((l=d((c=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"name",l,this),p(this,"loops",s,this)}).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=d(c.prototype,"loops",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=c))||u)||u)},"./unsupported/eve/animation/EveAnimationCommand.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationCommand",(function(){return v}));var n,i,o,a,u,c,l,s,f=r("./global/utils/index.js");var p,d,y,m,b,h,v=(n=f.meta.notImplemented,i=f.meta.type("EveAnimationCommand"),o=f.meta.uint,a=f.meta.todo("Identify default value"),n(u=i((s=function e(){var t,r,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="command",i=this,(n=l)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})},p=(c=s).prototype,d="command",y=[o,a],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}},h={},Object.keys(m).forEach((function(e){h[e]=m[e]})),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=y.slice().reverse().reduce((function(e,t){return t(p,d,e)||e}),h),b&&void 0!==h.initializer&&(h.value=h.initializer?h.initializer.call(b):void 0,h.initializer=void 0),void 0===h.initializer&&(Object.defineProperty(p,d,h),h=null),l=h,u=c))||u)||u)},"./unsupported/eve/animation/EveAnimationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationCurve",(function(){return h}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");var f,p,d,y,m,b,h=(n=s.meta.notImplemented,i=s.meta.type("EveAnimationCurve"),o=s.meta.string,n(a=i((l=function e(){var t,r,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="name",i=this,(n=c)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})},f=(u=l).prototype,p="name",d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},b={},Object.keys(y).forEach((function(e){b[e]=y[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(f,p,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(f,p,b),b=null),c=b,a=u))||a)||a)},"./unsupported/eve/animation/EveAnimationState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationState",(function(){return z}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g=r("./global/utils/index.js"),w=r("./unsupported/eve/animation/EveAnimationStateTransition.js");function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=g.meta.notImplemented,i=g.meta.type("EveAnimationState"),o=g.meta.string,a=g.meta.struct("EveAnimationCurve"),u=g.meta.list("EveAnimationCommand"),c=g.meta.list("EveAnimationCommand"),l=g.meta.list("EveAnimationCommand"),s=g.meta.list(w.EveAnimationStateTransition),n(f=i((d=_((p=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"name",d,this),x(this,"animation",y,this),x(this,"curves",m,this),x(this,"commands",b,this),x(this,"initCommands",h,this),x(this,"transitions",v,this)}).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=_(p.prototype,"animation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=_(p.prototype,"curves",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=_(p.prototype,"commands",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=_(p.prototype,"initCommands",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=_(p.prototype,"transitions",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=p))||f)||f)},"./unsupported/eve/animation/EveAnimationStateMachine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationStateMachine",(function(){return _}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g=r("./global/utils/index.js");function w(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=g.meta.notImplemented,i=g.meta.type("EveAnimationStateMachine"),o=g.meta.string,a=g.meta.boolean,u=g.meta.list("EveAnimationState"),c=g.meta.list("EveAnimationStateTransition"),l=g.meta.string,s=g.meta.string,n(f=i((d=x((p=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"name",d,this),w(this,"autoPlayDefault",y,this),w(this,"states",m,this),w(this,"transitions",b,this),w(this,"trackMask",h,this),w(this,"defaultAnimation",v,this)}).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=x(p.prototype,"autoPlayDefault",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=x(p.prototype,"states",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=x(p.prototype,"transitions",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=x(p.prototype,"trackMask",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=x(p.prototype,"defaultAnimation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=p))||f)||f)},"./unsupported/eve/animation/EveAnimationStateTransition.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationStateTransition",(function(){return m}));var n,i,o,a,u,c,l,s,f=r("./global/utils/index.js");function p(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var m=(n=f.meta.notImplemented,i=f.meta.type("EveAnimationStateTransition"),o=f.meta.string,a=f.meta.string,n(u=i((l=y((c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"state",l,this),p(this,"transition",s,this)}var t,r,n;return t=e,n=[{key:"blackStruct",value:function(t){var r=new e;return r.state=t.ReadStringU16(),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),r.transition=t.ReadStringU16(),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),r}}],(r=null)&&d(t.prototype,r),n&&d(t,n),e}()).prototype,"state",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=y(c.prototype,"transition",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=c))||u)||u)},"./unsupported/eve/animation/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/eve/animation/EveAnimation.js");r.d(t,"EveAnimation",(function(){return n.EveAnimation}));var i=r("./unsupported/eve/animation/EveAnimationCommand.js");r.d(t,"EveAnimationCommand",(function(){return i.EveAnimationCommand}));var o=r("./unsupported/eve/animation/EveAnimationCurve.js");r.d(t,"EveAnimationCurve",(function(){return o.EveAnimationCurve}));var a=r("./unsupported/eve/animation/EveAnimationState.js");r.d(t,"EveAnimationState",(function(){return a.EveAnimationState}));var u=r("./unsupported/eve/animation/EveAnimationStateMachine.js");r.d(t,"EveAnimationStateMachine",(function(){return u.EveAnimationStateMachine}))},"./unsupported/eve/child/EveChildBulletStorm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildBulletStorm",(function(){return P}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./eve/child/index.js"),g=r("./global/utils/index.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P=(n=g.meta.notImplemented,i=g.meta.type("EveChildBulletStorm"),o=g.meta.struct("Tw2Effect"),a=g.meta.uint,u=g.meta.float,c=g.meta.string,l=g.meta.float,n(s=i((h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,r,n,i=j(o);function o(){var e;_(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(e=i.call.apply(i,[this].concat(r)),"effect",p,T(e)),x(e,"multiplier",d,T(e)),x(e,"range",y,T(e)),x(e,"sourceLocatorSet",m,T(e)),x(e,"speed",b,T(e)),e}return t=o,(r=[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}}])&&z(t.prototype,r),n&&z(t,n),o}(v.EveChild),p=R((f=h).prototype,"effect",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=R(f.prototype,"multiplier",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=R(f.prototype,"range",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=R(f.prototype,"sourceLocatorSet",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=R(f.prototype,"speed",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=f))||s)||s)},"./unsupported/eve/child/EveChildCloud.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildCloud",(function(){return L}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S=r("./global/utils/index.js"),j=r("./global/math/index.js"),E=r("./eve/child/index.js");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var i=k(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return M(this,r)}}function M(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var L=(n=S.meta.notImplemented,i=S.meta.type("EveChildCloud"),o=S.meta.string,a=S.meta.float,u=S.meta.struct("Tw2Effect"),c=S.meta.uint,l=S.meta.quaternion,s=S.meta.vector3,f=S.meta.float,p=S.meta.vector3,n(d=i((z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(o,e);var t,r,n,i=A(o);function o(){var e;R(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return O(e=i.call.apply(i,[this].concat(r)),"name",m,C(e)),O(e,"cellScreenSize",b,C(e)),O(e,"effect",h,C(e)),O(e,"preTesselationLevel",v,C(e)),O(e,"rotation",g,C(e)),O(e,"scaling",w,C(e)),O(e,"sortingModifier",x,C(e)),O(e,"translation",_,C(e)),e}return t=o,(r=[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}}])&&P(t.prototype,r),n&&P(t,n),o}(E.EveChild),m=I((y=z).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=I(y.prototype,"cellScreenSize",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=I(y.prototype,"effect",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=I(y.prototype,"preTesselationLevel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=I(y.prototype,"rotation",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.quat.create()}}),w=I(y.prototype,"scaling",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.vec3.fromValues(1,1,1)}}),x=I(y.prototype,"sortingModifier",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=I(y.prototype,"translation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.vec3.create()}}),d=y))||d)||d)},"./unsupported/eve/child/EveChildEffectPropagator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildEffectPropagator",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w=r("./global/utils/index.js"),x=r("./eve/child/index.js"),_=r("./unsupported/curve/index.js");r("./eve/index.js");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var A=(n=w.meta.notImplemented,i=w.meta.type("EveChildEffectPropagator",!0),o=w.meta.string,a=w.meta.struct("Tw2Effect"),u=w.meta.list(_.Tw2CurveScalarKey),c=w.meta.float,l=w.meta.struct(),s=w.meta.float,n(f=i((g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(r,e);var t=T(r);function r(){var e;j(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return S(e=t.call.apply(t,[this].concat(i)),"name",d,R(e)),S(e,"effect",y,R(e)),S(e,"keys",m,R(e)),S(e,"maxLifeTime",b,R(e)),S(e,"triggerSphereRadiusCurve",h,R(e)),S(e,"turbulenceAmplitude",v,R(e)),e}return r}(x.EveChild),d=D((p=g).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=D(p.prototype,"effect",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=D(p.prototype,"keys",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=D(p.prototype,"maxLifeTime",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=D(p.prototype,"triggerSphereRadiusCurve",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=D(p.prototype,"turbulenceAmplitude",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=p))||f)||f)},"./unsupported/eve/child/EveChildExplosion.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildExplosion",(function(){return Y}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I=r("./global/utils/index.js"),L=r("./global/math/index.js"),G=r("./eve/child/index.js");function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=X(e);if(t){var i=X(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return H(this,r)}}function H(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Y=(n=I.meta.notImplemented,i=I.meta.type("EveChildExplosion"),o=I.meta.string,a=I.meta.float,u=I.meta.struct("EveChildExplosion"),c=I.meta.float,l=I.meta.vector3,s=I.meta.float,f=I.meta.struct("EveChildExplosion"),p=I.meta.float,d=I.meta.float,y=I.meta.struct("EveChildExplosion"),m=I.meta.list("EveChildExplosion"),b=I.meta.matrix4,h=I.meta.quaternion,v=I.meta.vector3,n(g=i((k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(o,e);var t,r,n,i=q(o);function o(){var e;N(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return B(e=i.call.apply(i,[this].concat(r)),"name",x,W(e)),B(e,"globalDuration",_,W(e)),B(e,"globalExplosion",z,W(e)),B(e,"globalExplosionDelay",S,W(e)),B(e,"globalScaling",j,W(e)),B(e,"localDuration",E,W(e)),B(e,"localExplosion",T,W(e)),B(e,"localExplosionInterval",O,W(e)),B(e,"localExplosionIntervalFactor",R,W(e)),B(e,"localExplosionShared",P,W(e)),B(e,"localExplosions",D,W(e)),B(e,"localTransform",A,W(e)),B(e,"rotation",M,W(e)),B(e,"scaling",C,W(e)),e}return t=o,(r=[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.localExplosion&&this.localExplosion.GetResources(e),this.localExplosionShared&&this.localExplosionShared.GetResources(e);for(var t=0;t<this.localExplosions.length;t++)this.localExplosions[t].GetResources(e);return e}}])&&U(t.prototype,r),n&&U(t,n),o}(G.EveChild),x=K((w=k).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=K(w.prototype,"globalDuration",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=K(w.prototype,"globalExplosion",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=K(w.prototype,"globalExplosionDelay",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=K(w.prototype,"globalScaling",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.vec3.fromValues(1,1,1)}}),E=K(w.prototype,"localDuration",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=K(w.prototype,"localExplosion",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=K(w.prototype,"localExplosionInterval",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=K(w.prototype,"localExplosionIntervalFactor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=K(w.prototype,"localExplosionShared",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=K(w.prototype,"localExplosions",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=K(w.prototype,"localTransform",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.mat4.create()}}),M=K(w.prototype,"rotation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.quat.create()}}),C=K(w.prototype,"scaling",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.vec3.fromValues(1,1,1)}}),g=w))||g)||g)},"./unsupported/eve/child/EveChildInheritProperties.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildInheritProperties",(function(){return f}));var n,i=r("./global/utils/index.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=(0,i.meta.notImplemented)(n=i.meta.type("EveChildInheritProperties")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(r,e);var t=c(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(i.meta.Model))||n)||n},"./unsupported/eve/child/EveChildInstanceContainer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildInstanceContainer",(function(){return z}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./global/math/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=p.meta.notImplemented,i=p.meta.type("EveChildInstanceContainer"),o=p.meta.struct(),a=p.meta.vector3,n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=v(r);function r(){var e;b(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return m(e=t.call.apply(t,[this].concat(i)),"source",l,w(e)),m(e,"scaling",s,w(e)),e}return r}(p.meta.Model),l=_((c=f).prototype,"source",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=_(c.prototype,"scaling",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.vec3.fromValues(1,1,1)}}),u=c))||u)||u)},"./unsupported/eve/child/EveChildLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildLineSet",(function(){return W}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C=r("./global/utils/index.js"),k=r("./eve/child/index.js"),I=r("./global/math/index.js");function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=q(e);if(t){var i=q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var W=(n=C.meta.notImplemented,i=C.meta.type("EveChildLineSet"),o=C.meta.string,a=C.meta.boolean,u=C.meta.vector4,c=C.meta.vector4,l=C.meta.float,s=C.meta.boolean,f=C.meta.list(),p=C.meta.struct(),d=C.meta.float,y=C.meta.quaternion,m=C.meta.vector3,b=C.meta.float,h=C.meta.vector3,n(v=i((M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(r,e);var t=N(r);function r(){var e;F(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return G(e=t.call.apply(t,[this].concat(i)),"name",w,V(e)),G(e,"additiveBatches",x,V(e)),G(e,"animColor",_,V(e)),G(e,"baseColor",z,V(e)),G(e,"brightness",S,V(e)),G(e,"display",j,V(e)),G(e,"lines",E,V(e)),G(e,"lineSet",T,V(e)),G(e,"minScreenSize",O,V(e)),G(e,"rotation",R,V(e)),G(e,"scaling",P,V(e)),G(e,"scrollSpeed",D,V(e)),G(e,"translation",A,V(e)),e}return r}(k.EveChild),w=H((g=M).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=H(g.prototype,"additiveBatches",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=H(g.prototype,"animColor",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.vec4.fromValues(0,0,0,1)}}),z=H(g.prototype,"baseColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.vec4.fromValues(0,0,0,1)}}),S=H(g.prototype,"brightness",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),j=H(g.prototype,"display",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=H(g.prototype,"lines",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=H(g.prototype,"lineSet",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=H(g.prototype,"minScreenSize",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=H(g.prototype,"rotation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.quat.create()}}),P=H(g.prototype,"scaling",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.vec3.create()}}),D=H(g.prototype,"scrollSpeed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=H(g.prototype,"translation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.vec3.create()}}),v=g))||v)||v)},"./unsupported/eve/child/EveChildLink.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildLink",(function(){return D}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v=r("./global/utils/index.js"),g=r("./global/math/index.js"),w=r("./eve/child/index.js");function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D=(n=v.meta.notImplemented,i=v.meta.type("EveChildLink"),o=v.meta.string,a=v.meta.list("Tw2ValueBinding"),u=v.meta.list("Tw2Curve"),c=v.meta.struct("Tw2Mesh"),l=v.meta.quaternion,n(s=i((h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,r,n,i=E(o);function o(){var e;z(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _(e=i.call.apply(i,[this].concat(r)),"name",p,O(e)),_(e,"linkStrengthBindings",d,O(e)),_(e,"linkStrengthCurves",y,O(e)),_(e,"mesh",m,O(e)),_(e,"rotation",b,O(e)),e}return t=o,(r=[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.mesh&&this.mesh.GetResources(e),e}}])&&S(t.prototype,r),n&&S(t,n),o}(w.EveChild),p=P((f=h).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=P(f.prototype,"linkStrengthBindings",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=P(f.prototype,"linkStrengthCurves",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=P(f.prototype,"mesh",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=P(f.prototype,"rotation",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.quat.create()}}),s=f))||s)||s)},"./unsupported/eve/child/EveChildParticleSphere.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildParticleSphere",(function(){return q}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A=r("./global/utils/index.js"),M=r("./eve/child/index.js");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=U(e);if(t){var i=U(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return B(this,r)}}function B(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var q=(n=A.meta.notImplemented,i=A.meta.type("EveChildParticleSphere"),o=A.meta.string,a=A.meta.list("Tw2ParticleAttributeGenerator"),u=A.meta.float,c=A.meta.struct("Tw2InstancedMesh"),l=A.meta.float,s=A.meta.struct("Tw2ParticleSystem"),f=A.meta.float,p=A.meta.float,d=A.meta.float,y=A.meta.float,m=A.meta.float,b=A.meta.boolean,n(h=i((D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(o,e);var t,r,n,i=F(o);function o(){var e;I(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return k(e=i.call.apply(i,[this].concat(r)),"name",g,N(e)),k(e,"generators",w,N(e)),k(e,"maxSpeed",x,N(e)),k(e,"mesh",_,N(e)),k(e,"movementScale",z,N(e)),k(e,"particleSystem",S,N(e)),k(e,"positionShiftDecreaseSpeed",j,N(e)),k(e,"positionShiftIncreaseSpeed",E,N(e)),k(e,"positionShiftMax",T,N(e)),k(e,"positionShiftMin",O,N(e)),k(e,"radius",R,N(e)),k(e,"useSpaceObjectData",P,N(e)),e}return t=o,(r=[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.mesh&&this.mesh.GetResources(e),this.particleSystem&&this.particleSystem.GetResources&&this.particleSystem.GetResources(e),e}}])&&L(t.prototype,r),n&&L(t,n),o}(M.EveChild),g=V((v=D).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=V(v.prototype,"generators",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=V(v.prototype,"maxSpeed",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=V(v.prototype,"mesh",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=V(v.prototype,"movementScale",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=V(v.prototype,"particleSystem",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=V(v.prototype,"positionShiftDecreaseSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=V(v.prototype,"positionShiftIncreaseSpeed",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=V(v.prototype,"positionShiftMax",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=V(v.prototype,"positionShiftMin",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=V(v.prototype,"radius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=V(v.prototype,"useSpaceObjectData",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=v))||h)||h)},"./unsupported/eve/child/EveChildQuad.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildQuad",(function(){return W}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D=r("./global/utils/index.js"),A=r("./global/math/index.js"),M=r("./eve/child/index.js"),C=r("./global/tw2.js"),k=r("./core/index.js");function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=q(e);if(t){var i=q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var W=(n=D.meta.notImplemented,i=D.meta.type("EveChildQuad"),o=D.meta.boolean,a=D.meta.string,u=D.meta.float,c=D.meta.color,l=D.meta.struct(),s=D.meta.matrix4,f=D.meta.float,p=D.meta.quaternion,d=D.meta.vector3,y=D.meta.vector3,m=D.meta.float32Array,n(b=i((P=R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(o,e);var t,r,n,i=N(o);function o(){var e;G(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return L(e=i.call.apply(i,[this].concat(r)),"display",v,V(e)),L(e,"name",g,V(e)),L(e,"brightness",w,V(e)),L(e,"color",x,V(e)),L(e,"effect",_,V(e)),L(e,"localTransform",z,V(e)),L(e,"minScreenSize",S,V(e)),L(e,"rotation",j,V(e)),L(e,"scaling",E,V(e)),L(e,"translation",T,V(e)),L(e,"viewRotation",O,V(e)),e._worldTransform=A.mat4.create(),e._worldTransformLast=A.mat4.create(),e._vertexSize=35,e._decl=k.Tw2VertexDeclaration.from(o.vertexDeclarations),e._perObjectData=k.Tw2PerObjectData.from(o.perObjectData),e._vertices=null,e._temp=A.mat4.create(),e._sourceMat0=A.mat4.create(),e._sourceMat0Transpose=!0,e._sourceMat1=e.viewRotation,e._sourceMat1Transpose=!0,e._sourceMat2=e.localTransform,e._sourceMat2Transpose=!0,e._sourceFloat=10,e._setVertexValues=e._setVertexValues2,e}return t=o,(r=[{key:"Initialize",value:function(){this._dirty=!0}},{key:"IsGood",value:function(){return!!(this.effect&&this.effect.IsGood()&&this._vertices)}},{key:"KeepAlive",value:function(){this.effect&&this.effect.KeepAlive()}},{key:"Unload",value:function(){this._vertices&&(C.device.gl.deleteBuffer(this._vertices),this._vertices=null)}},{key:"OnValueChanged",value:function(e){this._dirty=!0}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}},{key:"Update",value:function(e,t,r){if(this.display){A.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling),this._parentTransform=t,A.mat4.copy(this._worldTransformLast,this._worldTransform),A.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._worldTransform),A.mat4.multiply(this._worldTransform,t,this.localTransform),A.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._worldTransform);var n=A.mat4.copy(this._temp,this._sourceMat2);this._sourceMat2Transpose&&A.mat4.transpose(n,n),A.mat4.copy(this._perObjectData.vs.Get("UnknownMat"),n),this.brightness=10,this._perObjectData.vs.data[48]=this._sourceFloat,this._dirty&&this.Rebuild()}}},{key:"_setVertexValues1",value:function(e,t,r){var n=t*r,i=A.mat4.copy(this._temp,this._sourceMat0);this._sourceMat0Transpose&&A.mat4.transpose(i,i),e[n]=i[0],e[n+1]=i[4],e[n+2]=i[8],e[n+3]=i[12],e[n+4]=i[1],e[n+5]=i[5],e[n+6]=i[9],e[n+7]=i[13],e[n+8]=i[2],e[n+9]=i[6],e[n+10]=i[10],e[n+11]=i[14],A.mat4.copy(i,this._sourceMat1),this._sourceMat1Transpose&&A.mat4.transpose(i,i),e[n+12]=i[0],e[n+13]=i[4],e[n+14]=i[8],e[n+15]=i[12],e[n+16]=i[1],e[n+17]=i[5],e[n+18]=i[9],e[n+19]=i[13],e[n+20]=i[2],e[n+21]=i[6],e[n+22]=i[10],e[n+23]=i[14],e[n+24]=this.scaling[0],e[n+25]=this.scaling[1],e[n+26]=this.scaling[2],e[n+27]=this.brightness,e[n+28]=this.color[0],e[n+29]=this.color[1],e[n+30]=this.color[2],e[n+31]=this.color[3],e[n+32]=this.constructor.thing[t]}},{key:"_setVertexValues2",value:function(e,t,r){var n=t*r,i=A.mat4.copy(this._temp,this._sourceMat0);this._sourceMat0Transpose&&A.mat4.transpose(i,i),e[n]=o.thing[t],e[n+1]=0,e[n+2]=0,e[n+3]=0,e[n+4]=i[0],e[n+5]=i[4],e[n+6]=i[8],e[n+7]=i[12],e[n+8]=i[1],e[n+9]=i[5],e[n+10]=i[9],e[n+11]=i[13],e[n+12]=i[2],e[n+13]=i[6],e[n+14]=i[10],e[n+15]=i[14],A.mat4.copy(i,this._sourceMat1),this._sourceMat1Transpose&&A.mat4.transpose(i,i),e[n+16]=i[0],e[n+17]=i[4],e[n+18]=i[8],e[n+19]=i[12],e[n+20]=i[1],e[n+21]=i[5],e[n+22]=i[9],e[n+23]=i[13],e[n+24]=i[2],e[n+25]=i[6],e[n+26]=i[10],e[n+27]=i[14],e[n+28]=this.color[0],e[n+29]=this.color[1],e[n+30]=this.color[2],e[n+31]=this.color[3],e[n+32]=this.brightness}},{key:"Rebuild",value:function(){this.Unload();for(var e=C.device.gl,t=this._vertexSize,r=new Float32Array(6*t),n=0;n<6;n++)this._setVertexValues(r,n,t);this._vertices=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertices),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._vertices.count=6,this._dirty=!1}},{key:"GetBatches",value:function(e,t,r){if(!this.display||!this.IsGood()||e!==C.device.RM_ADDITIVE||!this._vertices.count)return!1;var n=new k.Tw2ForwardingRenderBatch;return n.geometryProvider=this,n.perObjectData=this._perObjectData,n.renderMode=e,t.Commit(n),!0}},{key:"Render",value:function(e){if(!this.display||!this.IsGood())return!1;var t=C.device,r=t.gl,n=4*this._vertexSize;t.SetStandardStates(t.RM_ADDITIVE),r.bindBuffer(r.ARRAY_BUFFER,this._vertices);for(var i=0;i<this.effect.GetPassCount(e);++i){if(this.effect.ApplyPass(e,i),!this._decl.SetDeclaration(t,this.effect.GetPassInput(e,i),n))return!1;t.ApplyShadowState(),r.drawArrays(r.TRIANGLES,0,this._vertices.count)}return!0}}])&&F(t.prototype,r),n&&F(t,n),o}(M.EveChild),R.thing=[.5,1.5,2.5,3.5,4.5,5.5],R.perObjectData={vs:[["WorldMat",16],["WorldMatLast",16],["UnknownMat",16],["WorldBrightness",1]]},R.vertices0=[{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:4},{usage:"TEXCOORD",usageIndex:4,elements:4},{usage:"TEXCOORD",usageIndex:5,elements:4},{usage:"TEXCOORD",usageIndex:6,elements:4},{usage:"COLOR",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:7,elements:1}],R.vertexDeclarations=[{usage:"TEXCOORD",usageIndex:5,elements:4},{usage:"POSITION",usageIndex:0,elements:4},{usage:"POSITION",usageIndex:1,elements:4},{usage:"POSITION",usageIndex:2,elements:4},{usage:"POSITION",usageIndex:3,elements:4},{usage:"POSITION",usageIndex:4,elements:4},{usage:"POSITION",usageIndex:5,elements:4},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:1}],v=H((h=P).prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=H(h.prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=H(h.prototype,"brightness",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=H(h.prototype,"color",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.vec4.create()}}),_=H(h.prototype,"effect",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=H(h.prototype,"localTransform",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.mat4.create()}}),S=H(h.prototype,"minScreenSize",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=H(h.prototype,"rotation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.quat.create()}}),E=H(h.prototype,"scaling",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.vec3.fromValues(1,1,1)}}),T=H(h.prototype,"translation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.vec3.create()}}),O=H(h.prototype,"viewRotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.mat4.create()}}),b=h))||b)||b)},"./unsupported/eve/child/EveChildSpherePin.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildSpherePin",(function(){return A}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w=r("./global/utils/index.js"),x=r("./eve/child/index.js"),_=r("./global/math/index.js");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var A=(n=w.meta.notImplemented,i=w.meta.type("EveChildSpherePin"),o=w.meta.string,a=w.meta.vector3,u=w.meta.float,c=w.meta.float,l=w.meta.struct(),s=w.meta.uint,n(f=i((g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(r,e);var t=T(r);function r(){var e;j(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return S(e=t.call.apply(t,[this].concat(i)),"name",d,R(e)),S(e,"centerNormal",y,R(e)),S(e,"pinRadius",m,R(e)),S(e,"pinMaxRadius",b,R(e)),S(e,"mesh",h,R(e)),S(e,"minScreenSize",v,R(e)),e}return r}(x.EveChild),d=D((p=g).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=D(p.prototype,"centerNormal",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.vec4.fromValues(0,0,0)}}),m=D(p.prototype,"pinRadius",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=D(p.prototype,"pinMaxRadius",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=D(p.prototype,"mesh",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=D(p.prototype,"minScreenSize",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=p))||f)||f)},"./unsupported/eve/child/EveLineChildContainer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLineChildContainer",(function(){return S}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./eve/child/index.js"),y=r("./global/math/index.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=p.meta.notImplemented,i=p.meta.type("EveLineChildContainer",!0),o=p.meta.list(),a=p.meta.quaternion,n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(r,e);var t=g(r);function r(){var e;h(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return b(e=t.call.apply(t,[this].concat(i)),"lines",l,x(e)),b(e,"rotation",s,x(e)),e}return r}(d.EveChild),l=z((c=f).prototype,"lines",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=z(c.prototype,"rotation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.quat.create()}}),u=c))||u)||u)},"./unsupported/eve/child/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/eve/child/modifier/index.js");r.d(t,"EveChildModifierAttachToBone",(function(){return n.EveChildModifierAttachToBone})),r.d(t,"EveChildModifierBillboard2D",(function(){return n.EveChildModifierBillboard2D})),r.d(t,"EveChildModifierBillboard3D",(function(){return n.EveChildModifierBillboard3D})),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",(function(){return n.EveChildModifierCameraOrientedRotationConstrained})),r.d(t,"EveChildModifierHalo",(function(){return n.EveChildModifierHalo})),r.d(t,"EveChildModifierSRT",(function(){return n.EveChildModifierSRT})),r.d(t,"EveChildModifierTranslateWithCamera",(function(){return n.EveChildModifierTranslateWithCamera}));var i=r("./unsupported/eve/child/EveChildBulletStorm.js");r.d(t,"EveChildBulletStorm",(function(){return i.EveChildBulletStorm}));var o=r("./unsupported/eve/child/EveChildCloud.js");r.d(t,"EveChildCloud",(function(){return o.EveChildCloud}));var a=r("./unsupported/eve/child/EveChildEffectPropagator.js");r.d(t,"EveChildEffectPropagator",(function(){return a.EveChildEffectPropagator}));var u=r("./unsupported/eve/child/EveChildExplosion.js");r.d(t,"EveChildExplosion",(function(){return u.EveChildExplosion}));var c=r("./unsupported/eve/child/EveChildInheritProperties.js");r.d(t,"EveChildInheritProperties",(function(){return c.EveChildInheritProperties}));var l=r("./unsupported/eve/child/EveChildInstanceContainer.js");r.d(t,"EveChildInstanceContainer",(function(){return l.EveChildInstanceContainer}));var s=r("./unsupported/eve/child/EveChildLink.js");r.d(t,"EveChildLink",(function(){return s.EveChildLink}));var f=r("./unsupported/eve/child/EveChildParticleSphere.js");r.d(t,"EveChildParticleSphere",(function(){return f.EveChildParticleSphere}));var p=r("./unsupported/eve/child/EveChildQuad.js");r.d(t,"EveChildQuad",(function(){return p.EveChildQuad}));var d=r("./unsupported/eve/child/EveChildSpherePin.js");r.d(t,"EveChildSpherePin",(function(){return d.EveChildSpherePin}));var y=r("./unsupported/eve/child/EveChildLineSet.js");r.d(t,"EveChildLineSet",(function(){return y.EveChildLineSet}));var m=r("./unsupported/eve/child/EveLineChildContainer.js");r.d(t,"EveLineChildContainer",(function(){return m.EveLineChildContainer}))},"./unsupported/eve/child/modifier/EveChildModifier.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifier",(function(){return y}));var n,i,o,a=r("./global/utils/index.js"),u=r("./global/math/index.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=a.meta.type("EveChildModifier")((o=i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(r,e);var t=f(r);function r(){return l(this,r),t.apply(this,arguments)}return r}(a.meta.Model),i.global={mat4_0:u.mat4.create()},n=o))||n},"./unsupported/eve/child/modifier/EveChildModifierAttachToBone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierAttachToBone",(function(){return O}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js"),f=r("./unsupported/eve/child/modifier/EveChildModifier.js"),p=r("./global/math/index.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _,z,S,j,E,T,O=(n=s.meta.notImplemented,i=s.meta.type("EveChildModifierAttachToBone"),o=s.meta.uint,n(a=i((l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,e);var t,r,n,i=v(o);function o(){var e;m(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return y(e=i.call.apply(i,[this].concat(r)),"boneIndex",c,w(e)),e}return t=o,(r=[{key:"Modify",value:function(e,t){if(this.boneIndex>=0){var r=t.vs.Get("JointMat"),n=p.mat4.fromJointMatIndex(f.EveChildModifier.global.mat4_0,r,this.boneIndex);return p.mat4.multiply(e.localTransform,n,e.localTransform),!0}return!1}}])&&b(t.prototype,r),n&&b(t,n),o}(f.EveChildModifier),_=(u=l).prototype,z="boneIndex",S=[o],j={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}},T={},Object.keys(j).forEach((function(e){T[e]=j[e]})),T.enumerable=!!T.enumerable,T.configurable=!!T.configurable,("value"in T||T.initializer)&&(T.writable=!0),T=S.slice().reverse().reduce((function(e,t){return t(_,z,e)||e}),T),E&&void 0!==T.initializer&&(T.value=T.initializer?T.initializer.call(E):void 0,T.initializer=void 0),void 0===T.initializer&&(Object.defineProperty(_,z,T),T=null),c=T,a=u))||a)||a)},"./unsupported/eve/child/modifier/EveChildModifierBillboard2D.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierBillboard2D",(function(){return p}));var n,i=r("./global/utils/index.js"),o=r("./unsupported/eve/child/modifier/EveChildModifier.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=(0,i.meta.notImplemented)(n=i.meta.type("EveChildModifierBillboard2D")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t=l(r);function r(){return u(this,r),t.apply(this,arguments)}return r}(o.EveChildModifier))||n)||n},"./unsupported/eve/child/modifier/EveChildModifierBillboard3D.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierBillboard3D",(function(){return E}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js"),f=r("./unsupported/eve/child/modifier/EveChildModifier.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,x,_,z,S,j,E=(n=s.meta.notImplemented,i=s.meta.type("EveChildModifierBillboard3D"),o=s.meta.boolean,n(a=i((l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,e);var t=b(r);function r(){var e;y(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(e=t.call.apply(t,[this].concat(i)),"fixed",c,v(e)),e}return r}(f.EveChildModifier),w=(u=l).prototype,x="fixed",_=[o],z={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}},j={},Object.keys(z).forEach((function(e){j[e]=z[e]})),j.enumerable=!!j.enumerable,j.configurable=!!j.configurable,("value"in j||j.initializer)&&(j.writable=!0),j=_.slice().reverse().reduce((function(e,t){return t(w,x,e)||e}),j),S&&void 0!==j.initializer&&(j.value=j.initializer?j.initializer.call(S):void 0,j.initializer=void 0),void 0===j.initializer&&(Object.defineProperty(w,x,j),j=null),c=j,a=u))||a)||a)},"./unsupported/eve/child/modifier/EveChildModifierCameraOrientedRotationConstrained.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",(function(){return p}));var n,i=r("./global/utils/index.js"),o=r("./unsupported/eve/child/modifier/EveChildModifier.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=(0,i.meta.notImplemented)(n=i.meta.type("EveChildModifierCameraOrientedRotationConstrained")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t=l(r);function r(){return u(this,r),t.apply(this,arguments)}return r}(o.EveChildModifier))||n)||n},"./unsupported/eve/child/modifier/EveChildModifierHalo.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierHalo",(function(){return p}));var n,i=r("./unsupported/eve/child/modifier/EveChildModifier.js"),o=r("./global/utils/index.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=(0,o.meta.notImplemented)(n=o.meta.type("EveChildModifierHalo")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t=l(r);function r(){return u(this,r),t.apply(this,arguments)}return r}(i.EveChildModifier))||n)||n},"./unsupported/eve/child/modifier/EveChildModifierSRT.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierSRT",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js"),m=r("./global/math/index.js"),b=r("./unsupported/eve/child/modifier/EveChildModifier.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=y.meta.notImplemented,i=y.meta.type("EveChildModifierSRT"),o=y.meta.quaternion,a=y.meta.vector3,u=y.meta.vector3,n(c=i((d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,e);var t=x(r);function r(){var e;g(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return v(e=t.call.apply(t,[this].concat(i)),"rotation",s,z(e)),v(e,"scaling",f,z(e)),v(e,"translation",p,z(e)),e}return r}(b.EveChildModifier),s=j((l=d).prototype,"rotation",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.quat.create()}}),f=j(l.prototype,"scaling",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.vec3.fromValues(1,1,1)}}),p=j(l.prototype,"translation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.vec3.create()}}),c=l))||c)||c)},"./unsupported/eve/child/modifier/EveChildModifierTranslateWithCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierTranslateWithCamera",(function(){return p}));var n,i=r("./global/utils/index.js"),o=r("./unsupported/eve/child/modifier/EveChildModifier.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=(0,i.meta.notImplemented)(n=i.meta.type("EveChildModifierTranslateWithCamera")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t=l(r);function r(){return u(this,r),t.apply(this,arguments)}return r}(o.EveChildModifier))||n)||n},"./unsupported/eve/child/modifier/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/eve/child/modifier/EveChildModifierAttachToBone.js");r.d(t,"EveChildModifierAttachToBone",(function(){return n.EveChildModifierAttachToBone}));var i=r("./unsupported/eve/child/modifier/EveChildModifierBillboard2D.js");r.d(t,"EveChildModifierBillboard2D",(function(){return i.EveChildModifierBillboard2D}));var o=r("./unsupported/eve/child/modifier/EveChildModifierBillboard3D.js");r.d(t,"EveChildModifierBillboard3D",(function(){return o.EveChildModifierBillboard3D}));var a=r("./unsupported/eve/child/modifier/EveChildModifierCameraOrientedRotationConstrained.js");r.d(t,"EveChildModifierCameraOrientedRotationConstrained",(function(){return a.EveChildModifierCameraOrientedRotationConstrained}));var u=r("./unsupported/eve/child/modifier/EveChildModifierHalo.js");r.d(t,"EveChildModifierHalo",(function(){return u.EveChildModifierHalo}));var c=r("./unsupported/eve/child/modifier/EveChildModifierSRT.js");r.d(t,"EveChildModifierSRT",(function(){return c.EveChildModifierSRT}));var l=r("./unsupported/eve/child/modifier/EveChildModifierTranslateWithCamera.js");r.d(t,"EveChildModifierTranslateWithCamera",(function(){return l.EveChildModifierTranslateWithCamera}))},"./unsupported/eve/effect/EveStarfield.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStarfield",(function(){return C}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S=r("./global/utils/index.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var C=(n=S.meta.notImplemented,i=S.meta.type("EveStarfield"),o=S.meta.struct("Tw2Effect"),a=S.meta.float,u=S.meta.float,c=S.meta.float,l=S.meta.float,s=S.meta.float,f=S.meta.uint,p=S.meta.uint,n(d=i((z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(r,e);var t=R(r);function r(){var e;T(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return E(e=t.call.apply(t,[this].concat(i)),"effect",m,D(e)),E(e,"maxDist",b,D(e)),E(e,"maxFlashRate",h,D(e)),E(e,"minDist",v,D(e)),E(e,"minFlashIntensity",g,D(e)),E(e,"minFlashRate",w,D(e)),E(e,"numStars",x,D(e)),E(e,"seed",_,D(e)),e}return r}(S.meta.Model),m=M((y=z).prototype,"effect",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=M(y.prototype,"maxDist",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=M(y.prototype,"maxFlashRate",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=M(y.prototype,"minDist",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=M(y.prototype,"minFlashIntensity",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=M(y.prototype,"minFlashRate",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=M(y.prototype,"numStars",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=M(y.prototype,"seed",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=y))||d)||d)},"./unsupported/eve/effect/EveStretch2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStretch2",(function(){return C}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S=r("./global/utils/index.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var C=(n=S.meta.notImplemented,i=S.meta.type("EveStretch2"),o=S.meta.string,a=S.meta.struct(),u=S.meta.struct(),c=S.meta.struct("Tw2Effect"),l=S.meta.struct("Tw2CurveSet"),s=S.meta.struct(),f=S.meta.struct(),p=S.meta.uint,n(d=i((z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(r,e);var t=R(r);function r(){var e;T(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return E(e=t.call.apply(t,[this].concat(i)),"name",m,D(e)),E(e,"destinationEmitter",b,D(e)),E(e,"destinationLight",h,D(e)),E(e,"effect",v,D(e)),E(e,"loop",g,D(e)),E(e,"sourceEmitter",w,D(e)),E(e,"sourceLight",x,D(e)),E(e,"quadCount",_,D(e)),e}return r}(S.meta.Model),m=M((y=z).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=M(y.prototype,"destinationEmitter",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=M(y.prototype,"destinationLight",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=M(y.prototype,"effect",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=M(y.prototype,"loop",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=M(y.prototype,"sourceEmitter",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=M(y.prototype,"sourceLight",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=M(y.prototype,"quadCount",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=y))||d)||d)},"./unsupported/eve/effect/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/eve/effect/EveStarfield.js");r.d(t,"EveStarfield",(function(){return n.EveStarfield}));var i=r("./unsupported/eve/effect/EveStretch2.js");r.d(t,"EveStretch2",(function(){return i.EveStretch2}))},"./unsupported/eve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/eve/animation/index.js");r.d(t,"EveAnimation",(function(){return n.EveAnimation})),r.d(t,"EveAnimationCommand",(function(){return n.EveAnimationCommand})),r.d(t,"EveAnimationCurve",(function(){return n.EveAnimationCurve})),r.d(t,"EveAnimationState",(function(){return n.EveAnimationState})),r.d(t,"EveAnimationStateMachine",(function(){return n.EveAnimationStateMachine}));var i=r("./unsupported/eve/child/index.js");r.d(t,"EveChildModifierAttachToBone",(function(){return i.EveChildModifierAttachToBone})),r.d(t,"EveChildModifierBillboard2D",(function(){return i.EveChildModifierBillboard2D})),r.d(t,"EveChildModifierBillboard3D",(function(){return i.EveChildModifierBillboard3D})),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",(function(){return i.EveChildModifierCameraOrientedRotationConstrained})),r.d(t,"EveChildModifierHalo",(function(){return i.EveChildModifierHalo})),r.d(t,"EveChildModifierSRT",(function(){return i.EveChildModifierSRT})),r.d(t,"EveChildModifierTranslateWithCamera",(function(){return i.EveChildModifierTranslateWithCamera})),r.d(t,"EveChildBulletStorm",(function(){return i.EveChildBulletStorm})),r.d(t,"EveChildCloud",(function(){return i.EveChildCloud})),r.d(t,"EveChildEffectPropagator",(function(){return i.EveChildEffectPropagator})),r.d(t,"EveChildExplosion",(function(){return i.EveChildExplosion})),r.d(t,"EveChildInheritProperties",(function(){return i.EveChildInheritProperties})),r.d(t,"EveChildInstanceContainer",(function(){return i.EveChildInstanceContainer})),r.d(t,"EveChildLink",(function(){return i.EveChildLink})),r.d(t,"EveChildParticleSphere",(function(){return i.EveChildParticleSphere})),r.d(t,"EveChildQuad",(function(){return i.EveChildQuad})),r.d(t,"EveChildSpherePin",(function(){return i.EveChildSpherePin})),r.d(t,"EveChildLineSet",(function(){return i.EveChildLineSet})),r.d(t,"EveLineChildContainer",(function(){return i.EveLineChildContainer}));var o=r("./unsupported/eve/effect/index.js");r.d(t,"EveStarfield",(function(){return o.EveStarfield})),r.d(t,"EveStretch2",(function(){return o.EveStretch2}));var a=r("./unsupported/eve/item/index.js");r.d(t,"EveBanner",(function(){return a.EveBanner})),r.d(t,"EveBoosterSet2Batch",(function(){return a.EveBoosterSet2Batch})),r.d(t,"EveBoosterSet2Item",(function(){return a.EveBoosterSet2Item})),r.d(t,"EveBoosterSet2",(function(){return a.EveBoosterSet2})),r.d(t,"EveHazeSetBatch",(function(){return a.EveHazeSetBatch})),r.d(t,"EveHazeSetItem",(function(){return a.EveHazeSetItem})),r.d(t,"EveHazeSet",(function(){return a.EveHazeSet})),r.d(t,"EveSpriteLineSetBatch",(function(){return a.EveSpriteLineSetBatch})),r.d(t,"EveSpriteLineSetItem",(function(){return a.EveSpriteLineSetItem})),r.d(t,"EveSpriteLineSet",(function(){return a.EveSpriteLineSet})),r.d(t,"EveTrailSetRenderBatch",(function(){return a.EveTrailSetRenderBatch})),r.d(t,"EveTrailsSet",(function(){return a.EveTrailsSet})),r.d(t,"EveCircle",(function(){return a.EveCircle}));var u=r("./unsupported/eve/object/index.js");r.d(t,"EveEffectRoot2",(function(){return u.EveEffectRoot2})),r.d(t,"EveMobile",(function(){return u.EveMobile})),r.d(t,"EveRootTransform",(function(){return u.EveRootTransform})),r.d(t,"EveStation2",(function(){return u.EveStation2}));var c=r("./unsupported/eve/particle/index.js");r.d(t,"EveParticleDirectForce",(function(){return c.EveParticleDirectForce})),r.d(t,"EveParticleDragForce",(function(){return c.EveParticleDragForce}));var l=r("./unsupported/eve/pi/index.js");r.d(t,"EveConnector",(function(){return l.EveConnector})),r.d(t,"EveLocalPositionCurve",(function(){return l.EveLocalPositionCurve})),r.d(t,"EveSpherePin",(function(){return l.EveSpherePin}));var s=r("./unsupported/eve/ui/index.js");r.d(t,"EveTacticalOverlay",(function(){return s.EveTacticalOverlay})),r.d(t,"EveUiObject",(function(){return s.EveUiObject}))},"./unsupported/eve/item/EveBanner.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBanner",(function(){return B}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O=r("./global/utils/index.js"),R=r("./global/math/index.js");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var i=G(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return I(this,r)}}function I(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var B=(n=O.meta.type("EveBanner"),i=O.meta.notImplemented,o=O.meta.string,a=O.meta.float,u=O.meta.float,c=O.meta.uint,l=O.meta.boolean,s=O.meta.vector3,f=O.meta.quaternion,p=O.meta.vector3,d=O.meta.uint,y=O.meta.matrix4,n(m=i((T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(o,e);var t,r,n,i=k(o);function o(){var e;A(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return D(e=i.call.apply(i,[this].concat(r)),"name",h,L(e)),D(e,"angleX",v,L(e)),D(e,"angleY",g,L(e)),D(e,"boneIndex",w,L(e)),D(e,"display",x,L(e)),D(e,"position",_,L(e)),D(e,"rotation",z,L(e)),D(e,"scaling",S,L(e)),D(e,"usage",j,L(e)),D(e,"transform",E,L(e)),e}return t=o,(r=[{key:"OnValueChanged",value:function(){R.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.position,this.scaling)}}])&&M(t.prototype,r),n&&M(t,n),o}(O.meta.Model),h=F((b=T).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=F(b.prototype,"angleX",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=F(b.prototype,"angleY",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=F(b.prototype,"boneIndex",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=F(b.prototype,"display",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=F(b.prototype,"position",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.vec3.create()}}),z=F(b.prototype,"rotation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.quat.create()}}),S=F(b.prototype,"scaling",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.vec3.fromValues(1,1,1)}}),j=F(b.prototype,"usage",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=F(b.prototype,"transform",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.mat4.create()}}),m=b))||m)||m)},"./unsupported/eve/item/EveBoosterSet2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBoosterSet2Batch",(function(){return le})),r.d(t,"EveBoosterSet2Item",(function(){return se})),r.d(t,"EveBoosterSet2",(function(){return fe}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K=r("./global/utils/index.js"),Y=r("./global/math/index.js"),Q=r("./core/index.js"),Z=r("./eve/index.js");function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ee(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ce(e);if(t){var i=ce(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ae(this,r)}}function ae(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var le=(0,K.meta.notImplemented)(n=function(e){ne(o,e);var t,r,n,i=oe(o);function o(){var e;te(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r))).boosterSet=null,e}return t=o,(r=[{key:"Commit",value:function(e){return this.boosterSet.Render(e)}},{key:"HasTechnique",value:function(e){return this.boosterSet&&this.boosterSet.effect&&this.boosterSet.effect.HasTechnique(e)}}])&&re(t.prototype,r),n&&re(t,n),o}(Q.Tw2RenderBatch))||n,se=(0,K.meta.notImplemented)(i=K.meta.type("EveBoosterSet2Item")(i=function(e){ne(r,e);var t=oe(r);function r(){return te(this,r),t.apply(this,arguments)}return r}(Z.EveObjectSetItem))||i)||i,fe=(o=K.meta.notImplemented,a=K.meta.type("EveBoosterSet2"),u=K.meta.boolean,c=K.meta.float,l=K.meta.struct("Tw2Effect"),s=K.meta.color,f=K.meta.float,p=K.meta.struct("EveSpriteSet"),d=K.meta.color,y=K.meta.float,m=K.meta.float,b=K.meta.color,h=K.meta.float,v=K.meta.float,g=K.meta.float,w=K.meta.color,x=K.meta.float,_=K.meta.float,z=K.meta.struct("EveTrailsSet"),S=K.meta.color,j=K.meta.color,o(E=a((X=function(e){ne(r,e);var t=oe(r);function r(){var e;te(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return $(e=t.call.apply(t,[this].concat(i)),"alwaysOn",O,ue(e)),$(e,"alwaysOnIntensity",R,ue(e)),$(e,"effect",P,ue(e)),$(e,"glowColor",D,ue(e)),$(e,"glowScale",A,ue(e)),$(e,"glows",M,ue(e)),$(e,"haloColor",C,ue(e)),$(e,"haloScaleX",k,ue(e)),$(e,"haloScaleY",I,ue(e)),$(e,"lightColor",L,ue(e)),$(e,"lightFlickerAmplitude",G,ue(e)),$(e,"lightFlickerFrequency",F,ue(e)),$(e,"lightRadius",B,ue(e)),$(e,"lightWarpColor",N,ue(e)),$(e,"lightWarpRadius",U,ue(e)),$(e,"symHaloScale",V,ue(e)),$(e,"trails",q,ue(e)),$(e,"warpGlowColor",H,ue(e)),$(e,"warpHaloColor",W,ue(e)),e}return r}(Z.EveObjectSet),O=ee((T=X).prototype,"alwaysOn",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=ee(T.prototype,"alwaysOnIntensity",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=ee(T.prototype,"effect",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=ee(T.prototype,"glowColor",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),A=ee(T.prototype,"glowScale",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=ee(T.prototype,"glows",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=ee(T.prototype,"haloColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),k=ee(T.prototype,"haloScaleX",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=ee(T.prototype,"haloScaleY",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=ee(T.prototype,"lightColor",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),G=ee(T.prototype,"lightFlickerAmplitude",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=ee(T.prototype,"lightFlickerFrequency",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=ee(T.prototype,"lightRadius",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=ee(T.prototype,"lightWarpColor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),U=ee(T.prototype,"lightWarpRadius",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=ee(T.prototype,"symHaloScale",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=ee(T.prototype,"trails",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=ee(T.prototype,"warpGlowColor",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),W=ee(T.prototype,"warpHaloColor",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),E=T))||E)||E)},"./unsupported/eve/item/EveCircle.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveCircle",(function(){return f}));var n,i=r("./global/utils/index.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=(0,i.meta.notImplemented)(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(r,e);var t=c(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(i.meta.Model))||n},"./unsupported/eve/item/EveHazeSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveHazeSetBatch",(function(){return ne})),r.d(t,"EveHazeSetItem",(function(){return ie})),r.d(t,"EveHazeSet",(function(){return oe}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F=r("./global/utils/index.js"),B=r("./global/math/index.js"),N=r("./core/index.js"),U=r("./eve/index.js"),V=r("./global/tw2.js");function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t,r){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=re(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function W(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function X(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e,t,r){return t&&Y(e.prototype,t),r&&Y(e,r),e}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=re(e);if(t){var i=re(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ee(this,r)}}function ee(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?te(e):t}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=(0,F.meta.notImplemented)(n=function(e){Z(r,e);var t=$(r);function r(){var e;K(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).hazeSet=null,e}return Q(r,[{key:"Commit",value:function(e){return this.hazeSet.Render(e)}},{key:"HasTechnique",value:function(e){return this.hazeSet&&this.hazeSet.effect&&this.hazeSet.effect.HasTechnique(e)}}]),r}(N.Tw2RenderBatch))||n,ie=(i=F.meta.notImplemented,o=F.meta.type("EveHazeSetItem"),a=F.meta.boolean,u=F.meta.boolean,c=F.meta.uint,l=F.meta.float,s=F.meta.float,f=F.meta.vector3,p=F.meta.quaternion,d=F.meta.vector3,y=F.meta.float,m=F.meta.float,i(b=o((O=function(e){Z(r,e);var t=$(r);function r(){var e;K(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return W(e=t.call.apply(t,[this].concat(i)),"display",v,te(e)),W(e,"boosterGainInfluence",g,te(e)),W(e,"color",w,te(e)),W(e,"hazeBrightness",x,te(e)),W(e,"hazeFalloff",_,te(e)),W(e,"position",z,te(e)),W(e,"rotation",S,te(e)),W(e,"scaling",j,te(e)),W(e,"sourceBrightness",E,te(e)),W(e,"sourceSize",T,te(e)),e}return Q(r,[{key:"OnValueChanged",value:function(){B.mat4.fromRotationTranslationScale(this._transform,this.rotation,this.position,this.scaling),this._dirty=!0}}]),r}(U.EveObjectSetItem),v=X((h=O).prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=X(h.prototype,"boosterGainInfluence",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=X(h.prototype,"color",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec4.fromValues(0,0,0,1)}}),x=X(h.prototype,"hazeBrightness",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=X(h.prototype,"hazeFalloff",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=X(h.prototype,"position",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec3.create()}}),S=X(h.prototype,"rotation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.quat.create()}}),j=X(h.prototype,"scaling",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec3.fromValues(1,1,1)}}),E=X(h.prototype,"sourceBrightness",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=X(h.prototype,"sourceSize",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=h))||b)||b),oe=(R=F.meta.notImplemented,P=F.meta.type("EveHazeSet"),D=F.meta.boolean,A=F.meta.struct(),R(M=P((G=L=function(e){Z(r,e);var t=$(r);function r(){var e;K(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return W(e=t.call.apply(t,[this].concat(i)),"display",k,te(e)),W(e,"effect",I,te(e)),e._decl=N.Tw2VertexDeclaration.from(r.vertexDeclarations),e._vertexBuffer=null,e._indexBuffer=null,e._indexOrder=[0,2,1,0,3,2],e}return Q(r,[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect?this.effect.GetResources(e):e}},{key:"Unload",value:function(e){this._vertexBuffer&&(V.device.gl.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(V.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),H(re(r.prototype),"Unload",this).call(this,e)}},{key:"SetIndexOrder",value:function(e,t,r,n,i,o){this._indexOrder[0]=e,this._indexOrder[1]=t,this._indexOrder[2]=r,this._indexOrder[3]=n,this._indexOrder[4]=i,this._indexOrder[5]=o,this._dirty=!0}},{key:"Rebuild",value:function(e){this.Unload(!0),this.RebuildItems(),this._dirty=!1;var t=this._visibleItems.length;if(t){for(var n=U.EveObjectSet.global,i=n.mat4_0,o=n.vec3_0,a=new Float32Array(35*t*4),u=0;u<t;u++){var c=this._visibleItems[u],l=4*u*35;B.mat4.fromRotationTranslationScale(i,c.rotation,c.position,c.scaling);for(var s=0;s<4;s++){var f=l+35*s;a[f+0]=i[0],a[f+1]=i[4],a[f+2]=i[8],a[f+3]=i[12],a[f+4]=i[1],a[f+5]=i[5],a[f+6]=i[9],a[f+7]=i[13],a[f+8]=i[2],a[f+9]=i[6],a[f+10]=i[10],a[f+11]=i[14],B.vec3.multiply(o,c.scaling,[c.sourceSize,c.sourceSize,c.sourceSize]),B.mat4.fromRotationTranslationScale(i,c.rotation,c.position,o),a[f+12]=i[0],a[f+13]=i[4],a[f+14]=i[8],a[f+15]=i[12],a[f+16]=i[1],a[f+17]=i[5],a[f+18]=i[9],a[f+19]=i[13],a[f+20]=i[2],a[f+21]=i[6],a[f+22]=i[10],a[f+23]=i[14],a[f+24]=c.hazeBrightness,a[f+25]=c.hazeFalloff,a[f+26]=c.sourceSize,a[f+27]=c.sourceBrightness,a[f+28]=c.color[0],a[f+29]=c.color[1],a[f+30]=c.color[2],a[f+31]=c.color[3],a[f+32]=1,a[f+33]=1,a[f+34]=1}}var p=V.device.gl;this._vertexBuffer=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,this._vertexBuffer),p.bufferData(p.ARRAY_BUFFER,a,p.STATIC_DRAW),p.bindBuffer(p.ARRAY_BUFFER,null);for(var d=this._indexOrder,y=new Uint16Array(6*t),m=0;m<t;++m){var b=6*m,h=4*m;y[b]=h+d[0],y[b+1]=h+d[1],y[b+2]=h+d[2],y[b+3]=h+d[3],y[b+4]=h+d[4],y[b+5]=h+d[5]}this._indexBuffer=p.createBuffer(),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,this._indexBuffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,y,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=6*t,H(re(r.prototype),"Rebuild",this).call(this,e)}else H(re(r.prototype),"Rebuild",this).call(this,e)}},{key:"GetBatches",value:function(e,t,r){if(this.display&&e===V.device.RM_ADDITIVE&&this._vertexBuffer&&this._indexBuffer){var n=new ne;return n.renderMode=V.device.RM_ADDITIVE,n.hazeSet=this,n.perObjectData=r,t.Commit(n),!0}return!1}},{key:"Render",value:function(e){if(!(this.display&&this.effect&&this.effect.IsGood()&&this._vertexBuffer&&this._indexBuffer))return!1;var t=V.device.gl;V.device.SetStandardStates(V.device.RM_ADDITIVE),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer);for(var r=0;r<this.effect.GetPassCount(e);++r){if(this.effect.ApplyPass(e,r),!this._decl.SetDeclaration(V.device,this.effect.GetPassInput(e,r),140))return!1;V.device.ApplyShadowState(),t.drawElements(t.TRIANGLES,this._indexBuffer.count,t.UNSIGNED_SHORT,0)}return!0}},{key:"hazeItems",get:function(){return this.items},set:function(e){this.items=e}}]),r}(U.EveObjectSet),L.Item=ie,L.vertexDeclarations=[{usage:"TEXCOORD",usageIndex:0,elements:4,attr:"attr0"},{usage:"TEXCOORD",usageIndex:1,elements:4,attr:"attr1"},{usage:"TEXCOORD",usageIndex:2,elements:4,attr:"attr2"},{usage:"TEXCOORD",usageIndex:3,elements:4,attr:"attr3"},{usage:"TEXCOORD",usageIndex:4,elements:4,attr:"attr4"},{usage:"TEXCOORD",usageIndex:5,elements:4,attr:"attr5"},{usage:"TEXCOORD",usageIndex:6,elements:4,attr:"attr6"},{usage:"COLOR",usageIndex:0,elements:4,attr:"attr7"},{usage:"TEXCOORD",usageIndex:7,elements:3,attr:"attr8"}],k=X((C=G).prototype,"display",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),I=X(C.prototype,"effect",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.Tw2Effect.from({effectFilePath:"cdn:/graphics/effect.gles2/managed/space/spaceobject/fx/hazespherical.fx"})}}),M=C))||M)||M)},"./unsupported/eve/item/EveSpriteLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpriteLineSetBatch",(function(){return ne})),r.d(t,"EveSpriteLineSetItem",(function(){return ie})),r.d(t,"EveSpriteLineSet",(function(){return oe}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U=r("./global/utils/index.js"),V=r("./global/math/index.js"),q=r("./eve/index.js");function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=J(e);if(t){var i=J(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Q(this,r)}}function Q(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function re(e,t,r){return t&&te(e.prototype,t),r&&te(e,r),e}var ne=(0,U.meta.notImplemented)(n=function(){function e(){ee(this,e),this.spriteLineSet=null}return re(e,[{key:"Commit",value:function(e){this.spriteLineSet.Render(e)}}]),e}())||n,ie=(i=U.meta.notImplemented,o=U.meta.type("EveSpriteLineSetItem"),a=U.meta.float,u=U.meta.float,c=U.meta.float,l=U.meta.uint,s=U.meta.uint,f=U.meta.float,p=U.meta.float,d=U.meta.boolean,y=U.meta.float,m=U.meta.float,b=U.meta.vector3,h=U.meta.quaternion,v=U.meta.vector3,g=U.meta.float,w=U.meta.boolean,x=U.meta.matrix4,i(_=o((B=function(e){X(r,e);var t=Y(r);function r(){var e;ee(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return W(e=t.call.apply(t,[this].concat(i)),"blinkPhase",S,Z(e)),W(e,"blinkPhaseShift",j,Z(e)),W(e,"blinkRate",E,Z(e)),W(e,"boneIndex",T,Z(e)),W(e,"colorType",O,Z(e)),W(e,"falloff",R,Z(e)),W(e,"intensity",P,Z(e)),W(e,"isCircle",D,Z(e)),W(e,"maxScale",A,Z(e)),W(e,"minScale",M,Z(e)),W(e,"position",C,Z(e)),W(e,"rotation",k,Z(e)),W(e,"scaling",I,Z(e)),W(e,"spacing",L,Z(e)),W(e,"display",G,Z(e)),W(e,"transform",F,Z(e)),e._dirty=!0,e}return re(r,[{key:"OnValueChanged",value:function(){V.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.position,this.scaling),this._dirty=!0}}]),r}(q.EveObjectSetItem),S=$((z=B).prototype,"blinkPhase",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=$(z.prototype,"blinkPhaseShift",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=$(z.prototype,"blinkRate",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=$(z.prototype,"boneIndex",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=$(z.prototype,"colorType",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=$(z.prototype,"falloff",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=$(z.prototype,"intensity",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=$(z.prototype,"isCircle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=$(z.prototype,"maxScale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=$(z.prototype,"minScale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=$(z.prototype,"position",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.vec3.create()}}),k=$(z.prototype,"rotation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.quat.create()}}),I=$(z.prototype,"scaling",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.vec3.fromValues(1,1,1)}}),L=$(z.prototype,"spacing",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=$(z.prototype,"display",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),F=$(z.prototype,"transform",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.mat4.create()}}),_=z))||_)||_),oe=(0,U.meta.notImplemented)(N=U.meta.type("EveSpriteLineSet")(N=function(e){X(r,e);var t=Y(r);function r(){return ee(this,r),t.apply(this,arguments)}return r}(q.EveObjectSet))||N)||N},"./unsupported/eve/item/EveTrailsSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTrailSetRenderBatch",(function(){return P})),r.d(t,"EveTrailsSet",(function(){return D}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js"),b=r("./global/index.js"),h=r("./core/batch/index.js");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),e}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=(0,m.meta.notImplemented)(n=function(e){S(r,e);var t=E(r);function r(){var e;x(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).trailsSet=null,e}return z(r,[{key:"Commit",value:function(e){return this.trailsSet.Render(e)}},{key:"HasTechnique",value:function(e){return this.trailsSet&&this.trailsSet.effect&&this.trailsSet.effect.HasTechnique(e)}}]),r}(h.Tw2RenderBatch))||n,D=(i=m.meta.notImplemented,o=m.meta.type("EveTrailSet"),a=m.meta.struct(),u=m.meta.path,c=m.meta.boolean,i(l=o((y=function(e){S(r,e);var t=E(r);function r(){var e;x(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return g(e=t.call.apply(t,[this].concat(i)),"effect",f,O(e)),g(e,"geometryResPath",p,O(e)),g(e,"display",d,O(e)),e._geometryRes=null,e}return z(r,[{key:"Initialize",value:function(){var e=this;this.geometryResPath&&(this._geometryRes=b.tw2.GetResource(this.geometryResPath,(function(t){return e.OnResPrepared(t)})))}},{key:"OnResPrepared",value:function(e){}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),this._geometryRes&&!e.includes(this._geometryRes)&&e.push(this._geometryRes),e}}]),r}(m.meta.Model),f=w((s=y).prototype,"effect",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=w(s.prototype,"geometryResPath",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=w(s.prototype,"display",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=s))||l)||l)},"./unsupported/eve/item/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/eve/item/EveBanner.js");r.d(t,"EveBanner",(function(){return n.EveBanner}));var i=r("./unsupported/eve/item/EveBoosterSet2.js");r.d(t,"EveBoosterSet2Batch",(function(){return i.EveBoosterSet2Batch})),r.d(t,"EveBoosterSet2Item",(function(){return i.EveBoosterSet2Item})),r.d(t,"EveBoosterSet2",(function(){return i.EveBoosterSet2}));var o=r("./unsupported/eve/item/EveHazeSet.js");r.d(t,"EveHazeSetBatch",(function(){return o.EveHazeSetBatch})),r.d(t,"EveHazeSetItem",(function(){return o.EveHazeSetItem})),r.d(t,"EveHazeSet",(function(){return o.EveHazeSet}));var a=r("./unsupported/eve/item/EveSpriteLineSet.js");r.d(t,"EveSpriteLineSetBatch",(function(){return a.EveSpriteLineSetBatch})),r.d(t,"EveSpriteLineSetItem",(function(){return a.EveSpriteLineSetItem})),r.d(t,"EveSpriteLineSet",(function(){return a.EveSpriteLineSet}));var u=r("./unsupported/eve/item/EveTrailsSet.js");r.d(t,"EveTrailSetRenderBatch",(function(){return u.EveTrailSetRenderBatch})),r.d(t,"EveTrailsSet",(function(){return u.EveTrailsSet}));var c=r("./unsupported/eve/item/EveCircle.js");r.d(t,"EveCircle",(function(){return c.EveCircle}))},"./unsupported/eve/object/EveEffectRoot2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveEffectRoot2",(function(){return J}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B=r("./global/utils/index.js"),N=r("./global/math/index.js"),U=r("./eve/object/EveObject.js");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Q(e);if(t){var i=Q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return K(this,r)}}function K(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var J=(n=B.meta.notImplemented,i=B.meta.type("EveEffectRoot2"),o=B.meta.string,a=B.meta.vector3,u=B.meta.float,c=B.meta.list(),l=B.meta.list("Tw2CurveSet"),s=B.meta.float,f=B.meta.boolean,p=B.meta.list("EveChild"),d=B.meta.list("Tr2PointLight"),y=B.meta.list("TriObserverLocal"),m=B.meta.quaternion,b=B.meta.struct(),h=B.meta.vector3,v=B.meta.color,g=B.meta.float,w=B.meta.vector3,n(x=i((F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(r,e);var t=X(r);function r(){var e;H(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return q(e=t.call.apply(t,[this].concat(i)),"name",z,Y(e)),q(e,"boundingSphereCenter",S,Y(e)),q(e,"boundingSphereRadius",j,Y(e)),q(e,"controllers",E,Y(e)),q(e,"curveSets",T,Y(e)),q(e,"duration",O,Y(e)),q(e,"dynamicLOD",R,Y(e)),q(e,"effectChildren",P,Y(e)),q(e,"lights",D,Y(e)),q(e,"observers",A,Y(e)),q(e,"rotation",M,Y(e)),q(e,"rotationCurve",C,Y(e)),q(e,"scaling",k,Y(e)),q(e,"secondaryLightingEmissiveColor",I,Y(e)),q(e,"secondaryLightingSphereRadius",L,Y(e)),q(e,"translation",G,Y(e)),e}return r}(U.EveObject),z=Z((_=F).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=Z(_.prototype,"boundingSphereCenter",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec3.create()}}),j=Z(_.prototype,"boundingSphereRadius",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=Z(_.prototype,"controllers",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=Z(_.prototype,"curveSets",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=Z(_.prototype,"duration",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=Z(_.prototype,"dynamicLOD",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Z(_.prototype,"effectChildren",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=Z(_.prototype,"lights",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=Z(_.prototype,"observers",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=Z(_.prototype,"rotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.quat.create()}}),C=Z(_.prototype,"rotationCurve",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=Z(_.prototype,"scaling",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec3.fromValues(1,1,1)}}),I=Z(_.prototype,"secondaryLightingEmissiveColor",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec4.create()}}),L=Z(_.prototype,"secondaryLightingSphereRadius",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=Z(_.prototype,"translation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec3.create()}}),x=_))||x)||x)},"./unsupported/eve/object/EveMobile.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMobile",(function(){return U}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P=r("./global/utils/index.js"),D=r("./global/math/index.js"),A=r("./eve/object/EveObject.js");function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=B(e);if(t){var i=B(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return G(this,r)}}function G(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var U=(n=P.meta.notImplemented,i=P.meta.type("EveMobile"),o=P.meta.string,a=P.meta.list("EveObjectSet"),u=P.meta.vector3,c=P.meta.float,l=P.meta.list("EveChild"),s=P.meta.list("EveStateController"),f=P.meta.list("Tw2CurveSet"),p=P.meta.list("EveLocatorSets"),d=P.meta.struct("Tr2MeshLod"),y=P.meta.list("TriObserverLocal"),m=P.meta.struct("Tw2Effect"),n(b=i((R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(r,e);var t=L(r);function r(){var e;k(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return C(e=t.call.apply(t,[this].concat(i)),"name",v,F(e)),C(e,"attachments",g,F(e)),C(e,"boundingSphereCenter",w,F(e)),C(e,"boundingSphereRadius",x,F(e)),C(e,"children",_,F(e)),C(e,"controllers",z,F(e)),C(e,"curveSets",S,F(e)),C(e,"locatorSets",j,F(e)),C(e,"meshLod",E,F(e)),C(e,"observers",T,F(e)),C(e,"shadowEffect",O,F(e)),e}return r}(A.EveObject),v=N((h=R).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=N(h.prototype,"attachments",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=N(h.prototype,"boundingSphereCenter",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec3.create()}}),x=N(h.prototype,"boundingSphereRadius",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=N(h.prototype,"children",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=N(h.prototype,"controllers",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=N(h.prototype,"curveSets",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=N(h.prototype,"locatorSets",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=N(h.prototype,"meshLod",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=N(h.prototype,"observers",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=N(h.prototype,"shadowEffect",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b)||b)},"./unsupported/eve/object/EveRootTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveRootTransform",(function(){return K}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I=r("./global/utils/index.js"),L=r("./global/math/index.js"),G=r("./eve/object/EveObject.js");function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=W(e);if(t){var i=W(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return q(this,r)}}function q(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?H(e):t}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var K=(n=I.meta.notImplemented,i=I.meta.type("EveRootTransform"),o=I.meta.string,a=I.meta.float,u=I.meta.list("EveObject"),c=I.meta.list("Tw2CurveSet"),l=I.meta.boolean,s=I.meta.struct("Tw2Mesh"),f=I.meta.uint,p=I.meta.list("TriObserverLocal"),d=I.meta.quaternion,y=I.meta.struct("Tw2Curve"),m=I.meta.vector3,b=I.meta.float,h=I.meta.vector3,v=I.meta.struct("Tw2Curve"),n(g=i((k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(r,e);var t=V(r);function r(){var e;N(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return B(e=t.call.apply(t,[this].concat(i)),"name",x,H(e)),B(e,"boundingSphereRadius",_,H(e)),B(e,"children",z,H(e)),B(e,"curveSets",S,H(e)),B(e,"display",j,H(e)),B(e,"mesh",E,H(e)),B(e,"modifier",T,H(e)),B(e,"observers",O,H(e)),B(e,"rotation",R,H(e)),B(e,"rotationCurve",P,H(e)),B(e,"scaling",D,H(e)),B(e,"sortValueMultiplier",A,H(e)),B(e,"translation",M,H(e)),B(e,"translationCurve",C,H(e)),e}return r}(G.EveObject),x=X((w=k).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=X(w.prototype,"boundingSphereRadius",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=X(w.prototype,"children",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=X(w.prototype,"curveSets",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=X(w.prototype,"display",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=X(w.prototype,"mesh",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=X(w.prototype,"modifier",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=X(w.prototype,"observers",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=X(w.prototype,"rotation",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.quat.create()}}),P=X(w.prototype,"rotationCurve",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=X(w.prototype,"scaling",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.vec3.fromValues(1,1,1)}}),A=X(w.prototype,"sortValueMultiplier",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=X(w.prototype,"translation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.vec3.create()}}),C=X(w.prototype,"translationCurve",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=w))||g)||g)},"./unsupported/eve/object/EveStation2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStation2",(function(){return ce}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y=r("./global/utils/index.js"),Q=r("./global/math/index.js"),Z=r("./eve/object/EveShip2.js"),J=r("./core/model/index.js");function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ae(e);if(t){var i=ae(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ie(this,r)}}function ie(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?oe(e):t}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ce=(n=Y.meta.notImplemented,i=Y.meta.type("EveStation2"),o=Y.meta.struct("Tw2AnimationController"),a=Y.meta.isPrivate,u=Y.meta.list("EveObjectSet"),c=Y.meta.vector3,l=Y.meta.float,s=Y.meta.list("EveObject"),f=Y.meta.list("EveCurveSet"),p=Y.meta.list("EveSpaceObjectDecal"),d=Y.meta.string,y=Y.meta.list("EveChild"),m=Y.meta.list("TriPointLight"),b=Y.meta.list("EveLocatorSets"),h=Y.meta.list("EveLocator2"),v=Y.meta.struct("Tw2Mesh"),g=Y.meta.struct("Tr2MeshLod"),w=Y.meta.struct("Tr2RotationAdapter"),x=Y.meta.float,_=Y.meta.list("TriObserverLocal"),z=Y.meta.struct("Tr2RotationAdapter"),S=Y.meta.struct("Tw2Effect"),j=Y.meta.struct("Tr2TranslationAdapter"),n(E=i((K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(r,e);var t=ne(r);function r(){var e;te(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return ee(e=t.call.apply(t,[this].concat(i)),"animation",O,oe(e)),ee(e,"attachments",R,oe(e)),ee(e,"boundingSphereCenter",P,oe(e)),ee(e,"boundingSphereRadius",D,oe(e)),ee(e,"children",A,oe(e)),ee(e,"curveSets",M,oe(e)),ee(e,"decals",C,oe(e)),ee(e,"dna",k,oe(e)),ee(e,"effectChildren",I,oe(e)),ee(e,"lights",L,oe(e)),ee(e,"locatorSets",G,oe(e)),ee(e,"locators",F,oe(e)),ee(e,"mesh",B,oe(e)),ee(e,"meshLod",N,oe(e)),ee(e,"modelRotationCurve",U,oe(e)),ee(e,"modelScale",V,oe(e)),ee(e,"observers",q,oe(e)),ee(e,"rotationCurve",H,oe(e)),ee(e,"shadowEffect",W,oe(e)),ee(e,"translationCurve",X,oe(e)),e}return r}(Z.EveShip2),O=ue((T=K).prototype,"animation",[o,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new J.Tw2AnimationController}}),R=ue(T.prototype,"attachments",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=ue(T.prototype,"boundingSphereCenter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Q.vec3.create()}}),D=ue(T.prototype,"boundingSphereRadius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=ue(T.prototype,"children",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=ue(T.prototype,"curveSets",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=ue(T.prototype,"decals",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=ue(T.prototype,"dna",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=ue(T.prototype,"effectChildren",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=ue(T.prototype,"lights",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=ue(T.prototype,"locatorSets",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=ue(T.prototype,"locators",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=ue(T.prototype,"mesh",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=ue(T.prototype,"meshLod",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=ue(T.prototype,"modelRotationCurve",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=ue(T.prototype,"modelScale",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),q=ue(T.prototype,"observers",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=ue(T.prototype,"rotationCurve",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=ue(T.prototype,"shadowEffect",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=ue(T.prototype,"translationCurve",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=T))||E)||E)},"./unsupported/eve/object/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/eve/object/EveEffectRoot2.js");r.d(t,"EveEffectRoot2",(function(){return n.EveEffectRoot2}));var i=r("./unsupported/eve/object/EveMobile.js");r.d(t,"EveMobile",(function(){return i.EveMobile}));var o=r("./unsupported/eve/object/EveRootTransform.js");r.d(t,"EveRootTransform",(function(){return o.EveRootTransform}));var a=r("./unsupported/eve/object/EveStation2.js");r.d(t,"EveStation2",(function(){return a.EveStation2}))},"./unsupported/eve/particle/EveParticleDirectForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveParticleDirectForce",(function(){return p}));var n,i=r("./global/utils/index.js"),o=r("./particle/force/index.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=i.meta.type("EveParticleDirectForce")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t=l(r);function r(){return u(this,r),t.apply(this,arguments)}return r}(o.Tw2ParticleDirectForce))||n},"./unsupported/eve/particle/EveParticleDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveParticleDragForce",(function(){return f}));var n,i=r("./particle/force/index.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=r("./global/utils/index.js").meta.type("EveParticleDragForce")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(r,e);var t=c(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(i.Tw2ParticleDragForce))||n},"./unsupported/eve/particle/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/eve/particle/EveParticleDirectForce.js");r.d(t,"EveParticleDirectForce",(function(){return n.EveParticleDirectForce}));var i=r("./unsupported/eve/particle/EveParticleDragForce.js");r.d(t,"EveParticleDragForce",(function(){return i.EveParticleDragForce}))},"./unsupported/eve/pi/EveConnector.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveConnector",(function(){return F}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O=r("./global/utils/index.js"),R=r("./global/math/index.js");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=L(e);if(t){var i=L(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k(this,r)}}function k(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var F=(n=O.meta.notImplemented,i=O.meta.type("EveConnector"),o=O.meta.color,a=O.meta.float,u=O.meta.float,c=O.meta.color,l=O.meta.struct(),s=O.meta.vector3,f=O.meta.boolean,p=O.meta.float,d=O.meta.struct(),y=O.meta.uint,n(m=i((T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(r,e);var t=C(r);function r(){var e;A(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return D(e=t.call.apply(t,[this].concat(i)),"animationColor",h,I(e)),D(e,"animationScale",v,I(e)),D(e,"animationSpeed",g,I(e)),D(e,"color",w,I(e)),D(e,"destObject",x,I(e)),D(e,"destPosition",_,I(e)),D(e,"isAnimated",z,I(e)),D(e,"lineWidth",S,I(e)),D(e,"sourceObject",j,I(e)),D(e,"type",E,I(e)),e}return r}(O.meta.Model),h=G((b=T).prototype,"animationColor",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.vec4.create()}}),v=G(b.prototype,"animationScale",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=G(b.prototype,"animationSpeed",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=G(b.prototype,"color",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.vec4.create()}}),x=G(b.prototype,"destObject",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=G(b.prototype,"destPosition",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.vec3.create()}}),z=G(b.prototype,"isAnimated",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=G(b.prototype,"lineWidth",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=G(b.prototype,"sourceObject",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=G(b.prototype,"type",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=b))||m)||m)},"./unsupported/eve/pi/EveLocalPositionCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLocalPositionCurve",(function(){return E}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js"),f=r("./global/math/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,x,_,z,S,j,E=(n=s.meta.notImplemented,i=s.meta.type("EveLocalPositionCurve"),o=s.meta.vector3,n(a=i((l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,e);var t=b(r);function r(){var e;y(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(e=t.call.apply(t,[this].concat(i)),"value",c,v(e)),e}return r}(s.meta.Model),w=(u=l).prototype,x="value",_=[o],z={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.vec3.create()}},j={},Object.keys(z).forEach((function(e){j[e]=z[e]})),j.enumerable=!!j.enumerable,j.configurable=!!j.configurable,("value"in j||j.initializer)&&(j.writable=!0),j=_.slice().reverse().reduce((function(e,t){return t(w,x,e)||e}),j),S&&void 0!==j.initializer&&(j.value=j.initializer?j.initializer.call(S):void 0,j.initializer=void 0),void 0===j.initializer&&(Object.defineProperty(w,x,j),j=null),c=j,a=u))||a)||a)},"./unsupported/eve/pi/EveSpherePin.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpherePin",(function(){return V}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A=r("./global/utils/index.js"),M=r("./global/math/index.js");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var V=(n=A.meta.notImplemented,i=A.meta.type("EveSpherePin"),o=A.meta.string,a=A.meta.vector3,u=A.meta.color,c=A.meta.list(),l=A.meta.boolean,s=A.meta.path,f=A.meta.color,p=A.meta.struct(),d=A.meta.float,y=A.meta.float,m=A.meta.float,b=A.meta.float,n(h=i((D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(r,e);var t=G(r);function r(){var e;I(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return k(e=t.call.apply(t,[this].concat(i)),"name",g,B(e)),k(e,"centerNormal",w,B(e)),k(e,"color",x,B(e)),k(e,"curveSets",_,B(e)),k(e,"enablePicking",z,B(e)),k(e,"geometryResPath",S,B(e)),k(e,"pinColor",j,B(e)),k(e,"pinEffect",E,B(e)),k(e,"pinMaxRadius",T,B(e)),k(e,"pinRadius",O,B(e)),k(e,"pinRotation",R,B(e)),k(e,"sortValueMultiplier",P,B(e)),e}return r}(A.meta.Model),g=U((v=D).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=U(v.prototype,"centerNormal",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec3.create()}}),x=U(v.prototype,"color",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec4.create()}}),_=U(v.prototype,"curveSets",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=U(v.prototype,"enablePicking",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=U(v.prototype,"geometryResPath",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=U(v.prototype,"pinColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec4.create()}}),E=U(v.prototype,"pinEffect",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=U(v.prototype,"pinMaxRadius",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=U(v.prototype,"pinRadius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=U(v.prototype,"pinRotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=U(v.prototype,"sortValueMultiplier",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=v))||h)||h)},"./unsupported/eve/pi/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/eve/pi/EveConnector.js");r.d(t,"EveConnector",(function(){return n.EveConnector}));var i=r("./unsupported/eve/pi/EveLocalPositionCurve.js");r.d(t,"EveLocalPositionCurve",(function(){return i.EveLocalPositionCurve}));var o=r("./unsupported/eve/pi/EveSpherePin.js");r.d(t,"EveSpherePin",(function(){return o.EveSpherePin}))},"./unsupported/eve/ui/EveTacticalOverlay.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTacticalOverlay",(function(){return C}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S=r("./global/utils/index.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var C=(n=S.meta.notImplemented,i=S.meta.type("EveTacticalOverlay"),o=S.meta.struct(),a=S.meta.float,u=S.meta.struct(),c=S.meta.float,l=S.meta.float,s=S.meta.float,f=S.meta.float,p=S.meta.struct(),n(d=i((z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(r,e);var t=R(r);function r(){var e;T(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return E(e=t.call.apply(t,[this].concat(i)),"anchorEffect",m,D(e)),E(e,"arcSegmentMultiplier",b,D(e)),E(e,"connectorEffect",h,D(e)),E(e,"segmentsHigh",v,D(e)),E(e,"segmentsLow",g,D(e)),E(e,"segmentsMedium",w,D(e)),E(e,"targetMaxSegments",x,D(e)),E(e,"velocityEffect",_,D(e)),e}return r}(S.meta.Model),m=M((y=z).prototype,"anchorEffect",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=M(y.prototype,"arcSegmentMultiplier",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=M(y.prototype,"connectorEffect",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=M(y.prototype,"segmentsHigh",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=M(y.prototype,"segmentsLow",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=M(y.prototype,"segmentsMedium",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=M(y.prototype,"targetMaxSegments",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=M(y.prototype,"velocityEffect",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d)||d)},"./unsupported/eve/ui/EveUiObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveUiObject",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=b.meta.notImplemented,i=b.meta.type("EveUiObject"),o=b.meta.string,a=b.meta.float,u=b.meta.struct(),c=b.meta.float,n(l=i((m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,e);var t=x(r);function r(){var e;g(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return v(e=t.call.apply(t,[this].concat(i)),"name",f,z(e)),v(e,"boundingSphereRadius",p,z(e)),v(e,"mesh",d,z(e)),v(e,"modelScale",y,z(e)),e}return r}(b.meta.Model),f=j((s=m).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=j(s.prototype,"boundingSphereRadius",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=j(s.prototype,"mesh",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=j(s.prototype,"modelScale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=s))||l)||l)},"./unsupported/eve/ui/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/eve/ui/EveTacticalOverlay.js");r.d(t,"EveTacticalOverlay",(function(){return n.EveTacticalOverlay}));var i=r("./unsupported/eve/ui/EveUiObject.js");r.d(t,"EveUiObject",(function(){return i.EveUiObject}))},"./unsupported/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/core/index.js");r.d(t,"Tr2SpotLight",(function(){return n.Tr2SpotLight})),r.d(t,"EvePointLightBatch",(function(){return n.EvePointLightBatch})),r.d(t,"Tr2PointLight",(function(){return n.Tr2PointLight})),r.d(t,"Tr2ShLightingManager",(function(){return n.Tr2ShLightingManager})),r.d(t,"Tr2MeshLod",(function(){return n.Tr2MeshLod})),r.d(t,"Tr2ExternalParameter",(function(){return n.Tr2ExternalParameter})),r.d(t,"Tr2Texture2dLodParameter",(function(){return n.Tr2Texture2dLodParameter})),r.d(t,"Tr2PostProcess2",(function(){return n.Tr2PostProcess2})),r.d(t,"Tr2PPBloomEffect",(function(){return n.Tr2PPBloomEffect})),r.d(t,"Tr2PPDesaturateEffect",(function(){return n.Tr2PPDesaturateEffect})),r.d(t,"Tr2PPDynamicExposureEffect",(function(){return n.Tr2PPDynamicExposureEffect})),r.d(t,"Tr2PPFadeEffect",(function(){return n.Tr2PPFadeEffect})),r.d(t,"Tr2PPFidelityFXEffect",(function(){return n.Tr2PPFidelityFXEffect})),r.d(t,"Tr2PPFilmGrainEffect",(function(){return n.Tr2PPFilmGrainEffect})),r.d(t,"Tr2PPFogEffect",(function(){return n.Tr2PPFogEffect})),r.d(t,"Tr2PPGodRaysEffect",(function(){return n.Tr2PPGodRaysEffect})),r.d(t,"Tr2PPLutEffect",(function(){return n.Tr2PPLutEffect})),r.d(t,"Tr2PPSignalLossEffect",(function(){return n.Tr2PPSignalLossEffect})),r.d(t,"Tr2PPVignetteEffect",(function(){return n.Tr2PPVignetteEffect})),r.d(t,"Tr2LodResource",(function(){return n.Tr2LodResource})),r.d(t,"TriMatrix",(function(){return n.TriMatrix})),r.d(t,"Tr2DistanceTracker",(function(){return n.Tr2DistanceTracker})),r.d(t,"TriObserverLocal",(function(){return n.TriObserverLocal}));var i=r("./unsupported/curve/index.js");r.d(t,"Tr2RotationAdapter",(function(){return i.Tr2RotationAdapter})),r.d(t,"Tr2TranslationAdapter",(function(){return i.Tr2TranslationAdapter})),r.d(t,"AudEventKey",(function(){return i.AudEventKey})),r.d(t,"AudEventCurve",(function(){return i.AudEventCurve})),r.d(t,"EveBezierCurve",(function(){return i.EveBezierCurve})),r.d(t,"Tr2BoneMatrixCurve",(function(){return i.Tr2BoneMatrixCurve})),r.d(t,"Tr2CurveConstant",(function(){return i.Tr2CurveConstant})),r.d(t,"Tw2CurveScalarKey",(function(){return i.Tw2CurveScalarKey})),r.d(t,"Tr2CurveScalar",(function(){return i.Tr2CurveScalar})),r.d(t,"Tr2ScalarExprKey",(function(){return i.Tr2ScalarExprKey})),r.d(t,"Tr2ScalarExprKeyCurve",(function(){return i.Tr2ScalarExprKeyCurve})),r.d(t,"Tr2ScalarExprCurve",(function(){return i.Tr2ScalarExprCurve})),r.d(t,"Tr2CurveEulerRotationExpression",(function(){return i.Tr2CurveEulerRotationExpression})),r.d(t,"Tr2CurveScalarExpression",(function(){return i.Tr2CurveScalarExpression})),r.d(t,"Tr2CurveVector3Expression",(function(){return i.Tr2CurveVector3Expression})),r.d(t,"Tw2CurveExpression",(function(){return i.Tw2CurveExpression})),r.d(t,"Tw2CurveSetRange",(function(){return i.Tw2CurveSetRange}));var o=r("./unsupported/eve/index.js");r.d(t,"EveAnimation",(function(){return o.EveAnimation})),r.d(t,"EveAnimationCommand",(function(){return o.EveAnimationCommand})),r.d(t,"EveAnimationCurve",(function(){return o.EveAnimationCurve})),r.d(t,"EveAnimationState",(function(){return o.EveAnimationState})),r.d(t,"EveAnimationStateMachine",(function(){return o.EveAnimationStateMachine})),r.d(t,"EveChildModifierAttachToBone",(function(){return o.EveChildModifierAttachToBone})),r.d(t,"EveChildModifierBillboard2D",(function(){return o.EveChildModifierBillboard2D})),r.d(t,"EveChildModifierBillboard3D",(function(){return o.EveChildModifierBillboard3D})),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",(function(){return o.EveChildModifierCameraOrientedRotationConstrained})),r.d(t,"EveChildModifierHalo",(function(){return o.EveChildModifierHalo})),r.d(t,"EveChildModifierSRT",(function(){return o.EveChildModifierSRT})),r.d(t,"EveChildModifierTranslateWithCamera",(function(){return o.EveChildModifierTranslateWithCamera})),r.d(t,"EveChildBulletStorm",(function(){return o.EveChildBulletStorm})),r.d(t,"EveChildCloud",(function(){return o.EveChildCloud})),r.d(t,"EveChildEffectPropagator",(function(){return o.EveChildEffectPropagator})),r.d(t,"EveChildExplosion",(function(){return o.EveChildExplosion})),r.d(t,"EveChildInheritProperties",(function(){return o.EveChildInheritProperties})),r.d(t,"EveChildInstanceContainer",(function(){return o.EveChildInstanceContainer})),r.d(t,"EveChildLink",(function(){return o.EveChildLink})),r.d(t,"EveChildParticleSphere",(function(){return o.EveChildParticleSphere})),r.d(t,"EveChildQuad",(function(){return o.EveChildQuad})),r.d(t,"EveChildSpherePin",(function(){return o.EveChildSpherePin})),r.d(t,"EveChildLineSet",(function(){return o.EveChildLineSet})),r.d(t,"EveLineChildContainer",(function(){return o.EveLineChildContainer})),r.d(t,"EveStarfield",(function(){return o.EveStarfield})),r.d(t,"EveStretch2",(function(){return o.EveStretch2})),r.d(t,"EveBanner",(function(){return o.EveBanner})),r.d(t,"EveBoosterSet2Batch",(function(){return o.EveBoosterSet2Batch})),r.d(t,"EveBoosterSet2Item",(function(){return o.EveBoosterSet2Item})),r.d(t,"EveBoosterSet2",(function(){return o.EveBoosterSet2})),r.d(t,"EveHazeSetBatch",(function(){return o.EveHazeSetBatch})),r.d(t,"EveHazeSetItem",(function(){return o.EveHazeSetItem})),r.d(t,"EveHazeSet",(function(){return o.EveHazeSet})),r.d(t,"EveSpriteLineSetBatch",(function(){return o.EveSpriteLineSetBatch})),r.d(t,"EveSpriteLineSetItem",(function(){return o.EveSpriteLineSetItem})),r.d(t,"EveSpriteLineSet",(function(){return o.EveSpriteLineSet})),r.d(t,"EveTrailSetRenderBatch",(function(){return o.EveTrailSetRenderBatch})),r.d(t,"EveTrailsSet",(function(){return o.EveTrailsSet})),r.d(t,"EveCircle",(function(){return o.EveCircle})),r.d(t,"EveEffectRoot2",(function(){return o.EveEffectRoot2})),r.d(t,"EveMobile",(function(){return o.EveMobile})),r.d(t,"EveRootTransform",(function(){return o.EveRootTransform})),r.d(t,"EveStation2",(function(){return o.EveStation2})),r.d(t,"EveParticleDirectForce",(function(){return o.EveParticleDirectForce})),r.d(t,"EveParticleDragForce",(function(){return o.EveParticleDragForce})),r.d(t,"EveConnector",(function(){return o.EveConnector})),r.d(t,"EveLocalPositionCurve",(function(){return o.EveLocalPositionCurve})),r.d(t,"EveSpherePin",(function(){return o.EveSpherePin})),r.d(t,"EveTacticalOverlay",(function(){return o.EveTacticalOverlay})),r.d(t,"EveUiObject",(function(){return o.EveUiObject}));var a=r("./unsupported/interior/index.js");r.d(t,"Tr2IntSkinnedObject",(function(){return a.Tr2IntSkinnedObject})),r.d(t,"Tr2SkinnedModel",(function(){return a.Tr2SkinnedModel})),r.d(t,"Tr2InteriorLightSource",(function(){return a.Tr2InteriorLightSource})),r.d(t,"Tr2KelvinColor",(function(){return a.Tr2KelvinColor})),r.d(t,"Tr2InteriorPlaceable",(function(){return a.Tr2InteriorPlaceable})),r.d(t,"Tr2InteriorScene",(function(){return a.Tr2InteriorScene})),r.d(t,"WodPlaceableRes",(function(){return a.WodPlaceableRes})),r.d(t,"Tr2Model",(function(){return a.Tr2Model}));var u=r("./unsupported/particle/index.js");r.d(t,"Tr2PlaneConstraint",(function(){return u.Tr2PlaneConstraint})),r.d(t,"Tr2GpuSharedEmitter",(function(){return u.Tr2GpuSharedEmitter})),r.d(t,"Tr2GpuUniqueEmitter",(function(){return u.Tr2GpuUniqueEmitter})),r.d(t,"Tr2ForceSphereVolume",(function(){return u.Tr2ForceSphereVolume})),r.d(t,"Tr2ParticleVortexForce",(function(){return u.Tr2ParticleVortexForce})),r.d(t,"Tr2GpuParticleSystem",(function(){return u.Tr2GpuParticleSystem}));var c=r("./unsupported/state/index.js");r.d(t,"Tr2ActionAnimateCurveSet",(function(){return c.Tr2ActionAnimateCurveSet})),r.d(t,"Tr2ActionAnimateValue",(function(){return c.Tr2ActionAnimateValue})),r.d(t,"Tr2ActionChildEffect",(function(){return c.Tr2ActionChildEffect})),r.d(t,"Tr2ActionOverlay",(function(){return c.Tr2ActionOverlay})),r.d(t,"Tr2ActionPlayCurveSet",(function(){return c.Tr2ActionPlayCurveSet})),r.d(t,"Tr2ActionPlayMeshAnimation",(function(){return c.Tr2ActionPlayMeshAnimation})),r.d(t,"Tr2ActionPlaySound",(function(){return c.Tr2ActionPlaySound})),r.d(t,"Tr2ActionResetClipSphereCenter",(function(){return c.Tr2ActionResetClipSphereCenter})),r.d(t,"Tr2ActionSetValue",(function(){return c.Tr2ActionSetValue})),r.d(t,"Tr2ActionSpawnParticles",(function(){return c.Tr2ActionSpawnParticles})),r.d(t,"Tr2Controller",(function(){return c.Tr2Controller})),r.d(t,"Tr2ControllerReference",(function(){return c.Tr2ControllerReference})),r.d(t,"Tr2ControllerFloatVariable",(function(){return c.Tr2ControllerFloatVariable})),r.d(t,"Tr2StateMachine",(function(){return c.Tr2StateMachine})),r.d(t,"Tr2StateMachineState",(function(){return c.Tr2StateMachineState})),r.d(t,"Tr2StateMachineTransition",(function(){return c.Tr2StateMachineTransition})),r.d(t,"Tr2SyncToAnimation",(function(){return c.Tr2SyncToAnimation}));var l=r("./unsupported/AudEmitter.js");r.d(t,"AudEmitter",(function(){return l.AudEmitter}))},"./unsupported/interior/Tr2Model.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2Model",(function(){return j}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g,w,x,_,z,S,j=(n=s.meta.notImplemented,i=s.meta.type("Tr2Model"),o=s.meta.list("Tw2Mesh"),n(a=i((l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(r,e);var t=m(r);function r(){var e;d(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return p(e=t.call.apply(t,[this].concat(i)),"meshes",c,h(e)),e}return r}(s.meta.Model),g=(u=l).prototype,w="meshes",x=[o],_={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},S={},Object.keys(_).forEach((function(e){S[e]=_[e]})),S.enumerable=!!S.enumerable,S.configurable=!!S.configurable,("value"in S||S.initializer)&&(S.writable=!0),S=x.slice().reverse().reduce((function(e,t){return t(g,w,e)||e}),S),z&&void 0!==S.initializer&&(S.value=S.initializer?S.initializer.call(z):void 0,S.initializer=void 0),void 0===S.initializer&&(Object.defineProperty(g,w,S),S=null),c=S,a=u))||a)||a)},"./unsupported/interior/character/Tr2IntSkinnedObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2IntSkinnedObject",(function(){return S}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=y.meta.notImplemented,i=y.meta.type("Tr2IntSkinnedObject"),o=y.meta.raw(),a=y.meta.struct(),u=y.meta.list("Tw2CurveSet"),n(c=i((d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(r,e);var t=g(r);function r(){var e;h(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return b(e=t.call.apply(t,[this].concat(i)),"transform",s,x(e)),b(e,"visualModel",f,x(e)),b(e,"curveSets",p,x(e)),e}return r}(y.meta.Model),s=z((l=d).prototype,"transform",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=z(l.prototype,"visualModel",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=z(l.prototype,"curveSets",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=l))||c)||c)},"./unsupported/interior/character/Tr2SkinnedModel.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2SkinnedModel",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=b.meta.notImplemented,i=b.meta.type("Tr2SkinnedModel"),o=b.meta.string,a=b.meta.path,u=b.meta.list(),c=b.meta.string,n(l=i((m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,e);var t=x(r);function r(){var e;g(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return v(e=t.call.apply(t,[this].concat(i)),"name",f,z(e)),v(e,"geometryResPath",p,z(e)),v(e,"meshes",d,z(e)),v(e,"skeletonName",y,z(e)),e}return r}(b.meta.Model),f=j((s=m).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=j(s.prototype,"geometryResPath",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=j(s.prototype,"meshes",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=j(s.prototype,"skeletonName",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=s))||l)||l)},"./unsupported/interior/character/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/interior/character/Tr2IntSkinnedObject.js");r.d(t,"Tr2IntSkinnedObject",(function(){return n.Tr2IntSkinnedObject}));var i=r("./unsupported/interior/character/Tr2SkinnedModel.js");r.d(t,"Tr2SkinnedModel",(function(){return i.Tr2SkinnedModel}))},"./unsupported/interior/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/interior/character/index.js");r.d(t,"Tr2IntSkinnedObject",(function(){return n.Tr2IntSkinnedObject})),r.d(t,"Tr2SkinnedModel",(function(){return n.Tr2SkinnedModel}));var i=r("./unsupported/interior/lighting/index.js");r.d(t,"Tr2InteriorLightSource",(function(){return i.Tr2InteriorLightSource})),r.d(t,"Tr2KelvinColor",(function(){return i.Tr2KelvinColor}));var o=r("./unsupported/interior/scene/index.js");r.d(t,"Tr2InteriorPlaceable",(function(){return o.Tr2InteriorPlaceable})),r.d(t,"Tr2InteriorScene",(function(){return o.Tr2InteriorScene})),r.d(t,"WodPlaceableRes",(function(){return o.WodPlaceableRes}));var a=r("./unsupported/interior/Tr2Model.js");r.d(t,"Tr2Model",(function(){return a.Tr2Model}))},"./unsupported/interior/lighting/Tr2InteriorLightSource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorLightSource",(function(){return V}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A=r("./global/utils/index.js"),M=r("./global/math/index.js");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var V=(n=A.meta.notImplemented,i=A.meta.type("Tr2InteriorLightSource"),o=A.meta.string,a=A.meta.color,u=A.meta.float,c=A.meta.float,l=A.meta.vector3,s=A.meta.float,f=A.meta.float,p=A.meta.float,d=A.meta.struct("Tr2KelvinColor"),y=A.meta.vector3,m=A.meta.float,b=A.meta.boolean,n(h=i((D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(r,e);var t=G(r);function r(){var e;I(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return k(e=t.call.apply(t,[this].concat(i)),"name",g,B(e)),k(e,"color",w,B(e)),k(e,"coneAlphaInner",x,B(e)),k(e,"coneAlphaOuter",_,B(e)),k(e,"coneDirection",z,B(e)),k(e,"falloff",S,B(e)),k(e,"importanceBias",j,B(e)),k(e,"importanceScale",E,B(e)),k(e,"kelvinColor",T,B(e)),k(e,"position",O,B(e)),k(e,"radius",R,B(e)),k(e,"useKelvinColor",P,B(e)),e}return r}(A.meta.Model),g=U((v=D).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=U(v.prototype,"color",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec4.create()}}),x=U(v.prototype,"coneAlphaInner",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=U(v.prototype,"coneAlphaOuter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=U(v.prototype,"coneDirection",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec3.create()}}),S=U(v.prototype,"falloff",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=U(v.prototype,"importanceBias",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=U(v.prototype,"importanceScale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=U(v.prototype,"kelvinColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=U(v.prototype,"position",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec3.create()}}),R=U(v.prototype,"radius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=U(v.prototype,"useKelvinColor",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=v))||h)||h)},"./unsupported/interior/lighting/Tr2KelvinColor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2KelvinColor",(function(){return _}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=p.meta.notImplemented,i=p.meta.type("Tr2KelvinColor"),o=p.meta.float,a=p.meta.float,n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(r,e);var t=h(r);function r(){var e;m(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return y(e=t.call.apply(t,[this].concat(i)),"temperature",l,g(e)),y(e,"tint",s,g(e)),e}return r}(p.meta.Model),l=x((c=f).prototype,"temperature",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=x(c.prototype,"tint",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=c))||u)||u)},"./unsupported/interior/lighting/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/interior/lighting/Tr2InteriorLightSource.js");r.d(t,"Tr2InteriorLightSource",(function(){return n.Tr2InteriorLightSource}));var i=r("./unsupported/interior/lighting/Tr2KelvinColor.js");r.d(t,"Tr2KelvinColor",(function(){return i.Tr2KelvinColor}))},"./unsupported/interior/scene/Tr2InteriorPlaceable.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorPlaceable",(function(){return _}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=p.meta.notImplemented,i=p.meta.type("Tr2InteriorPlaceable"),o=p.meta.path,a=p.meta.struct("TriMatrix"),n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(r,e);var t=h(r);function r(){var e;m(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return y(e=t.call.apply(t,[this].concat(i)),"placeableResPath",l,g(e)),y(e,"transform",s,g(e)),e}return r}(p.meta.Model),l=x((c=f).prototype,"placeableResPath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=x(c.prototype,"transform",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=c))||u)||u)},"./unsupported/interior/scene/Tr2InteriorScene.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorScene",(function(){return _}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=p.meta.notImplemented,i=p.meta.type("Tr2InteriorScene"),o=p.meta.list("Tr2IntSkinnedObject"),a=p.meta.list("Tr2InteriorLightSource"),n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(r,e);var t=h(r);function r(){var e;m(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return y(e=t.call.apply(t,[this].concat(i)),"dynamics",l,g(e)),y(e,"lights",s,g(e)),e}return r}(p.meta.Model),l=x((c=f).prototype,"dynamics",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=x(c.prototype,"lights",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=c))||u)||u)},"./unsupported/interior/scene/WodPlaceableRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WodPlaceableRes",(function(){return S}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=y.meta.notImplemented,i=y.meta.type("WodPlaceableRes"),o=y.meta.float,a=y.meta.float,u=y.meta.struct("Tr2Model"),n(c=i((d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(r,e);var t=g(r);function r(){var e;h(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return b(e=t.call.apply(t,[this].concat(i)),"farFadeDistance",s,x(e)),b(e,"nearFadeDistance",f,x(e)),b(e,"visualModel",p,x(e)),e}return r}(y.meta.Model),s=z((l=d).prototype,"farFadeDistance",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=z(l.prototype,"nearFadeDistance",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=z(l.prototype,"visualModel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=l))||c)||c)},"./unsupported/interior/scene/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/interior/scene/Tr2InteriorPlaceable.js");r.d(t,"Tr2InteriorPlaceable",(function(){return n.Tr2InteriorPlaceable}));var i=r("./unsupported/interior/scene/Tr2InteriorScene.js");r.d(t,"Tr2InteriorScene",(function(){return i.Tr2InteriorScene}));var o=r("./unsupported/interior/scene/WodPlaceableRes.js");r.d(t,"WodPlaceableRes",(function(){return o.WodPlaceableRes}))},"./unsupported/particle/Tw2GpuParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuParticleSystem",(function(){return R}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j=r("./global/utils/index.js");function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R=(n=j.meta.notImplemented,i=j.meta.type("Tr2GpuParticleSystem"),o=j.meta.struct("Tw2Effect"),a=j.meta.struct("Tw2Effect"),u=j.meta.struct("Tw2Effect"),c=j.meta.struct("Tw2Effect"),l=j.meta.struct("Tw2Effect"),s=j.meta.struct("Tw2Effect"),f=j.meta.struct("Tw2Effect"),p=j.meta.struct("Tw2Effect"),d=j.meta.struct("Tw2Effect"),n(y=i((b=O((m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"clear",b,this),E(this,"emit",h,this),E(this,"render",v,this),E(this,"setDrawParameters",g,this),E(this,"setSortParameters",w,this),E(this,"sort",x,this),E(this,"sortInner",_,this),E(this,"sortStep",z,this),E(this,"update",S,this)}var t,r,n;return t=e,(r=[{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.clear&&this.clear.GetResources(e),this.EmitEvent&&this.EmitEvent.GetResources(e),this.render&&this.render.GetResources(e),this.setDrawParameters&&this.setDrawParameters.GetResources(e),this.setSortParameters&&this.setSortParameters.GetResources(e),this.sort&&this.sort.GetResources(e),this.sortInner&&this.sortInner.GetResources(e),this.sortStep&&this.sortStep.GetResources(e),this.update&&this.update.GetResources(e),e}}])&&T(t.prototype,r),n&&T(t,n),e}()).prototype,"clear",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=O(m.prototype,"emit",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=O(m.prototype,"render",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=O(m.prototype,"setDrawParameters",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=O(m.prototype,"setSortParameters",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=O(m.prototype,"sort",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=O(m.prototype,"sortInner",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=O(m.prototype,"sortStep",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=O(m.prototype,"update",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y)||y)},"./unsupported/particle/constraint/Tr2PlaneConstraint.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PlaneConstraint",(function(){return z}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./unsupported/particle/constraint/Tw2ParticleConstraint.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=p.meta.notImplemented,i=p.meta.type("Tr2PlaneConstraint"),o=p.meta.list("Tw2PartcileAttributeGenerator"),a=p.meta.float,n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=v(r);function r(){var e;b(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return m(e=t.call.apply(t,[this].concat(i)),"generators",l,w(e)),m(e,"reflectionNoise",s,w(e)),e}return r}(d.Tw2ParticleConstraint),l=_((c=f).prototype,"generators",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=_(c.prototype,"reflectionNoise",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=c))||u)||u)},"./unsupported/particle/constraint/Tw2ParticleConstraint.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleConstraint",(function(){return g}));var n,i,o=r("./global/utils/index.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,y,m,b,h,v,g=(n=o.meta.abstract,i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,e);var t,r,n,i=s(o);function o(){return u(this,o),i.apply(this,arguments)}return t=o,(r=[{key:"ApplyConstraint",value:function(e,t,r,n){}}])&&c(t.prototype,r),n&&c(t,n),o}(o.meta.Model),d=i.prototype,y="ApplyConstraint",m=[n],b=Object.getOwnPropertyDescriptor(i.prototype,"ApplyConstraint"),h=i.prototype,v={},Object.keys(b).forEach((function(e){v[e]=b[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=m.slice().reverse().reduce((function(e,t){return t(d,y,e)||e}),v),h&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(h):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,y,v),v=null),i)},"./unsupported/particle/constraint/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/particle/constraint/Tr2PlaneConstraint.js");r.d(t,"Tr2PlaneConstraint",(function(){return n.Tr2PlaneConstraint}))},"./unsupported/particle/emitter/Tr2GpuSharedEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuSharedEmitter",(function(){return Ae}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe,ae,ue,ce,le,se,fe,pe,de,ye,me,be,he,ve,ge,we=r("./global/utils/index.js"),xe=r("./global/math/index.js"),_e=r("./particle/emitter/Tw2ParticleEmitter.js");function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var i=Pe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Oe(this,r)}}function Oe(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?Re(e):t}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Ae=(n=we.meta.type("Tr2GpuSharedEmitter"),i=we.meta.notImplemented,o=we.meta.string,a=we.meta.float,u=we.meta.vector3,c=we.meta.float,l=we.meta.color,s=we.meta.color,f=we.meta.color,p=we.meta.color,d=we.meta.float,y=we.meta.boolean,m=we.meta.vector3,b=we.meta.float,h=we.meta.float,v=we.meta.float,g=we.meta.float,w=we.meta.float,x=we.meta.float,_=we.meta.float,z=we.meta.float,S=we.meta.float,j=we.meta.float,E=we.meta.float,T=we.meta.struct("Tr2GpuParticleSystem"),O=we.meta.vector3,R=we.meta.float,P=we.meta.float,D=we.meta.boolean,A=we.meta.float,M=we.meta.vector3,C=we.meta.uint,k=we.meta.float,I=we.meta.float,L=we.meta.float,n(G=i((ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(r,e);var t=Te(r);function r(){var e;je(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Se(e=t.call.apply(t,[this].concat(i)),"name",B,Re(e)),Se(e,"angle",N,Re(e)),Se(e,"attractorPosition",U,Re(e)),Se(e,"attractorStrength",V,Re(e)),Se(e,"color0",q,Re(e)),Se(e,"color1",H,Re(e)),Se(e,"color2",W,Re(e)),Se(e,"color3",X,Re(e)),Se(e,"colorMidpoint",K,Re(e)),Se(e,"continuousEmitter",Y,Re(e)),Se(e,"direction",Q,Re(e)),Se(e,"drag",Z,Re(e)),Se(e,"emissionDensity",J,Re(e)),Se(e,"gravity",$,Re(e)),Se(e,"inheritVelocity",ee,Re(e)),Se(e,"innerAngle",te,Re(e)),Se(e,"maxDisplacement",re,Re(e)),Se(e,"maxEmissionDensity",ne,Re(e)),Se(e,"maxLifeTime",ie,Re(e)),Se(e,"maxSpeed",oe,Re(e)),Se(e,"minLifeTime",ae,Re(e)),Se(e,"minSpeed",ue,Re(e)),Se(e,"particleSystem",ce,Re(e)),Se(e,"position",le,Re(e)),Se(e,"radius",se,Re(e)),Se(e,"rate",fe,Re(e)),Se(e,"scaledByParent",pe,Re(e)),Se(e,"sizeVariance",de,Re(e)),Se(e,"sizes",ye,Re(e)),Se(e,"textureIndex",me,Re(e)),Se(e,"turbulenceAmplitude",be,Re(e)),Se(e,"turbulenceFrequency",he,Re(e)),Se(e,"velocityStretchRotation",ve,Re(e)),e}return r}(_e.Tw2ParticleEmitter),B=De((F=ge).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=De(F.prototype,"angle",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=De(F.prototype,"attractorPosition",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec3.create()}}),V=De(F.prototype,"attractorStrength",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=De(F.prototype,"color0",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec4.create()}}),H=De(F.prototype,"color1",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec4.create()}}),W=De(F.prototype,"color2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec4.create()}}),X=De(F.prototype,"color3",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec4.create()}}),K=De(F.prototype,"colorMidpoint",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=De(F.prototype,"continuousEmitter",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=De(F.prototype,"direction",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec3.create()}}),Z=De(F.prototype,"drag",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=De(F.prototype,"emissionDensity",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$=De(F.prototype,"gravity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ee=De(F.prototype,"inheritVelocity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),te=De(F.prototype,"innerAngle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),re=De(F.prototype,"maxDisplacement",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ne=De(F.prototype,"maxEmissionDensity",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ie=De(F.prototype,"maxLifeTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oe=De(F.prototype,"maxSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ae=De(F.prototype,"minLifeTime",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ue=De(F.prototype,"minSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ce=De(F.prototype,"particleSystem",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=De(F.prototype,"position",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec3.create()}}),se=De(F.prototype,"radius",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fe=De(F.prototype,"rate",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe=De(F.prototype,"scaledByParent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de=De(F.prototype,"sizeVariance",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ye=De(F.prototype,"sizes",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec3.create()}}),me=De(F.prototype,"textureIndex",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),be=De(F.prototype,"turbulenceAmplitude",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),he=De(F.prototype,"turbulenceFrequency",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ve=De(F.prototype,"velocityStretchRotation",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=F))||G)||G)},"./unsupported/particle/emitter/Tr2GpuUniqueEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuUniqueEmitter",(function(){return Ae}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K,Y,Q,Z,J,$,ee,te,re,ne,ie,oe,ae,ue,ce,le,se,fe,pe,de,ye,me,be,he,ve,ge,we=r("./global/utils/index.js"),xe=r("./global/math/index.js"),_e=r("./particle/emitter/Tw2ParticleEmitter.js");function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var i=Pe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Oe(this,r)}}function Oe(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?Re(e):t}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Ae=(n=we.meta.type("Tr2GpuUniqueEmitter"),i=we.meta.notImplemented,o=we.meta.string,a=we.meta.float,u=we.meta.vector3,c=we.meta.float,l=we.meta.color,s=we.meta.color,f=we.meta.color,p=we.meta.color,d=we.meta.float,y=we.meta.boolean,m=we.meta.vector3,b=we.meta.float,h=we.meta.float,v=we.meta.float,g=we.meta.float,w=we.meta.float,x=we.meta.float,_=we.meta.float,z=we.meta.float,S=we.meta.float,j=we.meta.float,E=we.meta.float,T=we.meta.struct("Tr2GpuParticleSystem"),O=we.meta.vector3,R=we.meta.float,P=we.meta.float,D=we.meta.boolean,A=we.meta.float,M=we.meta.vector3,C=we.meta.uint,k=we.meta.float,I=we.meta.float,L=we.meta.float,n(G=i((ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(r,e);var t=Te(r);function r(){var e;je(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Se(e=t.call.apply(t,[this].concat(i)),"name",B,Re(e)),Se(e,"angle",N,Re(e)),Se(e,"attractorPosition",U,Re(e)),Se(e,"attractorStrength",V,Re(e)),Se(e,"color0",q,Re(e)),Se(e,"color1",H,Re(e)),Se(e,"color2",W,Re(e)),Se(e,"color3",X,Re(e)),Se(e,"colorMidpoint",K,Re(e)),Se(e,"continuousEmitter",Y,Re(e)),Se(e,"direction",Q,Re(e)),Se(e,"drag",Z,Re(e)),Se(e,"emissionDensity",J,Re(e)),Se(e,"gravity",$,Re(e)),Se(e,"inheritVelocity",ee,Re(e)),Se(e,"innerAngle",te,Re(e)),Se(e,"maxDisplacement",re,Re(e)),Se(e,"maxEmissionDensity",ne,Re(e)),Se(e,"maxLifeTime",ie,Re(e)),Se(e,"maxSpeed",oe,Re(e)),Se(e,"minLifeTime",ae,Re(e)),Se(e,"minSpeed",ue,Re(e)),Se(e,"particleSystem",ce,Re(e)),Se(e,"position",le,Re(e)),Se(e,"radius",se,Re(e)),Se(e,"rate",fe,Re(e)),Se(e,"scaledByParent",pe,Re(e)),Se(e,"sizeVariance",de,Re(e)),Se(e,"sizes",ye,Re(e)),Se(e,"textureIndex",me,Re(e)),Se(e,"turbulenceAmplitude",be,Re(e)),Se(e,"turbulenceFrequency",he,Re(e)),Se(e,"velocityStretchRotation",ve,Re(e)),e}return r}(_e.Tw2ParticleEmitter),B=De((F=ge).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=De(F.prototype,"angle",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=De(F.prototype,"attractorPosition",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec3.create()}}),V=De(F.prototype,"attractorStrength",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=De(F.prototype,"color0",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec4.create()}}),H=De(F.prototype,"color1",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec4.create()}}),W=De(F.prototype,"color2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec4.create()}}),X=De(F.prototype,"color3",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec4.create()}}),K=De(F.prototype,"colorMidpoint",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=De(F.prototype,"continuousEmitter",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=De(F.prototype,"direction",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec3.create()}}),Z=De(F.prototype,"drag",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=De(F.prototype,"emissionDensity",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$=De(F.prototype,"gravity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ee=De(F.prototype,"inheritVelocity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),te=De(F.prototype,"innerAngle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),re=De(F.prototype,"maxDisplacement",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ne=De(F.prototype,"maxEmissionDensity",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ie=De(F.prototype,"maxLifeTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oe=De(F.prototype,"maxSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ae=De(F.prototype,"minLifeTime",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ue=De(F.prototype,"minSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ce=De(F.prototype,"particleSystem",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=De(F.prototype,"position",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec3.create()}}),se=De(F.prototype,"radius",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fe=De(F.prototype,"rate",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe=De(F.prototype,"scaledByParent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de=De(F.prototype,"sizeVariance",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ye=De(F.prototype,"sizes",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe.vec3.create()}}),me=De(F.prototype,"textureIndex",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),be=De(F.prototype,"turbulenceAmplitude",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),he=De(F.prototype,"turbulenceFrequency",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ve=De(F.prototype,"velocityStretchRotation",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=F))||G)||G)},"./unsupported/particle/emitter/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/particle/emitter/Tr2GpuSharedEmitter.js");r.d(t,"Tr2GpuSharedEmitter",(function(){return n.Tr2GpuSharedEmitter}));var i=r("./unsupported/particle/emitter/Tr2GpuUniqueEmitter.js");r.d(t,"Tr2GpuUniqueEmitter",(function(){return i.Tr2GpuUniqueEmitter}))},"./unsupported/particle/force/Tr2ForceSphereVolume.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ForceSphereVolume",(function(){return S}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./particle/force/Tw2ParticleForce.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=p.meta.type("Tr2ForceSphereVolume"),i=p.meta.notImplemented,o=p.meta.list("Tw2ParticleForce"),a=p.meta.float,n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,r,n,i=g(o);function o(){var e;b(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(e=i.call.apply(i,[this].concat(r)),"forces",l,x(e)),m(e,"radius",s,x(e)),e}return t=o,(r=[{key:"Update",value:function(e){for(var t=0;t<this.forces.length;t++)this.forces[t].Update(e)}}])&&h(t.prototype,r),n&&h(t,n),o}(d.Tw2ParticleForce),l=z((c=f).prototype,"forces",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=z(c.prototype,"radius",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=c))||u)||u)},"./unsupported/particle/force/Tr2ParticleVortexForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ParticleVortexForce",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js"),m=r("./global/math/index.js"),b=r("./particle/force/Tw2ParticleForce.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=y.meta.type("Tr2ParticleVortexForce"),i=y.meta.notImplemented,o=y.meta.vector3,a=y.meta.float,u=y.meta.vector3,n(c=i((d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,e);var t=x(r);function r(){var e;g(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return v(e=t.call.apply(t,[this].concat(i)),"axis",s,z(e)),v(e,"magnitude",f,z(e)),v(e,"position",p,z(e)),e}return r}(b.Tw2ParticleForce),s=j((l=d).prototype,"axis",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.vec3.create()}}),f=j(l.prototype,"magnitude",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=j(l.prototype,"position",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.vec3.create()}}),c=l))||c)||c)},"./unsupported/particle/force/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/particle/force/Tr2ForceSphereVolume.js");r.d(t,"Tr2ForceSphereVolume",(function(){return n.Tr2ForceSphereVolume}));var i=r("./unsupported/particle/force/Tr2ParticleVortexForce.js");r.d(t,"Tr2ParticleVortexForce",(function(){return i.Tr2ParticleVortexForce}))},"./unsupported/particle/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/particle/constraint/index.js");r.d(t,"Tr2PlaneConstraint",(function(){return n.Tr2PlaneConstraint}));var i=r("./unsupported/particle/emitter/index.js");r.d(t,"Tr2GpuSharedEmitter",(function(){return i.Tr2GpuSharedEmitter})),r.d(t,"Tr2GpuUniqueEmitter",(function(){return i.Tr2GpuUniqueEmitter}));var o=r("./unsupported/particle/force/index.js");r.d(t,"Tr2ForceSphereVolume",(function(){return o.Tr2ForceSphereVolume})),r.d(t,"Tr2ParticleVortexForce",(function(){return o.Tr2ParticleVortexForce}));var a=r("./unsupported/particle/Tw2GpuParticleSystem.js");r.d(t,"Tr2GpuParticleSystem",(function(){return a.Tr2GpuParticleSystem}))},"./unsupported/state/Tr2StateMachine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachine",(function(){return S}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=(n=y.meta.notImplemented,i=y.meta.type("Tr2StateMachine"),o=y.meta.string,a=y.meta.uint,u=y.meta.list("Tr2StateMachineState"),n(c=i((d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(r,e);var t=g(r);function r(){var e;h(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return b(e=t.call.apply(t,[this].concat(i)),"name",s,x(e)),b(e,"startState",f,x(e)),b(e,"states",p,x(e)),e}return r}(y.meta.Model),s=z((l=d).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=z(l.prototype,"startState",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=z(l.prototype,"states",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=l))||c)||c)},"./unsupported/state/Tr2StateMachineState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachineState",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=b.meta.notImplemented,i=b.meta.type("Tr2StateMachineState"),o=b.meta.string,a=b.meta.list("Tw2Action"),u=b.meta.struct(),c=b.meta.list("Tr2StateMachineTransition"),n(l=i((m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,e);var t=x(r);function r(){var e;g(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return v(e=t.call.apply(t,[this].concat(i)),"name",f,z(e)),v(e,"actions",p,z(e)),v(e,"finalizer",d,z(e)),v(e,"transitions",y,z(e)),e}return r}(b.meta.Model),f=j((s=m).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=j(s.prototype,"actions",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=j(s.prototype,"finalizer",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=j(s.prototype,"transitions",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=s))||l)||l)},"./unsupported/state/Tr2StateMachineTransition.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachineTransition",(function(){return _}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(n=p.meta.notImplemented,i=p.meta.type("Tr2StateMachineTransition"),o=p.meta.string,a=p.meta.string,n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(r,e);var t=h(r);function r(){var e;m(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return y(e=t.call.apply(t,[this].concat(i)),"name",l,g(e)),y(e,"condition",s,g(e)),e}return r}(p.meta.Model),l=x((c=f).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=x(c.prototype,"condition",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=c))||u)||u)},"./unsupported/state/Tr2SyncToAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2SyncToAnimation",(function(){return f}));var n,i=r("./global/utils/index.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=(0,i.meta.notImplemented)(n=i.meta.type("Tr2SyncToAnimation")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(r,e);var t=c(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(i.meta.Model))||n)||n},"./unsupported/state/action/Tr2ActionAnimateCurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionAnimateCurveSet",(function(){return z}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./unsupported/state/action/Tw2Action.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=p.meta.notImplemented,i=p.meta.type("Tr2ActionAnimateCurveSet"),o=p.meta.struct("Tw2CurveSet"),a=p.meta.string,n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=v(r);function r(){var e;b(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return m(e=t.call.apply(t,[this].concat(i)),"curveSet",l,w(e)),m(e,"value",s,w(e)),e}return r}(d.Tw2Action),l=_((c=f).prototype,"curveSet",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=_(c.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=c))||u)||u)},"./unsupported/state/action/Tr2ActionAnimateValue.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionAnimateValue",(function(){return T}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js"),h=r("./unsupported/state/action/Tw2Action.js");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return z(this,r)}}function z(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T=(n=b.meta.notImplemented,i=b.meta.type("Tr2ActionAnimateValue"),o=b.meta.string,a=b.meta.struct("Tr2CurveScalarExpression"),u=b.meta.path,c=b.meta.string,n(l=i((m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(r,e);var t=_(r);function r(){var e;w(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return g(e=t.call.apply(t,[this].concat(i)),"attribute",f,S(e)),g(e,"curve",p,S(e)),g(e,"path",d,S(e)),g(e,"value",y,S(e)),e}return r}(h.Tw2Action),f=E((s=m).prototype,"attribute",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=E(s.prototype,"curve",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=E(s.prototype,"path",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=E(s.prototype,"value",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=s))||l)||l)},"./unsupported/state/action/Tr2ActionChildEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionChildEffect",(function(){return j}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js"),m=r("./unsupported/state/action/Tw2Action.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=y.meta.notImplemented,i=y.meta.type("Tr2ActionChildEffect"),o=y.meta.string,a=y.meta.path,u=y.meta.boolean,n(c=i((d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t=w(r);function r(){var e;v(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return h(e=t.call.apply(t,[this].concat(i)),"childName",s,_(e)),h(e,"path",f,_(e)),h(e,"removeOnStop",p,_(e)),e}return r}(m.Tw2Action),s=S((l=d).prototype,"childName",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=S(l.prototype,"path",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=S(l.prototype,"removeOnStop",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=l))||c)||c)},"./unsupported/state/action/Tr2ActionOverlay.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionOverlay",(function(){return E}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js"),f=r("./unsupported/state/action/Tw2Action.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,x,_,z,S,j,E=(n=s.meta.notImplemented,i=s.meta.type("Tr2ActionOverlay"),o=s.meta.path,n(a=i((l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,e);var t=b(r);function r(){var e;y(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(e=t.call.apply(t,[this].concat(i)),"path",c,v(e)),e}return r}(f.Tw2Action),w=(u=l).prototype,x="path",_=[o],z={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},j={},Object.keys(z).forEach((function(e){j[e]=z[e]})),j.enumerable=!!j.enumerable,j.configurable=!!j.configurable,("value"in j||j.initializer)&&(j.writable=!0),j=_.slice().reverse().reduce((function(e,t){return t(w,x,e)||e}),j),S&&void 0!==j.initializer&&(j.value=j.initializer?j.initializer.call(S):void 0,j.initializer=void 0),void 0===j.initializer&&(Object.defineProperty(w,x,j),j=null),c=j,a=u))||a)||a)},"./unsupported/state/action/Tr2ActionPlayCurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionPlayCurveSet",(function(){return j}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js"),m=r("./unsupported/state/action/Tw2Action.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=y.meta.notImplemented,i=y.meta.type("Tr2ActionPlayCurveSet"),o=y.meta.string,a=y.meta.string,u=y.meta.boolean,n(c=i((d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t=w(r);function r(){var e;v(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return h(e=t.call.apply(t,[this].concat(i)),"curveSetName",s,_(e)),h(e,"rangeName",f,_(e)),h(e,"syncToRange",p,_(e)),e}return r}(m.Tw2Action),s=S((l=d).prototype,"curveSetName",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=S(l.prototype,"rangeName",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=S(l.prototype,"syncToRange",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=l))||c)||c)},"./unsupported/state/action/Tr2ActionPlayMeshAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionPlayMeshAnimation",(function(){return j}));var n,i,o,a,u,c,l,s,f,p,d,y=r("./global/utils/index.js"),m=r("./unsupported/state/action/Tw2Action.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var i=z(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(n=y.meta.notImplemented,i=y.meta.type("Tr2ActionPlayMeshAnimation"),o=y.meta.string,a=y.meta.uint,u=y.meta.string,n(c=i((d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t=w(r);function r(){var e;v(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return h(e=t.call.apply(t,[this].concat(i)),"animation",s,_(e)),h(e,"loops",f,_(e)),h(e,"mask",p,_(e)),e}return r}(m.Tw2Action),s=S((l=d).prototype,"animation",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=S(l.prototype,"loops",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=S(l.prototype,"mask",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=l))||c)||c)},"./unsupported/state/action/Tr2ActionPlaySound.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionPlaySound",(function(){return z}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./unsupported/state/action/Tw2Action.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var z=(n=p.meta.notImplemented,i=p.meta.type("Tr2ActionPlaySound"),o=p.meta.string,a=p.meta.string,n(u=i((f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=v(r);function r(){var e;b(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return m(e=t.call.apply(t,[this].concat(i)),"emitter",l,w(e)),m(e,"event",s,w(e)),e}return r}(d.Tw2Action),l=_((c=f).prototype,"emitter",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=_(c.prototype,"event",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=c))||u)||u)},"./unsupported/state/action/Tr2ActionResetClipSphereCenter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionResetClipSphereCenter",(function(){return p}));var n,i=r("./global/utils/index.js"),o=r("./unsupported/state/action/Tw2Action.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=(0,i.meta.notImplemented)(n=i.meta.type("Tr2ActionResetClipSphereCenter")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t=l(r);function r(){return u(this,r),t.apply(this,arguments)}return r}(o.Tw2Action))||n)||n},"./unsupported/state/action/Tr2ActionSetValue.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionSetValue",(function(){return T}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js"),h=r("./unsupported/state/action/Tw2Action.js");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return z(this,r)}}function z(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T=(n=b.meta.notImplemented,i=b.meta.type("Tr2ActionSetValue"),o=b.meta.string,a=b.meta.boolean,u=b.meta.path,c=b.meta.string,n(l=i((m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(r,e);var t=_(r);function r(){var e;w(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return g(e=t.call.apply(t,[this].concat(i)),"attribute",f,S(e)),g(e,"delayBinding",p,S(e)),g(e,"path",d,S(e)),g(e,"value",y,S(e)),e}return r}(h.Tw2Action),f=E((s=m).prototype,"attribute",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=E(s.prototype,"delayBinding",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=E(s.prototype,"path",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=E(s.prototype,"value",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=s))||l)||l)},"./unsupported/state/action/Tr2ActionSpawnParticles.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionSpawnParticles",(function(){return p}));var n,i=r("./global/utils/index.js"),o=r("./unsupported/state/action/Tw2Action.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=(0,i.meta.notImplemented)(n=i.meta.type("Tr2ActionSpawnParticles")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t=l(r);function r(){return u(this,r),t.apply(this,arguments)}return r}(o.Tw2Action))||n)||n},"./unsupported/state/action/Tw2Action.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Action",(function(){return f}));var n,i=r("./global/utils/index.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=i.meta.type("Tw2Action")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(r,e);var t=c(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(i.meta.Model))||n},"./unsupported/state/action/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/state/action/Tr2ActionAnimateCurveSet.js");r.d(t,"Tr2ActionAnimateCurveSet",(function(){return n.Tr2ActionAnimateCurveSet}));var i=r("./unsupported/state/action/Tr2ActionAnimateValue.js");r.d(t,"Tr2ActionAnimateValue",(function(){return i.Tr2ActionAnimateValue}));var o=r("./unsupported/state/action/Tr2ActionChildEffect.js");r.d(t,"Tr2ActionChildEffect",(function(){return o.Tr2ActionChildEffect}));var a=r("./unsupported/state/action/Tr2ActionOverlay.js");r.d(t,"Tr2ActionOverlay",(function(){return a.Tr2ActionOverlay}));var u=r("./unsupported/state/action/Tr2ActionPlayCurveSet.js");r.d(t,"Tr2ActionPlayCurveSet",(function(){return u.Tr2ActionPlayCurveSet}));var c=r("./unsupported/state/action/Tr2ActionPlayMeshAnimation.js");r.d(t,"Tr2ActionPlayMeshAnimation",(function(){return c.Tr2ActionPlayMeshAnimation}));var l=r("./unsupported/state/action/Tr2ActionPlaySound.js");r.d(t,"Tr2ActionPlaySound",(function(){return l.Tr2ActionPlaySound}));var s=r("./unsupported/state/action/Tr2ActionResetClipSphereCenter.js");r.d(t,"Tr2ActionResetClipSphereCenter",(function(){return s.Tr2ActionResetClipSphereCenter}));var f=r("./unsupported/state/action/Tr2ActionSetValue.js");r.d(t,"Tr2ActionSetValue",(function(){return f.Tr2ActionSetValue}));var p=r("./unsupported/state/action/Tr2ActionSpawnParticles.js");r.d(t,"Tr2ActionSpawnParticles",(function(){return p.Tr2ActionSpawnParticles}))},"./unsupported/state/controller/Tr2Controller.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2Controller",(function(){return E}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/utils/index.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=(n=b.meta.notImplemented,i=b.meta.type("Tr2Controller"),o=b.meta.string,a=b.meta.boolean,u=b.meta.list("Tr2StateMachine"),c=b.meta.list("Tr2ControllerFloatVariable"),n(l=i((m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,e);var t=x(r);function r(){var e;g(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return v(e=t.call.apply(t,[this].concat(i)),"name",f,z(e)),v(e,"isShared",p,z(e)),v(e,"stateMachines",d,z(e)),v(e,"variables",y,z(e)),e}return r}(b.meta.Model),f=j((s=m).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=j(s.prototype,"isShared",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=j(s.prototype,"stateMachines",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=j(s.prototype,"variables",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=s))||l)||l)},"./unsupported/state/controller/Tr2ControllerReference.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ControllerReference",(function(){return j}));var n,i,o,a,u,c,l,s=r("./global/utils/index.js");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g,w,x,_,z,S,j=(n=s.meta.notImplemented,i=s.meta.type("Tr2ControllerReference"),o=s.meta.path,n(a=i((l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(r,e);var t=m(r);function r(){var e;d(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return p(e=t.call.apply(t,[this].concat(i)),"path",c,h(e)),e}return r}(s.meta.Model),g=(u=l).prototype,w="path",x=[o],_={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},S={},Object.keys(_).forEach((function(e){S[e]=_[e]})),S.enumerable=!!S.enumerable,S.configurable=!!S.configurable,("value"in S||S.initializer)&&(S.writable=!0),S=x.slice().reverse().reduce((function(e,t){return t(g,w,e)||e}),S),z&&void 0!==S.initializer&&(S.value=S.initializer?S.initializer.call(z):void 0,S.initializer=void 0),void 0===S.initializer&&(Object.defineProperty(g,w,S),S=null),c=S,a=u))||a)||a)},"./unsupported/state/controller/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/state/controller/Tr2Controller.js");r.d(t,"Tr2Controller",(function(){return n.Tr2Controller}));var i=r("./unsupported/state/controller/Tr2ControllerReference.js");r.d(t,"Tr2ControllerReference",(function(){return i.Tr2ControllerReference}))},"./unsupported/state/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/state/action/index.js");r.d(t,"Tr2ActionAnimateCurveSet",(function(){return n.Tr2ActionAnimateCurveSet})),r.d(t,"Tr2ActionAnimateValue",(function(){return n.Tr2ActionAnimateValue})),r.d(t,"Tr2ActionChildEffect",(function(){return n.Tr2ActionChildEffect})),r.d(t,"Tr2ActionOverlay",(function(){return n.Tr2ActionOverlay})),r.d(t,"Tr2ActionPlayCurveSet",(function(){return n.Tr2ActionPlayCurveSet})),r.d(t,"Tr2ActionPlayMeshAnimation",(function(){return n.Tr2ActionPlayMeshAnimation})),r.d(t,"Tr2ActionPlaySound",(function(){return n.Tr2ActionPlaySound})),r.d(t,"Tr2ActionResetClipSphereCenter",(function(){return n.Tr2ActionResetClipSphereCenter})),r.d(t,"Tr2ActionSetValue",(function(){return n.Tr2ActionSetValue})),r.d(t,"Tr2ActionSpawnParticles",(function(){return n.Tr2ActionSpawnParticles}));var i=r("./unsupported/state/controller/index.js");r.d(t,"Tr2Controller",(function(){return i.Tr2Controller})),r.d(t,"Tr2ControllerReference",(function(){return i.Tr2ControllerReference}));var o=r("./unsupported/state/variable/index.js");r.d(t,"Tr2ControllerFloatVariable",(function(){return o.Tr2ControllerFloatVariable}));var a=r("./unsupported/state/Tr2StateMachine.js");r.d(t,"Tr2StateMachine",(function(){return a.Tr2StateMachine}));var u=r("./unsupported/state/Tr2StateMachineState.js");r.d(t,"Tr2StateMachineState",(function(){return u.Tr2StateMachineState}));var c=r("./unsupported/state/Tr2StateMachineTransition.js");r.d(t,"Tr2StateMachineTransition",(function(){return c.Tr2StateMachineTransition}));var l=r("./unsupported/state/Tr2SyncToAnimation.js");r.d(t,"Tr2SyncToAnimation",(function(){return l.Tr2SyncToAnimation}))},"./unsupported/state/variable/Tr2ControllerFloatVariable.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ControllerFloatVariable",(function(){return g}));var n,i,o,a,u,c,l,s,f,p,d,y,m=r("./global/utils/index.js");function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var g=(n=m.meta.notImplemented,i=m.meta.type("Tr2ControllerFloatVariable"),o=m.meta.string,a=m.meta.float,u=m.meta.enums(),c=m.meta.uint,n(l=i((f=v((s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"name",f,this),b(this,"defaultValue",p,this),b(this,"enumValues",d,this),b(this,"variableType",y,this)}var t,r,n;return t=e,(r=[{key:"GetEnumsAsString",value:function(){var e=[];for(var t in this.enumValues)this.enumValues.hasOwnProperty(t)&&e.push("".concat(t,"=").concat(this.enumValues[t]));return e.sort().join(",")}}])&&h(t.prototype,r),n&&h(t,n),e}()).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=v(s.prototype,"defaultValue",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=v(s.prototype,"enumValues",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),y=v(s.prototype,"variableType",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=s))||l)||l)},"./unsupported/state/variable/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./unsupported/state/variable/Tr2ControllerFloatVariable.js");r.d(t,"Tr2ControllerFloatVariable",(function(){return n.Tr2ControllerFloatVariable}))},"./wrapped/APIManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"clearCache",(function(){return x})),r.d(t,"getCharacterID",(function(){return S})),r.d(t,"getCharacterPortraits",(function(){return E})),r.d(t,"getCorporationID",(function(){return O})),r.d(t,"getCorporationLogos",(function(){return P})),r.d(t,"getAllianceID",(function(){return A})),r.d(t,"getAllianceLogos",(function(){return C})),r.d(t,"getTypeID",(function(){return I})),r.d(t,"getGraphicID",(function(){return G})),r.d(t,"getResPathFromGraphicID",(function(){return B})),r.d(t,"getResPathFromTypeID",(function(){return U})),r.d(t,"getResPathFromTypeIDAndSkinMaterialID",(function(){return q})),r.d(t,"getResPathFromTypeIDAndSkinID",(function(){return W})),r.d(t,"getSkinMaterialID",(function(){return K})),r.d(t,"getSkinMaterialTypeIDs",(function(){return Q})),r.d(t,"getTypeIDSkinIDs",(function(){return J})),r.d(t,"getSkinMaterialSetID",(function(){return ee})),r.d(t,"getSkinID",(function(){return re})),r.d(t,"getSkinMaterialSetFromSkinID",(function(){return ie})),r.d(t,"getMoonID",(function(){return ae})),r.d(t,"getPlanetID",(function(){return ce})),r.d(t,"getSystemID",(function(){return se}));var n=r("./global/index.js"),i=r("./sof/EveSOFData.js");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,c,"next",e)}function c(e){u(o,n,i,a,c,"throw",e)}a(void 0)}))}}var l="characters",s="alliances",f="corporations",p="universe/graphics",d="universe/moons",y="universe/planets",m="universe/systems",b="universe/types",h="cdn:/static/moons",v="cdn:/static/planets";function g(e,t){t=Object.assign({language:"en-us",datasource:"tranquility"},t);var r=Object.keys(t).sort(),n="".concat("https://esi.evetech.net","/").concat("latest","/").concat(e);n.lastIndexOf("/")!==n.length-1&&(n+="/");for(var i=0;i<r.length;i++)n+="".concat(0===i?"?":"&").concat(r[i],"=").concat(t[r[i]]);return n.toLowerCase()}var w=new Map;function x(){w.clear()}function _(e,t,r,n,i){return z.apply(this,arguments)}function z(){return(z=c(regeneratorRuntime.mark((function e(t,r,i,o,a){var u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u="".concat(t,"/").concat(r),o&&("/"!==o.charAt(0)&&(o="/"+o),u+="".concat(o)),c=g(u,i),w.has(c)||w.set(c,n.resMan.Fetch(c,"json")),e.next=6,w.get(c);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return j.apply(this,arguments)}function j(){return(j=c(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_(l,t,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return T.apply(this,arguments)}function T(){return(T=c(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_(l,t,r,"portrait"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return R.apply(this,arguments)}function R(){return(R=c(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_(f,t,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return D.apply(this,arguments)}function D(){return(D=c(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_(f,t,r,"icons"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return M.apply(this,arguments)}function M(){return(M=c(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_(s,t,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return k.apply(this,arguments)}function k(){return(k=c(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_(s,t,r,"icons"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return L.apply(this,arguments)}function L(){return(L=c(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(b,t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){return F.apply(this,arguments)}function F(){return(F=c(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(p,t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){return N.apply(this,arguments)}function N(){return(N=c(regeneratorRuntime.mark((function e(t,r){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Graphic ID not found");case 2:return e.next=4,_(p,t,r);case 4:return n=e.sent,i=n.sof_dna,o=n.graphic_file,e.abrupt("return",i||o||"");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return V.apply(this,arguments)}function V(){return(V=c(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(b,t,r);case 2:return n=e.sent,i=n.graphic_id,e.next=6,B(i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,r){return H.apply(this,arguments)}function H(){return(H=c(regeneratorRuntime.mark((function e(t,r,n){var o,a,u,c,l,s,f,p,d,y,m,b,h,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t);case 2:return o=e.sent,e.next=5,K(r);case 5:return a=e.sent,u=a.materialSetID,e.next=9,ee(u);case 9:c=e.sent,n=n||c.description.split("(")[0],l=o.split(":"),s={},f=3;case 13:if(!(f<l.length)){e.next=25;break}e.prev=14,p=l[f].split("?"),s[p[0].toUpperCase()]=p[1].split(";"),e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(14),new i.ErrSOFDNAFormatInvalid({dna:o});case 22:++f,e.next=13;break;case 25:return d=l[0],y=c.sof_faction_name||l[1],m=l[2],b=s.MESH||s.MATERIAL,h=s.PATTERN,v=c.res_path_insert?c.res_path_insert:s.RESPATHINSERT,(c.sof_pattern_name||c.pattern_material_1||c.pattern_material_2)&&(h=[c.sof_pattern_name||"none",c.pattern_material_1||"none",c.pattern_material_2||"none"]),(c.material_1||c.material_2||c.material_3||c.material_4)&&(b=[c.material_1||"none",c.material_2||"none",c.material_3||"none",c.material_4||"none"]),g="".concat(d,":").concat(y,":").concat(m),b&&(g+=":material?".concat(b.join(";"))),h&&(g+=":pattern?".concat(h.join(";"))),v&&"none"!==v.toLowerCase()&&(g+=":respathinsert?".concat(v)),e.abrupt("return",{name:n,dna:g.toLowerCase()});case 33:case"end":return e.stop()}}),e,null,[[14,19]])})))).apply(this,arguments)}function W(e,t){return X.apply(this,arguments)}function X(){return(X=c(regeneratorRuntime.mark((function e(t,r){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(r);case 2:return n=e.sent,i=n.skinMaterialID,o=n.internalName,e.abrupt("return",q(t,i,o));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return Y.apply(this,arguments)}function Y(){return(Y=c(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resMan.BuildUrl("cdn:/static/skinMaterials/".concat(t)),w.has(r)||w.set(r,n.resMan.Fetch(r,"json")),e.next=4,w.get(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return Z.apply(this,arguments)}function Z(){return(Z=c(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resMan.BuildUrl("cdn:/static/skinMaterialsToTypes/".concat(t)),w.has(r)||w.set(r,n.resMan.Fetch(r,"json").catch((function(e){return[]}))),e.next=4,w.get(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return $.apply(this,arguments)}function $(){return($=c(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resMan.BuildUrl("cdn:/static/typesToSkins/".concat(t)),w.has(r)||w.set(r,n.resMan.Fetch(r,"json").catch((function(e){return[]}))),e.next=4,w.get(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=c(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resMan.BuildUrl("cdn:/static/skinMaterialSets/".concat(t)),w.has(r)||w.set(r,n.resMan.Fetch(r,"json")),e.next=4,w.get(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=c(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resMan.BuildUrl("cdn:/static/skins/".concat(t)),w.has(r)||w.set(r,n.resMan.Fetch(r,"json")),e.next=4,w.get(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return oe.apply(this,arguments)}function oe(){return(oe=c(regeneratorRuntime.mark((function e(t){var r,n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t);case 2:return r=e.sent,n=r.skinMaterialID,e.next=6,K(o);case 6:return i=e.sent,o=i.materialSetID,e.next=10,ee(n);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t){return ue.apply(this,arguments)}function ue(){return(ue=c(regeneratorRuntime.mark((function e(t,r){var i,a,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.resMan.BuildUrl("".concat(h,"/").concat(t)),e.next=3,Promise.all([_(d,t,r),n.resMan.Fetch(i,"json")]);case 3:return a=e.sent,u=o(a,2),c=u[0],l=u[1],e.abrupt("return",Object.assign({},c,l));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t){return le.apply(this,arguments)}function le(){return(le=c(regeneratorRuntime.mark((function e(t,r){var i,a,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.resMan.BuildUrl("".concat(v,"/").concat(t)),e.next=3,Promise.all([_(y,t,r),n.resMan.Fetch(i,"json")]);case 3:return a=e.sent,u=o(a,2),c=u[0],l=u[1],e.abrupt("return",Object.assign({},c,l));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){return fe.apply(this,arguments)}function fe(){return(fe=c(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_(m,t,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"./wrapped/RotationGizmo.js":function(e,t,r){"use strict";r.r(t),r.d(t,"RotationGizmo",(function(){return y}));var n=r("./eve/item/index.js"),i=(r("./core/Tw2Transform.js"),r("./global/meta/index.js")),o=r("./global/math/index.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(r,e);var t=f(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u(this,r),(e=t.call(this)).display=!0,e.name="Rotation Gizmo",e.rotation=o.quat.create(),e.translation=o.vec3.create(),e.scale=1,e._lines=[],e._localTransform=o.mat4.create(),e._worldTransform=o.mat4.create(),e._parentTransform=null;for(var a=e.constructor,c=0;c<4;c++){var l=1+.01*c;3==c&&(l+=.03);var s=n.EveCurveLineSet.CreateCircle({name:a.DefaultNames[c],color:a.DefaultColors[c],radius:1,dots:a.DefaultSteps,width:a.DefaultWidth,enableZ:a.DefaultEnableZ,lookAtCamera:3===c,rotation:a.DefaultRotation[c],direction:3!==c?a.DefaultDirection:0,scaling:[l,l,l],xWidth:3===c?0:i,xHeight:3===c?i:0});e._lines.push(s)}return e}return l(r,[{key:"x",get:function(){return this._lines[0]||null}},{key:"y",get:function(){return this._lines[1]||null}},{key:"z",get:function(){return this._lines[2]||null}},{key:"w",get:function(){return this._lines[3]||null}}]),l(r,[{key:"EnableZ",value:function(e){for(var t=0;t<this._lines.length;t++)this._lines[t].enableZ=e}},{key:"SetXColor",value:function(e){this.x.ChangeAllItemColors(e,e)}},{key:"SetYColor",value:function(e){this.y.ChangeAllItemColors(e,e)}},{key:"SetZColor",value:function(e){this.z.ChangeAllItemColors(e,e)}},{key:"SetWColor",value:function(e){this.w.ChangeAllItemColors(e,e)}},{key:"SetWidth",value:function(e){for(var t=0;t<this._lines.length;t++)this._lines[t].ChangeAllItemWidths(e)}},{key:"Unload",value:function(e){for(var t=0;t<this._lines.length;t++)this._lines[t].Unload(e)}},{key:"Rebuild",value:function(e){for(var t=0;t<this._lines.length;t++)this._lines[t].Rebuild(e)}},{key:"GetBatches",value:function(e,t,r){if(this.display)for(var n=0;n<this._lines.length;n++)this._lines[n].GetBatches(e,t,r)}},{key:"Update",value:function(e){if(this.display)for(var t=0;t<this._lines.length;t++)this._lines[t].Update(e)}},{key:"UpdateViewDependentData",value:function(e){if(this.display){o.mat4.fromRotationTranslationScale(this._localTransform,this.rotation,this.translation,[this.scale,this.scale,this.scale]),this._parentTransform&&(e=this._parentTransform),e?o.mat4.multiply(this._worldTransform,e,this._localTransform):o.mat4.copy(this._worldTransform,this._localTransform);for(var t=0;t<this._lines.length;t++)this._lines[t].UpdateViewDependentData(this._worldTransform)}}}]),r}(i.Model);y.DefaultNames=["xAxis","yAxis","zAxis","wAxis"],y.DefaultColors=[[1,0,0,1],[0,1,0,1],[0,0,1,1],[1,.5,0,1]],y.DefaultRotation=[o.quat.rotateX([],[0,0,0,1],Math.PI/2),o.quat.rotateY([],[0,0,0,1],Math.PI/2),o.quat.rotateZ([],[0,0,0,1],Math.PI/2),[0,0,0,1]],y.DefaultSteps=360,y.DefaultEnableZ=!0,y.DefaultWidth=3,y.DefaultDirection=.05,y.global={mat4_0:o.mat4.create()}},"./wrapped/WrappedCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WrappedCamera",(function(){return B}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x,_,z,S,j=r("./global/utils/index.js"),E=r("./global/tw2.js"),T=r("./global/math/index.js");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function P(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function D(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t,r){return t&&A(e.prototype,t),r&&A(e,r),e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var i=G(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return I(this,r)}}function I(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var B=(n=j.meta.type("WrappedCamera"),i=j.meta.uint,o=j.meta.uint,a=j.meta.uint,u=j.meta.uint,c=j.meta.float,l=j.meta.float,s=j.meta.vector3,f=j.meta.float,p=j.meta.float,n((S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(i,e);var t,r,n=k(i);function i(e,t){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),null!==e&&!(e instanceof HTMLCanvasElement))throw new ReferenceError("Invalid element");return D(r=n.call(this),"distance",m,L(r)),D(r,"minDistance",b,L(r)),D(r,"maxDistance",h,L(r)),D(r,"fov",v,L(r)),D(r,"rotationX",g,L(r)),D(r,"rotationY",w,L(r)),D(r,"poi",x,L(r)),D(r,"nearPlane",_,L(r)),D(r,"farPlane",z,L(r)),r.ignoreOnShiftDown=!0,r.ignoreOnCtrlDown=!0,r.ignoreOnAltDown=!0,r._aspect=0,r._onShift=null,r._shift=0,r._shiftStage=0,r._shiftX=null,r._dragX=0,r._dragY=0,r._lastRotationX=0,r._lastRotationY=0,r._rotationSpeedX=0,r._rotationSpeedY=0,r._additionalRotationX=0,r._additionalRotationY=0,r._measureRotation=null,r._moveEvent=null,r._upEvent=null,r._prevScale=null,r._worldTransform=T.mat4.create(),r._worldInverseTransform=T.mat4.create(),r._DragStart=function(e){if(!(e.altKey&&r.ignoreOnAltDown||e.ctrlKey&&r.ignoreOnCtrlDown||e.shiftKey&&r.ignoreOnShiftDown||e.altKey)){var t=!!e.ctrlKey;(e.touches||r._onShift||0===e.button)&&(r._moveEvent||r._upEvent||(r.button=e.button,null===r._moveEvent&&(document.addEventListener("mousemove",r._moveEvent=function(e){return r._DragMove(e,t)},!0),document.addEventListener("touchmove",r._moveEvent,!0)),null===r._upEvent&&(document.addEventListener("mouseup",r._upEvent=function(e){return r._DragStop(e)},!0),document.addEventListener("touchend",r._upEvent,!0)),e.preventDefault(),e.touches&&(e.screenX=e.touches[0].screenX,e.screenY=e.touches[0].screenY),r._dragX=e.screenX,r._dragY=t?r._dragY:e.screenY,r._shiftX=null,r._rotationSpeedX=0,r._lastRotationX=r.rotationX,r._rotationSpeedY=0,r._lastRotationY=r.rotationY,r._measureRotation=setTimeout((function(){return r._MeasureRotation()}),500)))}},r._MeasureRotation=function(){r._lastRotationX=r.rotationX,r._lastRotationY=r.rotationY,r._measureRotation=setTimeout((function(){return r._MeasureRotation()}),500)},r._DragMove=function(e,t){if(r._onShift&&(e.touches&&e.touches.length>2||!e.touches&&0!==e.button)){if(r._shiftStage=0,e.preventDefault(),e.touches){e.screenX=e.screenY=0;for(var n=0;n<e.touches.length;++n)e.screenX+=e.touches[n].screenX,t||(e.screenY+=e.touches[n].screenY);e.screenX/=e.touches.length,e.screenY/=e.touches.length}return null!==r._shiftX&&(r._shift+=(e.screenX-r._shiftX)/E.device.viewportWidth*2),void(r._shiftX=e.screenX)}if(r._shiftX=null,e.touches){if(e.touches.length>1){e.preventDefault();var i=e.touches[0].screenX-e.touches[1].screenX,o=e.touches[0].screenY-e.touches[1].screenY,a=Math.sqrt(i*i+o*o);if(null!=r._prevScale){var u=.03*(r._prevScale-a);r.distance=r.distance+u*r.distance*.1,r.distance<r.minDistance&&(r.distance=r.minDistance),r.distance>r.maxDistance&&(r.distance=r.maxDistance)}return void(r._prevScale=a)}e.screenX=e.touches[0].screenX,e.screenY=e.touches[0].screenY}if(void 0!==e.screenX){var c=.01*-(r._dragX-e.screenX);r.rotationX+=c,r._dragX=e.screenX,c=.01*-(r._dragY-e.screenY),r.rotationY+=c,r._dragY=e.screenY,r.rotationY<-Math.PI/2&&(r.rotationY=-Math.PI/2),r.rotationY>Math.PI/2&&(r.rotationY=Math.PI/2)}},r._DragStop=function(e){clearTimeout(r._measureRotation),document.removeEventListener("mousemove",r._moveEvent,!0),document.removeEventListener("mouseup",r._upEvent,!0),document.removeEventListener("touchmove",r._moveEvent,!0),document.removeEventListener("touchend",r._upEvent,!0),r._moveEvent=null,r._upEvent=null;var t=r.rotationX-r._lastRotationX;r._rotationSpeedX=.5*t,t=r.rotationY-r._lastRotationY,r._rotationSpeedY=.5*t,r._prevScale=null,r._onShift&&(Math.abs(r._shift)>.5?(r._shiftStage=2,r.onShift(0,r._shift>0)):r._shiftStage=1)},r._WheelHandler=function(e,t){if(t||(t=r._element),e||(e=window.event),(e.srcElement?e.srcElement:e.target)!==t)return!1;var n=0;return e.wheelDelta?(n=e.wheelDelta/120,window.opera&&(n=-n)):e.detail&&(n=-e.detail/3),n&&(r.distance=r.distance+n*r.distance*.1,r.distance<r.minDistance&&(r.distance=r.minDistance)),!1},e&&(e.addEventListener("mousedown",r._DragStart,!1),e.addEventListener("touchstart",r._DragStart,!0),window.addEventListener("DOMMouseScroll",r._WheelHandler,!1),window.addEventListener("mousewheel",r._WheelHandler,!1),r._element=e),t&&r.SetValues(t),r}return M(i,[{key:"isCamera",get:function(){return!0}}]),M(i,[{key:"Destroy",value:function(){this._element.removeEventListener("mousedown",this._DragStart),this._element.removeEventListener("touchstart",this._DragStart),window.removeEventListener("DOMMouseScroll",this._WheelHandler),window.removeEventListener("mousewheel",this._WheelHandler),document.removeEventListener("mousemove",this._moveEvent),document.removeEventListener("touchmove",this._moveEvent),document.removeEventListener("mouseup",this._upEvent),document.removeEventListener("touchend",this._upEvent)}},{key:"Focus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=1e3,n=[0,0,0];if(e.GetWidth){var o=e.GetWidth(),a=e.GetHeight(),u=o/a,c=i.getFovFromHorizontalDegrees(this.fov,this._aspect),l=c.radians;r=u<=this._aspect?i.distanceToFitObjectInView(a,l.vertical):i.distanceToFitObjectInView(o,l.horizontal),r=Math.abs(r),e.wrapped.radius?(e.wrapped.GetTranslation(n),r=2*e.wrapped.radius):e.wrapped.boundingSphereCenter?T.vec3.copy(n,e.wrapped.boundingSphereCenter):e.wrapped.GetTranslation(n),T.vec3.transformMat4(n,n,e.GetTransform([]))}return T.vec3.copy(this.poi,n),this.distance=r*t,this}},{key:"OnShift",value:function(e){this._onShift=e}},{key:"GetView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.mat4.create();return T.mat4.copy(e,this._worldInverseTransform)}},{key:"GetWorldDirection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.vec3.create(),t=this.GetView(this.constructor.global.mat4_0);return e[0]=t[8],e[1]=t[9],e[2]=t[10],e}},{key:"GetProjection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.mat4.create(),t=arguments.length>1?arguments[1]:void 0,r=Math.tan(this.fov/360*Math.PI)*this.nearPlane,n=r*t;return this._aspect=t,T.mat4.frustum(e,-n,n,-r,r,this.nearPlane,this.farPlane>0?this.farPlane:2*this.distance)}},{key:"Update",value:function(e){this.rotationX+=this._rotationSpeedX*e,this._rotationSpeedX*=.9,this.rotationY+=this._rotationSpeedY*e,this._rotationSpeedY*=.9,this.rotationY<-Math.PI/2&&(this.rotationY=-Math.PI/2),this.rotationY>Math.PI/2&&(this.rotationY=Math.PI/2),2===this._shiftStage?(this._shift+=this._shift*e*5,Math.abs(this._shift)>2&&this._onShift(1,this._shift>0)):1===this._shiftStage&&(this._shift-=this._shift*Math.min(e,.5)*2),this.EmitEvent("update",e);var t=this._worldInverseTransform;T.mat4.identity(t),T.mat4.rotateY(t,t,-this._shift),T.mat4.translate(t,t,[0,0,-this.distance]),T.mat4.rotateX(t,t,this.rotationY+this._additionalRotationY),T.mat4.rotateY(t,t,this.rotationX+this._additionalRotationX),T.mat4.translate(t,t,[-this.poi[0],-this.poi[1],-this.poi[2]]),T.mat4.invert(this._worldTransform,t),this.post&&this.post.Update(e)}},{key:"Render",value:function(e){return!!this.post&&this.post.Render(e)}}],[{key:"distanceToFitObjectInView",value:function(e,t){return e/(2*Math.tan(t/2))}},{key:"getFovFromHorizontalDegrees",value:function(e,t){var r=e*Math.PI/180,n=2*Math.atan(Math.tan(r/2)*t);return{degrees:{vertical:Math.ceil(180*n/Math.PI),horizontal:e},radians:{vertical:r,horizontal:n}}}},{key:"fetch",value:(t=regeneratorRuntime.mark((function e(){var t,r,n,i,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},Object(j.isPlain)(t)||(t={canvas:t}),n=(r=t).canvas,i=R(r,["canvas"]),Object(j.isString)(n)&&(n=document.getElementById(n)),e.abrupt("return",new this(n,i));case 5:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){P(o,n,i,a,u,"next",e)}function u(e){P(o,n,i,a,u,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)})}]),i}(j.meta.Model),m=F((y=S).prototype,"distance",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=F(y.prototype,"minDistance",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),h=F(y.prototype,"maxDistance",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e6}}),v=F(y.prototype,"fov",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),g=F(y.prototype,"rotationX",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=F(y.prototype,"rotationY",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=F(y.prototype,"poi",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.vec3.create()}}),_=F(y.prototype,"nearPlane",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=F(y.prototype,"farPlane",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=y))||d)},"./wrapped/WrappedClient.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WrappedClient",(function(){return O}));var n,i=r("./global/math/index.js"),o=r("./global/utils/index.js"),a=r("./global/index.js"),u=r("./core/index.js"),c=r("./wrapped/WrappedCamera.js"),l=r("./wrapped/camera/index.js"),s=r("./wrapped/WrappedScene.js"),f=r("./wrapped/APIManager.js"),p=r("./wrapped/RotationGizmo.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function w(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,u,"next",e)}function u(e){w(o,n,i,a,u,"throw",e)}a(void 0)}))}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(Y,e);var t,r,l,p,d,m,b,v,w,E,T,O,R,P,D,A,M,C,k,I,L,G,F,B,N,U,V,q,H,W,X,K=j(Y);function Y(){var e;_(this,Y);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=K.call.apply(K,[this].concat(r))).scene=null,e.camera=null,e.post=null,e.math=i,e.util=o,e.sof=null,e.options={update:!0,render:!0,postEffects:!0,depth:!0,clearColor:i.vec4.fromValues(0,0,0,0),colorMask:i.vec4.fromValues(0,0,0,0),view:[0,0,1,1]},e}return t=Y,r=[{key:"Initialize",value:(X=x(regeneratorRuntime.mark((function e(){var t,r,n,i,u,c,l=this,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r=t.client,n=t.render,i=t.scene,u=t.camera,c=g(t,["client","render","scene","camera"]),r&&o.assignIfExists(this.options,r,Object.keys(this.options)),n||(n=function(e){return l.Render(e)}),a.tw2.Initialize(h({render:n},c)),e.next=7,Y.fetchEveSOF();case 7:if(this.sof=e.sent,!u){e.next=11;break}return e.next=11,this.FetchCamera(u);case 11:if(!i){e.next=14;break}return e.next=14,this.FetchScene(i);case 14:return e.abrupt("return",this);case 15:case"end":return e.stop()}}),e,this)}))),function(){return X.apply(this,arguments)})},{key:"Render",value:function(e){var t=this.options,r=t.render,n=t.update,i=t.postEffects,o=t.colorMask,u=t.view,c=this.camera,l=this.scene,s=this.post;if(n&&l&&(this.EmitEvent("update",e),c&&c.Update(e),l.Update(e),s&&s.Update&&s.Update(e,l),r)){a.device.gl,a.device.viewportAspect;var f=a.device.viewportWidth,p=a.device.viewportHeight,d=(a.device.RM_OPAQUE,u[0]*f),y=u[1]*p,m=u[2]*f-d,b=u[3]*p-y;this.EmitEvent("pre_render",e),a.tw2.SetOpaqueRenderStates().SetProjectionMatrix(c.GetProjection([],m/b)).SetViewMatrix(c.GetView([])).SetClearColor(this.scene.wrapped.clearColor).SetDepth(!0,"LEQUAL",1).ClearBufferBits(!0,!0,!0).SetViewport([d,y,m,b]),this.EmitEvent("pre_scene_render",e),l.Render(e),this.EmitEvent("post_scene_render",e),this.EmitEvent("pre_post",e);var h=!0;(!s||i&&!s.Render())&&(h=!1,a.tw2.SetColorMask(o).SetClearColor(this.options.clearColor).ClearBufferBits(!0,!0).SetColorMask([1,1,1,1])),this.EmitEvent("post_post",e,h)}if(this.postScenes)for(var v=0;v<this.postScenes.length;v++)this.postScenes[v].Render(e);return this.EmitEvent("post_render",e),!0}},{key:"FetchBasicCharacterData",value:(W=x(regeneratorRuntime.mark((function e(t){var r,n,i,o,u,c,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.getCharacterID)(t);case 2:return r=e.sent,n=r.corporation_id,i=r.alliance_id,o=a.tw2.GetURL("res:/texture/global/black.dds.0.png"),e.next=7,Promise.all([Object(f.getCorporationID)(n),Object(f.getCorporationLogos)(n),i?Object(f.getAllianceID)(i):{name:"None"},i?Object(f.getAllianceLogos)(i):{px128x128:o},Object(f.getCharacterPortraits)(t)]);case 7:return u=e.sent,c=y(u,5),l=c[0],c[1],s=c[2],c[3],c[4],e.abrupt("return",{character:r.name,corporation:l.name,alliance:s.name});case 15:case"end":return e.stop()}}),e)}))),function(e){return W.apply(this,arguments)})},{key:"FetchCharacterID",value:(H=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getCharacterID)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return H.apply(this,arguments)})},{key:"FetchCharacterPortraits",value:(q=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getCharacterPortraits)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return q.apply(this,arguments)})},{key:"FetchCorporationID",value:(V=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getCorporationID)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return V.apply(this,arguments)})},{key:"FetchCorporationLogos",value:(U=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getCorporationLogos)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return U.apply(this,arguments)})},{key:"FetchAllianceID",value:(N=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getAllianceID)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return N.apply(this,arguments)})},{key:"FetchAllianceLogos",value:(B=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getAllianceLogos)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return B.apply(this,arguments)})},{key:"FetchSkinMaterialTypeIDs",value:(F=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getSkinMaterialTypeIDs)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return F.apply(this,arguments)})},{key:"FetchTypeIDSkinIDs",value:(G=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getTypeIDSkinIDs)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return G.apply(this,arguments)})},{key:"FetchSkinID",value:(L=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getSkinID)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)})},{key:"FetchTypeID",value:(I=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getTypeID)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return I.apply(this,arguments)})},{key:"FetchGraphicID",value:(k=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getGraphicID)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return k.apply(this,arguments)})},{key:"FetchResPathFromTypeIDAndSkinMaterialID",value:(C=x(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getResPathFromTypeIDAndSkinMaterialID)(t,r));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return C.apply(this,arguments)})},{key:"FetchResPathFromTypeIDAndSkinID",value:(M=x(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getResPathFromTypeIDAndSkinID)(t,r));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return M.apply(this,arguments)})},{key:"FetchResPathFromTypeID",value:(A=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getResPathFromTypeID)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return A.apply(this,arguments)})},{key:"FetchResPathFromGraphicID",value:(D=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getResPathFromGraphicID)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return D.apply(this,arguments)})},{key:"FetchSOF",value:(P=x(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y.fetchEveSOF());case 1:case"end":return e.stop()}}),e)}))),function(){return P.apply(this,arguments)})},{key:"FetchSOFHullPatterns",value:(R=x(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.FetchSOF();case 2:return r=e.sent,e.abrupt("return",r.GetHullPatternNames(t));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"FetchSOFHulls",value:(O=x(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.FetchSOF();case 2:return t=e.sent,e.abrupt("return",t.GetHullNames([]));case 4:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"FetchSOFFactions",value:(T=x(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.FetchSOF();case 2:return t=e.sent,e.abrupt("return",t.GetFactionNames([]));case 4:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"FetchSOFRaces",value:(E=x(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.FetchSOF();case 2:return t=e.sent,e.abrupt("return",t.GetRaceNames([]));case 4:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"FetchSOFMaterials",value:(w=x(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.FetchSOF();case 2:return t=e.sent,e.abrupt("return",t.GetMaterialNames([]));case 4:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"FetchScene",value:(v=x(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.WrappedScene.fetch(t);case 2:return n=e.sent,r||this.SetScene(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"FetchCamera",value:(b=x(regeneratorRuntime.mark((function e(){var t,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},r=i.length>1?i[1]:void 0,o.isString(t)&&(t={canvas:t}),t.canvas||null===t.canvas||(t.canvas=this.canvas2d?this.canvas2d:this.canvas3d),e.next=6,c.WrappedCamera.fetch(t);case 6:return n=e.sent,r||this.SetCamera(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"SetScene",value:function(e){return this.scene!==e&&(this.scene&&this.EmitEvent("scene_removed",this.scene),this.scene=e,this.EmitEvent("scene_added",e)),this}},{key:"SetCamera",value:function(e){return this.camera!==e&&(this.camera&&this.EmitEvent("camera_removed",this.camera),this.camera=e,this.EmitEvent("camera_added",e)),this}},{key:"FetchSystemID",value:(m=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.getSystemID)(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)})},{key:"tw2",get:function(){return a.tw2}},{key:"dt",get:function(){return a.device.dt}},{key:"frame",get:function(){return a.device.frameCounter}},{key:"canvas3d",get:function(){return a.device.canvas}},{key:"canvas2d",get:function(){return a.device.canvas2d}}],l=[{key:"LoadTextureFromURL",value:(d=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=a.device.gl,i=n.createTexture();n.bindTexture(n.TEXTURE_2D,i);var o=n.RGBA,c=n.RGBA,l=n.UNSIGNED_BYTE,s=new Uint8Array([0,0,0,0]);n.texImage2D(n.TEXTURE_2D,0,o,1,1,0,c,l,s),n.bindTexture(n.TEXTURE_2d,null);var f=new Image;f.onerror=function(e){return r(e)},f.onload=function(){n.bindTexture(n.TEXTURE_2D,i),n.texImage2D(n.TEXTURE_2D,0,o,c,l,f),u.Tw2TextureRes.isPowerOfTwo(f.width,f.height)?n.generateMipmap(n.TEXTURE_2D):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR)),n.bindTexture(n.TEXTURE_2d,null),e(i)},f.src=t})));case 1:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"fetchEveSOF",value:(p=x(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return e.next=3,a.resMan.FetchObject(Y.SpaceObjectFactoryPath);case 3:n=e.sent;case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})}],r&&z(t.prototype,r),l&&z(t,l),Y}(u.Tw2EventEmitter);O.SpaceObjectFactoryPath="cdn:/dx9/model/spaceobjectfactory/data.black",O.prototype.CameraOrbitControls=l.CameraOrbitControls,O.prototype.OrthoCamera=l.OrthoCamera,O.prototype.OrthographicCamera=l.OrthographicCamera,O.prototype.PerspectiveCamera=l.PerspectiveCamera,O.prototype.RotationGizmo=p.RotationGizmo},"./wrapped/WrappedGenericObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WrappedGenericObject",(function(){return T}));var n,i,o,a,u,c,l,s,f,p=r("./global/utils/index.js"),d=r("./global/math/index.js"),y=r("./core/Tw2Error.js"),m=r("./core/Tw2Transform.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return z(this,r)}}function z(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T=(n=p.meta.type("WrappedGenericObject"),i=p.meta.struct(),o=p.meta.plain,n((f=s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(u,e);var t,r,n,i,o,a=_(u);function u(){var e;g(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(e=a.call.apply(a,[this].concat(r)),"wrapped",c,S(e)),v(e,"custom",l,S(e)),e}return t=u,r=[{key:"Intersect",value:function(e,t){return!!this.wrapped&&!!this.wrapped.Intersect(e,t,{root:this})}},{key:"GetLongAxis",value:function(){if("boundingSphereRadius"in this.wrapped){var e=u.global,t=e.mat4_0,r=e.sph3_0,n=e.vec3_0;return this.GetScale(n),d.mat4.fromScaling(t,n),d.sph3.fromPositionRadius(r,this.wrapped.boundingSphereCenter,this.wrapped.boundingSphereRadius),d.sph3.transformMat4(r,r,t),Math.round(2*r[3])}return 0}},{key:"GetWidth",value:function(){return this.GetSize(u.global.vec3_1)[0]}},{key:"GetHeight",value:function(){return this.GetSize(u.global.vec3_1)[1]}},{key:"GetLength",value:function(){return this.GetSize(u.global.vec3_1)[2]}},{key:"GetSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.vec3.create(),t=u.global,r=t.box3_0,n=t.vec3_0,i=this.wrapped&&this.wrapped.mesh?this.wrapped.mesh.GetGeometryRes():null;return d.box3.fromBounds(r,i.minBounds,i.maxBounds),d.box3.getSize(e,r),this.GetScale(n),d.vec3.multiply(e,e,n)}},{key:"GetCenter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.vec3.create(),t=u.global,r=t.mat4_0,n=t.box3_0,i=this.wrapped&&this.wrapped.mesh?this.wrapped.mesh.GetGeometryRes():null;return d.box3.fromBounds(n,i.minBounds,i.maxBounds),d.box3.getCenter(e,n),this.GetTransform(r),d.vec3.transformMat4(e,e,r)}},{key:"OnWorldTransformModified",value:function(e){this.wrapped.SetTransform(e),this.EmitEvent("transform_modified")}},{key:"Update",value:function(e){this.EmitEvent("update",e)}},{key:"GetResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.wrapped.GetResources(e)}},{key:"_OnTransformUpdated",value:function(e){this.wrapped.SetTransform(e)}},{key:"display",get:function(){return this.wrapped.display},set:function(e){this.wrapped.display=e}}],n=[{key:"from",value:function(e,t){throw new y.ErrFeatureNotImplemented}},{key:"fetch",value:(i=regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new y.ErrFeatureNotImplemented;case 1:case"end":return e.stop()}}),e)})),o=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=i.apply(e,t);function a(e){h(o,r,n,a,u,"next",e)}function u(e){h(o,r,n,a,u,"throw",e)}a(void 0)}))},function(e,t){return o.apply(this,arguments)})}],r&&w(t.prototype,r),n&&w(t,n),u}(m.Tw2Transform),s.global={mat4_0:d.mat4.create(),sph3_0:d.sph3.create(),box3_0:d.box3.create(),vec3_0:d.vec3.create(),vec3_1:d.vec3.create()},c=E((u=f).prototype,"wrapped",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=E(u.prototype,"custom",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=u))||a)},"./wrapped/WrappedLensflare.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WrappedLensflare",(function(){return b}));var n,i=r("./global/utils/index.js"),o=r("./eve/effect/EveLensflare.js"),a=r("./global/index.js");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function l(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=i.meta.type("WrappedLensflare")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,r,n=d(u);function u(e,t){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),!(e instanceof o.EveLensflare))throw new ReferenceError("Invalid wrapped object");return(r=n.call(this)).wrapped=e,t&&r.SetValues(t),r}return f(u,[{key:"isLensflare",get:function(){return!0}}]),f(u,[{key:"Update",value:function(e){}}],[{key:"fetch",value:(t=regeneratorRuntime.mark((function e(){var t,r,n,o,u,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:{},Object(i.isString)(t)&&(t={resPath:t}),n=(r=t).resPath,o=c(r,["resPath"]),!n){e.next=10;break}return e.next=6,a.resMan.FetchObject(n);case 6:return(u=e.sent).mesh.additiveAreas.filter((function(e){return"sun0"===e.name.toLowerCase()||"dimwhite"===e.name.toLowerCase()})).forEach((function(e){return e.display=!1})),e.abrupt("return",new this(u,o));case 10:throw new ReferenceError("Could not identify resource path");case 11:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){l(o,n,i,a,u,"next",e)}function u(e){l(o,n,i,a,u,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)})}]),u}(i.meta.Model))||n},"./wrapped/WrappedPlanet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WrappedPlanet",(function(){return x}));var n,i=r("./global/utils/index.js"),o=r("./eve/object/index.js"),a=r("./wrapped/WrappedGenericObject.js"),u=r("./wrapped/APIManager.js"),c=r("./global/math/index.js");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function y(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=i.meta.type("WrappedPlanet")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,r,n=v(i);function i(e,t){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),!(e instanceof o.EvePlanet))throw new TypeError("Invalid wrapped object");return(r=n.call(this)).wrapped=e,t&&r.SetValues(t),r}return b(i,[{key:"isPlanet",get:function(){return!0}}]),b(i,[{key:"GetLongAxis",value:function(){var e=this.GetWorldScaling([]);return Math.max(e[0],e[1],e[2])}},{key:"GetSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.vec3.create();return this.GetScale(e)}}],[{key:"fetch",value:(t=regeneratorRuntime.mark((function e(){var t,r,n,i,a,c,l,p,y,m,b,h,v,g,w,x,_=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.length>0&&void 0!==_[0]?_[0]:{},r=t.itemID,n=t.resPath,i=t.heightMap1,a=t.heightMap2,c=t.atmospherePath,l=t.moonID,p=t.planetID,y=d(t,["itemID","resPath","heightMap1","heightMap2","atmospherePath","moonID","planetID"]),!l&&!p){e.next=27;break}if(!l){e.next=9;break}return e.next=6,Object(u.getMoonID)(l);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Object(u.getPlanetID)(p);case 11:e.t0=e.sent;case 12:return m=e.t0,e.next=15,Promise.all([Object(u.getGraphicID)(m.shader_preset),m.height_map_1?Object(u.getGraphicID)(m.height_map_1):null,m.height_map_2?Object(u.getGraphicID)(m.height_map_2):null]);case 15:b=e.sent,h=f(b,3),v=h[0],g=h[1],w=h[2],r=l||p,y.name=m.name,y.custom=s({position:[m.position.x,m.position.y,m.position.z],system_id:m.system_id},l?"moon_id":"planet_id",r),n||(n=v.graphic_file),!i&&g&&(i=g.graphic_file.replace(".dds",".png").replace("res:","cdn:")),!a&&w&&(a=w.graphic_file.replace(".dds",".png").replace("res:","cdn:")),y.radius||(y.radius=m.radius);case 27:if(!n){e.next=34;break}return x=new o.EvePlanet,e.next=31,x.Fetch({itemID:r,resPath:n,heightMap1:i,heightMap2:a,atmospherePath:c});case 31:return x._resPath=n,x._atmospherePath=c,e.abrupt("return",new this(x,y));case 34:throw new ReferenceError("Could not identify resource path");case 35:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){y(o,n,i,a,u,"next",e)}function u(e){y(o,n,i,a,u,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)})}]),i}(a.WrappedGenericObject))||n},"./wrapped/WrappedScene.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WrappedScene",(function(){return B}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b=r("./global/index.js"),h=r("./global/utils/index.js"),v=r("./eve/EveSpaceScene.js"),g=r("./wrapped/WrappedGenericObject.js"),w=r("./wrapped/WrappedSpaceObject.js"),x=r("./wrapped/WrappedShip.js"),_=r("./wrapped/WrappedLensflare.js"),z=r("./wrapped/WrappedPlanet.js"),S=r("./wrapped/WrappedClient.js"),j=r("./core/index.js");function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function O(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function R(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){O(o,n,i,a,u,"next",e)}function u(e){O(o,n,i,a,u,"throw",e)}a(void 0)}))}}function P(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(e,t,r){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t,r){return t&&A(e.prototype,t),r&&A(e,r),e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var i=G(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return I(this,r)}}function I(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var B=(n=h.meta.type("WrappedScene"),i=h.meta.list(),o=h.meta.boolean,a=h.meta.list(),u=h.meta.list(),n((m=y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(c,e);var t,r,n,i,o,a,u=k(c);function c(e,t){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),P(r=u.call(this),"objects",s,L(r)),P(r,"doWatch",f,L(r)),P(r,"lensflares",p,L(r)),P(r,"cameras",d,L(r)),r._rayCaster=new j.Tw2RayCaster,r._picker=new j.Tw2Picker,!(e instanceof v.EveSpaceScene))throw new ReferenceError("Invalid space object");return r.wrapped=e,t&&r.SetValues(t),r}return M(c,[{key:"backgroundObjects",get:function(){return this.wrapped.backgroundObjects}}]),M(c,[{key:"_OnTransformUpdated",value:function(e){this.wrapped.SetEnvironmentTransform(e)}},{key:"PickAllObjectsFromEvent",value:function(e,t){return this.PickObjectsFromEvent(this.objects.filter((function(e){return!e.isPlanet})),e,t)}},{key:"PickObjectsFromEvent",value:function(e,t,r){var n=this._picker.PickFromEvent(e.map((function(e){return e.wrapped||e})),t,r);return n&&n.root&&(n.wrapped=n.root,n.root=this.objects.find((function(e){return e.wrapped===n.root}))),n}},{key:"IntersectFromEvent",value:function(e,t){var r=e.altKey,n=e.ctrlKey,i=e.shiftKey,o=(e.clientX,e.clientY,{altKey:r,ctrlKey:n,shiftKey:i}),a=[];this._rayCaster.UpdateFromEvent(e,t),this.EmitEvent("intersecting",this,void 0,o),this._rayCaster.IntersectObjects(this.objects,a),a.length?(this.EmitEvent("intersected_objects",this,a,o),this.EmitEvent("intersected_closest",this,a[0],o)):this.EmitEvent("intersected_none",this,void 0,o)}},{key:"AddCamera",value:function(e){-1===this.cameras.indexOf(e)&&(this.cameras.push(e),this.EmitEvent("rebuilt",this))}},{key:"RemoveCamera",value:function(e){var t=this.cameras.indexOf(e);-1!==t&&(this.cameras.splice(t),this.EmitEvent("rebuilt",this))}},{key:"Update",value:function(e){this.EmitEvent("update",e);for(var t=0;t<this.objects.length;t++)this.objects[t].Update(e);this.wrapped.Update(e)}},{key:"Render",value:function(e){this.EmitEvent("render",e),this.wrapped.Render(e)}},{key:"Rebuild",value:function(){var e=this.wrapped,t=e.planets,r=e.objects,n=e.lensflares;t.splice(0),r.splice(0),n.splice(0);for(var i=0;i<this.lensflares.length;i++)n.push(this.lensflares[i].wrapped);for(var o=0;o<this.objects.length;o++)this.objects[o].isPlanet?t.push(this.objects[o].wrapped):r.push(this.objects[o].wrapped);this.EmitEvent("rebuilt")}},{key:"AddObject",value:function(e){return!this.objects.includes(e)&&(e.isLensflare?this.lensflares.push(e):this.objects.push(e),this.EmitEvent("object_added",e),this.Rebuild(),!0)}},{key:"RemoveObject",value:function(e,t){var r=this.objects.indexOf(e);return-1!==r&&(this.objects.splice(r,1),t&&t.skipEvent||this.EmitEvent("object_removed",e),t&&t.skipRebuild||this.Rebuild(),!0)}},{key:"RemoveAllObjects",value:function(e,t){for(var r=!1,n=0;n<this.objects.length;n++){var i=void 0;this.objects[n].isPlanet?i=t:e&&(i=!0),i&&(r=!0,this.RemoveObject(this.objects[n],{skipRebuild:!0}),n--)}r&&this.Rebuild()}},{key:"FetchLensflare",value:(a=R(regeneratorRuntime.mark((function e(t,r,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.WrappedLensflare.fetch(t);case 2:if(i=e.sent,!this.doWatch){e.next=6;break}return e.next=6,b.resMan.Watch(i,r);case 6:return n||this.AddObject(i),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return a.apply(this,arguments)})},{key:"FetchShip",value:(o=R(regeneratorRuntime.mark((function e(){var t,r,n,i,o,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=a.length>1?a[1]:void 0,n=a.length>2?a[2]:void 0,e.next=5,S.WrappedClient.fetchEveSOF();case 5:return i=e.sent,e.next=8,x.WrappedShip.fetch(t,i);case 8:if(o=e.sent,!this.doWatch){e.next=12;break}return e.next=12,b.resMan.Watch(o,r);case 12:return n||this.AddObject(o),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"FetchObject",value:(i=R(regeneratorRuntime.mark((function e(){var t,r,n,i,o,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=a.length>1?a[1]:void 0,n=a.length>2?a[2]:void 0,e.next=5,S.WrappedClient.fetchEveSOF();case 5:return i=e.sent,e.next=8,w.WrappedSpaceObject.fetch(t,i);case 8:if(o=e.sent,!this.doWatch){e.next=12;break}return e.next=12,b.resMan.Watch(o,r);case 12:return n||this.AddObject(o),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"FetchPlanet",value:(n=R(regeneratorRuntime.mark((function e(){var t,r,n,i,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1?o[1]:void 0,n=o.length>2?o[2]:void 0,t.itemID,e.next=6,z.WrappedPlanet.fetch(t);case 6:if(i=e.sent,!this.doWatch){e.next=10;break}return e.next=10,b.resMan.Watch(i,r);case 10:return n||this.AddObject(i),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"FetchMoon",value:(r=R(regeneratorRuntime.mark((function e(){var t,r,n,i,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1?o[1]:void 0,n=o.length>2?o[2]:void 0,t.itemID&&(t.moonID=t.itemID),e.next=6,z.WrappedPlanet.fetch(t);case 6:if(i=e.sent,!this.doWatch){e.next=10;break}return e.next=10,b.resMan.Watch(i,r);case 10:return n||this.AddObject(i),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}],[{key:"get",value:function(e,t,r){var n=D(G(c),"get",this).call(this,e,t,r);return Reflect.deleteProperty(n,"objects"),Reflect.deleteProperty(n,"planets"),Reflect.deleteProperty(n,"lensflares"),Object.assign(t,n)}},{key:"fetch",value:(t=R(regeneratorRuntime.mark((function e(){var t,r,n,i,o,a,u,l,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},r=s.length>1?s[1]:void 0,Object(h.isString)(t)?t={resPath:t}:Object(h.isVector)(t)&&(t={background:t}),i=(n=t).resPath,o=n.background,a=T(n,["resPath","background"]),!i){e.next=11;break}return e.next=7,b.resMan.FetchObject(i);case 7:(u=e.sent)._resPath=i,e.next=12;break;case 11:u=new v.EveSpaceScene;case 12:if(!o){e.next=29;break}if(!Object(h.isString)(o)){e.next=21;break}return e.next=16,b.resMan.FetchObject(c.StarFieldResPath);case 16:e.sent.SetTextures({NebulaMap:o}),u.backgroundEffect=u,e.next=29;break;case 21:if(!Object(h.isVector)(o)){e.next=28;break}u.clearColor[0]=o[0],u.clearColor[1]=o[1],u.clearColor[2]=o[2],u.clearColor[3]=void 0!==o[3]?o[3]:1,e.next=29;break;case 28:throw new TypeError("Invalid background value");case 29:return l=new this(u,a),e.next=32,b.resMan.Watch(l,r);case 32:return e.abrupt("return",l);case 33:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),c}(g.WrappedGenericObject),y.StarFieldResPath="cdn:/dx9/scene/starfield/starfieldNebula.black",s=F((l=m).prototype,"objects",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=F(l.prototype,"doWatch",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=F(l.prototype,"lensflares",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=F(l.prototype,"cameras",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=l))||c)},"./wrapped/WrappedShip.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WrappedShip",(function(){return g}));var n,i,o,a,u,c,l=r("./global/utils/index.js"),s=r("./eve/object/index.js"),f=r("./wrapped/WrappedSpaceObject.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var g=(n=l.meta.type("Ship"),i=l.meta.uint,o=l.meta.uint,a=l.meta.uint,n((v((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,e);var t,r,n,i=m(o);function o(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),!(e instanceof s.EveShip2||e instanceof s.EveShip))throw new TypeError("Invalid wrapped object");return i.call(this,e,t)}return t=o,(r=[{key:"kills",get:function(){return this.wrapped?this.wrapped.killCount:0},set:function(e){this.wrapped.killCount=e}},{key:"boosterStrength",get:function(){return this.wrapped?this.wrapped.boosterGain:0},set:function(e){this.wrapped.boosterGain=e}},{key:"boosterLength",get:function(){return this.wrapped?this.wrapped.boosters.effect.parameters.BoosterScale.z:0},set:function(e){this.wrapped.boosters.effect.parameters.BoosterScale.z=e}}])&&d(t.prototype,r),n&&d(t,n),o}(f.WrappedSpaceObject)).prototype,"kills",[i],Object.getOwnPropertyDescriptor(c.prototype,"kills"),c.prototype),v(c.prototype,"boosterStrength",[o],Object.getOwnPropertyDescriptor(c.prototype,"boosterStrength"),c.prototype),v(c.prototype,"boosterLength",[a],Object.getOwnPropertyDescriptor(c.prototype,"boosterLength"),c.prototype),u=c))||u)},"./wrapped/WrappedSlots.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WrappedSlot",(function(){return g}));var n=r("./core/Tw2EventEmitter.js"),i=r("./eve/item/index.js"),o=(r("./global/meta/index.js"),r("./global/utils/arr.js")),a=r("./global/math/index.js"),u=r("./global/index.js"),c=r("./wrapped/WrappedClient.js");r("../shaders/index.js");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["^(locator_",")_([0-9]+)([a-z]+)"]);return s=function(){return e},e}function f(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,u,"next",e)}function u(e){f(o,n,i,a,u,"throw",e)}a(void 0)}))}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(b,e);var t,r,n,l,f=m(b);function b(e,t,r,n){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(o=f.call(this)).name="",o.lockParentMaterials=!0;var l={resPath:"",promise:null,turretSet:null,target:a.vec3.create(),state:i.EveTurretSet.State.INACTIVE,locators:n,faction:null};Reflect.defineProperty(h(o),"locatorName",{value:r}),Reflect.defineProperty(h(o),"resPath",{value:l.resPath});var s=h(o);function d(e){if(l.state=e,l.turretSet){switch(e){case i.EveTurretSet.State.FIRING:l.turretSet.EnterStateFiring();break;case i.EveTurretSet.State.IDLE:l.turretSet.EnterStateIdle();break;case i.EveTurretSet.State.INACTIVE:l.turretSet.EnterStateDeactive()}console.log("Set state")}}return o.GetTurretSet=function(){return l.turretSet},o.SetTarget=function(e){a.vec3.copy(l.target,e),l.turretSet&&l.turretSet.SetTargetPosition(l.target)},o.SetFaction=function(){var t=p(regeneratorRuntime.mark((function t(r,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l.faction!==r||n){t.next=2;break}return t.abrupt("return");case 2:if(l.faction=r,!l.turretSet){t.next=8;break}return t.next=6,c.WrappedClient.fetchEveSOF();case 6:t.sent.SetupTurretMaterial(l.turretSet,e.wrapped.dna.split(":")[1],l.faction,o.lockParentMaterials?e.wrapped.mesh.opaqueAreas[0].effect.parameters:null);case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),o.Mount=function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.resPath===t){e.next=6;break}return o.Unmount(),l.resPath=t,e.next=5,u.tw2.Fetch(t).then((function(e){l.resPath===t&&(l.turretSet=e,l.turretSet.locatorName=r,s.Rebuild())})).catch((function(e){s.Rebuild()}));case 5:l.promise=e.sent;case 6:return e.abrupt("return",l.promise);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.Unmount=function(){if(l.turretSet){var e=t.attachments||t.turretSets;e.splice(e.indexOf(l.turretSet),1)}l.resPath="",l.promise=null,l.turretSet=null,console.log("Unmounted...")},o.Fire=function(){d(i.EveTurretSet.State.FIRING)},o.Idle=function(){d(i.EveTurretSet.State.IDLE)},o.Deactivate=function(){d(i.EveTurretSet.State.INACTIVE)},o.Rebuild=function(r){if(r&&(l.locators=r),l.turretSet){var n=t.attachments||t.turretSets;n.includes(l.turretSet)||(n.push(l.turretSet),console.log("Added to array")),l.turretSet.UpdateItemsFromLocators(l.locators),console.log("Updated items"),l.turretSet.SetTargetPosition(l.target),console.log("Set target position"),o.SetFaction(e.wrapped.dna.split(":")[1],!0)}},o}return t=b,r=null,n=[{key:"RebuildLocatorSlots",value:(l=p(regeneratorRuntime.mark((function e(t,r,n,i){var a,u,c,l,f,p=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=RegExp(String.raw(s(),n),"i"),u=[],Object(o.toArray)(r).forEach((function(e){e.locators.forEach((function(r){var n=a.exec(r.name);if(n){var i=parseInt(n[2],10),c=n[1]+"_"+i,l=u.find((function(e){return e.name===c}));l||(l={name:c,index:i,locators:[],parent:t,wrapped:e},u.push(l)),Object(o.addToArray)(l.locators,r)}}))})),u.sort((function(e,t){return e.index-t.index})),c=Array.from(i),l=function(e){var r=i.find((function(t){return t.locatorName===u[e].name}));if(r)c.splice(c.indexOf(r),1),r.Rebuild(u[e].locators);else{var n=new p(t,u[e].wrapped,u[e].name,u[e].locators);i.push(n)}},f=0;f<u.length;f++)l(f);return c.forEach((function(e){e.Unmount(),Object(o.removeFromArray)(i,e)})),e.abrupt("return",i.sort((function(e,t){return e.locatorName-t.locatorName})));case 8:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return l.apply(this,arguments)})}],r&&d(t.prototype,r),n&&d(t,n),b}(n.Tw2EventEmitter)},"./wrapped/WrappedSpaceObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WrappedSpaceObject",(function(){return h}));var n,i=r("./global/utils/index.js"),o=r("./wrapped/APIManager.js"),a=r("./wrapped/WrappedGenericObject.js"),u=r("./wrapped/WrappedSlots.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function s(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,u,"next",e)}function u(e){s(o,n,i,a,u,"throw",e)}a(void 0)}))}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=i.meta.type("WrappedSpaceObject")(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(m,e);var t,r,n,a,c,s=y(m);function m(e,t){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),!e)throw new TypeError("Invalid wrapped object");return(r=s.call(this)).turrets=[],r.xlTurrets=[],r.atomics=[],r.chains=[],r.launchers=[],r.wrapped=e,t&&r.SetValues(t),r}return t=m,r=[{key:"SetParameter",value:function(e,t){this.wrapped.mesh.FindParameters(e).forEach((function(e){return e.SetValue(t)}))}}],n=[{key:"fetch",value:(c=f(regeneratorRuntime.mark((function e(){var t,r,n,a,u,c,s,f,p,d,y,m,b,h,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:{},r=v.length>1?v[1]:void 0,Object(i.isString)(t)?t={resPath:t}:Object(i.isNumber)(t)&&(t={typeID:t}),a=(n=t).resPath,u=n.typeID,c=n.skinID,s=n.skinMaterialID,f=n.dna,p=l(n,["resPath","typeID","skinID","skinMaterialID","dna"]),!u){e.next=30;break}if(!c){e.next=13;break}return e.next=8,Object(o.getResPathFromTypeIDAndSkinID)(u,c);case 8:d=e.sent,p.name||(p.name=d.name),a=d.dna,e.next=28;break;case 13:if(!s){e.next=21;break}return e.next=16,Object(o.getResPathFromTypeIDAndSkinMaterialID)(u,s);case 16:y=e.sent,p.name||(p.name=y.name),a=y.dna,e.next=28;break;case 21:return e.next=23,Object(o.getTypeID)(u);case 23:return m=e.sent,p.name||(p.name=m.name),e.next=27,Object(o.getResPathFromTypeID)(u);case 27:a=e.sent;case 28:e.next=31;break;case 30:f&&(a=f);case 31:if(!a){e.next=41;break}return e.next=34,r.Build(a);case 34:return(b=e.sent)._resPath=a,h=new this(b),e.next=39,this.PrepareObject(h,b);case 39:return h.SetValues(p),e.abrupt("return",h);case 41:if(a){e.next=43;break}throw new ReferenceError("Could not identify resource path");case 43:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"PrepareObject",value:(a=f(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([u.WrappedSlot.RebuildLocatorSlots(t,r,"chain",t.chains),u.WrappedSlot.RebuildLocatorSlots(t,r,"atomic",t.atomics),u.WrappedSlot.RebuildLocatorSlots(t,r,"launcher",t.launchers),u.WrappedSlot.RebuildLocatorSlots(t,r,"turret",t.turrets),u.WrappedSlot.RebuildLocatorSlots(t,r,"xl",t.xlTurrets)]);case 2:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})}],r&&p(t.prototype,r),n&&p(t,n),m}(a.WrappedGenericObject))||n},"./wrapped/camera/Camera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Camera",(function(){return d}));var n=r("./core/Tw2Transform.js"),i=r("./global/math/index.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(f,e);var t,r,n,o=s(f);function f(){var e;a(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).view=null,e._projection=i.mat4.create(),e._projectionInverse=i.mat4.create(),e._worldInverse=i.mat4.create(),e._rebuildLocal=!0,e}return t=f,(r=[{key:"Focus",value:function(e){}},{key:"LookAt",value:function(e){return c(p(f.prototype),"LookAt",this).call(this,e,!0)}},{key:"LookAtWorld",value:function(e){return c(p(f.prototype),"LookAtWorld",this).call(this,e,!0)}},{key:"GetWorldDirection",value:function(e){return this.RebuildTransforms(),i.vec3.set(e,-this._worldTransform[8],-this._worldTransform[9],-this._worldTransform[10]),i.vec3.normalize(e,e)}},{key:"GetView",value:function(e){return this.RebuildTransforms(),i.mat4.copy(e,this._worldInverse)}},{key:"GetProjection",value:function(e,t){return t&&"aspect"in this&&t!==this.aspect&&(this.aspect=t,this._rebuildLocal=!0),this.RebuildTransforms(),i.mat4.copy(e,this._projection)}},{key:"Update",value:function(e){this.EmitEvent("update",e)}},{key:"OnValueChanged",value:function(e){this._rebuildLocal=!0}},{key:"isCamera",get:function(){return!0}}])&&u(t.prototype,r),n&&u(t,n),f}(n.Tw2Transform);d.DEFAULT_FOV=50,d.DEFAULT_ZOOM=1,d.DEFAULT_NEAR=.1,d.DEFAULT_FAR=2e3,d.DEFAULT_ASPECT=1,d.DEFAULT_FOCUS=10,d.DEFAULT_FILM_GAUGE=35,d.DEFAULT_FILM_OFFSET=0},"./wrapped/camera/CameraOrbitControls.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CameraOrbitControls",(function(){return v}));var n,i,o,a=r("./global/utils/index.js"),u=r("./global/math/index.js"),c=(r("./global/index.js"),r("./global/constant/index.js"));function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},v=a.meta.type("CameraOrbitControls")((o=i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(r,e);var t=d(r);function r(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(i=t.call(this)).camera=null,i.domElement=null,i.enabled=!0,i.target=u.vec3.create(),i.target0=u.vec3.create(),i.position0=u.vec3.create(),i.zoom0=null,i._domElementKeyEvents=null,i.minDistance=0,i.maxDistance=1/0,i.minZoom=0,i.maxZoom=1/0,i.minPolarAngle=0,i.maxPolarAngle=Math.PI,i.minAzimuthAngle=-1/0,i.maxAzimuthAngle=1/0,i.enableDamping=!1,i.dampingFactor=.05,i.enableZoom=!0,i.zoomSpeed=1,i.enableRotate=!0,i.rotateSpeed=1,i.enablePan=!0,i.panSpeed=1,i.screenSpacePanning=!0,i.keyPanSpeed=7,i.autoRotate=!1,i.autoRotateSpeed=2,i.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},i.mouseButtons={LEFT:c.Mouse.ROTATE,MIDDLE:c.Mouse.DOLLY,RIGHT:c.Mouse.PAN},i.touches={ONE:c.Touch.ROTATE,TWO:c.Touch.DOLLY_PAN},i._dirty=!0,i._state=h.NONE,i._spherical=u.vec3.create(),i._sphericalDelta=u.vec3.create(),i._scale=1,i._panOffset=u.vec3.create(),i._zoomChanged=!1,i._rotateStart=u.vec2.create(),i._rotateEnd=u.vec2.create(),i._rotateDelta=u.vec2.create(),i._panStart=u.vec2.create(),i._panEnd=u.vec2.create(),i._panDelta=u.vec2.create(),i._dollyStart=u.vec2.create(),i._dollyEnd=u.vec2.create(),i._dollyDelta=u.vec2.create(),i._pointers=[],i._pointerPositions={},i._offset=u.vec3.create(),i._lastPosition=u.vec3.create(),i._quat=u.quat.create(),i._quatInverse=u.quat.create(),i._lastQuaternion=u.quat.create(),i._UP=u.vec3.fromValues(0,1,0),i._handleMouseDownRotate=function(e){console.log("rotate"),u.vec2.set(i._rotateStart,e.clientX,e.clientY),i._dirty=!0},i._handleMouseDownDolly=function(e){console.log("dolly"),u.vec2.set(i._dollyStart,e.clientX,e.clientY),i._dirty=!0},i._handleMouseDownPan=function(e){console.log("pan"),u.vec2.set(i._panStart,e.clientX,e.clientY),i._dirty=!0},i._handleMouseMoveRotate=function(e){console.log("rotate"),u.vec2.set(i._rotateEnd,e.clientX,e.clientY),u.vec2.subtract(i._rotateDelta,i._rotateEnd,i._rotateStart),u.vec2.scale(i._rotateDelta,i._rotateDelta,i.rotateSpeed),i._RotateLeft(2*Math.PI*i._rotateDelta[0]/i.domElement.clientHeight),i._RotateUp(2*Math.PI*i._rotateDelta[1]/i.domElement.clientHeight),u.vec2.copy(i._rotateStart,i._rotateEnd),i.InternalUpdate()},i._handleMouseMoveDolly=function(e){console.log("dolly"),u.vec2.set(i._dollyEnd,e.clientX,e.clientY),u.vec2.subtract(i._dollyDelta,i._dollyEnd,i._dollyStart),i._dollyDelta[1]>0?i._DollyOut(i.zoomScale):i._dollyDelta[1]<0&&i._DollyIn(i.zoomScale),u.vec2.copy(i._dollyStart,i._dollyEnd),i.InternalUpdate()},i._handleMouseMovePan=function(e){console.log("pan"),u.vec2.set(i._panEnd,e.clientX,e.clientY),u.vec2.subtract(i._panDelta,i._panEnd,i._panStart),i._Pan(i._panDelta[0],i._panDelta[1]),u.vec2.copy(i._panStart,i._panEnd),i.InternalUpdate()},i._handleMouseWheel=function(e){console.log("wheel"),e.deltaY<0?i._DollyIn(i.zoomScale):e.deltaY>0&&i._DollyOut(i.zoomScale),i.InternalUpdate()},i._handleKeyDown=function(e){var t=!1;switch(e.code){case i.keys.UP:console.log("Key up"),i._Pan(0,i.keyPanSpeed),t=!0;break;case i.keys.BOTTOM:console.log("Key down"),i._Pan(0,-i.keyPanSpeed),t=!0;break;case i.keys.LEFT:console.log("Key left"),i._Pan(i.keyPanSpeed,0),t=!0;break;case i.keys.RIGHT:console.log("Key right"),i._Pan(-i.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),i.InternalUpdate())},i._handleTouchStartRotate=function(){var e=i._pointers,t=e[0].pageX,r=e[0].pageY;1!==e.length&&(t=.5*(t+e[1].pageX),r=.5*(r+e[1].pageY)),u.vec2.set(i._rotateStart,t,r),i._dirty=!0},i._handleTouchStartPan=function(){var e=i._pointers,t=e[0].pageX,r=e[0].pageY;1!==e.length&&(t=.5*(t+e[1].pageX),r=.5*(r+e[1].pageY)),u.vec2.set(i._panStart,t,r),i._dirty=!0},i._handleTouchStartDolly=function(){var e=i._pointers,t=e[0].pageX-e[1].pageX,r=e[0].pageY-e[1].pageY,n=Math.sqrt(t*t+r*r);u.vec2.set(i._dollyStart,0,n),i._dirty=!0},i._handleTouchStartDollyPan=function(){i.enableZoom&&i._handleTouchStartDolly(),i.enablePan&&i._handleTouchStartPan()},i._handleTouchStartDollyRotate=function(){i.enableZoom&&i._handleTouchStartDolly(),i.enablePan&&i._handleTouchStartRotate()},i._handleTouchMoveRotate=function(e){var t=e.pageX,r=e.pageY;if(1!==i._pointers.length){var n=i._GetSecondPointerPosition(e);t=.5*(t+n[0]),r=.5*(r+n[1])}u.vec2.set(i._rotateEnd,t,r),u.vec2.subtract(i._rotateDelta,i._rotateEnd,i._rotateStart),u.vec2.scale(i._rotateDelta,i._rotateDelta,i.rotateSpeed);var o=i.domElement.clientHeight;i._RotateLeft(2*Math.PI*i._rotateDelta[0]/o),i._RotateUp(2*Math.PI*i._rotateDelta[1]/o),u.vec2.copy(i._rotateStart,i._rotateEnd),i._dirty=!0},i._handleTouchMovePan=function(e){var t=e.pageX,r=e.pageY;if(1!==i._pointers.length){var n=i._GetSecondPointerPosition(e);t=.5*(t+n[0]),r=.5*(r+n[1])}u.vec2.set(i._panEnd,t,r),u.vec2.subtract(i._panDelta,i._panEnd,i._panStart),u.vec2.scale(i._panDelta,i.panSpeed),i._Pan(i._panDelta[0],i._panDelta[1]),u.vec2.copy(i._panStart,i._panEnd),i._dirty=!0},i._handleTouchMoveDolly=function(e){var t=i._GetSecondPointerPosition(e),r=e.pageX-t[0],n=e.pageY-t[1],o=Math.sqrt(r*r+n*n);u.vec2.set(i._dollyEnd,0,o),u.vec2.set(i._dollyDelta,0,Math.pow(i._dollyEnd[1]/i._dollyStart[1],i.zoomSpeed)),i._DollyOut(i._dollyDelta[0]),u.vec2.copy(i._dollyStart,i._dollyEnd),i._dirty=!0},i._handleTouchMoveDollyPan=function(e){i.enableZoom&&i._handleTouchMoveDolly(e),i.enablePan&&i._handleTouchMovePan(e)},i._handleTouchMoveDollyRotate=function(e){i.enableZoom&&i._handleTouchMoveDolly(e),i.enableRotate&&i._handleTouchMoveRotate(e)},i._onPointerDown=function(e){i.enabled&&(0===i._pointers.length&&(i.domElement.setPointerCapture(e.pointerId),i.domElement.addEventListener("pointermove",i._onPointerMove),i.domElement.addEventListener("pointerup",i._onPointerUp)),i._AddPointer(e),"touch"===e.pointerType?i._onTouchStart(e):i._onMouseDown(e))},i._onPointerMove=function(e){i.enabled&&("touch"===e.pointerType?i._onTouchMove(e):i._onMouseMove(e))},i._onPointerUp=function(e){i._RemovePointer(e),0===i._pointers.length&&(i.domElement.releasePointerCapture(e.pointerId),i.domElement.removeEventListener("pointermove",i._onPointerMove),i.domElement.removeEventListener("pointerup",i._onPointerUp)),i.EmitEvent("end",m(i)),i._state=h.NONE},i._onPointerCancel=function(e){i._RemovePointer(e)},i._onMouseDown=function(e){var t;switch(console.log("Mouse down"),e.button){case 0:t=i.mouseButtons.LEFT,console.log("- left");break;case 1:t=i.mouseButtons.MIDDLE,console.log("- middle");break;case 2:t=i.mouseButtons.RIGHT,console.log("- right");break;default:t=-1}switch(t){case c.Mouse.DOLLY:if(!i.enableZoom)return;i._handleMouseDownDolly(e),i._state=h.DOLLY;break;case c.Mouse.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!i.enablePan)return;i._handleMouseDownPan(e),i._state=h.PAN}else{if(!i.enableRotate)return;i._handleMouseDownRotate(e),i._state=h.ROTATE}break;case c.Mouse.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!i.enableRotate)return;i._handleMouseDownRotate(e),i.state=h.ROTATE}else{if(!i.enablePan)return;i._handleMouseDownPan(e),i._state=h.PAN}break;default:i._state=h.NONE}i._state!==h.NONE&&i.EmitEvent("start",m(i))},i._onMouseMove=function(e){if(console.log("Mouse move"),i.enabled)switch(i._state){case h.ROTATE:if(!i.enableRotate)return;i._handleMouseMoveRotate(e);break;case h.DOLLY:if(!i.enableZoom)return;i._handleMouseMoveDolly(e);break;case h.PAN:if(!i.enablePan)return;i._handleMouseMovePan(e)}},i._onMouseWheel=function(e){i.enabled&&i.enableZoom&&i._state===h.NONE&&(e.preventDefault(),i.EmitEvent("start",m(i)),i._handleMouseWheel(e),i.EmitEvent("end",m(i)))},i._onKeyDown=function(e){i.enabled&&i.enablePan&&i._handleKeyDown(e)},i._onTouchStart=function(e){switch(i._trackPointer(e),i._pointers.length){case 1:switch(i.touches.ONE){case c.Touch.ROTATE:if(!i.enableRotate)return;i._handleTouchStartRotate(),i._state=h.TOUCH_ROTATE;break;case c.Touch.PAN:if(!i.enablePan)return;i._handleTouchStartPan(),i._state=h.TOUCH_PAN;break;default:i._state=h.NONE}break;case 2:switch(i.touches.TWO){case c.Touch.DOLLY_PAN:if(!i.enableZoom&&!i.enablePan)return;i._handleTouchStartDollyPan(),i._state=h.TOUCH_DOLLY_PAN;break;case c.Touch.DOLLY_ROTATE:if(!i.enableZoom&&!i.enableRotate)return;i._handleTouchStartDollyRotate(),i._state=h.TOUCH_DOLLY_ROTATE;break;default:i._state=h.NONE}break;default:i._state=h.NONE}i._state!==h.NONE&&i.EmitEvent("start",m(i))},i._onTouchMove=function(e){switch(i._TrackPointer(e),i._state){case h.TOUCH_ROTATE:if(!i.enableRotate)return;i._handleTouchMoveRotate(e),i.InternalUpdate();break;case h.TOUCH_PAN:if(!i.enablePan)return;i._handleTouchMovePan(e),i.InternalUpdate();break;case h.TOUCH_DOLLY_PAN:if(!i.enableZoom&&!i.enablePan)return;i._handleTouchMoveDollyPan(e),i.InternalUpdate();break;case h.TOUCH_DOLLY_ROTATE:if(!i.enableZoom&&!i.enableRotate)return;i._handleTouchMoveDollyRotate(e),i.InternalUpdate();break;default:i._state=h.NONE}},i._onContextMenu=function(e){i.enabled&&e.preventDefault()},i.camera=e,e.UP&&u.vec3.copy(i._UP,e.UP),u.quat.rotationTo(i._quat,i._UP,[0,1,0]),u.quat.invert(i._quatInverse,i._quat),Object(a.isString)(n)&&(n=document.getElementById(n)),i.domElement=n,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",i._onContextMenu),i.domElement.addEventListener("pointerdown",i._onPointerDown),i.domElement.addEventListener("pointercancel",i._onPointerCancel),i.domElement.addEventListener("wheel",i._onMouseWheel,{passive:!1}),i._dirty=!0,i}return f(r,[{key:"polarAngle",get:function(){return this._spherical[0]}},{key:"azimuthalAngle",get:function(){return this._spherical[1]}},{key:"distance",get:function(){return u.vec3.distance(this.camera.translation,this.target)}},{key:"autoRotationAngle",get:function(){return 2*Math.PI/60/60*this.autoRotateSpeed}},{key:"zoomScale",get:function(){return Math.pow(.95,this.zoomSpeed)}}]),f(r,[{key:"OnDestroy",value:function(){this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),null!==this._domElementKeyEvents&&this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown)}},{key:"ListenToKeyEvents",value:function(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}},{key:"SaveState",value:function(){u.vec3.copy(this.target0,this.target),u.vec3.copy(this.position0,this.camera.translation),this.zoom0=this.camera.zoom}},{key:"Reset",value:function(){u.vec3.copy(this.target,this.target0),u.vec3.copy(this.camera.translation,this.position0),this.camera.zoom=this.zoom0,this.camera.UpdateValues(),this.EmitEvent("change",this),this.InternalUpdate(),this._state=h.NONE,this._dirty=!0}},{key:"Update",value:function(e){(this._dirty||this.enableDamping||this.autoRotate)&&this.InternalUpdate()}},{key:"InternalUpdate",value:function(){var e=2*Math.PI,t=this.camera.GetTranslation(u.vec3.create()),r=this.camera.GetTranslation(u.vec3.create()),n=Array.from(t),i=Array.from(r);u.vec3.copy(this._offset,t),u.vec3.subtract(this._offset,this._offset,this.target),u.vec3.transformQuat(this._offset,this._offset,this._quat);var o=Array.from(this._offset);u.vec3.equals(this._offset,o)||console.log("> Offset: ".concat(Array.from(this._offset))),this.autoRotate&&this._state===h.NONE&&this._RotateLeft(this.autoRotationAngle),this.enableDamping?(this._spherical[0]=this._spherical[0]*this.dampingFactor,this._spherical[1]=this._spherical[1]*this.dampingFactor):(this._spherical[0]+=1,this._spherical[1]+=1);var a=this.minAzimuthAngle,c=this.maxAzimuthAngle;return isFinite(a)&&isFinite(c)&&(a<-Math.PI?a+=e:a>Math.PI&&(a-=e),c<-Math.PI?c+=e:c>Math.PI&&(c-=e),this._spherical[1]=a<=c?Math.max(a,Math.min(c,this._spherical[1])):this._spherical[1]>(a+c)/2?Math.max(a,this._spherical[1]):Math.min(c,this._spherical[1])),this._spherical[0]=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical[0])),u.vec3.makeSphericalSafe(this._spherical,this._spherical),this._spherical[2]*=this._scale,this._spherical[2]=Math.max(this.minDistance,Math.min(this.maxDistance,this._spherical[2])),this.enableDamping?u.vec3.scaleAndAdd(this.target,this.target,this._panOffset,this.dampingFactor):u.vec3.add(this.target,this.target,this._panOffset),u.vec3.fromSpherical(this._offset,this._spherical),u.vec3.transformQuat(this._offset,this._offset,this._quatInverse),u.vec3.equals(t,n)||console.log("< Position: ".concat(Array.from(t)," from ").concat(n)),u.quat.equals(r,i)||console.log("< Rotation: ".concat(Array.from(r)," from ").concat(i)),u.vec3.equals(this._offset,o)||console.log("< Offset: ".concat(Array.from(this._offset)," from ").concat(o)),u.vec3.add(t,this.target,this._offset),this.camera.SetTranslation(t),this.camera.SetRotation(r),this.camera.RebuildTransforms(),this.camera.LookAt(this.target),this.enableDamping?(this._sphericalDelta[0]*=1-this.dampingFactor,this._sphericalDelta[1]*=1-this.dampingFactor,u.vec3.scale(this._panOffset,this._panOffset,1-this.dampingFactor)):(u.vec3.set(this._sphericalDelta,0,0,0),u.vec3.set(this._panOffset,0,0,0)),this._scale=1,this._zoomChanged||u.vec3.squaredDistance(this._lastPosition,t)>u.num.EPSILON||8*(1-u.quat.dot(this._lastQuaternion,r))>u.num.EPSILON?(this.EmitEvent("change",this),u.vec3.copy(this._lastPosition,t),u.quat.copy(this._lastQuaternion,r),this._zoomChanged=!1,this._dirty=!1,!0):(this._dirty=!1,!1)}},{key:"GetLastPosition",value:function(e){return u.vec3.copy(e,this._lastPosition)}},{key:"GetLastRotation",value:function(e){return u.quat.copy(e,this._lastQuaternion)}},{key:"_RotateLeft",value:function(e){console.log("- left"),this._spherical[1]-=e,this._dirty=!0}},{key:"_RotateUp",value:function(e){console.log("- up"),this._spherical[0]-=e,this._dirty=!0}},{key:"_PanLeft",value:function(e){console.log("- left");var t=r.global,n=t.vec3_0,i=t.mat4_0;this.camera.GetTransform(i),u.vec3.fromMat4Column(n,i,0),u.vec3.scale(n,n,-e),u.vec3.add(this._panOffset,this._panOffset,n),this._dirty=!0}},{key:"_PanUp",value:function(e){console.log("- up");var t=r.global,n=t.vec3_0,i=t.mat4_0;this.camera.GetTransform(i),this.screenSpacePanning?u.vec3.fromMat4Column(n,i,1):(u.vec3.fromMat4Column(n,i,0),u.vec3.cross(n,this._UP,n)),u.vec3.scale(n,n,e),u.vec3.add(this._panOffset,this._panOffset,n),this._dirty=!0}},{key:"_Pan",value:function(e,t){console.log("- Pan");var n=r.global.vec3_0,i=this.domElement;if(this.camera.isPerspectiveCamera){u.vec3.subtract(n,this.camera.translation,this.target);var o=u.vec3.length(n);o*=Math.tan(this.camera.fov/2*Math.PI/180),this._PanLeft(2*e*o/i.clientHeight),this._PanUp(2*t*o/i.clientHeight)}else this.camera.isOrthographicCamera?(this._PanLeft(e*(this.camera.right-this.camera.left)/this.camera.zoom/i.clientWidth),this._PanUp(t*(this.camera.top-this.camera.bottom)/this.camera.zoom/i.clientHeight)):(console.log("Unknown camera"),this.enablePan=!1);this._dirty=!0}},{key:"_DollyOut",value:function(e){console.log("- out"),this.camera.isPerspectiveCamera?this._scale/=e:this.camera.isOrthographicCamera?(this.camera.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.camera.zoom*e)),this.camera.UpdateValues(),this._zoomChanged=!0):(console.log("Unknown camera"),this.enableZoom=!1),this._dirty=!0}},{key:"_DollyIn",value:function(e){console.log("- in"),this.camera.isPerspectiveCamera?this._scale*=e:this.camera.isOrthographicCamera?(this.camera.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.camera.zoom/e)),this.camera.UpdateValues(),this._zoomChanged=!0):(console.log("Unknown camera"),this.enableZoom=!1),this._dirty=!0}},{key:"_AddPointer",value:function(e){this._pointers.push(e),this._dirty=!0}},{key:"_RemovePointer",value:function(e){Reflect.deleteProperty(this._pointerPositions,e.pointerId);for(var t=0;t<this._pointers.length;t++)if(this._pointers[t].pointerId===e.pointerId)return this._pointers.splice(t,1),void(this._dirty=!0)}},{key:"_TrackPointer",value:function(e){var t=this._pointerPositions[e.pointerId];t||(t=u.vec2.create(),this._pointerPositions[e.pointerId]=t),u.vec2.set(t,e.pageX,e.pageY),this._dirty=!0}},{key:"_GetSecondPointerPosition",value:function(e){var t=e.pointerId===this.pointers[0].pointerId?this.pointers[1]:this.pointers[0];return this._pointerPositions[t.pointerId]}}]),r}(a.meta.Model),i.State=h,i.global={vec3_0:u.vec3.create(),mat4_0:u.mat4.create()},n=o))||n},"./wrapped/camera/CameraView.js":function(e,t,r){"use strict";r.r(t),r.d(t,"CameraView",(function(){return D}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g,w,x=r("./global/utils/index.js");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D=(n=x.meta.type("CameraView"),i=x.meta.boolean,o=x.meta.float,a=x.meta.float,u=x.meta.float,c=x.meta.float,l=x.meta.float,s=x.meta.float,n((w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(r,e);var t=E(r);function r(){var e;S(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return z(e=t.call.apply(t,[this].concat(i)),"enabled",d,O(e)),z(e,"fullWidth",y,O(e)),z(e,"fullHeight",m,O(e)),z(e,"x",b,O(e)),z(e,"y",h,O(e)),z(e,"width",v,O(e)),z(e,"height",g,O(e)),e}return r}(x.meta.Model),d=P((p=w).prototype,"enabled",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=P(p.prototype,"fullWidth",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=P(p.prototype,"fullHeight",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=P(p.prototype,"x",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=P(p.prototype,"y",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=P(p.prototype,"width",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=P(p.prototype,"height",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=p))||f)},"./wrapped/camera/OrthoCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"OrthoCamera",(function(){return D}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h=r("./wrapped/camera/Camera.js"),v=r("./global/math/index.js"),g=r("./global/tw2.js"),w=r("./global/utils/index.js");function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var D=(n=w.meta.float,i=w.meta.float,o=w.meta.float,a=w.meta.float,u=w.meta.float,c=w.meta.float,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,r,n,i=E(o);function o(){var e;z(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _(e=i.call.apply(i,[this].concat(r)),"left",s,O(e)),_(e,"right",f,O(e)),_(e,"top",p,O(e)),_(e,"bottom",d,O(e)),_(e,"near",y,O(e)),_(e,"far",m,O(e)),e}return t=o,(r=[{key:"OnWorldTransformModified",value:function(e){v.mat4.ortho(this._projection,this.left,this.right,this.top,this.bottom,this.far,this.near),this._projection[10]*=-1,v.mat4.invert(this._projectionInverse,this._projection)}},{key:"isOrthographicCamera",get:function(){return!0}}])&&S(t.prototype,r),n&&S(t,n),o}(h.Camera),s=P((l=b).prototype,"left",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.device.viewportWidth/-2}}),f=P(l.prototype,"right",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.device.viewportWidth/2}}),p=P(l.prototype,"top",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.device.viewportHeight/-2}}),d=P(l.prototype,"bottom",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.device.viewportHeight/2}}),y=P(l.prototype,"near",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=P(l.prototype,"far",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e4}}),l)},"./wrapped/camera/OrthographicCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"OrthographicCamera",(function(){return C}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g=r("./wrapped/camera/Camera.js"),w=r("./wrapped/camera/CameraView.js"),x=r("./global/math/index.js"),_=r("./global/tw2.js"),z=r("./global/utils/index.js");function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var C=(n=z.meta.float,i=z.meta.float,o=z.meta.float,a=z.meta.float,u=z.meta.float,c=z.meta.float,l=z.meta.float,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(o,e);var t,r,n,i=R(o);function o(){var e;E(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return j(e=i.call.apply(i,[this].concat(r)),"left",f,D(e)),j(e,"right",p,D(e)),j(e,"top",d,D(e)),j(e,"bottom",y,D(e)),j(e,"near",m,D(e)),j(e,"far",b,D(e)),j(e,"zoom",h,D(e)),e}return t=o,(r=[{key:"OnWorldTransformModified",value:function(e){var t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,o=n-t,a=n+t,u=i+r,c=i-r,l=this.view;if(l&&l.enabled){var s=this._zoom/(l.width/l.fullWidth),f=this._zoom/(l.height/l.fullHeight),p=(this.right-this.left)/l.width,d=(this.top-this.bottom)/l.height;a=(o+=p*(this.view.offsetX/s))+p*(this.view.width/s),c=(u-=d*(this.view.offsetY/f))-d*(this.view.height/f)}x.mat4.makeOrthographic(this._projection,o,a,u,c,this.near,this.far),this._projection[5]*=-1,x.mat4.invert(this._projectionInverse,this._projection)}},{key:"SetViewOffset",value:function(e,t,r,n,i,o){this.aspect=e/t,this.view||(this.view=new w.CameraView),this.view.SetValues({fullWidth:e,fullHeight:t,x:r,y:n,width:i,height:o})}},{key:"isOrthographicCamera",get:function(){return!0}}])&&T(t.prototype,r),n&&T(t,n),o}(g.Camera),f=M((s=v).prototype,"left",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.device.viewportWidth/-2}}),p=M(s.prototype,"right",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.device.viewportWidth/2}}),d=M(s.prototype,"top",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.device.viewportHeight/-2}}),y=M(s.prototype,"bottom",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.device.viewportHeight/2}}),m=M(s.prototype,"near",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-4e3}}),b=M(s.prototype,"far",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4e3}}),h=M(s.prototype,"zoom",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),s)},"./wrapped/camera/PerspectiveCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PerspectiveCamera",(function(){return M}));var n,i,o,a,u,c,l,s,f,p,d,y,m,b,h,v,g=r("./wrapped/camera/Camera.js"),w=r("./wrapped/camera/CameraView.js"),x=r("./global/math/index.js"),_=r("./global/utils/index.js");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var i=D(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var M=(n=_.meta.float,i=_.meta.float,o=_.meta.float,a=_.meta.float,u=_.meta.float,c=_.meta.float,l=_.meta.float,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(o,e);var t,r,n,i=O(o);function o(){var e;j(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(e=i.call.apply(i,[this].concat(r)),"fov",f,P(e)),S(e,"zoom",p,P(e)),S(e,"near",d,P(e)),S(e,"far",y,P(e)),S(e,"aspect",m,P(e)),S(e,"filmGauge",b,P(e)),S(e,"filmOffset",h,P(e)),e}return t=o,(r=[{key:"OnWorldTransformModified",value:function(e){var t=this.near*Math.tan(.5*x.num.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,o=this.view;if(o&&o.enabled){var a=o.fullWidth,u=o.fullHeight;i+=o.offsetX*n/a,t-=o.offsetY*r/u,n*=o.width/a,r*=o.height/u}var c=this.filmOffset;0!==c&&(i+=this.near*c/this.GetFilmWidth()),x.mat4.makePerspective(this._projection,i,i+n,t,t-r,this.near,this.far),x.mat4.invert(this._projectionInverse,this._projection)}},{key:"SetFocalLength",value:function(e){var t=.5*this.GetFilmHeight()/e;this.fov=2*x.num.RAD2DEG*Math.atan(t),this._rebuildLocal=!0}},{key:"GetEffectiveFOV",value:function(){return 2*x.num.RAD2DEG*Math.atan(Math.tan(.5*x.num.DEG2RAD*this.fov)/this.zoom)}},{key:"GetFilmWidth",value:function(){return this.filmGauge*Math.min(this._aspect,1)}},{key:"GetFilmHeight",value:function(){return this.filmGauge/Math.max(this._aspect,1)}},{key:"SetViewOffset",value:function(e,t,r,n,i,o){this.aspect=e/t,this.view||(this.view=new w.CameraView),this.view.SetValues({fullWidth:e,fullHeight:t,x:r,y:n,width:i,height:o})}},{key:"isPerspectiveCamera",get:function(){return!0}}])&&E(t.prototype,r),n&&E(t,n),o}(g.Camera),f=A((s=v).prototype,"fov",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),p=A(s.prototype,"zoom",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=A(s.prototype,"near",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=A(s.prototype,"far",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e4}}),m=A(s.prototype,"aspect",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=A(s.prototype,"filmGauge",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 35}}),h=A(s.prototype,"filmOffset",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s)},"./wrapped/camera/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./wrapped/camera/OrthographicCamera.js");r.d(t,"OrthographicCamera",(function(){return n.OrthographicCamera}));var i=r("./wrapped/camera/OrthoCamera.js");r.d(t,"OrthoCamera",(function(){return i.OrthoCamera}));var o=r("./wrapped/camera/PerspectiveCamera.js");r.d(t,"PerspectiveCamera",(function(){return o.PerspectiveCamera}));var a=r("./wrapped/camera/CameraOrbitControls.js");r.d(t,"CameraOrbitControls",(function(){return a.CameraOrbitControls}))},"./wrapped/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tiny",(function(){return n}));var n=new(r("./wrapped/WrappedClient.js").WrappedClient)}})}));